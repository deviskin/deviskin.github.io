var Q1t=Object.defineProperty,j1t=Object.defineProperties,q1t=Object.getOwnPropertyDescriptors,L_e=Object.getOwnPropertySymbols,Z1t=Object.prototype.hasOwnProperty,X1t=Object.prototype.propertyIsEnumerable,B_e=(Ra,De,St)=>De in Ra?Q1t(Ra,De,{enumerable:!0,configurable:!0,writable:!0,value:St}):Ra[De]=St,Pa=(Ra,De)=>{for(var St in De||(De={}))Z1t.call(De,St)&&B_e(Ra,St,De[St]);if(L_e)for(var St of L_e(De))X1t.call(De,St)&&B_e(Ra,St,De[St]);return Ra},C2=(Ra,De)=>j1t(Ra,q1t(De));(self.webpackChunkscheduler13night=self.webpackChunkscheduler13night||[]).push([[179],{120:(Ra,De,St)=>{"use strict";var ze={};function ce(l){return"function"==typeof l}function xe(l){const a=l(c=>{Error.call(c),c.stack=(new Error).stack});return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}St.r(ze),St.d(ze,{Adder:()=>wo,Delaunay:()=>L5,FormatSpecifier:()=>ek,InternMap:()=>yC,InternSet:()=>Tm,Node:()=>jm,Voronoi:()=>pie,ZoomTransform:()=>rd,active:()=>hze,arc:()=>D8,area:()=>E8,areaRadial:()=>Aae,ascending:()=>Fs,autoType:()=>e7e,axisBottom:()=>e8e,axisLeft:()=>t8e,axisRight:()=>JBe,axisTop:()=>KBe,bin:()=>dte,bisect:()=>Sm,bisectCenter:()=>iBe,bisectLeft:()=>nBe,bisectRight:()=>Yee,bisector:()=>iD,blob:()=>k7e,brush:()=>wze,brushSelection:()=>xze,brushX:()=>Cze,brushY:()=>Sze,buffer:()=>E7e,chord:()=>Oze,chordDirected:()=>kze,chordTranspose:()=>Dze,cluster:()=>j9e,color:()=>Wu,contourDensity:()=>eUe,contours:()=>Hne,count:()=>rD,create:()=>JQe,creator:()=>pD,cross:()=>lBe,csv:()=>P7e,csvFormat:()=>$Ue,csvFormatBody:()=>WUe,csvFormatRow:()=>QUe,csvFormatRows:()=>GUe,csvFormatValue:()=>jUe,csvParse:()=>_ie,csvParseRows:()=>HUe,cubehelix:()=>ju,cumsum:()=>cBe,curveBasis:()=>xS,curveBasisClosed:()=>Aje,curveBasisOpen:()=>Ije,curveBumpX:()=>I8,curveBumpY:()=>Pae,curveBundle:()=>Pje,curveCardinal:()=>Rje,curveCardinalClosed:()=>Fje,curveCardinalOpen:()=>Nje,curveCatmullRom:()=>Lje,curveCatmullRomClosed:()=>Bje,curveCatmullRomOpen:()=>Vje,curveLinear:()=>iM,curveLinearClosed:()=>zje,curveMonotoneX:()=>Uje,curveMonotoneY:()=>Hje,curveNatural:()=>z8,curveStep:()=>$je,curveStepAfter:()=>Wje,curveStepBefore:()=>U8,descending:()=>uBe,deviation:()=>Jee,difference:()=>zBe,disjoint:()=>UBe,dispatch:()=>zy,drag:()=>gie,dragDisable:()=>gD,dragEnable:()=>mD,dsv:()=>I7e,dsvFormat:()=>ZD,easeBack:()=>kie,easeBackIn:()=>S7e,easeBackInOut:()=>kie,easeBackOut:()=>w7e,easeBounce:()=>$C,easeBounceIn:()=>x7e,easeBounceInOut:()=>C7e,easeBounceOut:()=>$C,easeCircle:()=>Die,easeCircleIn:()=>h7e,easeCircleInOut:()=>Die,easeCircleOut:()=>d7e,easeCubic:()=>HL,easeCubicIn:()=>sze,easeCubicInOut:()=>HL,easeCubicOut:()=>oze,easeElastic:()=>Mie,easeElasticIn:()=>T7e,easeElasticInOut:()=>O7e,easeElasticOut:()=>Mie,easeExp:()=>Oie,easeExpIn:()=>c7e,easeExpInOut:()=>Oie,easeExpOut:()=>u7e,easeLinear:()=>n7e,easePoly:()=>Cie,easePolyIn:()=>s7e,easePolyInOut:()=>Cie,easePolyOut:()=>o7e,easeQuad:()=>xie,easeQuadIn:()=>i7e,easeQuadInOut:()=>xie,easeQuadOut:()=>r7e,easeSin:()=>Tie,easeSinIn:()=>a7e,easeSinInOut:()=>Tie,easeSinOut:()=>l7e,every:()=>RBe,extent:()=>wm,fcumsum:()=>dBe,filter:()=>NBe,flatGroup:()=>fBe,flatRollup:()=>pBe,forceCenter:()=>U7e,forceCollide:()=>oHe,forceLink:()=>lHe,forceManyBody:()=>vHe,forceRadial:()=>yHe,forceSimulation:()=>mHe,forceX:()=>_He,forceY:()=>bHe,format:()=>nk,formatDefaultLocale:()=>Hie,formatLocale:()=>Uie,formatPrefix:()=>Z5,formatSpecifier:()=>u_,fsum:()=>hBe,geoAlbers:()=>nse,geoAlbersUsa:()=>T9e,geoArea:()=>EHe,geoAzimuthalEqualArea:()=>O9e,geoAzimuthalEqualAreaRaw:()=>RB,geoAzimuthalEquidistant:()=>D9e,geoAzimuthalEquidistantRaw:()=>FB,geoBounds:()=>RHe,geoCentroid:()=>zHe,geoCircle:()=>UHe,geoClipAntimeridian:()=>fB,geoClipCircle:()=>wre,geoClipExtent:()=>qHe,geoClipRectangle:()=>Sk,geoConicConformal:()=>M9e,geoConicConformalRaw:()=>sse,geoConicEqualArea:()=>Fk,geoConicEqualAreaRaw:()=>tse,geoConicEquidistant:()=>A9e,geoConicEquidistantRaw:()=>ose,geoContains:()=>t9e,geoDistance:()=>Ok,geoEqualEarth:()=>P9e,geoEqualEarthRaw:()=>NB,geoEquirectangular:()=>E9e,geoEquirectangularRaw:()=>rS,geoGnomonic:()=>R9e,geoGnomonicRaw:()=>LB,geoGraticule:()=>Rre,geoGraticule10:()=>n9e,geoIdentity:()=>F9e,geoInterpolate:()=>i9e,geoLength:()=>Tre,geoMercator:()=>k9e,geoMercatorRaw:()=>iS,geoNaturalEarth1:()=>N9e,geoNaturalEarth1Raw:()=>BB,geoOrthographic:()=>L9e,geoOrthographicRaw:()=>VB,geoPath:()=>g9e,geoProjection:()=>id,geoProjectionMutator:()=>IB,geoRotation:()=>mre,geoStereographic:()=>B9e,geoStereographicRaw:()=>zB,geoStream:()=>Xu,geoTransform:()=>m9e,geoTransverseMercator:()=>V9e,geoTransverseMercatorRaw:()=>UB,gray:()=>Vze,greatest:()=>MBe,greatestIndex:()=>EBe,group:()=>ite,groupSort:()=>vBe,groups:()=>rte,hcl:()=>RD,hierarchy:()=>HB,histogram:()=>dte,hsl:()=>yD,html:()=>V7e,image:()=>F7e,index:()=>gBe,indexes:()=>mBe,interpolate:()=>Sp,interpolateArray:()=>qVe,interpolateBasis:()=>Wte,interpolateBasisClosed:()=>Gte,interpolateBlues:()=>RQe,interpolateBrBG:()=>fQe,interpolateBuGn:()=>CQe,interpolateBuPu:()=>SQe,interpolateCividis:()=>zQe,interpolateCool:()=>$Qe,interpolateCubehelix:()=>j$e,interpolateCubehelixDefault:()=>UQe,interpolateCubehelixLong:()=>Wk,interpolateDate:()=>Yte,interpolateDiscrete:()=>L$e,interpolateGnBu:()=>wQe,interpolateGreens:()=>FQe,interpolateGreys:()=>NQe,interpolateHcl:()=>G$e,interpolateHclLong:()=>Q$e,interpolateHsl:()=>H$e,interpolateHslLong:()=>$$e,interpolateHue:()=>B$e,interpolateInferno:()=>YQe,interpolateLab:()=>W$e,interpolateMagma:()=>XQe,interpolateNumber:()=>Kc,interpolateNumberArray:()=>EL,interpolateObject:()=>Kte,interpolateOrRd:()=>TQe,interpolateOranges:()=>VQe,interpolatePRGn:()=>pQe,interpolatePiYG:()=>gQe,interpolatePlasma:()=>KQe,interpolatePuBu:()=>DQe,interpolatePuBuGn:()=>OQe,interpolatePuOr:()=>mQe,interpolatePuRd:()=>kQe,interpolatePurples:()=>LQe,interpolateRainbow:()=>WQe,interpolateRdBu:()=>vQe,interpolateRdGy:()=>yQe,interpolateRdPu:()=>MQe,interpolateRdYlBu:()=>_Qe,interpolateRdYlGn:()=>bQe,interpolateReds:()=>BQe,interpolateRgb:()=>kC,interpolateRgbBasis:()=>qte,interpolateRgbBasisClosed:()=>jVe,interpolateRound:()=>$k,interpolateSinebow:()=>jQe,interpolateSpectral:()=>xQe,interpolateString:()=>PL,interpolateTransformCss:()=>cne,interpolateTransformSvg:()=>une,interpolateTurbo:()=>qQe,interpolateViridis:()=>ZQe,interpolateWarm:()=>HQe,interpolateYlGn:()=>AQe,interpolateYlGnBu:()=>EQe,interpolateYlOrBr:()=>IQe,interpolateYlOrRd:()=>PQe,interpolateZoom:()=>Tse,interrupt:()=>Mm,intersection:()=>HBe,interval:()=>lqe,isoFormat:()=>rqe,isoParse:()=>aqe,json:()=>L7e,lab:()=>PD,lch:()=>zze,least:()=>kBe,leastIndex:()=>mte,line:()=>Ju,lineRadial:()=>Eae,link:()=>rM,linkHorizontal:()=>_je,linkRadial:()=>xje,linkVertical:()=>bje,local:()=>wae,map:()=>LBe,matcher:()=>bL,max:()=>oD,maxIndex:()=>pte,mean:()=>xBe,median:()=>CBe,merge:()=>vL,min:()=>aD,minIndex:()=>gte,mode:()=>wBe,namespace:()=>wC,namespaces:()=>CL,nice:()=>hte,now:()=>PC,pack:()=>b$e,packEnclose:()=>lse,packSiblings:()=>y$e,pairs:()=>TBe,partition:()=>x$e,path:()=>mf,permute:()=>cte,pie:()=>pje,piecewise:()=>Mse,pointRadial:()=>bS,pointer:()=>sc,pointers:()=>tje,polygonArea:()=>Z$e,polygonCentroid:()=>X$e,polygonContains:()=>eWe,polygonHull:()=>J$e,polygonLength:()=>tWe,precisionFixed:()=>$ie,precisionPrefix:()=>Wie,precisionRound:()=>Gie,quadtree:()=>KD,quantile:()=>CC,quantileSorted:()=>fte,quantize:()=>q$e,quickselect:()=>mL,radialArea:()=>Aae,radialLine:()=>Eae,randomBates:()=>sWe,randomBernoulli:()=>lWe,randomBeta:()=>Pse,randomBinomial:()=>Rse,randomCauchy:()=>uWe,randomExponential:()=>oWe,randomGamma:()=>XB,randomGeometric:()=>Ise,randomInt:()=>iWe,randomIrwinHall:()=>Ase,randomLcg:()=>gWe,randomLogNormal:()=>rWe,randomLogistic:()=>hWe,randomNormal:()=>ZB,randomPareto:()=>aWe,randomPoisson:()=>dWe,randomUniform:()=>nWe,randomWeibull:()=>cWe,range:()=>rc,rank:()=>DBe,reduce:()=>BBe,reverse:()=>VBe,rgb:()=>ff,ribbon:()=>t5,ribbonArrow:()=>Lze,rollup:()=>ote,rollups:()=>ate,scaleBand:()=>JB,scaleDiverging:()=>qoe,scaleDivergingLog:()=>Zoe,scaleDivergingPow:()=>T8,scaleDivergingSqrt:()=>nQe,scaleDivergingSymlog:()=>Xoe,scaleIdentity:()=>Vse,scaleImplicit:()=>YB,scaleLinear:()=>__,scaleLog:()=>Wse,scaleOrdinal:()=>KB,scalePoint:()=>mWe,scalePow:()=>s8,scaleQuantile:()=>Yse,scaleQuantize:()=>Kse,scaleRadial:()=>Xse,scaleSequential:()=>Woe,scaleSequentialLog:()=>Goe,scaleSequentialPow:()=>w8,scaleSequentialQuantile:()=>joe,scaleSequentialSqrt:()=>tQe,scaleSequentialSymlog:()=>Qoe,scaleSqrt:()=>kWe,scaleSymlog:()=>jse,scaleThreshold:()=>Jse,scaleTime:()=>JGe,scaleUtc:()=>eQe,scan:()=>ABe,schemeAccent:()=>rQe,schemeBlues:()=>yae,schemeBrBG:()=>Yoe,schemeBuGn:()=>oae,schemeBuPu:()=>aae,schemeCategory10:()=>iQe,schemeDark2:()=>sQe,schemeGnBu:()=>lae,schemeGreens:()=>_ae,schemeGreys:()=>bae,schemeOrRd:()=>cae,schemeOranges:()=>Sae,schemePRGn:()=>Koe,schemePaired:()=>oQe,schemePastel1:()=>aQe,schemePastel2:()=>lQe,schemePiYG:()=>Joe,schemePuBu:()=>hae,schemePuBuGn:()=>uae,schemePuOr:()=>eae,schemePuRd:()=>dae,schemePurples:()=>xae,schemeRdBu:()=>tae,schemeRdGy:()=>nae,schemeRdPu:()=>fae,schemeRdYlBu:()=>iae,schemeRdYlGn:()=>rae,schemeReds:()=>Cae,schemeSet1:()=>cQe,schemeSet2:()=>uQe,schemeSet3:()=>hQe,schemeSpectral:()=>sae,schemeTableau10:()=>dQe,schemeYlGn:()=>gae,schemeYlGnBu:()=>pae,schemeYlOrBr:()=>mae,schemeYlOrRd:()=>vae,select:()=>ro,selectAll:()=>nje,selection:()=>Uy,selector:()=>dD,selectorAll:()=>_L,shuffle:()=>vte,shuffler:()=>yte,some:()=>FBe,sort:()=>uL,stack:()=>jje,stackOffsetDiverging:()=>Zje,stackOffsetExpand:()=>qje,stackOffsetNone:()=>w_,stackOffsetSilhouette:()=>Xje,stackOffsetWiggle:()=>Yje,stackOrderAppearance:()=>cle,stackOrderAscending:()=>ule,stackOrderDescending:()=>Jje,stackOrderInsideOut:()=>eqe,stackOrderNone:()=>T_,stackOrderReverse:()=>tqe,stratify:()=>T$e,style:()=>Om,subset:()=>WBe,sum:()=>IBe,superset:()=>xte,svg:()=>z7e,symbol:()=>Eje,symbolAsterisk:()=>Rae,symbolCircle:()=>sM,symbolCross:()=>Fae,symbolDiamond:()=>Lae,symbolDiamond2:()=>Bae,symbolPlus:()=>Vae,symbolSquare:()=>zae,symbolSquare2:()=>Uae,symbolStar:()=>$ae,symbolTriangle:()=>Wae,symbolTriangle2:()=>Gae,symbolWye:()=>Qae,symbolX:()=>jae,symbols:()=>qae,symbolsFill:()=>qae,symbolsStroke:()=>Mje,text:()=>YD,thresholdFreedmanDiaconis:()=>_Be,thresholdScott:()=>bBe,thresholdSturges:()=>gL,tickFormat:()=>Bse,tickIncrement:()=>bC,tickStep:()=>Vy,ticks:()=>By,timeDay:()=>dS,timeDays:()=>IWe,timeFormat:()=>x8,timeFormatDefaultLocale:()=>$oe,timeFormatLocale:()=>Doe,timeFriday:()=>coe,timeFridays:()=>LWe,timeHour:()=>d8,timeHours:()=>AWe,timeInterval:()=>Do,timeMillisecond:()=>u8,timeMilliseconds:()=>toe,timeMinute:()=>h8,timeMinutes:()=>EWe,timeMonday:()=>fS,timeMondays:()=>PWe,timeMonth:()=>f8,timeMonths:()=>VWe,timeParse:()=>Hoe,timeSaturday:()=>uoe,timeSaturdays:()=>BWe,timeSecond:()=>Fp,timeSeconds:()=>ioe,timeSunday:()=>b_,timeSundays:()=>hoe,timeThursday:()=>Ym,timeThursdays:()=>NWe,timeTickInterval:()=>Ooe,timeTicks:()=>Toe,timeTuesday:()=>aoe,timeTuesdays:()=>RWe,timeWednesday:()=>loe,timeWednesdays:()=>FWe,timeWeek:()=>b_,timeWeeks:()=>hoe,timeYear:()=>Np,timeYears:()=>zWe,timeout:()=>FL,timer:()=>wD,timerFlush:()=>nne,transition:()=>fne,transpose:()=>_te,tree:()=>I$e,treemap:()=>P$e,treemapBinary:()=>R$e,treemapDice:()=>uS,treemapResquarify:()=>N$e,treemapSlice:()=>Hk,treemapSliceDice:()=>F$e,treemapSquarify:()=>Sse,tsv:()=>R7e,tsvFormat:()=>ZUe,tsvFormatBody:()=>XUe,tsvFormatRow:()=>KUe,tsvFormatRows:()=>YUe,tsvFormatValue:()=>JUe,tsvParse:()=>bie,tsvParseRows:()=>qUe,union:()=>GBe,utcDay:()=>pS,utcDays:()=>$We,utcFormat:()=>qk,utcFriday:()=>yoe,utcFridays:()=>qWe,utcHour:()=>m8,utcHours:()=>HWe,utcMillisecond:()=>u8,utcMilliseconds:()=>toe,utcMinute:()=>g8,utcMinutes:()=>UWe,utcMonday:()=>gS,utcMondays:()=>WWe,utcMonth:()=>v8,utcMonths:()=>XWe,utcParse:()=>C8,utcSaturday:()=>_oe,utcSaturdays:()=>ZWe,utcSecond:()=>Fp,utcSeconds:()=>ioe,utcSunday:()=>x_,utcSundays:()=>boe,utcThursday:()=>Jm,utcThursdays:()=>jWe,utcTickInterval:()=>woe,utcTicks:()=>Soe,utcTuesday:()=>moe,utcTuesdays:()=>GWe,utcWednesday:()=>voe,utcWednesdays:()=>QWe,utcWeek:()=>x_,utcWeeks:()=>boe,utcYear:()=>Lp,utcYears:()=>YWe,variance:()=>Kee,window:()=>SL,xml:()=>B7e,zip:()=>bte,zoom:()=>gqe,zoomIdentity:()=>dM,zoomTransform:()=>fle});const ie=xe(l=>function(a){l(this),this.message=a?`${a.length} errors occurred during unsubscription:\n${a.map((c,u)=>`${u+1}) ${c.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=a});function ye(l,o){if(l){const a=l.indexOf(o);0<=a&&l.splice(a,1)}}class Pe{constructor(o){this.initialTeardown=o,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let o;if(!this.closed){this.closed=!0;const{_parentage:a}=this;if(a)if(this._parentage=null,Array.isArray(a))for(const h of a)h.remove(this);else a.remove(this);const{initialTeardown:c}=this;if(ce(c))try{c()}catch(h){o=h instanceof ie?h.errors:[h]}const{_teardowns:u}=this;if(u){this._teardowns=null;for(const h of u)try{Ne(h)}catch(d){o=null!=o?o:[],d instanceof ie?o=[...o,...d.errors]:o.push(d)}}if(o)throw new ie(o)}}add(o){var a;if(o&&o!==this)if(this.closed)Ne(o);else{if(o instanceof Pe){if(o.closed||o._hasParent(this))return;o._addParent(this)}(this._teardowns=null!==(a=this._teardowns)&&void 0!==a?a:[]).push(o)}}_hasParent(o){const{_parentage:a}=this;return a===o||Array.isArray(a)&&a.includes(o)}_addParent(o){const{_parentage:a}=this;this._parentage=Array.isArray(a)?(a.push(o),a):a?[a,o]:o}_removeParent(o){const{_parentage:a}=this;a===o?this._parentage=null:Array.isArray(a)&&ye(a,o)}remove(o){const{_teardowns:a}=this;a&&ye(a,o),o instanceof Pe&&o._removeParent(this)}}Pe.EMPTY=(()=>{const l=new Pe;return l.closed=!0,l})();const Ve=Pe.EMPTY;function Fe(l){return l instanceof Pe||l&&"closed"in l&&ce(l.remove)&&ce(l.add)&&ce(l.unsubscribe)}function Ne(l){ce(l)?l():l.unsubscribe()}const le={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Se={setTimeout(...l){const{delegate:o}=Se;return((null==o?void 0:o.setTimeout)||setTimeout)(...l)},clearTimeout(l){const{delegate:o}=Se;return((null==o?void 0:o.clearTimeout)||clearTimeout)(l)},delegate:void 0};function Te(l){Se.setTimeout(()=>{const{onUnhandledError:o}=le;if(!o)throw l;o(l)})}function oe(){}const ge=bt("C",void 0,void 0);function bt(l,o,a){return{kind:l,value:o,error:a}}let Ge=null;function Pt(l){if(le.useDeprecatedSynchronousErrorHandling){const o=!Ge;if(o&&(Ge={errorThrown:!1,error:null}),l(),o){const{errorThrown:a,error:c}=Ge;if(Ge=null,a)throw c}}else l()}class qt extends Pe{constructor(o){super(),this.isStopped=!1,o?(this.destination=o,Fe(o)&&o.add(this)):this.destination=yt}static create(o,a,c){return new ft(o,a,c)}next(o){this.isStopped?ke(function Ue(l){return bt("N",l,void 0)}(o),this):this._next(o)}error(o){this.isStopped?ke(function be(l){return bt("E",void 0,l)}(o),this):(this.isStopped=!0,this._error(o))}complete(){this.isStopped?ke(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(o){this.destination.next(o)}_error(o){try{this.destination.error(o)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class ft extends qt{constructor(o,a,c){let u;if(super(),ce(o))u=o;else if(o){let h;({next:u,error:a,complete:c}=o),this&&le.useDeprecatedNextContext?(h=Object.create(o),h.unsubscribe=()=>this.unsubscribe()):h=o,u=null==u?void 0:u.bind(h),a=null==a?void 0:a.bind(h),c=null==c?void 0:c.bind(h)}this.destination={next:u?Gt(u):oe,error:Gt(null!=a?a:Gn),complete:c?Gt(c):oe}}}function Gt(l,o){return(...a)=>{try{l(...a)}catch(c){le.useDeprecatedSynchronousErrorHandling?function Ot(l){le.useDeprecatedSynchronousErrorHandling&&Ge&&(Ge.errorThrown=!0,Ge.error=l)}(c):Te(c)}}}function Gn(l){throw l}function ke(l,o){const{onStoppedNotification:a}=le;a&&Se.setTimeout(()=>a(l,o))}const yt={closed:!0,next:oe,error:Gn,complete:oe},J="function"==typeof Symbol&&Symbol.observable||"@@observable";function xt(l){return l}let xn=(()=>{class l{constructor(a){a&&(this._subscribe=a)}lift(a){const c=new l;return c.source=this,c.operator=a,c}subscribe(a,c,u){const h=function ot(l){return l&&l instanceof qt||function Jn(l){return l&&ce(l.next)&&ce(l.error)&&ce(l.complete)}(l)&&Fe(l)}(a)?a:new ft(a,c,u);return Pt(()=>{const{operator:d,source:f}=this;h.add(d?d.call(h,f):f?this._subscribe(h):this._trySubscribe(h))}),h}_trySubscribe(a){try{return this._subscribe(a)}catch(c){a.error(c)}}forEach(a,c){return new(c=$t(c))((u,h)=>{const d=new ft({next:f=>{try{a(f)}catch(p){h(p),d.unsubscribe()}},error:h,complete:u});this.subscribe(d)})}_subscribe(a){var c;return null===(c=this.source)||void 0===c?void 0:c.subscribe(a)}[J](){return this}pipe(...a){return function Lt(l){return 0===l.length?xt:1===l.length?l[0]:function(a){return l.reduce((c,u)=>u(c),a)}}(a)(this)}toPromise(a){return new(a=$t(a))((c,u)=>{let h;this.subscribe(d=>h=d,d=>u(d),()=>c(h))})}}return l.create=o=>new l(o),l})();function $t(l){var o;return null!==(o=null!=l?l:le.Promise)&&void 0!==o?o:Promise}const it=xe(l=>function(){l(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let mt=(()=>{class l extends xn{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(a){const c=new vn(this,this);return c.operator=a,c}_throwIfClosed(){if(this.closed)throw new it}next(a){Pt(()=>{if(this._throwIfClosed(),!this.isStopped){const c=this.observers.slice();for(const u of c)u.next(a)}})}error(a){Pt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=a;const{observers:c}=this;for(;c.length;)c.shift().error(a)}})}complete(){Pt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:a}=this;for(;a.length;)a.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var a;return(null===(a=this.observers)||void 0===a?void 0:a.length)>0}_trySubscribe(a){return this._throwIfClosed(),super._trySubscribe(a)}_subscribe(a){return this._throwIfClosed(),this._checkFinalizedStatuses(a),this._innerSubscribe(a)}_innerSubscribe(a){const{hasError:c,isStopped:u,observers:h}=this;return c||u?Ve:(h.push(a),new Pe(()=>ye(h,a)))}_checkFinalizedStatuses(a){const{hasError:c,thrownError:u,isStopped:h}=this;c?a.error(u):h&&a.complete()}asObservable(){const a=new xn;return a.source=this,a}}return l.create=(o,a)=>new vn(o,a),l})();class vn extends mt{constructor(o,a){super(),this.destination=o,this.source=a}next(o){var a,c;null===(c=null===(a=this.destination)||void 0===a?void 0:a.next)||void 0===c||c.call(a,o)}error(o){var a,c;null===(c=null===(a=this.destination)||void 0===a?void 0:a.error)||void 0===c||c.call(a,o)}complete(){var o,a;null===(a=null===(o=this.destination)||void 0===o?void 0:o.complete)||void 0===a||a.call(o)}_subscribe(o){var a,c;return null!==(c=null===(a=this.source)||void 0===a?void 0:a.subscribe(o))&&void 0!==c?c:Ve}}function Jt(l){return ce(null==l?void 0:l.lift)}function Ci(l){return o=>{if(Jt(o))return o.lift(function(a){try{return l(a,this)}catch(c){this.error(c)}});throw new TypeError("Unable to lift unknown Observable type")}}class Hi extends qt{constructor(o,a,c,u,h){super(o),this.onFinalize=h,this._next=a?function(d){try{a(d)}catch(f){o.error(f)}}:super._next,this._error=u?function(d){try{u(d)}catch(f){o.error(f)}finally{this.unsubscribe()}}:super._error,this._complete=c?function(){try{c()}catch(d){o.error(d)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var o;const{closed:a}=this;super.unsubscribe(),!a&&(null===(o=this.onFinalize)||void 0===o||o.call(this))}}function fn(l,o){return Ci((a,c)=>{let u=0;a.subscribe(new Hi(c,h=>{c.next(l.call(o,h,u++))}))})}function ks(l,o,a,c){var d,u=arguments.length,h=u<3?o:null===c?c=Object.getOwnPropertyDescriptor(o,a):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(l,o,a,c);else for(var f=l.length-1;f>=0;f--)(d=l[f])&&(h=(u<3?d(h):u>3?d(o,a,h):d(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h}function Ht(l){return this instanceof Ht?(this.v=l,this):new Ht(l)}function Un(l,o,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,c=a.apply(l,o||[]),h=[];return u={},d("next"),d("throw"),d("return"),u[Symbol.asyncIterator]=function(){return this},u;function d(y){c[y]&&(u[y]=function(_){return new Promise(function(b,C){h.push([y,_,b,C])>1||f(y,_)})})}function f(y,_){try{!function p(y){y.value instanceof Ht?Promise.resolve(y.value.v).then(g,m):v(h[0][2],y)}(c[y](_))}catch(b){v(h[0][3],b)}}function g(y){f("next",y)}function m(y){f("throw",y)}function v(y,_){y(_),h.shift(),h.length&&f(h[0][0],h[0][1])}}function Xi(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,o=l[Symbol.asyncIterator];return o?o.call(l):(l=function Mt(l){var o="function"==typeof Symbol&&Symbol.iterator,a=o&&l[o],c=0;if(a)return a.call(l);if(l&&"number"==typeof l.length)return{next:function(){return l&&c>=l.length&&(l=void 0),{value:l&&l[c++],done:!l}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}(l),a={},c("next"),c("throw"),c("return"),a[Symbol.asyncIterator]=function(){return this},a);function c(h){a[h]=l[h]&&function(d){return new Promise(function(f,p){!function u(h,d,f,p){Promise.resolve(p).then(function(g){h({value:g,done:f})},d)}(f,p,(d=l[h](d)).done,d.value)})}}}const $g=l=>l&&"number"==typeof l.length&&"function"!=typeof l;function Vc(l){return ce(null==l?void 0:l.then)}function hb(l){return ce(l[J])}function S2(l){return Symbol.asyncIterator&&ce(null==l?void 0:l[Symbol.asyncIterator])}function w2(l){return new TypeError(`You provided ${null!==l&&"object"==typeof l?"an invalid object":`'${l}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const db=function W3(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Xf(l){return ce(null==l?void 0:l[db])}function Wg(l){return Un(this,arguments,function*(){const a=l.getReader();try{for(;;){const{value:c,done:u}=yield Ht(a.read());if(u)return yield Ht(void 0);yield yield Ht(c)}}finally{a.releaseLock()}})}function v$(l){return ce(null==l?void 0:l.getReader)}function bu(l){if(l instanceof xn)return l;if(null!=l){if(hb(l))return function V_e(l){return new xn(o=>{const a=l[J]();if(ce(a.subscribe))return a.subscribe(o);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(l);if($g(l))return function z_e(l){return new xn(o=>{for(let a=0;a<l.length&&!o.closed;a++)o.next(l[a]);o.complete()})}(l);if(Vc(l))return function U_e(l){return new xn(o=>{l.then(a=>{o.closed||(o.next(a),o.complete())},a=>o.error(a)).then(null,Te)})}(l);if(S2(l))return y$(l);if(Xf(l))return function H_e(l){return new xn(o=>{for(const a of l)if(o.next(a),o.closed)return;o.complete()})}(l);if(v$(l))return function $_e(l){return y$(Wg(l))}(l)}throw w2(l)}function y$(l){return new xn(o=>{(function W_e(l,o){var a,c,u,h;return function ht(l,o,a,c){return new(a||(a=Promise))(function(h,d){function f(m){try{g(c.next(m))}catch(v){d(v)}}function p(m){try{g(c.throw(m))}catch(v){d(v)}}function g(m){m.done?h(m.value):function u(h){return h instanceof a?h:new a(function(d){d(h)})}(m.value).then(f,p)}g((c=c.apply(l,o||[])).next())})}(this,void 0,void 0,function*(){try{for(a=Xi(l);!(c=yield a.next()).done;)if(o.next(c.value),o.closed)return}catch(d){u={error:d}}finally{try{c&&!c.done&&(h=a.return)&&(yield h.call(a))}finally{if(u)throw u.error}}o.complete()})})(l,o).catch(a=>o.error(a))})}function Bd(l,o,a,c=0,u=!1){const h=o.schedule(function(){a(),u?l.add(this.schedule(null,c)):this.unsubscribe()},c);if(l.add(h),!u)return h}function mo(l,o,a=1/0){return ce(o)?mo((c,u)=>fn((h,d)=>o(c,h,u,d))(bu(l(c,u))),a):("number"==typeof o&&(a=o),Ci((c,u)=>function G_e(l,o,a,c,u,h,d,f){const p=[];let g=0,m=0,v=!1;const y=()=>{v&&!p.length&&!g&&o.complete()},_=C=>g<c?b(C):p.push(C),b=C=>{h&&o.next(C),g++;let x=!1;bu(a(C,m++)).subscribe(new Hi(o,S=>{null==u||u(S),h?_(S):o.next(S)},()=>{x=!0},void 0,()=>{if(x)try{for(g--;p.length&&g<c;){const S=p.shift();d?Bd(o,d,()=>b(S)):b(S)}y()}catch(S){o.error(S)}}))};return l.subscribe(new Hi(o,_,()=>{v=!0,y()})),()=>{null==f||f()}}(c,u,l,a)))}function fb(l=1/0){return mo(xt,l)}const Vd=new xn(l=>l.complete());function G3(l){return l[l.length-1]}function _$(l){return ce(G3(l))?l.pop():void 0}function pb(l){return function j_e(l){return l&&ce(l.schedule)}(G3(l))?l.pop():void 0}function b$(l,o=0){return Ci((a,c)=>{a.subscribe(new Hi(c,u=>Bd(c,l,()=>c.next(u),o),()=>Bd(c,l,()=>c.complete(),o),u=>Bd(c,l,()=>c.error(u),o)))})}function x$(l,o=0){return Ci((a,c)=>{c.add(l.schedule(()=>a.subscribe(c),o))})}function C$(l,o){if(!l)throw new Error("Iterable cannot be null");return new xn(a=>{Bd(a,o,()=>{const c=l[Symbol.asyncIterator]();Bd(a,o,()=>{c.next().then(u=>{u.done?a.complete():a.next(u.value)})},0,!0)})})}function Po(l,o){return o?function e1e(l,o){if(null!=l){if(hb(l))return function Z_e(l,o){return bu(l).pipe(x$(o),b$(o))}(l,o);if($g(l))return function Y_e(l,o){return new xn(a=>{let c=0;return o.schedule(function(){c===l.length?a.complete():(a.next(l[c++]),a.closed||this.schedule())})})}(l,o);if(Vc(l))return function X_e(l,o){return bu(l).pipe(x$(o),b$(o))}(l,o);if(S2(l))return C$(l,o);if(Xf(l))return function K_e(l,o){return new xn(a=>{let c;return Bd(a,o,()=>{c=l[db](),Bd(a,o,()=>{let u,h;try{({value:u,done:h}=c.next())}catch(d){return void a.error(d)}h?a.complete():a.next(u)},0,!0)}),()=>ce(null==c?void 0:c.return)&&c.return()})}(l,o);if(v$(l))return function J_e(l,o){return C$(Wg(l),o)}(l,o)}throw w2(l)}(l,o):bu(l)}function rv(l){return l<=0?()=>Vd:Ci((o,a)=>{let c=0;o.subscribe(new Hi(a,u=>{++c<=l&&(a.next(u),l<=c&&a.complete())}))})}function Q3(l,o,...a){return!0===o?(l(),null):!1===o?null:o(...a).pipe(rv(1)).subscribe(()=>l())}function Fr(l){for(let o in l)if(l[o]===Fr)return o;throw Error("Could not find renamed property on target object.")}function j3(l,o){for(const a in o)o.hasOwnProperty(a)&&!l.hasOwnProperty(a)&&(l[a]=o[a])}function Sr(l){if("string"==typeof l)return l;if(Array.isArray(l))return"["+l.map(Sr).join(", ")+"]";if(null==l)return""+l;if(l.overriddenName)return`${l.overriddenName}`;if(l.name)return`${l.name}`;const o=l.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function q3(l,o){return null==l||""===l?null===o?"":o:null==o||""===o?l:l+" "+o}const i1e=Fr({__forward_ref__:Fr});function Vr(l){return l.__forward_ref__=Vr,l.toString=function(){return Sr(this())},l}function wi(l){return S$(l)?l():l}function S$(l){return"function"==typeof l&&l.hasOwnProperty(i1e)&&l.__forward_ref__===Vr}class nr extends Error{constructor(o,a){super(function Z3(l,o){return`NG0${Math.abs(l)}${o?": "+o:""}`}(o,a)),this.code=o}}function di(l){return"string"==typeof l?l:null==l?"":String(l)}function Fa(l){return"function"==typeof l?l.name||l.toString():"object"==typeof l&&null!=l&&"function"==typeof l.type?l.type.name||l.type.toString():di(l)}function T2(l,o){const a=o?` in ${o}`:"";throw new nr(-201,`No provider for ${Fa(l)} found${a}`)}function Wl(l,o){null==l&&function Qr(l,o,a,c){throw new Error(`ASSERTION ERROR: ${l}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,l,null,"!=")}function Ze(l){return{token:l.token,providedIn:l.providedIn||null,factory:l.factory,value:void 0}}function On(l){return{providers:l.providers||[],imports:l.imports||[]}}function X3(l){return w$(l,O2)||w$(l,O$)}function w$(l,o){return l.hasOwnProperty(o)?l[o]:null}function T$(l){return l&&(l.hasOwnProperty(Y3)||l.hasOwnProperty(u1e))?l[Y3]:null}const O2=Fr({\u0275prov:Fr}),Y3=Fr({\u0275inj:Fr}),O$=Fr({ngInjectableDef:Fr}),u1e=Fr({ngInjectorDef:Fr});var mi=(()=>((mi=mi||{})[mi.Default=0]="Default",mi[mi.Host=1]="Host",mi[mi.Self=2]="Self",mi[mi.SkipSelf=4]="SkipSelf",mi[mi.Optional=8]="Optional",mi))();let K3;function Yf(l){const o=K3;return K3=l,o}function D$(l,o,a){const c=X3(l);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&mi.Optional?null:void 0!==o?o:void T2(Sr(l),"Injector")}function Kf(l){return{toString:l}.toString()}var xu=(()=>((xu=xu||{})[xu.OnPush=0]="OnPush",xu[xu.Default=1]="Default",xu))(),Cu=(()=>{return(l=Cu||(Cu={}))[l.Emulated=0]="Emulated",l[l.None=2]="None",l[l.ShadowDom=3]="ShadowDom",Cu;var l})();const d1e="undefined"!=typeof globalThis&&globalThis,f1e="undefined"!=typeof window&&window,p1e="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ir=d1e||"undefined"!=typeof global&&global||f1e||p1e,sv={},Nr=[],D2=Fr({\u0275cmp:Fr}),J3=Fr({\u0275dir:Fr}),eP=Fr({\u0275pipe:Fr}),k$=Fr({\u0275mod:Fr}),Ud=Fr({\u0275fac:Fr}),gb=Fr({__NG_ELEMENT_ID__:Fr});let g1e=0;function qe(l){return Kf(()=>{const a={},c={type:l.type,providersResolver:null,decls:l.decls,vars:l.vars,factory:null,template:l.template||null,consts:l.consts||null,ngContentSelectors:l.ngContentSelectors,hostBindings:l.hostBindings||null,hostVars:l.hostVars||0,hostAttrs:l.hostAttrs||null,contentQueries:l.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:l.exportAs||null,onPush:l.changeDetection===xu.OnPush,directiveDefs:null,pipeDefs:null,selectors:l.selectors||Nr,viewQuery:l.viewQuery||null,features:l.features||null,data:l.data||{},encapsulation:l.encapsulation||Cu.Emulated,id:"c",styles:l.styles||Nr,_:null,setInput:null,schemas:l.schemas||null,tView:null},u=l.directives,h=l.features,d=l.pipes;return c.id+=g1e++,c.inputs=I$(l.inputs,a),c.outputs=I$(l.outputs),h&&h.forEach(f=>f(c)),c.directiveDefs=u?()=>("function"==typeof u?u():u).map(M$):null,c.pipeDefs=d?()=>("function"==typeof d?d():d).map(E$):null,c})}function tP(l,o,a){const c=l.\u0275cmp;c.directiveDefs=()=>o.map(M$),c.pipeDefs=()=>a.map(E$)}function M$(l){return aa(l)||function Jf(l){return l[J3]||null}(l)}function E$(l){return function Gg(l){return l[eP]||null}(l)}const A$={};function En(l){return Kf(()=>{const o={type:l.type,bootstrap:l.bootstrap||Nr,declarations:l.declarations||Nr,imports:l.imports||Nr,exports:l.exports||Nr,transitiveCompileScopes:null,schemas:l.schemas||null,id:l.id||null};return null!=l.id&&(A$[l.id]=l.type),o})}function I$(l,o){if(null==l)return sv;const a={};for(const c in l)if(l.hasOwnProperty(c)){let u=l[c],h=u;Array.isArray(u)&&(h=u[1],u=u[0]),a[u]=c,o&&(o[u]=h)}return a}const vt=qe;function yl(l){return{type:l.type,name:l.name,factory:null,pure:!1!==l.pure,onDestroy:l.type.prototype.ngOnDestroy||null}}function aa(l){return l[D2]||null}function zc(l,o){const a=l[k$]||null;if(!a&&!0===o)throw new Error(`Type ${Sr(l)} does not have '\u0275mod' property.`);return a}function xh(l){return Array.isArray(l)&&"object"==typeof l[1]}function wu(l){return Array.isArray(l)&&!0===l[1]}function rP(l){return 0!=(8&l.flags)}function A2(l){return 2==(2&l.flags)}function I2(l){return 1==(1&l.flags)}function Tu(l){return null!==l.template}function b1e(l){return 0!=(512&l[2])}function Zg(l,o){return l.hasOwnProperty(Ud)?l[Ud]:null}class S1e{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function vo(){return R$}function R$(l){return l.type.prototype.ngOnChanges&&(l.setInput=T1e),w1e}function w1e(){const l=N$(this),o=null==l?void 0:l.current;if(o){const a=l.previous;if(a===sv)l.previous=o;else for(let c in o)a[c]=o[c];l.current=null,this.ngOnChanges(o)}}function T1e(l,o,a,c){const u=N$(l)||function O1e(l,o){return l[F$]=o}(l,{previous:sv,current:null}),h=u.current||(u.current={}),d=u.previous,f=this.declaredInputs[a],p=d[f];h[f]=new S1e(p&&p.currentValue,o,d===sv),l[c]=o}vo.ngInherit=!0;const F$="__ngSimpleChanges__";function N$(l){return l[F$]||null}let cP;function Es(l){return!!l.listen}const L$={createRenderer:(l,o)=>function uP(){return void 0!==cP?cP:"undefined"!=typeof document?document:void 0}()};function Ks(l){for(;Array.isArray(l);)l=l[0];return l}function P2(l,o){return Ks(o[l])}function $c(l,o){return Ks(o[l.index])}function hP(l,o){return l.data[o]}function uv(l,o){return l[o]}function Ql(l,o){const a=o[l];return xh(a)?a:a[0]}function B$(l){return 4==(4&l[2])}function dP(l){return 128==(128&l[2])}function ep(l,o){return null==o?null:l[o]}function V$(l){l[18]=0}function fP(l,o){l[5]+=o;let a=l,c=l[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const ni={lFrame:j$(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function z$(){return ni.bindingsEnabled}function At(){return ni.lFrame.lView}function ir(){return ni.lFrame.tView}function Le(l){return ni.lFrame.contextLView=l,l[8]}function yo(){let l=U$();for(;null!==l&&64===l.type;)l=l.parent;return l}function U$(){return ni.lFrame.currentTNode}function Ch(l,o){const a=ni.lFrame;a.currentTNode=l,a.isParent=o}function pP(){return ni.lFrame.isParent}function gP(){ni.lFrame.isParent=!1}function R2(){return ni.isInCheckNoChangesMode}function F2(l){ni.isInCheckNoChangesMode=l}function Na(){const l=ni.lFrame;let o=l.bindingRootIndex;return-1===o&&(o=l.bindingRootIndex=l.tView.bindingStartIndex),o}function Hd(){return ni.lFrame.bindingIndex}function hv(){return ni.lFrame.bindingIndex++}function $d(l){const o=ni.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+l,a}function $1e(l,o){const a=ni.lFrame;a.bindingIndex=a.bindingRootIndex=l,mP(o)}function mP(l){ni.lFrame.currentDirectiveIndex=l}function W$(){return ni.lFrame.currentQueryIndex}function yP(l){ni.lFrame.currentQueryIndex=l}function G1e(l){const o=l[1];return 2===o.type?o.declTNode:1===o.type?l[6]:null}function G$(l,o,a){if(a&mi.SkipSelf){let u=o,h=l;for(;!(u=u.parent,null!==u||a&mi.Host||(u=G1e(h),null===u||(h=h[15],10&u.type))););if(null===u)return!1;o=u,l=h}const c=ni.lFrame=Q$();return c.currentTNode=o,c.lView=l,!0}function N2(l){const o=Q$(),a=l[1];ni.lFrame=o,o.currentTNode=a.firstChild,o.lView=l,o.tView=a,o.contextLView=l,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Q$(){const l=ni.lFrame,o=null===l?null:l.child;return null===o?j$(l):o}function j$(l){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:l,child:null,inI18n:!1};return null!==l&&(l.child=o),o}function q$(){const l=ni.lFrame;return ni.lFrame=l.parent,l.currentTNode=null,l.lView=null,l}const Z$=q$;function L2(){const l=q$();l.isParent=!0,l.tView=null,l.selectedIndex=-1,l.contextLView=null,l.elementDepthCount=0,l.currentDirectiveIndex=-1,l.currentNamespace=null,l.bindingRootIndex=-1,l.bindingIndex=-1,l.currentQueryIndex=0}function La(){return ni.lFrame.selectedIndex}function tp(l){ni.lFrame.selectedIndex=l}function As(){const l=ni.lFrame;return hP(l.tView,l.selectedIndex)}function np(){ni.lFrame.currentNamespace="svg"}function B2(l,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const h=l.data[a].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:f,ngAfterViewInit:p,ngAfterViewChecked:g,ngOnDestroy:m}=h;d&&(l.contentHooks||(l.contentHooks=[])).push(-a,d),f&&((l.contentHooks||(l.contentHooks=[])).push(a,f),(l.contentCheckHooks||(l.contentCheckHooks=[])).push(a,f)),p&&(l.viewHooks||(l.viewHooks=[])).push(-a,p),g&&((l.viewHooks||(l.viewHooks=[])).push(a,g),(l.viewCheckHooks||(l.viewCheckHooks=[])).push(a,g)),null!=m&&(l.destroyHooks||(l.destroyHooks=[])).push(a,m)}}function V2(l,o,a){Y$(l,o,3,a)}function z2(l,o,a,c){(3&l[2])===a&&Y$(l,o,a,c)}function _P(l,o){let a=l[2];(3&a)===o&&(a&=2047,a+=1,l[2]=a)}function Y$(l,o,a,c){const h=null!=c?c:-1,d=o.length-1;let f=0;for(let p=void 0!==c?65535&l[18]:0;p<d;p++)if("number"==typeof o[p+1]){if(f=o[p],null!=c&&f>=c)break}else o[p]<0&&(l[18]+=65536),(f<h||-1==h)&&(K1e(l,a,o,p),l[18]=(4294901760&l[18])+p+2),p++}function K1e(l,o,a,c){const u=a[c]<0,h=a[c+1],f=l[u?-a[c]:a[c]];if(u){if(l[2]>>11<l[18]>>16&&(3&l[2])===o){l[2]+=2048;try{h.call(f)}finally{}}}else try{h.call(f)}finally{}}class bb{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function U2(l,o,a){const c=Es(l);let u=0;for(;u<a.length;){const h=a[u];if("number"==typeof h){if(0!==h)break;u++;const d=a[u++],f=a[u++],p=a[u++];c?l.setAttribute(o,f,p,d):o.setAttributeNS(d,f,p)}else{const d=h,f=a[++u];xP(d)?c&&l.setProperty(o,d,f):c?l.setAttribute(o,d,f):o.setAttribute(d,f),u++}}return u}function K$(l){return 3===l||4===l||6===l}function xP(l){return 64===l.charCodeAt(0)}function H2(l,o){if(null!==o&&0!==o.length)if(null===l||0===l.length)l=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const u=o[c];"number"==typeof u?a=u:0===a||J$(l,a,u,null,-1===a||2===a?o[++c]:null)}}return l}function J$(l,o,a,c,u){let h=0,d=l.length;if(-1===o)d=-1;else for(;h<l.length;){const f=l[h++];if("number"==typeof f){if(f===o){d=-1;break}if(f>o){d=h-1;break}}}for(;h<l.length;){const f=l[h];if("number"==typeof f)break;if(f===a){if(null===c)return void(null!==u&&(l[h+1]=u));if(c===l[h+1])return void(l[h+2]=u)}h++,null!==c&&h++,null!==u&&h++}-1!==d&&(l.splice(d,0,o),h=d+1),l.splice(h++,0,a),null!==c&&l.splice(h++,0,c),null!==u&&l.splice(h++,0,u)}function eW(l){return-1!==l}function dv(l){return 32767&l}function fv(l,o){let a=function ibe(l){return l>>16}(l),c=o;for(;a>0;)c=c[15],a--;return c}let CP=!0;function $2(l){const o=CP;return CP=l,o}let rbe=0;function Cb(l,o){const a=wP(l,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(l.injectorIndex=o.length,SP(c.data,l),SP(o,null),SP(c.blueprint,null));const u=W2(l,o),h=l.injectorIndex;if(eW(u)){const d=dv(u),f=fv(u,o),p=f[1].data;for(let g=0;g<8;g++)o[h+g]=f[d+g]|p[d+g]}return o[h+8]=u,h}function SP(l,o){l.push(0,0,0,0,0,0,0,0,o)}function wP(l,o){return-1===l.injectorIndex||l.parent&&l.parent.injectorIndex===l.injectorIndex||null===o[l.injectorIndex+8]?-1:l.injectorIndex}function W2(l,o){if(l.parent&&-1!==l.parent.injectorIndex)return l.parent.injectorIndex;let a=0,c=null,u=o;for(;null!==u;){const h=u[1],d=h.type;if(c=2===d?h.declTNode:1===d?u[6]:null,null===c)return-1;if(a++,u=u[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function G2(l,o,a){!function sbe(l,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(gb)&&(c=a[gb]),null==c&&(c=a[gb]=rbe++);const u=255&c;o.data[l+(u>>5)]|=1<<u}(l,o,a)}function iW(l,o,a){if(a&mi.Optional)return l;T2(o,"NodeInjector")}function rW(l,o,a,c){if(a&mi.Optional&&void 0===c&&(c=null),0==(a&(mi.Self|mi.Host))){const u=l[9],h=Yf(void 0);try{return u?u.get(o,c,a&mi.Optional):D$(o,c,a&mi.Optional)}finally{Yf(h)}}return iW(c,o,a)}function sW(l,o,a,c=mi.Default,u){if(null!==l){const h=function cbe(l){if("string"==typeof l)return l.charCodeAt(0)||0;const o=l.hasOwnProperty(gb)?l[gb]:void 0;return"number"==typeof o?o>=0?255&o:abe:o}(a);if("function"==typeof h){if(!G$(o,l,c))return c&mi.Host?iW(u,a,c):rW(o,a,c,u);try{const d=h(c);if(null!=d||c&mi.Optional)return d;T2(a)}finally{Z$()}}else if("number"==typeof h){let d=null,f=wP(l,o),p=-1,g=c&mi.Host?o[16][6]:null;for((-1===f||c&mi.SkipSelf)&&(p=-1===f?W2(l,o):o[f+8],-1!==p&&lW(c,!1)?(d=o[1],f=dv(p),o=fv(p,o)):f=-1);-1!==f;){const m=o[1];if(aW(h,f,m.data)){const v=lbe(f,o,a,d,c,g);if(v!==oW)return v}p=o[f+8],-1!==p&&lW(c,o[1].data[f+8]===g)&&aW(h,f,o)?(d=m,f=dv(p),o=fv(p,o)):f=-1}}}return rW(o,a,c,u)}const oW={};function abe(){return new pv(yo(),At())}function lbe(l,o,a,c,u,h){const d=o[1],f=d.data[l+8],m=Q2(f,d,a,null==c?A2(f)&&CP:c!=d&&0!=(3&f.type),u&mi.Host&&h===f);return null!==m?Sb(o,d,m,f):oW}function Q2(l,o,a,c,u){const h=l.providerIndexes,d=o.data,f=1048575&h,p=l.directiveStart,m=h>>20,y=u?f+m:l.directiveEnd;for(let _=c?f:f+m;_<y;_++){const b=d[_];if(_<p&&a===b||_>=p&&b.type===a)return _}if(u){const _=d[p];if(_&&Tu(_)&&_.type===a)return p}return null}function Sb(l,o,a,c){let u=l[a];const h=o.data;if(function J1e(l){return l instanceof bb}(u)){const d=u;d.resolving&&function r1e(l,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${l}`:"";throw new nr(-200,`Circular dependency in DI detected for ${l}${a}`)}(Fa(h[a]));const f=$2(d.canSeeViewProviders);d.resolving=!0;const p=d.injectImpl?Yf(d.injectImpl):null;G$(l,c,mi.Default);try{u=l[a]=d.factory(void 0,h,l,c),o.firstCreatePass&&a>=c.directiveStart&&function Y1e(l,o,a){const{ngOnChanges:c,ngOnInit:u,ngDoCheck:h}=o.type.prototype;if(c){const d=R$(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(l,d),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(l,d)}u&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-l,u),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(l,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(l,h))}(a,h[a],o)}finally{null!==p&&Yf(p),$2(f),d.resolving=!1,Z$()}}return u}function aW(l,o,a){return!!(a[o+(l>>5)]&1<<l)}function lW(l,o){return!(l&mi.Self||l&mi.Host&&o)}class pv{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return sW(this._tNode,this._lView,o,c,a)}}function fs(l){return Kf(()=>{const o=l.prototype.constructor,a=o[Ud]||TP(o),c=Object.prototype;let u=Object.getPrototypeOf(l.prototype).constructor;for(;u&&u!==c;){const h=u[Ud]||TP(u);if(h&&h!==a)return h;u=Object.getPrototypeOf(u)}return h=>new h})}function TP(l){return S$(l)?()=>{const o=TP(wi(l));return o&&o()}:Zg(l)}function gv(l){return function obe(l,o){if("class"===o)return l.classes;if("style"===o)return l.styles;const a=l.attrs;if(a){const c=a.length;let u=0;for(;u<c;){const h=a[u];if(K$(h))break;if(0===h)u+=2;else if("number"==typeof h)for(u++;u<c&&"string"==typeof a[u];)u++;else{if(h===o)return a[u+1];u+=2}}}return null}(yo(),l)}const vv="__parameters__";function _v(l,o,a){return Kf(()=>{const c=function OP(l){return function(...a){if(l){const c=l(...a);for(const u in c)this[u]=c[u]}}}(o);function u(...h){if(this instanceof u)return c.apply(this,h),this;const d=new u(...h);return f.annotation=d,f;function f(p,g,m){const v=p.hasOwnProperty(vv)?p[vv]:Object.defineProperty(p,vv,{value:[]})[vv];for(;v.length<=m;)v.push(null);return(v[m]=v[m]||[]).push(d),p}}return a&&(u.prototype=Object.create(a.prototype)),u.prototype.ngMetadataName=l,u.annotationCls=u,u})}class Zn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ze({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const hbe=new Zn("AnalyzeForEntryComponents"),j2=Function;function Wc(l,o){void 0===o&&(o=l);for(let a=0;a<l.length;a++){let c=l[a];Array.isArray(c)?(o===l&&(o=l.slice(0,a)),Wc(c,o)):o!==l&&o.push(c)}return o}function Sh(l,o){l.forEach(a=>Array.isArray(a)?Sh(a,o):o(a))}function uW(l,o,a){o>=l.length?l.push(a):l.splice(o,0,a)}function q2(l,o){return o>=l.length-1?l.pop():l.splice(o,1)[0]}function Ob(l,o){const a=[];for(let c=0;c<l;c++)a.push(o);return a}function jl(l,o,a){let c=bv(l,o);return c>=0?l[1|c]=a:(c=~c,function pbe(l,o,a,c){let u=l.length;if(u==o)l.push(a,c);else if(1===u)l.push(c,l[0]),l[0]=a;else{for(u--,l.push(l[u-1],l[u]);u>o;)l[u]=l[u-2],u--;l[o]=a,l[o+1]=c}}(l,c,o,a)),c}function DP(l,o){const a=bv(l,o);if(a>=0)return l[1|a]}function bv(l,o){return function fW(l,o,a){let c=0,u=l.length>>a;for(;u!==c;){const h=c+(u-c>>1),d=l[h<<a];if(o===d)return h<<a;d>o?u=h:c=h+1}return~(u<<a)}(l,o,1)}const Db={},MP="__NG_DI_FLAG__",X2="ngTempTokenPath",xbe=/\n/gm,gW="__source",Sbe=Fr({provide:String,useValue:Fr});let kb;function mW(l){const o=kb;return kb=l,o}function wbe(l,o=mi.Default){if(void 0===kb)throw new nr(203,"");return null===kb?D$(l,void 0,o):kb.get(l,o&mi.Optional?null:void 0,o)}function Ae(l,o=mi.Default){return(function h1e(){return K3}()||wbe)(wi(l),o)}function EP(l){const o=[];for(let a=0;a<l.length;a++){const c=wi(l[a]);if(Array.isArray(c)){if(0===c.length)throw new nr(900,"");let u,h=mi.Default;for(let d=0;d<c.length;d++){const f=c[d],p=Tbe(f);"number"==typeof p?-1===p?u=f.token:h|=p:u=f}o.push(Ae(u,h))}else o.push(Ae(c))}return o}function Mb(l,o){return l[MP]=o,l.prototype[MP]=o,l}function Tbe(l){return l[MP]}const Eb=Mb(_v("Inject",l=>({token:l})),-1),ql=Mb(_v("Optional"),8),Wd=Mb(_v("SkipSelf"),4);class TW{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function rp(l){return l instanceof TW?l.changingThisBreaksApplicationSecurity:l}const jbe=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qbe=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Js=(()=>((Js=Js||{})[Js.NONE=0]="NONE",Js[Js.HTML=1]="HTML",Js[Js.STYLE=2]="STYLE",Js[Js.SCRIPT=3]="SCRIPT",Js[Js.URL=4]="URL",Js[Js.RESOURCE_URL=5]="RESOURCE_URL",Js))();function Rb(l){const o=function Fb(){const l=At();return l&&l[12]}();return o?o.sanitize(Js.URL,l)||"":function Ib(l,o){const a=function $be(l){return l instanceof TW&&l.getTypeName()||null}(l);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(l,"URL")?rp(l):function eT(l){return(l=String(l)).match(jbe)||l.match(qbe)?l:"unsafe:"+l}(di(l))}const FW="__ngContext__";function ca(l,o){l[FW]=o}function VP(l){const o=function Nb(l){return l[FW]||null}(l);return o?Array.isArray(o)?o:o.lView:null}function UP(l){return l.ngOriginalError}function vxe(l,...o){l.error(...o)}class Sv{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),c=function mxe(l){return l&&l.ngErrorLogger||vxe}(o);c(this._console,"ERROR",o),a&&c(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&UP(o);for(;a&&UP(a);)a=UP(a);return a||null}}const zW=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ir))();function Lb(l){return l.ownerDocument.defaultView}function Bb(l){return l.ownerDocument}function UW(l){return l.ownerDocument.body}function Th(l){return l instanceof Function?l():l}var Zl=(()=>((Zl=Zl||{})[Zl.Important=1]="Important",Zl[Zl.DashCase=2]="DashCase",Zl))();function $P(l,o){return undefined(l,o)}function Vb(l){const o=l[3];return wu(o)?o[3]:o}function WP(l){return QW(l[13])}function GP(l){return QW(l[4])}function QW(l){for(;null!==l&&!wu(l);)l=l[4];return l}function Tv(l,o,a,c,u){if(null!=c){let h,d=!1;wu(c)?h=c:xh(c)&&(d=!0,c=c[0]);const f=Ks(c);0===l&&null!==a?null==u?KW(o,a,f):Xg(o,a,f,u||null,!0):1===l&&null!==a?Xg(o,a,f,u||null,!0):2===l?function sG(l,o,a){const c=nT(l,o);c&&function Lxe(l,o,a,c){Es(l)?l.removeChild(o,a,c):o.removeChild(a)}(l,c,o,a)}(o,f,d):3===l&&o.destroyNode(f),null!=h&&function zxe(l,o,a,c,u){const h=a[7];h!==Ks(a)&&Tv(o,l,c,h,u);for(let f=10;f<a.length;f++){const p=a[f];zb(p[1],p,l,o,c,h)}}(o,l,h,a,u)}}function jP(l,o,a){if(Es(l))return l.createElement(o,a);{const c=null!==a?function E1e(l){const o=l.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===c?l.createElement(o):l.createElementNS(c,o)}}function qW(l,o){const a=l[9],c=a.indexOf(o),u=o[3];1024&o[2]&&(o[2]&=-1025,fP(u,-1)),a.splice(c,1)}function qP(l,o){if(l.length<=10)return;const a=10+o,c=l[a];if(c){const u=c[17];null!==u&&u!==l&&qW(u,c),o>0&&(l[a-1][4]=c[4]);const h=q2(l,10+o);!function Mxe(l,o){zb(l,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const d=h[19];null!==d&&d.detachView(h[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function ZW(l,o){if(!(256&o[2])){const a=o[11];Es(a)&&a.destroyNode&&zb(l,o,a,3,null,null),function Ixe(l){let o=l[13];if(!o)return ZP(l[1],l);for(;o;){let a=null;if(xh(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==l;)xh(o)&&ZP(o[1],o),o=o[3];null===o&&(o=l),xh(o)&&ZP(o[1],o),a=o&&o[4]}o=a}}(o)}}function ZP(l,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Nxe(l,o){let a;if(null!=l&&null!=(a=l.destroyHooks))for(let c=0;c<a.length;c+=2){const u=o[a[c]];if(!(u instanceof bb)){const h=a[c+1];if(Array.isArray(h))for(let d=0;d<h.length;d+=2){const f=u[h[d]],p=h[d+1];try{p.call(f)}finally{}}else try{h.call(u)}finally{}}}}(l,o),function Fxe(l,o){const a=l.cleanup,c=o[7];let u=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const d=a[h+1],f="function"==typeof d?d(o):Ks(o[d]),p=c[u=a[h+2]],g=a[h+3];"boolean"==typeof g?f.removeEventListener(a[h],p,g):g>=0?c[u=g]():c[u=-g].unsubscribe(),h+=2}else{const d=c[u=a[h+1]];a[h].call(d)}if(null!==c){for(let h=u+1;h<c.length;h++)c[h]();o[7]=null}}(l,o),1===o[1].type&&Es(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&wu(o[3])){a!==o[3]&&qW(a,o);const c=o[19];null!==c&&c.detachView(l)}}}function XW(l,o,a){return function YW(l,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const u=l.data[c.directiveStart].encapsulation;if(u===Cu.None||u===Cu.Emulated)return null}return $c(c,a)}(l,o.parent,a)}function Xg(l,o,a,c,u){Es(l)?l.insertBefore(o,a,c,u):o.insertBefore(a,c,u)}function KW(l,o,a){Es(l)?l.appendChild(o,a):o.appendChild(a)}function JW(l,o,a,c,u){null!==c?Xg(l,o,a,c,u):KW(l,o,a)}function nT(l,o){return Es(l)?l.parentNode(o):o.parentNode}function eG(l,o,a){return nG(l,o,a)}let nG=function tG(l,o,a){return 40&l.type?$c(l,a):null};function iT(l,o,a,c){const u=XW(l,c,o),h=o[11],f=eG(c.parent||o[6],c,o);if(null!=u)if(Array.isArray(a))for(let p=0;p<a.length;p++)JW(h,u,a[p],f,!1);else JW(h,u,a,f,!1)}function rT(l,o){if(null!==o){const a=o.type;if(3&a)return $c(o,l);if(4&a)return YP(-1,l[o.index]);if(8&a){const c=o.child;if(null!==c)return rT(l,c);{const u=l[o.index];return wu(u)?YP(-1,u):Ks(u)}}if(32&a)return $P(o,l)()||Ks(l[o.index]);{const c=rG(l,o);return null!==c?Array.isArray(c)?c[0]:rT(Vb(l[16]),c):rT(l,o.next)}}return null}function rG(l,o){return null!==o?l[16][6].projection[o.projection]:null}function YP(l,o){const a=10+l+1;if(a<o.length){const c=o[a],u=c[1].firstChild;if(null!==u)return rT(c,u)}return o[7]}function KP(l,o,a,c,u,h,d){for(;null!=a;){const f=c[a.index],p=a.type;if(d&&0===o&&(f&&ca(Ks(f),c),a.flags|=4),64!=(64&a.flags))if(8&p)KP(l,o,a.child,c,u,h,!1),Tv(o,l,u,f,h);else if(32&p){const g=$P(a,c);let m;for(;m=g();)Tv(o,l,u,m,h);Tv(o,l,u,f,h)}else 16&p?oG(l,o,c,a,u,h):Tv(o,l,u,f,h);a=d?a.projectionNext:a.next}}function zb(l,o,a,c,u,h){KP(a,c,l.firstChild,o,u,h,!1)}function oG(l,o,a,c,u,h){const d=a[16],p=d[6].projection[c.projection];if(Array.isArray(p))for(let g=0;g<p.length;g++)Tv(o,l,u,p[g],h);else KP(l,o,p,d[3],u,h,!0)}function aG(l,o,a){Es(l)?l.setAttribute(o,"style",a):o.style.cssText=a}function JP(l,o,a){Es(l)?""===a?l.removeAttribute(o,"class"):l.setAttribute(o,"class",a):o.className=a}function lG(l,o,a){let c=l.length;for(;;){const u=l.indexOf(o,a);if(-1===u)return u;if(0===u||l.charCodeAt(u-1)<=32){const h=o.length;if(u+h===c||l.charCodeAt(u+h)<=32)return u}a=u+1}}const cG="ng-template";function Hxe(l,o,a){let c=0;for(;c<l.length;){let u=l[c++];if(a&&"class"===u){if(u=l[c],-1!==lG(u.toLowerCase(),o,0))return!0}else if(1===u){for(;c<l.length&&"string"==typeof(u=l[c++]);)if(u.toLowerCase()===o)return!0;return!1}}return!1}function uG(l){return 4===l.type&&l.value!==cG}function $xe(l,o,a){return o===(4!==l.type||a?l.value:cG)}function Wxe(l,o,a){let c=4;const u=l.attrs||[],h=function jxe(l){for(let o=0;o<l.length;o++)if(K$(l[o]))return o;return l.length}(u);let d=!1;for(let f=0;f<o.length;f++){const p=o[f];if("number"!=typeof p){if(!d)if(4&c){if(c=2|1&c,""!==p&&!$xe(l,p,a)||""===p&&1===o.length){if(Ou(c))return!1;d=!0}}else{const g=8&c?p:o[++f];if(8&c&&null!==l.attrs){if(!Hxe(l.attrs,g,a)){if(Ou(c))return!1;d=!0}continue}const v=Gxe(8&c?"class":p,u,uG(l),a);if(-1===v){if(Ou(c))return!1;d=!0;continue}if(""!==g){let y;y=v>h?"":u[v+1].toLowerCase();const _=8&c?y:null;if(_&&-1!==lG(_,g,0)||2&c&&g!==y){if(Ou(c))return!1;d=!0}}}}else{if(!d&&!Ou(c)&&!Ou(p))return!1;if(d&&Ou(p))continue;d=!1,c=p|1&c}}return Ou(c)||d}function Ou(l){return 0==(1&l)}function Gxe(l,o,a,c){if(null===o)return-1;let u=0;if(c||!a){let h=!1;for(;u<o.length;){const d=o[u];if(d===l)return u;if(3===d||6===d)h=!0;else{if(1===d||2===d){let f=o[++u];for(;"string"==typeof f;)f=o[++u];continue}if(4===d)break;if(0===d){u+=4;continue}}u+=h?1:2}return-1}return function qxe(l,o){let a=l.indexOf(4);if(a>-1)for(a++;a<l.length;){const c=l[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,l)}function hG(l,o,a=!1){for(let c=0;c<o.length;c++)if(Wxe(l,o[c],a))return!0;return!1}function Zxe(l,o){e:for(let a=0;a<o.length;a++){const c=o[a];if(l.length===c.length){for(let u=0;u<l.length;u++)if(l[u]!==c[u])continue e;return!0}}return!1}function dG(l,o){return l?":not("+o.trim()+")":o}function Xxe(l){let o=l[0],a=1,c=2,u="",h=!1;for(;a<l.length;){let d=l[a];if("string"==typeof d)if(2&c){const f=l[++a];u+="["+d+(f.length>0?'="'+f+'"':"")+"]"}else 8&c?u+="."+d:4&c&&(u+=" "+d);else""!==u&&!Ou(d)&&(o+=dG(h,u),u=""),c=d,h=h||!Ou(c);a++}return""!==u&&(o+=dG(h,u)),o}const fi={};function R(l){fG(ir(),At(),La()+l,R2())}function fG(l,o,a,c){if(!c)if(3==(3&o[2])){const h=l.preOrderCheckHooks;null!==h&&V2(o,h,a)}else{const h=l.preOrderHooks;null!==h&&z2(o,h,0,a)}tp(a)}function sT(l,o){return l<<17|o<<2}function Du(l){return l>>17&32767}function e4(l){return 2|l}function Gd(l){return(131068&l)>>2}function t4(l,o){return-131069&l|o<<2}function n4(l){return 1|l}function wG(l,o){const a=l.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const u=a[c],h=a[c+1];if(-1!==h){const d=l.data[h];yP(u),d.contentQueries(2,o[h],h)}}}function Ub(l,o,a,c,u,h,d,f,p,g){const m=o.blueprint.slice();return m[0]=u,m[2]=140|c,V$(m),m[3]=m[15]=l,m[8]=a,m[10]=d||l&&l[10],m[11]=f||l&&l[11],m[12]=p||l&&l[12]||null,m[9]=g||l&&l[9]||null,m[6]=h,m[16]=2==o.type?l[16]:m,m}function Ov(l,o,a,c,u){let h=l.data[o];if(null===h)h=function h4(l,o,a,c,u){const h=U$(),d=pP(),p=l.data[o]=function pCe(l,o,a,c,u,h){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?h:h&&h.parent,a,o,c,u);return null===l.firstChild&&(l.firstChild=p),null!==h&&(d?null==h.child&&null!==p.parent&&(h.child=p):null===h.next&&(h.next=p)),p}(l,o,a,c,u),function H1e(){return ni.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=c,h.attrs=u;const d=function _b(){const l=ni.lFrame,o=l.currentTNode;return l.isParent?o:o.parent}();h.injectorIndex=null===d?-1:d.injectorIndex}return Ch(h,!0),h}function Dv(l,o,a,c){if(0===a)return-1;const u=o.length;for(let h=0;h<a;h++)o.push(c),l.blueprint.push(c),l.data.push(null);return u}function Hb(l,o,a){N2(o);try{const c=l.viewQuery;null!==c&&b4(1,c,a);const u=l.template;null!==u&&TG(l,o,u,1,a),l.firstCreatePass&&(l.firstCreatePass=!1),l.staticContentQueries&&wG(l,o),l.staticViewQueries&&b4(2,l.viewQuery,a);const h=l.components;null!==h&&function hCe(l,o){for(let a=0;a<o.length;a++)ICe(l,o[a])}(o,h)}catch(c){throw l.firstCreatePass&&(l.incompleteFirstPass=!0,l.firstCreatePass=!1),c}finally{o[2]&=-5,L2()}}function kv(l,o,a,c){const u=o[2];if(256==(256&u))return;N2(o);const h=R2();try{V$(o),function H$(l){return ni.lFrame.bindingIndex=l}(l.bindingStartIndex),null!==a&&TG(l,o,a,2,c);const d=3==(3&u);if(!h)if(d){const g=l.preOrderCheckHooks;null!==g&&V2(o,g,null)}else{const g=l.preOrderHooks;null!==g&&z2(o,g,0,null),_P(o,0)}if(function ECe(l){for(let o=WP(l);null!==o;o=GP(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const u=a[c],h=u[3];0==(1024&u[2])&&fP(h,1),u[2]|=1024}}}(o),function MCe(l){for(let o=WP(l);null!==o;o=GP(o))for(let a=10;a<o.length;a++){const c=o[a],u=c[1];dP(c)&&kv(u,c,u.template,c[8])}}(o),null!==l.contentQueries&&wG(l,o),!h)if(d){const g=l.contentCheckHooks;null!==g&&V2(o,g)}else{const g=l.contentHooks;null!==g&&z2(o,g,1),_P(o,1)}!function cCe(l,o){const a=l.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const u=a[c];if(u<0)tp(~u);else{const h=u,d=a[++c],f=a[++c];$1e(d,h),f(2,o[h])}}}finally{tp(-1)}}(l,o);const f=l.components;null!==f&&function uCe(l,o){for(let a=0;a<o.length;a++)ACe(l,o[a])}(o,f);const p=l.viewQuery;if(null!==p&&b4(2,p,c),!h)if(d){const g=l.viewCheckHooks;null!==g&&V2(o,g)}else{const g=l.viewHooks;null!==g&&z2(o,g,2),_P(o,2)}!0===l.firstUpdatePass&&(l.firstUpdatePass=!1),h||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,fP(o[3],-1))}finally{L2()}}function dCe(l,o,a,c){const u=o[10],h=!R2(),d=B$(o);try{h&&!d&&u.begin&&u.begin(),d&&Hb(l,o,c),kv(l,o,a,c)}finally{h&&!d&&u.end&&u.end()}}function TG(l,o,a,c,u){const h=La(),d=2&c;try{tp(-1),d&&o.length>20&&fG(l,o,20,R2()),a(c,u)}finally{tp(h)}}function OG(l,o,a){if(rP(o)){const u=o.directiveEnd;for(let h=o.directiveStart;h<u;h++){const d=l.data[h];d.contentQueries&&d.contentQueries(1,a[h],h)}}}function d4(l,o,a){!z$()||(function xCe(l,o,a,c){const u=a.directiveStart,h=a.directiveEnd;l.firstCreatePass||Cb(a,o),ca(c,o);const d=a.initialInputs;for(let f=u;f<h;f++){const p=l.data[f],g=Tu(p);g&&OCe(o,a,p);const m=Sb(o,l,f,a);ca(m,o),null!==d&&DCe(0,f-u,m,p,0,d),g&&(Ql(a.index,o)[8]=m)}}(l,o,a,$c(a,o)),128==(128&a.flags)&&function CCe(l,o,a){const c=a.directiveStart,u=a.directiveEnd,d=a.index,f=function W1e(){return ni.lFrame.currentDirectiveIndex}();try{tp(d);for(let p=c;p<u;p++){const g=l.data[p],m=o[p];mP(p),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&RG(g,m)}}finally{tp(-1),mP(f)}}(l,o,a))}function f4(l,o,a=$c){const c=o.localNames;if(null!==c){let u=o.index+1;for(let h=0;h<c.length;h+=2){const d=c[h+1],f=-1===d?a(o,l):l[d];l[u++]=f}}}function DG(l){const o=l.tView;return null===o||o.incompleteFirstPass?l.tView=lT(1,null,l.template,l.decls,l.vars,l.directiveDefs,l.pipeDefs,l.viewQuery,l.schemas,l.consts):o}function lT(l,o,a,c,u,h,d,f,p,g){const m=20+c,v=m+u,y=function fCe(l,o){const a=[];for(let c=0;c<o;c++)a.push(c<l?null:fi);return a}(m,v),_="function"==typeof g?g():g;return y[1]={type:l,blueprint:y,template:a,queries:null,viewQuery:f,declTNode:o,data:y.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:p,consts:_,incompleteFirstPass:!1}}function EG(l,o,a,c){const u=zG(o);null===a?u.push(c):(u.push(a),l.firstCreatePass&&UG(l).push(c,u.length-1))}function AG(l,o,a){for(let c in l)if(l.hasOwnProperty(c)){const u=l[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,u):a[c]=[o,u]}return a}function Xl(l,o,a,c,u,h,d,f){const p=$c(o,a);let m,g=o.inputs;!f&&null!=g&&(m=g[c])?(WG(l,a,m,c,u),A2(o)&&function vCe(l,o){const a=Ql(o,l);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(c=function mCe(l){return"class"===l?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l}(c),u=null!=d?d(u,o.value||"",c):u,Es(h)?h.setProperty(p,c,u):xP(c)||(p.setProperty?p.setProperty(c,u):p[c]=u))}function p4(l,o,a,c){let u=!1;if(z$()){const h=function SCe(l,o,a){const c=l.directiveRegistry;let u=null;if(c)for(let h=0;h<c.length;h++){const d=c[h];hG(a,d.selectors,!1)&&(u||(u=[]),G2(Cb(a,o),l,d.type),Tu(d)?(FG(l,a),u.unshift(d)):u.push(d))}return u}(l,o,a),d=null===c?null:{"":-1};if(null!==h){u=!0,NG(a,l.data.length,h.length);for(let m=0;m<h.length;m++){const v=h[m];v.providersResolver&&v.providersResolver(v)}let f=!1,p=!1,g=Dv(l,o,h.length,null);for(let m=0;m<h.length;m++){const v=h[m];a.mergedAttrs=H2(a.mergedAttrs,v.hostAttrs),LG(l,a,o,g,v),TCe(g,v,d),null!==v.contentQueries&&(a.flags|=8),(null!==v.hostBindings||null!==v.hostAttrs||0!==v.hostVars)&&(a.flags|=128);const y=v.type.prototype;!f&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((l.preOrderHooks||(l.preOrderHooks=[])).push(a.index),f=!0),!p&&(y.ngOnChanges||y.ngDoCheck)&&((l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(a.index),p=!0),g++}!function gCe(l,o){const c=o.directiveEnd,u=l.data,h=o.attrs,d=[];let f=null,p=null;for(let g=o.directiveStart;g<c;g++){const m=u[g],v=m.inputs,y=null===h||uG(o)?null:kCe(v,h);d.push(y),f=AG(v,g,f),p=AG(m.outputs,g,p)}null!==f&&(f.hasOwnProperty("class")&&(o.flags|=16),f.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=d,o.inputs=f,o.outputs=p}(l,a)}d&&function wCe(l,o,a){if(o){const c=l.localNames=[];for(let u=0;u<o.length;u+=2){const h=a[o[u+1]];if(null==h)throw new nr(-301,`Export of name '${o[u+1]}' not found!`);c.push(o[u],h)}}}(a,c,d)}return a.mergedAttrs=H2(a.mergedAttrs,a.attrs),u}function PG(l,o,a,c,u,h){const d=h.hostBindings;if(d){let f=l.hostBindingOpCodes;null===f&&(f=l.hostBindingOpCodes=[]);const p=~o.index;(function bCe(l){let o=l.length;for(;o>0;){const a=l[--o];if("number"==typeof a&&a<0)return a}return 0})(f)!=p&&f.push(p),f.push(c,u,d)}}function RG(l,o){null!==l.hostBindings&&l.hostBindings(1,o)}function FG(l,o){o.flags|=2,(l.components||(l.components=[])).push(o.index)}function TCe(l,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=l;Tu(o)&&(a[""]=l)}}function NG(l,o,a){l.flags|=1,l.directiveStart=o,l.directiveEnd=o+a,l.providerIndexes=o}function LG(l,o,a,c,u){l.data[c]=u;const h=u.factory||(u.factory=Zg(u.type)),d=new bb(h,Tu(u),null);l.blueprint[c]=d,a[c]=d,PG(l,o,0,c,Dv(l,a,u.hostVars,fi),u)}function OCe(l,o,a){const c=$c(o,l),u=DG(a),h=l[10],d=cT(l,Ub(l,u,null,a.onPush?64:16,c,o,h,h.createRenderer(c,a),null,null));l[o.index]=d}function Oh(l,o,a,c,u,h){const d=$c(l,o);!function g4(l,o,a,c,u,h,d){if(null==h)Es(l)?l.removeAttribute(o,u,a):o.removeAttribute(u);else{const f=null==d?di(h):d(h,c||"",u);Es(l)?l.setAttribute(o,u,f,a):a?o.setAttributeNS(a,u,f):o.setAttribute(u,f)}}(o[11],d,h,l.value,a,c,u)}function DCe(l,o,a,c,u,h){const d=h[o];if(null!==d){const f=c.setInput;for(let p=0;p<d.length;){const g=d[p++],m=d[p++],v=d[p++];null!==f?c.setInput(a,v,g,m):a[m]=v}}}function kCe(l,o){let a=null,c=0;for(;c<o.length;){const u=o[c];if(0!==u)if(5!==u){if("number"==typeof u)break;l.hasOwnProperty(u)&&(null===a&&(a=[]),a.push(u,l[u],o[c+1])),c+=2}else c+=2;else c+=4}return a}function BG(l,o,a,c){return new Array(l,!0,!1,o,null,0,c,a,null,null)}function ACe(l,o){const a=Ql(o,l);if(dP(a)){const c=a[1];80&a[2]?kv(c,a,c.template,a[8]):a[5]>0&&m4(a)}}function m4(l){for(let c=WP(l);null!==c;c=GP(c))for(let u=10;u<c.length;u++){const h=c[u];if(1024&h[2]){const d=h[1];kv(d,h,d.template,h[8])}else h[5]>0&&m4(h)}const a=l[1].components;if(null!==a)for(let c=0;c<a.length;c++){const u=Ql(a[c],l);dP(u)&&u[5]>0&&m4(u)}}function ICe(l,o){const a=Ql(o,l),c=a[1];(function PCe(l,o){for(let a=o.length;a<l.blueprint.length;a++)o.push(l.blueprint[a])})(c,a),Hb(c,a,a[8])}function cT(l,o){return l[13]?l[14][4]=o:l[13]=o,l[14]=o,o}function v4(l){for(;l;){l[2]|=64;const o=Vb(l);if(b1e(l)&&!o)return l;l=o}return null}function _4(l,o,a){const c=o[10];c.begin&&c.begin();try{kv(l,o,l.template,a)}catch(u){throw $G(o,u),u}finally{c.end&&c.end()}}function VG(l){!function y4(l){for(let o=0;o<l.components.length;o++){const a=l.components[o],c=VP(a),u=c[1];dCe(u,c,u.template,a)}}(l[8])}function b4(l,o,a){yP(0),o(l,a)}const LCe=(()=>Promise.resolve(null))();function zG(l){return l[7]||(l[7]=[])}function UG(l){return l.cleanup||(l.cleanup=[])}function $G(l,o){const a=l[9],c=a?a.get(Sv,null):null;c&&c.handleError(o)}function WG(l,o,a,c,u){for(let h=0;h<a.length;){const d=a[h++],f=a[h++],p=o[d],g=l.data[d];null!==g.setInput?g.setInput(p,u,c,f):p[f]=u}}function Qd(l,o,a){const c=P2(o,l);!function jW(l,o,a){Es(l)?l.setValue(o,a):o.textContent=a}(l[11],c,a)}function uT(l,o,a){let c=a?l.styles:null,u=a?l.classes:null,h=0;if(null!==o)for(let d=0;d<o.length;d++){const f=o[d];"number"==typeof f?h=f:1==h?u=q3(u,f):2==h&&(c=q3(c,f+": "+o[++d]+";"))}a?l.styles=c:l.stylesWithoutHost=c,a?l.classes=u:l.classesWithoutHost=u}const x4=new Zn("INJECTOR",-1);class GG{get(o,a=Db){if(a===Db){const c=new Error(`NullInjectorError: No provider for ${Sr(o)}!`);throw c.name="NullInjectorError",c}return a}}const C4=new Zn("Set Injector scope."),$b={},zCe={};let S4;function QG(){return void 0===S4&&(S4=new GG),S4}function jG(l,o=null,a=null,c){const u=qG(l,o,a,c);return u._resolveInjectorDefTypes(),u}function qG(l,o=null,a=null,c){return new UCe(l,a,o||QG(),c)}class UCe{constructor(o,a,c,u=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&Sh(a,f=>this.processProvider(f,o,a)),Sh([o],f=>this.processInjectorType(f,[],h)),this.records.set(x4,Mv(void 0,this));const d=this.records.get(C4);this.scope=null!=d?d.value:null,this.source=u||("object"==typeof o?null:Sr(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Db,c=mi.Default){this.assertNotDestroyed();const u=mW(this),h=Yf(void 0);try{if(!(c&mi.SkipSelf)){let f=this.records.get(o);if(void 0===f){const p=function ZCe(l){return"function"==typeof l||"object"==typeof l&&l instanceof Zn}(o)&&X3(o);f=p&&this.injectableDefInScope(p)?Mv(w4(o),$b):null,this.records.set(o,f)}if(null!=f)return this.hydrate(o,f)}return(c&mi.Self?QG():this.parent).get(o,a=c&mi.Optional&&a===Db?null:a)}catch(d){if("NullInjectorError"===d.name){if((d[X2]=d[X2]||[]).unshift(Sr(o)),u)throw d;return function Obe(l,o,a,c){const u=l[X2];throw o[gW]&&u.unshift(o[gW]),l.message=function Dbe(l,o,a,c=null){l=l&&"\n"===l.charAt(0)&&"\u0275"==l.charAt(1)?l.substr(2):l;let u=Sr(o);if(Array.isArray(o))u=o.map(Sr).join(" -> ");else if("object"==typeof o){let h=[];for(let d in o)if(o.hasOwnProperty(d)){let f=o[d];h.push(d+":"+("string"==typeof f?JSON.stringify(f):Sr(f)))}u=`{${h.join(", ")}}`}return`${a}${c?"("+c+")":""}[${u}]: ${l.replace(xbe,"\n  ")}`}("\n"+l.message,u,a,c),l.ngTokenPath=u,l[X2]=null,l}(d,o,"R3InjectorError",this.source)}throw d}finally{Yf(h),mW(u)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,u)=>o.push(Sr(u))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new nr(205,"")}processInjectorType(o,a,c){if(!(o=wi(o)))return!1;let u=T$(o);const h=null==u&&o.ngModule||void 0,d=void 0===h?o:h,f=-1!==c.indexOf(d);if(void 0!==h&&(u=T$(h)),null==u)return!1;if(null!=u.imports&&!f){let m;c.push(d);try{Sh(u.imports,v=>{this.processInjectorType(v,a,c)&&(void 0===m&&(m=[]),m.push(v))})}finally{}if(void 0!==m)for(let v=0;v<m.length;v++){const{ngModule:y,providers:_}=m[v];Sh(_,b=>this.processProvider(b,y,_||Nr))}}this.injectorDefTypes.add(d);const p=Zg(d)||(()=>new d);this.records.set(d,Mv(p,$b));const g=u.providers;if(null!=g&&!f){const m=o;Sh(g,v=>this.processProvider(v,m,g))}return void 0!==h&&void 0!==o.providers}processProvider(o,a,c){let u=Ev(o=wi(o))?o:wi(o&&o.provide);const h=function $Ce(l,o,a){return XG(l)?Mv(void 0,l.useValue):Mv(ZG(l),$b)}(o);if(Ev(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Mv(void 0,$b,!0),d.factory=()=>EP(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,h)}hydrate(o,a){return a.value===$b&&(a.value=zCe,a.value=a.factory()),"object"==typeof a.value&&a.value&&function qCe(l){return null!==l&&"object"==typeof l&&"function"==typeof l.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=wi(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function w4(l){const o=X3(l),a=null!==o?o.factory:Zg(l);if(null!==a)return a;if(l instanceof Zn)throw new nr(204,"");if(l instanceof Function)return function HCe(l){const o=l.length;if(o>0)throw Ob(o,"?"),new nr(204,"");const a=function l1e(l){const o=l&&(l[O2]||l[O$]);if(o){const a=function c1e(l){if(l.hasOwnProperty("name"))return l.name;const o=(""+l).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(l);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(l);return null!==a?()=>a.factory(l):()=>new l}(l);throw new nr(204,"")}function ZG(l,o,a){let c;if(Ev(l)){const u=wi(l);return Zg(u)||w4(u)}if(XG(l))c=()=>wi(l.useValue);else if(function GCe(l){return!(!l||!l.useFactory)}(l))c=()=>l.useFactory(...EP(l.deps||[]));else if(function WCe(l){return!(!l||!l.useExisting)}(l))c=()=>Ae(wi(l.useExisting));else{const u=wi(l&&(l.useClass||l.provide));if(!function jCe(l){return!!l.deps}(l))return Zg(u)||w4(u);c=()=>new u(...EP(l.deps))}return c}function Mv(l,o,a=!1){return{factory:l,value:o,multi:a?[]:void 0}}function XG(l){return null!==l&&"object"==typeof l&&Sbe in l}function Ev(l){return"function"==typeof l}let gr=(()=>{class l{static create(a,c){var u;if(Array.isArray(a))return jG({name:""},c,a,"");{const h=null!==(u=a.name)&&void 0!==u?u:"";return jG({name:h},a.parent,a.providers,h)}}}return l.THROW_IF_NOT_FOUND=Db,l.NULL=new GG,l.\u0275prov=Ze({token:l,providedIn:"any",factory:()=>Ae(x4)}),l.__NG_ELEMENT_ID__=-1,l})();function iSe(l,o){B2(VP(l)[1],yo())}function pn(l){let o=function lQ(l){return Object.getPrototypeOf(l.prototype).constructor}(l.type),a=!0;const c=[l];for(;o;){let u;if(Tu(l))u=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new nr(903,"");u=o.\u0275dir}if(u){if(a){c.push(u);const d=l;d.inputs=D4(l.inputs),d.declaredInputs=D4(l.declaredInputs),d.outputs=D4(l.outputs);const f=u.hostBindings;f&&aSe(l,f);const p=u.viewQuery,g=u.contentQueries;if(p&&sSe(l,p),g&&oSe(l,g),j3(l.inputs,u.inputs),j3(l.declaredInputs,u.declaredInputs),j3(l.outputs,u.outputs),Tu(u)&&u.data.animation){const m=l.data;m.animation=(m.animation||[]).concat(u.data.animation)}}const h=u.features;if(h)for(let d=0;d<h.length;d++){const f=h[d];f&&f.ngInherit&&f(l),f===pn&&(a=!1)}}o=Object.getPrototypeOf(o)}!function rSe(l){let o=0,a=null;for(let c=l.length-1;c>=0;c--){const u=l[c];u.hostVars=o+=u.hostVars,u.hostAttrs=H2(u.hostAttrs,a=H2(a,u.hostAttrs))}}(c)}function D4(l){return l===sv?{}:l===Nr?[]:l}function sSe(l,o){const a=l.viewQuery;l.viewQuery=a?(c,u)=>{o(c,u),a(c,u)}:o}function oSe(l,o){const a=l.contentQueries;l.contentQueries=a?(c,u,h)=>{o(c,u,h),a(c,u,h)}:o}function aSe(l,o){const a=l.hostBindings;l.hostBindings=a?(c,u)=>{o(c,u),a(c,u)}:o}let hT=null;function Av(){if(!hT){const l=Ir.Symbol;if(l&&l.iterator)hT=l.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(hT=c)}}}return hT}function Wb(l){return!!k4(l)&&(Array.isArray(l)||!(l instanceof Map)&&Av()in l)}function k4(l){return null!==l&&("function"==typeof l||"object"==typeof l)}function Dh(l,o,a){return l[o]=a}function Gb(l,o){return l[o]}function ua(l,o,a){return!Object.is(l[o],a)&&(l[o]=a,!0)}function Yg(l,o,a,c){const u=ua(l,o,a);return ua(l,o+1,c)||u}function dT(l,o,a,c,u){const h=Yg(l,o,a,c);return ua(l,o+2,u)||h}function Gc(l,o,a,c,u,h){const d=Yg(l,o,a,c);return Yg(l,o+2,u,h)||d}function et(l,o,a,c){const u=At();return ua(u,hv(),o)&&(ir(),Oh(As(),u,l,o,a,c)),et}function Pv(l,o,a,c){return ua(l,hv(),a)?o+di(a)+c:fi}function Y(l,o,a,c,u,h,d,f){const p=At(),g=ir(),m=l+20,v=g.firstCreatePass?function pSe(l,o,a,c,u,h,d,f,p){const g=o.consts,m=Ov(o,l,4,d||null,ep(g,f));p4(o,a,m,ep(g,p)),B2(o,m);const v=m.tViews=lT(2,m,c,u,h,o.directiveRegistry,o.pipeRegistry,null,o.schemas,g);return null!==o.queries&&(o.queries.template(o,m),v.queries=o.queries.embeddedTView(m)),m}(m,g,p,o,a,c,u,h,d):g.data[m];Ch(v,!1);const y=p[11].createComment("");iT(g,p,y,v),ca(y,p),cT(p,p[m]=BG(y,p,y,v)),I2(v)&&d4(g,p,v),null!=d&&f4(p,v,f)}function Fo(l){return uv(function U1e(){return ni.lFrame.contextLView}(),20+l)}function L(l,o=mi.Default){const a=At();return null===a?Ae(l,o):sW(yo(),a,wi(l),o)}function P4(){throw new Error("invalid")}function F(l,o,a){const c=At();return ua(c,hv(),o)&&Xl(ir(),As(),c,l,o,c[11],a,!1),F}function R4(l,o,a,c,u){const d=u?"class":"style";WG(l,a,o.inputs[d],d,c)}function D(l,o,a,c){const u=At(),h=ir(),d=20+l,f=u[11],p=u[d]=jP(f,o,function X1e(){return ni.lFrame.currentNamespace}()),g=h.firstCreatePass?function FSe(l,o,a,c,u,h,d){const f=o.consts,g=Ov(o,l,2,u,ep(f,h));return p4(o,a,g,ep(f,d)),null!==g.attrs&&uT(g,g.attrs,!1),null!==g.mergedAttrs&&uT(g,g.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,g),g}(d,h,u,0,o,a,c):h.data[d];Ch(g,!0);const m=g.mergedAttrs;null!==m&&U2(f,p,m);const v=g.classes;null!==v&&JP(f,p,v);const y=g.styles;null!==y&&aG(f,p,y),64!=(64&g.flags)&&iT(h,u,p,g),0===function N1e(){return ni.lFrame.elementDepthCount}()&&ca(p,u),function L1e(){ni.lFrame.elementDepthCount++}(),I2(g)&&(d4(h,u,g),OG(h,g,u)),null!==c&&f4(u,g)}function k(){let l=yo();pP()?gP():(l=l.parent,Ch(l,!1));const o=l;!function B1e(){ni.lFrame.elementDepthCount--}();const a=ir();a.firstCreatePass&&(B2(a,l),rP(l)&&a.queries.elementEnd(l)),null!=o.classesWithoutHost&&function tbe(l){return 0!=(16&l.flags)}(o)&&R4(a,o,At(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function nbe(l){return 0!=(32&l.flags)}(o)&&R4(a,o,At(),o.stylesWithoutHost,!1)}function me(l,o,a,c){D(l,o,a,c),k()}function wr(l,o,a){const c=At(),u=ir(),h=l+20,d=u.firstCreatePass?function NSe(l,o,a,c,u){const h=o.consts,d=ep(h,c),f=Ov(o,l,8,"ng-container",d);return null!==d&&uT(f,d,!0),p4(o,a,f,ep(h,u)),null!==o.queries&&o.queries.elementStart(o,f),f}(h,u,c,o,a):u.data[h];Ch(d,!0);const f=c[h]=c[11].createComment("");iT(u,c,f,d),ca(f,c),I2(d)&&(d4(u,c,d),OG(u,d,c)),null!=a&&f4(c,d)}function Tr(){let l=yo();const o=ir();pP()?gP():(l=l.parent,Ch(l,!1)),o.firstCreatePass&&(B2(o,l),rP(l)&&o.queries.elementEnd(l))}function Va(l,o,a){wr(l,o,a),Tr()}function gt(){return At()}function Qb(l){return!!l&&"function"==typeof l.then}function kQ(l){return!!l&&"function"==typeof l.subscribe}const F4=kQ;function ee(l,o,a,c){const u=At(),h=ir(),d=yo();return function MQ(l,o,a,c,u,h,d,f){const p=I2(c),m=l.firstCreatePass&&UG(l),v=o[8],y=zG(o);let _=!0;if(3&c.type||f){const x=$c(c,o),S=f?f(x):x,w=y.length,O=f?T=>f(Ks(T[c.index])):c.index;if(Es(a)){let T=null;if(!f&&p&&(T=function LSe(l,o,a,c){const u=l.cleanup;if(null!=u)for(let h=0;h<u.length-1;h+=2){const d=u[h];if(d===a&&u[h+1]===c){const f=o[7],p=u[h+2];return f.length>p?f[p]:null}"string"==typeof d&&(h+=2)}return null}(l,o,u,c.index)),null!==T)(T.__ngLastListenerFn__||T).__ngNextListenerFn__=h,T.__ngLastListenerFn__=h,_=!1;else{h=L4(c,o,v,h,!1);const M=a.listen(S,u,h);y.push(h,M),m&&m.push(u,O,w,w+1)}}else h=L4(c,o,v,h,!0),S.addEventListener(u,h,d),y.push(h),m&&m.push(u,O,w,d)}else h=L4(c,o,v,h,!1);const b=c.outputs;let C;if(_&&null!==b&&(C=b[u])){const x=C.length;if(x)for(let S=0;S<x;S+=2){const A=o[C[S]][C[S+1]].subscribe(h),I=y.length;y.push(h,A),m&&m.push(u,c.index,I,-(I+1))}}}(h,u,u[11],d,l,o,!!a,c),ee}function EQ(l,o,a,c){try{return!1!==a(c)}catch(u){return $G(l,u),!1}}function L4(l,o,a,c,u){return function h(d){if(d===Function)return c;const f=2&l.flags?Ql(l.index,o):o;0==(32&o[2])&&v4(f);let p=EQ(o,0,c,d),g=h.__ngNextListenerFn__;for(;g;)p=EQ(o,0,g,d)&&p,g=g.__ngNextListenerFn__;return u&&!1===p&&(d.preventDefault(),d.returnValue=!1),p}}function Z(l=1){return function Q1e(l){return(ni.lFrame.contextLView=function j1e(l,o){for(;l>0;)o=o[15],l--;return o}(l,ni.lFrame.contextLView))[8]}(l)}function BSe(l,o){let a=null;const c=function Qxe(l){const o=l.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(l);for(let u=0;u<o.length;u++){const h=o[u];if("*"!==h){if(null===c?hG(l,h,!0):Zxe(c,h))return u}else a=u}return a}function Yt(l){const o=At()[16][6];if(!o.projection){const c=o.projection=Ob(l?l.length:1,null),u=c.slice();let h=o.child;for(;null!==h;){const d=l?BSe(h,l):0;null!==d&&(u[d]?u[d].projectionNext=h:c[d]=h,u[d]=h),h=h.next}}}function ut(l,o=0,a){const c=At(),u=ir(),h=Ov(u,20+l,16,null,a||null);null===h.projection&&(h.projection=o),gP(),64!=(64&h.flags)&&function Vxe(l,o,a){oG(o[11],0,o,a,XW(l,a,o),eG(a.parent||o[6],a,o))}(u,c,h)}function pT(l,o,a){return Hv(l,"",o,"",a),pT}function Hv(l,o,a,c,u){const h=At(),d=Pv(h,o,a,c);return d!==fi&&Xl(ir(),As(),h,l,d,h[11],u,!1),Hv}function VQ(l,o,a,c,u){const h=l[a+1],d=null===o;let f=c?Du(h):Gd(h),p=!1;for(;0!==f&&(!1===p||d);){const m=l[f+1];USe(l[f],o)&&(p=!0,l[f+1]=c?n4(m):e4(m)),f=c?Du(m):Gd(m)}p&&(l[a+1]=c?e4(h):n4(h))}function USe(l,o){return null===l||null==o||(Array.isArray(l)?l[1]:l)===o||!(!Array.isArray(l)||"string"!=typeof o)&&bv(l,o)>=0}const bo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zQ(l){return l.substring(bo.key,bo.keyEnd)}function UQ(l,o){const a=bo.textEnd;return a===o?-1:(o=bo.keyEnd=function GSe(l,o,a){for(;o<a&&l.charCodeAt(o)>32;)o++;return o}(l,bo.key=o,a),$v(l,o,a))}function $v(l,o,a){for(;o<a&&l.charCodeAt(o)<=32;)o++;return o}function Et(l,o){return function Mu(l,o,a,c){const u=At(),h=ir(),d=$d(2);h.firstUpdatePass&&jQ(h,l,d,c),o!==fi&&ua(u,d,o)&&ZQ(h,h.data[La()],u,u[11],l,u[d+1]=function twe(l,o){return null==l||("string"==typeof o?l+=o:"object"==typeof l&&(l=Sr(rp(l)))),l}(o,a),c,d)}(l,o,null,!0),Et}function B4(l){!function Eu(l,o,a,c){const u=ir(),h=$d(2);u.firstUpdatePass&&jQ(u,null,h,c);const d=At();if(a!==fi&&ua(d,h,a)){const f=u.data[La()];if(YQ(f,c)&&!QQ(u,h)){let p=c?f.classesWithoutHost:f.stylesWithoutHost;null!==p&&(a=q3(p,a||"")),R4(u,f,d,a,c)}else!function ewe(l,o,a,c,u,h,d,f){u===fi&&(u=Nr);let p=0,g=0,m=0<u.length?u[0]:null,v=0<h.length?h[0]:null;for(;null!==m||null!==v;){const y=p<u.length?u[p+1]:void 0,_=g<h.length?h[g+1]:void 0;let C,b=null;m===v?(p+=2,g+=2,y!==_&&(b=v,C=_)):null===v||null!==m&&m<v?(p+=2,b=m):(g+=2,b=v,C=_),null!==b&&ZQ(l,o,a,c,b,C,d,f),m=p<u.length?u[p]:null,v=g<h.length?h[g]:null}}(u,f,d,d[11],d[h+1],d[h+1]=function JSe(l,o,a){if(null==a||""===a)return Nr;const c=[],u=rp(a);if(Array.isArray(u))for(let h=0;h<u.length;h++)l(c,u[h],!0);else if("object"==typeof u)for(const h in u)u.hasOwnProperty(h)&&l(c,h,u[h]);else"string"==typeof u&&o(c,u);return c}(l,o,a),c,h)}}(jl,Mh,l,!0)}function Mh(l,o){for(let a=function $Se(l){return function $Q(l){bo.key=0,bo.keyEnd=0,bo.value=0,bo.valueEnd=0,bo.textEnd=l.length}(l),UQ(l,$v(l,0,bo.textEnd))}(o);a>=0;a=UQ(o,a))jl(l,zQ(o),!0)}function QQ(l,o){return o>=l.expandoStartIndex}function jQ(l,o,a,c){const u=l.data;if(null===u[a+1]){const h=u[La()],d=QQ(l,a);YQ(h,c)&&null===o&&!d&&(o=!1),o=function ZSe(l,o,a,c){const u=function vP(l){const o=ni.lFrame.currentDirectiveIndex;return-1===o?null:l[o]}(l);let h=c?o.residualClasses:o.residualStyles;if(null===u)0===(c?o.classBindings:o.styleBindings)&&(a=jb(a=V4(null,l,o,a,c),o.attrs,c),h=null);else{const d=o.directiveStylingLast;if(-1===d||l[d]!==u)if(a=V4(u,l,o,a,c),null===h){let p=function XSe(l,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Gd(c))return l[Du(c)]}(l,o,c);void 0!==p&&Array.isArray(p)&&(p=V4(null,l,o,p[1],c),p=jb(p,o.attrs,c),function YSe(l,o,a,c){l[Du(a?o.classBindings:o.styleBindings)]=c}(l,o,c,p))}else h=function KSe(l,o,a){let c;const u=o.directiveEnd;for(let h=1+o.directiveStylingLast;h<u;h++)c=jb(c,l[h].hostAttrs,a);return jb(c,o.attrs,a)}(l,o,c)}return void 0!==h&&(c?o.residualClasses=h:o.residualStyles=h),a}(u,h,o,c),function VSe(l,o,a,c,u,h){let d=h?o.classBindings:o.styleBindings,f=Du(d),p=Gd(d);l[c]=a;let m,g=!1;if(Array.isArray(a)){const v=a;m=v[1],(null===m||bv(v,m)>0)&&(g=!0)}else m=a;if(u)if(0!==p){const y=Du(l[f+1]);l[c+1]=sT(y,f),0!==y&&(l[y+1]=t4(l[y+1],c)),l[f+1]=function Jxe(l,o){return 131071&l|o<<17}(l[f+1],c)}else l[c+1]=sT(f,0),0!==f&&(l[f+1]=t4(l[f+1],c)),f=c;else l[c+1]=sT(p,0),0===f?f=c:l[p+1]=t4(l[p+1],c),p=c;g&&(l[c+1]=e4(l[c+1])),VQ(l,m,c,!0),VQ(l,m,c,!1),function zSe(l,o,a,c,u){const h=u?l.residualClasses:l.residualStyles;null!=h&&"string"==typeof o&&bv(h,o)>=0&&(a[c+1]=n4(a[c+1]))}(o,m,l,c,h),d=sT(f,p),h?o.classBindings=d:o.styleBindings=d}(u,h,o,a,d,c)}}function V4(l,o,a,c,u){let h=null;const d=a.directiveEnd;let f=a.directiveStylingLast;for(-1===f?f=a.directiveStart:f++;f<d&&(h=o[f],c=jb(c,h.hostAttrs,u),h!==l);)f++;return null!==l&&(a.directiveStylingLast=f),c}function jb(l,o,a){const c=a?1:2;let u=-1;if(null!==o)for(let h=0;h<o.length;h++){const d=o[h];"number"==typeof d?u=d:u===c&&(Array.isArray(l)||(l=void 0===l?[]:["",l]),jl(l,d,!!a||o[++h]))}return void 0===l?null:l}function ZQ(l,o,a,c,u,h,d,f){if(!(3&o.type))return;const p=l.data,g=p[f+1];mT(function mG(l){return 1==(1&l)}(g)?XQ(p,o,a,u,Gd(g),d):void 0)||(mT(h)||function gG(l){return 2==(2&l)}(g)&&(h=XQ(p,null,a,u,f,d)),function Uxe(l,o,a,c,u){const h=Es(l);if(o)u?h?l.addClass(a,c):a.classList.add(c):h?l.removeClass(a,c):a.classList.remove(c);else{let d=-1===c.indexOf("-")?void 0:Zl.DashCase;if(null==u)h?l.removeStyle(a,c,d):a.style.removeProperty(c);else{const f="string"==typeof u&&u.endsWith("!important");f&&(u=u.slice(0,-10),d|=Zl.Important),h?l.setStyle(a,c,u,d):a.style.setProperty(c,u,f?"important":"")}}}(c,d,P2(La(),a),u,h))}function XQ(l,o,a,c,u,h){const d=null===o;let f;for(;u>0;){const p=l[u],g=Array.isArray(p),m=g?p[1]:p,v=null===m;let y=a[u+1];y===fi&&(y=v?Nr:void 0);let _=v?DP(y,c):m===c?y:void 0;if(g&&!mT(_)&&(_=DP(p,c)),mT(_)&&(f=_,d))return f;const b=l[u+1];u=d?Du(b):Gd(b)}if(null!==o){let p=h?o.residualClasses:o.residualStyles;null!=p&&(f=DP(p,c))}return f}function mT(l){return void 0!==l}function YQ(l,o){return 0!=(l.flags&(o?16:32))}function ne(l,o=""){const a=At(),c=ir(),u=l+20,h=c.firstCreatePass?Ov(c,u,1,o,null):c.data[u],d=a[u]=function QP(l,o){return Es(l)?l.createText(o):l.createTextNode(o)}(a[11],o);iT(c,a,d,h),Ch(h,!1)}function en(l){return vi("",l,""),en}function vi(l,o,a){const c=At(),u=Pv(c,l,o,a);return u!==fi&&Qd(c,La(),u),vi}function qb(l,o,a,c,u){const h=At(),d=function Rv(l,o,a,c,u,h){const f=Yg(l,Hd(),a,u);return $d(2),f?o+di(a)+c+di(u)+h:fi}(h,l,o,a,c,u);return d!==fi&&Qd(h,La(),d),qb}function Zb(l,o,a,c,u,h,d){const f=At(),p=function Fv(l,o,a,c,u,h,d,f){const g=dT(l,Hd(),a,u,d);return $d(3),g?o+di(a)+c+di(u)+h+di(d)+f:fi}(f,l,o,a,c,u,h,d);return p!==fi&&Qd(f,La(),p),Zb}function Eh(l,o,a){const c=At();return ua(c,hv(),o)&&Xl(ir(),As(),c,l,o,c[11],a,!0),Eh}const Kg=void 0;var xwe=["en",[["a","p"],["AM","PM"],Kg],[["AM","PM"],Kg,Kg],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kg,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kg,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kg,"{1} 'at' {0}",Kg],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function bwe(l){const a=Math.floor(Math.abs(l)),c=l.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Wv={};function pj(l){return l in Wv||(Wv[l]=Ir.ng&&Ir.ng.common&&Ir.ng.common.locales&&Ir.ng.common.locales[l]),Wv[l]}var un=(()=>((un=un||{})[un.LocaleId=0]="LocaleId",un[un.DayPeriodsFormat=1]="DayPeriodsFormat",un[un.DayPeriodsStandalone=2]="DayPeriodsStandalone",un[un.DaysFormat=3]="DaysFormat",un[un.DaysStandalone=4]="DaysStandalone",un[un.MonthsFormat=5]="MonthsFormat",un[un.MonthsStandalone=6]="MonthsStandalone",un[un.Eras=7]="Eras",un[un.FirstDayOfWeek=8]="FirstDayOfWeek",un[un.WeekendRange=9]="WeekendRange",un[un.DateFormat=10]="DateFormat",un[un.TimeFormat=11]="TimeFormat",un[un.DateTimeFormat=12]="DateTimeFormat",un[un.NumberSymbols=13]="NumberSymbols",un[un.NumberFormats=14]="NumberFormats",un[un.CurrencyCode=15]="CurrencyCode",un[un.CurrencySymbol=16]="CurrencySymbol",un[un.CurrencyName=17]="CurrencyName",un[un.Currencies=18]="Currencies",un[un.Directionality=19]="Directionality",un[un.PluralCase=20]="PluralCase",un[un.ExtraData=21]="ExtraData",un))();const yT="en-US";let gj=yT;function H4(l,o,a,c,u){if(l=wi(l),Array.isArray(l))for(let h=0;h<l.length;h++)H4(l[h],o,a,c,u);else{const h=ir(),d=At();let f=Ev(l)?l:wi(l.provide),p=ZG(l);const g=yo(),m=1048575&g.providerIndexes,v=g.directiveStart,y=g.providerIndexes>>20;if(Ev(l)||!l.multi){const _=new bb(p,u,L),b=W4(f,o,u?m:m+y,v);-1===b?(G2(Cb(g,d),h,f),$4(h,l,o.length),o.push(f),g.directiveStart++,g.directiveEnd++,u&&(g.providerIndexes+=1048576),a.push(_),d.push(_)):(a[b]=_,d[b]=_)}else{const _=W4(f,o,m+y,v),b=W4(f,o,m,m+y),C=_>=0&&a[_],x=b>=0&&a[b];if(u&&!x||!u&&!C){G2(Cb(g,d),h,f);const S=function x2e(l,o,a,c,u){const h=new bb(l,a,L);return h.multi=[],h.index=o,h.componentProviders=0,Vj(h,u,c&&!a),h}(u?b2e:_2e,a.length,u,c,p);!u&&x&&(a[b].providerFactory=S),$4(h,l,o.length,0),o.push(f),g.directiveStart++,g.directiveEnd++,u&&(g.providerIndexes+=1048576),a.push(S),d.push(S)}else $4(h,l,_>-1?_:b,Vj(a[u?b:_],p,!u&&c));!u&&c&&x&&a[b].componentProviders++}}}function $4(l,o,a,c){const u=Ev(o),h=function QCe(l){return!!l.useClass}(o);if(u||h){const p=(h?wi(o.useClass):o).prototype.ngOnDestroy;if(p){const g=l.destroyHooks||(l.destroyHooks=[]);if(!u&&o.multi){const m=g.indexOf(a);-1===m?g.push(a,[c,p]):g[m+1].push(c,p)}else g.push(a,p)}}}function Vj(l,o,a){return a&&l.componentProviders++,l.multi.push(o)-1}function W4(l,o,a,c){for(let u=a;u<c;u++)if(o[u]===l)return u;return-1}function _2e(l,o,a,c){return G4(this.multi,[])}function b2e(l,o,a,c){const u=this.multi;let h;if(this.providerFactory){const d=this.providerFactory.componentProviders,f=Sb(a,a[1],this.providerFactory.index,c);h=f.slice(0,d),G4(u,h);for(let p=d;p<f.length;p++)h.push(f[p])}else h=[],G4(u,h);return h}function G4(l,o){for(let a=0;a<l.length;a++)o.push((0,l[a])());return o}function dn(l,o=[]){return a=>{a.providersResolver=(c,u)=>function y2e(l,o,a){const c=ir();if(c.firstCreatePass){const u=Tu(l);H4(a,c.data,c.blueprint,u,!0),H4(o,c.data,c.blueprint,u,!1)}}(c,u?u(l):l,o)}}class zj{}class w2e{resolveComponentFactory(o){throw function S2e(l){const o=Error(`No component factory found for ${Sr(l)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=l,o}(o)}}let jd=(()=>{class l{}return l.NULL=new w2e,l})();function T2e(){return Qv(yo(),At())}function Qv(l,o){return new Sn($c(l,o))}let Sn=(()=>{class l{constructor(a){this.nativeElement=a}}return l.__NG_ELEMENT_ID__=T2e,l})();function O2e(l){return l instanceof Sn?l.nativeElement:l}class jv{}let yi=(()=>{class l{}return l.__NG_ELEMENT_ID__=()=>function k2e(){const l=At(),a=Ql(yo().index,l);return function D2e(l){return l[11]}(xh(a)?a:l)}(),l})(),M2e=(()=>{class l{}return l.\u0275prov=Ze({token:l,providedIn:"root",factory:()=>null}),l})();class ex{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const E2e=new ex("13.2.0"),Q4={};function ST(l,o,a,c,u=!1){for(;null!==a;){const h=o[a.index];if(null!==h&&c.push(Ks(h)),wu(h))for(let f=10;f<h.length;f++){const p=h[f],g=p[1].firstChild;null!==g&&ST(p[1],p,g,c)}const d=a.type;if(8&d)ST(l,o,a.child,c);else if(32&d){const f=$P(a,o);let p;for(;p=f();)c.push(p)}else if(16&d){const f=rG(o,a);if(Array.isArray(f))c.push(...f);else{const p=Vb(o[16]);ST(p[1],p,f,c,!0)}}a=u?a.projectionNext:a.next}return c}class tx{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return ST(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(wu(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(qP(o,c),q2(a,c))}this._attachedToViewContainer=!1}ZW(this._lView[1],this._lView)}onDestroy(o){EG(this._lView[1],this._lView,null,o)}markForCheck(){v4(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){_4(this._lView[1],this._lView,this.context)}checkNoChanges(){!function FCe(l,o,a){F2(!0);try{_4(l,o,a)}finally{F2(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new nr(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Axe(l,o){zb(l,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new nr(902,"");this._appRef=o}}class A2e extends tx{constructor(o){super(o),this._view=o}detectChanges(){VG(this._view)}checkNoChanges(){!function NCe(l){F2(!0);try{VG(l)}finally{F2(!1)}}(this._view)}get context(){return null}}class Hj extends jd{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=aa(o);return new j4(a,this.ngModule)}}function $j(l){const o=[];for(let a in l)l.hasOwnProperty(a)&&o.push({propName:l[a],templateName:a});return o}const P2e=new Zn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>zW});class j4 extends zj{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Yxe(l){return l.map(Xxe).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return $j(this.componentDef.inputs)}get outputs(){return $j(this.componentDef.outputs)}create(o,a,c,u){const h=(u=u||this.ngModule)?function R2e(l,o){return{get:(a,c,u)=>{const h=l.get(a,Q4,u);return h!==Q4||c===Q4?h:o.get(a,c,u)}}}(o,u.injector):o,d=h.get(jv,L$),f=h.get(M2e,null),p=d.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",m=c?function MG(l,o,a){if(Es(l))return l.selectRootElement(o,a===Cu.ShadowDom);let c="string"==typeof o?l.querySelector(o):o;return c.textContent="",c}(p,c,this.componentDef.encapsulation):jP(d.createRenderer(null,this.componentDef),g,function I2e(l){const o=l.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(g)),v=this.componentDef.onPush?576:528,y=function aQ(l,o){return{components:[],scheduler:l||zW,clean:LCe,playerHandler:o||null,flags:0}}(),_=lT(0,null,null,1,0,null,null,null,null,null),b=Ub(null,_,y,v,null,null,d,p,f,h);let C,x;N2(b);try{const S=function sQ(l,o,a,c,u,h){const d=a[1];a[20]=l;const p=Ov(d,20,2,"#host",null),g=p.mergedAttrs=o.hostAttrs;null!==g&&(uT(p,g,!0),null!==l&&(U2(u,l,g),null!==p.classes&&JP(u,l,p.classes),null!==p.styles&&aG(u,l,p.styles)));const m=c.createRenderer(l,o),v=Ub(a,DG(o),null,o.onPush?64:16,a[20],p,c,m,h||null,null);return d.firstCreatePass&&(G2(Cb(p,a),d,o.type),FG(d,p),NG(p,a.length,1)),cT(a,v),a[20]=v}(m,this.componentDef,b,d,p);if(m)if(c)U2(p,m,["ng-version",E2e.full]);else{const{attrs:w,classes:O}=function Kxe(l){const o=[],a=[];let c=1,u=2;for(;c<l.length;){let h=l[c];if("string"==typeof h)2===u?""!==h&&o.push(h,l[++c]):8===u&&a.push(h);else{if(!Ou(u))break;u=h}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);w&&U2(p,m,w),O&&O.length>0&&JP(p,m,O.join(" "))}if(x=hP(_,20),void 0!==a){const w=x.projection=[];for(let O=0;O<this.ngContentSelectors.length;O++){const T=a[O];w.push(null!=T?Array.from(T):null)}}C=function oQ(l,o,a,c,u){const h=a[1],d=function _Ce(l,o,a){const c=yo();l.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),LG(l,c,o,Dv(l,o,1,null),a));const u=Sb(o,l,c.directiveStart,c);ca(u,o);const h=$c(c,o);return h&&ca(h,o),u}(h,a,o);if(c.components.push(d),l[8]=d,u&&u.forEach(p=>p(d,o)),o.contentQueries){const p=yo();o.contentQueries(1,d,p.directiveStart)}const f=yo();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(tp(f.index),PG(a[1],f,0,f.directiveStart,f.directiveEnd,o),RG(o,d)),d}(S,this.componentDef,b,y,[iSe]),Hb(_,b,null)}finally{L2()}return new N2e(this.componentType,C,Qv(x,b),b,x)}}class N2e extends class C2e{}{constructor(o,a,c,u,h){super(),this.location=c,this._rootLView=u,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new A2e(u),this.componentType=o}get injector(){return new pv(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class qd{}class Wj{}const qv=new Map;class jj extends qd{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Hj(this);const c=zc(o);this._bootstrapComponents=Th(c.bootstrap),this._r3Injector=qG(o,a,[{provide:qd,useValue:this},{provide:jd,useValue:this.componentFactoryResolver}],Sr(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=gr.THROW_IF_NOT_FOUND,c=mi.Default){return o===gr||o===qd||o===x4?this:this._r3Injector.get(o,a,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class q4 extends Wj{constructor(o){super(),this.moduleType=o,null!==zc(o)&&function B2e(l){const o=new Set;!function a(c){const u=zc(c,!0),h=u.id;null!==h&&(function Gj(l,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${l} - ${Sr(o)} vs ${Sr(o.name)}`)}(h,qv.get(h),c),qv.set(h,c));const d=Th(u.imports);for(const f of d)o.has(f)||(o.add(f),a(f))}(l)}(o)}create(o){return new jj(this.moduleType,o)}}function bl(l,o,a){const c=Na()+l,u=At();return u[c]===fi?Dh(u,c,a?o.call(a):o()):Gb(u,c)}function eo(l,o,a,c){return Xj(At(),Na(),l,o,a,c)}function ps(l,o,a,c,u){return function Yj(l,o,a,c,u,h,d){const f=o+a;return Yg(l,f,u,h)?Dh(l,f+2,d?c.call(d,u,h):c(u,h)):nx(l,f+2)}(At(),Na(),l,o,a,c,u)}function qj(l,o,a,c,u,h){return function Kj(l,o,a,c,u,h,d,f){const p=o+a;return dT(l,p,u,h,d)?Dh(l,p+3,f?c.call(f,u,h,d):c(u,h,d)):nx(l,p+3)}(At(),Na(),l,o,a,c,u,h)}function wT(l,o,a,c,u,h,d){return function Jj(l,o,a,c,u,h,d,f,p){const g=o+a;return Gc(l,g,u,h,d,f)?Dh(l,g+4,p?c.call(p,u,h,d,f):c(u,h,d,f)):nx(l,g+4)}(At(),Na(),l,o,a,c,u,h,d)}function nx(l,o){const a=l[o];return a===fi?void 0:a}function Xj(l,o,a,c,u,h){const d=o+a;return ua(l,d,u)?Dh(l,d+1,h?c.call(h,u):c(u)):nx(l,d+1)}function ix(l,o){const a=ir();let c;const u=l+20;a.firstCreatePass?(c=function $2e(l,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(l===c.name)return c}}(o,a.pipeRegistry),a.data[u]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(u,c.onDestroy)):c=a.data[u];const h=c.factory||(c.factory=Zg(c.type)),d=Yf(L);try{const f=$2(!1),p=h();return $2(f),function gSe(l,o,a,c){a>=l.data.length&&(l.data[a]=null,l.blueprint[a]=null),o[a]=c}(a,At(),u,p),p}finally{Yf(d)}}function rx(l,o,a){const c=l+20,u=At(),h=uv(u,c);return function sx(l,o){return l[1].data[o].pure}(u,c)?Xj(u,Na(),o,h.transform,a,h):h.transform(a)}function Z4(l){return o=>{setTimeout(l,void 0,o)}}const wt=class q2e extends mt{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){var u,h,d;let f=o,p=a||(()=>null),g=c;if(o&&"object"==typeof o){const v=o;f=null===(u=v.next)||void 0===u?void 0:u.bind(v),p=null===(h=v.error)||void 0===h?void 0:h.bind(v),g=null===(d=v.complete)||void 0===d?void 0:d.bind(v)}this.__isAsync&&(p=Z4(p),f&&(f=Z4(f)),g&&(g=Z4(g)));const m=super.subscribe({next:f,error:p,complete:g});return o instanceof Pe&&o.add(m),m}};function Z2e(){return this._results[Av()]()}class X4{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Av(),c=X4.prototype;c[a]||(c[a]=Z2e)}get changes(){return this._changes||(this._changes=new wt)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const u=Wc(o);(this._changesDetected=!function dbe(l,o,a){if(l.length!==o.length)return!1;for(let c=0;c<l.length;c++){let u=l[c],h=o[c];if(a&&(u=a(u),h=a(h)),h!==u)return!1}return!0}(c._results,u,a))&&(c._results=u,c.length=u.length,c.last=u[this.length-1],c.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let gs=(()=>{class l{}return l.__NG_ELEMENT_ID__=K2e,l})();const X2e=gs,Y2e=class extends X2e{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o){const a=this._declarationTContainer.tViews,c=Ub(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(c[19]=h.createEmbeddedView(a)),Hb(a,c,o),new tx(c)}};function K2e(){return TT(yo(),At())}function TT(l,o){return 4&l.type?new Y2e(o,l,Qv(l,o)):null}let Pi=(()=>{class l{}return l.__NG_ELEMENT_ID__=J2e,l})();function J2e(){return iq(yo(),At())}const eTe=Pi,tq=class extends eTe{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Qv(this._hostTNode,this._hostLView)}get injector(){return new pv(this._hostTNode,this._hostLView)}get parentInjector(){const o=W2(this._hostTNode,this._hostLView);if(eW(o)){const a=fv(o,this._hostLView),c=dv(o);return new pv(a[1].data[c+8],a)}return new pv(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=nq(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){const u=o.createEmbeddedView(a||{});return this.insert(u,c),u}createComponent(o,a,c,u,h){const d=o&&!function Tb(l){return"function"==typeof l}(o);let f;if(d)f=a;else{const v=a||{};f=v.index,c=v.injector,u=v.projectableNodes,h=v.ngModuleRef}const p=d?o:new j4(aa(o)),g=c||this.parentInjector;if(!h&&null==p.ngModule&&g){const v=g.get(qd,null);v&&(h=v)}const m=p.create(g,u,void 0,h);return this.insert(m.hostView,f),m}insert(o,a){const c=o._lView,u=c[1];if(function F1e(l){return wu(l[3])}(c)){const m=this.indexOf(o);if(-1!==m)this.detach(m);else{const v=c[3],y=new tq(v,v[6],v[3]);y.detach(y.indexOf(o))}}const h=this._adjustIndex(a),d=this._lContainer;!function Pxe(l,o,a,c){const u=10+c,h=a.length;c>0&&(a[u-1][4]=o),c<h-10?(o[4]=a[u],uW(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const d=o[17];null!==d&&a!==d&&function Rxe(l,o){const a=l[9];o[16]!==o[3][3][16]&&(l[2]=!0),null===a?l[9]=[o]:a.push(o)}(d,o);const f=o[19];null!==f&&f.insertView(l),o[2]|=128}(u,c,d,h);const f=YP(h,d),p=c[11],g=nT(p,d[7]);return null!==g&&function Exe(l,o,a,c,u,h){c[0]=u,c[6]=o,zb(l,c,a,1,u,h)}(u,d[6],p,c,g,f),o.attachToViewContainerRef(),uW(Y4(d),h,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=nq(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=qP(this._lContainer,a);c&&(q2(Y4(this._lContainer),a),ZW(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=qP(this._lContainer,a);return c&&null!=q2(Y4(this._lContainer),a)?new tx(c):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function nq(l){return l[8]}function Y4(l){return l[8]||(l[8]=[])}function iq(l,o){let a;const c=o[l.index];if(wu(c))a=c;else{let u;if(8&l.type)u=Ks(c);else{const h=o[11];u=h.createComment("");const d=$c(l,o);Xg(h,nT(h,d),u,function Bxe(l,o){return Es(l)?l.nextSibling(o):o.nextSibling}(h,d),!1)}o[l.index]=a=BG(c,o,u,l),cT(o,a)}return new tq(a,l,o)}class K4{constructor(o){this.queryList=o,this.matches=null}clone(){return new K4(this.queryList)}setDirty(){this.queryList.setDirty()}}class J4{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,u=[];for(let h=0;h<c;h++){const d=a.getByIndex(h);u.push(this.queries[d.indexInDeclarationView].clone())}return new J4(u)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==lq(o,a).matches&&this.queries[a].setDirty()}}class rq{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class eR{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const u=null!==a?a.length:0,h=this.getByIndex(c).embeddedTView(o,u);h&&(h.indexInDeclarationView=c,null!==a?a.push(h):a=[h])}return null!==a?new eR(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class tR{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new tR(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let u=0;u<c.length;u++){const h=c[u];this.matchTNodeWithReadOption(o,a,iTe(a,h)),this.matchTNodeWithReadOption(o,a,Q2(a,o,h,!1,!1))}else c===gs?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Q2(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const u=this.metadata.read;if(null!==u)if(u===Sn||u===Pi||u===gs&&4&a.type)this.addMatch(a.index,-2);else{const h=Q2(a,o,u,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function iTe(l,o){const a=l.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function sTe(l,o,a,c){return-1===a?function rTe(l,o){return 11&l.type?Qv(l,o):4&l.type?TT(l,o):null}(o,l):-2===a?function oTe(l,o,a){return a===Sn?Qv(o,l):a===gs?TT(o,l):a===Pi?iq(o,l):void 0}(l,o,c):Sb(l,l[1],a,o)}function sq(l,o,a,c){const u=o[19].queries[c];if(null===u.matches){const h=l.data,d=a.matches,f=[];for(let p=0;p<d.length;p+=2){const g=d[p];f.push(g<0?null:sTe(o,h[g],d[p+1],a.metadata.read))}u.matches=f}return u.matches}function nR(l,o,a,c){const u=l.queries.getByIndex(a),h=u.matches;if(null!==h){const d=sq(l,o,u,a);for(let f=0;f<h.length;f+=2){const p=h[f];if(p>0)c.push(d[f/2]);else{const g=h[f+1],m=o[-p];for(let v=10;v<m.length;v++){const y=m[v];y[17]===y[3]&&nR(y[1],y,g,c)}if(null!==m[9]){const v=m[9];for(let y=0;y<v.length;y++){const _=v[y];nR(_[1],_,g,c)}}}}}return c}function Vt(l){const o=At(),a=ir(),c=W$();yP(c+1);const u=lq(a,c);if(l.dirty&&B$(o)===(2==(2&u.metadata.flags))){if(null===u.matches)l.reset([]);else{const h=u.crossesNgTemplate?nR(a,o,c,[]):sq(a,o,u,c);l.reset(h,O2e),l.notifyOnChanges()}return!0}return!1}function ai(l,o,a){const c=ir();c.firstCreatePass&&(aq(c,new rq(l,o,a),-1),2==(2&o)&&(c.staticViewQueries=!0)),oq(c,At(),o)}function Yn(l,o,a,c){const u=ir();if(u.firstCreatePass){const h=yo();aq(u,new rq(o,a,c),h.index),function lTe(l,o){const a=l.contentQueries||(l.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(l.queries.length-1,o)}(u,l),2==(2&a)&&(u.staticContentQueries=!0)}oq(u,At(),a)}function zt(){return function aTe(l,o){return l[19].queries[o].queryList}(At(),W$())}function oq(l,o,a){const c=new X4(4==(4&a));EG(l,o,c,c.destroy),null===o[19]&&(o[19]=new J4),o[19].queries.push(new K4(c))}function aq(l,o,a){null===l.queries&&(l.queries=new eR),l.queries.track(new tR(o,a))}function lq(l,o){return l.queries.getByIndex(o)}function da(l,o){return TT(l,o)}function kT(...l){}const MT=new Zn("Application Initializer");let Xv=(()=>{class l{constructor(a){this.appInits=a,this.resolve=kT,this.reject=kT,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,u)=>{this.resolve=c,this.reject=u})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const h=this.appInits[u]();if(Qb(h))a.push(h);else if(F4(h)){const d=new Promise((f,p)=>{h.subscribe({complete:f,error:p})});a.push(d)}}Promise.all(a).then(()=>{c()}).catch(u=>{this.reject(u)}),0===a.length&&c(),this.initialized=!0}}return l.\u0275fac=function(a){return new(a||l)(Ae(MT,8))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();const ax=new Zn("AppId"),OTe={provide:ax,useFactory:function TTe(){return`${lR()}${lR()}${lR()}`},deps:[]};function lR(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Tq=new Zn("Platform Initializer"),ns=new Zn("Platform ID"),Oq=new Zn("appBootstrapListener");let Dq=(()=>{class l{log(a){console.log(a)}warn(a){console.warn(a)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();const Ah=new Zn("LocaleId"),kq=new Zn("DefaultCurrencyCode");class DTe{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let ET=(()=>{class l{compileModuleSync(a){return new q4(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),h=Th(zc(a).declarations).reduce((d,f)=>{const p=aa(f);return p&&d.push(new j4(p)),d},[]);return new DTe(c,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();const MTe=(()=>Promise.resolve(0))();function cR(l){"undefined"==typeof Zone?MTe.then(()=>{l&&l.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",l)}class mr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wt(!1),this.onMicrotaskEmpty=new wt(!1),this.onStable=new wt(!1),this.onError=new wt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!c&&a,u.shouldCoalesceRunChangeDetection=c,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function ETe(){let l=Ir.requestAnimationFrame,o=Ir.cancelAnimationFrame;if("undefined"!=typeof Zone&&l&&o){const a=l[Zone.__symbol__("OriginalDelegate")];a&&(l=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function PTe(l){const o=()=>{!function ITe(l){l.isCheckStableRunning||-1!==l.lastRequestAnimationFrameId||(l.lastRequestAnimationFrameId=l.nativeRequestAnimationFrame.call(Ir,()=>{l.fakeTopEventTask||(l.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{l.lastRequestAnimationFrameId=-1,hR(l),l.isCheckStableRunning=!0,uR(l),l.isCheckStableRunning=!1},void 0,()=>{},()=>{})),l.fakeTopEventTask.invoke()}),hR(l))}(l)};l._inner=l._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,u,h,d,f)=>{try{return Mq(l),a.invokeTask(u,h,d,f)}finally{(l.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||l.shouldCoalesceRunChangeDetection)&&o(),Eq(l)}},onInvoke:(a,c,u,h,d,f,p)=>{try{return Mq(l),a.invoke(u,h,d,f,p)}finally{l.shouldCoalesceRunChangeDetection&&o(),Eq(l)}},onHasTask:(a,c,u,h)=>{a.hasTask(u,h),c===u&&("microTask"==h.change?(l._hasPendingMicrotasks=h.microTask,hR(l),uR(l)):"macroTask"==h.change&&(l.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,c,u,h)=>(a.handleError(u,h),l.runOutsideAngular(()=>l.onError.emit(h)),!1)})}(u)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(mr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,u){const h=this._inner,d=h.scheduleEventTask("NgZoneEvent: "+u,o,ATe,kT,kT);try{return h.runTask(d,a,c)}finally{h.cancelTask(d)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const ATe={};function uR(l){if(0==l._nesting&&!l.hasPendingMicrotasks&&!l.isStable)try{l._nesting++,l.onMicrotaskEmpty.emit(null)}finally{if(l._nesting--,!l.hasPendingMicrotasks)try{l.runOutsideAngular(()=>l.onStable.emit(null))}finally{l.isStable=!0}}}function hR(l){l.hasPendingMicrotasks=!!(l._hasPendingMicrotasks||(l.shouldCoalesceEventChangeDetection||l.shouldCoalesceRunChangeDetection)&&-1!==l.lastRequestAnimationFrameId)}function Mq(l){l._nesting++,l.isStable&&(l.isStable=!1,l.onUnstable.emit(null))}function Eq(l){l._nesting--,uR(l)}class RTe{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wt,this.onMicrotaskEmpty=new wt,this.onStable=new wt,this.onError=new wt}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,u){return o.apply(a,c)}}let dR=(()=>{class l{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mr.assertNotInAngularZone(),cR(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cR(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,u){let h=-1;c&&c>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==h),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:u})}whenStable(a,c,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,u){return[]}}return l.\u0275fac=function(a){return new(a||l)(Ae(mr))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),Aq=(()=>{class l{constructor(){this._applications=new Map,fR.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return fR.findTestabilityInTree(this,a,c)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class FTe{addToWindow(o){}findTestabilityInTree(o,a,c){return null}}let Au,fR=new FTe;const Iq=new Zn("AllowMultipleToken");class Pq{constructor(o,a){this.name=o,this.token=a}}function Rq(l,o,a=[]){const c=`Platform: ${o}`,u=new Zn(c);return(h=[])=>{let d=Fq();if(!d||d.injector.get(Iq,!1))if(l)l(a.concat(h).concat({provide:u,useValue:!0}));else{const f=a.concat(h).concat({provide:u,useValue:!0},{provide:C4,useValue:"platform"});!function VTe(l){if(Au&&!Au.destroyed&&!Au.injector.get(Iq,!1))throw new nr(400,"");Au=l.get(Nq);const o=l.get(Tq,null);o&&o.forEach(a=>a())}(gr.create({providers:f,name:c}))}return function zTe(l){const o=Fq();if(!o)throw new nr(401,"");return o}()}}function Fq(){return Au&&!Au.destroyed?Au:null}let Nq=(()=>{class l{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const f=function UTe(l,o){let a;return a="noop"===l?new RTe:("zone.js"===l?void 0:l)||new mr({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),p=[{provide:mr,useValue:f}];return f.run(()=>{const g=gr.create({providers:p,parent:this.injector,name:a.moduleType.name}),m=a.create(g),v=m.injector.get(Sv,null);if(!v)throw new nr(402,"");return f.runOutsideAngular(()=>{const y=f.onError.subscribe({next:_=>{v.handleError(_)}});m.onDestroy(()=>{pR(this._modules,m),y.unsubscribe()})}),function HTe(l,o,a){try{const c=a();return Qb(c)?c.catch(u=>{throw o.runOutsideAngular(()=>l.handleError(u)),u}):c}catch(c){throw o.runOutsideAngular(()=>l.handleError(c)),c}}(v,f,()=>{const y=m.injector.get(Xv);return y.runInitializers(),y.donePromise.then(()=>(function Dwe(l){Wl(l,"Expected localeId to be defined"),"string"==typeof l&&(gj=l.toLowerCase().replace(/_/g,"-"))}(m.injector.get(Ah,yT)||yT),this._moduleDoBootstrap(m),m))})})}bootstrapModule(a,c=[]){const u=Lq({},c);return function LTe(l,o,a){const c=new q4(a);return Promise.resolve(c)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,u))}_moduleDoBootstrap(a){const c=a.injector.get(lx);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(u=>c.bootstrap(u));else{if(!a.instance.ngDoBootstrap)throw new nr(403,"");a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new nr(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return l.\u0275fac=function(a){return new(a||l)(Ae(gr))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();function Lq(l,o){return Array.isArray(o)?o.reduce(Lq,l):Object.assign(Object.assign({},l),o)}let lx=(()=>{class l{constructor(a,c,u,h,d){this._zone=a,this._injector=c,this._exceptionHandler=u,this._componentFactoryResolver=h,this._initStatus=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new xn(g=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{g.next(this._stable),g.complete()})}),p=new xn(g=>{let m;this._zone.runOutsideAngular(()=>{m=this._zone.onStable.subscribe(()=>{mr.assertNotInAngularZone(),cR(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,g.next(!0))})})});const v=this._zone.onUnstable.subscribe(()=>{mr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{g.next(!1)}))});return()=>{m.unsubscribe(),v.unsubscribe()}});this.isStable=function t1e(...l){const o=pb(l),a=function q_e(l,o){return"number"==typeof G3(l)?l.pop():o}(l,1/0),c=l;return c.length?1===c.length?bu(c[0]):fb(a)(Po(c,o)):Vd}(f,p.pipe(function n1e(l={}){const{connector:o=(()=>new mt),resetOnError:a=!0,resetOnComplete:c=!0,resetOnRefCountZero:u=!0}=l;return h=>{let d=null,f=null,p=null,g=0,m=!1,v=!1;const y=()=>{null==f||f.unsubscribe(),f=null},_=()=>{y(),d=p=null,m=v=!1},b=()=>{const C=d;_(),null==C||C.unsubscribe()};return Ci((C,x)=>{g++,!v&&!m&&y();const S=p=null!=p?p:o();x.add(()=>{g--,0===g&&!v&&!m&&(f=Q3(b,u))}),S.subscribe(x),d||(d=new ft({next:w=>S.next(w),error:w=>{v=!0,y(),f=Q3(_,a,w),S.error(w)},complete:()=>{m=!0,y(),f=Q3(_,c),S.complete()}}),Po(C).subscribe(d))})(h)}}()))}bootstrap(a,c){if(!this._initStatus.done)throw new nr(405,"");let u;u=a instanceof zj?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(u.componentType);const h=function BTe(l){return l.isBoundToModule}(u)?void 0:this._injector.get(qd),f=u.create(gr.NULL,[],c||u.selector,h),p=f.location.nativeElement,g=f.injector.get(dR,null),m=g&&f.injector.get(Aq);return g&&m&&m.registerApplication(p,g),f.onDestroy(()=>{this.detachView(f.hostView),pR(this.components,f),m&&m.unregisterApplication(p)}),this._loadComponent(f),f}tick(){if(this._runningTick)throw new nr(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;pR(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Oq,[]).concat(this._bootstrapListeners).forEach(u=>u(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return l.\u0275fac=function(a){return new(a||l)(Ae(mr),Ae(gr),Ae(Sv),Ae(jd),Ae(Xv))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();function pR(l,o){const a=l.indexOf(o);a>-1&&l.splice(a,1)}let Vq=!0,xl=(()=>{class l{}return l.__NG_ELEMENT_ID__=GTe,l})();function GTe(l){return function QTe(l,o,a){if(A2(l)&&!a){const c=Ql(l.index,o);return new tx(c,c)}return 47&l.type?new tx(o[16],o):null}(yo(),At(),16==(16&l))}class Qq{constructor(){}supports(o){return Wb(o)}create(o){return new KTe(o)}}const YTe=(l,o)=>o;class KTe{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||YTe}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,u=0,h=null;for(;a||c;){const d=!c||a&&a.currentIndex<qq(c,u,h)?a:c,f=qq(d,u,h),p=d.currentIndex;if(d===c)u--,c=c._nextRemoved;else if(a=a._next,null==d.previousIndex)u++;else{h||(h=[]);const g=f-u,m=p-u;if(g!=m){for(let y=0;y<g;y++){const _=y<h.length?h[y]:h[y]=0,b=_+y;m<=b&&b<g&&(h[y]=_+1)}h[d.previousIndex]=m-g}}f!==p&&o(d,f,p)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Wb(o))throw new nr(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u,h,d,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let f=0;f<this.length;f++)h=o[f],d=this._trackByFn(f,h),null!==a&&Object.is(a.trackById,d)?(c&&(a=this._verifyReinsertion(a,h,d,f)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,d,f),c=!0),a=a._next}else u=0,function fSe(l,o){if(Array.isArray(l))for(let a=0;a<l.length;a++)o(l[a]);else{const a=l[Av()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,f=>{d=this._trackByFn(u,f),null!==a&&Object.is(a.trackById,d)?(c&&(a=this._verifyReinsertion(a,f,d,u)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,d,u),c=!0),a=a._next,u++}),this.length=u;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,u){let h;return null===o?h=this._itTail:(h=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,h,u)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,u))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,h,u)):o=this._addAfter(new JTe(a,c),h,u),o}_verifyReinsertion(o,a,c,u){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==h?o=this._reinsertAfter(h,o._prev,u):o.currentIndex!=u&&(o.currentIndex=u,this._addToMoves(o,u)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const u=o._prevRemoved,h=o._nextRemoved;return null===u?this._removalsHead=h:u._nextRemoved=h,null===h?this._removalsTail=u:h._prevRemoved=u,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const u=null===a?this._itHead:a._next;return o._next=u,o._prev=a,null===u?this._itTail=o:u._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new jq),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jq),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class JTe{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class eOe{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class jq{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new eOe,this.map.set(a,c)),c.add(o)}get(o,a){const u=this.map.get(o);return u?u.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qq(l,o,a){const c=l.previousIndex;if(null===c)return c;let u=0;return a&&c<a.length&&(u=a[c]),c+o+u}class Zq{constructor(){}supports(o){return o instanceof Map||k4(o)}create(){return new tOe}}class tOe{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||k4(o)))throw new nr(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,u)=>{if(a&&a.key===u)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(u,c);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const u=this._records.get(o);this._maybeAddToChanges(u,a);const h=u._prev,d=u._next;return h&&(h._next=d),d&&(d._prev=h),u._next=null,u._prev=null,u}const c=new nOe(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class nOe{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Xq(){return new em([new Qq])}let em=(()=>{class l{constructor(a){this.factories=a}static create(a,c){if(null!=c){const u=c.factories.slice();a=a.concat(u)}return new l(a)}static extend(a){return{provide:l,useFactory:c=>l.create(a,c||Xq()),deps:[[l,new Wd,new ql]]}}find(a){const c=this.factories.find(u=>u.supports(a));if(null!=c)return c;throw new nr(901,"")}}return l.\u0275prov=Ze({token:l,providedIn:"root",factory:Xq}),l})();function Yq(){return new Yv([new Zq])}let Yv=(()=>{class l{constructor(a){this.factories=a}static create(a,c){if(c){const u=c.factories.slice();a=a.concat(u)}return new l(a)}static extend(a){return{provide:l,useFactory:c=>l.create(a,c||Yq()),deps:[[l,new Wd,new ql]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new nr(901,"")}}return l.\u0275prov=Ze({token:l,providedIn:"root",factory:Yq}),l})();const iOe=[new Zq],sOe=new em([new Qq]),oOe=new Yv(iOe),aOe=Rq(null,"core",[{provide:ns,useValue:"unknown"},{provide:Nq,deps:[gr]},{provide:Aq,deps:[]},{provide:Dq,deps:[]}]),dOe=[{provide:lx,useClass:lx,deps:[mr,gr,Sv,jd,Xv]},{provide:P2e,deps:[mr],useFactory:function fOe(l){let o=[];return l.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(a){o.push(a)}}},{provide:Xv,useClass:Xv,deps:[[new ql,MT]]},{provide:ET,useClass:ET,deps:[]},OTe,{provide:em,useFactory:function lOe(){return sOe},deps:[]},{provide:Yv,useFactory:function cOe(){return oOe},deps:[]},{provide:Ah,useFactory:function uOe(l){return l||function hOe(){return"undefined"!=typeof $localize&&$localize.locale||yT}()},deps:[[new Eb(Ah),new ql,new Wd]]},{provide:kq,useValue:"USD"}];let pOe=(()=>{class l{constructor(a){}}return l.\u0275fac=function(a){return new(a||l)(Ae(lx))},l.\u0275mod=En({type:l}),l.\u0275inj=On({providers:dOe}),l})(),IT=null;function Ih(){return IT}const is=new Zn("DocumentToken");let tm=(()=>{class l{historyGo(a){throw new Error("Not implemented")}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:function(){return function yOe(){return Ae(Kq)}()},providedIn:"platform"}),l})();const _Oe=new Zn("Location Initialized");let Kq=(()=>{class l extends tm{constructor(a){super(),this._doc=a,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ih().getBaseHref(this._doc)}onPopState(a){const c=Ih().getGlobalEventTarget(this._doc,"window");return c.addEventListener("popstate",a,!1),()=>c.removeEventListener("popstate",a)}onHashChange(a){const c=Ih().getGlobalEventTarget(this._doc,"window");return c.addEventListener("hashchange",a,!1),()=>c.removeEventListener("hashchange",a)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(a){this.location.pathname=a}pushState(a,c,u){Jq()?this._history.pushState(a,c,u):this.location.hash=u}replaceState(a,c,u){Jq()?this._history.replaceState(a,c,u):this.location.hash=u}forward(){this._history.forward()}back(){this._history.back()}historyGo(a=0){this._history.go(a)}getState(){return this._history.state}}return l.\u0275fac=function(a){return new(a||l)(Ae(is))},l.\u0275prov=Ze({token:l,factory:function(){return function bOe(){return new Kq(Ae(is))}()},providedIn:"platform"}),l})();function Jq(){return!!window.history.pushState}function _R(l,o){if(0==l.length)return o;if(0==o.length)return l;let a=0;return l.endsWith("/")&&a++,o.startsWith("/")&&a++,2==a?l+o.substring(1):1==a?l+o:l+"/"+o}function eZ(l){const o=l.match(/#|\?|$/),a=o&&o.index||l.length;return l.slice(0,a-("/"===l[a-1]?1:0))+l.slice(a)}function Zd(l){return l&&"?"!==l[0]?"?"+l:l}let Kv=(()=>{class l{historyGo(a){throw new Error("Not implemented")}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:function(){return function xOe(l){const o=Ae(is).location;return new tZ(Ae(tm),o&&o.origin||"")}()},providedIn:"root"}),l})();const bR=new Zn("appBaseHref");let tZ=(()=>{class l extends Kv{constructor(a,c){if(super(),this._platformLocation=a,this._removeListenerFns=[],null==c&&(c=this._platformLocation.getBaseHrefFromDOM()),null==c)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=c}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(a){this._removeListenerFns.push(this._platformLocation.onPopState(a),this._platformLocation.onHashChange(a))}getBaseHref(){return this._baseHref}prepareExternalUrl(a){return _R(this._baseHref,a)}path(a=!1){const c=this._platformLocation.pathname+Zd(this._platformLocation.search),u=this._platformLocation.hash;return u&&a?`${c}${u}`:c}pushState(a,c,u,h){const d=this.prepareExternalUrl(u+Zd(h));this._platformLocation.pushState(a,c,d)}replaceState(a,c,u,h){const d=this.prepareExternalUrl(u+Zd(h));this._platformLocation.replaceState(a,c,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(a=0){var c,u;null===(u=(c=this._platformLocation).historyGo)||void 0===u||u.call(c,a)}}return l.\u0275fac=function(a){return new(a||l)(Ae(tm),Ae(bR,8))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),COe=(()=>{class l extends Kv{constructor(a,c){super(),this._platformLocation=a,this._baseHref="",this._removeListenerFns=[],null!=c&&(this._baseHref=c)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(a){this._removeListenerFns.push(this._platformLocation.onPopState(a),this._platformLocation.onHashChange(a))}getBaseHref(){return this._baseHref}path(a=!1){let c=this._platformLocation.hash;return null==c&&(c="#"),c.length>0?c.substring(1):c}prepareExternalUrl(a){const c=_R(this._baseHref,a);return c.length>0?"#"+c:c}pushState(a,c,u,h){let d=this.prepareExternalUrl(u+Zd(h));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(a,c,d)}replaceState(a,c,u,h){let d=this.prepareExternalUrl(u+Zd(h));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(a,c,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(a=0){var c,u;null===(u=(c=this._platformLocation).historyGo)||void 0===u||u.call(c,a)}}return l.\u0275fac=function(a){return new(a||l)(Ae(tm),Ae(bR,8))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),xR=(()=>{class l{constructor(a,c){this._subject=new wt,this._urlChangeListeners=[],this._platformStrategy=a;const u=this._platformStrategy.getBaseHref();this._platformLocation=c,this._baseHref=eZ(nZ(u)),this._platformStrategy.onPopState(h=>{this._subject.emit({url:this.path(!0),pop:!0,state:h.state,type:h.type})})}path(a=!1){return this.normalize(this._platformStrategy.path(a))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(a,c=""){return this.path()==this.normalize(a+Zd(c))}normalize(a){return l.stripTrailingSlash(function wOe(l,o){return l&&o.startsWith(l)?o.substring(l.length):o}(this._baseHref,nZ(a)))}prepareExternalUrl(a){return a&&"/"!==a[0]&&(a="/"+a),this._platformStrategy.prepareExternalUrl(a)}go(a,c="",u=null){this._platformStrategy.pushState(u,"",a,c),this._notifyUrlChangeListeners(this.prepareExternalUrl(a+Zd(c)),u)}replaceState(a,c="",u=null){this._platformStrategy.replaceState(u,"",a,c),this._notifyUrlChangeListeners(this.prepareExternalUrl(a+Zd(c)),u)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(a=0){var c,u;null===(u=(c=this._platformStrategy).historyGo)||void 0===u||u.call(c,a)}onUrlChange(a){this._urlChangeListeners.push(a),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(c=>{this._notifyUrlChangeListeners(c.url,c.state)}))}_notifyUrlChangeListeners(a="",c){this._urlChangeListeners.forEach(u=>u(a,c))}subscribe(a,c,u){return this._subject.subscribe({next:a,error:c,complete:u})}}return l.normalizeQueryParams=Zd,l.joinWithSlash=_R,l.stripTrailingSlash=eZ,l.\u0275fac=function(a){return new(a||l)(Ae(Kv),Ae(tm))},l.\u0275prov=Ze({token:l,factory:function(){return function SOe(){return new xR(Ae(Kv),Ae(tm))}()},providedIn:"root"}),l})();function nZ(l){return l.replace(/\/index.html$/,"")}var to=(()=>((to=to||{})[to.Zero=0]="Zero",to[to.One=1]="One",to[to.Two=2]="Two",to[to.Few=3]="Few",to[to.Many=4]="Many",to[to.Other=5]="Other",to))();const EOe=function fj(l){return function ha(l){const o=function Swe(l){return l.toLowerCase().replace(/_/g,"-")}(l);let a=pj(o);if(a)return a;const c=o.split("-")[0];if(a=pj(c),a)return a;if("en"===c)return xwe;throw new Error(`Missing locale data for the locale "${l}".`)}(l)[un.PluralCase]};class UT{}let sDe=(()=>{class l extends UT{constructor(a){super(),this.locale=a}getPluralCategory(a,c){switch(EOe(c||this.locale)(a)){case to.Zero:return"zero";case to.One:return"one";case to.Two:return"two";case to.Few:return"few";case to.Many:return"many";default:return"other"}}}return l.\u0275fac=function(a){return new(a||l)(Ae(Ah))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();function hZ(l,o){o=encodeURIComponent(o);for(const a of l.split(";")){const c=a.indexOf("="),[u,h]=-1==c?[a,""]:[a.slice(0,c),a.slice(c+1)];if(u.trim()===o)return decodeURIComponent(h)}return null}let ii=(()=>{class l{constructor(a,c,u,h){this._iterableDiffers=a,this._keyValueDiffers=c,this._ngEl=u,this._renderer=h,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(a){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof a?a.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(a){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof a?a.split(/\s+/):a,this._rawClass&&(Wb(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const a=this._iterableDiffer.diff(this._rawClass);a&&this._applyIterableChanges(a)}else if(this._keyValueDiffer){const a=this._keyValueDiffer.diff(this._rawClass);a&&this._applyKeyValueChanges(a)}}_applyKeyValueChanges(a){a.forEachAddedItem(c=>this._toggleClass(c.key,c.currentValue)),a.forEachChangedItem(c=>this._toggleClass(c.key,c.currentValue)),a.forEachRemovedItem(c=>{c.previousValue&&this._toggleClass(c.key,!1)})}_applyIterableChanges(a){a.forEachAddedItem(c=>{if("string"!=typeof c.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Sr(c.item)}`);this._toggleClass(c.item,!0)}),a.forEachRemovedItem(c=>this._toggleClass(c.item,!1))}_applyClasses(a){a&&(Array.isArray(a)||a instanceof Set?a.forEach(c=>this._toggleClass(c,!0)):Object.keys(a).forEach(c=>this._toggleClass(c,!!a[c])))}_removeClasses(a){a&&(Array.isArray(a)||a instanceof Set?a.forEach(c=>this._toggleClass(c,!1)):Object.keys(a).forEach(c=>this._toggleClass(c,!1)))}_toggleClass(a,c){(a=a.trim())&&a.split(/\s+/g).forEach(u=>{c?this._renderer.addClass(this._ngEl.nativeElement,u):this._renderer.removeClass(this._ngEl.nativeElement,u)})}}return l.\u0275fac=function(a){return new(a||l)(L(em),L(Yv),L(Sn),L(yi))},l.\u0275dir=vt({type:l,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),l})();class lDe{constructor(o,a,c,u){this.$implicit=o,this.ngForOf=a,this.index=c,this.count=u}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _i=(()=>{class l{constructor(a,c,u){this._viewContainer=a,this._template=c,this._differs=u,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(a){this._ngForOf=a,this._ngForOfDirty=!0}set ngForTrackBy(a){this._trackByFn=a}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(a){a&&(this._template=a)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const a=this._ngForOf;!this._differ&&a&&(this._differ=this._differs.find(a).create(this.ngForTrackBy))}if(this._differ){const a=this._differ.diff(this._ngForOf);a&&this._applyChanges(a)}}_applyChanges(a){const c=this._viewContainer;a.forEachOperation((u,h,d)=>{if(null==u.previousIndex)c.createEmbeddedView(this._template,new lDe(u.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)c.remove(null===h?void 0:h);else if(null!==h){const f=c.get(h);c.move(f,d),dZ(f,u)}});for(let u=0,h=c.length;u<h;u++){const f=c.get(u).context;f.index=u,f.count=h,f.ngForOf=this._ngForOf}a.forEachIdentityChange(u=>{dZ(c.get(u.currentIndex),u)})}static ngTemplateContextGuard(a,c){return!0}}return l.\u0275fac=function(a){return new(a||l)(L(Pi),L(gs),L(em))},l.\u0275dir=vt({type:l,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),l})();function dZ(l,o){l.context.$implicit=o.item}let yn=(()=>{class l{constructor(a,c){this._viewContainer=a,this._context=new cDe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=c}set ngIf(a){this._context.$implicit=this._context.ngIf=a,this._updateView()}set ngIfThen(a){fZ("ngIfThen",a),this._thenTemplateRef=a,this._thenViewRef=null,this._updateView()}set ngIfElse(a){fZ("ngIfElse",a),this._elseTemplateRef=a,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(a,c){return!0}}return l.\u0275fac=function(a){return new(a||l)(L(Pi),L(gs))},l.\u0275dir=vt({type:l,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),l})();class cDe{constructor(){this.$implicit=null,this.ngIf=null}}function fZ(l,o){if(o&&!o.createEmbeddedView)throw new Error(`${l} must be a TemplateRef, but received '${Sr(o)}'.`)}class IR{constructor(o,a){this._viewContainerRef=o,this._templateRef=a,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(o){o&&!this._created?this.create():!o&&this._created&&this.destroy()}}let HT=(()=>{class l{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(a){this._ngSwitch=a,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(a){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(a)}_matchCase(a){const c=a==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||c,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),c}_updateDefaultCases(a){if(this._defaultViews&&a!==this._defaultUsed){this._defaultUsed=a;for(let c=0;c<this._defaultViews.length;c++)this._defaultViews[c].enforceState(a)}}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275dir=vt({type:l,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),l})(),pZ=(()=>{class l{constructor(a,c,u){this.ngSwitch=u,u._addCase(),this._view=new IR(a,c)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return l.\u0275fac=function(a){return new(a||l)(L(Pi),L(gs),L(HT,9))},l.\u0275dir=vt({type:l,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),l})(),Ph=(()=>{class l{constructor(a){this._viewContainerRef=a,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(a){if(a.ngTemplateOutlet){const c=this._viewContainerRef;this._viewRef&&c.remove(c.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?c.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&a.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return l.\u0275fac=function(a){return new(a||l)(L(Pi))},l.\u0275dir=vt({type:l,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[vo]}),l})();class fDe{createSubscription(o,a){return o.subscribe({next:a,error:c=>{throw c}})}dispose(o){o.unsubscribe()}onDestroy(o){o.unsubscribe()}}class pDe{createSubscription(o,a){return o.then(a,c=>{throw c})}dispose(o){}onDestroy(o){}}const gDe=new pDe,mDe=new fDe;let PR=(()=>{class l{constructor(a){this._ref=a,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(a){return this._obj?a!==this._obj?(this._dispose(),this.transform(a)):this._latestValue:(a&&this._subscribe(a),this._latestValue)}_subscribe(a){this._obj=a,this._strategy=this._selectStrategy(a),this._subscription=this._strategy.createSubscription(a,c=>this._updateLatestValue(a,c))}_selectStrategy(a){if(Qb(a))return gDe;if(kQ(a))return mDe;throw function Pu(l,o){return new nr(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(a,c){a===this._obj&&(this._latestValue=c,this._ref.markForCheck())}}return l.\u0275fac=function(a){return new(a||l)(L(xl,16))},l.\u0275pipe=yl({name:"async",type:l,pure:!1}),l})(),bi=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({providers:[{provide:UT,useClass:sDe}]}),l})();const vZ="browser";function lr(l){return l===vZ}let NDe=(()=>{class l{}return l.\u0275prov=Ze({token:l,providedIn:"root",factory:()=>new LDe(Ae(is),window)}),l})();class LDe{constructor(o,a){this.document=o,this.window=a,this.offset=()=>[0,0]}setOffset(o){this.offset=Array.isArray(o)?()=>o:o}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(o){this.supportsScrolling()&&this.window.scrollTo(o[0],o[1])}scrollToAnchor(o){if(!this.supportsScrolling())return;const a=function BDe(l,o){const a=l.getElementById(o)||l.getElementsByName(o)[0];if(a)return a;if("function"==typeof l.createTreeWalker&&l.body&&(l.body.createShadowRoot||l.body.attachShadow)){const c=l.createTreeWalker(l.body,NodeFilter.SHOW_ELEMENT);let u=c.currentNode;for(;u;){const h=u.shadowRoot;if(h){const d=h.getElementById(o)||h.querySelector(`[name="${o}"]`);if(d)return d}u=c.nextNode()}}return null}(this.document,o);a&&(this.scrollToElement(a),a.focus())}setHistoryScrollRestoration(o){if(this.supportScrollRestoration()){const a=this.window.history;a&&a.scrollRestoration&&(a.scrollRestoration=o)}}scrollToElement(o){const a=o.getBoundingClientRect(),c=a.left+this.window.pageXOffset,u=a.top+this.window.pageYOffset,h=this.offset();this.window.scrollTo(c-h[0],u-h[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const o=yZ(this.window.history)||yZ(Object.getPrototypeOf(this.window.history));return!(!o||!o.writable&&!o.set)}catch(o){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(o){return!1}}}function yZ(l){return Object.getOwnPropertyDescriptor(l,"scrollRestoration")}class _Z{}class NR extends class VDe extends class vOe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function mOe(l){IT||(IT=l)}(new NR)}onAndCancel(o,a,c){return o.addEventListener(a,c,!1),()=>{o.removeEventListener(a,c,!1)}}dispatchEvent(o,a){o.dispatchEvent(a)}remove(o){o.parentNode&&o.parentNode.removeChild(o)}createElement(o,a){return(a=a||this.getDefaultDocument()).createElement(o)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(o){return o.nodeType===Node.ELEMENT_NODE}isShadowRoot(o){return o instanceof DocumentFragment}getGlobalEventTarget(o,a){return"window"===a?window:"document"===a?o:"body"===a?o.body:null}getBaseHref(o){const a=function zDe(){return dx=dx||document.querySelector("base"),dx?dx.getAttribute("href"):null}();return null==a?null:function UDe(l){$T=$T||document.createElement("a"),$T.setAttribute("href",l);const o=$T.pathname;return"/"===o.charAt(0)?o:`/${o}`}(a)}resetBaseElement(){dx=null}getUserAgent(){return window.navigator.userAgent}getCookie(o){return hZ(document.cookie,o)}}let $T,dx=null;const bZ=new Zn("TRANSITION_ID"),$De=[{provide:MT,useFactory:function HDe(l,o,a){return()=>{a.get(Xv).donePromise.then(()=>{const c=Ih(),u=o.querySelectorAll(`style[ng-transition="${l}"]`);for(let h=0;h<u.length;h++)c.remove(u[h])})}},deps:[bZ,is,gr],multi:!0}];class LR{static init(){!function NTe(l){fR=l}(new LR)}addToWindow(o){Ir.getAngularTestability=(c,u=!0)=>{const h=o.findTestabilityInTree(c,u);if(null==h)throw new Error("Could not find testability for element.");return h},Ir.getAllAngularTestabilities=()=>o.getAllTestabilities(),Ir.getAllAngularRootElements=()=>o.getAllRootElements(),Ir.frameworkStabilizers||(Ir.frameworkStabilizers=[]),Ir.frameworkStabilizers.push(c=>{const u=Ir.getAllAngularTestabilities();let h=u.length,d=!1;const f=function(p){d=d||p,h--,0==h&&c(d)};u.forEach(function(p){p.whenStable(f)})})}findTestabilityInTree(o,a,c){if(null==a)return null;const u=o.getTestability(a);return null!=u?u:c?Ih().isShadowRoot(a)?this.findTestabilityInTree(o,a.host,!0):this.findTestabilityInTree(o,a.parentElement,!0):null}}let WDe=(()=>{class l{build(){return new XMLHttpRequest}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();const WT=new Zn("EventManagerPlugins");let GT=(()=>{class l{constructor(a,c){this._zone=c,this._eventNameToPlugin=new Map,a.forEach(u=>u.manager=this),this._plugins=a.slice().reverse()}addEventListener(a,c,u){return this._findPluginFor(c).addEventListener(a,c,u)}addGlobalEventListener(a,c,u){return this._findPluginFor(c).addGlobalEventListener(a,c,u)}getZone(){return this._zone}_findPluginFor(a){const c=this._eventNameToPlugin.get(a);if(c)return c;const u=this._plugins;for(let h=0;h<u.length;h++){const d=u[h];if(d.supports(a))return this._eventNameToPlugin.set(a,d),d}throw new Error(`No event manager plugin found for event ${a}`)}}return l.\u0275fac=function(a){return new(a||l)(Ae(WT),Ae(mr))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class xZ{constructor(o){this._doc=o}addGlobalEventListener(o,a,c){const u=Ih().getGlobalEventTarget(this._doc,o);if(!u)throw new Error(`Unsupported event target ${u} for event ${a}`);return this.addEventListener(u,a,c)}}let CZ=(()=>{class l{constructor(){this._stylesSet=new Set}addStyles(a){const c=new Set;a.forEach(u=>{this._stylesSet.has(u)||(this._stylesSet.add(u),c.add(u))}),this.onStylesAdded(c)}onStylesAdded(a){}getAllStyles(){return Array.from(this._stylesSet)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),fx=(()=>{class l extends CZ{constructor(a){super(),this._doc=a,this._hostNodes=new Map,this._hostNodes.set(a.head,[])}_addStylesToHost(a,c,u){a.forEach(h=>{const d=this._doc.createElement("style");d.textContent=h,u.push(c.appendChild(d))})}addHost(a){const c=[];this._addStylesToHost(this._stylesSet,a,c),this._hostNodes.set(a,c)}removeHost(a){const c=this._hostNodes.get(a);c&&c.forEach(SZ),this._hostNodes.delete(a)}onStylesAdded(a){this._hostNodes.forEach((c,u)=>{this._addStylesToHost(a,u,c)})}ngOnDestroy(){this._hostNodes.forEach(a=>a.forEach(SZ))}}return l.\u0275fac=function(a){return new(a||l)(Ae(is))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();function SZ(l){Ih().remove(l)}const BR={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},VR=/%COMP%/g;function QT(l,o,a){for(let c=0;c<o.length;c++){let u=o[c];Array.isArray(u)?QT(l,u,a):(u=u.replace(VR,l),a.push(u))}return a}function OZ(l){return o=>{if("__ngUnwrap__"===o)return l;!1===l(o)&&(o.preventDefault(),o.returnValue=!1)}}let jT=(()=>{class l{constructor(a,c,u){this.eventManager=a,this.sharedStylesHost=c,this.appId=u,this.rendererByCompId=new Map,this.defaultRenderer=new zR(a)}createRenderer(a,c){if(!a||!c)return this.defaultRenderer;switch(c.encapsulation){case Cu.Emulated:{let u=this.rendererByCompId.get(c.id);return u||(u=new XDe(this.eventManager,this.sharedStylesHost,c,this.appId),this.rendererByCompId.set(c.id,u)),u.applyToHost(a),u}case 1:case Cu.ShadowDom:return new YDe(this.eventManager,this.sharedStylesHost,a,c);default:if(!this.rendererByCompId.has(c.id)){const u=QT(c.id,c.styles,[]);this.sharedStylesHost.addStyles(u),this.rendererByCompId.set(c.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return l.\u0275fac=function(a){return new(a||l)(Ae(GT),Ae(fx),Ae(ax))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class zR{constructor(o){this.eventManager=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(o,a){return a?document.createElementNS(BR[a],o):document.createElement(o)}createComment(o){return document.createComment(o)}createText(o){return document.createTextNode(o)}appendChild(o,a){o.appendChild(a)}insertBefore(o,a,c){o&&o.insertBefore(a,c)}removeChild(o,a){o&&o.removeChild(a)}selectRootElement(o,a){let c="string"==typeof o?document.querySelector(o):o;if(!c)throw new Error(`The selector "${o}" did not match any elements`);return a||(c.textContent=""),c}parentNode(o){return o.parentNode}nextSibling(o){return o.nextSibling}setAttribute(o,a,c,u){if(u){a=u+":"+a;const h=BR[u];h?o.setAttributeNS(h,a,c):o.setAttribute(a,c)}else o.setAttribute(a,c)}removeAttribute(o,a,c){if(c){const u=BR[c];u?o.removeAttributeNS(u,a):o.removeAttribute(`${c}:${a}`)}else o.removeAttribute(a)}addClass(o,a){o.classList.add(a)}removeClass(o,a){o.classList.remove(a)}setStyle(o,a,c,u){u&(Zl.DashCase|Zl.Important)?o.style.setProperty(a,c,u&Zl.Important?"important":""):o.style[a]=c}removeStyle(o,a,c){c&Zl.DashCase?o.style.removeProperty(a):o.style[a]=""}setProperty(o,a,c){o[a]=c}setValue(o,a){o.nodeValue=a}listen(o,a,c){return"string"==typeof o?this.eventManager.addGlobalEventListener(o,a,OZ(c)):this.eventManager.addEventListener(o,a,OZ(c))}}class XDe extends zR{constructor(o,a,c,u){super(o),this.component=c;const h=QT(u+"-"+c.id,c.styles,[]);a.addStyles(h),this.contentAttr=function jDe(l){return"_ngcontent-%COMP%".replace(VR,l)}(u+"-"+c.id),this.hostAttr=function qDe(l){return"_nghost-%COMP%".replace(VR,l)}(u+"-"+c.id)}applyToHost(o){super.setAttribute(o,this.hostAttr,"")}createElement(o,a){const c=super.createElement(o,a);return super.setAttribute(c,this.contentAttr,""),c}}class YDe extends zR{constructor(o,a,c,u){super(o),this.sharedStylesHost=a,this.hostEl=c,this.shadowRoot=c.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=QT(u.id,u.styles,[]);for(let d=0;d<h.length;d++){const f=document.createElement("style");f.textContent=h[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(o){return o===this.hostEl?this.shadowRoot:o}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(o,a){return super.appendChild(this.nodeOrShadowRoot(o),a)}insertBefore(o,a,c){return super.insertBefore(this.nodeOrShadowRoot(o),a,c)}removeChild(o,a){return super.removeChild(this.nodeOrShadowRoot(o),a)}parentNode(o){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(o)))}}let KDe=(()=>{class l extends xZ{constructor(a){super(a)}supports(a){return!0}addEventListener(a,c,u){return a.addEventListener(c,u,!1),()=>this.removeEventListener(a,c,u)}removeEventListener(a,c,u){return a.removeEventListener(c,u)}}return l.\u0275fac=function(a){return new(a||l)(Ae(is))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();const kZ=["alt","control","meta","shift"],eke={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},MZ={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},tke={alt:l=>l.altKey,control:l=>l.ctrlKey,meta:l=>l.metaKey,shift:l=>l.shiftKey};let nke=(()=>{class l extends xZ{constructor(a){super(a)}supports(a){return null!=l.parseEventName(a)}addEventListener(a,c,u){const h=l.parseEventName(c),d=l.eventCallback(h.fullKey,u,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ih().onAndCancel(a,h.domEventName,d))}static parseEventName(a){const c=a.toLowerCase().split("."),u=c.shift();if(0===c.length||"keydown"!==u&&"keyup"!==u)return null;const h=l._normalizeKey(c.pop());let d="";if(kZ.forEach(p=>{const g=c.indexOf(p);g>-1&&(c.splice(g,1),d+=p+".")}),d+=h,0!=c.length||0===h.length)return null;const f={};return f.domEventName=u,f.fullKey=d,f}static getEventFullKey(a){let c="",u=function ike(l){let o=l.key;if(null==o){if(o=l.keyIdentifier,null==o)return"Unidentified";o.startsWith("U+")&&(o=String.fromCharCode(parseInt(o.substring(2),16)),3===l.location&&MZ.hasOwnProperty(o)&&(o=MZ[o]))}return eke[o]||o}(a);return u=u.toLowerCase()," "===u?u="space":"."===u&&(u="dot"),kZ.forEach(h=>{h!=u&&tke[h](a)&&(c+=h+".")}),c+=u,c}static eventCallback(a,c,u){return h=>{l.getEventFullKey(h)===a&&u.runGuarded(()=>c(h))}}static _normalizeKey(a){return"esc"===a?"escape":a}}return l.\u0275fac=function(a){return new(a||l)(Ae(is))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();const ake=Rq(aOe,"browser",[{provide:ns,useValue:vZ},{provide:Tq,useValue:function rke(){NR.makeCurrent(),LR.init()},multi:!0},{provide:is,useFactory:function oke(){return function A1e(l){cP=l}(document),document},deps:[]}]),lke=[{provide:C4,useValue:"root"},{provide:Sv,useFactory:function ske(){return new Sv},deps:[]},{provide:WT,useClass:KDe,multi:!0,deps:[is,mr,ns]},{provide:WT,useClass:nke,multi:!0,deps:[is]},{provide:jT,useClass:jT,deps:[GT,fx,ax]},{provide:jv,useExisting:jT},{provide:CZ,useExisting:fx},{provide:fx,useClass:fx,deps:[is]},{provide:dR,useClass:dR,deps:[mr]},{provide:GT,useClass:GT,deps:[WT,mr]},{provide:_Z,useClass:WDe,deps:[]}];let EZ=(()=>{class l{constructor(a){if(a)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(a){return{ngModule:l,providers:[{provide:ax,useValue:a.appId},{provide:bZ,useExisting:ax},$De]}}}return l.\u0275fac=function(a){return new(a||l)(Ae(l,12))},l.\u0275mod=En({type:l}),l.\u0275inj=On({providers:lke,imports:[bi,pOe]}),l})();function li(...l){return Po(l,pb(l))}"undefined"!=typeof window&&window;class Hr extends mt{constructor(o){super(),this._value=o}get value(){return this.getValue()}_subscribe(o){const a=super._subscribe(o);return!a.closed&&o.next(this._value),a}getValue(){const{hasError:o,thrownError:a,_value:c}=this;if(o)throw a;return this._throwIfClosed(),c}next(o){super.next(this._value=o)}}const{isArray:_ke}=Array,{getPrototypeOf:bke,prototype:xke,keys:Cke}=Object;function PZ(l){if(1===l.length){const o=l[0];if(_ke(o))return{args:o,keys:null};if(function Ske(l){return l&&"object"==typeof l&&bke(l)===xke}(o)){const a=Cke(o);return{args:a.map(c=>o[c]),keys:a}}}return{args:l,keys:null}}const{isArray:wke}=Array;function HR(l){return fn(o=>function Tke(l,o){return wke(o)?l(...o):l(o)}(l,o))}function RZ(l,o){return l.reduce((a,c,u)=>(a[c]=o[u],a),{})}function NZ(l,o,a){l?Bd(a,l,o):o()}const qT=xe(l=>function(){l(this),this.name="EmptyError",this.message="no elements in sequence"});function $R(...l){return function Dke(){return fb(1)}()(Po(l,pb(l)))}function LZ(l){return new xn(o=>{bu(l()).subscribe(o)})}function BZ(){return Ci((l,o)=>{let a=null;l._refCount++;const c=new Hi(o,void 0,void 0,void 0,()=>{if(!l||l._refCount<=0||0<--l._refCount)return void(a=null);const u=l._connection,h=a;a=null,u&&(!h||u===h)&&u.unsubscribe(),o.unsubscribe()});l.subscribe(c),c.closed||(a=l.connect())})}class kke extends xn{constructor(o,a){super(),this.source=o,this.subjectFactory=a,this._subject=null,this._refCount=0,this._connection=null,Jt(o)&&(this.lift=o.lift)}_subscribe(o){return this.getSubject().subscribe(o)}getSubject(){const o=this._subject;return(!o||o.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:o}=this;this._subject=this._connection=null,null==o||o.unsubscribe()}connect(){let o=this._connection;if(!o){o=this._connection=new Pe;const a=this.getSubject();o.add(this.source.subscribe(new Hi(a,void 0,()=>{this._teardown(),a.complete()},c=>{this._teardown(),a.error(c)},()=>this._teardown()))),o.closed&&(this._connection=null,o=Pe.EMPTY)}return o}refCount(){return BZ()(this)}}function lp(l,o){return Ci((a,c)=>{let u=null,h=0,d=!1;const f=()=>d&&!u&&c.complete();a.subscribe(new Hi(c,p=>{null==u||u.unsubscribe();let g=0;const m=h++;bu(l(p,m)).subscribe(u=new Hi(c,v=>c.next(o?o(p,v,m,g++):v),()=>{u=null,f()}))},()=>{d=!0,f()}))})}function ZT(...l){const o=pb(l);return Ci((a,c)=>{(o?$R(l,a,o):$R(l,a)).subscribe(c)})}function Mke(l,o,a,c,u){return(h,d)=>{let f=a,p=o,g=0;h.subscribe(new Hi(d,m=>{const v=g++;p=f?l(p,m,v):(f=!0,m),c&&d.next(p)},u&&(()=>{f&&d.next(p),d.complete()})))}}function VZ(l,o){return Ci(Mke(l,o,arguments.length>=2,!0))}function $s(l,o){return Ci((a,c)=>{let u=0;a.subscribe(new Hi(c,h=>l.call(o,h,u++)&&c.next(h)))})}function rr(l){return Ci((o,a)=>{let h,c=null,u=!1;c=o.subscribe(new Hi(a,void 0,void 0,d=>{h=bu(l(d,rr(l)(o))),c?(c.unsubscribe(),c=null,h.subscribe(a)):u=!0})),u&&(c.unsubscribe(),c=null,h.subscribe(a))})}function Jv(l,o){return ce(o)?mo(l,o,1):mo(l,1)}function WR(l){return l<=0?()=>Vd:Ci((o,a)=>{let c=[];o.subscribe(new Hi(a,u=>{c.push(u),l<c.length&&c.shift()},()=>{for(const u of c)a.next(u);a.complete()},void 0,()=>{c=null}))})}function zZ(l=Eke){return Ci((o,a)=>{let c=!1;o.subscribe(new Hi(a,u=>{c=!0,a.next(u)},()=>c?a.complete():a.error(l())))})}function Eke(){return new qT}function UZ(l){return Ci((o,a)=>{let c=!1;o.subscribe(new Hi(a,u=>{c=!0,a.next(u)},()=>{c||a.next(l),a.complete()}))})}function nm(l,o){const a=arguments.length>=2;return c=>c.pipe(l?$s((u,h)=>l(u,h,c)):xt,rv(1),a?UZ(o):zZ(()=>new qT))}function Ua(l,o,a){const c=ce(l)||o||a?{next:l,error:o,complete:a}:l;return c?Ci((u,h)=>{var d;null===(d=c.subscribe)||void 0===d||d.call(c);let f=!0;u.subscribe(new Hi(h,p=>{var g;null===(g=c.next)||void 0===g||g.call(c,p),h.next(p)},()=>{var p;f=!1,null===(p=c.complete)||void 0===p||p.call(c),h.complete()},p=>{var g;f=!1,null===(g=c.error)||void 0===g||g.call(c,p),h.error(p)},()=>{var p,g;f&&(null===(p=c.unsubscribe)||void 0===p||p.call(c)),null===(g=c.finalize)||void 0===g||g.call(c)}))}):xt}class Yd{constructor(o,a){this.id=o,this.url=a}}class GR extends Yd{constructor(o,a,c="imperative",u=null){super(o,a),this.navigationTrigger=c,this.restoredState=u}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class px extends Yd{constructor(o,a,c){super(o,a),this.urlAfterRedirects=c}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class HZ extends Yd{constructor(o,a,c){super(o,a),this.reason=c}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pke extends Yd{constructor(o,a,c){super(o,a),this.error=c}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rke extends Yd{constructor(o,a,c,u){super(o,a),this.urlAfterRedirects=c,this.state=u}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fke extends Yd{constructor(o,a,c,u){super(o,a),this.urlAfterRedirects=c,this.state=u}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nke extends Yd{constructor(o,a,c,u,h){super(o,a),this.urlAfterRedirects=c,this.state=u,this.shouldActivate=h}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Lke extends Yd{constructor(o,a,c,u){super(o,a),this.urlAfterRedirects=c,this.state=u}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bke extends Yd{constructor(o,a,c,u){super(o,a),this.urlAfterRedirects=c,this.state=u}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $Z{constructor(o){this.route=o}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class WZ{constructor(o){this.route=o}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vke{constructor(o){this.snapshot=o}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zke{constructor(o){this.snapshot=o}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uke{constructor(o){this.snapshot=o}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hke{constructor(o){this.snapshot=o}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GZ{constructor(o,a,c){this.routerEvent=o,this.position=a,this.anchor=c}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Wi="primary";class $ke{constructor(o){this.params=o||{}}has(o){return Object.prototype.hasOwnProperty.call(this.params,o)}get(o){if(this.has(o)){const a=this.params[o];return Array.isArray(a)?a[0]:a}return null}getAll(o){if(this.has(o)){const a=this.params[o];return Array.isArray(a)?a:[a]}return[]}get keys(){return Object.keys(this.params)}}function ey(l){return new $ke(l)}const QZ="ngNavigationCancelingError";function QR(l){const o=Error("NavigationCancelingError: "+l);return o[QZ]=!0,o}function Gke(l,o,a){const c=a.path.split("/");if(c.length>l.length||"full"===a.pathMatch&&(o.hasChildren()||c.length<l.length))return null;const u={};for(let h=0;h<c.length;h++){const d=c[h],f=l[h];if(d.startsWith(":"))u[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:l.slice(0,c.length),posParams:u}}function Rh(l,o){const a=l?Object.keys(l):void 0,c=o?Object.keys(o):void 0;if(!a||!c||a.length!=c.length)return!1;let u;for(let h=0;h<a.length;h++)if(u=a[h],!jZ(l[u],o[u]))return!1;return!0}function jZ(l,o){if(Array.isArray(l)&&Array.isArray(o)){if(l.length!==o.length)return!1;const a=[...l].sort(),c=[...o].sort();return a.every((u,h)=>c[h]===u)}return l===o}function qZ(l){return Array.prototype.concat.apply([],l)}function ZZ(l){return l.length>0?l[l.length-1]:null}function qo(l,o){for(const a in l)l.hasOwnProperty(a)&&o(l[a],a)}function Fh(l){return F4(l)?l:Qb(l)?Po(Promise.resolve(l)):li(l)}const qke={exact:function KZ(l,o,a){if(!rm(l.segments,o.segments)||!XT(l.segments,o.segments,a)||l.numberOfChildren!==o.numberOfChildren)return!1;for(const c in o.children)if(!l.children[c]||!KZ(l.children[c],o.children[c],a))return!1;return!0},subset:JZ},XZ={exact:function Zke(l,o){return Rh(l,o)},subset:function Xke(l,o){return Object.keys(o).length<=Object.keys(l).length&&Object.keys(o).every(a=>jZ(l[a],o[a]))},ignored:()=>!0};function YZ(l,o,a){return qke[a.paths](l.root,o.root,a.matrixParams)&&XZ[a.queryParams](l.queryParams,o.queryParams)&&!("exact"===a.fragment&&l.fragment!==o.fragment)}function JZ(l,o,a){return eX(l,o,o.segments,a)}function eX(l,o,a,c){if(l.segments.length>a.length){const u=l.segments.slice(0,a.length);return!(!rm(u,a)||o.hasChildren()||!XT(u,a,c))}if(l.segments.length===a.length){if(!rm(l.segments,a)||!XT(l.segments,a,c))return!1;for(const u in o.children)if(!l.children[u]||!JZ(l.children[u],o.children[u],c))return!1;return!0}{const u=a.slice(0,l.segments.length),h=a.slice(l.segments.length);return!!(rm(l.segments,u)&&XT(l.segments,u,c)&&l.children[Wi])&&eX(l.children[Wi],o,h,c)}}function XT(l,o,a){return o.every((c,u)=>XZ[a](l[u].parameters,c.parameters))}class im{constructor(o,a,c){this.root=o,this.queryParams=a,this.fragment=c}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ey(this.queryParams)),this._queryParamMap}toString(){return Jke.serialize(this)}}class Yi{constructor(o,a){this.segments=o,this.children=a,this.parent=null,qo(a,(c,u)=>c.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return YT(this)}}class gx{constructor(o,a){this.path=o,this.parameters=a}get parameterMap(){return this._parameterMap||(this._parameterMap=ey(this.parameters)),this._parameterMap}toString(){return sX(this)}}function rm(l,o){return l.length===o.length&&l.every((a,c)=>a.path===o[c].path)}class tX{}class nX{parse(o){const a=new lMe(o);return new im(a.parseRootSegment(),a.parseQueryParams(),a.parseFragment())}serialize(o){const a=`/${mx(o.root,!0)}`,c=function nMe(l){const o=Object.keys(l).map(a=>{const c=l[a];return Array.isArray(c)?c.map(u=>`${KT(a)}=${KT(u)}`).join("&"):`${KT(a)}=${KT(c)}`}).filter(a=>!!a);return o.length?`?${o.join("&")}`:""}(o.queryParams);return`${a}${c}${"string"==typeof o.fragment?`#${function eMe(l){return encodeURI(l)}(o.fragment)}`:""}`}}const Jke=new nX;function YT(l){return l.segments.map(o=>sX(o)).join("/")}function mx(l,o){if(!l.hasChildren())return YT(l);if(o){const a=l.children[Wi]?mx(l.children[Wi],!1):"",c=[];return qo(l.children,(u,h)=>{h!==Wi&&c.push(`${h}:${mx(u,!1)}`)}),c.length>0?`${a}(${c.join("//")})`:a}{const a=function Kke(l,o){let a=[];return qo(l.children,(c,u)=>{u===Wi&&(a=a.concat(o(c,u)))}),qo(l.children,(c,u)=>{u!==Wi&&(a=a.concat(o(c,u)))}),a}(l,(c,u)=>u===Wi?[mx(l.children[Wi],!1)]:[`${u}:${mx(c,!1)}`]);return 1===Object.keys(l.children).length&&null!=l.children[Wi]?`${YT(l)}/${a[0]}`:`${YT(l)}/(${a.join("//")})`}}function iX(l){return encodeURIComponent(l).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function KT(l){return iX(l).replace(/%3B/gi,";")}function jR(l){return iX(l).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function JT(l){return decodeURIComponent(l)}function rX(l){return JT(l.replace(/\+/g,"%20"))}function sX(l){return`${jR(l.path)}${function tMe(l){return Object.keys(l).map(o=>`;${jR(o)}=${jR(l[o])}`).join("")}(l.parameters)}`}const iMe=/^[^\/()?;=#]+/;function eO(l){const o=l.match(iMe);return o?o[0]:""}const rMe=/^[^=?&#]+/,oMe=/^[^&#]+/;class lMe{constructor(o){this.url=o,this.remaining=o}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yi([],{}):new Yi([],this.parseChildren())}parseQueryParams(){const o={};if(this.consumeOptional("?"))do{this.parseQueryParam(o)}while(this.consumeOptional("&"));return o}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const o=[];for(this.peekStartsWith("(")||o.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),o.push(this.parseSegment());let a={};this.peekStartsWith("/(")&&(this.capture("/"),a=this.parseParens(!0));let c={};return this.peekStartsWith("(")&&(c=this.parseParens(!1)),(o.length>0||Object.keys(a).length>0)&&(c[Wi]=new Yi(o,a)),c}parseSegment(){const o=eO(this.remaining);if(""===o&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(o),new gx(JT(o),this.parseMatrixParams())}parseMatrixParams(){const o={};for(;this.consumeOptional(";");)this.parseParam(o);return o}parseParam(o){const a=eO(this.remaining);if(!a)return;this.capture(a);let c="";if(this.consumeOptional("=")){const u=eO(this.remaining);u&&(c=u,this.capture(c))}o[JT(a)]=JT(c)}parseQueryParam(o){const a=function sMe(l){const o=l.match(rMe);return o?o[0]:""}(this.remaining);if(!a)return;this.capture(a);let c="";if(this.consumeOptional("=")){const d=function aMe(l){const o=l.match(oMe);return o?o[0]:""}(this.remaining);d&&(c=d,this.capture(c))}const u=rX(a),h=rX(c);if(o.hasOwnProperty(u)){let d=o[u];Array.isArray(d)||(d=[d],o[u]=d),d.push(h)}else o[u]=h}parseParens(o){const a={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const c=eO(this.remaining),u=this.remaining[c.length];if("/"!==u&&")"!==u&&";"!==u)throw new Error(`Cannot parse url '${this.url}'`);let h;c.indexOf(":")>-1?(h=c.substr(0,c.indexOf(":")),this.capture(h),this.capture(":")):o&&(h=Wi);const d=this.parseChildren();a[h]=1===Object.keys(d).length?d[Wi]:new Yi([],d),this.consumeOptional("//")}return a}peekStartsWith(o){return this.remaining.startsWith(o)}consumeOptional(o){return!!this.peekStartsWith(o)&&(this.remaining=this.remaining.substring(o.length),!0)}capture(o){if(!this.consumeOptional(o))throw new Error(`Expected "${o}".`)}}class oX{constructor(o){this._root=o}get root(){return this._root.value}parent(o){const a=this.pathFromRoot(o);return a.length>1?a[a.length-2]:null}children(o){const a=qR(o,this._root);return a?a.children.map(c=>c.value):[]}firstChild(o){const a=qR(o,this._root);return a&&a.children.length>0?a.children[0].value:null}siblings(o){const a=ZR(o,this._root);return a.length<2?[]:a[a.length-2].children.map(u=>u.value).filter(u=>u!==o)}pathFromRoot(o){return ZR(o,this._root).map(a=>a.value)}}function qR(l,o){if(l===o.value)return o;for(const a of o.children){const c=qR(l,a);if(c)return c}return null}function ZR(l,o){if(l===o.value)return[o];for(const a of o.children){const c=ZR(l,a);if(c.length)return c.unshift(o),c}return[]}class Kd{constructor(o,a){this.value=o,this.children=a}toString(){return`TreeNode(${this.value})`}}function ty(l){const o={};return l&&l.children.forEach(a=>o[a.value.outlet]=a),o}class aX extends oX{constructor(o,a){super(o),this.snapshot=a,XR(this,o)}toString(){return this.snapshot.toString()}}function lX(l,o){const a=function cMe(l,o){const d=new tO([],{},{},"",{},Wi,o,null,l.root,-1,{});return new uX("",new Kd(d,[]))}(l,o),c=new Hr([new gx("",{})]),u=new Hr({}),h=new Hr({}),d=new Hr({}),f=new Hr(""),p=new ny(c,u,d,f,h,Wi,o,a.root);return p.snapshot=a.root,new aX(new Kd(p,[]),a)}class ny{constructor(o,a,c,u,h,d,f,p){this.url=o,this.params=a,this.queryParams=c,this.fragment=u,this.data=h,this.outlet=d,this.component=f,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(fn(o=>ey(o)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(fn(o=>ey(o)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cX(l,o="emptyOnly"){const a=l.pathFromRoot;let c=0;if("always"!==o)for(c=a.length-1;c>=1;){const u=a[c],h=a[c-1];if(u.routeConfig&&""===u.routeConfig.path)c--;else{if(h.component)break;c--}}return function uMe(l){return l.reduce((o,a)=>({params:Object.assign(Object.assign({},o.params),a.params),data:Object.assign(Object.assign({},o.data),a.data),resolve:Object.assign(Object.assign({},o.resolve),a._resolvedData)}),{params:{},data:{},resolve:{}})}(a.slice(c))}class tO{constructor(o,a,c,u,h,d,f,p,g,m,v){this.url=o,this.params=a,this.queryParams=c,this.fragment=u,this.data=h,this.outlet=d,this.component=f,this.routeConfig=p,this._urlSegment=g,this._lastPathIndex=m,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ey(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ey(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(c=>c.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class uX extends oX{constructor(o,a){super(a),this.url=o,XR(this,a)}toString(){return hX(this._root)}}function XR(l,o){o.value._routerState=l,o.children.forEach(a=>XR(l,a))}function hX(l){const o=l.children.length>0?` { ${l.children.map(hX).join(", ")} } `:"";return`${l.value}${o}`}function YR(l){if(l.snapshot){const o=l.snapshot,a=l._futureSnapshot;l.snapshot=a,Rh(o.queryParams,a.queryParams)||l.queryParams.next(a.queryParams),o.fragment!==a.fragment&&l.fragment.next(a.fragment),Rh(o.params,a.params)||l.params.next(a.params),function Qke(l,o){if(l.length!==o.length)return!1;for(let a=0;a<l.length;++a)if(!Rh(l[a],o[a]))return!1;return!0}(o.url,a.url)||l.url.next(a.url),Rh(o.data,a.data)||l.data.next(a.data)}else l.snapshot=l._futureSnapshot,l.data.next(l._futureSnapshot.data)}function KR(l,o){const a=Rh(l.params,o.params)&&function Yke(l,o){return rm(l,o)&&l.every((a,c)=>Rh(a.parameters,o[c].parameters))}(l.url,o.url);return a&&!(!l.parent!=!o.parent)&&(!l.parent||KR(l.parent,o.parent))}function vx(l,o,a){if(a&&l.shouldReuseRoute(o.value,a.value.snapshot)){const c=a.value;c._futureSnapshot=o.value;const u=function dMe(l,o,a){return o.children.map(c=>{for(const u of a.children)if(l.shouldReuseRoute(c.value,u.value.snapshot))return vx(l,c,u);return vx(l,c)})}(l,o,a);return new Kd(c,u)}{if(l.shouldAttach(o.value)){const h=l.retrieve(o.value);if(null!==h){const d=h.route;return d.value._futureSnapshot=o.value,d.children=o.children.map(f=>vx(l,f)),d}}const c=function fMe(l){return new ny(new Hr(l.url),new Hr(l.params),new Hr(l.queryParams),new Hr(l.fragment),new Hr(l.data),l.outlet,l.component,l)}(o.value),u=o.children.map(h=>vx(l,h));return new Kd(c,u)}}function nO(l){return"object"==typeof l&&null!=l&&!l.outlets&&!l.segmentPath}function yx(l){return"object"==typeof l&&null!=l&&l.outlets}function JR(l,o,a,c,u){let h={};return c&&qo(c,(d,f)=>{h[f]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`}),new im(a.root===l?o:dX(a.root,l,o),h,u)}function dX(l,o,a){const c={};return qo(l.children,(u,h)=>{c[h]=u===o?a:dX(u,o,a)}),new Yi(l.segments,c)}class fX{constructor(o,a,c){if(this.isAbsolute=o,this.numberOfDoubleDots=a,this.commands=c,o&&c.length>0&&nO(c[0]))throw new Error("Root segment cannot have matrix parameters");const u=c.find(yx);if(u&&u!==ZZ(c))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class eF{constructor(o,a,c){this.segmentGroup=o,this.processChildren=a,this.index=c}}function pX(l,o,a){if(l||(l=new Yi([],{})),0===l.segments.length&&l.hasChildren())return iO(l,o,a);const c=function _Me(l,o,a){let c=0,u=o;const h={match:!1,pathIndex:0,commandIndex:0};for(;u<l.segments.length;){if(c>=a.length)return h;const d=l.segments[u],f=a[c];if(yx(f))break;const p=`${f}`,g=c<a.length-1?a[c+1]:null;if(u>0&&void 0===p)break;if(p&&g&&"object"==typeof g&&void 0===g.outlets){if(!mX(p,g,d))return h;c+=2}else{if(!mX(p,{},d))return h;c++}u++}return{match:!0,pathIndex:u,commandIndex:c}}(l,o,a),u=a.slice(c.commandIndex);if(c.match&&c.pathIndex<l.segments.length){const h=new Yi(l.segments.slice(0,c.pathIndex),{});return h.children[Wi]=new Yi(l.segments.slice(c.pathIndex),l.children),iO(h,0,u)}return c.match&&0===u.length?new Yi(l.segments,{}):c.match&&!l.hasChildren()?tF(l,o,a):c.match?iO(l,0,u):tF(l,o,a)}function iO(l,o,a){if(0===a.length)return new Yi(l.segments,{});{const c=function yMe(l){return yx(l[0])?l[0].outlets:{[Wi]:l}}(a),u={};return qo(c,(h,d)=>{"string"==typeof h&&(h=[h]),null!==h&&(u[d]=pX(l.children[d],o,h))}),qo(l.children,(h,d)=>{void 0===c[d]&&(u[d]=h)}),new Yi(l.segments,u)}}function tF(l,o,a){const c=l.segments.slice(0,o);let u=0;for(;u<a.length;){const h=a[u];if(yx(h)){const p=bMe(h.outlets);return new Yi(c,p)}if(0===u&&nO(a[0])){c.push(new gx(l.segments[o].path,gX(a[0]))),u++;continue}const d=yx(h)?h.outlets[Wi]:`${h}`,f=u<a.length-1?a[u+1]:null;d&&f&&nO(f)?(c.push(new gx(d,gX(f))),u+=2):(c.push(new gx(d,{})),u++)}return new Yi(c,{})}function bMe(l){const o={};return qo(l,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(o[c]=tF(new Yi([],{}),0,a))}),o}function gX(l){const o={};return qo(l,(a,c)=>o[c]=`${a}`),o}function mX(l,o,a){return l==a.path&&Rh(o,a.parameters)}class CMe{constructor(o,a,c,u){this.routeReuseStrategy=o,this.futureState=a,this.currState=c,this.forwardEvent=u}activate(o){const a=this.futureState._root,c=this.currState?this.currState._root:null;this.deactivateChildRoutes(a,c,o),YR(this.futureState.root),this.activateChildRoutes(a,c,o)}deactivateChildRoutes(o,a,c){const u=ty(a);o.children.forEach(h=>{const d=h.value.outlet;this.deactivateRoutes(h,u[d],c),delete u[d]}),qo(u,(h,d)=>{this.deactivateRouteAndItsChildren(h,c)})}deactivateRoutes(o,a,c){const u=o.value,h=a?a.value:null;if(u===h)if(u.component){const d=c.getContext(u.outlet);d&&this.deactivateChildRoutes(o,a,d.children)}else this.deactivateChildRoutes(o,a,c);else h&&this.deactivateRouteAndItsChildren(a,c)}deactivateRouteAndItsChildren(o,a){o.value.component&&this.routeReuseStrategy.shouldDetach(o.value.snapshot)?this.detachAndStoreRouteSubtree(o,a):this.deactivateRouteAndOutlet(o,a)}detachAndStoreRouteSubtree(o,a){const c=a.getContext(o.value.outlet),u=c&&o.value.component?c.children:a,h=ty(o);for(const d of Object.keys(h))this.deactivateRouteAndItsChildren(h[d],u);if(c&&c.outlet){const d=c.outlet.detach(),f=c.children.onOutletDeactivated();this.routeReuseStrategy.store(o.value.snapshot,{componentRef:d,route:o,contexts:f})}}deactivateRouteAndOutlet(o,a){const c=a.getContext(o.value.outlet),u=c&&o.value.component?c.children:a,h=ty(o);for(const d of Object.keys(h))this.deactivateRouteAndItsChildren(h[d],u);c&&c.outlet&&(c.outlet.deactivate(),c.children.onOutletDeactivated(),c.attachRef=null,c.resolver=null,c.route=null)}activateChildRoutes(o,a,c){const u=ty(a);o.children.forEach(h=>{this.activateRoutes(h,u[h.value.outlet],c),this.forwardEvent(new Hke(h.value.snapshot))}),o.children.length&&this.forwardEvent(new zke(o.value.snapshot))}activateRoutes(o,a,c){const u=o.value,h=a?a.value:null;if(YR(u),u===h)if(u.component){const d=c.getOrCreateContext(u.outlet);this.activateChildRoutes(o,a,d.children)}else this.activateChildRoutes(o,a,c);else if(u.component){const d=c.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){const f=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),YR(f.route.value),this.activateChildRoutes(o,null,d.children)}else{const f=function SMe(l){for(let o=l.parent;o;o=o.parent){const a=o.routeConfig;if(a&&a._loadedConfig)return a._loadedConfig;if(a&&a.component)return null}return null}(u.snapshot),p=f?f.module.componentFactoryResolver:null;d.attachRef=null,d.route=u,d.resolver=p,d.outlet&&d.outlet.activateWith(u,p),this.activateChildRoutes(o,null,d.children)}}else this.activateChildRoutes(o,null,c)}}class nF{constructor(o,a){this.routes=o,this.module=a}}function cp(l){return"function"==typeof l}function sm(l){return l instanceof im}const _x=Symbol("INITIAL_VALUE");function bx(){return lp(l=>function FZ(...l){const o=pb(l),a=_$(l),{args:c,keys:u}=PZ(l);if(0===c.length)return Po([],o);const h=new xn(function Oke(l,o,a=xt){return c=>{NZ(o,()=>{const{length:u}=l,h=new Array(u);let d=u,f=u;for(let p=0;p<u;p++)NZ(o,()=>{const g=Po(l[p],o);let m=!1;g.subscribe(new Hi(c,v=>{h[p]=v,m||(m=!0,f--),f||c.next(a(h.slice()))},()=>{--d||c.complete()}))},c)},c)}}(c,o,u?d=>RZ(u,d):xt));return a?h.pipe(HR(a)):h}(l.map(o=>o.pipe(rv(1),ZT(_x)))).pipe(VZ((o,a)=>{let c=!1;return a.reduce((u,h,d)=>u!==_x?u:(h===_x&&(c=!0),c||!1!==h&&d!==a.length-1&&!sm(h)?u:h),o)},_x),$s(o=>o!==_x),fn(o=>sm(o)?o:!0===o),rv(1)))}class MMe{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xx,this.attachRef=null}}class xx{constructor(){this.contexts=new Map}onChildOutletCreated(o,a){const c=this.getOrCreateContext(o);c.outlet=a,this.contexts.set(o,c)}onChildOutletDestroyed(o){const a=this.getContext(o);a&&(a.outlet=null,a.attachRef=null)}onOutletDeactivated(){const o=this.contexts;return this.contexts=new Map,o}onOutletReAttached(o){this.contexts=o}getOrCreateContext(o){let a=this.getContext(o);return a||(a=new MMe,this.contexts.set(o,a)),a}getContext(o){return this.contexts.get(o)||null}}let iF=(()=>{class l{constructor(a,c,u,h,d){this.parentContexts=a,this.location=c,this.resolver=u,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new wt,this.deactivateEvents=new wt,this.attachEvents=new wt,this.detachEvents=new wt,this.name=h||Wi,a.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const a=this.parentContexts.getContext(this.name);a&&a.route&&(a.attachRef?this.attach(a.attachRef,a.route):this.activateWith(a.route,a.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const a=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(a.instance),a}attach(a,c){this.activated=a,this._activatedRoute=c,this.location.insert(a.hostView),this.attachEvents.emit(a.instance)}deactivate(){if(this.activated){const a=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(a)}}activateWith(a,c){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=a;const d=(c=c||this.resolver).resolveComponentFactory(a._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,p=new EMe(a,f,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return l.\u0275fac=function(a){return new(a||l)(L(xx),L(Pi),L(jd),gv("name"),L(xl))},l.\u0275dir=vt({type:l,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),l})();class EMe{constructor(o,a,c){this.route=o,this.childContexts=a,this.parent=c}get(o,a){return o===ny?this.route:o===xx?this.childContexts:this.parent.get(o,a)}}let vX=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=qe({type:l,selectors:[["ng-component"]],decls:1,vars:0,template:function(a,c){1&a&&me(0,"router-outlet")},directives:[iF],encapsulation:2}),l})();function yX(l,o=""){for(let a=0;a<l.length;a++){const c=l[a];AMe(c,IMe(o,c))}}function AMe(l,o){l.children&&yX(l.children,o)}function IMe(l,o){return o?l||o.path?l&&!o.path?`${l}/`:!l&&o.path?o.path:`${l}/${o.path}`:"":l}function rF(l){const o=l.children&&l.children.map(rF),a=o?Object.assign(Object.assign({},l),{children:o}):Object.assign({},l);return!a.component&&(o||a.loadChildren)&&a.outlet&&a.outlet!==Wi&&(a.component=vX),a}function qc(l){return l.outlet||Wi}function _X(l,o){const a=l.filter(c=>qc(c)===o);return a.push(...l.filter(c=>qc(c)!==o)),a}const bX={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function rO(l,o,a){var c;if(""===o.path)return"full"===o.pathMatch&&(l.hasChildren()||a.length>0)?Object.assign({},bX):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const h=(o.matcher||Gke)(a,l,o);if(!h)return Object.assign({},bX);const d={};qo(h.posParams,(p,g)=>{d[g]=p.path});const f=h.consumed.length>0?Object.assign(Object.assign({},d),h.consumed[h.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:h.consumed,lastChild:h.consumed.length,parameters:f,positionalParamSegments:null!==(c=h.posParams)&&void 0!==c?c:{}}}function sO(l,o,a,c,u="corrected"){if(a.length>0&&function FMe(l,o,a){return a.some(c=>oO(l,o,c)&&qc(c)!==Wi)}(l,a,c)){const d=new Yi(o,function RMe(l,o,a,c){const u={};u[Wi]=c,c._sourceSegment=l,c._segmentIndexShift=o.length;for(const h of a)if(""===h.path&&qc(h)!==Wi){const d=new Yi([],{});d._sourceSegment=l,d._segmentIndexShift=o.length,u[qc(h)]=d}return u}(l,o,c,new Yi(a,l.children)));return d._sourceSegment=l,d._segmentIndexShift=o.length,{segmentGroup:d,slicedSegments:[]}}if(0===a.length&&function NMe(l,o,a){return a.some(c=>oO(l,o,c))}(l,a,c)){const d=new Yi(l.segments,function PMe(l,o,a,c,u,h){const d={};for(const f of c)if(oO(l,a,f)&&!u[qc(f)]){const p=new Yi([],{});p._sourceSegment=l,p._segmentIndexShift="legacy"===h?l.segments.length:o.length,d[qc(f)]=p}return Object.assign(Object.assign({},u),d)}(l,o,a,c,l.children,u));return d._sourceSegment=l,d._segmentIndexShift=o.length,{segmentGroup:d,slicedSegments:a}}const h=new Yi(l.segments,l.children);return h._sourceSegment=l,h._segmentIndexShift=o.length,{segmentGroup:h,slicedSegments:a}}function oO(l,o,a){return(!(l.hasChildren()||o.length>0)||"full"!==a.pathMatch)&&""===a.path}function xX(l,o,a,c){return!!(qc(l)===c||c!==Wi&&oO(o,a,l))&&("**"===l.path||rO(o,l,a).matched)}function CX(l,o,a){return 0===o.length&&!l.children[a]}class Cx{constructor(o){this.segmentGroup=o||null}}class SX{constructor(o){this.urlTree=o}}function aO(l){return new xn(o=>o.error(new Cx(l)))}function wX(l){return new xn(o=>o.error(new SX(l)))}function LMe(l){return new xn(o=>o.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${l}'`)))}class zMe{constructor(o,a,c,u,h){this.configLoader=a,this.urlSerializer=c,this.urlTree=u,this.config=h,this.allowRedirects=!0,this.ngModule=o.get(qd)}apply(){const o=sO(this.urlTree.root,[],[],this.config).segmentGroup,a=new Yi(o.segments,o.children);return this.expandSegmentGroup(this.ngModule,this.config,a,Wi).pipe(fn(h=>this.createUrlTree(sF(h),this.urlTree.queryParams,this.urlTree.fragment))).pipe(rr(h=>{if(h instanceof SX)return this.allowRedirects=!1,this.match(h.urlTree);throw h instanceof Cx?this.noMatchError(h):h}))}match(o){return this.expandSegmentGroup(this.ngModule,this.config,o.root,Wi).pipe(fn(u=>this.createUrlTree(sF(u),o.queryParams,o.fragment))).pipe(rr(u=>{throw u instanceof Cx?this.noMatchError(u):u}))}noMatchError(o){return new Error(`Cannot match any routes. URL Segment: '${o.segmentGroup}'`)}createUrlTree(o,a,c){const u=o.segments.length>0?new Yi([],{[Wi]:o}):o;return new im(u,a,c)}expandSegmentGroup(o,a,c,u){return 0===c.segments.length&&c.hasChildren()?this.expandChildren(o,a,c).pipe(fn(h=>new Yi([],h))):this.expandSegment(o,c,a,c.segments,u,!0)}expandChildren(o,a,c){const u=[];for(const h of Object.keys(c.children))"primary"===h?u.unshift(h):u.push(h);return Po(u).pipe(Jv(h=>{const d=c.children[h],f=_X(a,h);return this.expandSegmentGroup(o,f,d,h).pipe(fn(p=>({segment:p,outlet:h})))}),VZ((h,d)=>(h[d.outlet]=d.segment,h),{}),function Ake(l,o){const a=arguments.length>=2;return c=>c.pipe(l?$s((u,h)=>l(u,h,c)):xt,WR(1),a?UZ(o):zZ(()=>new qT))}())}expandSegment(o,a,c,u,h,d){return Po(c).pipe(Jv(f=>this.expandSegmentAgainstRoute(o,a,c,f,u,h,d).pipe(rr(g=>{if(g instanceof Cx)return li(null);throw g}))),nm(f=>!!f),rr((f,p)=>{if(f instanceof qT||"EmptyError"===f.name){if(CX(a,u,h))return li(new Yi([],{}));throw new Cx(a)}throw f}))}expandSegmentAgainstRoute(o,a,c,u,h,d,f){return xX(u,a,h,d)?void 0===u.redirectTo?this.matchSegmentAgainstRoute(o,a,u,h,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(o,a,c,u,h,d):aO(a):aO(a)}expandSegmentAgainstRouteUsingRedirect(o,a,c,u,h,d){return"**"===u.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(o,c,u,d):this.expandRegularSegmentAgainstRouteUsingRedirect(o,a,c,u,h,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(o,a,c,u){const h=this.applyRedirectCommands([],c.redirectTo,{});return c.redirectTo.startsWith("/")?wX(h):this.lineralizeSegments(c,h).pipe(mo(d=>{const f=new Yi(d,{});return this.expandSegment(o,f,a,d,u,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(o,a,c,u,h,d){const{matched:f,consumedSegments:p,lastChild:g,positionalParamSegments:m}=rO(a,u,h);if(!f)return aO(a);const v=this.applyRedirectCommands(p,u.redirectTo,m);return u.redirectTo.startsWith("/")?wX(v):this.lineralizeSegments(u,v).pipe(mo(y=>this.expandSegment(o,a,c,y.concat(h.slice(g)),d,!1)))}matchSegmentAgainstRoute(o,a,c,u,h){if("**"===c.path)return c.loadChildren?(c._loadedConfig?li(c._loadedConfig):this.configLoader.load(o.injector,c)).pipe(fn(y=>(c._loadedConfig=y,new Yi(u,{})))):li(new Yi(u,{}));const{matched:d,consumedSegments:f,lastChild:p}=rO(a,c,u);if(!d)return aO(a);const g=u.slice(p);return this.getChildConfig(o,c,u).pipe(mo(v=>{const y=v.module,_=v.routes,{segmentGroup:b,slicedSegments:C}=sO(a,f,g,_),x=new Yi(b.segments,b.children);if(0===C.length&&x.hasChildren())return this.expandChildren(y,_,x).pipe(fn(T=>new Yi(f,T)));if(0===_.length&&0===C.length)return li(new Yi(f,{}));const S=qc(c)===h;return this.expandSegment(y,x,_,C,S?Wi:h,!0).pipe(fn(O=>new Yi(f.concat(O.segments),O.children)))}))}getChildConfig(o,a,c){return a.children?li(new nF(a.children,o)):a.loadChildren?void 0!==a._loadedConfig?li(a._loadedConfig):this.runCanLoadGuards(o.injector,a,c).pipe(mo(u=>u?this.configLoader.load(o.injector,a).pipe(fn(h=>(a._loadedConfig=h,h))):function BMe(l){return new xn(o=>o.error(QR(`Cannot load children because the guard of the route "path: '${l.path}'" returned false`)))}(a))):li(new nF([],o))}runCanLoadGuards(o,a,c){const u=a.canLoad;return u&&0!==u.length?li(u.map(d=>{const f=o.get(d);let p;if(function TMe(l){return l&&cp(l.canLoad)}(f))p=f.canLoad(a,c);else{if(!cp(f))throw new Error("Invalid CanLoad guard");p=f(a,c)}return Fh(p)})).pipe(bx(),Ua(d=>{if(!sm(d))return;const f=QR(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw f.url=d,f}),fn(d=>!0===d)):li(!0)}lineralizeSegments(o,a){let c=[],u=a.root;for(;;){if(c=c.concat(u.segments),0===u.numberOfChildren)return li(c);if(u.numberOfChildren>1||!u.children[Wi])return LMe(o.redirectTo);u=u.children[Wi]}}applyRedirectCommands(o,a,c){return this.applyRedirectCreatreUrlTree(a,this.urlSerializer.parse(a),o,c)}applyRedirectCreatreUrlTree(o,a,c,u){const h=this.createSegmentGroup(o,a.root,c,u);return new im(h,this.createQueryParams(a.queryParams,this.urlTree.queryParams),a.fragment)}createQueryParams(o,a){const c={};return qo(o,(u,h)=>{if("string"==typeof u&&u.startsWith(":")){const f=u.substring(1);c[h]=a[f]}else c[h]=u}),c}createSegmentGroup(o,a,c,u){const h=this.createSegments(o,a.segments,c,u);let d={};return qo(a.children,(f,p)=>{d[p]=this.createSegmentGroup(o,f,c,u)}),new Yi(h,d)}createSegments(o,a,c,u){return a.map(h=>h.path.startsWith(":")?this.findPosParam(o,h,u):this.findOrReturn(h,c))}findPosParam(o,a,c){const u=c[a.path.substring(1)];if(!u)throw new Error(`Cannot redirect to '${o}'. Cannot find '${a.path}'.`);return u}findOrReturn(o,a){let c=0;for(const u of a){if(u.path===o.path)return a.splice(c),u;c++}return o}}function sF(l){const o={};for(const c of Object.keys(l.children)){const h=sF(l.children[c]);(h.segments.length>0||h.hasChildren())&&(o[c]=h)}return function UMe(l){if(1===l.numberOfChildren&&l.children[Wi]){const o=l.children[Wi];return new Yi(l.segments.concat(o.segments),o.children)}return l}(new Yi(l.segments,o))}class TX{constructor(o){this.path=o,this.route=this.path[this.path.length-1]}}class lO{constructor(o,a){this.component=o,this.route=a}}function $Me(l,o,a){const c=l._root;return Sx(c,o?o._root:null,a,[c.value])}function cO(l,o,a){const c=function GMe(l){if(!l)return null;for(let o=l.parent;o;o=o.parent){const a=o.routeConfig;if(a&&a._loadedConfig)return a._loadedConfig}return null}(o);return(c?c.module.injector:a).get(l)}function Sx(l,o,a,c,u={canDeactivateChecks:[],canActivateChecks:[]}){const h=ty(o);return l.children.forEach(d=>{(function QMe(l,o,a,c,u={canDeactivateChecks:[],canActivateChecks:[]}){const h=l.value,d=o?o.value:null,f=a?a.getContext(l.value.outlet):null;if(d&&h.routeConfig===d.routeConfig){const p=function jMe(l,o,a){if("function"==typeof a)return a(l,o);switch(a){case"pathParamsChange":return!rm(l.url,o.url);case"pathParamsOrQueryParamsChange":return!rm(l.url,o.url)||!Rh(l.queryParams,o.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!KR(l,o)||!Rh(l.queryParams,o.queryParams);default:return!KR(l,o)}}(d,h,h.routeConfig.runGuardsAndResolvers);p?u.canActivateChecks.push(new TX(c)):(h.data=d.data,h._resolvedData=d._resolvedData),Sx(l,o,h.component?f?f.children:null:a,c,u),p&&f&&f.outlet&&f.outlet.isActivated&&u.canDeactivateChecks.push(new lO(f.outlet.component,d))}else d&&wx(o,f,u),u.canActivateChecks.push(new TX(c)),Sx(l,null,h.component?f?f.children:null:a,c,u)})(d,h[d.value.outlet],a,c.concat([d.value]),u),delete h[d.value.outlet]}),qo(h,(d,f)=>wx(d,a.getContext(f),u)),u}function wx(l,o,a){const c=ty(l),u=l.value;qo(c,(h,d)=>{wx(h,u.component?o?o.children.getContext(d):null:o,a)}),a.canDeactivateChecks.push(new lO(u.component&&o&&o.outlet&&o.outlet.isActivated?o.outlet.component:null,u))}class nEe{}function OX(l){return new xn(o=>o.error(l))}class rEe{constructor(o,a,c,u,h,d){this.rootComponentType=o,this.config=a,this.urlTree=c,this.url=u,this.paramsInheritanceStrategy=h,this.relativeLinkResolution=d}recognize(){const o=sO(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,a=this.processSegmentGroup(this.config,o,Wi);if(null===a)return null;const c=new tO([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Wi,this.rootComponentType,null,this.urlTree.root,-1,{}),u=new Kd(c,a),h=new uX(this.url,u);return this.inheritParamsAndData(h._root),h}inheritParamsAndData(o){const a=o.value,c=cX(a,this.paramsInheritanceStrategy);a.params=Object.freeze(c.params),a.data=Object.freeze(c.data),o.children.forEach(u=>this.inheritParamsAndData(u))}processSegmentGroup(o,a,c){return 0===a.segments.length&&a.hasChildren()?this.processChildren(o,a):this.processSegment(o,a,a.segments,c)}processChildren(o,a){const c=[];for(const h of Object.keys(a.children)){const d=a.children[h],f=_X(o,h),p=this.processSegmentGroup(f,d,h);if(null===p)return null;c.push(...p)}const u=DX(c);return function sEe(l){l.sort((o,a)=>o.value.outlet===Wi?-1:a.value.outlet===Wi?1:o.value.outlet.localeCompare(a.value.outlet))}(u),u}processSegment(o,a,c,u){for(const h of o){const d=this.processSegmentAgainstRoute(h,a,c,u);if(null!==d)return d}return CX(a,c,u)?[]:null}processSegmentAgainstRoute(o,a,c,u){if(o.redirectTo||!xX(o,a,c,u))return null;let h,d=[],f=[];if("**"===o.path){const _=c.length>0?ZZ(c).parameters:{};h=new tO(c,_,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,EX(o),qc(o),o.component,o,kX(a),MX(a)+c.length,AX(o))}else{const _=rO(a,o,c);if(!_.matched)return null;d=_.consumedSegments,f=c.slice(_.lastChild),h=new tO(d,_.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,EX(o),qc(o),o.component,o,kX(a),MX(a)+d.length,AX(o))}const p=function oEe(l){return l.children?l.children:l.loadChildren?l._loadedConfig.routes:[]}(o),{segmentGroup:g,slicedSegments:m}=sO(a,d,f,p.filter(_=>void 0===_.redirectTo),this.relativeLinkResolution);if(0===m.length&&g.hasChildren()){const _=this.processChildren(p,g);return null===_?null:[new Kd(h,_)]}if(0===p.length&&0===m.length)return[new Kd(h,[])];const v=qc(o)===u,y=this.processSegment(p,g,m,v?Wi:u);return null===y?null:[new Kd(h,y)]}}function aEe(l){const o=l.value.routeConfig;return o&&""===o.path&&void 0===o.redirectTo}function DX(l){const o=[],a=new Set;for(const c of l){if(!aEe(c)){o.push(c);continue}const u=o.find(h=>c.value.routeConfig===h.value.routeConfig);void 0!==u?(u.children.push(...c.children),a.add(u)):o.push(c)}for(const c of a){const u=DX(c.children);o.push(new Kd(c.value,u))}return o.filter(c=>!a.has(c))}function kX(l){let o=l;for(;o._sourceSegment;)o=o._sourceSegment;return o}function MX(l){let o=l,a=o._segmentIndexShift?o._segmentIndexShift:0;for(;o._sourceSegment;)o=o._sourceSegment,a+=o._segmentIndexShift?o._segmentIndexShift:0;return a-1}function EX(l){return l.data||{}}function AX(l){return l.resolve||{}}function IX(l){return[...Object.keys(l),...Object.getOwnPropertySymbols(l)]}function oF(l){return lp(o=>{const a=l(o);return a?Po(a).pipe(fn(()=>o)):li(o)})}class gEe extends class pEe{shouldDetach(o){return!1}store(o,a){}shouldAttach(o){return!1}retrieve(o){return null}shouldReuseRoute(o,a){return o.routeConfig===a.routeConfig}}{}const aF=new Zn("ROUTES");class PX{constructor(o,a,c,u){this.injector=o,this.compiler=a,this.onLoadStartListener=c,this.onLoadEndListener=u}load(o,a){if(a._loader$)return a._loader$;this.onLoadStartListener&&this.onLoadStartListener(a);const u=this.loadModuleFactory(a.loadChildren).pipe(fn(h=>{this.onLoadEndListener&&this.onLoadEndListener(a);const d=h.create(o);return new nF(qZ(d.injector.get(aF,void 0,mi.Self|mi.Optional)).map(rF),d)}),rr(h=>{throw a._loader$=void 0,h}));return a._loader$=new kke(u,()=>new mt).pipe(BZ()),a._loader$}loadModuleFactory(o){return Fh(o()).pipe(mo(a=>a instanceof Wj?li(a):Po(this.compiler.compileModuleAsync(a))))}}class vEe{shouldProcessUrl(o){return!0}extract(o){return o}merge(o,a){return o}}function yEe(l){throw l}function _Ee(l,o,a){return o.parse("/")}function RX(l,o){return li(null)}const bEe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xEe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ps=(()=>{class l{constructor(a,c,u,h,d,f,p){this.rootComponentType=a,this.urlSerializer=c,this.rootContexts=u,this.location=h,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new mt,this.errorHandler=yEe,this.malformedUriErrorHandler=_Ee,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:RX,afterPreactivation:RX},this.urlHandlingStrategy=new vEe,this.routeReuseStrategy=new gEe,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(qd),this.console=d.get(Dq);const v=d.get(mr);this.isNgZoneEnabled=v instanceof mr&&mr.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function jke(){return new im(new Yi([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new PX(d,f,y=>this.triggerEvent(new $Z(y)),y=>this.triggerEvent(new WZ(y))),this.routerState=lX(this.currentUrlTree,this.rootComponentType),this.transitions=new Hr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var a;return null===(a=this.location.getState())||void 0===a?void 0:a.\u0275routerPageId}setupNavigations(a){const c=this.events;return a.pipe($s(u=>0!==u.id),fn(u=>Object.assign(Object.assign({},u),{extractedUrl:this.urlHandlingStrategy.extract(u.rawUrl)})),lp(u=>{let h=!1,d=!1;return li(u).pipe(Ua(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),lp(f=>{const p=this.browserUrlTree.toString(),g=!this.navigated||f.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||g)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return uO(f.source)&&(this.browserUrlTree=f.extractedUrl),li(f).pipe(lp(v=>{const y=this.transitions.getValue();return c.next(new GR(v.id,this.serializeUrl(v.extractedUrl),v.source,v.restoredState)),y!==this.transitions.getValue()?Vd:Promise.resolve(v)}),function HMe(l,o,a,c){return lp(u=>function VMe(l,o,a,c,u){return new zMe(l,o,a,c,u).apply()}(l,o,a,u.extractedUrl,c).pipe(fn(h=>Object.assign(Object.assign({},u),{urlAfterRedirects:h}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ua(v=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:v.urlAfterRedirects})}),function lEe(l,o,a,c,u){return mo(h=>function iEe(l,o,a,c,u="emptyOnly",h="legacy"){try{const d=new rEe(l,o,a,c,u,h).recognize();return null===d?OX(new nEe):li(d)}catch(d){return OX(d)}}(l,o,h.urlAfterRedirects,a(h.urlAfterRedirects),c,u).pipe(fn(d=>Object.assign(Object.assign({},h),{targetSnapshot:d}))))}(this.rootComponentType,this.config,v=>this.serializeUrl(v),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ua(v=>{if("eager"===this.urlUpdateStrategy){if(!v.extras.skipLocationChange){const _=this.urlHandlingStrategy.merge(v.urlAfterRedirects,v.rawUrl);this.setBrowserUrl(_,v)}this.browserUrlTree=v.urlAfterRedirects}const y=new Rke(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);c.next(y)}));if(g&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:y,extractedUrl:_,source:b,restoredState:C,extras:x}=f,S=new GR(y,this.serializeUrl(_),b,C);c.next(S);const w=lX(_,this.rootComponentType).snapshot;return li(Object.assign(Object.assign({},f),{targetSnapshot:w,urlAfterRedirects:_,extras:Object.assign(Object.assign({},x),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),Vd}),oF(f=>{const{targetSnapshot:p,id:g,extractedUrl:m,rawUrl:v,extras:{skipLocationChange:y,replaceUrl:_}}=f;return this.hooks.beforePreactivation(p,{navigationId:g,appliedUrlTree:m,rawUrlTree:v,skipLocationChange:!!y,replaceUrl:!!_})}),Ua(f=>{const p=new Fke(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(p)}),fn(f=>Object.assign(Object.assign({},f),{guards:$Me(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function qMe(l,o){return mo(a=>{const{targetSnapshot:c,currentSnapshot:u,guards:{canActivateChecks:h,canDeactivateChecks:d}}=a;return 0===d.length&&0===h.length?li(Object.assign(Object.assign({},a),{guardsResult:!0})):function ZMe(l,o,a,c){return Po(l).pipe(mo(u=>function tEe(l,o,a,c,u){const h=o&&o.routeConfig?o.routeConfig.canDeactivate:null;return h&&0!==h.length?li(h.map(f=>{const p=cO(f,o,u);let g;if(function kMe(l){return l&&cp(l.canDeactivate)}(p))g=Fh(p.canDeactivate(l,o,a,c));else{if(!cp(p))throw new Error("Invalid CanDeactivate guard");g=Fh(p(l,o,a,c))}return g.pipe(nm())})).pipe(bx()):li(!0)}(u.component,u.route,a,o,c)),nm(u=>!0!==u,!0))}(d,c,u,l).pipe(mo(f=>f&&function wMe(l){return"boolean"==typeof l}(f)?function XMe(l,o,a,c){return Po(o).pipe(Jv(u=>$R(function KMe(l,o){return null!==l&&o&&o(new Vke(l)),li(!0)}(u.route.parent,c),function YMe(l,o){return null!==l&&o&&o(new Uke(l)),li(!0)}(u.route,c),function eEe(l,o,a){const c=o[o.length-1],h=o.slice(0,o.length-1).reverse().map(d=>function WMe(l){const o=l.routeConfig?l.routeConfig.canActivateChild:null;return o&&0!==o.length?{node:l,guards:o}:null}(d)).filter(d=>null!==d).map(d=>LZ(()=>li(d.guards.map(p=>{const g=cO(p,d.node,a);let m;if(function DMe(l){return l&&cp(l.canActivateChild)}(g))m=Fh(g.canActivateChild(c,l));else{if(!cp(g))throw new Error("Invalid CanActivateChild guard");m=Fh(g(c,l))}return m.pipe(nm())})).pipe(bx())));return li(h).pipe(bx())}(l,u.path,a),function JMe(l,o,a){const c=o.routeConfig?o.routeConfig.canActivate:null;if(!c||0===c.length)return li(!0);const u=c.map(h=>LZ(()=>{const d=cO(h,o,a);let f;if(function OMe(l){return l&&cp(l.canActivate)}(d))f=Fh(d.canActivate(o,l));else{if(!cp(d))throw new Error("Invalid CanActivate guard");f=Fh(d(o,l))}return f.pipe(nm())}));return li(u).pipe(bx())}(l,u.route,a))),nm(u=>!0!==u,!0))}(c,h,l,o):li(f)),fn(f=>Object.assign(Object.assign({},a),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),Ua(f=>{if(sm(f.guardsResult)){const g=QR(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw g.url=f.guardsResult,g}const p=new Nke(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(p)}),$s(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),oF(f=>{if(f.guards.canActivateChecks.length)return li(f).pipe(Ua(p=>{const g=new Lke(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(g)}),lp(p=>{let g=!1;return li(p).pipe(function cEe(l,o){return mo(a=>{const{targetSnapshot:c,guards:{canActivateChecks:u}}=a;if(!u.length)return li(a);let h=0;return Po(u).pipe(Jv(d=>function uEe(l,o,a,c){return function hEe(l,o,a,c){const u=IX(l);if(0===u.length)return li({});const h={};return Po(u).pipe(mo(d=>function dEe(l,o,a,c){const u=cO(l,o,c);return Fh(u.resolve?u.resolve(o,a):u(o,a))}(l[d],o,a,c).pipe(Ua(f=>{h[d]=f}))),WR(1),mo(()=>IX(h).length===u.length?li(h):Vd))}(l._resolve,l,o,c).pipe(fn(h=>(l._resolvedData=h,l.data=Object.assign(Object.assign({},l.data),cX(l,a).resolve),null)))}(d.route,c,l,o)),Ua(()=>h++),WR(1),mo(d=>h===u.length?li(a):Vd))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ua({next:()=>g=!0,complete:()=>{g||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),Ua(p=>{const g=new Bke(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(g)}))}),oF(f=>{const{targetSnapshot:p,id:g,extractedUrl:m,rawUrl:v,extras:{skipLocationChange:y,replaceUrl:_}}=f;return this.hooks.afterPreactivation(p,{navigationId:g,appliedUrlTree:m,rawUrlTree:v,skipLocationChange:!!y,replaceUrl:!!_})}),fn(f=>{const p=function hMe(l,o,a){const c=vx(l,o._root,a?a._root:void 0);return new aX(c,o)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:p})}),Ua(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((l,o,a)=>fn(c=>(new CMe(o,c.targetRouterState,c.currentRouterState,a).activate(l),c)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),Ua({next(){h=!0},complete(){h=!0}}),function Ike(l){return Ci((o,a)=>{try{o.subscribe(a)}finally{a.add(l)}})}(()=>{var f;h||d||this.cancelNavigationTransition(u,`Navigation ID ${u.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===u.id&&(this.currentNavigation=null)}),rr(f=>{if(d=!0,function Wke(l){return l&&l[QZ]}(f)){const p=sm(f.url);p||(this.navigated=!0,this.restoreHistory(u,!0));const g=new HZ(u.id,this.serializeUrl(u.extractedUrl),f.message);c.next(g),p?setTimeout(()=>{const m=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),v={skipLocationChange:u.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||uO(u.source)};this.scheduleNavigation(m,"imperative",null,v,{resolve:u.resolve,reject:u.reject,promise:u.promise})},0):u.resolve(!1)}else{this.restoreHistory(u,!0);const p=new Pke(u.id,this.serializeUrl(u.extractedUrl),f);c.next(p);try{u.resolve(this.errorHandler(f))}catch(g){u.reject(g)}}return Vd}))}))}resetRootComponentType(a){this.rootComponentType=a,this.routerState.root.component=this.rootComponentType}setTransition(a){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),a))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(a=>{const c="popstate"===a.type?"popstate":"hashchange";"popstate"===c&&setTimeout(()=>{var u;const h={replaceUrl:!0},d=(null===(u=a.state)||void 0===u?void 0:u.navigationId)?a.state:null;if(d){const p=Object.assign({},d);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(h.state=p)}const f=this.parseUrl(a.url);this.scheduleNavigation(f,c,d,h)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(a){this.events.next(a)}resetConfig(a){yX(a),this.config=a.map(rF),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(a,c={}){const{relativeTo:u,queryParams:h,fragment:d,queryParamsHandling:f,preserveFragment:p}=c,g=u||this.routerState.root,m=p?this.currentUrlTree.fragment:d;let v=null;switch(f){case"merge":v=Object.assign(Object.assign({},this.currentUrlTree.queryParams),h);break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=h||null}return null!==v&&(v=this.removeEmptyProps(v)),function pMe(l,o,a,c,u){if(0===a.length)return JR(o.root,o.root,o,c,u);const h=function gMe(l){if("string"==typeof l[0]&&1===l.length&&"/"===l[0])return new fX(!0,0,l);let o=0,a=!1;const c=l.reduce((u,h,d)=>{if("object"==typeof h&&null!=h){if(h.outlets){const f={};return qo(h.outlets,(p,g)=>{f[g]="string"==typeof p?p.split("/"):p}),[...u,{outlets:f}]}if(h.segmentPath)return[...u,h.segmentPath]}return"string"!=typeof h?[...u,h]:0===d?(h.split("/").forEach((f,p)=>{0==p&&"."===f||(0==p&&""===f?a=!0:".."===f?o++:""!=f&&u.push(f))}),u):[...u,h]},[]);return new fX(a,o,c)}(a);if(h.toRoot())return JR(o.root,new Yi([],{}),o,c,u);const d=function mMe(l,o,a){if(l.isAbsolute)return new eF(o.root,!0,0);if(-1===a.snapshot._lastPathIndex){const h=a.snapshot._urlSegment;return new eF(h,h===o.root,0)}const c=nO(l.commands[0])?0:1;return function vMe(l,o,a){let c=l,u=o,h=a;for(;h>u;){if(h-=u,c=c.parent,!c)throw new Error("Invalid number of '../'");u=c.segments.length}return new eF(c,!1,u-h)}(a.snapshot._urlSegment,a.snapshot._lastPathIndex+c,l.numberOfDoubleDots)}(h,o,l),f=d.processChildren?iO(d.segmentGroup,d.index,h.commands):pX(d.segmentGroup,d.index,h.commands);return JR(d.segmentGroup,f,o,c,u)}(g,this.currentUrlTree,a,v,null!=m?m:null)}navigateByUrl(a,c={skipLocationChange:!1}){const u=sm(a)?a:this.parseUrl(a),h=this.urlHandlingStrategy.merge(u,this.rawUrlTree);return this.scheduleNavigation(h,"imperative",null,c)}navigate(a,c={skipLocationChange:!1}){return function CEe(l){for(let o=0;o<l.length;o++){const a=l[o];if(null==a)throw new Error(`The requested path contains ${a} segment at index ${o}`)}}(a),this.navigateByUrl(this.createUrlTree(a,c),c)}serializeUrl(a){return this.urlSerializer.serialize(a)}parseUrl(a){let c;try{c=this.urlSerializer.parse(a)}catch(u){c=this.malformedUriErrorHandler(u,this.urlSerializer,a)}return c}isActive(a,c){let u;if(u=!0===c?Object.assign({},bEe):!1===c?Object.assign({},xEe):c,sm(a))return YZ(this.currentUrlTree,a,u);const h=this.parseUrl(a);return YZ(this.currentUrlTree,h,u)}removeEmptyProps(a){return Object.keys(a).reduce((c,u)=>{const h=a[u];return null!=h&&(c[u]=h),c},{})}processNavigations(){this.navigations.subscribe(a=>{this.navigated=!0,this.lastSuccessfulId=a.id,this.currentPageId=a.targetPageId,this.events.next(new px(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,a.resolve(!0)},a=>{this.console.warn(`Unhandled Navigation Error: ${a}`)})}scheduleNavigation(a,c,u,h,d){var f,p,g;if(this.disposed)return Promise.resolve(!1);const m=this.transitions.value,v=uO(c)&&m&&!uO(m.source),y=m.rawUrl.toString()===a.toString(),_=m.id===(null===(f=this.currentNavigation)||void 0===f?void 0:f.id);if(v&&y&&_)return Promise.resolve(!0);let C,x,S;d?(C=d.resolve,x=d.reject,S=d.promise):S=new Promise((T,M)=>{C=T,x=M});const w=++this.navigationId;let O;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(u=this.location.getState()),O=u&&u.\u0275routerPageId?u.\u0275routerPageId:h.replaceUrl||h.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(g=this.browserPageId)&&void 0!==g?g:0)+1):O=0,this.setTransition({id:w,targetPageId:O,source:c,restoredState:u,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:a,extras:h,resolve:C,reject:x,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(T=>Promise.reject(T))}setBrowserUrl(a,c){const u=this.urlSerializer.serialize(a),h=Object.assign(Object.assign({},c.extras.state),this.generateNgRouterState(c.id,c.targetPageId));this.location.isCurrentPathEqualTo(u)||c.extras.replaceUrl?this.location.replaceState(u,"",h):this.location.go(u,"",h)}restoreHistory(a,c=!1){var u,h;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-a.targetPageId;"popstate"!==a.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)||0===d?this.currentUrlTree===(null===(h=this.currentNavigation)||void 0===h?void 0:h.finalUrl)&&0===d&&(this.resetState(a),this.browserUrlTree=a.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(c&&this.resetState(a),this.resetUrlToCurrentUrlTree())}resetState(a){this.routerState=a.currentRouterState,this.currentUrlTree=a.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,a.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(a,c){const u=new HZ(a.id,this.serializeUrl(a.extractedUrl),c);this.triggerEvent(u),a.resolve(!1)}generateNgRouterState(a,c){return"computed"===this.canceledNavigationResolution?{navigationId:a,\u0275routerPageId:c}:{navigationId:a}}}return l.\u0275fac=function(a){P4()},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();function uO(l){return"imperative"!==l}class FX{}class NX{preload(o,a){return li(null)}}let LX=(()=>{class l{constructor(a,c,u,h){this.router=a,this.injector=u,this.preloadingStrategy=h,this.loader=new PX(u,c,p=>a.triggerEvent(new $Z(p)),p=>a.triggerEvent(new WZ(p)))}setUpPreloading(){this.subscription=this.router.events.pipe($s(a=>a instanceof px),Jv(()=>this.preload())).subscribe(()=>{})}preload(){const a=this.injector.get(qd);return this.processRoutes(a,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(a,c){const u=[];for(const h of c)if(h.loadChildren&&!h.canLoad&&h._loadedConfig){const d=h._loadedConfig;u.push(this.processRoutes(d.module,d.routes))}else h.loadChildren&&!h.canLoad?u.push(this.preloadConfig(a,h)):h.children&&u.push(this.processRoutes(a,h.children));return Po(u).pipe(fb(),fn(h=>{}))}preloadConfig(a,c){return this.preloadingStrategy.preload(c,()=>(c._loadedConfig?li(c._loadedConfig):this.loader.load(a.injector,c)).pipe(mo(h=>(c._loadedConfig=h,this.processRoutes(h.module,h.routes)))))}}return l.\u0275fac=function(a){return new(a||l)(Ae(Ps),Ae(ET),Ae(gr),Ae(FX))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),uF=(()=>{class l{constructor(a,c,u={}){this.router=a,this.viewportScroller=c,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(a=>{a instanceof GR?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=a.navigationTrigger,this.restoredId=a.restoredState?a.restoredState.navigationId:0):a instanceof px&&(this.lastId=a.id,this.scheduleScrollEvent(a,this.router.parseUrl(a.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(a=>{a instanceof GZ&&(a.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(a.position):a.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(a.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(a,c){this.router.triggerEvent(new GZ(a,"popstate"===this.lastSource?this.store[this.restoredId]:null,c))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return l.\u0275fac=function(a){P4()},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();const om=new Zn("ROUTER_CONFIGURATION"),BX=new Zn("ROUTER_FORROOT_GUARD"),OEe=[xR,{provide:tX,useClass:nX},{provide:Ps,useFactory:function AEe(l,o,a,c,u,h,d={},f,p){const g=new Ps(null,l,o,a,c,u,qZ(h));return f&&(g.urlHandlingStrategy=f),p&&(g.routeReuseStrategy=p),function IEe(l,o){l.errorHandler&&(o.errorHandler=l.errorHandler),l.malformedUriErrorHandler&&(o.malformedUriErrorHandler=l.malformedUriErrorHandler),l.onSameUrlNavigation&&(o.onSameUrlNavigation=l.onSameUrlNavigation),l.paramsInheritanceStrategy&&(o.paramsInheritanceStrategy=l.paramsInheritanceStrategy),l.relativeLinkResolution&&(o.relativeLinkResolution=l.relativeLinkResolution),l.urlUpdateStrategy&&(o.urlUpdateStrategy=l.urlUpdateStrategy),l.canceledNavigationResolution&&(o.canceledNavigationResolution=l.canceledNavigationResolution)}(d,g),d.enableTracing&&g.events.subscribe(m=>{var v,y;null===(v=console.group)||void 0===v||v.call(console,`Router Event: ${m.constructor.name}`),console.log(m.toString()),console.log(m),null===(y=console.groupEnd)||void 0===y||y.call(console)}),g},deps:[tX,xx,xR,gr,ET,aF,om,[class mEe{},new ql],[class fEe{},new ql]]},xx,{provide:ny,useFactory:function PEe(l){return l.routerState.root},deps:[Ps]},LX,NX,class TEe{preload(o,a){return a().pipe(rr(()=>li(null)))}},{provide:om,useValue:{enableTracing:!1}}];function DEe(){return new Pq("Router",Ps)}let VX=(()=>{class l{constructor(a,c){}static forRoot(a,c){return{ngModule:l,providers:[OEe,zX(a),{provide:BX,useFactory:EEe,deps:[[Ps,new ql,new Wd]]},{provide:om,useValue:c||{}},{provide:Kv,useFactory:MEe,deps:[tm,[new Eb(bR),new ql],om]},{provide:uF,useFactory:kEe,deps:[Ps,NDe,om]},{provide:FX,useExisting:c&&c.preloadingStrategy?c.preloadingStrategy:NX},{provide:Pq,multi:!0,useFactory:DEe},[hF,{provide:MT,multi:!0,useFactory:REe,deps:[hF]},{provide:UX,useFactory:FEe,deps:[hF]},{provide:Oq,multi:!0,useExisting:UX}]]}}static forChild(a){return{ngModule:l,providers:[zX(a)]}}}return l.\u0275fac=function(a){return new(a||l)(Ae(BX,8),Ae(Ps,8))},l.\u0275mod=En({type:l}),l.\u0275inj=On({}),l})();function kEe(l,o,a){return a.scrollOffset&&o.setOffset(a.scrollOffset),new uF(l,o,a)}function MEe(l,o,a={}){return a.useHash?new COe(l,o):new tZ(l,o)}function EEe(l){return"guarded"}function zX(l){return[{provide:hbe,multi:!0,useValue:l},{provide:aF,multi:!0,useValue:l}]}let hF=(()=>{class l{constructor(a){this.injector=a,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new mt}appInitializer(){return this.injector.get(_Oe,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let c=null;const u=new Promise(f=>c=f),h=this.injector.get(Ps),d=this.injector.get(om);return"disabled"===d.initialNavigation?(h.setUpLocationChangeListener(),c(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(h.hooks.afterPreactivation=()=>this.initNavigation?li(null):(this.initNavigation=!0,c(!0),this.resultOfPreactivationDone),h.initialNavigation()):c(!0),u})}bootstrapListener(a){const c=this.injector.get(om),u=this.injector.get(LX),h=this.injector.get(uF),d=this.injector.get(Ps),f=this.injector.get(lx);a===f.components[0]&&(("enabledNonBlocking"===c.initialNavigation||void 0===c.initialNavigation)&&d.initialNavigation(),u.setUpPreloading(),h.init(),d.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return l.\u0275fac=function(a){return new(a||l)(Ae(gr))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();function REe(l){return l.appInitializer.bind(l)}function FEe(l){return l.bootstrapListener.bind(l)}const UX=new Zn("Router Initializer"),HX="2.0.168",VEe=[{id:"deviskin",name:"Deviskin",nameSortOrder:"Deviskin",link:"http://deviskin.github.io"}];class Ru{constructor(o,a,c,u,h,d,f,p,g){this.id=o,this.name=a,this.routes=c,this.routeEnabled=u,this.applicationEnabled=h,this.applicationHidden=d,this.applicationLogoText=f,this.libraryType=p,this.libraryRef=g}static builder(){return new Ru("","",[],!1,!1,!1,"","prod","book")}setId(o){return this.id=o,this}setName(o){return this.name=o,this}setRoutes(o){return this.routes=o,this}setRouteEnabled(o){return this.routeEnabled=o,this}setApplicatioinEnabled(o){return this.applicationEnabled=o,this}setApplicationLogoText(o){return this.applicationLogoText=o,this}setLibraryType(o){return this.libraryType=o,this}setLibraryRef(o){return this.libraryRef=o,this}enable(o=!0){return this.routeEnabled=o,this.applicationEnabled=o,this}hide(o=!0){return this.applicationHidden=o,this}disable(){return this.routeEnabled=!1,this.applicationEnabled=!1,this}}class qn{constructor(o,a,c,u,h,d=null,f=null){this.link=o,this.name=a,this.shape=c,this.hasBadge=u,this.hasAlert=h,this.onClick=d,this.isActive=f}static builder(){return new qn("","","",!1,!1)}setIsActive(o){return this.isActive=o,this}setOnClick(o){return this.onClick=o,this}setLink(o){return this.link=o,this}setName(o){return this.name=o,this}setShape(o){return this.shape=o,this}setHasBadge(o){return this.hasBadge=o,this}setHasAlert(o){return this.hasAlert=o,this}runOnClick(){this.onClick&&this.onClick(this)}}class dF extends class zEe{constructor(){this.version="",this.applicationId="memorial",this.applicationName="Memorial",this.developers=VEe,this.production=!0,this.platform="Web",this.relativeCacheService=!0,this.serviceAPIHost="",this.redirectToServerAfterItIsReadyAdress="",this.portAutoDetection=!0,this.portAutoIncrementValue=0,this.defaultRoute="/compiler",this.coding=!0,this.showOldVersions=!0,this.themeName="blue",this.serverType="rest",this.applications=[],this.addApplication(Ru.builder().setId("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setRoutes([qn.builder().setLink("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setShape("home")]).hide()).addApplication(Ru.builder().setId("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setApplicationLogoText("D3|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([qn.builder().setLink("main-test").setName("\u041c\u043e\u043b\u0435\u0431\u0435\u043d").setShape("calendar"),qn.builder().setLink("memorials-pages-editor").setName("\u0417\u0430\u043f\u0438\u0441\u043a\u0438").setShape("event"),qn.builder().setLink("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setShape("image"),qn.builder().setLink("dynamic-components-examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0414\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442").setShape("blocks-group"),qn.builder().setLink("help").setName("\u041f\u043e\u043c\u043e\u0449\u044c").setShape("help"),qn.builder().setLink("tests").setName("\u0422\u0435\u0441\u0442\u044b").setShape("check-circle")])).addApplication(Ru.builder().setId("d3Dexamples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b 3D").setApplicationLogoText("Three.JS|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([qn.builder().setLink("d3Dexamples").setName("Three 3D").setShape("scroll")])).addApplication(Ru.builder().setId("books").setName("\u041a\u043d\u0438\u0433\u0438").setLibraryType("prod").setLibraryRef("biblia").setRoutes([qn.builder().setLink("books").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book")])).addApplication(Ru.builder().setId("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setLibraryType("mprod").setLibraryRef("ps").setRoutes([qn.builder().setLink("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("note")])).addApplication(Ru.builder().setId("calculator").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setLibraryType("cprod").setLibraryRef("calc").setApplicationLogoText("\u041c\u0410\u0422\u0410\u041d|\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setRoutes([qn.builder().setLink("calculator").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setShape("calculator")]).hide()).addApplication(Ru.builder().setId("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setLibraryType("clndrprod").setLibraryRef("clndr").setRoutes([qn.builder().setLink("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar")]).hide()).addApplication(Ru.builder().setId("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setLibraryType("compprod").setLibraryRef("comp").setApplicationLogoText("C-Js|\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setRoutes([qn.builder().setLink("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug")]).hide()).addApplication(Ru.builder().setId("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setLibraryType("schprod").setLibraryRef("sch").setRoutes([qn.builder().setLink("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock")])).setVersion("BV."+HX),this.afterConstruct()}addApplication(o){if(null!=this.applications.find(a=>a.id==o.id))throw new Error(`\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 "${o.id}" \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.`);return this.applications.push(o),this}setVersion(o){return this.version=o,this}setProduction(o){return this.production=o,this}setPlatform(o){return this.platform=o,this}setRelativeCacheService(o){return this.relativeCacheService=o,this}setServiceAPIHost(o){return this.serviceAPIHost=o,this}setRedirectToServerAfterItIsReadyAdress(o){return this.redirectToServerAfterItIsReadyAdress=o,this}setPortAutoDetection(o){return this.portAutoDetection=o,this}setPortAutoIncrementValue(o){return this.portAutoIncrementValue=o,this}setDefaultRoute(o){return this.defaultRoute=o,this}setServerType(o){return this.serverType=o,this}setCoding(o){return this.coding=o,this}setShowOldVersions(o){return this.showOldVersions=o,this}afterConstruct(){}}{afterConstruct(){super.afterConstruct(),this.setVersion("WPR."+HX).setProduction(!0).setServiceAPIHost("").setRedirectToServerAfterItIsReadyAdress("").setPortAutoDetection(!0).setPortAutoIncrementValue(0).setDefaultRoute("/help").setServerType("memory"),this.applications.forEach((o,a,c)=>o.enable("d3examples"!=o.id&&"d3Dexamples"!=o.id))}static builder(){return new dF}}const Nh=dF.builder();class ry{constructor(o,a,c,u,h,d){this.type=o,this.time=a,this.sender=c,this.target=u,this.subType=h,this.text=d}static builder(){return new ry("",Date.now(),"","","","")}setType(o){return this.type=o,this}setTime(o){return this.time=o,this}setSender(o){return this.sender=o,this}setTarget(o){return this.target=o,this}setSubType(o){return this.subType=o,this}setText(o){return this.text=o,this}}class fF{constructor(o,a){this.id=o,this.handler=a}static builder(){return new fF(-1,()=>{})}setId(o){return this.id=o,this}setHandler(o){return this.handler=o,this}}class UEe{constructor(){this.id=1,this.handlers=new Map,this.targetHandlers=new Map,this.messagesToTarget=new Map,this.messagesTimeoutMs=18e4}newId(){return this.id++}putMessage(o){let a=o.target,c=this.messagesToTarget.get(a);return null==c&&(c=[]),c.push(o),c=this.removeOld(c),c?this.messagesToTarget.set(a,c):this.messagesToTarget.delete(a),this}getMessages(o,a=!0){let c=this.messagesToTarget.get(o),u=this.removeOld(c);return null==c&&a&&this.messagesToTarget.delete(o),u}removeAllOld(){let o=[];return this.messagesToTarget.forEach((a,c,u)=>{o.push(c)}),o.forEach(a=>{this.getMessages(a,!1)}),this}removeOld(o){if(void 0===o)return;let a=Date.now(),c=o.findIndex(h=>h.time+this.messagesTimeoutMs>a),u=o;return c>0&&(u=o.splice(0,c)),u}sendMessage(o){this.handlers.forEach((c,u,h)=>{c(o)});let a=this.targetHandlers.get(o.target);a&&a.forEach(c=>{c.handler(o)})}addHandler(o){let a=this.newId();this.handlers.set(a,o);let c=this;return{unsubscribe(){c.removeHandler(a)}}}addTargetHandler(o,a){let c=this.newId(),u=this.targetHandlers.get(o);null==u&&(u=[],this.targetHandlers.set(o,u)),u.push(fF.builder().setId(c).setHandler(a));let h=this;return{unsubscribe(){h.removeTargetHandler(o,c)}}}removeAllTargetHandlers(o){return this.targetHandlers.delete(o),this}removeHandler(o){this.handlers.delete(o)}removeTargetHandler(o,a){let c=this.targetHandlers.get(o);if(c){let u=c.filter((h,d,f)=>h.id!=a);u.length?this.targetHandlers.set(o,u):this.targetHandlers.delete(o)}}}class Or{constructor(o,a,c){this.text=o,this.innerButtonText=a,this.timeout=c,this.buttonText="",this.config=null,this.update()}static of(o,a,c){return new Or(o,a,c)}setConfig(o){this.config=o}update(){return this.buttonText=this.innerButtonText+" ("+this.timeout--+"s)",this.timeout>=0}onButtonClick(){this.remove()}remove(){this.config.removeAlert(this)}}class $X{constructor(o,a,c){this.action=o,this.delayMS=a,this.delayRequest=c,this.requestedAction=!1,this.runTimer=!1,this.onDones=[]}requestAction(o){this.requestedAction=!0,this.runTimer||this.delayRequest(this.delayMS,()=>{this.checkAction()}),o&&this.onDones.push(o)}checkAction(){if(this.requestedAction)this.runTimer||(this.delayRequest(this.delayMS,()=>this.checkAction()),this.runTimer=!0);else{let o=this.onDones;this.onDones=[],this.action?this.action(o):o&&o.forEach(a=>a(!0)),this.runTimer=!1}this.requestedAction=!1}}class Tx{constructor(o,a){this.config=o,this.waitingForSenderId=a,this.enabled=!1,this.checkTimeoutMs=100}static builder(){return new Tx(null,"")}setConfig(o){return this.config=o,this}setWaitingForSenderId(o){return this.waitingForSenderId=o,this.enabled=!this.waitingForSenderId,this}setCheckTimeout(o){return this.checkTimeoutMs=o,this}checkEnabled(){if(this.enabled||!this.config)return!0;let o=this.config.messageBus.getMessages(this.waitingForSenderId);return(null==o?void 0:o.length)?this.config.post(()=>{this.enabled=!0}):this.checkLatter(),this.enabled}checkLatter(){return!(!this.enabled&&this.config)||(this.config.post(()=>this.checkEnabled(),this.checkTimeoutMs),this.enabled)}setEnabled(o){return this.enabled=o,this}}class hO{constructor(){this.cache=new Map,this.environment=Nh,this.themeName=Nh.themeName,this.serviceAPIHost=Nh.serviceAPIHost,this.redirectToServerAfterItIsReadyAdress=Nh.redirectToServerAfterItIsReadyAdress,this.portAutoDetection=Nh.portAutoDetection,this.portAutoIncrementValue=Nh.portAutoIncrementValue,this.messageBus=new UEe,this.alerts=[],this.upperMenuEnabled=!0,this.pageLoadedFrom="",this.authId="",this.authIdKey="authId",this.authBody="",this.baseHref="",this.waitingIOOperationCount=0,this.waitingIOOperationValue=0,this.waitingIOOperationValueMax=100,this.outletOnly=!1,this.autoLoginApplication=!0,this.defaultApplication="",this.defaultLoginType="login",this.showType=this.defaultLoginType,this.enableDefaultPersons=!0,this.coding=Nh.coding,this.showOldVersions=Nh.showOldVersions,"undefined"!=typeof pageLoadedFrom&&this.setPageLoadedFrom(pageLoadedFrom),this.runPortAutoDetection(),this.setupBaseHref()}isShowLogin(){return this.showType==this.defaultLoginType}isShowNormal(){return"normal"==this.showType}setShowNormal(){return this.showType="normal",this}setShowLogin(o=null){return null!=o&&(this.autoLoginApplication=o),this.showType=this.defaultLoginType,this}get version(){return this.environment.version}get developerId(){let o="";return this.environment.developers.forEach(a=>{o=o+(o?"_":"")+a.id}),o}get developerName(){let o="";return this.environment.developers.forEach(a=>{o=o+(o?", ":"")+a.name}),o}get developerNameSortOrder(){let o="";return this.environment.developers.forEach(a=>{o=o+(o?", ":"")+a.nameSortOrder}),o}get developerLink(){return this.environment.developers[0].link}setPageLoadedFrom(o,a=!1){return this.pageLoadedFrom=o,a&&this.runPortAutoDetection(),this.setupBaseHref(),this}setupBaseHref(){let o=this.pageLoadedFrom;o.endsWith("/")&&(o=o.substring(0,o.length-1)),this.baseHref=o}runPortAutoDetection(){this.portAutoDetection&&(this.serviceAPIHost=this.doPortAutoDetection(this.serviceAPIHost?this.serviceAPIHost:this.pageLoadedFrom),this.redirectToServerAfterItIsReadyAdress=this.doPortAutoDetection(this.redirectToServerAfterItIsReadyAdress))}doPortAutoDetection(o){const a=o.lastIndexOf(":");if(a<0)return o;let c="";for(let d=a+1;d<o.length&&"0123456789".indexOf(o.charAt(d))>=0;++d)c+=o.charAt(d);return isNaN(+c)?o:o.substring(0,a)+":"+(+location.port+Nh.portAutoIncrementValue)+o.substring(a+1+c.length,o.length)}addAlert(o){o.setConfig(this),this.alerts.push(o)}removeAlert(o){const a=this.alerts.findIndex((c,u,h)=>c===o);a>=0&&this.alerts.splice(a,1)}isPlatformAndroid(){return"Android"===this.environment.platform}isPlatformWeb(){return"Web"===this.environment.platform}isPlatform(o){return this.environment.platform===o}isRelativeCacheService(){return this.environment.relativeCacheService}isRestServerType(){return"rest"===this.environment.serverType}isMemoryServerType(){return"memory"===this.environment.serverType}isServerType(o){return this.environment.serverType===o}isRedTheme(){return"red"===this.themeName}isBlueTheme(){return"blue"===this.themeName}isTheme(o){return this.themeName===o}isWaitingIO(){return this.waitingIOOperationCount>0}incWaitingIO(){return this.waitingIOOperationCount++}decWaitingIO(){return this.waitingIOOperationCount--}clearWaitingIO(){this.waitingIOOperationCount=0}post(o,a=0){setTimeout(()=>{o()},a)}getApplication(){let o=null;return this.environment.applications.forEach(a=>{a.id==this.defaultApplication&&(o=a)}),o}getApplicationByNameOrNull(o){let a=null;return this.environment.applications.forEach(c=>{c.name==o&&(a=c)}),a}getSingleAppOrNull(){let o=null,a=this.environment.applications.filter(c=>c.applicationEnabled&&!c.applicationHidden);return 1==a.length&&(o=a[0]),o}}const WX=class HEe{static isWebGLAvailable(){try{const o=document.createElement("canvas");return!(!window.WebGLRenderingContext||!o.getContext("webgl")&&!o.getContext("experimental-webgl"))}catch(o){return!1}}static isWebGL2Available(){try{const o=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!o.getContext("webgl2"))}catch(o){return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(o){const c={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let u='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const h=document.createElement("div");return h.id="webglmessage",h.style.fontFamily="monospace",h.style.fontSize="13px",h.style.fontWeight="normal",h.style.textAlign="center",h.style.background="#fff",h.style.color="#000",h.style.padding="1.5em",h.style.width="400px",h.style.margin="5em auto 0",u=u.replace("$0",c[o]?"graphics card":"browser"),u=u.replace("$1",{1:"WebGL",2:"WebGL 2"}[o]),h.innerHTML=u,h}};let pF=(()=>{class l{getStorage(a){try{return localStorage.getItem(a)}catch(u){}return""}setStorage(a,c){try{localStorage.setItem(a,c)}catch(u){}}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),an=(()=>{class l extends hO{constructor(a){super(),this.localStorageSvc=a,this.loginTypeLSName="login3d",this.login3dValue="3d",this.setDefaultLoginType(this.isLogin3dRequested()),this.showType=this.defaultLoginType}setDefaultLoginType(a){this.defaultLoginType=WX.isWebGLAvailable()&&a?"login3d":"login"}requestLogin3d(a){this.setDefaultLoginType(a),this.localStorageSvc.setStorage(this.loginTypeLSName,WX.isWebGLAvailable()&&a?this.login3dValue:"no")}isLogin3dRequested(){return!this.localStorageSvc.getStorage(this.loginTypeLSName)||this.localStorageSvc.getStorage(this.loginTypeLSName)==this.login3dValue}}return l.\u0275fac=function(a){return new(a||l)(Ae(pF))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class $Ee{constructor(o,a){this.fn=o,this.subscriptions=a}unsubscribe(){const o=this.subscriptions.indexOf(this);-1!==o&&this.subscriptions.splice(o,1)}}function GX(l,o){switch(l){case 0:return function(){return o.apply(this,arguments)};case 1:return function(a){return o.apply(this,arguments)};case 2:return function(a,c){return o.apply(this,arguments)};case 3:return function(a,c,u){return o.apply(this,arguments)};case 4:return function(a,c,u,h){return o.apply(this,arguments)};case 5:return function(a,c,u,h,d){return o.apply(this,arguments)};case 6:return function(a,c,u,h,d,f){return o.apply(this,arguments)};case 7:return function(a,c,u,h,d,f,p){return o.apply(this,arguments)};case 8:return function(a,c,u,h,d,f,p,g){return o.apply(this,arguments)};case 9:return function(a,c,u,h,d,f,p,g,m){return o.apply(this,arguments)};case 10:return function(a,c,u,h,d,f,p,g,m,v){return o.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function up(l){return null!=l&&"object"==typeof l&&!0===l["@@functional/placeholder"]}function Lh(l){return function o(a){return 0===arguments.length||up(a)?o:l.apply(this,arguments)}}function sy(l){return function o(a,c){switch(arguments.length){case 0:return o;case 1:return up(a)?o:Lh(function(u){return l(a,u)});default:return up(a)&&up(c)?o:up(a)?Lh(function(u){return l(u,c)}):up(c)?Lh(function(u){return l(a,u)}):l(a,c)}}}function QX(l,o,a){return function(){for(var c=[],u=0,h=l,d=0;d<o.length||u<arguments.length;){var f;d<o.length&&(!up(o[d])||u>=arguments.length)?f=o[d]:(f=arguments[u],u+=1),c[d]=f,up(f)||(h-=1),d+=1}return h<=0?a.apply(this,c):GX(h,QX(l,c,a))}}const jX=sy(function(o,a){return 1===o?Lh(a):GX(o,QX(o,[],a))}),oy=Lh(function(o){return null==o}),jEe=Number.isInteger||function(o){return o<<0===o};function qX(l){return"[object String]"===Object.prototype.toString.call(l)}const ZEe=sy(function(o,a){var c=o<0?a.length+o:o;return qX(a)?a.charAt(c):a[c]}),YEe=sy(function(o,a){return o.map(function(c){for(var d,u=a,h=0;h<c.length;){if(null==u)return;u=jEe(d=c[h])?ZEe(d,u):u[d],h+=1}return u})}),JEe=sy(function(o,a){return YEe([o],a)[0]}),tAe=jX(2,(l,o)=>void 0!==JEe(l,o)),ZX=tAe({"@@functional/placeholder":!0},window);function XX(l=window){return!oy(l)}let dO,YX,gF,mF;function KX(l=!0){if(!l||!dO){const o=document&&document.querySelector("[ng-version]");dO=o?""+o.getAttribute("ng-version"):void 0}return dO}function iAe(l=!0){var o,a,c;return l&&dO||(YX=null===(c=null===(a=null===(o=window)||void 0===o?void 0:o.angular)||void 0===a?void 0:a.version)||void 0===c?void 0:c.full),YX}function JX(l=!0){var o,a,c;return l&&gF||(gF=(null===(c=null===(a=null===(o=window)||void 0===o?void 0:o.CDS)||void 0===a?void 0:a._react)||void 0===c?void 0:c.version)?window.CDS._react.version:document.querySelector("[data-reactroot], [data-reactid]")?"unknown version":void 0),gF}function eY(l=!0){if(!l||!mF){const o=document.querySelectorAll("*");let a;for(let c=0;c<o.length;c++)if(o[c].__vue__){a=o[c];break}mF=a?"unknown version":void 0}return mF}function am(l){return l.replace(/[A-Z]/g,o=>"-"+o.toLowerCase())}function iY(l){return l.charAt(0).toUpperCase()+l.slice(1)}const sY=new class{constructor(){if(this.supports={js:!0,flexGap:lAe()},!document.body.hasAttribute("cds-supports")||"no-js"===document.body.getAttribute("cds-supports")){const l=am(Object.keys(this.supports).reduce((o,a)=>`${o} ${this.supports[a]?a:"no-"+a}`,"")).trim();document.body.setAttribute("cds-supports",l)}}};function lAe(){const l=document.createElement("div");l.style.display="flex",l.style.flexDirection="column",l.style.rowGap="1px",l.appendChild(document.createElement("div")),l.appendChild(document.createElement("div")),document.body.appendChild(l);const o=1===l.scrollHeight;return l.parentNode.removeChild(l),o}class Ox{static log(...o){_F()&&yF()&&console.log(...o)}static warn(...o){_F()&&yF()&&console.warn(...o)}static error(...o){_F()&&yF()&&console.error(...o)}}function yF(){return!ZX(["jasmine"])}function _F(){return!window.CDS.environment.production}function oY(){XX()&&(window.CDS=window.CDS||{_version:[],_react:{version:void 0},_supports:sY.supports,_isStateProxied:!1,_state:{focusTrapItems:[],i18nRegistry:{},elementRegistry:{},iconRegistry:{},motionRegistry:{}},environment:{production:!1},getDetails:aY,logDetails:cAe},function(){var l;const o="5.6.2";window.CDS._version.indexOf(o)<0&&(window.CDS._version.push(o),null===(l=document.querySelector("body"))||void 0===l||l.setAttribute("cds-version",window.CDS._version.join(" "))),window.CDS._version.length>1&&Ox.warn("Running more than one version of Clarity can cause unexpected issues. Please ensure only one version is loaded.")}(),window.CDS._isStateProxied||(window.CDS._isStateProxied=!0,window.CDS._state=new Proxy(window.CDS._state,{set:(l,o,a)=>{const c={key:o,prev:window.CDS._state[o],current:a};return l[o]=a,document.dispatchEvent(new CustomEvent("CDS_STATE_UPDATE",{detail:c})),!0}})))}function aY(){return{versions:window.CDS._version,environment:window.CDS.environment,userAgent:navigator.userAgent,supports:window.CDS._supports,angularVersion:KX(!1),angularJSVersion:iAe(!1),reactVersion:JX(!1),vueVersion:eY(!1),state:C2(Pa({},window.CDS._state),{iconRegistry:Object.keys(window.CDS._state.iconRegistry),motionRegistry:Object.keys(window.CDS._state.motionRegistry),focusTrapRegistry:Object.keys(window.CDS._state.focusTrapItems.map(l=>l.focusTrapId))})}}function cAe(){Ox.log(JSON.stringify(aY(),null,2))}const bF=new class WEe{constructor(){this.subscriptions=[]}subscribe(o){const a=new $Ee(o,this.subscriptions);return this.subscriptions.push(a),a}emit(o){this.subscriptions.forEach(a=>a.fn(o))}toEventObservable(){return this}};bF.listener=document.addEventListener("CDS_STATE_UPDATE",l=>bF.emit(l.detail));class Fu{static get state(){return oY(),window.CDS._state}static getValue(o){return Fu.state[o]}static setValue(o,a){Fu.state[o]=a}static log(){Ox.log(JSON.stringify(Fu.state,null,2))}}Fu.stateUpdates=bF.toEventObservable();const uAe=["unknown",{outline:'<circle class="cds-internal-dot-3" cx="31.1" cy="18" r="2.9"/><circle class="cds-internal-dot-2" cx="18" cy="18" r="2.9"/><circle class="cds-internal-dot-1" cx="4.9" cy="18" r="2.9"/>'}];class cr{static get registry(){return Pa({unknown:uAe[1]},Fu.state.iconRegistry)}static addIcons(...o){Fu.state.iconRegistry=Pa(Pa({},Fu.state.iconRegistry),Object.fromEntries(o.filter(([a])=>!cr.registry[a])))}static addAliases(...o){const a=o.filter(([c])=>cr.registry[c]).flatMap(([c,u])=>u.map(h=>[h,cr.registry[c]]));Fu.state.iconRegistry=Pa(Pa({},Fu.state.iconRegistry),Object.fromEntries(a))}static getIconNameFromShape(o){return o[0]}}const lY=["ellipsis-horizontal",{outline:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>',outlineBadged:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>'}],Yl=["exclamation-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M18,20.07a1.3,1.3,0,0,1-1.3-1.3v-6a1.3,1.3,0,1,1,2.6,0v6A1.3,1.3,0,0,1,18,20.07Z"/><circle cx="17.95" cy="23.02" r="1.5"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-1.49,6a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,25.5a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,25.5Z"/>'}],Kl=["check-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M16.34,23.74l-5-5a1,1,0,0,1,1.41-1.41l3.59,3.59,6.78-6.78a1,1,0,0,1,1.41,1.41Z"/>',solid:'<path d="M30,18A12,12,0,1,1,18,6,12,12,0,0,1,30,18Zm-4.77-2.16a1.4,1.4,0,0,0-2-2l-6.77,6.77L13,17.16a1.4,1.4,0,0,0-2,2l5.45,5.45Z"/>'}],ay=["angle",{outline:'<path d="M29.52,22.52,18,10.6,6.48,22.52a1.7,1.7,0,0,0,2.45,2.36L18,15.49l9.08,9.39a1.7,1.7,0,0,0,2.45-2.36Z"/>'}],hAe=["event",{outline:'<path d="M16.17,25.86,10.81,20.5a1,1,0,0,1,1.41-1.41L16.17,23l8.64-8.64a1,1,0,0,1,1.41,1.41Z"/><path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0,.23-.41H23.8L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/><path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',outlineBadged:'<path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0-1.41-1.41L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><path d="M32.25,6h-4V9a2.2,2.2,0,0,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM25.94,16.58l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>',solidAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M33.68,15.4H26.3a1.34,1.34,0,0,1-.36,1.18l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38,7-7h-1A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5Zm-4.06,3.08-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>'}],dAe=["calendar",{outline:'<path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect" x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/>',outlineBadged:'<path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M32.25,6h-4V9a2.2,2.2,0,1,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/>',solidAlerted:'<path d="M33.68,15.4H22.23A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm6,5H26V24h2Zm0-5H26V19h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/>'}],fAe=["eye-hide",{outline:'<path d="M25.19,20.4A6.78,6.78,0,0,0,25.62,18a6.86,6.86,0,0,0-6.86-6.86,6.79,6.79,0,0,0-2.37.43L18,13.23a4.78,4.78,0,0,1,.74-.06A4.87,4.87,0,0,1,23.62,18a4.79,4.79,0,0,1-.06.74Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm9.75,9.75,6.65,6.65a4.81,4.81,0,0,1-2.5.72A4.87,4.87,0,0,1,13.9,18,4.81,4.81,0,0,1,14.62,15.53Zm-1.45-1.45a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>',solid:'<path d="M18.37,11.17A6.79,6.79,0,0,0,16,11.6l8.8,8.8A6.78,6.78,0,0,0,25.23,18,6.86,6.86,0,0,0,18.37,11.17Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm8.3,8.3a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>'}],pAe=["eye",{outline:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><path d="M18.09,11.17A6.86,6.86,0,1,0,25,18,6.86,6.86,0,0,0,18.09,11.17Zm0,11.72A4.86,4.86,0,1,1,23,18,4.87,4.87,0,0,1,18.09,22.89Z"/>',solid:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><circle cx="18.09" cy="18.03" r="6.86"/>'}],Dx=["window-close",{outline:'<path d="M19.41,18l7.29-7.29a1,1,0,0,0-1.41-1.41L18,16.59,10.71,9.29a1,1,0,0,0-1.41,1.41L16.59,18,9.29,25.29a1,1,0,1,0,1.41,1.41L18,19.41l7.29,7.29a1,1,0,0,0,1.41-1.41Z"/>'}],gAe=["ellipsis-vertical",{outline:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>',outlineBadged:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>'}],mAe=["view-columns",{outline:'<path d="M31,5H5A2,2,0,0,0,3,7V29a2,2,0,0,0,2,2H31a2,2,0,0,0,2-2V7A2,2,0,0,0,31,5ZM13,29H5V7h8Zm10,0H15V7h8Z"/>'}],vAe=["arrow",{outline:'<path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"/>'}],yAe=["times",{outline:'<path d="M19.41,18l8.29-8.29a1,1,0,0,0-1.41-1.41L18,16.59,9.71,8.29A1,1,0,0,0,8.29,9.71L16.59,18,8.29,26.29a1,1,0,1,0,1.41,1.41L18,19.41l8.29,8.29a1,1,0,0,0,1.41-1.41Z"/>'}],_Ae=["step-forward-2",{outline:'<path d="M7.08,6.52a1.68,1.68,0,0,0,0,2.4L16.51,18,7.12,27.08a1.7,1.7,0,0,0,2.36,2.44h0L21.4,18,9.48,6.47A1.69,1.69,0,0,0,7.08,6.52Z"/><path d="M26.49,5a1.7,1.7,0,0,0-1.7,1.7V29.3a1.7,1.7,0,0,0,3.4,0V6.7A1.7,1.7,0,0,0,26.49,5Z"/>'}],cY=["angle-double",{outline:'<path d="M29,19.41a1,1,0,0,1-.71-.29L18,8.83,7.71,19.12a1,1,0,0,1-1.41-1.41L18,6,29.71,17.71A1,1,0,0,1,29,19.41Z"/><path d="M29,30.41a1,1,0,0,1-.71-.29L18,19.83,7.71,30.12a1,1,0,0,1-1.41-1.41L18,17,29.71,28.71A1,1,0,0,1,29,30.41Z"/>'}],bAe=["filter-grid-circle",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/><path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],xAe=["filter-grid",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/>',solid:'<path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],uY=["info-circle",{outline:'<circle cx="17.93" cy="11.9" r="1.4"/><path d="M21,23H19V15H16a1,1,0,0,0,0,2h1v6H15a1,1,0,1,0,0,2h6a1,1,0,0,0,0-2Z"/><path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-2,5.15a2,2,0,1,1,2,2A2,2,0,0,1,15.9,11.15ZM23,24a1,1,0,0,1-1,1H15a1,1,0,1,1,0-2h2V17H16a1,1,0,0,1,0-2h4v8h2A1,1,0,0,1,23,24Z"/>'}],CAe=["exclamation-triangle",{outline:'<path d="M18,21.32a1.3,1.3,0,0,0,1.3-1.3V14a1.3,1.3,0,1,0-2.6,0v6A1.3,1.3,0,0,0,18,21.32Z"/><circle cx="17.95" cy="24.27" r="1.5"/><path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43Zm-1.78,1.94a1,1,0,0,1-.86.49H8.21a1,1,0,0,1-.88-1.48L17.07,8.55a1,1,0,0,1,1.76,0l9.74,17.94A1,1,0,0,1,28.55,27.48Z"/>',solid:'<path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43ZM16.46,12.74a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,26.25a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,26.25Z"/>'}],hY=["error-standard",{outline:'<circle cx="18" cy="26.06" r="1.33"/><path d="M18,22.61a1,1,0,0,1-1-1v-12a1,1,0,1,1,2,0v12A1,1,0,0,1,18,22.61Z"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,2.1a16,16,0,1,0,16,16A16,16,0,0,0,18,2.1ZM16.6,8.8a1.4,1.4,0,0,1,2.8,0v12a1.4,1.4,0,0,1-2.8,0ZM18,28.6a1.8,1.8,0,1,1,1.8-1.8A1.8,1.8,0,0,1,18,28.6Z"/>'}],SAe=["circle",{outline:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34Z"/>'}],wAe=["dot-circle",{outline:'<path d="M18,11a7,7,0,1,1-7,7,7,7,0,0,1,7-7"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>'}],TAe=["success-standard",{outline:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M28,12.1a1,1,0,0,0-1.41,0L15.49,23.15l-6-6A1,1,0,0,0,8,18.53L15.49,26,28,13.52A1,1,0,0,0,28,12.1Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2ZM28.45,12.63,15.31,25.76,7.55,18a1.4,1.4,0,0,1,2-2l5.78,5.78L26.47,10.65a1.4,1.4,0,1,1,2,2Z"/>'}];class OAe extends Pe{constructor(o,a){super()}schedule(o,a=0){return this}}const fO={setInterval(...l){const{delegate:o}=fO;return((null==o?void 0:o.setInterval)||setInterval)(...l)},clearInterval(l){const{delegate:o}=fO;return((null==o?void 0:o.clearInterval)||clearInterval)(l)},delegate:void 0},xF={now:()=>(xF.delegate||Date).now(),delegate:void 0};class kx{constructor(o,a=kx.now){this.schedulerActionCtor=o,this.now=a}schedule(o,a=0,c){return new this.schedulerActionCtor(this,o).schedule(c,a)}}kx.now=xF.now,new class kAe extends kx{constructor(o,a=kx.now){super(o,a),this.actions=[],this._active=!1,this._scheduled=void 0}flush(o){const{actions:a}=this;if(this._active)return void a.push(o);let c;this._active=!0;do{if(c=o.execute(o.state,o.delay))break}while(o=a.shift());if(this._active=!1,c){for(;o=a.shift();)o.unsubscribe();throw c}}}(class DAe extends OAe{constructor(o,a){super(o,a),this.scheduler=o,this.work=a,this.pending=!1}schedule(o,a=0){if(this.closed)return this;this.state=o;const c=this.id,u=this.scheduler;return null!=c&&(this.id=this.recycleAsyncId(u,c,a)),this.pending=!0,this.delay=a,this.id=this.id||this.requestAsyncId(u,this.id,a),this}requestAsyncId(o,a,c=0){return fO.setInterval(o.flush.bind(o,this),c)}recycleAsyncId(o,a,c=0){if(null!=c&&this.delay===c&&!1===this.pending)return a;fO.clearInterval(a)}execute(o,a){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const c=this._execute(o,a);if(c)return c;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(o,a){let u,c=!1;try{this.work(o)}catch(h){c=!0,u=h||new Error("Scheduled action threw falsy error")}if(c)return this.unsubscribe(),u}unsubscribe(){if(!this.closed){const{id:o,scheduler:a}=this,{actions:c}=a;this.work=this.state=this.scheduler=null,this.pending=!1,ye(c,this),null!=o&&(this.id=this.recycleAsyncId(a,o,null)),this.delay=null,super.unsubscribe()}}});class SF extends mt{constructor(o=1/0,a=1/0,c=xF){super(),this._bufferSize=o,this._windowTime=a,this._timestampProvider=c,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=a===1/0,this._bufferSize=Math.max(1,o),this._windowTime=Math.max(1,a)}next(o){const{isStopped:a,_buffer:c,_infiniteTimeWindow:u,_timestampProvider:h,_windowTime:d}=this;a||(c.push(o),!u&&c.push(h.now()+d)),this._trimBuffer(),super.next(o)}_subscribe(o){this._throwIfClosed(),this._trimBuffer();const a=this._innerSubscribe(o),{_infiniteTimeWindow:c,_buffer:u}=this,h=u.slice();for(let d=0;d<h.length&&!o.closed;d+=c?1:2)o.next(h[d]);return this._checkFinalizedStatuses(o),a}_trimBuffer(){const{_bufferSize:o,_timestampProvider:a,_buffer:c,_infiniteTimeWindow:u}=this,h=(u?1:2)*o;if(o<1/0&&h<c.length&&c.splice(0,c.length-h),!u){const d=a.now();let f=0;for(let p=1;p<c.length&&c[p]<=d;p+=2)f=p;f&&c.splice(0,f+1)}}}class pY{}const Jd="*";function Jl(l,o){return{type:7,name:l,definitions:o,options:{}}}function Zo(l,o=null){return{type:4,styles:o,timings:l}}function gY(l,o=null){return{type:2,steps:l,options:o}}function Bi(l){return{type:6,styles:l,offset:null}}function zAe(l){return{type:5,steps:l}}function io(l,o,a=null){return{type:1,expr:l,animation:o,options:a}}function mY(l){Promise.resolve(null).then(l)}class ly{constructor(o=0,a=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=o+a}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(o=>o()),this._onDoneFns=[])}onStart(o){this._onStartFns.push(o)}onDone(o){this._onDoneFns.push(o)}onDestroy(o){this._onDestroyFns.push(o)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){mY(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(o=>o()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(o=>o()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(o){this._position=this.totalTime?o*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(o){const a="start"==o?this._onStartFns:this._onDoneFns;a.forEach(c=>c()),a.length=0}}class vY{constructor(o){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=o;let a=0,c=0,u=0;const h=this.players.length;0==h?mY(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++a==h&&this._onFinish()}),d.onDestroy(()=>{++c==h&&this._onDestroy()}),d.onStart(()=>{++u==h&&this._onStart()})}),this.totalTime=this.players.reduce((d,f)=>Math.max(d,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(o=>o()),this._onDoneFns=[])}init(){this.players.forEach(o=>o.init())}onStart(o){this._onStartFns.push(o)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(o=>o()),this._onStartFns=[])}onDone(o){this._onDoneFns.push(o)}onDestroy(o){this._onDestroyFns.push(o)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(o=>o.play())}pause(){this.players.forEach(o=>o.pause())}restart(){this.players.forEach(o=>o.restart())}finish(){this._onFinish(),this.players.forEach(o=>o.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(o=>o.destroy()),this._onDestroyFns.forEach(o=>o()),this._onDestroyFns=[])}reset(){this.players.forEach(o=>o.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(o){const a=o*this.totalTime;this.players.forEach(c=>{const u=c.totalTime?Math.min(1,a/c.totalTime):1;c.setPosition(u)})}getPosition(){const o=this.players.reduce((a,c)=>null===a||c.totalTime>a.totalTime?c:a,null);return null!=o?o.getPosition():0}beforeDestroy(){this.players.forEach(o=>{o.beforeDestroy&&o.beforeDestroy()})}triggerCallback(o){const a="start"==o?this._onStartFns:this._onDoneFns;a.forEach(c=>c()),a.length=0}}let yY=(()=>{class l{constructor(a,c){this._renderer=a,this._elementRef=c,this.onChange=u=>{},this.onTouched=()=>{}}setProperty(a,c){this._renderer.setProperty(this._elementRef.nativeElement,a,c)}registerOnTouched(a){this.onTouched=a}registerOnChange(a){this.onChange=a}setDisabledState(a){this.setProperty("disabled",a)}}return l.\u0275fac=function(a){return new(a||l)(L(yi),L(Sn))},l.\u0275dir=vt({type:l}),l})(),lm=(()=>{class l extends yY{}return l.\u0275fac=function(){let o;return function(c){return(o||(o=fs(l)))(c||l)}}(),l.\u0275dir=vt({type:l,features:[pn]}),l})();const Bh=new Zn("NgValueAccessor"),HAe={provide:Bh,useExisting:Vr(()=>Vh),multi:!0};let Vh=(()=>{class l extends lm{writeValue(a){this.setProperty("checked",a)}}return l.\u0275fac=function(){let o;return function(c){return(o||(o=fs(l)))(c||l)}}(),l.\u0275dir=vt({type:l,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(a,c){1&a&&ee("change",function(h){return c.onChange(h.target.checked)})("blur",function(){return c.onTouched()})},features:[dn([HAe]),pn]}),l})();const $Ae={provide:Bh,useExisting:Vr(()=>Sl),multi:!0},GAe=new Zn("CompositionEventMode");let Sl=(()=>{class l extends yY{constructor(a,c,u){super(a,c),this._compositionMode=u,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function WAe(){const l=Ih()?Ih().getUserAgent():"";return/android (\d+)/.test(l.toLowerCase())}())}writeValue(a){this.setProperty("value",null==a?"":a)}_handleInput(a){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(a)}_compositionStart(){this._composing=!0}_compositionEnd(a){this._composing=!1,this._compositionMode&&this.onChange(a)}}return l.\u0275fac=function(a){return new(a||l)(L(yi),L(Sn),L(GAe,8))},l.\u0275dir=vt({type:l,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(a,c){1&a&&ee("input",function(h){return c._handleInput(h.target.value)})("blur",function(){return c.onTouched()})("compositionstart",function(){return c._compositionStart()})("compositionend",function(h){return c._compositionEnd(h.target.value)})},features:[dn([$Ae]),pn]}),l})();const fa=new Zn("NgValidators"),dp=new Zn("NgAsyncValidators");function CY(l){return function hp(l){return null==l||0===l.length}(l.value)?{required:!0}:null}function SY(l){return!0===l.value?null:{required:!0}}function Mx(l){return null}function kY(l){return null!=l}function MY(l){const o=Qb(l)?Po(l):l;return F4(o),o}function EY(l){let o={};return l.forEach(a=>{o=null!=a?Object.assign(Object.assign({},o),a):o}),0===Object.keys(o).length?null:o}function AY(l,o){return o.map(a=>a(l))}function IY(l){return l.map(o=>function jAe(l){return!l.validate}(o)?o:a=>o.validate(a))}function TF(l){return null!=l?function PY(l){if(!l)return null;const o=l.filter(kY);return 0==o.length?null:function(a){return EY(AY(a,o))}}(IY(l)):null}function OF(l){return null!=l?function RY(l){if(!l)return null;const o=l.filter(kY);return 0==o.length?null:function(a){return function UAe(...l){const o=_$(l),{args:a,keys:c}=PZ(l),u=new xn(h=>{const{length:d}=a;if(!d)return void h.complete();const f=new Array(d);let p=d,g=d;for(let m=0;m<d;m++){let v=!1;bu(a[m]).subscribe(new Hi(h,y=>{v||(v=!0,g--),f[m]=y},()=>p--,void 0,()=>{(!p||!v)&&(g||h.next(c?RZ(c,f):f),h.complete())}))}});return o?u.pipe(HR(o)):u}(AY(a,o).map(MY)).pipe(fn(EY))}}(IY(l)):null}function FY(l,o){return null===l?[o]:Array.isArray(l)?[...l,o]:[l,o]}function DF(l){return l?Array.isArray(l)?l:[l]:[]}function mO(l,o){return Array.isArray(l)?l.includes(o):l===o}function BY(l,o){const a=DF(o);return DF(l).forEach(u=>{mO(a,u)||a.push(u)}),a}function VY(l,o){return DF(o).filter(a=>!mO(l,a))}class zY{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(o){this._rawValidators=o||[],this._composedValidatorFn=TF(this._rawValidators)}_setAsyncValidators(o){this._rawAsyncValidators=o||[],this._composedAsyncValidatorFn=OF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(o){this._onDestroyCallbacks.push(o)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(o=>o()),this._onDestroyCallbacks=[]}reset(o){this.control&&this.control.reset(o)}hasError(o,a){return!!this.control&&this.control.hasError(o,a)}getError(o,a){return this.control?this.control.getError(o,a):null}}class wl extends zY{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ha extends zY{get formDirective(){return null}get path(){return null}}class UY{constructor(o){this._cd=o}is(o){var a,c,u;return"submitted"===o?!!(null===(a=this._cd)||void 0===a?void 0:a.submitted):!!(null===(u=null===(c=this._cd)||void 0===c?void 0:c.control)||void 0===u?void 0:u[o])}}let No=(()=>{class l extends UY{constructor(a){super(a)}}return l.\u0275fac=function(a){return new(a||l)(L(wl,2))},l.\u0275dir=vt({type:l,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(a,c){2&a&&Et("ng-untouched",c.is("untouched"))("ng-touched",c.is("touched"))("ng-pristine",c.is("pristine"))("ng-dirty",c.is("dirty"))("ng-valid",c.is("valid"))("ng-invalid",c.is("invalid"))("ng-pending",c.is("pending"))},features:[pn]}),l})(),cy=(()=>{class l extends UY{constructor(a){super(a)}}return l.\u0275fac=function(a){return new(a||l)(L(Ha,10))},l.\u0275dir=vt({type:l,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(a,c){2&a&&Et("ng-untouched",c.is("untouched"))("ng-touched",c.is("touched"))("ng-pristine",c.is("pristine"))("ng-dirty",c.is("dirty"))("ng-valid",c.is("valid"))("ng-invalid",c.is("invalid"))("ng-pending",c.is("pending"))("ng-submitted",c.is("submitted"))},features:[pn]}),l})();function Ex(l,o){EF(l,o),o.valueAccessor.writeValue(l.value),function tIe(l,o){o.valueAccessor.registerOnChange(a=>{l._pendingValue=a,l._pendingChange=!0,l._pendingDirty=!0,"change"===l.updateOn&&$Y(l,o)})}(l,o),function iIe(l,o){const a=(c,u)=>{o.valueAccessor.writeValue(c),u&&o.viewToModelUpdate(c)};l.registerOnChange(a),o._registerOnDestroy(()=>{l._unregisterOnChange(a)})}(l,o),function nIe(l,o){o.valueAccessor.registerOnTouched(()=>{l._pendingTouched=!0,"blur"===l.updateOn&&l._pendingChange&&$Y(l,o),"submit"!==l.updateOn&&l.markAsTouched()})}(l,o),function eIe(l,o){if(o.valueAccessor.setDisabledState){const a=c=>{o.valueAccessor.setDisabledState(c)};l.registerOnDisabledChange(a),o._registerOnDestroy(()=>{l._unregisterOnDisabledChange(a)})}}(l,o)}function bO(l,o){l.forEach(a=>{a.registerOnValidatorChange&&a.registerOnValidatorChange(o)})}function EF(l,o){const a=function NY(l){return l._rawValidators}(l);null!==o.validator?l.setValidators(FY(a,o.validator)):"function"==typeof a&&l.setValidators([a]);const c=function LY(l){return l._rawAsyncValidators}(l);null!==o.asyncValidator?l.setAsyncValidators(FY(c,o.asyncValidator)):"function"==typeof c&&l.setAsyncValidators([c]);const u=()=>l.updateValueAndValidity();bO(o._rawValidators,u),bO(o._rawAsyncValidators,u)}function $Y(l,o){l._pendingDirty&&l.markAsDirty(),l.setValue(l._pendingValue,{emitModelToViewChange:!1}),o.viewToModelUpdate(l._pendingValue),l._pendingChange=!1}function CO(l,o){const a=l.indexOf(o);a>-1&&l.splice(a,1)}const Ax="VALID",SO="INVALID",uy="PENDING",Ix="DISABLED";function RF(l){return(wO(l)?l.validators:l)||null}function QY(l){return Array.isArray(l)?TF(l):l||null}function FF(l,o){return(wO(o)?o.asyncValidators:l)||null}function jY(l){return Array.isArray(l)?OF(l):l||null}function wO(l){return null!=l&&!Array.isArray(l)&&"object"==typeof l}const NF=l=>l instanceof TO;function ZY(l){return(l=>l instanceof BF)(l)?l.value:l.getRawValue()}function XY(l,o){const a=NF(l),c=l.controls;if(!(a?Object.keys(c):c).length)throw new nr(1e3,"");if(!c[o])throw new nr(1001,"")}function YY(l,o){NF(l),l._forEachChild((c,u)=>{if(void 0===o[u])throw new nr(1002,"")})}class LF{constructor(o,a){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=o,this._rawAsyncValidators=a,this._composedValidatorFn=QY(this._rawValidators),this._composedAsyncValidatorFn=jY(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(o){this._rawValidators=this._composedValidatorFn=o}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(o){this._rawAsyncValidators=this._composedAsyncValidatorFn=o}get parent(){return this._parent}get valid(){return this.status===Ax}get invalid(){return this.status===SO}get pending(){return this.status==uy}get disabled(){return this.status===Ix}get enabled(){return this.status!==Ix}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(o){this._rawValidators=o,this._composedValidatorFn=QY(o)}setAsyncValidators(o){this._rawAsyncValidators=o,this._composedAsyncValidatorFn=jY(o)}addValidators(o){this.setValidators(BY(o,this._rawValidators))}addAsyncValidators(o){this.setAsyncValidators(BY(o,this._rawAsyncValidators))}removeValidators(o){this.setValidators(VY(o,this._rawValidators))}removeAsyncValidators(o){this.setAsyncValidators(VY(o,this._rawAsyncValidators))}hasValidator(o){return mO(this._rawValidators,o)}hasAsyncValidator(o){return mO(this._rawAsyncValidators,o)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(o={}){this.touched=!0,this._parent&&!o.onlySelf&&this._parent.markAsTouched(o)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(o=>o.markAllAsTouched())}markAsUntouched(o={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(a=>{a.markAsUntouched({onlySelf:!0})}),this._parent&&!o.onlySelf&&this._parent._updateTouched(o)}markAsDirty(o={}){this.pristine=!1,this._parent&&!o.onlySelf&&this._parent.markAsDirty(o)}markAsPristine(o={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(a=>{a.markAsPristine({onlySelf:!0})}),this._parent&&!o.onlySelf&&this._parent._updatePristine(o)}markAsPending(o={}){this.status=uy,!1!==o.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!o.onlySelf&&this._parent.markAsPending(o)}disable(o={}){const a=this._parentMarkedDirty(o.onlySelf);this.status=Ix,this.errors=null,this._forEachChild(c=>{c.disable(Object.assign(Object.assign({},o),{onlySelf:!0}))}),this._updateValue(),!1!==o.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},o),{skipPristineCheck:a})),this._onDisabledChange.forEach(c=>c(!0))}enable(o={}){const a=this._parentMarkedDirty(o.onlySelf);this.status=Ax,this._forEachChild(c=>{c.enable(Object.assign(Object.assign({},o),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:o.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},o),{skipPristineCheck:a})),this._onDisabledChange.forEach(c=>c(!1))}_updateAncestors(o){this._parent&&!o.onlySelf&&(this._parent.updateValueAndValidity(o),o.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(o){this._parent=o}updateValueAndValidity(o={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ax||this.status===uy)&&this._runAsyncValidator(o.emitEvent)),!1!==o.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!o.onlySelf&&this._parent.updateValueAndValidity(o)}_updateTreeValidity(o={emitEvent:!0}){this._forEachChild(a=>a._updateTreeValidity(o)),this.updateValueAndValidity({onlySelf:!0,emitEvent:o.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ix:Ax}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(o){if(this.asyncValidator){this.status=uy,this._hasOwnPendingAsyncValidator=!0;const a=MY(this.asyncValidator(this));this._asyncValidationSubscription=a.subscribe(c=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(c,{emitEvent:o})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(o,a={}){this.errors=o,this._updateControlsErrors(!1!==a.emitEvent)}get(o){return function aIe(l,o,a){if(null==o||(Array.isArray(o)||(o=o.split(a)),Array.isArray(o)&&0===o.length))return null;let c=l;return o.forEach(u=>{c=NF(c)?c.controls.hasOwnProperty(u)?c.controls[u]:null:(l=>l instanceof cIe)(c)&&c.at(u)||null}),c}(this,o,".")}getError(o,a){const c=a?this.get(a):this;return c&&c.errors?c.errors[o]:null}hasError(o,a){return!!this.getError(o,a)}get root(){let o=this;for(;o._parent;)o=o._parent;return o}_updateControlsErrors(o){this.status=this._calculateStatus(),o&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(o)}_initObservables(){this.valueChanges=new wt,this.statusChanges=new wt}_calculateStatus(){return this._allControlsDisabled()?Ix:this.errors?SO:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(uy)?uy:this._anyControlsHaveStatus(SO)?SO:Ax}_anyControlsHaveStatus(o){return this._anyControls(a=>a.status===o)}_anyControlsDirty(){return this._anyControls(o=>o.dirty)}_anyControlsTouched(){return this._anyControls(o=>o.touched)}_updatePristine(o={}){this.pristine=!this._anyControlsDirty(),this._parent&&!o.onlySelf&&this._parent._updatePristine(o)}_updateTouched(o={}){this.touched=this._anyControlsTouched(),this._parent&&!o.onlySelf&&this._parent._updateTouched(o)}_isBoxedValue(o){return"object"==typeof o&&null!==o&&2===Object.keys(o).length&&"value"in o&&"disabled"in o}_registerOnCollectionChange(o){this._onCollectionChange=o}_setUpdateStrategy(o){wO(o)&&null!=o.updateOn&&(this._updateOn=o.updateOn)}_parentMarkedDirty(o){return!o&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class BF extends LF{constructor(o=null,a,c){super(RF(a),FF(c,a)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(o),this._setUpdateStrategy(a),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wO(a)&&a.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(o)?o.value:o)}setValue(o,a={}){this.value=this._pendingValue=o,this._onChange.length&&!1!==a.emitModelToViewChange&&this._onChange.forEach(c=>c(this.value,!1!==a.emitViewToModelChange)),this.updateValueAndValidity(a)}patchValue(o,a={}){this.setValue(o,a)}reset(o=this.defaultValue,a={}){this._applyFormState(o),this.markAsPristine(a),this.markAsUntouched(a),this.setValue(this.value,a),this._pendingChange=!1}_updateValue(){}_anyControls(o){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(o){this._onChange.push(o)}_unregisterOnChange(o){CO(this._onChange,o)}registerOnDisabledChange(o){this._onDisabledChange.push(o)}_unregisterOnDisabledChange(o){CO(this._onDisabledChange,o)}_forEachChild(o){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(o){this._isBoxedValue(o)?(this.value=this._pendingValue=o.value,o.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=o}}class TO extends LF{constructor(o,a,c){super(RF(a),FF(c,a)),this.controls=o,this._initObservables(),this._setUpdateStrategy(a),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(o,a){return this.controls[o]?this.controls[o]:(this.controls[o]=a,a.setParent(this),a._registerOnCollectionChange(this._onCollectionChange),a)}addControl(o,a,c={}){this.registerControl(o,a),this.updateValueAndValidity({emitEvent:c.emitEvent}),this._onCollectionChange()}removeControl(o,a={}){this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),delete this.controls[o],this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}setControl(o,a,c={}){this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),delete this.controls[o],a&&this.registerControl(o,a),this.updateValueAndValidity({emitEvent:c.emitEvent}),this._onCollectionChange()}contains(o){return this.controls.hasOwnProperty(o)&&this.controls[o].enabled}setValue(o,a={}){YY(this,o),Object.keys(o).forEach(c=>{XY(this,c),this.controls[c].setValue(o[c],{onlySelf:!0,emitEvent:a.emitEvent})}),this.updateValueAndValidity(a)}patchValue(o,a={}){null!=o&&(Object.keys(o).forEach(c=>{this.controls[c]&&this.controls[c].patchValue(o[c],{onlySelf:!0,emitEvent:a.emitEvent})}),this.updateValueAndValidity(a))}reset(o={},a={}){this._forEachChild((c,u)=>{c.reset(o[u],{onlySelf:!0,emitEvent:a.emitEvent})}),this._updatePristine(a),this._updateTouched(a),this.updateValueAndValidity(a)}getRawValue(){return this._reduceChildren({},(o,a,c)=>(o[c]=ZY(a),o))}_syncPendingControls(){let o=this._reduceChildren(!1,(a,c)=>!!c._syncPendingControls()||a);return o&&this.updateValueAndValidity({onlySelf:!0}),o}_forEachChild(o){Object.keys(this.controls).forEach(a=>{const c=this.controls[a];c&&o(c,a)})}_setUpControls(){this._forEachChild(o=>{o.setParent(this),o._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(o){for(const a of Object.keys(this.controls)){const c=this.controls[a];if(this.contains(a)&&o(c))return!0}return!1}_reduceValue(){return this._reduceChildren({},(o,a,c)=>((a.enabled||this.disabled)&&(o[c]=a.value),o))}_reduceChildren(o,a){let c=o;return this._forEachChild((u,h)=>{c=a(c,u,h)}),c}_allControlsDisabled(){for(const o of Object.keys(this.controls))if(this.controls[o].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class cIe extends LF{constructor(o,a,c){super(RF(a),FF(c,a)),this.controls=o,this._initObservables(),this._setUpdateStrategy(a),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(o){return this.controls[o]}push(o,a={}){this.controls.push(o),this._registerControl(o),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}insert(o,a,c={}){this.controls.splice(o,0,a),this._registerControl(a),this.updateValueAndValidity({emitEvent:c.emitEvent})}removeAt(o,a={}){this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),this.updateValueAndValidity({emitEvent:a.emitEvent})}setControl(o,a,c={}){this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),a&&(this.controls.splice(o,0,a),this._registerControl(a)),this.updateValueAndValidity({emitEvent:c.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(o,a={}){YY(this,o),o.forEach((c,u)=>{XY(this,u),this.at(u).setValue(c,{onlySelf:!0,emitEvent:a.emitEvent})}),this.updateValueAndValidity(a)}patchValue(o,a={}){null!=o&&(o.forEach((c,u)=>{this.at(u)&&this.at(u).patchValue(c,{onlySelf:!0,emitEvent:a.emitEvent})}),this.updateValueAndValidity(a))}reset(o=[],a={}){this._forEachChild((c,u)=>{c.reset(o[u],{onlySelf:!0,emitEvent:a.emitEvent})}),this._updatePristine(a),this._updateTouched(a),this.updateValueAndValidity(a)}getRawValue(){return this.controls.map(o=>ZY(o))}clear(o={}){this.controls.length<1||(this._forEachChild(a=>a._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:o.emitEvent}))}_syncPendingControls(){let o=this.controls.reduce((a,c)=>!!c._syncPendingControls()||a,!1);return o&&this.updateValueAndValidity({onlySelf:!0}),o}_forEachChild(o){this.controls.forEach((a,c)=>{o(a,c)})}_updateValue(){this.value=this.controls.filter(o=>o.enabled||this.disabled).map(o=>o.value)}_anyControls(o){return this.controls.some(a=>a.enabled&&o(a))}_setUpControls(){this._forEachChild(o=>this._registerControl(o))}_allControlsDisabled(){for(const o of this.controls)if(o.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(o){o.setParent(this),o._registerOnCollectionChange(this._onCollectionChange)}}const uIe={provide:Ha,useExisting:Vr(()=>ef)},Px=(()=>Promise.resolve(null))();let ef=(()=>{class l extends Ha{constructor(a,c){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new wt,this.form=new TO({},TF(a),OF(c))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(a){Px.then(()=>{const c=this._findContainer(a.path);a.control=c.registerControl(a.name,a.control),Ex(a.control,a),a.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(a)})}getControl(a){return this.form.get(a.path)}removeControl(a){Px.then(()=>{const c=this._findContainer(a.path);c&&c.removeControl(a.name),CO(this._directives,a)})}addFormGroup(a){Px.then(()=>{const c=this._findContainer(a.path),u=new TO({});(function WY(l,o){EF(l,o)})(u,a),c.registerControl(a.name,u),u.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(a){Px.then(()=>{const c=this._findContainer(a.path);c&&c.removeControl(a.name)})}getFormGroup(a){return this.form.get(a.path)}updateModel(a,c){Px.then(()=>{this.form.get(a.path).setValue(c)})}setValue(a){this.control.setValue(a)}onSubmit(a){return this.submitted=!0,function GY(l,o){l._syncPendingControls(),o.forEach(a=>{const c=a.control;"submit"===c.updateOn&&c._pendingChange&&(a.viewToModelUpdate(c._pendingValue),c._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(a),!1}onReset(){this.resetForm()}resetForm(a){this.form.reset(a),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(a){return a.pop(),a.length?this.form.get(a):this.form}}return l.\u0275fac=function(a){return new(a||l)(L(fa,10),L(dp,10))},l.\u0275dir=vt({type:l,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(a,c){1&a&&ee("submit",function(h){return c.onSubmit(h)})("reset",function(){return c.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[dn([uIe]),pn]}),l})();const dIe={provide:wl,useExisting:Vr(()=>Co)},JY=(()=>Promise.resolve(null))();let Co=(()=>{class l extends wl{constructor(a,c,u,h){super(),this.control=new BF,this._registered=!1,this.update=new wt,this._parent=a,this._setValidators(c),this._setAsyncValidators(u),this.valueAccessor=function IF(l,o){if(!o)return null;let a,c,u;return Array.isArray(o),o.forEach(h=>{h.constructor===Sl?a=h:function oIe(l){return Object.getPrototypeOf(l.constructor)===lm}(h)?c=h:u=h}),u||c||a||null}(0,h)}ngOnChanges(a){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in a&&this._updateDisabled(a),function AF(l,o){if(!l.hasOwnProperty("model"))return!1;const a=l.model;return!!a.isFirstChange()||!Object.is(o,a.currentValue)}(a,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function yO(l,o){return[...o.path,l]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(a){this.viewModel=a,this.update.emit(a)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ex(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(a){JY.then(()=>{this.control.setValue(a,{emitViewToModelChange:!1})})}_updateDisabled(a){const c=a.isDisabled.currentValue,u=""===c||c&&"false"!==c;JY.then(()=>{u&&!this.control.disabled?this.control.disable():!u&&this.control.disabled&&this.control.enable()})}}return l.\u0275fac=function(a){return new(a||l)(L(Ha,9),L(fa,10),L(dp,10),L(Bh,10))},l.\u0275dir=vt({type:l,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[dn([dIe]),pn,vo]}),l})(),hy=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275dir=vt({type:l,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),l})();const pIe={provide:Bh,useExisting:Vr(()=>Rx),multi:!0};let eK=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({}),l})(),gIe=(()=>{class l{constructor(){this._accessors=[]}add(a,c){this._accessors.push([a,c])}remove(a){for(let c=this._accessors.length-1;c>=0;--c)if(this._accessors[c][1]===a)return void this._accessors.splice(c,1)}select(a){this._accessors.forEach(c=>{this._isSameGroup(c,a)&&c[1]!==a&&c[1].fireUncheck(a.value)})}_isSameGroup(a,c){return!!a[0].control&&a[0]._parent===c._control._parent&&a[1].name===c.name}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac,providedIn:eK}),l})(),Rx=(()=>{class l extends lm{constructor(a,c,u,h){super(a,c),this._registry=u,this._injector=h,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(wl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(a){this._state=a===this.value,this.setProperty("checked",this._state)}registerOnChange(a){this._fn=a,this.onChange=()=>{a(this.value),this._registry.select(this)}}fireUncheck(a){this.writeValue(a)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return l.\u0275fac=function(a){return new(a||l)(L(yi),L(Sn),L(gIe),L(gr))},l.\u0275dir=vt({type:l,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(a,c){1&a&&ee("change",function(){return c.onChange()})("blur",function(){return c.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[dn([pIe]),pn]}),l})(),dy=(()=>{class l{constructor(){this._validator=Mx}ngOnChanges(a){if(this.inputName in a){const c=this.normalizeInput(a[this.inputName].currentValue);this._enabled=this.enabled(c),this._validator=this._enabled?this.createValidator(c):Mx,this._onChange&&this._onChange()}}validate(a){return this._validator(a)}registerOnValidatorChange(a){this._onChange=a}enabled(a){return null!=a}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275dir=vt({type:l,features:[vo]}),l})();const MIe={provide:fa,useExisting:Vr(()=>cm),multi:!0},EIe={provide:fa,useExisting:Vr(()=>$F),multi:!0};let cm=(()=>{class l extends dy{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=a=>function OIe(l){return null!=l&&!1!==l&&"false"!=`${l}`}(a),this.createValidator=a=>CY}enabled(a){return a}}return l.\u0275fac=function(){let o;return function(c){return(o||(o=fs(l)))(c||l)}}(),l.\u0275dir=vt({type:l,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(a,c){2&a&&et("required",c._enabled?"":null)},inputs:{required:"required"},features:[dn([MIe]),pn]}),l})(),$F=(()=>{class l extends cm{constructor(){super(...arguments),this.createValidator=a=>SY}}return l.\u0275fac=function(){let o;return function(c){return(o||(o=fs(l)))(c||l)}}(),l.\u0275dir=vt({type:l,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(a,c){2&a&&et("required",c._enabled?"":null)},features:[dn([EIe]),pn]}),l})(),FIe=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[eK]]}),l})(),fp=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[FIe]}),l})();const LIe=jX(3,(l,o,a)=>{!function nAe(l,o){return o||(o=window&&window.customElements),!o||!!o.get(l)}(l)||function rAe(){var l,o;return null===(o=null===(l=null==window?void 0:window.location)||void 0===l?void 0:l.href)||void 0===o?void 0:o.includes("localhost:6006")}()?(a.define(l,function NIe(l){return sY.supports.flexGap?l:class extends l{connectedCallback(){super.connectedCallback(),this.setAttribute("_nfg","")}}}(o)),oY(),window&&!Object.keys(window.CDS._state.elementRegistry).some(c=>c===l)&&(window.CDS._state.elementRegistry=C2(Pa({},window.CDS._state.elementRegistry),{[l]:{}}))):Ox.warn(l+" has already been registered")});let yK=!1,_K=!1;function bK(){var l,o,a;return void 0!==(null===(a=null===(o=null===(l=globalThis)||void 0===l?void 0:l.process)||void 0===o?void 0:o.env)||void 0===a?void 0:a.JEST_WORKER_ID)}function xK(l,o,a){Object.defineProperty(l,a,{configurable:!0,enumerable:!0,get:function(){return this.hasAttribute(o)?this.getAttribute(o):null},set:function(c){null!==c?this.setAttribute(o,c):this.removeAttribute(o)}})}function CK(l,o,a,c,u,h,d){try{var f=l[h](d),p=f.value}catch(g){return void a(g)}f.done?o(p):Promise.resolve(p).then(c,u)}function SK(l){return function(){var o=this,a=arguments;return new Promise(function(c,u){var h=l.apply(o,a);function d(p){CK(h,c,u,d,f,"next",p)}function f(p){CK(h,c,u,d,f,"throw",p)}d(void 0)})}}yK||Element.prototype.hasOwnProperty("role")||bK()||(xK(Element.prototype,"role","role"),yK=!0),_K||Element.prototype.hasOwnProperty("ariaLabel")||bK()||(_K=!0,["ActiveDescendant","Atomic","AutoComplete","Busy","Checked","ColCount","ColIndex","ColSpan","Controls","Current","DescribedBy","Details","Disabled","ErrorMessage","Expanded","FlowTo","HasPopup","Hidden","Invalid","KeyShortcuts","Label","LabelledBy","Level","Live","Modal","MultiLine","MultiSelectable","Orientation","Owns","Placeholder","PosInSet","Pressed","ReadOnly","Relevant","Required","RoleDescription","RowCount","RowIndex","RowSpan","Selected","SetSize","Sort","ValueMax","ValueMin","ValueNow","ValueText"].forEach(l=>xK(Element.prototype,"aria-"+l.toLowerCase(),"aria"+l)));const WF=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,GF=Symbol(),wK=new Map;class TK{constructor(o,a){if(this._$cssResult$=!0,a!==GF)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=o}get styleSheet(){let o=wK.get(this.cssText);return WF&&void 0===o&&(wK.set(this.cssText,o=new CSSStyleSheet),o.replaceSync(this.cssText)),o}toString(){return this.cssText}}const OK=(l,...o)=>{const a=1===l.length?l[0]:o.reduce((c,u,h)=>c+(d=>{if(!0===d._$cssResult$)return d.cssText;if("number"==typeof d)return d;throw Error("Value passed to 'css' function must be a 'css' function result: "+d+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(u)+l[h+1],l[0]);return new TK(a,GF)},DK=WF?l=>l:l=>l instanceof CSSStyleSheet?(o=>{let a="";for(const c of o.cssRules)a+=c.cssText;return(l=>new TK("string"==typeof l?l:l+"",GF))(a)})(l):l;var QF;const kK=window.trustedTypes,UIe=kK?kK.emptyScript:"",MK=window.reactiveElementPolyfillSupport,jF={toAttribute(l,o){switch(o){case Boolean:l=l?UIe:null;break;case Object:case Array:l=null==l?l:JSON.stringify(l)}return l},fromAttribute(l,o){let a=l;switch(o){case Boolean:a=null!==l;break;case Number:a=null===l?null:Number(l);break;case Object:case Array:try{a=JSON.parse(l)}catch(c){a=null}}return a}},EK=(l,o)=>o!==l&&(o==o||l==l),qF={attribute:!0,type:String,converter:jF,reflect:!1,hasChanged:EK};class fy extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(o){var a;null!==(a=this.l)&&void 0!==a||(this.l=[]),this.l.push(o)}static get observedAttributes(){this.finalize();const o=[];return this.elementProperties.forEach((a,c)=>{const u=this._$Eh(c,a);void 0!==u&&(this._$Eu.set(u,c),o.push(u))}),o}static createProperty(o,a=qF){if(a.state&&(a.attribute=!1),this.finalize(),this.elementProperties.set(o,a),!a.noAccessor&&!this.prototype.hasOwnProperty(o)){const c="symbol"==typeof o?Symbol():"__"+o,u=this.getPropertyDescriptor(o,c,a);void 0!==u&&Object.defineProperty(this.prototype,o,u)}}static getPropertyDescriptor(o,a,c){return{get(){return this[a]},set(u){const h=this[o];this[a]=u,this.requestUpdate(o,h,c)},configurable:!0,enumerable:!0}}static getPropertyOptions(o){return this.elementProperties.get(o)||qF}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const o=Object.getPrototypeOf(this);if(o.finalize(),this.elementProperties=new Map(o.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const a=this.properties,c=[...Object.getOwnPropertyNames(a),...Object.getOwnPropertySymbols(a)];for(const u of c)this.createProperty(u,a[u])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(o){const a=[];if(Array.isArray(o)){const c=new Set(o.flat(1/0).reverse());for(const u of c)a.unshift(DK(u))}else void 0!==o&&a.push(DK(o));return a}static _$Eh(o,a){const c=a.attribute;return!1===c?void 0:"string"==typeof c?c:"string"==typeof o?o.toLowerCase():void 0}o(){var o;this._$Ep=new Promise(a=>this.enableUpdating=a),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(o=this.constructor.l)||void 0===o||o.forEach(a=>a(this))}addController(o){var a,c;(null!==(a=this._$Eg)&&void 0!==a?a:this._$Eg=[]).push(o),void 0!==this.renderRoot&&this.isConnected&&(null===(c=o.hostConnected)||void 0===c||c.call(o))}removeController(o){var a;null===(a=this._$Eg)||void 0===a||a.splice(this._$Eg.indexOf(o)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach((o,a)=>{this.hasOwnProperty(a)&&(this._$Et.set(a,this[a]),delete this[a])})}createRenderRoot(){var o;const a=null!==(o=this.shadowRoot)&&void 0!==o?o:this.attachShadow(this.constructor.shadowRootOptions);return((l,o)=>{WF?l.adoptedStyleSheets=o.map(a=>a instanceof CSSStyleSheet?a:a.styleSheet):o.forEach(a=>{const c=document.createElement("style"),u=window.litNonce;void 0!==u&&c.setAttribute("nonce",u),c.textContent=a.cssText,l.appendChild(c)})})(a,this.constructor.elementStyles),a}connectedCallback(){var o;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(o=this._$Eg)||void 0===o||o.forEach(a=>{var c;return null===(c=a.hostConnected)||void 0===c?void 0:c.call(a)})}enableUpdating(o){}disconnectedCallback(){var o;null===(o=this._$Eg)||void 0===o||o.forEach(a=>{var c;return null===(c=a.hostDisconnected)||void 0===c?void 0:c.call(a)})}attributeChangedCallback(o,a,c){this._$AK(o,c)}_$ES(o,a,c=qF){var u,h;const d=this.constructor._$Eh(o,c);if(void 0!==d&&!0===c.reflect){const f=(null!==(h=null===(u=c.converter)||void 0===u?void 0:u.toAttribute)&&void 0!==h?h:jF.toAttribute)(a,c.type);this._$Ei=o,null==f?this.removeAttribute(d):this.setAttribute(d,f),this._$Ei=null}}_$AK(o,a){var c,u,h;const d=this.constructor,f=d._$Eu.get(o);if(void 0!==f&&this._$Ei!==f){const p=d.getPropertyOptions(f),g=p.converter,m=null!==(h=null!==(u=null===(c=g)||void 0===c?void 0:c.fromAttribute)&&void 0!==u?u:"function"==typeof g?g:null)&&void 0!==h?h:jF.fromAttribute;this._$Ei=f,this[f]=m(a,p.type),this._$Ei=null}}requestUpdate(o,a,c){let u=!0;void 0!==o&&(((c=c||this.constructor.getPropertyOptions(o)).hasChanged||EK)(this[o],a)?(this._$AL.has(o)||this._$AL.set(o,a),!0===c.reflect&&this._$Ei!==o&&(void 0===this._$E_&&(this._$E_=new Map),this._$E_.set(o,c))):u=!1),!this.isUpdatePending&&u&&(this._$Ep=this._$EC())}_$EC(){var o=this;return SK(function*(){o.isUpdatePending=!0;try{yield o._$Ep}catch(c){Promise.reject(c)}const a=o.scheduleUpdate();return null!=a&&(yield a),!o.isUpdatePending})()}scheduleUpdate(){return this.performUpdate()}performUpdate(){var o;if(!this.isUpdatePending)return;this._$Et&&(this._$Et.forEach((u,h)=>this[h]=u),this._$Et=void 0);let a=!1;const c=this._$AL;try{a=this.shouldUpdate(c),a?(this.willUpdate(c),null===(o=this._$Eg)||void 0===o||o.forEach(u=>{var h;return null===(h=u.hostUpdate)||void 0===h?void 0:h.call(u)}),this.update(c)):this._$EU()}catch(u){throw a=!1,this._$EU(),u}a&&this._$AE(c)}willUpdate(o){}_$AE(o){var a;null===(a=this._$Eg)||void 0===a||a.forEach(c=>{var u;return null===(u=c.hostUpdated)||void 0===u?void 0:u.call(c)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(o)),this.updated(o)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(o){return!0}update(o){void 0!==this._$E_&&(this._$E_.forEach((a,c)=>this._$ES(c,this[c],a)),this._$E_=void 0),this._$EU()}updated(o){}firstUpdated(o){}}var ZF;fy.finalized=!0,fy.elementProperties=new Map,fy.elementStyles=[],fy.shadowRootOptions={mode:"open"},null==MK||MK({ReactiveElement:fy}),(null!==(QF=globalThis.reactiveElementVersions)&&void 0!==QF?QF:globalThis.reactiveElementVersions=[]).push("1.2.1");const py=globalThis.trustedTypes,AK=py?py.createPolicy("lit-html",{createHTML:l=>l}):void 0,tf=`lit$${(Math.random()+"").slice(9)}$`,XF="?"+tf,HIe=`<${XF}>`,gy=document,Nx=(l="")=>gy.createComment(l),Lx=l=>null===l||"object"!=typeof l&&"function"!=typeof l,IK=Array.isArray,Bx=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,RK=/-->/g,FK=/>/g,um=/>|[ \x09\n\x0c\r](?:([^\s"'>=/]+)([ \x09\n\x0c\r]*=[ \x09\n\x0c\r]*(?:[^ \x09\n\x0c\r"'`<>=]|("|')|))|$)/g,NK=/'/g,LK=/"/g,BK=/^(?:script|style|textarea)$/i,VK=l=>(o,...a)=>({_$litType$:l,strings:o,values:a}),$Ie=VK(1),WIe=VK(2),my=Symbol.for("lit-noChange"),Lo=Symbol.for("lit-nothing"),zK=new WeakMap,vy=gy.createTreeWalker(gy,129,null,!1);class Vx{constructor({strings:o,_$litType$:a},c){let u;this.parts=[];let h=0,d=0;const f=o.length-1,p=this.parts,[g,m]=((l,o)=>{const a=l.length-1,c=[];let u,h=2===o?"<svg>":"",d=Bx;for(let p=0;p<a;p++){const g=l[p];let m,v,y=-1,_=0;for(;_<g.length&&(d.lastIndex=_,v=d.exec(g),null!==v);)_=d.lastIndex,d===Bx?"!--"===v[1]?d=RK:void 0!==v[1]?d=FK:void 0!==v[2]?(BK.test(v[2])&&(u=RegExp("</"+v[2],"g")),d=um):void 0!==v[3]&&(d=um):d===um?">"===v[0]?(d=null!=u?u:Bx,y=-1):void 0===v[1]?y=-2:(y=d.lastIndex-v[2].length,m=v[1],d=void 0===v[3]?um:'"'===v[3]?LK:NK):d===LK||d===NK?d=um:d===RK||d===FK?d=Bx:(d=um,u=void 0);const b=d===um&&l[p+1].startsWith("/>")?" ":"";h+=d===Bx?g+HIe:y>=0?(c.push(m),g.slice(0,y)+"$lit$"+g.slice(y)+tf+b):g+tf+(-2===y?(c.push(void 0),p):b)}const f=h+(l[a]||"<?>")+(2===o?"</svg>":"");if(!Array.isArray(l)||!l.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==AK?AK.createHTML(f):f,c]})(o,a);if(this.el=Vx.createElement(g,c),vy.currentNode=this.el.content,2===a){const v=this.el.content,y=v.firstChild;y.remove(),v.append(...y.childNodes)}for(;null!==(u=vy.nextNode())&&p.length<f;){if(1===u.nodeType){if(u.hasAttributes()){const v=[];for(const y of u.getAttributeNames())if(y.endsWith("$lit$")||y.startsWith(tf)){const _=m[d++];if(v.push(y),void 0!==_){const b=u.getAttribute(_.toLowerCase()+"$lit$").split(tf),C=/([.?@])?(.*)/.exec(_);p.push({type:1,index:h,name:C[2],strings:b,ctor:"."===C[1]?$K:"?"===C[1]?WK:"@"===C[1]?GK:zx})}else p.push({type:6,index:h})}for(const y of v)u.removeAttribute(y)}if(BK.test(u.tagName)){const v=u.textContent.split(tf),y=v.length-1;if(y>0){u.textContent=py?py.emptyScript:"";for(let _=0;_<y;_++)u.append(v[_],Nx()),vy.nextNode(),p.push({type:2,index:++h});u.append(v[y],Nx())}}}else if(8===u.nodeType)if(u.data===XF)p.push({type:2,index:h});else{let v=-1;for(;-1!==(v=u.data.indexOf(tf,v+1));)p.push({type:7,index:h}),v+=tf.length-1}h++}}static createElement(o,a){const c=gy.createElement("template");return c.innerHTML=o,c}}function hm(l,o,a=l,c){var u,h,d,f;if(o===my)return o;let p=void 0!==c?null===(u=a._$Cl)||void 0===u?void 0:u[c]:a._$Cu;const g=Lx(o)?void 0:o._$litDirective$;return(null==p?void 0:p.constructor)!==g&&(null===(h=null==p?void 0:p._$AO)||void 0===h||h.call(p,!1),void 0===g?p=void 0:(p=new g(l),p._$AT(l,a,c)),void 0!==c?(null!==(d=(f=a)._$Cl)&&void 0!==d?d:f._$Cl=[])[c]=p:a._$Cu=p),void 0!==p&&(o=hm(l,p._$AS(l,o.values),p,c)),o}class HK{constructor(o,a){this.v=[],this._$AN=void 0,this._$AD=o,this._$AM=a}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(o){var a;const{el:{content:c},parts:u}=this._$AD,h=(null!==(a=null==o?void 0:o.creationScope)&&void 0!==a?a:gy).importNode(c,!0);vy.currentNode=h;let d=vy.nextNode(),f=0,p=0,g=u[0];for(;void 0!==g;){if(f===g.index){let m;2===g.type?m=new yy(d,d.nextSibling,this,o):1===g.type?m=new g.ctor(d,g.name,g.strings,this,o):6===g.type&&(m=new QK(d,this,o)),this.v.push(m),g=u[++p]}f!==(null==g?void 0:g.index)&&(d=vy.nextNode(),f++)}return h}m(o){let a=0;for(const c of this.v)void 0!==c&&(void 0!==c.strings?(c._$AI(o,c,a),a+=c.strings.length-2):c._$AI(o[a])),a++}}class yy{constructor(o,a,c,u){var h;this.type=2,this._$AH=Lo,this._$AN=void 0,this._$AA=o,this._$AB=a,this._$AM=c,this.options=u,this._$Cg=null===(h=null==u?void 0:u.isConnected)||void 0===h||h}get _$AU(){var o,a;return null!==(a=null===(o=this._$AM)||void 0===o?void 0:o._$AU)&&void 0!==a?a:this._$Cg}get parentNode(){let o=this._$AA.parentNode;const a=this._$AM;return void 0!==a&&11===o.nodeType&&(o=a.parentNode),o}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(o,a=this){o=hm(this,o,a),Lx(o)?o===Lo||null==o||""===o?(this._$AH!==Lo&&this._$AR(),this._$AH=Lo):o!==this._$AH&&o!==my&&this.$(o):void 0!==o._$litType$?this.T(o):void 0!==o.nodeType?this.S(o):(l=>{var o;return IK(l)||"function"==typeof(null===(o=l)||void 0===o?void 0:o[Symbol.iterator])})(o)?this.A(o):this.$(o)}M(o,a=this._$AB){return this._$AA.parentNode.insertBefore(o,a)}S(o){this._$AH!==o&&(this._$AR(),this._$AH=this.M(o))}$(o){this._$AH!==Lo&&Lx(this._$AH)?this._$AA.nextSibling.data=o:this.S(gy.createTextNode(o)),this._$AH=o}T(o){var a;const{values:c,_$litType$:u}=o,h="number"==typeof u?this._$AC(o):(void 0===u.el&&(u.el=Vx.createElement(u.h,this.options)),u);if((null===(a=this._$AH)||void 0===a?void 0:a._$AD)===h)this._$AH.m(c);else{const d=new HK(h,this),f=d.p(this.options);d.m(c),this.S(f),this._$AH=d}}_$AC(o){let a=zK.get(o.strings);return void 0===a&&zK.set(o.strings,a=new Vx(o)),a}A(o){IK(this._$AH)||(this._$AH=[],this._$AR());const a=this._$AH;let c,u=0;for(const h of o)u===a.length?a.push(c=new yy(this.M(Nx()),this.M(Nx()),this,this.options)):c=a[u],c._$AI(h),u++;u<a.length&&(this._$AR(c&&c._$AB.nextSibling,u),a.length=u)}_$AR(o=this._$AA.nextSibling,a){var c;for(null===(c=this._$AP)||void 0===c||c.call(this,!1,!0,a);o&&o!==this._$AB;){const u=o.nextSibling;o.remove(),o=u}}setConnected(o){var a;void 0===this._$AM&&(this._$Cg=o,null===(a=this._$AP)||void 0===a||a.call(this,o))}}class zx{constructor(o,a,c,u,h){this.type=1,this._$AH=Lo,this._$AN=void 0,this.element=o,this.name=a,this._$AM=u,this.options=h,c.length>2||""!==c[0]||""!==c[1]?(this._$AH=Array(c.length-1).fill(new String),this.strings=c):this._$AH=Lo}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(o,a=this,c,u){const h=this.strings;let d=!1;if(void 0===h)o=hm(this,o,a,0),d=!Lx(o)||o!==this._$AH&&o!==my,d&&(this._$AH=o);else{const f=o;let p,g;for(o=h[0],p=0;p<h.length-1;p++)g=hm(this,f[c+p],a,p),g===my&&(g=this._$AH[p]),d||(d=!Lx(g)||g!==this._$AH[p]),g===Lo?o=Lo:o!==Lo&&(o+=(null!=g?g:"")+h[p+1]),this._$AH[p]=g}d&&!u&&this.k(o)}k(o){o===Lo?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=o?o:"")}}class $K extends zx{constructor(){super(...arguments),this.type=3}k(o){this.element[this.name]=o===Lo?void 0:o}}const QIe=py?py.emptyScript:"";class WK extends zx{constructor(){super(...arguments),this.type=4}k(o){o&&o!==Lo?this.element.setAttribute(this.name,QIe):this.element.removeAttribute(this.name)}}class GK extends zx{constructor(o,a,c,u,h){super(o,a,c,u,h),this.type=5}_$AI(o,a=this){var c;if((o=null!==(c=hm(this,o,a,0))&&void 0!==c?c:Lo)===my)return;const u=this._$AH,h=o===Lo&&u!==Lo||o.capture!==u.capture||o.once!==u.once||o.passive!==u.passive,d=o!==Lo&&(u===Lo||h);h&&this.element.removeEventListener(this.name,this,u),d&&this.element.addEventListener(this.name,this,o),this._$AH=o}handleEvent(o){var a,c;"function"==typeof this._$AH?this._$AH.call(null!==(c=null===(a=this.options)||void 0===a?void 0:a.host)&&void 0!==c?c:this.element,o):this._$AH.handleEvent(o)}}class QK{constructor(o,a,c){this.element=o,this.type=6,this._$AN=void 0,this._$AM=a,this.options=c}get _$AU(){return this._$AM._$AU}_$AI(o){hm(this,o)}}const jK=window.litHtmlPolyfillSupport;var YF,KF;null==jK||jK(Vx,yy),(null!==(ZF=globalThis.litHtmlVersions)&&void 0!==ZF?ZF:globalThis.litHtmlVersions=[]).push("2.1.2");class Ux extends fy{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var o,a;const c=super.createRenderRoot();return null!==(o=(a=this.renderOptions).renderBefore)&&void 0!==o||(a.renderBefore=c.firstChild),c}update(o){const a=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(o),this._$Dt=((l,o,a)=>{var c,u;const h=null!==(c=null==a?void 0:a.renderBefore)&&void 0!==c?c:o;let d=h._$litPart$;if(void 0===d){const f=null!==(u=null==a?void 0:a.renderBefore)&&void 0!==u?u:null;h._$litPart$=d=new yy(o.insertBefore(Nx(),f),f,void 0,null!=a?a:{})}return d._$AI(l),d})(a,this.renderRoot,this.renderOptions)}connectedCallback(){var o;super.connectedCallback(),null===(o=this._$Dt)||void 0===o||o.setConnected(!0)}disconnectedCallback(){var o;super.disconnectedCallback(),null===(o=this._$Dt)||void 0===o||o.setConnected(!1)}render(){return my}}Ux.finalized=!0,Ux._$litElement$=!0,null===(YF=globalThis.litElementHydrateSupport)||void 0===YF||YF.call(globalThis,{LitElement:Ux});const qK=globalThis.litElementPolyfillSupport;null==qK||qK({LitElement:Ux}),(null!==(KF=globalThis.litElementVersions)&&void 0!==KF?KF:globalThis.litElementVersions=[]).push("3.1.2");const qIe=OK`@charset "UTF-8";:host,:root{--δ2:var(--cds-global-layout-space-xs, calc((4 / var(--cds-global-base, 20)) * 1rem));--δ3:var(--cds-global-layout-space-sm, calc((6 / var(--cds-global-base, 20)) * 1rem));--δ4:var(--cds-global-layout-space-md, calc((12 / var(--cds-global-base, 20)) * 1rem));--δ5:var(--cds-global-layout-space-lg, calc((24 / var(--cds-global-base, 20)) * 1rem));--δ6:var(--cds-global-layout-space-xl, calc((48 / var(--cds-global-base, 20)) * 1rem))}[cds-layout~="wrap:none"]{flex-wrap:nowrap!important}[cds-layout*="align:stretch"]{flex-grow:1!important}[cds-layout*="align:shrink"]{flex-shrink:1!important;flex-grow:0!important}[cds-layout~=horizontal],[cds-layout~=vertical]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;align-items:flex-start}[cds-layout~=horizontal]{flex-direction:row;flex-wrap:wrap;justify-items:flex-start;margin:0;min-height:0}[cds-layout~=horizontal]>[cds-layout~=horizontal],[cds-layout~=horizontal]>[cds-layout~=vertical],[cds-layout~=horizontal]>[cds-text]{width:initial!important}[cds-layout~=horizontal][cds-layout*="align:top"]{align-items:flex-start}[cds-layout~=horizontal][cds-layout*="align:left"]{justify-content:flex-start}[cds-layout~=horizontal][cds-layout*="align:right"]{justify-content:flex-end}[cds-layout~=horizontal][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=horizontal][cds-layout*="align:horizontal-center"]{justify-content:center}[cds-layout~=horizontal][cds-layout*="align:center"]{align-items:center;align-content:center;justify-content:center}[cds-layout~=horizontal][cds-layout*="order:reverse"]{flex-direction:row-reverse}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]{justify-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>*{flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:vertical-center"]{align-self:center}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:horizontal-center"]{margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:top"]{align-self:flex-start}[cds-layout~=horizontal]>[cds-layout*="align:right"]{margin-left:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:left"]{margin-right:auto!important}[cds-layout~=vertical]{flex-direction:column}[cds-layout~=vertical],[cds-layout~=vertical][cds-layout*="align:top"]{justify-content:flex-start}[cds-layout~=vertical][cds-layout*="align:left"]{align-items:flex-start}[cds-layout~=vertical][cds-layout*="align:right"]{align-items:flex-end}[cds-layout~=vertical][cds-layout*="align:vertical-center"]{justify-content:center}[cds-layout~=vertical][cds-layout*="align:horizontal-center"]{align-items:center}[cds-layout~=vertical][cds-layout*="align:center"]{align-items:center;justify-content:center}[cds-layout~=vertical][cds-layout*="order:reverse"]{flex-direction:column-reverse}[cds-layout~=vertical][cds-layout*="align:horizontal-stretch"]{align-items:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]{align-items:stretch;justify-content:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:vertical-center"]{margin-top:auto;margin-bottom:auto}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:horizontal-center"]{align-self:center}[cds-layout~=vertical]>[cds-layout*="align:top"]{margin-bottom:auto!important}[cds-layout~=vertical]>[cds-layout*="align:right"]{margin-left:auto}[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}[cds-layout~=grid]{display:grid;align-items:start;align-content:start;grid-template-columns:repeat(var(--cds-global-layout-grid-cols,12),1fr);width:100%}[cds-layout~=grid][cds-layout*=rows]{grid-template-rows:repeat(12,auto)}[cds-layout~=grid]>[cds-layout*=row]{align-self:stretch}[cds-layout~=grid][cds-layout*="align:top"]{align-content:start}[cds-layout~=grid][cds-layout*="align:right"]{justify-content:end}[cds-layout~=grid][cds-layout*="align:left"]{justify-content:start}[cds-layout~=grid][cds-layout*="align:horizontal-stretch"]{justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=grid][cds-layout*="align:horizontal-center"]{justify-items:center;justify-content:center}[cds-layout~=grid][cds-layout*="align:center"]{align-items:center;align-content:center;justify-items:center;justify-content:center}[cds-layout~="display:screen-reader-only"]{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);padding:0;border:0;height:1px;width:1px;overflow:hidden;white-space:nowrap;top:0;left:0;display:block!important}[cds-layout*="gap:none"]{gap:0}[cds-layout*="gap:xs"]{gap:var(--δ2)}[cds-layout*="gap:sm"]{gap:var(--δ3)}[cds-layout*="gap:md"]{gap:var(--δ4)}[cds-layout*="gap:lg"]{gap:var(--δ5)}[cds-layout~="p:none"]{padding:0!important}[cds-layout~="p:xs"]{padding:var(--δ2)!important}[cds-layout~="p:sm"]{padding:var(--δ3)!important}[cds-layout~="p:md"]{padding:var(--δ4)!important}[cds-layout~="m:md"]{margin:var(--δ4)!important}[cds-layout~="p:lg"]{padding:var(--δ5)!important}[cds-layout~="p-y:xs"]{padding-top:var(--δ2)!important;padding-bottom:var(--δ2)!important}[cds-layout~="p-x:sm"]{padding-left:var(--δ3)!important;padding-right:var(--δ3)!important}[cds-layout~="p-y:sm"]{padding-top:var(--δ3)!important;padding-bottom:var(--δ3)!important}[cds-layout~="p-x:md"]{padding-left:var(--δ4)!important;padding-right:var(--δ4)!important}[cds-layout~="p-y:md"]{padding-top:var(--δ4)!important;padding-bottom:var(--δ4)!important}[cds-layout~="p-x:lg"]{padding-left:var(--δ5)!important;padding-right:var(--δ5)!important}[cds-layout~="p-l:md"]{padding-left:var(--δ4)!important}[cds-layout~="p-t:lg"]{padding-top:var(--δ5)!important}[cds-layout~="p-b:lg"]{padding-bottom:var(--δ5)!important}@media (min-width:992px){[cds-layout*="gap@md:lg"]{gap:var(--δ5)}[cds-layout~="p@md:lg"]{padding:var(--δ5)!important}[cds-layout~="m@md:xl"]{margin:var(--δ6)!important}}[cds-layout~=fill]{width:100%!important}*,:after,:before{box-sizing:border-box}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>::slotted(*),[cds-layout~=horizontal][cds-layout*="align:stretch"]>::slotted(*),[cds-layout~=vertical][cds-layout*="align:stretch"]>::slotted(*){flex-grow:1}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:left"]),[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}@media (min-width:576px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto}}@media (min-width:768px){[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto}}@media (min-width:992px){[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:left"]){margin-right:auto}}@media (min-width:1200px){[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto}}@media (min-width:1440px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto}}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:left"]){margin-right:auto!important}@media (min-width:576px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto!important}}@media (min-width:768px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto!important}}@media (min-width:992px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:left"]){margin-right:auto!important}}@media (min-width:1200px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto!important}}@media (min-width:1440px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto!important}}[cds-text]{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);margin-top:0;margin-bottom:0}[cds-text][cds-layout~=grid]::after,[cds-text][cds-layout~=grid]::before,[cds-text][cds-layout~=horizontal]::after,[cds-text][cds-layout~=horizontal]::before,[cds-text][cds-layout~=vertical]::after,[cds-text][cds-layout~=vertical]::before{display:none}[cds-text*=display],[cds-text*=section],[cds-text*=title]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);color:var(--cds-global-typography-color-400,var(--cds-global-color-construction-900,#21333b))}[cds-text*=body],[cds-text*=message],[cds-text*=secondary]{color:var(--cds-global-typography-color-500,var(--cds-global-color-black,#000))}[cds-text*=inline]{width:auto!important;display:inline-block!important}[cds-text*=display]{font-size:var(--cds-global-typography-display-font-size,calc((40 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-display-font-weight,400);line-height:var(--cds-global-typography-display-line-height,1.1em);letter-spacing:var(--cds-global-typography-display-letter-spacing,-.0125em)}[cds-text*=display]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) + .037em)}[cds-text*=display]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) - .044em)}[cds-text*=title]{font-size:var(--cds-global-typography-title-font-size,calc((24 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-title-font-weight,400);line-height:var(--cds-global-typography-title-line-height,1.16667em);letter-spacing:var(--cds-global-typography-title-letter-spacing,-.008333em)}[cds-text*=title]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) + .037em)}[cds-text*=title]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) - .044em)}[cds-text*=section]{font-size:var(--cds-global-typography-section-font-size,calc((20 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-section-font-weight,400);line-height:var(--cds-global-typography-section-line-height,1.2em);letter-spacing:var(--cds-global-typography-section-letter-spacing,-.01em)}[cds-text*=section]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) + .037em)}[cds-text*=section]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) - .044em)}[cds-text*=body]{font-weight:var(--cds-global-typography-body-font-weight,400);font-size:var(--cds-global-typography-body-font-size,calc((14 / var(--cds-global-base,20)) * 1rem));letter-spacing:var(--cds-global-typography-body-letter-spacing,-.014286em);line-height:var(--cds-global-typography-body-line-height,1.42857em)}[cds-text*=body]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) + .1em)}[cds-text*=body]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) - .044em)}[cds-text*=message]{font-size:var(--cds-global-typography-message-font-size,calc((16 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-message-font-weight,calc((400 / var(--cds-global-base,20)) * 1rem));line-height:var(--cds-global-typography-message-line-height,1.25em);letter-spacing:var(--cds-global-typography-message-letter-spacing,-.0125em)}[cds-text*=message]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) + .037em)}[cds-text*=message]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) - .044em)}[cds-text*=secondary]{font-size:var(--cds-global-typography-secondary-font-size,calc((13 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-secondary-font-weight,400);line-height:var(--cds-global-typography-secondary-line-height,1.23077em);letter-spacing:var(--cds-global-typography-secondary-letter-spacing,-.007692em)}[cds-text*=secondary]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) + .037em)}[cds-text*=secondary]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) - .044em)}[cds-text~=link]{color:var(--cds-global-typography-link-color,var(--cds-global-color-blue-800,#00608a))!important;text-decoration:underline!important;line-height:inherit!important;font-size:inherit!important}[cds-text~=link]:hover{color:var(--cds-global-typography-link-color-hover,var(--cds-global-color-blue-900,#004b6b))!important}[cds-text~=link]:visited:not([cds-text~=static]){color:var(--cds-global-typography-link-color-visited,var(--cds-global-color-lavender-600,#3b40ce))!important}[cds-text~=link]:visited:not([cds-text~=static]):hover{color:var(--cds-global-typography-link-color-visited-hover,var(--cds-global-color-lavender-700,#2429c2))!important}[cds-divider]{display:block;height:var(--cds-alias-object-border-width-100,calc((1 / var(--cds-global-base,20)) * 1rem));overflow:hidden;box-shadow:var(--cds-alias-object-border-color,var(--cds-global-color-construction-200,#cbd4d8)) 0 0 0 var(--cds-alias-object-border-width-100,calc((1 / var(--cds-global-base,20)) * 1rem)) inset}[cds-text~=light]{font-weight:var(--cds-global-typography-font-weight-light,300)!important}[cds-text~=left]{text-align:left!important}[cds-text~=right]{text-align:right!important}[cds-text~=center]{text-align:center!important}[cds-text~=lhe]{padding:.05px 0}[cds-text~=lhe]::before{content:"";margin-top:-.124em;display:block;height:0}[cds-text~=lhe]::after{content:"";margin-bottom:-.221em;display:block;height:0}[cds-text*=h2],[cds-text*=h3]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);font-size:1.4rem;font-weight:200;color:#333;line-height:1.7143em;letter-spacing:-.017857em}[cds-text*=h2]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.7143em - 1em)/ 2))*-1) + .037em)}[cds-text*=h2]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.7143em - 1em)/ 2))*-1) - .044em)}[cds-text*=h3]{font-size:1.1rem;line-height:1.0909em;letter-spacing:-.013636em}[cds-text*=h3]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.0909em - 1em)/ 2))*-1) + .037em)}[cds-text*=h3]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.0909em - 1em)/ 2))*-1) - .044em)}:host{all:initial;display:block;visibility:inherit;font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);contain:layout;box-sizing:border-box!important;-webkit-appearance:none!important}*,:after,:before{box-sizing:inherit!important}slot{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);display:contents!important}::slotted(*){font-family:inherit;box-sizing:inherit}::slotted(*)::placeholder{color:var(--cds-global-typography-color-200,var(--cds-global-color-construction-600,#4f6169))}:host([_is-anchor]),:host([role=button]){cursor:pointer!important}:host([_is-anchor]) ::slotted(*),:host([role=button]) ::slotted(*){cursor:pointer!important}:host([role=button][disabled]){cursor:not-allowed!important}:host([role=button][disabled]) ::slotted(*){cursor:not-allowed!important;pointer-events:none}:host([hidden]),[hidden]{display:none!important}:host([hidden*=false]){display:block!important}:host([_focused]) .input,:host([_focused]) [focusable],:host([tabindex="0"]:focus),:host([tabindex="0"]:focus) [focusable],[tabindex="0"][focusable]:focus{outline:var(--cds-alias-object-interaction-outline,Highlight solid 2px);outline-offset:var(--cds-alias-object-interaction-outline-offset,1px)}@media (-webkit-min-device-pixel-ratio:0){:host([_focused]) .input,:host([_focused]) [focusable],:host([tabindex="0"]:focus),:host([tabindex="0"]:focus) [focusable],[tabindex="0"][focusable]:focus{outline:var(--cds-alias-object-interaction-outline-webkit,5px auto -webkit-focus-ring-color)}}`,ZK=sy(function(o,a){return null!=a&&a.constructor===o||a instanceof o});function kO(l,o){return Object.prototype.hasOwnProperty.call(o,l)}var XK=Object.prototype.toString;const YK=function(){return"[object Arguments]"===XK.call(arguments)?function(o){return"[object Arguments]"===XK.call(o)}:function(o){return kO("callee",o)}}(),YIe=Array.isArray||function(o){return null!=o&&o.length>=0&&"[object Array]"===Object.prototype.toString.call(o)};var JIe=Lh(function(o){return null!=o&&"function"==typeof o["fantasy-land/empty"]?o["fantasy-land/empty"]():null!=o&&null!=o.constructor&&"function"==typeof o.constructor["fantasy-land/empty"]?o.constructor["fantasy-land/empty"]():null!=o&&"function"==typeof o.empty?o.empty():null!=o&&null!=o.constructor&&"function"==typeof o.constructor.empty?o.constructor.empty():YIe(o)?[]:qX(o)?"":function KIe(l){return"[object Object]"===Object.prototype.toString.call(l)}(o)?{}:YK(o)?function(){return arguments}():void 0});const e3e=JIe;function KK(l){for(var a,o=[];!(a=l.next()).done;)o.push(a.value);return o}function JK(l,o,a){for(var c=0,u=a.length;c<u;){if(l(o,a[c]))return!0;c+=1}return!1}const JF="function"==typeof Object.is?Object.is:function n3e(l,o){return l===o?0!==l||1/l==1/o:l!=l&&o!=o};var i3e=!{toString:null}.propertyIsEnumerable("toString"),eJ=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],tJ=function(){return arguments.propertyIsEnumerable("length")}(),r3e=function(o,a){for(var c=0;c<o.length;){if(o[c]===a)return!0;c+=1}return!1};const nJ=Lh("function"!=typeof Object.keys||tJ?function(o){if(Object(o)!==o)return[];var a,c,u=[],h=tJ&&YK(o);for(a in o)kO(a,o)&&(!h||"length"!==a)&&(u[u.length]=a);if(i3e)for(c=eJ.length-1;c>=0;)kO(a=eJ[c],o)&&!r3e(u,a)&&(u[u.length]=a),c-=1;return u}:function(o){return Object(o)!==o?[]:Object.keys(o)}),iJ=Lh(function(o){return null===o?"Null":void 0===o?"Undefined":Object.prototype.toString.call(o).slice(8,-1)});function rJ(l,o,a,c){var u=KK(l);function d(f,p){return eN(f,p,a.slice(),c.slice())}return!JK(function(f,p){return!JK(d,p,f)},KK(o),u)}function eN(l,o,a,c){if(JF(l,o))return!0;var u=iJ(l);if(u!==iJ(o)||null==l||null==o)return!1;if("function"==typeof l["fantasy-land/equals"]||"function"==typeof o["fantasy-land/equals"])return"function"==typeof l["fantasy-land/equals"]&&l["fantasy-land/equals"](o)&&"function"==typeof o["fantasy-land/equals"]&&o["fantasy-land/equals"](l);if("function"==typeof l.equals||"function"==typeof o.equals)return"function"==typeof l.equals&&l.equals(o)&&"function"==typeof o.equals&&o.equals(l);switch(u){case"Arguments":case"Array":case"Object":if("function"==typeof l.constructor&&"Promise"===function t3e(l){var o=String(l).match(/^function (\w*)/);return null==o?"":o[1]}(l.constructor))return l===o;break;case"Boolean":case"Number":case"String":if(typeof l!=typeof o||!JF(l.valueOf(),o.valueOf()))return!1;break;case"Date":if(!JF(l.valueOf(),o.valueOf()))return!1;break;case"Error":return l.name===o.name&&l.message===o.message;case"RegExp":if(l.source!==o.source||l.global!==o.global||l.ignoreCase!==o.ignoreCase||l.multiline!==o.multiline||l.sticky!==o.sticky||l.unicode!==o.unicode)return!1}for(var h=a.length-1;h>=0;){if(a[h]===l)return c[h]===o;h-=1}switch(u){case"Map":return l.size===o.size&&rJ(l.entries(),o.entries(),a.concat([l]),c.concat([o]));case"Set":return l.size===o.size&&rJ(l.values(),o.values(),a.concat([l]),c.concat([o]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var d=nJ(l);if(d.length!==nJ(o).length)return!1;var f=a.concat([l]),p=c.concat([o]);for(h=d.length-1;h>=0;){var g=d[h];if(!kO(g,o)||!eN(o[g],l[g],f,p))return!1;h-=1}return!0}const l3e=sy(function(o,a){return eN(o,a,[],[])}),u3e=Lh(function(o){return null!=o&&l3e(o,e3e(o))});function tN(l){return oy(l)||u3e(l)}function oJ(l,o){return l!==o}function cJ(l,...o){return o.forEach(([a,c])=>{l.style[a]=c}),l}function iN(l){return`calc((${l} / var(--cds-global-base)) * 1rem)`}const _3e=(l,o)=>"method"===o.kind&&o.descriptor&&!("value"in o.descriptor)?C2(Pa({},o),{finisher(a){a.createProperty(o.key,l)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:o.key,initializer(){"function"==typeof o.initializer&&(this[o.key]=o.initializer.call(this))},finisher(a){a.createProperty(o.key,l)}};function uJ(l){return(o,a)=>void 0!==a?void o.constructor.createProperty(a,l):_3e(l,o)}function hJ(l,o){switch(o&&o.type){case Array:case Object:return Pa({reflect:!1},o);case String:return Pa({reflect:!0,attribute:am(l),converter:{toAttribute:a=>a||null}},o);case Number:return Pa({reflect:!0,attribute:am(l)},o);case Boolean:return Pa({reflect:!0,attribute:am(l),converter:{toAttribute:a=>a?"":null,fromAttribute:a=>"false"!==a&&null!==a}},o);case Date:return Pa({reflect:!1,converter:{fromAttribute:a=>new Date(a)}},o);default:return Pa({},o)}}function pp(l){return(o,a)=>(function b3e(l,o,a){const c=l.firstUpdated;l.firstUpdated=function(u){if(a&&a.required&&tN(this[o])){const h=a.requiredMessage||function(d="warning",f,p){const g=p.toLocaleLowerCase();return`${iY(d)}: ${f} is required to use ${g} component. Set the JS Property or HTML Attribute.\n\n`+(KX()?`Angular: <${g} [${f}]="..."></${g}>\n`:"")+(eY()?`Vue: <${g} :${f}="..."></${g}>\n`:"")+(JX()?`React: <${function oAe(l){return iY(function sAe(l){return l.split("-").map((o,a)=>a?o.charAt(0).toUpperCase()+o.slice(1).toLowerCase():o).join("")}(l))}(g)} ${m=f,m.startsWith("aria")?am(m):m}={...} />\n`:"")+`HTML: <${g} ${am(f)}="..."></${g}>\nJavaScript: document.querySelector('${g}').${f} = '...';\n\n`;var m}(a.required,o,this.tagName);if("error"===a.required)throw Error(h);Ox.warn(h,this)}c&&c.call(this,u)}}(o,a,l),uJ(hJ(a,l))(o,a))}const T3e=OK`@keyframes fadeInAndOut{0%,to{opacity:0}75%{opacity:1}}:host{--color:currentColor;display:inline-block;height:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));min-height:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));min-width:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));margin:0;vertical-align:middle;fill:var(--color);color:var(--color);contain:strict;cursor:inherit}svg{display:block}:host([size*=xs]){height:var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem));min-height:var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem));min-width:var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem))}:host([size*=sm]){height:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));min-height:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));min-width:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem))}:host([size*=md]){height:var(--cds-global-space-9,calc((24 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-9,calc((24 / var(--cds-global-base,20)) * 1rem));min-height:var(--cds-global-space-9,calc((24 / var(--cds-global-base,20)) * 1rem));min-width:var(--cds-global-space-9,calc((24 / var(--cds-global-base,20)) * 1rem))}:host([size*=lg]){height:var(--cds-global-space-11,calc((36 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-11,calc((36 / var(--cds-global-base,20)) * 1rem));min-height:var(--cds-global-space-11,calc((36 / var(--cds-global-base,20)) * 1rem));min-width:var(--cds-global-space-11,calc((36 / var(--cds-global-base,20)) * 1rem))}:host([size*=xl]){height:var(--cds-global-space-12,calc((48 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-12,calc((48 / var(--cds-global-base,20)) * 1rem));min-height:var(--cds-global-space-12,calc((48 / var(--cds-global-base,20)) * 1rem));min-width:var(--cds-global-space-12,calc((48 / var(--cds-global-base,20)) * 1rem))}:host([size*=xxl]){height:calc(var(--cds-global-space-13,calc((72 / var(--cds-global-base,20)) * 1rem)) - var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem)));width:calc(var(--cds-global-space-13,calc((72 / var(--cds-global-base,20)) * 1rem)) - var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem)));min-height:calc(var(--cds-global-space-13,calc((72 / var(--cds-global-base,20)) * 1rem)) - var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem)));min-width:calc(var(--cds-global-space-13,calc((72 / var(--cds-global-base,20)) * 1rem)) - var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem)))}:host([size*=fit]){height:auto;width:auto;contain:layout}:host([status=success]){--color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([status=danger]){--color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([status=warning]){--color:var(--cds-alias-status-warning-shade, var(--cds-global-color-ochre-600, #ffa600))}:host([status=info]){--color:var(--cds-alias-status-info-shade, var(--cds-global-color-blue-800, #00608a))}:host([inverse]){--color:var(--cds-global-color-construction-200, #cbd4d8)}:host([direction=up]){transform:rotate(0)}:host([direction=down]){transform:rotate(180deg)}:host([direction=right]){transform:rotate(90deg)}:host([direction=left]){transform:rotate(270deg)}:host([flip=horizontal]){transform:scale(-1) rotateX(180deg)}:host([flip=vertical]){transform:scale(-1) rotateY(180deg)}.alert,.badge{fill:var(--badge-color,var(--cds-alias-status-danger,var(--cds-global-color-red-700,#e02200)))}:host([badge=success]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge=danger]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge*=warning]){--badge-color:var(--cds-alias-status-warning-shade, var(--cds-global-color-ochre-600, #ffa600))}:host([badge=inherit]){--badge-color:currentColor}:host([badge=info]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}:host([badge=inherit-triangle]){--badge-color:currentColor}:host([badge][inverse]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge=success][inverse]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge*=warning][inverse]){--badge-color:var(--cds-alias-status-warning-shade, var(--cds-global-color-ochre-600, #ffa600))}:host([badge*=inherit][inverse]){--badge-color:currentColor}:host([badge=info][inverse]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}.cds-internal-dot-1{animation:fadeInAndOut 1.8s ease-in 0s infinite}.cds-internal-dot-2{animation:fadeInAndOut 1.8s ease-out .422s infinite}.cds-internal-dot-3{animation:fadeInAndOut 1.8s ease-out .675s infinite}@media (prefers-reduced-motion){.cds-internal-dot-1,.cds-internal-dot-2,.cds-internal-dot-3{animation:none}}`;var zh,l;function rN(l){return l.badge&&("inherit-triangle"===l.badge||"warning-triangle"===l.badge)}(l=zh||(zh={})).BadSizeValue="bad-value",l.ValidSizeString="value-is-string",l.ValidNumericString="value-is-numeric",l.NilSizeValue="value-is-nil";class Nu extends Ux{constructor(){super(...arguments),this._shape="unknown",this.solid=!1,this.inverse=!1}static get styles(){return[qIe,T3e]}get shape(){return this._shape}set shape(o){if(function g3e(l,o){return!tN(l)&&oJ(l,o)}(o,this._shape)){const a=this._shape;this._shape=o,this.requestUpdate("shape",a)}}get size(){return this._size}set size(o){if(function p3e(l,o){return function d3e(l){return ZK(String,l)||oy(l)}(l)&&oJ(l,o)}(o,this._size)){const a=this._size;this._size=o,function k3e(l,o){const a=function O3e(l){return oy(l)||""===l?zh.NilSizeValue:function dJ(l){return["xxs","xs","sm","md","lg","xl","xxl"].indexOf(l)>-1}(l)?zh.ValidSizeString:!isNaN(parseInt(l,10))&&l.match(/^[0-9 ]+$/)?zh.ValidNumericString:zh.BadSizeValue}(function D3e(l){return oy(l)||""===l?"":function aAe(l,o,a=""){const c=l.split(" "),u=""===a?c.filter(h=>h!==o):c.map(h=>h===o?a:h);return u.length>0?u.join(" "):""}(l,"fit")}(o)),c=!oy(o)&&o.indexOf("fit")>-1;let u="";switch(a){case zh.ValidNumericString:return u=iN(parseInt(o)),void(c?cJ(l,["width","auto"],["height","auto"],["min-width",u],["min-height",u]):cJ(l,["width",u],["height",u],["min-width",u],["min-height",u]));case zh.ValidSizeString:case zh.NilSizeValue:return void function y3e(l,...o){o.forEach(a=>{l.style[a]=""})}(l,"width","height","min-width","min-height");default:return}}(this,o),this.requestUpdate("size",a)}}updated(o){if(o.has("innerOffset")&&this.innerOffset>0){const a=iN(-1*this.innerOffset),c=`calc(100% + ${iN(2*this.innerOffset)})`;this.svg.style.width=c,this.svg.style.height=c,this.svg.style.margin=`${a} 0 0 ${a}`}}firstUpdated(o){super.firstUpdated(o);let a="unknown";this.subscription=Fu.stateUpdates.subscribe(c=>{"iconRegistry"===c.key&&cr.registry[this.shape]&&a!==this.shape&&(a=this.shape,this.requestUpdate("shape"))})}disconnectedCallback(){var o;super.disconnectedCallback(),null===(o=this.subscription)||void 0===o||o.unsubscribe()}render(){return function nN(l){return ZK(String,l)}(cr.registry[this.shape])?$Ie`<span .innerHTML="${cr.registry[this.shape]}"></span>`:WIe`<svg .innerHTML="${function E3e(l){var o,a,c,u,h;const d=null!==(o=cr.registry[l.shape])&&void 0!==o?o:cr.registry.unknown;let f=l.solid&&d.solid?d.solid:d.outline;return l.badge&&!rN(l)&&(f=l.solid?null!==(a=d.solidBadged)&&void 0!==a?a:f:null!==(c=d.outlineBadged)&&void 0!==c?c:f),rN(l)&&(f=l.solid?null!==(u=d.solidAlerted)&&void 0!==u?u:f:null!==(h=d.outlineAlerted)&&void 0!==h?h:f),f}(this)+function M3e(l){let o="";return l.badge&&rN(l)?o='<path d="M26.85 1.14L21.13 11a1.28 1.28 0 001.1 2h11.45a1.28 1.28 0 001.1-2l-5.72-9.86a1.28 1.28 0 00-2.21 0z" class="alert" />':l.badge&&(o='<circle cx="30" cy="6" r="5" class="badge" />'),o}(this)}" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"></svg>`}}ks([pp({type:String})],Nu.prototype,"shape",null),ks([pp({type:String})],Nu.prototype,"size",null),ks([pp({type:String})],Nu.prototype,"direction",void 0),ks([pp({type:String})],Nu.prototype,"flip",void 0),ks([pp({type:Boolean})],Nu.prototype,"solid",void 0),ks([pp({type:String})],Nu.prototype,"status",void 0),ks([pp({type:Boolean})],Nu.prototype,"inverse",void 0),ks([pp({type:String})],Nu.prototype,"badge",void 0),ks([function x3e(l){return(o,a)=>{const c=hJ(a,l);return c&&(c.reflect=!!(null==l?void 0:l.reflect)&&l.reflect,c.reflect&&!(null==l?void 0:l.attribute)&&(c.attribute="_"+am(a))),uJ(c)(o,a)}}({type:Number})],Nu.prototype,"innerOffset",void 0),ks([function S3e(l,o){return(({finisher:l,descriptor:o})=>(a,c)=>{var u;if(void 0===c){const h=null!==(u=a.originalKey)&&void 0!==u?u:a.key,d=null!=o?{kind:"method",placement:"prototype",key:h,descriptor:o(a.key)}:C2(Pa({},a),{key:h});return null!=l&&(d.finisher=function(f){l(f,h)}),d}{const h=a.constructor;void 0!==o&&Object.defineProperty(a,c,o(c)),null==l||l(h,c)}})({descriptor:a=>{const c={get(){var u,h;return null!==(h=null===(u=this.renderRoot)||void 0===u?void 0:u.querySelector(l))&&void 0!==h?h:null},enumerable:!0,configurable:!0};if(o){const u="symbol"==typeof a?Symbol():"__"+a;c.get=function(){var h,d;return void 0===this[u]&&(this[u]=null!==(d=null===(h=this.renderRoot)||void 0===h?void 0:h.querySelector(l))&&void 0!==d?d:null),this[u]}}return c}})}("svg")],Nu.prototype,"svg",void 0),function BIe(l,o){XX()&&ZX(["customElements"])&&LIe(l,o,window.customElements)}("cds-icon",Nu);const Bn=["*"],H3e=["clrLoading",""];function $3e(l,o){1&l&&(D(0,"span"),me(1,"span",2),k()),2&l&&(R(1),F("@spinner",void 0))}function W3e(l,o){if(1&l){const a=gt();D(0,"span"),D(1,"span",3),ee("@validated.done",function(){Le(a);const u=Z();return u.loadingStateChange(u.buttonState.DEFAULT)}),k(),k()}2&l&&(R(1),F("@validated",void 0))}function G3e(l,o){1&l&&(D(0,"span"),ut(1),k()),2&l&&F("@defaultButton",void 0)}function Q3e(l,o){1&l&&me(0,"label")}const j3e=[[["","clrCheckbox",""],["","clrToggle",""]],[["label"]]],q3e=["[clrCheckbox],[clrToggle]","label"];function Z3e(l,o){1&l&&me(0,"label")}function X3e(l,o){1&l&&ut(0,2,["*ngIf","showHelper"])}function Y3e(l,o){1&l&&me(0,"cds-icon",5)}function K3e(l,o){1&l&&me(0,"cds-icon",6)}function J3e(l,o){1&l&&ut(0,3,["*ngIf","showInvalid"])}function ePe(l,o){1&l&&ut(0,4,["*ngIf","showValid"])}const tPe=[[["label"]],[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],nPe=["label","clr-checkbox-wrapper,clr-toggle-wrapper","clr-control-helper","clr-control-error","clr-control-success"];function CPe(l,o){1&l&&me(0,"label")}function SPe(l,o){1&l&&me(0,"cds-icon",5)}function wPe(l,o){1&l&&me(0,"cds-icon",6)}function TPe(l,o){1&l&&ut(0,2,["*ngIf","showHelper"])}function OPe(l,o){1&l&&ut(0,3,["*ngIf","showInvalid"])}function DPe(l,o){1&l&&ut(0,4,["*ngIf","showValid"])}const kPe=[[["label"]],[["","clrInput",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],MPe=["label","[clrInput]","clr-control-helper","clr-control-error","clr-control-success"];function EPe(l,o){1&l&&me(0,"label")}const APe=[[["","clrRadio",""]],[["label"]]],IPe=["[clrRadio]","label"];function PPe(l,o){1&l&&me(0,"label")}function RPe(l,o){1&l&&ut(0,2,["*ngIf","showHelper"])}function FPe(l,o){1&l&&me(0,"cds-icon",5)}function NPe(l,o){1&l&&me(0,"cds-icon",6)}function LPe(l,o){1&l&&ut(0,3,["*ngIf","showInvalid"])}function BPe(l,o){1&l&&ut(0,4,["*ngIf","showValid"])}const VPe=[[["label"]],[["clr-radio-wrapper"]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],zPe=["label","clr-radio-wrapper","clr-control-helper","clr-control-error","clr-control-success"];function UPe(l,o){1&l&&me(0,"label")}function HPe(l,o){1&l&&me(0,"cds-icon",5)}function $Pe(l,o){1&l&&me(0,"cds-icon",6)}function WPe(l,o){1&l&&ut(0,2,["*ngIf","showHelper"])}function GPe(l,o){1&l&&ut(0,3,["*ngIf","showInvalid"])}function QPe(l,o){1&l&&ut(0,4,["*ngIf","showValid"])}const jPe=[[["label"]],[["","clrTextarea",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],qPe=["label","[clrTextarea]","clr-control-helper","clr-control-error","clr-control-success"];function VFe(l,o){if(1&l){const a=gt();D(0,"button",11),ee("click",function(){return Le(a),Z(2).close()}),me(1,"cds-icon",12),k()}2&l&&et("aria-label",Z(2).commonStrings.keys.close)}function zFe(l,o){if(1&l){const a=gt();D(0,"div",1),D(1,"div",2),ee("@fadeDown.done",function(u){return Le(a),Z().fadeDone(u)}),D(2,"div",3),ne(3),k(),D(4,"div",4),ut(5),D(6,"div",5),D(7,"div",6),D(8,"div",7),ut(9,1),k(),Y(10,VFe,2,1,"button",8),k(),D(11,"div",9),ut(12,2),k(),ut(13,3),k(),k(),D(14,"div",3),ne(15),k(),k(),D(16,"div",10),ee("click",function(){Le(a);const u=Z();return u.staticBackdrop||u.close()}),k(),k()}if(2&l){const a=Z();R(1),Et("modal-sm","sm"==a.size)("modal-lg","lg"==a.size)("modal-xl","xl"==a.size),F("@fadeDown",a.skipAnimation),et("aria-hidden",!a._open)("aria-labelledby",a.modalId),R(2),en(a.commonStrings.keys.modalContentStart),R(5),pT("id",a.modalId),R(2),F("ngIf",a.closable),R(5),en(a.commonStrings.keys.modalContentEnd),R(1),F("@fade",void 0)}}const UFe=[[["",8,"modal-nav"]],[["",8,"modal-title"]],[["",8,"modal-body"]],[["",8,"modal-footer"]]],HFe=[".modal-nav",".modal-title",".modal-body",".modal-footer"];function sNe(l,o){if(1&l&&(wr(0),ne(1),Tr()),2&l){const a=Z(3);R(1),en(a.commonStrings.keys.danger)}}function oNe(l,o){if(1&l&&(D(0,"div",14),Y(1,sNe,2,1,"ng-container",0),k()),2&l){const a=Z().$implicit,c=Z();R(1),F("ngIf",a.status===c.AccordionStatus.Error)}}function aNe(l,o){if(1&l&&(wr(0),ne(1),Tr()),2&l){const a=Z(2);R(1),en(a.commonStrings.keys.danger)}}function lNe(l,o){if(1&l&&(wr(0),ne(1),Tr()),2&l){const a=Z(2);R(1),en(a.commonStrings.keys.success)}}function cNe(l,o){if(1&l){const a=gt();D(0,"div",15),ee("@toggle.done",function(){Le(a);const u=Z().$implicit;return Z().collapsePanelOnAnimationDone(u)}),D(1,"div",16),ut(2,2),k(),k()}2&l&&F("@toggle",void 0)}function uNe(l,o){if(1&l){const a=gt();wr(0),Y(1,oNe,2,1,"div",1),D(2,"div",2),D(3,"div",3),D(4,"button",4,5),ee("click",function(){return Le(a),Z().togglePanel()}),ix(6,"async"),D(7,"span",6),Y(8,aNe,2,1,"ng-container",0),Y(9,lNe,2,1,"ng-container",0),k(),D(10,"span",7),me(11,"cds-icon",8),me(12,"span",9),me(13,"cds-icon",10),me(14,"cds-icon",11),k(),ut(15),ut(16,1),k(),k(),D(17,"div",12),Y(18,cNe,3,1,"div",13),k(),k(),Tr()}if(2&l){const a=o.$implicit,c=Z();let u;R(1),F("ngIf",a.status!==c.AccordionStatus.Inactive),R(1),F("ngClass",c.getPanelStateClasses(a)),R(2),Et("clr-accordion-header-has-description",(null==(u=rx(6,16,c.accordionDescription.changes))?null:u.length)||c.accordionDescription.length),F("id",c.getAccordionHeaderId(a.templateId))("disabled",c.isAccordion&&a.disabled),et("aria-disabled",!c.isAccordion&&a.disabled)("aria-controls",c.getAccordionContentId(a.templateId))("aria-expanded",a.open),R(4),F("ngIf",a.status===c.AccordionStatus.Error),R(1),F("ngIf",a.status===c.AccordionStatus.Complete),R(8),F("@skipInitialRender",void 0)("id",c.getAccordionContentId(a.templateId)),et("aria-hidden",!a.open)("aria-labelledby",c.getAccordionHeaderId(a.templateId)),R(1),F("ngIf",a.open)}}const pJ=[[["clr-accordion-title"],["clr-step-title"]],[["clr-accordion-description"],["clr-step-description"]],"*"],gJ=["clr-accordion-title, clr-step-title","clr-accordion-description, clr-step-description","*"];function _Ne(l,o){if(1&l&&(D(0,"span"),ne(1),k()),2&l){const a=Z();R(1),en(a.displayValue)}}let Ws=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275dir=vt({type:l,selectors:[["clr-icon"]]}),l})(),fr=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275dir=vt({type:l,selectors:[["cds-icon"]]}),l})(),pr=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi]]}),l})();var qi=(()=>(function(l){l[l.START=0]="START",l[l.CENTER=.5]="CENTER",l[l.END=1]="END"}(qi||(qi={})),qi))(),Bo=(()=>(function(l){l[l.VERTICAL=0]="VERTICAL",l[l.HORIZONTAL=1]="HORIZONTAL"}(Bo||(Bo={})),Bo))(),ei=(()=>(function(l){l.ArrowLeft="ArrowLeft",l.ArrowUp="ArrowUp",l.ArrowRight="ArrowRight",l.ArrowDown="ArrowDown",l.Backspace="Backspace",l.Tab="Tab",l.Enter="Enter",l.Escape="Escape",l.Space="Space",l.Home="Home",l.End="End"}(ei||(ei={})),ei))(),Lu=(()=>(function(l){l.ArrowUp="Up",l.ArrowDown="Down",l.ArrowRight="Right",l.ArrowLeft="Left",l.Space="Spacebar",l.Escape="Esc",l.Home="Home",l.End="End",l.Enter="Enter",l.Tab="Tab"}(Lu||(Lu={})),Lu))();function Hx(l){return l===ei.ArrowUp||l===Lu.ArrowUp?ei.ArrowUp:l===ei.ArrowDown||l===Lu.ArrowDown?ei.ArrowDown:l===ei.ArrowRight||l===Lu.ArrowRight?ei.ArrowRight:l===ei.ArrowLeft||l===Lu.ArrowLeft?ei.ArrowLeft:l===ei.Space||l===Lu.Space?ei.Space:l===ei.Escape||l===Lu.Escape?ei.Escape:l}let vr=(()=>{class l{constructor(){this._open=!1,this._openChange=new mt,this._openEventChange=new mt,this._popoverAligned=new mt}get openChange(){return this._openChange.asObservable()}set openEvent(a){this._openEvent=a,this._openEventChange.next(a)}get openEvent(){return this._openEvent}getEventChange(){return this._openEventChange.asObservable()}set open(a){this._open!==(a=!!a)&&(this._open=a,this._openChange.next(a))}get open(){return this._open}get originalEvent(){return this._openEvent}toggleWithEvent(a){(function sN(l){const o=Hx(l.key);(o===ei.ArrowUp||o===ei.ArrowDown||o===ei.ArrowLeft||o===ei.ArrowRight)&&l.preventDefault()})(a),this.openEvent=a,this.open=!this.open}get popoverAligned(){return this._popoverAligned.asObservable()}popoverAlignedEmit(a){this._popoverAligned.next(a)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),Qx=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[]]}),l})();class jx{}var ms=(()=>(function(l){l[l.DEFAULT=0]="DEFAULT",l[l.LOADING=1]="LOADING",l[l.SUCCESS=2]="SUCCESS",l[l.ERROR=3]="ERROR"}(ms||(ms={})),ms))();let oN=(()=>{class l{constructor(a){this.listener=a,this._loadingState=ms.DEFAULT}get loadingState(){return this._loadingState}set loadingState(a){!0===a?a=ms.LOADING:a||(a=ms.DEFAULT),a!==this._loadingState&&(this._loadingState=a,this.listener&&this.listener.loadingStateChange(a))}ngOnDestroy(){this.loadingState=ms.DEFAULT}}return l.\u0275fac=function(a){return new(a||l)(L(jx,8))},l.\u0275dir=vt({type:l,selectors:[["","clrLoading",""]],inputs:{loadingState:["clrLoading","loadingState"]}}),l})(),TNe=0;const So=new Zn("UNIQUE_ID"),$a={provide:So,useFactory:function ONe(){return"clr-id-"+TNe++}};var Tl=(()=>(function(l){l[l.BEFORE=-1]="BEFORE",l[l.AFTER=1]="AFTER"}(Tl||(Tl={})),Tl))();class Ol{}Ol["top-right"]={axis:Bo.VERTICAL,side:Tl.BEFORE,anchor:qi.END,content:qi.END},Ol["top-left"]={axis:Bo.VERTICAL,side:Tl.BEFORE,anchor:qi.START,content:qi.START},Ol["bottom-right"]={axis:Bo.VERTICAL,side:Tl.AFTER,anchor:qi.END,content:qi.END},Ol["bottom-left"]={axis:Bo.VERTICAL,side:Tl.AFTER,anchor:qi.START,content:qi.START},Ol["right-top"]={axis:Bo.HORIZONTAL,side:Tl.AFTER,anchor:qi.CENTER,content:qi.END},Ol["right-bottom"]={axis:Bo.HORIZONTAL,side:Tl.AFTER,anchor:qi.START,content:qi.START},Ol["left-top"]={axis:Bo.HORIZONTAL,side:Tl.BEFORE,anchor:qi.CENTER,content:qi.END},Ol["left-bottom"]={axis:Bo.HORIZONTAL,side:Tl.BEFORE,anchor:qi.START,content:qi.START};const DNe={open:"Open",close:"Close",show:"Show",hide:"Hide",expand:"Expand",collapse:"Collapse",more:"More",select:"Select",selectAll:"Select All",previous:"Previous",next:"Next",current:"Jump to current",info:"Info",success:"Success",warning:"Warning",danger:"Error",rowActions:"Available actions",pickColumns:"Show or hide columns",showColumns:"Show Columns",sortColumn:"Sort Column",firstPage:"First Page",lastPage:"Last Page",nextPage:"Next Page",previousPage:"Previous Page",currentPage:"Current Page",totalPages:"Total Pages",filterItems:"Filter items",minValue:"Min value",maxValue:"Max value",modalContentStart:"Beginning of Modal Content",modalContentEnd:"End of Modal Content",showColumnsMenuDescription:"Show or hide columns menu",allColumnsSelected:"All columns selected",signpostToggle:"Signpost Toggle",signpostClose:"Signpost Close",loading:"Loading",detailPaneStart:"Start of row details",detailPaneEnd:"End of row details",singleSelectionAriaLabel:"Single selection header",singleActionableAriaLabel:"Single actionable header",detailExpandableAriaLabel:"Toggle more row content",datagridFilterAriaLabel:"Filter dialog",datagridFilterDialogAriaLabel:"Toggle column filter",columnSeparatorAriaLabel:"Column resize handle",columnSeparatorDescription:"Use left or right key to resize the column",alertCloseButtonAriaLabel:"Close alert",datepickerToggle:"Toggle datepicker",datepickerPreviousMonth:"Previous month",datepickerCurrentMonth:"Current month",datepickerNextMonth:"Next month",datepickerPreviousDecade:"Previous decade",datepickerNextDecade:"Next decade",datepickerCurrentDecade:"Current decade",datepickerSelectMonthText:"Select month, the current month is {CALENDAR_MONTH}",datepickerSelectYearText:"Select year, the current year is {CALENDAR_YEAR}",stackViewChanged:"Value changed.",verticalNavGroupToggle:"Toggle vertical navigation group",verticalNavToggle:"Toggle vertical navigation",timelineStepNotStarted:"Not started",timelineStepCurrent:"Current",timelineStepSuccess:"Completed",timelineStepError:"Error",timelineStepProcessing:"In progress",comboboxDelete:"Delete selected option",comboboxSearching:'Searching for matches for "{INPUT}"',comboboxSelection:"Selection",comboboxSelected:"Selected",comboboxNoResults:"No results",comboboxOpen:"Show options",dategridExpandableBeginningOf:"Beginning of",dategridExpandableEndOf:"End of",dategridExpandableRowContent:"Expandable row content",dategridExpandableRowsHelperText:"Screen reader table commands may not work for viewing expanded content, please use your screen reader's browse mode to read the content exposed by this button"};let or=(()=>{class l{constructor(){this._strings=DNe}localize(a){this._strings=Object.assign(Object.assign({},this._strings),a)}get keys(){return this._strings}parse(a,c={}){const u=Object.keys(c);let h=a;return u.length&&u.forEach(d=>{h=h.replace(`{${d}}`,c[d])}),h}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),kNe=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr,Qx]]}),l})(),lN=(()=>{class l{constructor(a,c){this.el=a,this.renderer=c,this.buttonState=ms,this.state=ms.DEFAULT,this.clrLoadingChange=new wt(!1)}loadingStateChange(a){if(a!==this.state){switch(this.state=a,a){case ms.DEFAULT:this.renderer.removeStyle(this.el.nativeElement,"width"),this.renderer.removeStyle(this.el.nativeElement,"transform"),this.disabled||this.renderer.removeAttribute(this.el.nativeElement,"disabled");break;case ms.LOADING:this.setExplicitButtonWidth(),this.renderer.setStyle(this.el.nativeElement,"transform","translatez(0)"),this.renderer.setAttribute(this.el.nativeElement,"disabled","");break;case ms.SUCCESS:this.setExplicitButtonWidth();break;case ms.ERROR:this.loadingStateChange(ms.DEFAULT)}this.clrLoadingChange.emit(a)}}setExplicitButtonWidth(){if(this.el.nativeElement&&this.el.nativeElement.getBoundingClientRect){const a=this.el.nativeElement.getBoundingClientRect();this.renderer.setStyle(this.el.nativeElement,"width",`${a.width}px`)}}}return l.\u0275fac=function(a){return new(a||l)(L(Sn),L(yi))},l.\u0275cmp=qe({type:l,selectors:[["button","clrLoading",""]],hostVars:1,hostBindings:function(a,c){2&a&&et("disabled",c.disabled?"":null)},inputs:{disabled:"disabled"},outputs:{clrLoadingChange:"clrLoadingChange"},features:[dn([{provide:jx,useExisting:l}])],attrs:H3e,ngContentSelectors:Bn,decls:4,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"spinner","spinner-inline"],[1,"spinner","spinner-inline","spinner-check"]],template:function(a,c){1&a&&(Yt(),wr(0,0),Y(1,$3e,2,1,"span",1),Y(2,W3e,2,1,"span",1),Y(3,G3e,2,1,"span",1),Tr()),2&a&&(F("ngSwitch",c.state),R(1),F("ngSwitchCase",c.buttonState.LOADING),R(1),F("ngSwitchCase",c.buttonState.SUCCESS),R(1),F("ngSwitchCase",c.buttonState.DEFAULT))},directives:[HT,pZ],encapsulation:2,data:{animation:[Jl("defaultButton",[io(":enter",[Bi({opacity:0}),Zo("200ms 100ms ease-in",Bi({opacity:1}))]),io(":leave",[Bi({opacity:0})])]),Jl("spinner",[io(":enter",[Bi({opacity:0}),Zo("200ms 100ms ease-in",Bi({opacity:1}))]),io(":leave",[Bi({opacity:1}),Zo("100ms ease-out",Bi({opacity:0}))])]),Jl("validated",[io(":enter",[Zo("600ms",zAe([Bi({transform:"scale(0,0)",offset:0}),Bi({opacity:1,offset:.2}),Bi({transform:"scale(1.2,1.2)",offset:.4}),Bi({transform:"scale(.9,.9)",offset:.6}),Bi({transform:"scale(1,1)",offset:1})]))]),io(":leave",[Bi({opacity:1}),Zo("100ms ease-out",Bi({opacity:0}))])])]}}),l})(),MNe=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi]]}),l})(),ENe=(()=>{class l{constructor(){cr.addIcons(lY)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[MNe,kNe]}),l})(),ANe=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=qe({type:l,selectors:[["ng-component"]],decls:0,vars:0,template:function(a,c){},encapsulation:2}),l})(),MO=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({}),l})();class EO{constructor(o,a,c=0){if(this.injector=a.injector,!this.injector.get(o,null)){const u=this.injector.get(jd),h=this.injector.get(Sn);a.createComponent(u.resolveComponentFactory(ANe));const d=u.resolveComponentFactory(o),f=[];f[c]=[h.nativeElement];const p=a.createComponent(d,void 0,void 0,f);a.remove(0),p.instance._dynamic=!0,this.injector=p.injector}}get(o,a){return this.injector.get(o,a)}}let INe=0,Bu=(()=>{class l{constructor(){this._id="clr-form-control-"+ ++INe,this._idChange=new Hr(this._id)}get id(){return this._id}set id(a){this._id=a,this._idChange.next(a)}get idChange(){return this._idChange.asObservable()}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),Zc=(()=>{class l{constructor(){this._controlChanges=new mt,this._helpers=new mt}get controlChanges(){return this._controlChanges.asObservable()}setControl(a){this._controlChanges.next(a)}get helpersChange(){return this._helpers.asObservable()}setHelpers(a){this._helpers.next(a)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();var pa=(()=>(function(l){l.NONE="NONE",l.VALID="VALID",l.INVALID="INVALID"}(pa||(pa={})),pa))();let Hh=(()=>{class l{constructor(a){this.ngControlService=a,this.subscriptions=[],this._statusChanges=new Hr(pa.NONE),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(c=>{c&&(this.control=c,this.subscriptions.push(this.control.statusChanges.subscribe(()=>{this.triggerStatusChange()})))}))}get statusChanges(){return this._statusChanges.asObservable()}triggerStatusChange(){if(this.control){const a=pa[this.control.status];this._statusChanges.next(this.control.touched&&["VALID","INVALID"].includes(a)?a:pa.NONE)}}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return l.\u0275fac=function(a){return new(a||l)(Ae(Zc))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();var rf=(()=>(function(l){l.VERTICAL="vertical",l.HORIZONTAL="horizontal",l.COMPACT="compact"}(rf||(rf={})),rf))();let sf=(()=>{class l{constructor(){this.minLabelSize=1,this.maxLabelSize=12,this.layout=rf.HORIZONTAL,this.layoutValues=Object.keys(rf).map(a=>rf[a]),this._labelSize=2}set labelSize(a){this.labelSizeIsValid(a)&&(this._labelSize=a)}get labelSize(){return this._labelSize}isVertical(){return this.layout===rf.VERTICAL}isHorizontal(){return this.layout===rf.HORIZONTAL}isCompact(){return this.layout===rf.COMPACT}get layoutClass(){return`clr-form-${this.layout}`}isValid(a){return this.layoutValues.indexOf(a)>-1}labelSizeIsValid(a){return Number.isInteger(a)&&a>=this.minLabelSize&&a<=this.maxLabelSize}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),$h=(()=>{class l{constructor(a){this.layoutService=a,this.className=""}controlClass(a=pa.NONE,c=!1,u=""){const h=[this.className,u];switch(a){case pa.VALID:h.push("clr-success");break;case pa.INVALID:h.push("clr-error")}return c&&this.layoutService&&-1===this.className.indexOf("clr-col")&&h.push(`clr-col-md-${this.layoutService.maxLabelSize-this.layoutService.labelSize} clr-col-12`),h.join(" ").trim()}initControlClass(a,c){c&&c.className&&(this.className=c.className,c.className.split(" ").forEach(h=>{h.startsWith("clr-col")&&a.removeClass(c,h)}))}}return l.\u0275fac=function(a){return new(a||l)(Ae(sf,8))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),cN=(()=>{class l{constructor(){this._touched=new mt}get touchedChange(){return this._touched.asObservable()}markAsTouched(){this._touched.next()}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),FNe=0,fm=(()=>{class l{constructor(){this._id="clr-form-container-"+ ++FNe,this._idChange=new Hr(this._id)}get id(){return this._id}set id(a){this._id=a,this._idChange.next(a)}get idChange(){return this._idChange.asObservable()}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();let uN=(()=>{class l{constructor(a,c){this.controlIdService=a,this.containerIdService=c,this.controlIdSuffix="abstract"}get id(){return this.containerIdService?`${this.containerIdService.id}-${this.controlIdSuffix}`:this.controlIdService?`${this.controlIdService.id}-${this.controlIdSuffix}`:null}}return l.\u0275fac=function(a){return new(a||l)(L(Bu,8),L(fm,8))},l.\u0275dir=vt({type:l}),l})(),qx=(()=>{class l{constructor(a,c,u,h,d,f){this.vcr=a,this.wrapperType=c,this.ngControl=h,this.subscriptions=[],this.index=0,this.renderer=d,this.el=f;try{this.ngControlService=u.get(Zc),this.ifControlStateService=u.get(Hh),this.controlClassService=u.get($h),this.markControlService=u.get(cN)}catch(p){}this.controlClassService&&this.controlClassService.initControlClass(d,f.nativeElement),this.markControlService&&this.subscriptions.push(this.markControlService.touchedChange.subscribe(()=>{this.markAsTouched()})),this.ngControlService&&this.subscriptions.push(this.ngControlService.helpersChange.subscribe(p=>{this.setAriaDescribedBy(p)}))}get id(){return this._id}set id(a){this._id=a,this.controlIdService&&(this.controlIdService.id=a)}triggerValidation(){this.ifControlStateService&&(this.ngControl&&!this.ngControl.touched&&this.markAsTouched(),this.ifControlStateService.triggerStatusChange())}markAsTouched(){this.ngControl.control.markAsTouched(),this.ngControl.control.updateValueAndValidity()}getProviderFromContainer(a,c){try{return this._containerInjector.get(a,c)}catch(u){return c}}ngOnInit(){this._containerInjector=new EO(this.wrapperType,this.vcr,this.index),this.controlIdService=this._containerInjector.get(Bu);try{this.containerIdService=this._containerInjector.get(fm)}catch(a){}this._id?this.controlIdService.id=this._id:this._id=this.controlIdService.id,this.ngControlService&&this.ngControlService.setControl(this.ngControl)}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}setAriaDescribedBy(a){if(a.show){const c=this.getAriaDescribedById(a);if(null!==c)return void this.renderer.setAttribute(this.el.nativeElement,"aria-describedby",c)}this.renderer.removeAttribute(this.el.nativeElement,"aria-describedby")}getAriaDescribedById(a){let c="helper";return a.showInvalid?c="error":a.showValid&&(c="success"),this.containerIdService?this.containerIdService.id.concat("-",c):this.controlIdService?this.controlIdService.id.concat("-",c):null}}return l.\u0275fac=function(a){return new(a||l)(L(Pi),L(j2),L(gr),L(wl),L(yi),L(Sn))},l.\u0275dir=vt({type:l,hostVars:1,hostBindings:function(a,c){1&a&&ee("blur",function(){return c.triggerValidation()}),2&a&&Eh("id",c.id)},inputs:{id:"id"}}),l})(),ss=(()=>{class l{constructor(a,c,u,h,d){this.controlIdService=a,this.layoutService=c,this.ngControlService=u,this.renderer=h,this.el=d,this.subscriptions=[],this.enableGrid=!0}get labelText(){return this.el.nativeElement&&this.el.nativeElement.textContent}ngOnInit(){(this.controlIdService||this.ngControlService)&&this.renderer.addClass(this.el.nativeElement,"clr-control-label"),this.enableGrid&&this.layoutService&&!this.layoutService.isVertical()&&this.el.nativeElement&&this.el.nativeElement.className.indexOf("clr-col")<0&&(this.renderer.addClass(this.el.nativeElement,"clr-col-12"),this.renderer.addClass(this.el.nativeElement,`clr-col-md-${this.layoutService.labelSize}`)),this.controlIdService&&!this.forAttr&&this.subscriptions.push(this.controlIdService.idChange.subscribe(a=>this.forAttr=a))}disableGrid(){this.enableGrid=!1}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return l.\u0275fac=function(a){return new(a||l)(L(Bu,8),L(sf,8),L(Zc,8),L(yi),L(Sn))},l.\u0275dir=vt({type:l,selectors:[["label"]],hostVars:1,hostBindings:function(a,c){2&a&&et("for",c.forAttr)},inputs:{forAttr:["for","forAttr"]}}),l})(),NNe=(()=>{class l extends uN{constructor(a,c){super(a,c),this.controlIdService=a,this.containerIdService=c,this.controlIdSuffix="success"}}return l.\u0275fac=function(a){return new(a||l)(L(Bu,8),L(fm,8))},l.\u0275cmp=qe({type:l,selectors:[["clr-control-success"]],hostVars:3,hostBindings:function(a,c){2&a&&(et("id",c.id),Et("clr-subtext",!0))},features:[pn],ngContentSelectors:Bn,decls:1,vars:0,template:function(a,c){1&a&&(Yt(),ut(0))},encapsulation:2}),l})(),hN=(()=>{class l extends uN{constructor(a,c){super(a,c),this.controlIdService=a,this.containerIdService=c,this.controlIdSuffix="error"}}return l.\u0275fac=function(a){return new(a||l)(L(Bu,8),L(fm,8))},l.\u0275cmp=qe({type:l,selectors:[["clr-control-error"]],hostVars:3,hostBindings:function(a,c){2&a&&(et("id",c.id),Et("clr-subtext",!0))},features:[pn],ngContentSelectors:Bn,decls:1,vars:0,template:function(a,c){1&a&&(Yt(),ut(0))},encapsulation:2}),l})(),bJ=(()=>{class l extends uN{constructor(a,c){super(a,c),this.controlIdService=a,this.containerIdService=c,this.controlIdSuffix="helper"}}return l.\u0275fac=function(a){return new(a||l)(L(Bu,8),L(fm,8))},l.\u0275cmp=qe({type:l,selectors:[["clr-control-helper"]],hostVars:3,hostBindings:function(a,c){2&a&&(et("id",c.id),Et("clr-subtext",!0))},features:[pn],ngContentSelectors:Bn,decls:1,vars:0,template:function(a,c){1&a&&(Yt(),ut(0))},encapsulation:2}),l})(),Zx=(()=>{class l{constructor(a,c,u,h){this.ifControlStateService=a,this.layoutService=c,this.controlClassService=u,this.ngControlService=h,this.subscriptions=[],this._dynamic=!1,this.subscriptions.push(this.ifControlStateService.statusChanges.subscribe(d=>{this.state=d,this.updateHelpers()})),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(d=>{this.control=d}))}get showHelper(){return!!this.controlHelperComponent&&(!!this.controlHelperComponent&&this.state===pa.NONE||!this.controlSuccessComponent&&this.state===pa.VALID||!this.controlErrorComponent&&this.state===pa.INVALID)}get showValid(){return this.state===pa.VALID&&!!this.controlSuccessComponent}get showInvalid(){return this.state===pa.INVALID&&!!this.controlErrorComponent}ngAfterContentInit(){this.updateHelpers()}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}controlClass(){return this.controlClassService.controlClass(this.controlSuccessComponent||this.state!==pa.VALID?this.state:pa.NONE,this.addGrid())}addGrid(){return this.layoutService&&!this.layoutService.isVertical()}updateHelpers(){this.ngControlService&&this.ngControlService.setHelpers({show:this.showInvalid||this.showHelper||this.showValid,showInvalid:this.showInvalid,showHelper:this.showHelper,showValid:this.showValid})}}return l.\u0275fac=function(a){return new(a||l)(L(Hh),L(sf,8),L($h),L(Zc))},l.\u0275dir=vt({type:l,contentQueries:function(a,c,u){if(1&a&&(Yn(u,ss,5),Yn(u,NNe,5),Yn(u,hN,5),Yn(u,bJ,5)),2&a){let h;Vt(h=zt())&&(c.label=h.first),Vt(h=zt())&&(c.controlSuccessComponent=h.first),Vt(h=zt())&&(c.controlErrorComponent=h.first),Vt(h=zt())&&(c.controlHelperComponent=h.first)}}}),l})(),AO=(()=>{class l{constructor(a,c){this.layoutService=a,this.markControlService=c}set labelSize(a){const c=parseInt(a,10)||2;this.layoutService.labelSize=c}markAsTouched(){this.markControlService.markAsTouched()}onFormSubmit(){this.markAsTouched()}}return l.\u0275fac=function(a){return new(a||l)(L(sf),L(cN))},l.\u0275dir=vt({type:l,selectors:[["","clrForm",""]],contentQueries:function(a,c,u){if(1&a&&Yn(u,ss,5),2&a){let h;Vt(h=zt())&&(c.labels=h)}},hostVars:6,hostBindings:function(a,c){1&a&&ee("submit",function(){return c.onFormSubmit()}),2&a&&Et("clr-form",!0)("clr-form-horizontal",c.layoutService.isHorizontal())("clr-form-compact",c.layoutService.isCompact())},inputs:{labelSize:["clrLabelSize","labelSize"]},features:[dn([sf,cN])]}),l})(),LNe=(()=>{class l{constructor(a){this.layoutService=a}ngOnInit(){this.layout&&this.layoutService.isValid(this.layout)&&(this.layoutService.layout=this.layout)}}return l.\u0275fac=function(a){return new(a||l)(L(sf))},l.\u0275dir=vt({type:l,selectors:[["","clrForm","","clrLayout",""]],inputs:{layout:["clrLayout","layout"]}}),l})(),Vo=(()=>{class l{constructor(){cr.addIcons(Yl,Kl)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr]]}),l})();const dN=new Zn("IS_TOGGLE"),VNe={provide:dN,useFactory:function BNe(){return new Hr(!1)}};let mp=(()=>{class l{constructor(a){this._dynamic=!1,this.toggle=!1,this.subscriptions=[],this.subscriptions.push(a.subscribe(c=>{this.toggle=c}))}ngOnInit(){this.label&&this.label.disableGrid()}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return l.\u0275fac=function(a){return new(a||l)(L(dN))},l.\u0275cmp=qe({type:l,selectors:[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],contentQueries:function(a,c,u){if(1&a&&Yn(u,ss,7),2&a){let h;Vt(h=zt())&&(c.label=h.first)}},hostVars:4,hostBindings:function(a,c){2&a&&Et("clr-checkbox-wrapper",!c.toggle)("clr-toggle-wrapper",c.toggle)},features:[dn([Bu,VNe])],ngContentSelectors:q3e,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(a,c){1&a&&(Yt(j3e),ut(0),ut(1,1),Y(2,Q3e,1,0,"label",0)),2&a&&(R(2),F("ngIf",!c.label))},directives:[yn,ss],encapsulation:2}),l})(),vp=(()=>{class l extends qx{constructor(a,c,u,h,d,f){super(a,mp,c,u,h,d),this.toggle=f}ngOnInit(){super.ngOnInit();const a=this.getProviderFromContainer(dN,null);a&&null!==this.toggle&&a.next(!0)}}return l.\u0275fac=function(a){return new(a||l)(L(Pi),L(gr),L(wl,10),L(yi),L(Sn),gv("clrToggle"))},l.\u0275dir=vt({type:l,selectors:[["","clrCheckbox",""],["","clrToggle",""]],features:[pn]}),l})(),IO=(()=>{class l extends Zx{constructor(a,c,u,h){super(h,a,c,u),this.layoutService=a,this.controlClassService=c,this.ngControlService=u,this.ifControlStateService=h,this.inline=!1}set clrInline(a){this.inline="string"==typeof a?"false"!==a:!!a}get clrInline(){return this.inline}ngAfterContentInit(){this.setAriaRoles()}setAriaRoles(){this.role=this.checkboxes.length?"group":null}}return l.\u0275fac=function(a){return new(a||l)(L(sf,8),L($h),L(Zc),L(Hh))},l.\u0275cmp=qe({type:l,selectors:[["clr-checkbox-container"],["clr-toggle-container"]],contentQueries:function(a,c,u){if(1&a&&Yn(u,vp,5),2&a){let h;Vt(h=zt())&&(c.checkboxes=h)}},hostVars:7,hostBindings:function(a,c){2&a&&(et("role",c.role),Et("clr-form-control",!0)("clr-form-control-disabled",null==c.control?null:c.control.disabled)("clr-row",c.addGrid()))},inputs:{clrInline:"clrInline"},features:[dn([Hh,Zc,$h,fm]),pn],ngContentSelectors:nPe,decls:10,vars:9,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-subtext-wrapper"],["class","clr-validate-icon","status","danger","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","status","success","shape","check-circle","aria-hidden","true",4,"ngIf"],["status","danger","shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["status","success","shape","check-circle","aria-hidden","true",1,"clr-validate-icon"]],template:function(a,c){1&a&&(Yt(tPe),ut(0),Y(1,Z3e,1,0,"label",0),D(2,"div",1),ut(3,1),D(4,"div",2),Y(5,X3e,1,0,"ng-content",0),Y(6,Y3e,1,0,"cds-icon",3),Y(7,K3e,1,0,"cds-icon",4),Y(8,J3e,1,0,"ng-content",0),Y(9,ePe,1,0,"ng-content",0),k(),k()),2&a&&(R(1),F("ngIf",!c.label&&c.addGrid()),R(1),Et("clr-control-inline",c.clrInline),F("ngClass",c.controlClass()),R(3),F("ngIf",c.showHelper),R(1),F("ngIf",c.showInvalid),R(1),F("ngIf",c.showValid),R(1),F("ngIf",c.showInvalid),R(1),F("ngIf",c.showValid))},directives:[yn,ss,ii,fr],encapsulation:2}),l})(),zNe=(()=>{class l{constructor(){cr.addIcons(Yl,Kl)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr,Vo,MO],Vo]}),l})();new Zn("IF_ACTIVE_ID");let Wa=(()=>{class l{constructor(){this.expandable=0,this._loading=!1,this._expanded=!1,this._expandChange=new mt}get loading(){return this._loading}set loading(a){(a=!!a)!==this._loading&&(this._loading=a)}get expanded(){return this._expanded}set expanded(a){(a=!!a)!==this._expanded&&(this._expanded=a,this._expandChange.next(a))}toggle(){this.expanded=!this._expanded}get expandChange(){return this._expandChange.asObservable()}loadingStateChange(a){this.loading=a===ms.LOADING}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),fN=(()=>{class l{constructor(a,c,u,h,d){this.template=a,this.container=c,this.el=u,this.renderer=h,this.expand=d,this._expanded=!1,this.expandedChange=new wt(!0),this._subscriptions=[],this._subscriptions.push(d.expandChange.subscribe(()=>{this.updateView(),this.expandedChange.emit(this.expand.expanded)}))}get expanded(){return this._expanded}set expanded(a){"boolean"==typeof a&&(this.expand.expanded=a,this._expanded=a)}updateView(){if(!this.expand.expanded||0===this.container.length)if(this.template)this.expand.expanded?this.container.createEmbeddedView(this.template):this.container.clear();else try{this.renderer.setStyle(this.el.nativeElement,"display",this.expand.expanded?null:"none")}catch(a){}}ngOnInit(){this.expand.expandable++,this.updateView()}ngOnDestroy(){this.expand.expandable--,this._subscriptions.forEach(a=>a.unsubscribe())}}return l.\u0275fac=function(a){return new(a||l)(L(gs,8),L(Pi),L(Sn),L(yi),L(Wa))},l.\u0275dir=vt({type:l,selectors:[["","clrIfExpanded",""]],inputs:{expanded:["clrIfExpanded","expanded"]},outputs:{expandedChange:"clrIfExpandedChange"}}),l})(),Xc=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi]]}),l})(),QNe=(()=>{class l{constructor(){this._previousFocusTraps=[]}get current(){return this._current}set current(a){this._previousFocusTraps.push(this._current),this._current=a}get nbFocusTrappers(){return this._previousFocusTraps.length}activatePreviousTrapper(){this._current=this._previousFocusTraps.pop()}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),yp=(()=>{class l{constructor(a,c,u,h,d){this.el=a,this.injector=c,this.focusTrapsTracker=u,this.renderer=h,this.platformId=d,this.localFocusEscaped=!1,this._config={strict:!0},this.document=this.injector.get(is),this.focusTrapsTracker.current=this}set config(a){this._config=Object.assign(this._config,""===a?{}:a)}onFocusIn(a){const c=this.el.nativeElement;this.focusTrapsTracker.current!==this||!lr(this.platformId)||this.localFocusEscaped||c.contains(a.target)||(a.target===this.topReboundEl&&c.contains(a.relatedTarget)?(this.focusLastFocusable(),this.focusTrapElIfOutside()):a.target===this.bottomReboundEl&&c.contains(a.relatedTarget)?(this.focusFirstFocusable(),this.focusTrapElIfOutside()):this._config.strict?this.el.nativeElement.focus():this.localFocusEscaped=!0)}createFocusableOffScreenEl(){const a=this.document.createElement("span");return this.renderer.setAttribute(a,"tabindex","0"),this.renderer.addClass(a,"offscreen-focus-rebounder"),a}addReboundEls(){if(lr(this.platformId)){this.topReboundEl=this.createFocusableOffScreenEl(),this.bottomReboundEl=this.createFocusableOffScreenEl();const a=this.el.nativeElement;this.renderer.insertBefore(a.parentElement,this.topReboundEl,a),a.nextSibling?this.renderer.insertBefore(a.parentNode,this.bottomReboundEl,a.nextSibling):this.renderer.appendChild(a.parentNode,this.bottomReboundEl)}}removeReboundEls(){lr(this.platformId)&&this.topReboundEl&&this.bottomReboundEl&&(this.parentElement.removeChild(this.topReboundEl),this.parentElement.removeChild(this.bottomReboundEl),delete this.topReboundEl,delete this.bottomReboundEl)}setPreviousFocus(){this.previousActiveElement&&this.previousActiveElement.focus&&this.previousActiveElement.focus()}ngOnInit(){lr(this.platformId)&&(this.renderer.setAttribute(this.el.nativeElement,"tabindex","-1"),this.el.nativeElement.focus())}ngAfterViewInit(){lr(this.platformId)&&(this.previousActiveElement=this.document.activeElement,this.parentElement=this.el.nativeElement.parentElement),this.addReboundEls()}get potentiallyFocusableEls(){return[...this.el.nativeElement.querySelectorAll('[href]:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), textarea:not([disabled]):not([tabindex="-1"]), [contenteditable="true"]:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"]) ')]}focusFirstFocusable(){for(let a=0;a<this.potentiallyFocusableEls.length&&(this.firstFocusableEl=this.focusElement(this.potentiallyFocusableEls[a]),!this.firstFocusableEl);a++);}focusLastFocusable(){for(let a=this.potentiallyFocusableEls.length-1;a>=0&&(this.lastFocusableEl=this.focusElement(this.potentiallyFocusableEls[a]),!this.lastFocusableEl);a--);}focusTrapElIfOutside(){this.el.nativeElement.contains(document.activeElement)||this.el.nativeElement.focus()}focusElement(a){return a&&a.focus&&(a.focus(),document.activeElement===a)?a:null}ngOnDestroy(){this.removeReboundEls(),this.setPreviousFocus(),this.focusTrapsTracker.activatePreviousTrapper()}}return l.\u0275fac=function(a){return new(a||l)(L(Sn),L(gr),L(QNe),L(yi),L(ns))},l.\u0275dir=vt({type:l,selectors:[["","clrFocusTrap",""]],hostBindings:function(a,c){1&a&&ee("focusin",function(h){return c.onFocusIn(h)},!1,Bb)},inputs:{config:["clrFocusTrap","config"]}}),l})(),PO=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi]]}),l})();function Yc(l){return null!==l&&("string"==typeof l?l.length>=0:"boolean"==typeof l&&l)}let cLe=(()=>{class l{constructor(){cr.addIcons(Yl,Kl,ay,hAe,dAe)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,MO,Xc,Qx,pr,PO,Vo]]}),l})(),Oy=(()=>{class l extends Zx{}return l.\u0275fac=function(){let o;return function(c){return(o||(o=fs(l)))(c||l)}}(),l.\u0275cmp=qe({type:l,selectors:[["clr-input-container"]],hostVars:6,hostBindings:function(a,c){2&a&&Et("clr-form-control",!0)("clr-form-control-disabled",null==c.control?null:c.control.disabled)("clr-row",c.addGrid())},features:[dn([Hh,Zc,Bu,$h]),pn],ngContentSelectors:MPe,decls:10,vars:7,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-input-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(a,c){1&a&&(Yt(kPe),ut(0),Y(1,CPe,1,0,"label",0),D(2,"div",1),D(3,"div",2),ut(4,1),Y(5,SPe,1,0,"cds-icon",3),Y(6,wPe,1,0,"cds-icon",4),k(),Y(7,TPe,1,0,"ng-content",0),Y(8,OPe,1,0,"ng-content",0),Y(9,DPe,1,0,"ng-content",0),k()),2&a&&(R(1),F("ngIf",!c.label&&c.addGrid()),R(1),F("ngClass",c.controlClass()),R(3),F("ngIf",c.showInvalid),R(1),F("ngIf",c.showValid),R(1),F("ngIf",c.showHelper),R(1),F("ngIf",c.showInvalid),R(1),F("ngIf",c.showValid))},directives:[yn,ss,ii,fr],encapsulation:2}),l})(),Jx=(()=>{class l extends qx{constructor(a,c,u,h,d){super(a,Oy,c,u,h,d),this.index=1}}return l.\u0275fac=function(a){return new(a||l)(L(Pi),L(gr),L(wl,10),L(yi),L(Sn))},l.\u0275dir=vt({type:l,selectors:[["","clrInput",""]],hostVars:2,hostBindings:function(a,c){2&a&&Et("clr-input",!0)},features:[pn]}),l})(),EJ=(()=>{class l{constructor(){cr.addIcons(Yl,Kl)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,fp,pr,Vo],Vo]}),l})();new Zn(void 0);let dLe=(()=>{class l{constructor(){cr.addIcons(fAe,pAe,Yl,Kl)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,fp,pr,Vo],Vo]}),l})(),wN=(()=>{class l{constructor(){this._dynamic=!1}ngOnInit(){this.label&&this.label.disableGrid()}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=qe({type:l,selectors:[["clr-radio-wrapper"]],contentQueries:function(a,c,u){if(1&a&&Yn(u,ss,7),2&a){let h;Vt(h=zt())&&(c.label=h.first)}},hostVars:2,hostBindings:function(a,c){2&a&&Et("clr-radio-wrapper",!0)},features:[dn([Bu])],ngContentSelectors:IPe,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(a,c){1&a&&(Yt(APe),ut(0),ut(1,1),Y(2,EPe,1,0,"label",0)),2&a&&(R(2),F("ngIf",!c.label))},directives:[yn,ss],encapsulation:2}),l})(),LO=(()=>{class l extends qx{constructor(a,c,u,h,d){super(a,wN,c,u,h,d)}}return l.\u0275fac=function(a){return new(a||l)(L(Pi),L(gr),L(wl,10),L(yi),L(Sn))},l.\u0275dir=vt({type:l,selectors:[["","clrRadio",""]],features:[pn]}),l})(),AJ=(()=>{class l extends Zx{constructor(a,c,u,h){super(h,a,c,u),this.layoutService=a,this.controlClassService=c,this.ngControlService=u,this.ifControlStateService=h,this.inline=!1}set clrInline(a){this.inline="string"==typeof a?"false"!==a:!!a}get clrInline(){return this.inline}ngAfterContentInit(){this.setAriaRoles()}setAriaRoles(){this.role=this.radios.length?"group":null}}return l.\u0275fac=function(a){return new(a||l)(L(sf,8),L($h),L(Zc),L(Hh))},l.\u0275cmp=qe({type:l,selectors:[["clr-radio-container"]],contentQueries:function(a,c,u){if(1&a&&Yn(u,LO,5),2&a){let h;Vt(h=zt())&&(c.radios=h)}},hostVars:7,hostBindings:function(a,c){2&a&&(et("role",c.role),Et("clr-form-control",!0)("clr-form-control-disabled",null==c.control?null:c.control.disabled)("clr-row",c.addGrid()))},inputs:{clrInline:"clrInline"},features:[dn([Zc,Hh,$h,fm]),pn],ngContentSelectors:zPe,decls:10,vars:9,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-subtext-wrapper"],["class","clr-validate-icon","status","danger","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["status","danger","shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(a,c){1&a&&(Yt(VPe),ut(0),Y(1,PPe,1,0,"label",0),D(2,"div",1),ut(3,1),D(4,"div",2),Y(5,RPe,1,0,"ng-content",0),Y(6,FPe,1,0,"cds-icon",3),Y(7,NPe,1,0,"cds-icon",4),Y(8,LPe,1,0,"ng-content",0),Y(9,BPe,1,0,"ng-content",0),k(),k()),2&a&&(R(1),F("ngIf",!c.label&&c.addGrid()),R(1),Et("clr-control-inline",c.clrInline),F("ngClass",c.controlClass()),R(3),F("ngIf",c.showHelper),R(1),F("ngIf",c.showInvalid),R(1),F("ngIf",c.showValid),R(1),F("ngIf",c.showInvalid),R(1),F("ngIf",c.showValid))},directives:[yn,ss,ii,fr],encapsulation:2}),l})(),fLe=(()=>{class l{constructor(){cr.addIcons(Yl,Kl)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,Vo,MO,pr],Vo]}),l})(),pLe=(()=>{class l{constructor(){cr.addIcons(Yl,Kl)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,fp,pr,Vo],Vo]}),l})(),IJ=(()=>{class l extends Zx{}return l.\u0275fac=function(){let o;return function(c){return(o||(o=fs(l)))(c||l)}}(),l.\u0275cmp=qe({type:l,selectors:[["clr-textarea-container"]],hostVars:6,hostBindings:function(a,c){2&a&&Et("clr-form-control",!0)("clr-form-control-disabled",null==c.control?null:c.control.disabled)("clr-row",c.addGrid())},features:[dn([Hh,Zc,Bu,$h]),pn],ngContentSelectors:qPe,decls:10,vars:7,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-textarea-wrapper"],["class","clr-validate-icon","status","danger","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["status","danger","shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(a,c){1&a&&(Yt(jPe),ut(0),Y(1,UPe,1,0,"label",0),D(2,"div",1),D(3,"div",2),ut(4,1),Y(5,HPe,1,0,"cds-icon",3),Y(6,$Pe,1,0,"cds-icon",4),k(),Y(7,WPe,1,0,"ng-content",0),Y(8,GPe,1,0,"ng-content",0),Y(9,QPe,1,0,"ng-content",0),k()),2&a&&(R(1),F("ngIf",!c.label&&c.addGrid()),R(1),F("ngClass",c.controlClass()),R(3),F("ngIf",c.showInvalid),R(1),F("ngIf",c.showValid),R(1),F("ngIf",c.showHelper),R(1),F("ngIf",c.showInvalid),R(1),F("ngIf",c.showValid))},directives:[yn,ss,ii,fr],encapsulation:2}),l})(),TN=(()=>{class l extends qx{constructor(a,c,u,h,d){super(a,IJ,c,u,h,d),this.index=1}}return l.\u0275fac=function(a){return new(a||l)(L(Pi),L(gr),L(wl,10),L(yi),L(Sn))},l.\u0275dir=vt({type:l,selectors:[["","clrTextarea",""]],hostVars:2,hostBindings:function(a,c){2&a&&Et("clr-textarea",!0)},features:[pn]}),l})(),gLe=(()=>{class l{constructor(){cr.addIcons(Yl,Kl)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,fp,pr,Vo],Vo]}),l})(),mLe=(()=>{class l{constructor(){cr.addIcons(Yl,Kl)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,Vo,MO,pr],Vo]}),l})(),vLe=(()=>{class l{constructor(){cr.addIcons(Yl,Kl)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,EJ,pr]]}),l})();class BO{}function PJ(l){return[$a,l,{provide:BO,useExisting:l}]}var Ga=(()=>(function(l){l.UP="up",l.DOWN="down",l.LEFT="left",l.RIGHT="right"}(Ga||(Ga={})),Ga))();class _Le extends class yLe{containsItem(o){return this.model===o}select(o){this.model=o}unselect(o){this.containsItem(o)&&(this.model=null)}isEmpty(){return!this.model}pop(){const o=this.model;return this.model=null,o}toString(o){return this.model?o&&this.model[o]?this.model[o]:this.model.toString():""}}{constructor(){super(...arguments),this._focusChanged=new Hr(null)}get focusChanged(){return this._focusChanged.asObservable()}select(o){this.model!==o&&(this.model=o,this._focusChanged.next(o))}}let xLe=(()=>{class l{constructor(){this.loading=!1,this._currentInput="",this._inputChanged=new Hr(""),this.inputChanged=this._inputChanged.asObservable(),this._selectionChanged=new SF(1)}get currentInput(){return this._currentInput}set currentInput(a){""===a&&!this.multiselectable&&this.setSelectionValue(null),this._currentInput=a,this._inputChanged.next(a)}get selectionChanged(){return this._selectionChanged.asObservable()}select(a){null==a||this.selectionModel.containsItem(a)||(this.selectionModel.select(a),this._selectionChanged.next(this.selectionModel))}toggle(a){null!=a&&(this.selectionModel.containsItem(a)?this.selectionModel.unselect(a):this.selectionModel.select(a),this._selectionChanged.next(this.selectionModel))}unselect(a){null==a||!this.selectionModel.containsItem(a)||(this.selectionModel.unselect(a),this._selectionChanged.next(this.selectionModel))}get multiselectable(){return this.selectionModel instanceof class bLe{containsItem(o){return!!this.model&&this.model.includes(o)}select(o){this.addItem(o)}unselect(o){this.removeItem(o)}isEmpty(){return!(this.model&&this.model.length>0)}pop(){let o;return this.model&&this.model.length>0&&(o=this.model[this.model.length-1],this.removeItem(o)),o}toString(o,a=-1){let c="";return this.model&&(a>-1?this.model[a]&&(c+=o&&this.model[a][o]?this.model[a][o]:this.model[a].toString()):this.model.forEach(u=>{c+=o&&u[o]?u[o]:u.toString(),c+=" "})),c.trim()}addItem(o){this.containsItem(o)||(this.model=this.model||[],this.model.push(o))}removeItem(o){if(null==this.model)return;const a=this.model.indexOf(o);a>-1&&this.model.splice(a,1),0===this.model.length&&(this.model=null)}}}setSelectionValue(a){!this.selectionModel||this.selectionModel.model===a||!this.selectionModel.model&&!a||(this.selectionModel.model=a,this._selectionChanged.next(this.selectionModel))}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();PJ((()=>{class l{constructor(a,c,u,h,d){this.id=a,this.toggleService=u,this.selectionService=h,this.platformId=d,this.pseudoFocus=new _Le,this.optionData=[],this.handleFocusSubscription(),this.renderer=c.createRenderer(null,null)}handleFocusSubscription(){this.toggleService.openChange.subscribe(a=>{a||(this.pseudoFocus.model=null)})}get trigger(){return this._trigger}set trigger(a){this._trigger=a,this.addFocusOnBlurListener(a)}get listbox(){return this._listbox}set listbox(a){this._listbox=a,this.addFocusOnBlurListener(a)}get textInput(){return this._textInput}set textInput(a){this._textInput=a,this.renderer.listen(a,"keydown",c=>!this.handleTextInput(c)),this.addFocusOnBlurListener(a)}moveFocusTo(a){let c=this.optionData.findIndex(u=>u.equals(this.pseudoFocus.model));a===Ga.UP?-1===c||0===c?c=this.optionData.length-1:c--:a===Ga.DOWN&&(-1===c||c===this.optionData.length-1?c=0:c++),this.pseudoFocus.select(this.optionData[c]),this.pseudoFocus.model&&this.pseudoFocus.model.el&&this.pseudoFocus.model.el.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}openAndMoveTo(a){this.toggleService.open?this.moveFocusTo(a):(this.toggleService.openChange.pipe(rv(1)).subscribe(c=>{c&&this.moveFocusTo(a)}),this.toggleService.open=!0)}handleTextInput(a){let c=!1;const u=Hx(a.key);if(a)switch(u){case ei.Enter:this.toggleService.open&&this.pseudoFocus.model&&(this.selectionService.multiselectable?this.selectionService.toggle(this.pseudoFocus.model.value):this.selectionService.select(this.pseudoFocus.model.value),c=!0);break;case ei.Space:this.toggleService.open||(this.toggleService.open=!0,c=!0);break;case ei.ArrowUp:this.preventViewportScrolling(a),this.openAndMoveTo(Ga.UP),c=!0;break;case ei.ArrowDown:this.preventViewportScrolling(a),this.openAndMoveTo(Ga.DOWN),c=!0;break;default:a.key!==ei.Tab&&(!this.selectionService.multiselectable||a.key!==ei.Backspace)&&a.key!==ei.Escape&&!this.toggleService.open&&(this.toggleService.open=!0)}return c}preventViewportScrolling(a){a.preventDefault(),a.stopImmediatePropagation()}focusInput(){this.textInput&&lr(this.platformId)&&this.textInput.focus()}addFocusOnBlurListener(a){lr(this.platformId)&&this.renderer.listen(a,"blur",c=>{this.focusOutOfComponent(c)&&(this.toggleService.open=!1,this.componentCdRef&&this.componentCdRef.detectChanges())})}focusOutOfComponent(a){const c=a.relatedTarget||document.activeElement;return!(this.textInput.contains(c)||this.trigger.contains(c)||this.listbox.contains(c))}focusFirstActive(){if(this.optionData.length>0)if(this.selectionService.selectionModel.isEmpty())this.pseudoFocus.select(this.optionData[0]);else{let a;a=this.selectionService.multiselectable?this.selectionService.selectionModel.model[0]:this.selectionService.selectionModel.model;const c=this.optionData.find(u=>u.value===a);this.pseudoFocus.select(c)}}addOptionValues(a){this.optionData=a}}return l.\u0275fac=function(a){return new(a||l)(Ae(So),Ae(jv),Ae(vr),Ae(xLe),Ae(ns))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})()),new Zn("POPOVER_HOST_ANCHOR");let zO=(()=>{class l{constructor(a){this.renderer=a,this._unlistenFuncs=[]}get current(){return this._current}reset(a){this._current=a}listenToArrowKeys(a){this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowup",()=>!this.move(Ga.UP))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowdown",()=>!this.move(Ga.DOWN))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowleft",()=>!this.move(Ga.LEFT))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowright",()=>!this.move(Ga.RIGHT)))}registerContainer(a){this.renderer.setAttribute(a,"tabindex","0"),this.listenToArrowKeys(a),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.space",()=>!this.activateCurrent())),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.enter",()=>!this.activateCurrent()))}moveTo(a){void 0!==a&&(this.current&&this.current.blur(),a.focus(),this._current=a)}move(a){let c=!1;if(this.current){const u=this.current[a];u&&(function fY(l){return!!l&&(l instanceof xn||ce(l.lift)&&ce(l.subscribe))}(u)?u:li(u)).subscribe(d=>{d&&(this.moveTo(d),c=!0)})}return c}activateCurrent(){return!(!this.current||!this.current.activate||(this.current.activate(),0))}detachListeners(){this._unlistenFuncs.forEach(a=>a())}}return l.\u0275fac=function(a){return new(a||l)(Ae(yi))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();new ql,new Wd;let eC=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi]]}),l})(),FJ=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi]]}),l})(),TLe=(()=>{class l{constructor(){cr.addIcons(Yl,Kl,ay,Dx)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,fp,pr,FJ,Vo,Xc,Qx,eC],Vo,Xc]}),l})(),NJ=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi],Vo,zNe,TLe,cLe,EJ,dLe,fLe,pLe,gLe,mLe,vLe]}),l})(),DN=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi]]}),l})(),OLe=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi]]}),l})(),HJ=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi]]}),l})(),$J=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi]]}),l})();const WJ=new Zn("FOCUS_ON_VIEW_INIT"),DLe={provide:WJ,useValue:!0};let EN=(()=>{class l{constructor(a,c,u,h,d){this.el=a,this.platformId=c,this.focusOnViewInit=u,this.renderer=d,this.directFocus=!0,this._isEnabled=this.focusOnViewInit,this.document=h}onFocusout(){this.directFocus||(this.renderer.removeAttribute(this.el.nativeElement,"tabindex"),this.renderer.setStyle(this.el.nativeElement,"outline",null))}set isEnabled(a){this.focusOnViewInit&&"boolean"==typeof a&&(this._isEnabled=a)}ngAfterViewInit(){this.focus()}focus(){!lr(this.platformId)||!this._isEnabled||this.document&&this.document.activeElement!==this.el.nativeElement&&(this.el.nativeElement.focus(),this.document.activeElement!==this.el.nativeElement&&(this.directFocus=!1,this.renderer.setAttribute(this.el.nativeElement,"tabindex","-1"),this.renderer.setStyle(this.el.nativeElement,"outline","none"),this.el.nativeElement.focus()))}}return l.\u0275fac=function(a){return new(a||l)(L(Sn),L(ns),L(WJ),L(is),L(yi))},l.\u0275dir=vt({type:l,selectors:[["","clrFocusOnViewInit",""]],hostBindings:function(a,c){1&a&&ee("focusout",function(){return c.onFocusout()})},inputs:{isEnabled:["clrFocusOnViewInit","isEnabled"]}}),l})(),gm=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({providers:[DLe],imports:[[bi]]}),l})(),ky=(()=>{class l{constructor(){this._chocolate=new mt,this.disableChocolateCheck=!1}get chocolate(){return this._chocolate.asObservable()}ngAfterViewChecked(){this.disableChocolateCheck||this._chocolate.next()}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275dir=vt({type:l}),l})(),My=(()=>{class l{constructor(a,c){this.subscription=c.chocolate.subscribe(()=>{this.latestFlavor!==this.flavor&&(c.disableChocolateCheck=!0,a.detectChanges(),c.disableChocolateCheck=!1)})}ngAfterContentChecked(){this.latestFlavor=this.flavor}ngOnDestroy(){this.subscription.unsubscribe()}}return l.\u0275fac=function(a){return new(a||l)(L(xl),L(ky))},l.\u0275dir=vt({type:l}),l})(),zu=(()=>{class l{constructor(){this.toggleState=!1,this._state=new Hr(this.toggleState),this._enabled=!1}get enabled(){return this._enabled}set enabled(a){this._enabled=a}get stateChange(){return this._state.asObservable()}close(){this.toggleState=!1,this._state.next(this.toggleState),this.button&&(this.button.focus(),this.button=null)}open(a,c){this.cache=a,this.button=c,this.toggleState=!0,this._state.next(this.toggleState)}toggle(a,c){this.isRowOpen(a)||!a?this.close():this.open(a,c)}get state(){return this.cache}isRowOpen(a){return!(!this.toggleState||this.cache!==a)}get isOpen(){return!0===this.toggleState}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),Ay=(()=>{class l{constructor(a){this.detailService=a,this.expandableCount=0}register(){this.expandableCount++}unregister(){this.expandableCount--}get hasExpandableRow(){return!this.detailService.enabled&&this.expandableCount>0}}return l.\u0275fac=function(a){return new(a||l)(Ae(zu))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();var va=(()=>(function(l){l[l.WIDTH=0]="WIDTH",l[l.HIDDEN=1]="HIDDEN"}(va||(va={})),va))();Object.keys(va).map(l=>va[l]).filter(l=>l===parseInt(l,10));let QN=(()=>{class l{constructor(a){this.expandableRowsCount=a,this.expandableRowsCount&&this.expandableRowsCount.register()}ngOnDestroy(){this.expandableRowsCount&&this.expandableRowsCount.unregister()}}return l.\u0275fac=function(a){return new(a||l)(L(Ay,8))},l.\u0275dir=vt({type:l,selectors:[["","clrIfExpanded",""]]}),l})();new Zn("COLUMN_STATE");let jLe=(()=>{class l{constructor(){cr.addIcons(gAe,mAe,Dx,vAe,yAe,_Ae,cY,bAe,xAe)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr,NJ,fp,DN,Xc,OLe,$J,HJ,eC,Qx,PO,gm]]}),l})(),XLe=(()=>{class l{constructor(){cr.addIcons(ay)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,fp,pr,$J]]}),l})();new ql,new Wd;let n5e=(()=>{class l{constructor(){cr.addIcons(ay)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr,DN]]}),l})(),i5e=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[jLe,XLe,n5e]}),l})();class gee{static linkParent(o,a,c){o.forEach(u=>u[c]=a)}static linkVertical(o,a=!0){o.forEach((c,u)=>{u>0&&(c.up=o[u-1]),u<o.length-1&&(c.down=o[u+1])}),a&&o.length>1&&(o[0].up=o[o.length-1],o[o.length-1].down=o[0])}}function mee(l,o,a){return xn.create(c=>{o(c);const u=l.subscribe(c);return()=>{u.unsubscribe(),a&&a(c)}})}let ZN=(()=>{class l{constructor(a,c,u,h,d,f){this.id=a,this.renderer=c,this.parent=u,this.toggleService=h,this.focusService=d,this.platformId=f,this._unlistenFuncs=[],this.focusBackOnTrigger=!1,this.resetChildren(),this.moveToFirstItemWhenOpen(),this.parent||this.handleRootFocus()}moveToFirstItemWhenOpen(){this.toggleService.openChange.subscribe(a=>{a&&this.toggleService.originalEvent&&setTimeout(()=>{this.focusService.moveTo(this),this.focusService.move(this.parent?Ga.RIGHT:Ga.DOWN)})})}handleRootFocus(){this.toggleService.openChange.subscribe(a=>{a||(this.focusService.reset(this),this.focusBackOnTrigger&&this.focus()),this.focusBackOnTrigger=a})}get trigger(){return this._trigger}set trigger(a){this._trigger=a,this.parent?this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowright",c=>this.toggleService.toggleWithEvent(c))):(this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowup",c=>this.toggleService.toggleWithEvent(c))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowdown",c=>this.toggleService.toggleWithEvent(c))),this.focusService.listenToArrowKeys(a))}get container(){return this._container}set container(a){this._container=a,this._unlistenFuncs.push(this.renderer.listen(a,"keydown.tab",c=>this.toggleService.toggleWithEvent(c))),this.parent?this._unlistenFuncs.push(this.renderer.listen(a,"keydown.esc",c=>{this.focusService.move(Ga.LEFT),c.stopPropagation()})):(this.focusService.registerContainer(a),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.esc",c=>this.toggleService.toggleWithEvent(c))),this._unlistenFuncs.push(this.renderer.listen(a,"blur",c=>{this.children.pipe(rv(1)).subscribe(h=>h.forEach(d=>d.blur()));const u=c.relatedTarget||document.activeElement;u&&lr(this.platformId)&&(a.contains(u)||u===this.trigger)||(this.focusBackOnTrigger=!1,this.toggleService.open=!1)})))}focus(){this.trigger&&lr(this.platformId)&&this.trigger.focus()}blur(){this.trigger&&lr(this.platformId)&&this.trigger.blur()}activate(){lr(this.platformId)&&this.trigger.click()}openAndGetChildren(){return mee(this.children,()=>this.toggleService.open=!0)}closeAndGetThis(){return mee(li(this),()=>this.toggleService.open=!1)}resetChildren(){this.children=new SF(1),this.parent?this.right=this.openAndGetChildren().pipe(fn(a=>a[0])):(this.down=this.openAndGetChildren().pipe(fn(a=>a[0])),this.up=this.openAndGetChildren().pipe(fn(a=>a[a.length-1])))}addChildren(a){gee.linkVertical(a),this.parent&&gee.linkParent(a,this.closeAndGetThis(),Ga.LEFT),this.children.next(a)}ngOnDestroy(){this._unlistenFuncs.forEach(a=>a()),this.focusService.detachListeners()}}return l.\u0275fac=function(a){return new(a||l)(Ae(So),Ae(yi),Ae(l,12),Ae(vr),Ae(zO),Ae(ns))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();PJ(ZN);new ql,new Wd;let KN=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi],Xc,pr]}),l})(),tD=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275dir=vt({type:l,selectors:[["",8,"alert-text"]]}),l})(),Cee=(()=>{class l{constructor(){cr.addIcons(Kl,uY,Yl,CAe,Dx)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr,KN]]}),l})(),g5e=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[Cee]}),l})(),m5e=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr]]}),l})(),v5e=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr,KN]]}),l})(),y5e=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi]]}),l})();new Zn("TABS_ID");let T5e=(()=>{class l{constructor(){cr.addIcons(lY)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,Xc,pr,y5e,FJ],Xc]}),l})(),D5e=(()=>{class l{constructor(){cr.addIcons(ay,cY)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr,Xc,gm],Xc,pr,gm]}),l})(),k5e=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[m5e,v5e,T5e,D5e]}),l})(),Eee=(()=>{class l{constructor(a){this._document=a}stopScrolling(){this._document.body.classList.add("no-scrolling")}resumeScrolling(){this._document.body.classList.contains("no-scrolling")&&this._document.body.classList.remove("no-scrolling")}}return l.\u0275fac=function(a){return new(a||l)(Ae(is))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),hf=(()=>{class l{constructor(a,c,u){this._scrollingService=a,this.commonStrings=c,this.modalId=u,this._open=!1,this._openChanged=new wt(!1),this.closable=!0,this.staticBackdrop=!0,this.skipAnimation="false",this.bypassScrollService=!1,this.stopClose=!1,this.altClose=new wt(!1)}ngOnChanges(a){!this.bypassScrollService&&a&&a.hasOwnProperty("_open")&&(a._open.currentValue?this._scrollingService.stopScrolling():this._scrollingService.resumeScrolling())}ngOnDestroy(){this._scrollingService.resumeScrolling()}open(){this._open||(this._open=!0,this._openChanged.emit(!0))}close(){this.stopClose?this.altClose.emit(!1):!this.closable||!this._open||(this._open=!1,this.focusTrap.setPreviousFocus())}fadeDone(a){"void"===a.toState&&this._openChanged.emit(!1)}}return l.\u0275fac=function(a){return new(a||l)(L(Eee),L(or),L(So))},l.\u0275cmp=qe({type:l,selectors:[["clr-modal"]],viewQuery:function(a,c){if(1&a&&ai(yp,5),2&a){let u;Vt(u=zt())&&(c.focusTrap=u.first)}},hostVars:2,hostBindings:function(a,c){1&a&&ee("keyup.escape",function(){return c.close()},!1,UW),2&a&&Et("open",c._open)},inputs:{_open:["clrModalOpen","_open"],closable:["clrModalClosable","closable"],size:["clrModalSize","size"],staticBackdrop:["clrModalStaticBackdrop","staticBackdrop"],skipAnimation:["clrModalSkipAnimation","skipAnimation"],bypassScrollService:["clrModalOverrideScrollService","bypassScrollService"],stopClose:["clrModalPreventClose","stopClose"]},outputs:{_openChanged:"clrModalOpenChange",altClose:"clrModalAlternateClose"},features:[dn([$a],[Eee]),vo],ngContentSelectors:HFe,decls:1,vars:1,consts:[["clrFocusTrap","","class","modal",4,"ngIf"],["clrFocusTrap","",1,"modal"],["role","dialog","aria-modal","true",1,"modal-dialog"],[1,"clr-sr-only"],[1,"modal-content-wrapper"],[1,"modal-content"],[1,"modal-header--accessible"],["clrFocusOnViewInit","",1,"modal-title-wrapper",3,"id"],["type","button","class","close",3,"click",4,"ngIf"],[1,"modal-body-wrapper"],["aria-hidden","true",1,"modal-backdrop",3,"click"],["type","button",1,"close",3,"click"],["shape","window-close"]],template:function(a,c){1&a&&(Yt(UFe),Y(0,zFe,17,14,"div",0)),2&a&&F("ngIf",c._open)},directives:[yn,yp,EN,fr],styles:["[_nghost-%COMP%]{display:none}.open[_nghost-%COMP%]{display:inline}"],data:{animation:[Jl("fadeDown",[io("* => false",[Bi({opacity:0,transform:"translate(0, -25%)"}),Zo("0.2s ease-in-out")]),io("false => *",[Zo("0.2s ease-in-out",Bi({opacity:0,transform:"translate(0, -25%)"}))])]),Jl("fade",[io("void => *",[Bi({opacity:0}),Zo("0.2s ease-in-out",Bi({opacity:.85}))]),io("* => void",[Zo("0.2s ease-in-out",Bi({opacity:0}))])])]}}),l})(),df=(()=>{class l{constructor(a,c,u){this.renderer=a,this.host=c,this.tabindex="0",this.unlisteners=[],u.runOutsideAngular(()=>{new ResizeObserver(()=>this.addOrRemoveTabIndex()).observe(this.host.nativeElement),this.unlisteners.push(this.renderer.listen(this.host.nativeElement,"mouseup",()=>{this.addOrRemoveTabIndex()}),this.renderer.listen(this.host.nativeElement,"mousedown",()=>{this.removeTabIndex()}))})}ngOnDestroy(){for(;this.unlisteners.length;)this.unlisteners.pop()()}addTabIndex(){this.renderer.setAttribute(this.host.nativeElement,"tabindex",this.tabindex)}removeTabIndex(){this.renderer.removeAttribute(this.host.nativeElement,"tabindex")}addOrRemoveTabIndex(){const a=this.host.nativeElement.parentElement;a.clientHeight<a.scrollHeight?this.addTabIndex():this.removeTabIndex()}}return l.\u0275fac=function(a){return new(a||l)(L(yi),L(Sn),L(mr))},l.\u0275dir=vt({type:l,selectors:[["",8,"modal-body"]]}),l})(),Aee=(()=>{class l{constructor(){cr.addIcons(Dx)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr,PO,gm],pr,gm]}),l})(),A5e=(()=>{class l{constructor(){cr.addIcons(Dx,uY)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr,gm],Xc]}),l})(),F5e=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi],Xc,pr]}),l})(),N5e=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[KN,A5e,F5e]}),l})(),U5e=(()=>{class l{constructor(){cr.addIcons(hY)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,Aee,Cee]]}),l})();var Uu=(()=>(function(l){l.Inactive="inactive",l.Error="error",l.Complete="complete"}(Uu||(Uu={})),Uu))();const Hu="0.2s ease-in-out",H5e=[Jl("skipInitialRender",[io(":enter",[])]),Jl("toggle",[io("void => *",[Bi({display:"block",height:0}),Zo(Hu,Bi({height:"*"}))])])];Jl("skipInitialRender",[io(":enter",[])]),Jl("toggle",[io("void => *",[Bi({display:"block",height:0}),Zo(Hu,Bi({height:"*"}))]),io("* => void",[Bi({display:"block"}),Zo(Hu,Bi({height:0,display:"none"}))])]);let Hee=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=qe({type:l,selectors:[["clr-accordion-description"],["clr-step-description"]],hostVars:2,hostBindings:function(a,c){2&a&&Et("clr-accordion-description",!0)},ngContentSelectors:Bn,decls:1,vars:0,template:function(a,c){1&a&&(Yt(),ut(0))},encapsulation:2,changeDetection:0}),l})();var xm=(()=>(function(l){l.Default="default",l.Multi="multi"}(xm||(xm={})),xm))();let W5e=0;class G5e{constructor(o,a){this.id=o,this.accordionId=a,this.status=Uu.Inactive,this.index=null,this.disabled=!1,this.open=!1,this.templateId=`${this.id}-${this.accordionId}`}}class $ee{constructor(){this.strategy=xm.Default,this.accordionCount=W5e++,this._panels={}}get panels(){return Object.keys(this._panels).map(o=>this._panels[o])}setStrategy(o){this.strategy=o}updatePanelOrder(o){o.forEach((a,c)=>this._panels[a].index=c),this.removeOldPanels(o)}addPanel(o,a=!1){this._panels[o]=new G5e(o,this.accordionCount),this._panels[o].open=a}togglePanel(o,a){const u=void 0!==a?a:!this._panels[o].open;u&&this.strategy===xm.Default&&this.closeAllPanels(),this._panels[o].open=u}disablePanel(o,a){this._panels[o].disabled=a}closeAllPanels(){this.panels.forEach(o=>this._panels[o.id].open=!1)}removeOldPanels(o){this.panels.filter(a=>void 0===o.find(c=>c===a.id)).forEach(a=>delete this._panels[a.id])}}let uC=(()=>{class l{constructor(){this.accordion=new $ee,this._panelsChanges=new Hr(this.accordion.panels)}getPanelChanges(a){return this._panelsChanges.pipe(fn(c=>c.find(u=>u.id===a)))}setStrategy(a){this.accordion.setStrategy(a)}addPanel(a,c=!1){this.accordion.addPanel(a,c),this.emitUpdatedPanels()}togglePanel(a,c){this.accordion.togglePanel(a,c),this.emitUpdatedPanels()}disablePanel(a,c){this.accordion.disablePanel(a,c),this.emitUpdatedPanels()}updatePanelOrder(a){this.accordion.updatePanelOrder(a),this.emitUpdatedPanels()}emitUpdatedPanels(){this._panelsChanges.next(this.accordion.panels)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),Cm=(()=>{class l{constructor(a,c,u,h){this.commonStrings=a,this.accordionService=c,this.ifExpandService=u,this._id=h,this.disabled=!1,this.panelOpen=!1,this.panelOpenChange=new wt,this.AccordionStatus=Uu,this.isAccordion=!0}get id(){return this._id}set id(a){this._id=a}ngOnInit(){this.panel=this.accordionService.getPanelChanges(this.id).pipe(Ua(a=>this.emitPanelChange(a))),this.accordionService.addPanel(this.id,this.panelOpen),this.accordionService.togglePanel(this.id,this.panelOpen),this.accordionService.disablePanel(this.id,this.disabled)}ngOnChanges(a){this.panel&&a.panelOpen&&a.panelOpen.currentValue!==a.panelOpen.previousValue&&this.accordionService.togglePanel(this.id,a.panelOpen.currentValue),this.panel&&a.disabled&&a.disabled.currentValue!==a.disabled.previousValue&&this.accordionService.disablePanel(this.id,a.disabled.currentValue)}togglePanel(){this.accordionService.togglePanel(this.id)}collapsePanelOnAnimationDone(a){a.open||(this.ifExpandService.expanded=!1)}getPanelStateClasses(a){return`clr-accordion-panel-${a.status} ${a.open?"clr-accordion-panel-open":""}`}getAccordionContentId(a){return`clr-accordion-content-${a}'`}getAccordionHeaderId(a){return`clr-accordion-header-${a}`}emitPanelChange(a){a.open!==this.panelOpen&&(this.panelOpenChange.emit(a.open),this.panelOpen=a.open),a.open&&(this.ifExpandService.expanded=!0)}}return l.\u0275fac=function(a){return new(a||l)(L(or),L(uC),L(Wa),L(So))},l.\u0275cmp=qe({type:l,selectors:[["clr-accordion-panel"]],contentQueries:function(a,c,u){if(1&a&&Yn(u,Hee,4),2&a){let h;Vt(h=zt())&&(c.accordionDescription=h)}},hostVars:2,hostBindings:function(a,c){2&a&&Et("clr-accordion-panel",!0)},inputs:{disabled:["clrAccordionPanelDisabled","disabled"],panelOpen:["clrAccordionPanelOpen","panelOpen"]},outputs:{panelOpenChange:"clrAccordionPanelOpenChange"},features:[dn([Wa,$a]),vo],ngContentSelectors:gJ,decls:2,vars:3,consts:[[4,"ngIf"],["aria-live","assertive","class","clr-sr-only",4,"ngIf"],["role","group",3,"ngClass"],[1,"clr-accordion-header"],["type","button",1,"clr-accordion-header-button",3,"id","disabled","click"],["headerButton",""],[1,"clr-sr-only"],[1,"clr-accordion-status"],["shape","angle","direction","right",1,"clr-accordion-angle"],[1,"clr-accordion-number"],["status","danger","shape","exclamation-circle",1,"clr-accordion-error-icon"],["status","success","shape","check-circle",1,"clr-accordion-complete-icon"],["role","region",3,"id"],["class","clr-accordion-content",4,"ngIf"],["aria-live","assertive",1,"clr-sr-only"],[1,"clr-accordion-content"],[1,"clr-accordion-inner-content"]],template:function(a,c){1&a&&(Yt(pJ),Y(0,uNe,19,18,"ng-container",0),ix(1,"async")),2&a&&F("ngIf",rx(1,1,c.panel))},directives:[yn,ii,fr],pipes:[PR],encapsulation:2,data:{animation:H5e},changeDetection:0}),l})(),hC=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=qe({type:l,selectors:[["clr-accordion-title"],["clr-step-title"]],hostVars:2,hostBindings:function(a,c){2&a&&Et("clr-accordion-title",!0)},ngContentSelectors:Bn,decls:1,vars:0,template:function(a,c){1&a&&(Yt(),ut(0))},encapsulation:2,changeDetection:0}),l})(),dC=(()=>{class l{constructor(a){this.accordionService=a,this.multiPanel=!1,this.subscriptions=[]}ngOnInit(){this.setAccordionStrategy()}ngOnChanges(a){a.multiPanel.currentValue!==a.multiPanel.previousValue&&this.setAccordionStrategy()}ngAfterViewInit(){this.subscriptions.push(this.listenForDOMChanges())}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}setAccordionStrategy(){this.accordionService.setStrategy(this.multiPanel?xm.Multi:xm.Default)}listenForDOMChanges(){return this.panels.changes.pipe(ZT(this.panels)).subscribe(a=>this.accordionService.updatePanelOrder(a.toArray().map(c=>c.id)))}}return l.\u0275fac=function(a){return new(a||l)(L(uC))},l.\u0275cmp=qe({type:l,selectors:[["clr-accordion"]],contentQueries:function(a,c,u){if(1&a&&Yn(u,Cm,5),2&a){let h;Vt(h=zt())&&(c.panels=h)}},hostVars:2,hostBindings:function(a,c){2&a&&Et("clr-accordion",!0)},inputs:{multiPanel:["clrAccordionMultiPanel","multiPanel"]},features:[dn([uC]),vo],ngContentSelectors:Bn,decls:1,vars:0,template:function(a,c){1&a&&(Yt(),ut(0))},encapsulation:2,changeDetection:0}),l})(),fC=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=qe({type:l,selectors:[["clr-accordion-content"],["clr-step-content"]],ngContentSelectors:Bn,decls:1,vars:0,template:function(a,c){1&a&&(Yt(),ut(0))},encapsulation:2,changeDetection:0}),l})(),Fy=(()=>{class l extends ky{}return l.\u0275fac=function(){let o;return function(c){return(o||(o=fs(l)))(c||l)}}(),l.\u0275dir=vt({type:l,selectors:[["clr-accordion"]],features:[pn]}),l})(),pC=(()=>{class l extends My{constructor(a,c,u){if(!c)throw new Error("clr-accordion-panel should only be used inside of clr-accordion");super(a,c),this.expand=u}get flavor(){return this.expand.expanded}}return l.\u0275fac=function(a){return new(a||l)(L(xl),L(Fy,8),L(Wa))},l.\u0275dir=vt({type:l,selectors:[["clr-accordion-panel"]],features:[pn]}),l})(),Wee=(()=>{class l{constructor(){cr.addIcons(ay,Yl,Kl)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr]]}),l})(),Z5e=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr,Wee],Wee]}),l})(),lL=(()=>{class l{constructor(){this.externalId="",this.max=100,this._value=0}set id(a){this._ID=a,this.externalId=null}get id(){return this._ID}get value(){return this._value}set value(a){this._value=a}get progressClass(){return!0}get labeledClass(){return this._labeled}set clrLabeled(a){this._labeled=Yc(a)}get fadeClass(){return this._fade}set clrFade(a){this._fade=Yc(a)}get loopClass(){return this._loop}set clrLoop(a){this._loop=Yc(a)}get successClass(){return this._success}set clrSuccess(a){this._success=Yc(a)}get dangerClass(){return this._danger}set clrDanger(a){this._danger=Yc(a)}get flashClass(){return this._flash}set clrFlash(a){this._flash=Yc(a)}get flashDangerClass(){return this._flashDanger}set clrFlashDanger(a){this._flashDanger=Yc(a)}displayStringValue(){return this._labeled}get displayValue(){return this.displayval?this.displayval:`${this.value||0}%`}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=qe({type:l,selectors:[["clr-progress-bar"]],hostVars:17,hostBindings:function(a,c){2&a&&(et("id",c.externalId),Et("progress",c.progressClass)("labeled",c.labeledClass)("progress-fade",c.fadeClass)("loop",c.loopClass)("success",c.successClass)("danger",c.dangerClass)("flash",c.flashClass)("flash-danger",c.flashDangerClass))},inputs:{id:"id",max:["clrMax","max"],displayval:["clrDisplayval","displayval"],value:["clrValue","value"],clrLabeled:"clrLabeled",clrFade:"clrFade",clrLoop:"clrLoop",clrSuccess:"clrSuccess",clrDanger:"clrDanger",clrFlash:"clrFlash",clrFlashDanger:"clrFlashDanger"},decls:2,vars:5,consts:[[3,"id"],[4,"ngIf"]],template:function(a,c){1&a&&(me(0,"progress",0),Y(1,_Ne,2,1,"span",1)),2&a&&(F("id",c.id),et("max",c.max)("value",c.value)("data-displayval",c.displayValue),R(1),F("ngIf",c.displayStringValue()))},directives:[yn],encapsulation:2}),l})(),X5e=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi]]}),l})(),K5e=(()=>{class l{constructor(){cr.addIcons(SAe,wAe,hY,TAe)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[bi,pr,eC],pr,eC]}),l})(),J5e=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[g5e,i5e,pr,Aee,DN,Xc,PO,gm,ENe,NJ,k5e,N5e,U5e,HJ,Z5e,eC,X5e,Qx,K5e]}),l})(),eBe=(()=>{class l{constructor(a,c){this.router=a,this.config=c,this.bShowNextTime=!0}ngOnInit(){}get version(){return this.config.environment.version}ngAfterViewInit(){}getOnOk(){return()=>this.onOk()}onOk(){this.config.post(()=>{this.router.navigate(["main"])})}get showNextTime(){return this.bShowNextTime}set showNextTime(a){this.bShowNextTime=a}}return l.\u0275fac=function(a){return new(a||l)(L(Ps),L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-help"]],decls:12,vars:2,consts:[[1,"ftext","fade-in-3","pad"],[1,"bottom-space"],["type","checkbox","clrCheckbox","","name","nextShowTime","required","","value","nextShow",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","btn-block","top-space",3,"click"],["shape","check"]],template:function(a,c){1&a&&(D(0,"div",0),D(1,"h4"),ne(2),k(),D(3,"p"),ne(4,"Online-\u0432\u0435\u0440\u0441\u0438\u044f \u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 D3 \u0442\u0443\u0442: https://deviskin.github.io"),k(),D(5,"clr-checkbox-wrapper",1),D(6,"input",2),ee("ngModelChange",function(h){return c.showNextTime=h}),k(),D(7,"label"),ne(8,"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u043f\u0440\u0430\u0432\u043a\u0443 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0440\u0430\u0437"),k(),k(),D(9,"button",3),ee("click",function(){return c.onOk()}),me(10,"clr-icon",4),ne(11," \u041d\u0430\u0447\u0430\u0442\u044c "),k(),k()),2&a&&(R(2),vi("\u0421\u043f\u0440\u0430\u0432\u043a\u0430 (",c.version,")."),R(4),F("ngModel",c.showNextTime))},directives:[mp,$F,Vh,vp,No,Co,ss,Ws],styles:[".pad[_ngcontent-%COMP%]{padding:1em}"]}),l})();function Fs(l,o){return null==l||null==o?NaN:l<o?-1:l>o?1:l>=o?0:NaN}function iD(l){let o=l,a=l,c=l;function u(f,p,g=0,m=f.length){if(g<m){if(0!==a(p,p))return m;do{const v=g+m>>>1;c(f[v],p)<0?g=v+1:m=v}while(g<m)}return g}return 2!==l.length&&(o=(f,p)=>l(f)-p,a=Fs,c=(f,p)=>Fs(l(f),p)),{left:u,center:function d(f,p,g=0,m=f.length){const v=u(f,p,g,m-1);return v>g&&o(f[v-1],p)>-o(f[v],p)?v-1:v},right:function h(f,p,g=0,m=f.length){if(g<m){if(0!==a(p,p))return m;do{const v=g+m>>>1;c(f[v],p)<=0?g=v+1:m=v}while(g<m)}return g}}}function Zee(l){return null===l?NaN:+l}const Xee=iD(Fs),Yee=Xee.right,nBe=Xee.left,iBe=iD(Zee).center,Sm=Yee;function rD(l,o){let a=0;if(void 0===o)for(let c of l)null!=c&&(c=+c)>=c&&++a;else{let c=-1;for(let u of l)null!=(u=o(u,++c,l))&&(u=+u)>=u&&++a}return a}function rBe(l){return 0|l.length}function sBe(l){return!(l>0)}function oBe(l){return"object"!=typeof l||"length"in l?l:Array.from(l)}function lBe(...l){const o="function"==typeof l[l.length-1]&&function aBe(l){return o=>l(...o)}(l.pop()),a=(l=l.map(oBe)).map(rBe),c=l.length-1,u=new Array(c+1).fill(0),h=[];if(c<0||a.some(sBe))return h;for(;;){h.push(u.map((f,p)=>l[p][f]));let d=c;for(;++u[d]===a[d];){if(0===d)return o?h.map(o):h;u[d--]=0}}}function cBe(l,o){var a=0,c=0;return Float64Array.from(l,void 0===o?u=>a+=+u||0:u=>a+=+o(u,c++,l)||0)}function uBe(l,o){return null==l||null==o?NaN:o<l?-1:o>l?1:o>=l?0:NaN}function Kee(l,o){let c,a=0,u=0,h=0;if(void 0===o)for(let d of l)null!=d&&(d=+d)>=d&&(c=d-u,u+=c/++a,h+=c*(d-u));else{let d=-1;for(let f of l)null!=(f=o(f,++d,l))&&(f=+f)>=f&&(c=f-u,u+=c/++a,h+=c*(f-u))}if(a>1)return h/(a-1)}function Jee(l,o){const a=Kee(l,o);return a&&Math.sqrt(a)}function wm(l,o){let a,c;if(void 0===o)for(const u of l)null!=u&&(void 0===a?u>=u&&(a=c=u):(a>u&&(a=u),c<u&&(c=u)));else{let u=-1;for(let h of l)null!=(h=o(h,++u,l))&&(void 0===a?h>=h&&(a=c=h):(a>h&&(a=h),c<h&&(c=h)))}return[a,c]}class wo{constructor(){this._partials=new Float64Array(32),this._n=0}add(o){const a=this._partials;let c=0;for(let u=0;u<this._n&&u<32;u++){const h=a[u],d=o+h,f=Math.abs(o)<Math.abs(h)?o-(d-h):h-(d-o);f&&(a[c++]=f),o=d}return a[c]=o,this._n=c+1,this}valueOf(){const o=this._partials;let c,u,h,a=this._n,d=0;if(a>0){for(d=o[--a];a>0&&(c=d,u=o[--a],d=c+u,h=u-(d-c),!h););a>0&&(h<0&&o[a-1]<0||h>0&&o[a-1]>0)&&(u=2*h,c=d+u,u==c-d&&(d=c))}return d}}function hBe(l,o){const a=new wo;if(void 0===o)for(let c of l)(c=+c)&&a.add(c);else{let c=-1;for(let u of l)(u=+o(u,++c,l))&&a.add(u)}return+a}function dBe(l,o){const a=new wo;let c=-1;return Float64Array.from(l,void 0===o?u=>a.add(+u||0):u=>a.add(+o(u,++c,l)||0))}class yC extends Map{constructor(o,a=nte){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),null!=o)for(const[c,u]of o)this.set(c,u)}get(o){return super.get(cL(this,o))}has(o){return super.has(cL(this,o))}set(o,a){return super.set(ete(this,o),a)}delete(o){return super.delete(tte(this,o))}}class Tm extends Set{constructor(o,a=nte){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),null!=o)for(const c of o)this.add(c)}has(o){return super.has(cL(this,o))}add(o){return super.add(ete(this,o))}delete(o){return super.delete(tte(this,o))}}function cL({_intern:l,_key:o},a){const c=o(a);return l.has(c)?l.get(c):a}function ete({_intern:l,_key:o},a){const c=o(a);return l.has(c)?l.get(c):(l.set(c,a),a)}function tte({_intern:l,_key:o},a){const c=o(a);return l.has(c)&&(a=l.get(c),l.delete(c)),a}function nte(l){return null!==l&&"object"==typeof l?l.valueOf():l}function Ny(l){return l}function ite(l,...o){return Ly(l,Ny,Ny,o)}function rte(l,...o){return Ly(l,Array.from,Ny,o)}function ste(l,o){for(let a=1,c=o.length;a<c;++a)l=l.flatMap(u=>u.pop().map(([h,d])=>[...u,h,d]));return l}function fBe(l,...o){return ste(rte(l,...o),o)}function pBe(l,o,...a){return ste(ate(l,o,...a),a)}function ote(l,o,...a){return Ly(l,Ny,o,a)}function ate(l,o,...a){return Ly(l,Array.from,o,a)}function gBe(l,...o){return Ly(l,Ny,lte,o)}function mBe(l,...o){return Ly(l,Array.from,lte,o)}function lte(l){if(1!==l.length)throw new Error("duplicate key");return l[0]}function Ly(l,o,a,c){return function u(h,d){if(d>=c.length)return a(h);const f=new yC,p=c[d++];let g=-1;for(const m of h){const v=p(m,++g,h),y=f.get(v);y?y.push(m):f.set(v,[m])}for(const[m,v]of f)f.set(m,u(v,d));return o(f)}(l,0)}function cte(l,o){return Array.from(o,a=>l[a])}function uL(l,...o){if("function"!=typeof l[Symbol.iterator])throw new TypeError("values is not iterable");l=Array.from(l);let[a]=o;if(a&&2!==a.length||o.length>1){const c=Uint32Array.from(l,(u,h)=>h);return o.length>1?(o=o.map(u=>l.map(u)),c.sort((u,h)=>{for(const d of o){const f=_C(d[u],d[h]);if(f)return f}})):(a=l.map(a),c.sort((u,h)=>_C(a[u],a[h]))),cte(l,c)}return l.sort(hL(a))}function hL(l=Fs){if(l===Fs)return _C;if("function"!=typeof l)throw new TypeError("compare is not a function");return(o,a)=>{const c=l(o,a);return c||0===c?c:(0===l(a,a))-(0===l(o,o))}}function _C(l,o){return(null==l||!(l>=l))-(null==o||!(o>=o))||(l<o?-1:l>o?1:0)}function vBe(l,o,a){return(2!==o.length?uL(ote(l,o,a),([c,u],[h,d])=>Fs(u,d)||Fs(c,h)):uL(ite(l,a),([c,u],[h,d])=>o(u,d)||Fs(c,h))).map(([c])=>c)}var yBe=Array.prototype.slice;function sD(l){return()=>l}var dL=Math.sqrt(50),fL=Math.sqrt(10),pL=Math.sqrt(2);function By(l,o,a){var c,h,d,f,u=-1;if(a=+a,(l=+l)==(o=+o)&&a>0)return[l];if((c=o<l)&&(h=l,l=o,o=h),0===(f=bC(l,o,a))||!isFinite(f))return[];if(f>0){let p=Math.round(l/f),g=Math.round(o/f);for(p*f<l&&++p,g*f>o&&--g,d=new Array(h=g-p+1);++u<h;)d[u]=(p+u)*f}else{f=-f;let p=Math.round(l*f),g=Math.round(o*f);for(p/f<l&&++p,g/f>o&&--g,d=new Array(h=g-p+1);++u<h;)d[u]=(p+u)/f}return c&&d.reverse(),d}function bC(l,o,a){var c=(o-l)/Math.max(0,a),u=Math.floor(Math.log(c)/Math.LN10),h=c/Math.pow(10,u);return u>=0?(h>=dL?10:h>=fL?5:h>=pL?2:1)*Math.pow(10,u):-Math.pow(10,-u)/(h>=dL?10:h>=fL?5:h>=pL?2:1)}function Vy(l,o,a){var c=Math.abs(o-l)/Math.max(0,a),u=Math.pow(10,Math.floor(Math.log(c)/Math.LN10)),h=c/u;return h>=dL?u*=10:h>=fL?u*=5:h>=pL&&(u*=2),o<l?-u:u}function hte(l,o,a){let c;for(;;){const u=bC(l,o,a);if(u===c||0===u||!isFinite(u))return[l,o];u>0?(l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u):u<0&&(l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u),c=u}}function gL(l){return Math.ceil(Math.log(rD(l))/Math.LN2)+1}function dte(){var l=Ny,o=wm,a=gL;function c(u){Array.isArray(u)||(u=Array.from(u));var h,f,d=u.length,p=new Array(d);for(h=0;h<d;++h)p[h]=l(u[h],h,u);var g=o(p),m=g[0],v=g[1],y=a(p,m,v);if(!Array.isArray(y)){const x=v,S=+y;if(o===wm&&([m,v]=hte(m,v,S)),(y=By(m,v,S))[y.length-1]>=v)if(x>=v&&o===wm){const w=bC(m,v,S);isFinite(w)&&(w>0?v=(Math.floor(v/w)+1)*w:w<0&&(v=(Math.ceil(v*-w)+1)/-w))}else y.pop()}for(var _=y.length;y[0]<=m;)y.shift(),--_;for(;y[_-1]>v;)y.pop(),--_;var C,b=new Array(_+1);for(h=0;h<=_;++h)(C=b[h]=[]).x0=h>0?y[h-1]:m,C.x1=h<_?y[h]:v;for(h=0;h<d;++h)null!=(f=p[h])&&m<=f&&f<=v&&b[Sm(y,f,0,_)].push(u[h]);return b}return c.value=function(u){return arguments.length?(l="function"==typeof u?u:sD(u),c):l},c.domain=function(u){return arguments.length?(o="function"==typeof u?u:sD([u[0],u[1]]),c):o},c.thresholds=function(u){return arguments.length?(a="function"==typeof u?u:Array.isArray(u)?sD(yBe.call(u)):sD(u),c):a},c}function oD(l,o){let a;if(void 0===o)for(const c of l)null!=c&&(a<c||void 0===a&&c>=c)&&(a=c);else{let c=-1;for(let u of l)null!=(u=o(u,++c,l))&&(a<u||void 0===a&&u>=u)&&(a=u)}return a}function aD(l,o){let a;if(void 0===o)for(const c of l)null!=c&&(a>c||void 0===a&&c>=c)&&(a=c);else{let c=-1;for(let u of l)null!=(u=o(u,++c,l))&&(a>u||void 0===a&&u>=u)&&(a=u)}return a}function mL(l,o,a=0,c=l.length-1,u){for(u=void 0===u?_C:hL(u);c>a;){if(c-a>600){const p=c-a+1,g=o-a+1,m=Math.log(p),v=.5*Math.exp(2*m/3),y=.5*Math.sqrt(m*v*(p-v)/p)*(g-p/2<0?-1:1);mL(l,o,Math.max(a,Math.floor(o-g*v/p+y)),Math.min(c,Math.floor(o+(p-g)*v/p+y)),u)}const h=l[o];let d=a,f=c;for(xC(l,a,o),u(l[c],h)>0&&xC(l,a,c);d<f;){for(xC(l,d,f),++d,--f;u(l[d],h)<0;)++d;for(;u(l[f],h)>0;)--f}0===u(l[a],h)?xC(l,a,f):(++f,xC(l,f,c)),f<=o&&(a=f+1),o<=f&&(c=f-1)}return l}function xC(l,o,a){const c=l[o];l[o]=l[a],l[a]=c}function CC(l,o,a){if(l=Float64Array.from(function*tBe(l,o){if(void 0===o)for(let a of l)null!=a&&(a=+a)>=a&&(yield a);else{let a=-1;for(let c of l)null!=(c=o(c,++a,l))&&(c=+c)>=c&&(yield c)}}(l,a)),c=l.length){if((o=+o)<=0||c<2)return aD(l);if(o>=1)return oD(l);var c,u=(c-1)*o,h=Math.floor(u),d=oD(mL(l,h).subarray(0,h+1));return d+(aD(l.subarray(h+1))-d)*(u-h)}}function fte(l,o,a=Zee){if(c=l.length){if((o=+o)<=0||c<2)return+a(l[0],0,l);if(o>=1)return+a(l[c-1],c-1,l);var c,u=(c-1)*o,h=Math.floor(u),d=+a(l[h],h,l);return d+(+a(l[h+1],h+1,l)-d)*(u-h)}}function _Be(l,o,a){return Math.ceil((a-o)/(2*(CC(l,.75)-CC(l,.25))*Math.pow(rD(l),-1/3)))}function bBe(l,o,a){return Math.ceil((a-o)/(3.5*Jee(l)*Math.pow(rD(l),-1/3)))}function pte(l,o){let a,c=-1,u=-1;if(void 0===o)for(const h of l)++u,null!=h&&(a<h||void 0===a&&h>=h)&&(a=h,c=u);else for(let h of l)null!=(h=o(h,++u,l))&&(a<h||void 0===a&&h>=h)&&(a=h,c=u);return c}function xBe(l,o){let a=0,c=0;if(void 0===o)for(let u of l)null!=u&&(u=+u)>=u&&(++a,c+=u);else{let u=-1;for(let h of l)null!=(h=o(h,++u,l))&&(h=+h)>=h&&(++a,c+=h)}if(a)return c/a}function CBe(l,o){return CC(l,.5,o)}function vL(l){return Array.from(function*SBe(l){for(const o of l)yield*o}(l))}function gte(l,o){let a,c=-1,u=-1;if(void 0===o)for(const h of l)++u,null!=h&&(a>h||void 0===a&&h>=h)&&(a=h,c=u);else for(let h of l)null!=(h=o(h,++u,l))&&(a>h||void 0===a&&h>=h)&&(a=h,c=u);return c}function wBe(l,o){const a=new yC;if(void 0===o)for(let h of l)null!=h&&h>=h&&a.set(h,(a.get(h)||0)+1);else{let h=-1;for(let d of l)null!=(d=o(d,++h,l))&&d>=d&&a.set(d,(a.get(d)||0)+1)}let c,u=0;for(const[h,d]of a)d>u&&(u=d,c=h);return c}function TBe(l,o=OBe){const a=[];let c,u=!1;for(const h of l)u&&a.push(o(c,h)),c=h,u=!0;return a}function OBe(l,o){return[l,o]}function rc(l,o,a){l=+l,o=+o,a=(u=arguments.length)<2?(o=l,l=0,1):u<3?1:+a;for(var c=-1,u=0|Math.max(0,Math.ceil((o-l)/a)),h=new Array(u);++c<u;)h[c]=l+c*a;return h}function DBe(l,o=Fs){if("function"!=typeof l[Symbol.iterator])throw new TypeError("values is not iterable");let a=Array.from(l);const c=new Float64Array(a.length);2!==o.length&&(a=a.map(o),o=Fs);const u=(f,p)=>o(a[f],a[p]);let h,d;return Uint32Array.from(a,(f,p)=>p).sort(o===Fs?(f,p)=>_C(a[f],a[p]):hL(u)).forEach((f,p)=>{const g=u(f,void 0===h?f:h);g>=0?((void 0===h||g>0)&&(h=f,d=p),c[f]=d):c[f]=NaN}),c}function kBe(l,o=Fs){let a,c=!1;if(1===o.length){let u;for(const h of l){const d=o(h);(c?Fs(d,u)<0:0===Fs(d,d))&&(a=h,u=d,c=!0)}}else for(const u of l)(c?o(u,a)<0:0===o(u,u))&&(a=u,c=!0);return a}function mte(l,o=Fs){if(1===o.length)return gte(l,o);let a,c=-1,u=-1;for(const h of l)++u,(c<0?0===o(h,h):o(h,a)<0)&&(a=h,c=u);return c}function MBe(l,o=Fs){let a,c=!1;if(1===o.length){let u;for(const h of l){const d=o(h);(c?Fs(d,u)>0:0===Fs(d,d))&&(a=h,u=d,c=!0)}}else for(const u of l)(c?o(u,a)>0:0===o(u,u))&&(a=u,c=!0);return a}function EBe(l,o=Fs){if(1===o.length)return pte(l,o);let a,c=-1,u=-1;for(const h of l)++u,(c<0?0===o(h,h):o(h,a)>0)&&(a=h,c=u);return c}function ABe(l,o){const a=mte(l,o);return a<0?void 0:a}const vte=yte(Math.random);function yte(l){return function(a,c=0,u=a.length){let h=u-(c=+c);for(;h;){const d=l()*h--|0,f=a[h+c];a[h+c]=a[d+c],a[d+c]=f}return a}}function IBe(l,o){let a=0;if(void 0===o)for(let c of l)(c=+c)&&(a+=c);else{let c=-1;for(let u of l)(u=+o(u,++c,l))&&(a+=u)}return a}function _te(l){if(!(h=l.length))return[];for(var o=-1,a=aD(l,PBe),c=new Array(a);++o<a;)for(var h,u=-1,d=c[o]=new Array(h);++u<h;)d[u]=l[u][o];return c}function PBe(l){return l.length}function bte(){return _te(arguments)}function RBe(l,o){if("function"!=typeof o)throw new TypeError("test is not a function");let a=-1;for(const c of l)if(!o(c,++a,l))return!1;return!0}function FBe(l,o){if("function"!=typeof o)throw new TypeError("test is not a function");let a=-1;for(const c of l)if(o(c,++a,l))return!0;return!1}function NBe(l,o){if("function"!=typeof o)throw new TypeError("test is not a function");const a=[];let c=-1;for(const u of l)o(u,++c,l)&&a.push(u);return a}function LBe(l,o){if("function"!=typeof l[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof o)throw new TypeError("mapper is not a function");return Array.from(l,(a,c)=>o(a,c,l))}function BBe(l,o,a){if("function"!=typeof o)throw new TypeError("reducer is not a function");const c=l[Symbol.iterator]();let u,h,d=-1;if(arguments.length<3){if(({done:u,value:a}=c.next()),u)return;++d}for(;({done:u,value:h}=c.next()),!u;)a=o(a,h,++d,l);return a}function VBe(l){if("function"!=typeof l[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(l).reverse()}function zBe(l,...o){l=new Tm(l);for(const a of o)for(const c of a)l.delete(c);return l}function UBe(l,o){const a=o[Symbol.iterator](),c=new Tm;for(const u of l){if(c.has(u))return!1;let h,d;for(;({value:h,done:d}=a.next())&&!d;){if(Object.is(u,h))return!1;c.add(h)}}return!0}function HBe(l,...o){l=new Tm(l),o=o.map($Be);e:for(const a of l)for(const c of o)if(!c.has(a)){l.delete(a);continue e}return l}function $Be(l){return l instanceof Tm?l:new Tm(l)}function xte(l,o){const a=l[Symbol.iterator](),c=new Set;for(const u of o){const h=Cte(u);if(c.has(h))continue;let d,f;for(;({value:d,done:f}=a.next());){if(f)return!1;const p=Cte(d);if(c.add(p),Object.is(h,p))break}}return!0}function Cte(l){return null!==l&&"object"==typeof l?l.valueOf():l}function WBe(l,o){return xte(o,l)}function GBe(...l){const o=new Tm;for(const a of l)for(const c of a)o.add(c);return o}function QBe(l){return l}function jBe(l){return"translate("+l+",0)"}function qBe(l){return"translate(0,"+l+")"}function ZBe(l){return o=>+l(o)}function XBe(l,o){return o=Math.max(0,l.bandwidth()-2*o)/2,l.round()&&(o=Math.round(o)),a=>+l(a)+o}function YBe(){return!this.__axis}function uD(l,o){var a=[],c=null,u=null,h=6,d=6,f=3,p="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,g=1===l||4===l?-1:1,m=4===l||2===l?"x":"y",v=1===l||3===l?jBe:qBe;function y(_){var b=null==c?o.ticks?o.ticks.apply(o,a):o.domain():c,C=null==u?o.tickFormat?o.tickFormat.apply(o,a):QBe:u,x=Math.max(h,0)+f,S=o.range(),w=+S[0]+p,O=+S[S.length-1]+p,T=(o.bandwidth?XBe:ZBe)(o.copy(),p),M=_.selection?_.selection():_,A=M.selectAll(".domain").data([null]),I=M.selectAll(".tick").data(b,o).order(),E=I.exit(),P=I.enter().append("g").attr("class","tick"),B=I.select("line"),V=I.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),I=I.merge(P),B=B.merge(P.append("line").attr("stroke","currentColor").attr(m+"2",g*h)),V=V.merge(P.append("text").attr("fill","currentColor").attr(m,g*x).attr("dy",1===l?"0em":3===l?"0.71em":"0.32em")),_!==M&&(A=A.transition(_),I=I.transition(_),B=B.transition(_),V=V.transition(_),E=E.transition(_).attr("opacity",1e-6).attr("transform",function(Q){return isFinite(Q=T(Q))?v(Q+p):this.getAttribute("transform")}),P.attr("opacity",1e-6).attr("transform",function(Q){var j=this.parentNode.__axis;return v((j&&isFinite(j=j(Q))?j:T(Q))+p)})),E.remove(),A.attr("d",4===l||2===l?d?"M"+g*d+","+w+"H"+p+"V"+O+"H"+g*d:"M"+p+","+w+"V"+O:d?"M"+w+","+g*d+"V"+p+"H"+O+"V"+g*d:"M"+w+","+p+"H"+O),I.attr("opacity",1).attr("transform",function(Q){return v(T(Q)+p)}),B.attr(m+"2",g*h),V.attr(m,g*x).text(C),M.filter(YBe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===l?"start":4===l?"end":"middle"),M.each(function(){this.__axis=T})}return y.scale=function(_){return arguments.length?(o=_,y):o},y.ticks=function(){return a=Array.from(arguments),y},y.tickArguments=function(_){return arguments.length?(a=null==_?[]:Array.from(_),y):a.slice()},y.tickValues=function(_){return arguments.length?(c=null==_?null:Array.from(_),y):c&&c.slice()},y.tickFormat=function(_){return arguments.length?(u=_,y):u},y.tickSize=function(_){return arguments.length?(h=d=+_,y):h},y.tickSizeInner=function(_){return arguments.length?(h=+_,y):h},y.tickSizeOuter=function(_){return arguments.length?(d=+_,y):d},y.tickPadding=function(_){return arguments.length?(f=+_,y):f},y.offset=function(_){return arguments.length?(p=+_,y):p},y}function KBe(l){return uD(1,l)}function JBe(l){return uD(2,l)}function e8e(l){return uD(3,l)}function t8e(l){return uD(4,l)}var n8e={value:()=>{}};function wte(){for(var c,l=0,o=arguments.length,a={};l<o;++l){if(!(c=arguments[l]+"")||c in a||/[\s.]/.test(c))throw new Error("illegal type: "+c);a[c]=[]}return new hD(a)}function hD(l){this._=l}function i8e(l,o){return l.trim().split(/^|\s+/).map(function(a){var c="",u=a.indexOf(".");if(u>=0&&(c=a.slice(u+1),a=a.slice(0,u)),a&&!o.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:c}})}function r8e(l,o){for(var u,a=0,c=l.length;a<c;++a)if((u=l[a]).name===o)return u.value}function Tte(l,o,a){for(var c=0,u=l.length;c<u;++c)if(l[c].name===o){l[c]=n8e,l=l.slice(0,c).concat(l.slice(c+1));break}return null!=a&&l.push({name:o,value:a}),l}hD.prototype=wte.prototype={constructor:hD,on:function(l,o){var u,a=this._,c=i8e(l+"",a),h=-1,d=c.length;if(!(arguments.length<2)){if(null!=o&&"function"!=typeof o)throw new Error("invalid callback: "+o);for(;++h<d;)if(u=(l=c[h]).type)a[u]=Tte(a[u],l.name,o);else if(null==o)for(u in a)a[u]=Tte(a[u],l.name,null);return this}for(;++h<d;)if((u=(l=c[h]).type)&&(u=r8e(a[u],l.name)))return u},copy:function(){var l={},o=this._;for(var a in o)l[a]=o[a].slice();return new hD(l)},call:function(l,o){if((u=arguments.length-2)>0)for(var u,h,a=new Array(u),c=0;c<u;++c)a[c]=arguments[c+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(c=0,u=(h=this._[l]).length;c<u;++c)h[c].value.apply(o,a)},apply:function(l,o,a){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var c=this._[l],u=0,h=c.length;u<h;++u)c[u].value.apply(o,a)}};const zy=wte;function s8e(){}function dD(l){return null==l?s8e:function(){return this.querySelector(l)}}function Ote(l){return null==l?[]:Array.isArray(l)?l:Array.from(l)}function a8e(){return[]}function _L(l){return null==l?a8e:function(){return this.querySelectorAll(l)}}function bL(l){return function(){return this.matches(l)}}function Dte(l){return function(o){return o.matches(l)}}var u8e=Array.prototype.find;function d8e(){return this.firstElementChild}var p8e=Array.prototype.filter;function g8e(){return Array.from(this.children)}function kte(l){return new Array(l.length)}function fD(l,o){this.ownerDocument=l.ownerDocument,this.namespaceURI=l.namespaceURI,this._next=null,this._parent=l,this.__data__=o}function b8e(l){return function(){return l}}function x8e(l,o,a,c,u,h){for(var f,d=0,p=o.length,g=h.length;d<g;++d)(f=o[d])?(f.__data__=h[d],c[d]=f):a[d]=new fD(l,h[d]);for(;d<p;++d)(f=o[d])&&(u[d]=f)}function C8e(l,o,a,c,u,h,d){var f,p,_,g=new Map,m=o.length,v=h.length,y=new Array(m);for(f=0;f<m;++f)(p=o[f])&&(y[f]=_=d.call(p,p.__data__,f,o)+"",g.has(_)?u[f]=p:g.set(_,p));for(f=0;f<v;++f)_=d.call(l,h[f],f,h)+"",(p=g.get(_))?(c[f]=p,p.__data__=h[f],g.delete(_)):a[f]=new fD(l,h[f]);for(f=0;f<m;++f)(p=o[f])&&g.get(y[f])===p&&(u[f]=p)}function S8e(l){return l.__data__}function T8e(l){return"object"==typeof l&&"length"in l?l:Array.from(l)}function A8e(l,o){return l<o?-1:l>o?1:l>=o?0:NaN}fD.prototype={constructor:fD,appendChild:function(l){return this._parent.insertBefore(l,this._next)},insertBefore:function(l,o){return this._parent.insertBefore(l,o)},querySelector:function(l){return this._parent.querySelector(l)},querySelectorAll:function(l){return this._parent.querySelectorAll(l)}};var xL="http://www.w3.org/1999/xhtml";const CL={svg:"http://www.w3.org/2000/svg",xhtml:xL,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wC(l){var o=l+="",a=o.indexOf(":");return a>=0&&"xmlns"!==(o=l.slice(0,a))&&(l=l.slice(a+1)),CL.hasOwnProperty(o)?{space:CL[o],local:l}:l}function B8e(l){return function(){this.removeAttribute(l)}}function V8e(l){return function(){this.removeAttributeNS(l.space,l.local)}}function z8e(l,o){return function(){this.setAttribute(l,o)}}function U8e(l,o){return function(){this.setAttributeNS(l.space,l.local,o)}}function H8e(l,o){return function(){var a=o.apply(this,arguments);null==a?this.removeAttribute(l):this.setAttribute(l,a)}}function $8e(l,o){return function(){var a=o.apply(this,arguments);null==a?this.removeAttributeNS(l.space,l.local):this.setAttributeNS(l.space,l.local,a)}}function SL(l){return l.ownerDocument&&l.ownerDocument.defaultView||l.document&&l||l.defaultView}function G8e(l){return function(){this.style.removeProperty(l)}}function Q8e(l,o,a){return function(){this.style.setProperty(l,o,a)}}function j8e(l,o,a){return function(){var c=o.apply(this,arguments);null==c?this.style.removeProperty(l):this.style.setProperty(l,c,a)}}function Om(l,o){return l.style.getPropertyValue(o)||SL(l).getComputedStyle(l,null).getPropertyValue(o)}function Z8e(l){return function(){delete this[l]}}function X8e(l,o){return function(){this[l]=o}}function Y8e(l,o){return function(){var a=o.apply(this,arguments);null==a?delete this[l]:this[l]=a}}function Mte(l){return l.trim().split(/^|\s+/)}function wL(l){return l.classList||new Ete(l)}function Ete(l){this._node=l,this._names=Mte(l.getAttribute("class")||"")}function Ate(l,o){for(var a=wL(l),c=-1,u=o.length;++c<u;)a.add(o[c])}function Ite(l,o){for(var a=wL(l),c=-1,u=o.length;++c<u;)a.remove(o[c])}function J8e(l){return function(){Ate(this,l)}}function eVe(l){return function(){Ite(this,l)}}function tVe(l,o){return function(){(o.apply(this,arguments)?Ate:Ite)(this,l)}}function iVe(){this.textContent=""}function rVe(l){return function(){this.textContent=l}}function sVe(l){return function(){var o=l.apply(this,arguments);this.textContent=null==o?"":o}}function aVe(){this.innerHTML=""}function lVe(l){return function(){this.innerHTML=l}}function cVe(l){return function(){var o=l.apply(this,arguments);this.innerHTML=null==o?"":o}}function hVe(){this.nextSibling&&this.parentNode.appendChild(this)}function fVe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gVe(l){return function(){var o=this.ownerDocument,a=this.namespaceURI;return a===xL&&o.documentElement.namespaceURI===xL?o.createElement(l):o.createElementNS(a,l)}}function mVe(l){return function(){return this.ownerDocument.createElementNS(l.space,l.local)}}function pD(l){var o=wC(l);return(o.local?mVe:gVe)(o)}function yVe(){return null}function bVe(){var l=this.parentNode;l&&l.removeChild(this)}function CVe(){var l=this.cloneNode(!1),o=this.parentNode;return o?o.insertBefore(l,this.nextSibling):l}function SVe(){var l=this.cloneNode(!0),o=this.parentNode;return o?o.insertBefore(l,this.nextSibling):l}function DVe(l){return l.trim().split(/^|\s+/).map(function(o){var a="",c=o.indexOf(".");return c>=0&&(a=o.slice(c+1),o=o.slice(0,c)),{type:o,name:a}})}function kVe(l){return function(){var o=this.__on;if(o){for(var h,a=0,c=-1,u=o.length;a<u;++a)h=o[a],l.type&&h.type!==l.type||h.name!==l.name?o[++c]=h:this.removeEventListener(h.type,h.listener,h.options);++c?o.length=c:delete this.__on}}}function MVe(l,o,a){return function(){var u,c=this.__on,h=function OVe(l){return function(o){l.call(this,o,this.__data__)}}(o);if(c)for(var d=0,f=c.length;d<f;++d)if((u=c[d]).type===l.type&&u.name===l.name)return this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=h,u.options=a),void(u.value=o);this.addEventListener(l.type,h,a),u={type:l.type,name:l.name,value:o,listener:h,options:a},c?c.push(u):this.__on=[u]}}function Pte(l,o,a){var c=SL(l),u=c.CustomEvent;"function"==typeof u?u=new u(o,a):(u=c.document.createEvent("Event"),a?(u.initEvent(o,a.bubbles,a.cancelable),u.detail=a.detail):u.initEvent(o,!1,!1)),l.dispatchEvent(u)}function AVe(l,o){return function(){return Pte(this,l,o)}}function IVe(l,o){return function(){return Pte(this,l,o.apply(this,arguments))}}Ete.prototype={add:function(l){this._names.indexOf(l)<0&&(this._names.push(l),this._node.setAttribute("class",this._names.join(" ")))},remove:function(l){var o=this._names.indexOf(l);o>=0&&(this._names.splice(o,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(l){return this._names.indexOf(l)>=0}};var TL=[null];function Qa(l,o){this._groups=l,this._parents=o}function Rte(){return new Qa([[document.documentElement]],TL)}Qa.prototype=Rte.prototype={constructor:Qa,select:function o8e(l){"function"!=typeof l&&(l=dD(l));for(var o=this._groups,a=o.length,c=new Array(a),u=0;u<a;++u)for(var p,g,h=o[u],d=h.length,f=c[u]=new Array(d),m=0;m<d;++m)(p=h[m])&&(g=l.call(p,p.__data__,m,h))&&("__data__"in p&&(g.__data__=p.__data__),f[m]=g);return new Qa(c,this._parents)},selectAll:function c8e(l){l="function"==typeof l?function l8e(l){return function(){return Ote(l.apply(this,arguments))}}(l):_L(l);for(var o=this._groups,a=o.length,c=[],u=[],h=0;h<a;++h)for(var p,d=o[h],f=d.length,g=0;g<f;++g)(p=d[g])&&(c.push(l.call(p,p.__data__,g,d)),u.push(p));return new Qa(c,u)},selectChild:function f8e(l){return this.select(null==l?d8e:function h8e(l){return function(){return u8e.call(this.children,l)}}("function"==typeof l?l:Dte(l)))},selectChildren:function v8e(l){return this.selectAll(null==l?g8e:function m8e(l){return function(){return p8e.call(this.children,l)}}("function"==typeof l?l:Dte(l)))},filter:function y8e(l){"function"!=typeof l&&(l=bL(l));for(var o=this._groups,a=o.length,c=new Array(a),u=0;u<a;++u)for(var p,h=o[u],d=h.length,f=c[u]=[],g=0;g<d;++g)(p=h[g])&&l.call(p,p.__data__,g,h)&&f.push(p);return new Qa(c,this._parents)},data:function w8e(l,o){if(!arguments.length)return Array.from(this,S8e);var a=o?C8e:x8e,c=this._parents,u=this._groups;"function"!=typeof l&&(l=b8e(l));for(var h=u.length,d=new Array(h),f=new Array(h),p=new Array(h),g=0;g<h;++g){var m=c[g],v=u[g],y=v.length,_=T8e(l.call(m,m&&m.__data__,g,c)),b=_.length,C=f[g]=new Array(b),x=d[g]=new Array(b),S=p[g]=new Array(y);a(m,v,C,x,S,_,o);for(var T,M,w=0,O=0;w<b;++w)if(T=C[w]){for(w>=O&&(O=w+1);!(M=x[O])&&++O<b;);T._next=M||null}}return(d=new Qa(d,c))._enter=f,d._exit=p,d},enter:function _8e(){return new Qa(this._enter||this._groups.map(kte),this._parents)},exit:function O8e(){return new Qa(this._exit||this._groups.map(kte),this._parents)},join:function D8e(l,o,a){var c=this.enter(),u=this,h=this.exit();return"function"==typeof l?(c=l(c))&&(c=c.selection()):c=c.append(l+""),null!=o&&(u=o(u))&&(u=u.selection()),null==a?h.remove():a(h),c&&u?c.merge(u).order():u},merge:function k8e(l){for(var o=l.selection?l.selection():l,a=this._groups,c=o._groups,u=a.length,d=Math.min(u,c.length),f=new Array(u),p=0;p<d;++p)for(var _,g=a[p],m=c[p],v=g.length,y=f[p]=new Array(v),b=0;b<v;++b)(_=g[b]||m[b])&&(y[b]=_);for(;p<u;++p)f[p]=a[p];return new Qa(f,this._parents)},selection:function FVe(){return this},order:function M8e(){for(var l=this._groups,o=-1,a=l.length;++o<a;)for(var d,c=l[o],u=c.length-1,h=c[u];--u>=0;)(d=c[u])&&(h&&4^d.compareDocumentPosition(h)&&h.parentNode.insertBefore(d,h),h=d);return this},sort:function E8e(l){function o(v,y){return v&&y?l(v.__data__,y.__data__):!v-!y}l||(l=A8e);for(var a=this._groups,c=a.length,u=new Array(c),h=0;h<c;++h){for(var g,d=a[h],f=d.length,p=u[h]=new Array(f),m=0;m<f;++m)(g=d[m])&&(p[m]=g);p.sort(o)}return new Qa(u,this._parents).order()},call:function I8e(){var l=arguments[0];return arguments[0]=this,l.apply(null,arguments),this},nodes:function P8e(){return Array.from(this)},node:function R8e(){for(var l=this._groups,o=0,a=l.length;o<a;++o)for(var c=l[o],u=0,h=c.length;u<h;++u){var d=c[u];if(d)return d}return null},size:function F8e(){let l=0;for(const o of this)++l;return l},empty:function N8e(){return!this.node()},each:function L8e(l){for(var o=this._groups,a=0,c=o.length;a<c;++a)for(var f,u=o[a],h=0,d=u.length;h<d;++h)(f=u[h])&&l.call(f,f.__data__,h,u);return this},attr:function W8e(l,o){var a=wC(l);if(arguments.length<2){var c=this.node();return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}return this.each((null==o?a.local?V8e:B8e:"function"==typeof o?a.local?$8e:H8e:a.local?U8e:z8e)(a,o))},style:function q8e(l,o,a){return arguments.length>1?this.each((null==o?G8e:"function"==typeof o?j8e:Q8e)(l,o,null==a?"":a)):Om(this.node(),l)},property:function K8e(l,o){return arguments.length>1?this.each((null==o?Z8e:"function"==typeof o?Y8e:X8e)(l,o)):this.node()[l]},classed:function nVe(l,o){var a=Mte(l+"");if(arguments.length<2){for(var c=wL(this.node()),u=-1,h=a.length;++u<h;)if(!c.contains(a[u]))return!1;return!0}return this.each(("function"==typeof o?tVe:o?J8e:eVe)(a,o))},text:function oVe(l){return arguments.length?this.each(null==l?iVe:("function"==typeof l?sVe:rVe)(l)):this.node().textContent},html:function uVe(l){return arguments.length?this.each(null==l?aVe:("function"==typeof l?cVe:lVe)(l)):this.node().innerHTML},raise:function dVe(){return this.each(hVe)},lower:function pVe(){return this.each(fVe)},append:function vVe(l){var o="function"==typeof l?l:pD(l);return this.select(function(){return this.appendChild(o.apply(this,arguments))})},insert:function _Ve(l,o){var a="function"==typeof l?l:pD(l),c=null==o?yVe:"function"==typeof o?o:dD(o);return this.select(function(){return this.insertBefore(a.apply(this,arguments),c.apply(this,arguments)||null)})},remove:function xVe(){return this.each(bVe)},clone:function wVe(l){return this.select(l?SVe:CVe)},datum:function TVe(l){return arguments.length?this.property("__data__",l):this.node().__data__},on:function EVe(l,o,a){var u,d,c=DVe(l+""),h=c.length;if(!(arguments.length<2)){for(f=o?MVe:kVe,u=0;u<h;++u)this.each(f(c[u],o,a));return this}var f=this.node().__on;if(f)for(var m,p=0,g=f.length;p<g;++p)for(u=0,m=f[p];u<h;++u)if((d=c[u]).type===m.type&&d.name===m.name)return m.value},dispatch:function PVe(l,o){return this.each(("function"==typeof o?IVe:AVe)(l,o))},[Symbol.iterator]:function*RVe(){for(var l=this._groups,o=0,a=l.length;o<a;++o)for(var d,c=l[o],u=0,h=c.length;u<h;++u)(d=c[u])&&(yield d)}};const Uy=Rte;function ro(l){return"string"==typeof l?new Qa([[document.querySelector(l)]],[document.documentElement]):new Qa([[l]],TL)}const NVe={passive:!1},TC={capture:!0,passive:!1};function OL(l){l.stopImmediatePropagation()}function Hy(l){l.preventDefault(),l.stopImmediatePropagation()}function gD(l){var o=l.document.documentElement,a=ro(l).on("dragstart.drag",Hy,TC);"onselectstart"in o?a.on("selectstart.drag",Hy,TC):(o.__noselect=o.style.MozUserSelect,o.style.MozUserSelect="none")}function mD(l,o){var a=l.document.documentElement,c=ro(l).on("dragstart.drag",null);o&&(c.on("click.drag",Hy,TC),setTimeout(function(){c.on("click.drag",null)},0)),"onselectstart"in a?c.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}function $y(l,o,a){l.prototype=o.prototype=a,a.constructor=l}function OC(l,o){var a=Object.create(l.prototype);for(var c in o)a[c]=o[c];return a}function Cp(){}var Wy=1/.7,Gy="\\s*([+-]?\\d+)\\s*",DC="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",LVe=/^#([0-9a-f]{3,8})$/,BVe=new RegExp("^rgb\\("+[Gy,Gy,Gy]+"\\)$"),VVe=new RegExp("^rgb\\("+[Gh,Gh,Gh]+"\\)$"),zVe=new RegExp("^rgba\\("+[Gy,Gy,Gy,DC]+"\\)$"),UVe=new RegExp("^rgba\\("+[Gh,Gh,Gh,DC]+"\\)$"),HVe=new RegExp("^hsl\\("+[DC,Gh,Gh]+"\\)$"),$Ve=new RegExp("^hsla\\("+[DC,Gh,Gh,DC]+"\\)$"),Fte={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Nte(){return this.rgb().formatHex()}function Lte(){return this.rgb().formatRgb()}function Wu(l){var o,a;return l=(l+"").trim().toLowerCase(),(o=LVe.exec(l))?(a=o[1].length,o=parseInt(o[1],16),6===a?Bte(o):3===a?new Xo(o>>8&15|o>>4&240,o>>4&15|240&o,(15&o)<<4|15&o,1):8===a?vD(o>>24&255,o>>16&255,o>>8&255,(255&o)/255):4===a?vD(o>>12&15|o>>8&240,o>>8&15|o>>4&240,o>>4&15|240&o,((15&o)<<4|15&o)/255):null):(o=BVe.exec(l))?new Xo(o[1],o[2],o[3],1):(o=VVe.exec(l))?new Xo(255*o[1]/100,255*o[2]/100,255*o[3]/100,1):(o=zVe.exec(l))?vD(o[1],o[2],o[3],o[4]):(o=UVe.exec(l))?vD(255*o[1]/100,255*o[2]/100,255*o[3]/100,o[4]):(o=HVe.exec(l))?Ute(o[1],o[2]/100,o[3]/100,1):(o=$Ve.exec(l))?Ute(o[1],o[2]/100,o[3]/100,o[4]):Fte.hasOwnProperty(l)?Bte(Fte[l]):"transparent"===l?new Xo(NaN,NaN,NaN,0):null}function Bte(l){return new Xo(l>>16&255,l>>8&255,255&l,1)}function vD(l,o,a,c){return c<=0&&(l=o=a=NaN),new Xo(l,o,a,c)}function DL(l){return l instanceof Cp||(l=Wu(l)),l?new Xo((l=l.rgb()).r,l.g,l.b,l.opacity):new Xo}function ff(l,o,a,c){return 1===arguments.length?DL(l):new Xo(l,o,a,null==c?1:c)}function Xo(l,o,a,c){this.r=+l,this.g=+o,this.b=+a,this.opacity=+c}function Vte(){return"#"+kL(this.r)+kL(this.g)+kL(this.b)}function zte(){var l=this.opacity;return(1===(l=isNaN(l)?1:Math.max(0,Math.min(1,l)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===l?")":", "+l+")")}function kL(l){return((l=Math.max(0,Math.min(255,Math.round(l)||0)))<16?"0":"")+l.toString(16)}function Ute(l,o,a,c){return c<=0?l=o=a=NaN:a<=0||a>=1?l=o=NaN:o<=0&&(l=NaN),new Qh(l,o,a,c)}function Hte(l){if(l instanceof Qh)return new Qh(l.h,l.s,l.l,l.opacity);if(l instanceof Cp||(l=Wu(l)),!l)return new Qh;if(l instanceof Qh)return l;var o=(l=l.rgb()).r/255,a=l.g/255,c=l.b/255,u=Math.min(o,a,c),h=Math.max(o,a,c),d=NaN,f=h-u,p=(h+u)/2;return f?(d=o===h?(a-c)/f+6*(a<c):a===h?(c-o)/f+2:(o-a)/f+4,f/=p<.5?h+u:2-h-u,d*=60):f=p>0&&p<1?0:d,new Qh(d,f,p,l.opacity)}function yD(l,o,a,c){return 1===arguments.length?Hte(l):new Qh(l,o,a,null==c?1:c)}function Qh(l,o,a,c){this.h=+l,this.s=+o,this.l=+a,this.opacity=+c}function ML(l,o,a){return 255*(l<60?o+(a-o)*l/60:l<180?a:l<240?o+(a-o)*(240-l)/60:o)}function $te(l,o,a,c,u){var h=l*l,d=h*l;return((1-3*l+3*h-d)*o+(4-6*h+3*d)*a+(1+3*l+3*h-3*d)*c+d*u)/6}function Wte(l){var o=l.length-1;return function(a){var c=a<=0?a=0:a>=1?(a=1,o-1):Math.floor(a*o),u=l[c],h=l[c+1];return $te((a-c/o)*o,c>0?l[c-1]:2*u-h,u,h,c<o-1?l[c+2]:2*h-u)}}function Gte(l){var o=l.length;return function(a){var c=Math.floor(((a%=1)<0?++a:a)*o);return $te((a-c/o)*o,l[(c+o-1)%o],l[c%o],l[(c+1)%o],l[(c+2)%o])}}$y(Cp,Wu,{copy:function(l){return Object.assign(new this.constructor,this,l)},displayable:function(){return this.rgb().displayable()},hex:Nte,formatHex:Nte,formatHsl:function WVe(){return Hte(this).formatHsl()},formatRgb:Lte,toString:Lte}),$y(Xo,ff,OC(Cp,{brighter:function(l){return l=null==l?Wy:Math.pow(Wy,l),new Xo(this.r*l,this.g*l,this.b*l,this.opacity)},darker:function(l){return l=null==l?.7:Math.pow(.7,l),new Xo(this.r*l,this.g*l,this.b*l,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vte,formatHex:Vte,formatRgb:zte,toString:zte})),$y(Qh,yD,OC(Cp,{brighter:function(l){return l=null==l?Wy:Math.pow(Wy,l),new Qh(this.h,this.s,this.l*l,this.opacity)},darker:function(l){return l=null==l?.7:Math.pow(.7,l),new Qh(this.h,this.s,this.l*l,this.opacity)},rgb:function(){var l=this.h%360+360*(this.h<0),o=isNaN(l)||isNaN(this.s)?0:this.s,a=this.l,c=a+(a<.5?a:1-a)*o,u=2*a-c;return new Xo(ML(l>=240?l-240:l+120,u,c),ML(l,u,c),ML(l<120?l+240:l-120,u,c),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var l=this.opacity;return(1===(l=isNaN(l)?1:Math.max(0,Math.min(1,l)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===l?")":", "+l+")")}}));const _D=l=>()=>l;function Qte(l,o){return function(a){return l+a*o}}function bD(l,o){var a=o-l;return a?Qte(l,a>180||a<-180?a-360*Math.round(a/360):a):_D(isNaN(l)?o:l)}function zo(l,o){var a=o-l;return a?Qte(l,a):_D(isNaN(l)?o:l)}const kC=function l(o){var a=function QVe(l){return 1==(l=+l)?zo:function(o,a){return a-o?function GVe(l,o,a){return l=Math.pow(l,a),o=Math.pow(o,a)-l,a=1/a,function(c){return Math.pow(l+c*o,a)}}(o,a,l):_D(isNaN(o)?a:o)}}(o);function c(u,h){var d=a((u=ff(u)).r,(h=ff(h)).r),f=a(u.g,h.g),p=a(u.b,h.b),g=zo(u.opacity,h.opacity);return function(m){return u.r=d(m),u.g=f(m),u.b=p(m),u.opacity=g(m),u+""}}return c.gamma=l,c}(1);function jte(l){return function(o){var d,f,a=o.length,c=new Array(a),u=new Array(a),h=new Array(a);for(d=0;d<a;++d)f=ff(o[d]),c[d]=f.r||0,u[d]=f.g||0,h[d]=f.b||0;return c=l(c),u=l(u),h=l(h),f.opacity=1,function(p){return f.r=c(p),f.g=u(p),f.b=h(p),f+""}}}var qte=jte(Wte),jVe=jte(Gte);function EL(l,o){o||(o=[]);var u,a=l?Math.min(o.length,l.length):0,c=o.slice();return function(h){for(u=0;u<a;++u)c[u]=l[u]*(1-h)+o[u]*h;return c}}function Zte(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)}function qVe(l,o){return(Zte(o)?EL:Xte)(l,o)}function Xte(l,o){var d,a=o?o.length:0,c=l?Math.min(a,l.length):0,u=new Array(c),h=new Array(a);for(d=0;d<c;++d)u[d]=Sp(l[d],o[d]);for(;d<a;++d)h[d]=o[d];return function(f){for(d=0;d<c;++d)h[d]=u[d](f);return h}}function Yte(l,o){var a=new Date;return l=+l,o=+o,function(c){return a.setTime(l*(1-c)+o*c),a}}function Kc(l,o){return l=+l,o=+o,function(a){return l*(1-a)+o*a}}function Kte(l,o){var u,a={},c={};for(u in(null===l||"object"!=typeof l)&&(l={}),(null===o||"object"!=typeof o)&&(o={}),o)u in l?a[u]=Sp(l[u],o[u]):c[u]=o[u];return function(h){for(u in a)c[u]=a[u](h);return c}}var AL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,IL=new RegExp(AL.source,"g");function PL(l,o){var c,u,h,a=AL.lastIndex=IL.lastIndex=0,d=-1,f=[],p=[];for(l+="",o+="";(c=AL.exec(l))&&(u=IL.exec(o));)(h=u.index)>a&&(h=o.slice(a,h),f[d]?f[d]+=h:f[++d]=h),(c=c[0])===(u=u[0])?f[d]?f[d]+=u:f[++d]=u:(f[++d]=null,p.push({i:d,x:Kc(c,u)})),a=IL.lastIndex;return a<o.length&&(h=o.slice(a),f[d]?f[d]+=h:f[++d]=h),f.length<2?p[0]?function XVe(l){return function(o){return l(o)+""}}(p[0].x):function ZVe(l){return function(){return l}}(o):(o=p.length,function(g){for(var v,m=0;m<o;++m)f[(v=p[m]).i]=v.x(g);return f.join("")})}function Sp(l,o){var c,a=typeof o;return null==o||"boolean"===a?_D(o):("number"===a?Kc:"string"===a?(c=Wu(o))?(o=c,kC):PL:o instanceof Wu?kC:o instanceof Date?Yte:Zte(o)?EL:Array.isArray(o)?Xte:"function"!=typeof o.valueOf&&"function"!=typeof o.toString||isNaN(o)?Kte:Kc)(l,o)}function Jte(l){let o;for(;o=l.sourceEvent;)l=o;return l}function sc(l,o){if(l=Jte(l),void 0===o&&(o=l.currentTarget),o){var a=o.ownerSVGElement||o;if(a.createSVGPoint){var c=a.createSVGPoint();return c.x=l.clientX,c.y=l.clientY,[(c=c.matrixTransform(o.getScreenCTM().inverse())).x,c.y]}if(o.getBoundingClientRect){var u=o.getBoundingClientRect();return[l.clientX-u.left-o.clientLeft,l.clientY-u.top-o.clientTop]}}return[l.pageX,l.pageY]}var xD,AC,Qy=0,MC=0,EC=0,CD=0,km=0,SD=0,IC="object"==typeof performance&&performance.now?performance:Date,tne="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(l){setTimeout(l,17)};function PC(){return km||(tne(YVe),km=IC.now()+SD)}function YVe(){km=0}function RC(){this._call=this._time=this._next=null}function wD(l,o,a){var c=new RC;return c.restart(l,o,a),c}function nne(){PC(),++Qy;for(var o,l=xD;l;)(o=km-l._time)>=0&&l._call.call(void 0,o),l=l._next;--Qy}function ine(){km=(CD=IC.now())+SD,Qy=MC=0;try{nne()}finally{Qy=0,function JVe(){for(var l,a,o=xD,c=1/0;o;)o._call?(c>o._time&&(c=o._time),l=o,o=o._next):(a=o._next,o._next=null,o=l?l._next=a:xD=a);AC=l,RL(c)}(),km=0}}function KVe(){var l=IC.now(),o=l-CD;o>1e3&&(SD-=o,CD=l)}function RL(l){Qy||(MC&&(MC=clearTimeout(MC)),l-km>24?(l<1/0&&(MC=setTimeout(ine,l-IC.now()-SD)),EC&&(EC=clearInterval(EC))):(EC||(CD=IC.now(),EC=setInterval(KVe,1e3)),Qy=1,tne(ine)))}function FL(l,o,a){var c=new RC;return c.restart(u=>{c.stop(),l(u+o)},o=null==o?0:+o,a),c}RC.prototype=wD.prototype={constructor:RC,restart:function(l,o,a){if("function"!=typeof l)throw new TypeError("callback is not a function");a=(null==a?PC():+a)+(null==o?0:+o),!this._next&&AC!==this&&(AC?AC._next=this:xD=this,AC=this),this._call=l,this._time=a,RL()},stop:function(){this._call&&(this._call=null,this._time=1/0,RL())}};var e6e=zy("start","end","cancel","interrupt"),t6e=[];function DD(l,o,a,c,u,h){var d=l.__transition;if(d){if(a in d)return}else l.__transition={};!function n6e(l,o,a){var u,c=l.__transition;function d(g){var m,v,y,_;if(1!==a.state)return p();for(m in c)if((_=c[m]).name===a.name){if(3===_.state)return FL(d);4===_.state?(_.state=6,_.timer.stop(),_.on.call("interrupt",l,l.__data__,_.index,_.group),delete c[m]):+m<o&&(_.state=6,_.timer.stop(),_.on.call("cancel",l,l.__data__,_.index,_.group),delete c[m])}if(FL(function(){3===a.state&&(a.state=4,a.timer.restart(f,a.delay,a.time),f(g))}),a.state=2,a.on.call("start",l,l.__data__,a.index,a.group),2===a.state){for(a.state=3,u=new Array(y=a.tween.length),m=0,v=-1;m<y;++m)(_=a.tween[m].value.call(l,l.__data__,a.index,a.group))&&(u[++v]=_);u.length=v+1}}function f(g){for(var m=g<a.duration?a.ease.call(null,g/a.duration):(a.timer.restart(p),a.state=5,1),v=-1,y=u.length;++v<y;)u[v].call(l,m);5===a.state&&(a.on.call("end",l,l.__data__,a.index,a.group),p())}function p(){for(var g in a.state=6,a.timer.stop(),delete c[o],c)return;delete l.__transition}c[o]=a,a.timer=wD(function h(g){a.state=1,a.timer.restart(d,a.delay,a.time),a.delay<=g&&d(g-a.delay)},0,a.time)}(l,a,{name:o,index:c,group:u,on:e6e,tween:t6e,time:h.time,delay:h.delay,duration:h.duration,ease:h.ease,timer:null,state:0})}function VL(l,o){var a=Gu(l,o);if(a.state>0)throw new Error("too late; already scheduled");return a}function jh(l,o){var a=Gu(l,o);if(a.state>3)throw new Error("too late; already running");return a}function Gu(l,o){var a=l.__transition;if(!a||!(a=a[o]))throw new Error("transition not found");return a}function Mm(l,o){var c,u,d,a=l.__transition,h=!0;if(a){for(d in o=null==o?null:o+"",a)(c=a[d]).name===o?(u=c.state>2&&c.state<5,c.state=6,c.timer.stop(),c.on.call(u?"interrupt":"cancel",l,l.__data__,c.index,c.group),delete a[d]):h=!1;h&&delete l.__transition}}var kD,one=180/Math.PI,zL={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ane(l,o,a,c,u,h){var d,f,p;return(d=Math.sqrt(l*l+o*o))&&(l/=d,o/=d),(p=l*a+o*c)&&(a-=l*p,c-=o*p),(f=Math.sqrt(a*a+c*c))&&(a/=f,c/=f,p/=f),l*c<o*a&&(l=-l,o=-o,p=-p,d=-d),{translateX:u,translateY:h,rotate:Math.atan2(o,l)*one,skewX:Math.atan(p)*one,scaleX:d,scaleY:f}}function lne(l,o,a,c){function u(g){return g.length?g.pop()+" ":""}return function(g,m){var v=[],y=[];return g=l(g),m=l(m),function h(g,m,v,y,_,b){if(g!==v||m!==y){var C=_.push("translate(",null,o,null,a);b.push({i:C-4,x:Kc(g,v)},{i:C-2,x:Kc(m,y)})}else(v||y)&&_.push("translate("+v+o+y+a)}(g.translateX,g.translateY,m.translateX,m.translateY,v,y),function d(g,m,v,y){g!==m?(g-m>180?m+=360:m-g>180&&(g+=360),y.push({i:v.push(u(v)+"rotate(",null,c)-2,x:Kc(g,m)})):m&&v.push(u(v)+"rotate("+m+c)}(g.rotate,m.rotate,v,y),function f(g,m,v,y){g!==m?y.push({i:v.push(u(v)+"skewX(",null,c)-2,x:Kc(g,m)}):m&&v.push(u(v)+"skewX("+m+c)}(g.skewX,m.skewX,v,y),function p(g,m,v,y,_,b){if(g!==v||m!==y){var C=_.push(u(_)+"scale(",null,",",null,")");b.push({i:C-4,x:Kc(g,v)},{i:C-2,x:Kc(m,y)})}else(1!==v||1!==y)&&_.push(u(_)+"scale("+v+","+y+")")}(g.scaleX,g.scaleY,m.scaleX,m.scaleY,v,y),g=m=null,function(_){for(var x,b=-1,C=y.length;++b<C;)v[(x=y[b]).i]=x.x(_);return v.join("")}}}var cne=lne(function r6e(l){const o=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(l+"");return o.isIdentity?zL:ane(o.a,o.b,o.c,o.d,o.e,o.f)},"px, ","px)","deg)"),une=lne(function s6e(l){return null!=l&&(kD||(kD=document.createElementNS("http://www.w3.org/2000/svg","g")),kD.setAttribute("transform",l),l=kD.transform.baseVal.consolidate())?ane((l=l.matrix).a,l.b,l.c,l.d,l.e,l.f):zL},", ",")",")");function o6e(l,o){var a,c;return function(){var u=jh(this,l),h=u.tween;if(h!==a)for(var d=0,f=(c=a=h).length;d<f;++d)if(c[d].name===o){(c=c.slice()).splice(d,1);break}u.tween=c}}function a6e(l,o,a){var c,u;if("function"!=typeof a)throw new Error;return function(){var h=jh(this,l),d=h.tween;if(d!==c){u=(c=d).slice();for(var f={name:o,value:a},p=0,g=u.length;p<g;++p)if(u[p].name===o){u[p]=f;break}p===g&&u.push(f)}h.tween=u}}function UL(l,o,a){var c=l._id;return l.each(function(){var u=jh(this,c);(u.value||(u.value={}))[o]=a.apply(this,arguments)}),function(u){return Gu(u,c).value[o]}}function hne(l,o){var a;return("number"==typeof o?Kc:o instanceof Wu?kC:(a=Wu(o))?(o=a,kC):PL)(l,o)}function c6e(l){return function(){this.removeAttribute(l)}}function u6e(l){return function(){this.removeAttributeNS(l.space,l.local)}}function h6e(l,o,a){var c,h,u=a+"";return function(){var d=this.getAttribute(l);return d===u?null:d===c?h:h=o(c=d,a)}}function d6e(l,o,a){var c,h,u=a+"";return function(){var d=this.getAttributeNS(l.space,l.local);return d===u?null:d===c?h:h=o(c=d,a)}}function f6e(l,o,a){var c,u,h;return function(){var d,p,f=a(this);return null==f?void this.removeAttribute(l):(d=this.getAttribute(l))===(p=f+"")?null:d===c&&p===u?h:(u=p,h=o(c=d,f))}}function p6e(l,o,a){var c,u,h;return function(){var d,p,f=a(this);return null==f?void this.removeAttributeNS(l.space,l.local):(d=this.getAttributeNS(l.space,l.local))===(p=f+"")?null:d===c&&p===u?h:(u=p,h=o(c=d,f))}}function m6e(l,o){return function(a){this.setAttribute(l,o.call(this,a))}}function v6e(l,o){return function(a){this.setAttributeNS(l.space,l.local,o.call(this,a))}}function y6e(l,o){var a,c;function u(){var h=o.apply(this,arguments);return h!==c&&(a=(c=h)&&v6e(l,h)),a}return u._value=o,u}function _6e(l,o){var a,c;function u(){var h=o.apply(this,arguments);return h!==c&&(a=(c=h)&&m6e(l,h)),a}return u._value=o,u}function x6e(l,o){return function(){VL(this,l).delay=+o.apply(this,arguments)}}function C6e(l,o){return o=+o,function(){VL(this,l).delay=o}}function w6e(l,o){return function(){jh(this,l).duration=+o.apply(this,arguments)}}function T6e(l,o){return o=+o,function(){jh(this,l).duration=o}}function D6e(l,o){if("function"!=typeof o)throw new Error;return function(){jh(this,l).ease=o}}function R6e(l,o,a){var c,u,h=function P6e(l){return(l+"").trim().split(/^|\s+/).every(function(o){var a=o.indexOf(".");return a>=0&&(o=o.slice(0,a)),!o||"start"===o})}(o)?VL:jh;return function(){var d=h(this,l),f=d.on;f!==c&&(u=(c=f).copy()).on(o,a),d.on=u}}var z6e=Uy.prototype.constructor;function dne(l){return function(){this.style.removeProperty(l)}}function j6e(l,o,a){return function(c){this.style.setProperty(l,o.call(this,c),a)}}function q6e(l,o,a){var c,u;function h(){var d=o.apply(this,arguments);return d!==u&&(c=(u=d)&&j6e(l,d,a)),c}return h._value=o,h}function J6e(l){return function(o){this.textContent=l.call(this,o)}}function eze(l){var o,a;function c(){var u=l.apply(this,arguments);return u!==a&&(o=(a=u)&&J6e(u)),o}return c._value=l,c}var rze=0;function qh(l,o,a,c){this._groups=l,this._parents=o,this._name=a,this._id=c}function fne(l){return Uy().transition(l)}function pne(){return++rze}var pf=Uy.prototype;function sze(l){return l*l*l}function oze(l){return--l*l*l+1}function HL(l){return((l*=2)<=1?l*l*l:(l-=2)*l*l+2)/2}qh.prototype=fne.prototype={constructor:qh,select:function B6e(l){var o=this._name,a=this._id;"function"!=typeof l&&(l=dD(l));for(var c=this._groups,u=c.length,h=new Array(u),d=0;d<u;++d)for(var m,v,f=c[d],p=f.length,g=h[d]=new Array(p),y=0;y<p;++y)(m=f[y])&&(v=l.call(m,m.__data__,y,f))&&("__data__"in m&&(v.__data__=m.__data__),g[y]=v,DD(g[y],o,a,y,g,Gu(m,a)));return new qh(h,this._parents,o,a)},selectAll:function V6e(l){var o=this._name,a=this._id;"function"!=typeof l&&(l=_L(l));for(var c=this._groups,u=c.length,h=[],d=[],f=0;f<u;++f)for(var m,p=c[f],g=p.length,v=0;v<g;++v)if(m=p[v]){for(var _,y=l.call(m,m.__data__,v,p),b=Gu(m,a),C=0,x=y.length;C<x;++C)(_=y[C])&&DD(_,o,a,C,y,b);h.push(y),d.push(m)}return new qh(h,d,o,a)},selectChild:pf.selectChild,selectChildren:pf.selectChildren,filter:function A6e(l){"function"!=typeof l&&(l=bL(l));for(var o=this._groups,a=o.length,c=new Array(a),u=0;u<a;++u)for(var p,h=o[u],d=h.length,f=c[u]=[],g=0;g<d;++g)(p=h[g])&&l.call(p,p.__data__,g,h)&&f.push(p);return new qh(c,this._parents,this._name,this._id)},merge:function I6e(l){if(l._id!==this._id)throw new Error;for(var o=this._groups,a=l._groups,c=o.length,h=Math.min(c,a.length),d=new Array(c),f=0;f<h;++f)for(var y,p=o[f],g=a[f],m=p.length,v=d[f]=new Array(m),_=0;_<m;++_)(y=p[_]||g[_])&&(v[_]=y);for(;f<c;++f)d[f]=o[f];return new qh(d,this._parents,this._name,this._id)},selection:function U6e(){return new z6e(this._groups,this._parents)},transition:function nze(){for(var l=this._name,o=this._id,a=pne(),c=this._groups,u=c.length,h=0;h<u;++h)for(var p,d=c[h],f=d.length,g=0;g<f;++g)if(p=d[g]){var m=Gu(p,o);DD(p,l,a,g,d,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new qh(c,this._parents,l,a)},call:pf.call,nodes:pf.nodes,node:pf.node,size:pf.size,empty:pf.empty,each:pf.each,on:function F6e(l,o){var a=this._id;return arguments.length<2?Gu(this.node(),a).on.on(l):this.each(R6e(a,l,o))},attr:function g6e(l,o){var a=wC(l),c="transform"===a?une:hne;return this.attrTween(l,"function"==typeof o?(a.local?p6e:f6e)(a,c,UL(this,"attr."+l,o)):null==o?(a.local?u6e:c6e)(a):(a.local?d6e:h6e)(a,c,o))},attrTween:function b6e(l,o){var a="attr."+l;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==o)return this.tween(a,null);if("function"!=typeof o)throw new Error;var c=wC(l);return this.tween(a,(c.local?y6e:_6e)(c,o))},style:function Q6e(l,o,a){var c="transform"==(l+="")?cne:hne;return null==o?this.styleTween(l,function H6e(l,o){var a,c,u;return function(){var h=Om(this,l),d=(this.style.removeProperty(l),Om(this,l));return h===d?null:h===a&&d===c?u:u=o(a=h,c=d)}}(l,c)).on("end.style."+l,dne(l)):"function"==typeof o?this.styleTween(l,function W6e(l,o,a){var c,u,h;return function(){var d=Om(this,l),f=a(this),p=f+"";return null==f&&(this.style.removeProperty(l),p=f=Om(this,l)),d===p?null:d===c&&p===u?h:(u=p,h=o(c=d,f))}}(l,c,UL(this,"style."+l,o))).each(function G6e(l,o){var a,c,u,f,h="style."+o,d="end."+h;return function(){var p=jh(this,l),g=p.on,m=null==p.value[h]?f||(f=dne(o)):void 0;(g!==a||u!==m)&&(c=(a=g).copy()).on(d,u=m),p.on=c}}(this._id,l)):this.styleTween(l,function $6e(l,o,a){var c,h,u=a+"";return function(){var d=Om(this,l);return d===u?null:d===c?h:h=o(c=d,a)}}(l,c,o),a).on("end.style."+l,null)},styleTween:function Z6e(l,o,a){var c="style."+(l+="");if(arguments.length<2)return(c=this.tween(c))&&c._value;if(null==o)return this.tween(c,null);if("function"!=typeof o)throw new Error;return this.tween(c,q6e(l,o,null==a?"":a))},text:function K6e(l){return this.tween("text","function"==typeof l?function Y6e(l){return function(){var o=l(this);this.textContent=null==o?"":o}}(UL(this,"text",l)):function X6e(l){return function(){this.textContent=l}}(null==l?"":l+""))},textTween:function tze(l){var o="text";if(arguments.length<1)return(o=this.tween(o))&&o._value;if(null==l)return this.tween(o,null);if("function"!=typeof l)throw new Error;return this.tween(o,eze(l))},remove:function L6e(){return this.on("end.remove",function N6e(l){return function(){var o=this.parentNode;for(var a in this.__transition)if(+a!==l)return;o&&o.removeChild(this)}}(this._id))},tween:function l6e(l,o){var a=this._id;if(l+="",arguments.length<2){for(var d,c=Gu(this.node(),a).tween,u=0,h=c.length;u<h;++u)if((d=c[u]).name===l)return d.value;return null}return this.each((null==o?o6e:a6e)(a,l,o))},delay:function S6e(l){var o=this._id;return arguments.length?this.each(("function"==typeof l?x6e:C6e)(o,l)):Gu(this.node(),o).delay},duration:function O6e(l){var o=this._id;return arguments.length?this.each(("function"==typeof l?w6e:T6e)(o,l)):Gu(this.node(),o).duration},ease:function k6e(l){var o=this._id;return arguments.length?this.each(D6e(o,l)):Gu(this.node(),o).ease},easeVarying:function E6e(l){if("function"!=typeof l)throw new Error;return this.each(function M6e(l,o){return function(){var a=o.apply(this,arguments);if("function"!=typeof a)throw new Error;jh(this,l).ease=a}}(this._id,l))},end:function ize(){var l,o,a=this,c=a._id,u=a.size();return new Promise(function(h,d){var f={value:d},p={value:function(){0==--u&&h()}};a.each(function(){var g=jh(this,c),m=g.on;m!==l&&((o=(l=m).copy())._.cancel.push(f),o._.interrupt.push(f),o._.end.push(p)),g.on=o}),0===u&&h()})},[Symbol.iterator]:pf[Symbol.iterator]};var aze={time:null,delay:0,duration:250,ease:HL};function lze(l,o){for(var a;!(a=l.__transition)||!(a=a[o]);)if(!(l=l.parentNode))throw new Error(`transition ${o} not found`);return a}Uy.prototype.interrupt=function i6e(l){return this.each(function(){Mm(this,l)})},Uy.prototype.transition=function cze(l){var o,a;l instanceof qh?(o=l._id,l=l._name):(o=pne(),(a=aze).time=PC(),l=null==l?null:l+"");for(var c=this._groups,u=c.length,h=0;h<u;++h)for(var p,d=c[h],f=d.length,g=0;g<f;++g)(p=d[g])&&DD(p,l,o,g,d,a||lze(p,o));return new qh(c,this._parents,l,o)};var uze=[null];function hze(l,o){var c,u,a=l.__transition;if(a)for(u in o=null==o?null:o+"",a)if((c=a[u]).state>1&&c.name===o)return new qh([[l]],uze,o,+u);return null}const $L=l=>()=>l;function dze(l,{sourceEvent:o,target:a,selection:c,mode:u,dispatch:h}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:o,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},selection:{value:c,enumerable:!0,configurable:!0},mode:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function fze(l){l.stopImmediatePropagation()}function WL(l){l.preventDefault(),l.stopImmediatePropagation()}var gne={name:"drag"},GL={name:"space"},jy={name:"handle"},qy={name:"center"};const{abs:mne,max:ya,min:_a}=Math;function vne(l){return[+l[0],+l[1]]}function QL(l){return[vne(l[0]),vne(l[1])]}var MD={name:"x",handles:["w","e"].map(FC),input:function(l,o){return null==l?null:[[+l[0],o[0][1]],[+l[1],o[1][1]]]},output:function(l){return l&&[l[0][0],l[1][0]]}},ED={name:"y",handles:["n","s"].map(FC),input:function(l,o){return null==l?null:[[o[0][0],+l[0]],[o[1][0],+l[1]]]},output:function(l){return l&&[l[0][1],l[1][1]]}},pze={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(FC),input:function(l){return null==l?null:QL(l)},output:function(l){return l}},gf={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},yne={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},_ne={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},gze={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},mze={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function FC(l){return{type:l}}function vze(l){return!l.ctrlKey&&!l.button}function yze(){var l=this.ownerSVGElement||this;return l.hasAttribute("viewBox")?[[(l=l.viewBox.baseVal).x,l.y],[l.x+l.width,l.y+l.height]]:[[0,0],[l.width.baseVal.value,l.height.baseVal.value]]}function _ze(){return navigator.maxTouchPoints||"ontouchstart"in this}function jL(l){for(;!l.__brush;)if(!(l=l.parentNode))return;return l.__brush}function bze(l){return l[0][0]===l[1][0]||l[0][1]===l[1][1]}function xze(l){var o=l.__brush;return o?o.dim.output(o.selection):null}function Cze(){return qL(MD)}function Sze(){return qL(ED)}function wze(){return qL(pze)}function qL(l){var f,o=yze,a=vze,c=_ze,u=!0,h=zy("start","brush","end"),d=6;function p(x){var S=x.property("__brush",C).selectAll(".overlay").data([FC("overlay")]);S.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",gf.overlay).merge(S).each(function(){var O=jL(this).extent;ro(this).attr("x",O[0][0]).attr("y",O[0][1]).attr("width",O[1][0]-O[0][0]).attr("height",O[1][1]-O[0][1])}),x.selectAll(".selection").data([FC("selection")]).enter().append("rect").attr("class","selection").attr("cursor",gf.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var w=x.selectAll(".handle").data(l.handles,function(O){return O.type});w.exit().remove(),w.enter().append("rect").attr("class",function(O){return"handle handle--"+O.type}).attr("cursor",function(O){return gf[O.type]}),x.each(g).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",y).filter(c).on("touchstart.brush",y).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(){var x=ro(this),S=jL(this).selection;S?(x.selectAll(".selection").style("display",null).attr("x",S[0][0]).attr("y",S[0][1]).attr("width",S[1][0]-S[0][0]).attr("height",S[1][1]-S[0][1]),x.selectAll(".handle").style("display",null).attr("x",function(w){return"e"===w.type[w.type.length-1]?S[1][0]-d/2:S[0][0]-d/2}).attr("y",function(w){return"s"===w.type[0]?S[1][1]-d/2:S[0][1]-d/2}).attr("width",function(w){return"n"===w.type||"s"===w.type?S[1][0]-S[0][0]+d:d}).attr("height",function(w){return"e"===w.type||"w"===w.type?S[1][1]-S[0][1]+d:d})):x.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function m(x,S,w){var O=x.__brush.emitter;return!O||w&&O.clean?new v(x,S,w):O}function v(x,S,w){this.that=x,this.args=S,this.state=x.__brush,this.active=0,this.clean=w}function y(x){if((!f||x.touches)&&a.apply(this,arguments)){var B,V,j,N,z,$,G,W,ae,Ce,ve,S=this,w=x.target.__data__.type,O="selection"===(u&&x.metaKey?w="overlay":w)?gne:u&&x.altKey?qy:jy,T=l===ED?null:gze[w],M=l===MD?null:mze[w],A=jL(S),I=A.extent,E=A.selection,P=I[0][0],Q=I[0][1],U=I[1][0],H=I[1][1],X=0,K=0,se=T&&M&&u&&x.shiftKey,Oe=Array.from(x.touches||[x],we=>{const We=we.identifier;return(we=sc(we,S)).point0=we.slice(),we.identifier=We,we});Mm(S);var $e=m(S,arguments,!0).beforestart();if("overlay"===w){E&&(ae=!0);const we=[Oe[0],Oe[1]||Oe[0]];A.selection=E=[[B=l===ED?P:_a(we[0][0],we[1][0]),j=l===MD?Q:_a(we[0][1],we[1][1])],[z=l===ED?U:ya(we[0][0],we[1][0]),G=l===MD?H:ya(we[0][1],we[1][1])]],Oe.length>1&&Re(x)}else B=E[0][0],j=E[0][1],z=E[1][0],G=E[1][1];V=B,N=j,$=z,W=G;var Me=ro(S).attr("pointer-events","none"),Ie=Me.selectAll(".overlay").attr("cursor",gf[w]);if(x.touches)$e.moved=ue,$e.ended=Ye;else{var Xe=ro(x.view).on("mousemove.brush",ue,!0).on("mouseup.brush",Ye,!0);u&&Xe.on("keydown.brush",nt,!0).on("keyup.brush",Qe,!0),gD(x.view)}g.call(S),$e.start(x,O.name)}function ue(we){for(const We of we.changedTouches||[we])for(const Bt of Oe)Bt.identifier===We.identifier&&(Bt.cur=sc(We,S));if(se&&!Ce&&!ve&&1===Oe.length){const We=Oe[0];mne(We.cur[0]-We[0])>mne(We.cur[1]-We[1])?ve=!0:Ce=!0}for(const We of Oe)We.cur&&(We[0]=We.cur[0],We[1]=We.cur[1]);ae=!0,WL(we),Re(we)}function Re(we){const We=Oe[0],Bt=We.point0;var bn;switch(X=We[0]-Bt[0],K=We[1]-Bt[1],O){case GL:case gne:T&&(X=ya(P-B,_a(U-z,X)),V=B+X,$=z+X),M&&(K=ya(Q-j,_a(H-G,K)),N=j+K,W=G+K);break;case jy:Oe[1]?(T&&(V=ya(P,_a(U,Oe[0][0])),$=ya(P,_a(U,Oe[1][0])),T=1),M&&(N=ya(Q,_a(H,Oe[0][1])),W=ya(Q,_a(H,Oe[1][1])),M=1)):(T<0?(X=ya(P-B,_a(U-B,X)),V=B+X,$=z):T>0&&(X=ya(P-z,_a(U-z,X)),V=B,$=z+X),M<0?(K=ya(Q-j,_a(H-j,K)),N=j+K,W=G):M>0&&(K=ya(Q-G,_a(H-G,K)),N=j,W=G+K));break;case qy:T&&(V=ya(P,_a(U,B-X*T)),$=ya(P,_a(U,z+X*T))),M&&(N=ya(Q,_a(H,j-K*M)),W=ya(Q,_a(H,G+K*M)))}$<V&&(T*=-1,bn=B,B=z,z=bn,bn=V,V=$,$=bn,w in yne&&Ie.attr("cursor",gf[w=yne[w]])),W<N&&(M*=-1,bn=j,j=G,G=bn,bn=N,N=W,W=bn,w in _ne&&Ie.attr("cursor",gf[w=_ne[w]])),A.selection&&(E=A.selection),Ce&&(V=E[0][0],$=E[1][0]),ve&&(N=E[0][1],W=E[1][1]),(E[0][0]!==V||E[0][1]!==N||E[1][0]!==$||E[1][1]!==W)&&(A.selection=[[V,N],[$,W]],g.call(S),$e.brush(we,O.name))}function Ye(we){if(fze(we),we.touches){if(we.touches.length)return;f&&clearTimeout(f),f=setTimeout(function(){f=null},500)}else mD(we.view,ae),Xe.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Me.attr("pointer-events","all"),Ie.attr("cursor",gf.overlay),A.selection&&(E=A.selection),bze(E)&&(A.selection=null,g.call(S)),$e.end(we,O.name)}function nt(we){switch(we.keyCode){case 16:se=T&&M;break;case 18:O===jy&&(T&&(z=$-X*T,B=V+X*T),M&&(G=W-K*M,j=N+K*M),O=qy,Re(we));break;case 32:(O===jy||O===qy)&&(T<0?z=$-X:T>0&&(B=V-X),M<0?G=W-K:M>0&&(j=N-K),O=GL,Ie.attr("cursor",gf.selection),Re(we));break;default:return}WL(we)}function Qe(we){switch(we.keyCode){case 16:se&&(Ce=ve=se=!1,Re(we));break;case 18:O===qy&&(T<0?z=$:T>0&&(B=V),M<0?G=W:M>0&&(j=N),O=jy,Re(we));break;case 32:O===GL&&(we.altKey?(T&&(z=$-X*T,B=V+X*T),M&&(G=W-K*M,j=N+K*M),O=qy):(T<0?z=$:T>0&&(B=V),M<0?G=W:M>0&&(j=N),O=jy),Ie.attr("cursor",gf[w]),Re(we));break;default:return}WL(we)}}function _(x){m(this,arguments).moved(x)}function b(x){m(this,arguments).ended(x)}function C(){var x=this.__brush||{selection:null};return x.extent=QL(o.apply(this,arguments)),x.dim=l,x}return p.move=function(x,S,w){x.tween?x.on("start.brush",function(O){m(this,arguments).beforestart().start(O)}).on("interrupt.brush end.brush",function(O){m(this,arguments).end(O)}).tween("brush",function(){var O=this,T=O.__brush,M=m(O,arguments),A=T.selection,I=l.input("function"==typeof S?S.apply(this,arguments):S,T.extent),E=Sp(A,I);function P(B){T.selection=1===B&&null===I?null:E(B),g.call(O),M.brush()}return null!==A&&null!==I?P:P(1)}):x.each(function(){var O=this,T=arguments,M=O.__brush,A=l.input("function"==typeof S?S.apply(O,T):S,M.extent),I=m(O,T).beforestart();Mm(O),M.selection=null===A?null:A,g.call(O),I.start(w).brush(w).end(w)})},p.clear=function(x,S){p.move(x,null,S)},v.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(x,S){return this.starting?(this.starting=!1,this.emit("start",x,S)):this.emit("brush",x),this},brush:function(x,S){return this.emit("brush",x,S),this},end:function(x,S){return 0==--this.active&&(delete this.state.emitter,this.emit("end",x,S)),this},emit:function(x,S,w){var O=ro(this.that).datum();h.call(x,this.that,new dze(x,{sourceEvent:S,target:p,selection:l.output(this.state.selection),mode:w,dispatch:h}),O)}},p.extent=function(x){return arguments.length?(o="function"==typeof x?x:$L(QL(x)),p):o},p.filter=function(x){return arguments.length?(a="function"==typeof x?x:$L(!!x),p):a},p.touchable=function(x){return arguments.length?(c="function"==typeof x?x:$L(!!x),p):c},p.handleSize=function(x){return arguments.length?(d=+x,p):d},p.keyModifiers=function(x){return arguments.length?(u=!!x,p):u},p.on=function(){var x=h.on.apply(h,arguments);return x===h?p:x},p}var bne=Math.abs,Zy=Math.cos,Xy=Math.sin,xne=Math.PI,AD=xne/2,Cne=2*xne,Sne=Math.max,ZL=1e-12;function XL(l,o){return Array.from({length:o-l},(a,c)=>l+c)}function Tze(l){return function(o,a){return l(o.source.value+o.target.value,a.source.value+a.target.value)}}function Oze(){return YL(!1,!1)}function Dze(){return YL(!1,!0)}function kze(){return YL(!0,!1)}function YL(l,o){var a=0,c=null,u=null,h=null;function d(f){var b,p=f.length,g=new Array(p),m=XL(0,p),v=new Array(p*p),y=new Array(p),_=0;f=Float64Array.from({length:p*p},o?(C,x)=>f[x%p][x/p|0]:(C,x)=>f[x/p|0][x%p]);for(let C=0;C<p;++C){let x=0;for(let S=0;S<p;++S)x+=f[C*p+S]+l*f[S*p+C];_+=g[C]=x}b=(_=Sne(0,Cne-a*p)/_)?a:Cne/p;{let C=0;c&&m.sort((x,S)=>c(g[x],g[S]));for(const x of m){const S=C;if(l){const w=XL(1+~p,p).filter(O=>O<0?f[~O*p+x]:f[x*p+O]);u&&w.sort((O,T)=>u(O<0?-f[~O*p+x]:f[x*p+O],T<0?-f[~T*p+x]:f[x*p+T]));for(const O of w)O<0?(v[~O*p+x]||(v[~O*p+x]={source:null,target:null})).target={index:x,startAngle:C,endAngle:C+=f[~O*p+x]*_,value:f[~O*p+x]}:(v[x*p+O]||(v[x*p+O]={source:null,target:null})).source={index:x,startAngle:C,endAngle:C+=f[x*p+O]*_,value:f[x*p+O]};y[x]={index:x,startAngle:S,endAngle:C,value:g[x]}}else{const w=XL(0,p).filter(O=>f[x*p+O]||f[O*p+x]);u&&w.sort((O,T)=>u(f[x*p+O],f[x*p+T]));for(const O of w){let T;if(x<O?(T=v[x*p+O]||(v[x*p+O]={source:null,target:null}),T.source={index:x,startAngle:C,endAngle:C+=f[x*p+O]*_,value:f[x*p+O]}):(T=v[O*p+x]||(v[O*p+x]={source:null,target:null}),T.target={index:x,startAngle:C,endAngle:C+=f[x*p+O]*_,value:f[x*p+O]},x===O&&(T.source=T.target)),T.source&&T.target&&T.source.value<T.target.value){const M=T.source;T.source=T.target,T.target=M}}y[x]={index:x,startAngle:S,endAngle:C,value:g[x]}}C+=b}}return(v=Object.values(v)).groups=y,h?v.sort(h):v}return d.padAngle=function(f){return arguments.length?(a=Sne(0,f),d):a},d.sortGroups=function(f){return arguments.length?(c=f,d):c},d.sortSubgroups=function(f){return arguments.length?(u=f,d):u},d.sortChords=function(f){return arguments.length?(null==f?h=null:(h=Tze(f))._=f,d):h&&h._},d}const KL=Math.PI,JL=2*KL,Em=1e-6,Mze=JL-Em;function e5(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function wne(){return new e5}e5.prototype=wne.prototype={constructor:e5,moveTo:function(l,o){this._+="M"+(this._x0=this._x1=+l)+","+(this._y0=this._y1=+o)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(l,o){this._+="L"+(this._x1=+l)+","+(this._y1=+o)},quadraticCurveTo:function(l,o,a,c){this._+="Q"+ +l+","+ +o+","+(this._x1=+a)+","+(this._y1=+c)},bezierCurveTo:function(l,o,a,c,u,h){this._+="C"+ +l+","+ +o+","+ +a+","+ +c+","+(this._x1=+u)+","+(this._y1=+h)},arcTo:function(l,o,a,c,u){var h=this._x1,d=this._y1,f=(a=+a)-(l=+l),p=(c=+c)-(o=+o),g=h-l,m=d-o,v=g*g+m*m;if((u=+u)<0)throw new Error("negative radius: "+u);if(null===this._x1)this._+="M"+(this._x1=l)+","+(this._y1=o);else if(v>Em)if(Math.abs(m*f-p*g)>Em&&u){var y=a-h,_=c-d,b=f*f+p*p,C=y*y+_*_,x=Math.sqrt(b),S=Math.sqrt(v),w=u*Math.tan((KL-Math.acos((b+v-C)/(2*x*S)))/2),O=w/S,T=w/x;Math.abs(O-1)>Em&&(this._+="L"+(l+O*g)+","+(o+O*m)),this._+="A"+u+","+u+",0,0,"+ +(m*y>g*_)+","+(this._x1=l+T*f)+","+(this._y1=o+T*p)}else this._+="L"+(this._x1=l)+","+(this._y1=o)},arc:function(l,o,a,c,u,h){l=+l,o=+o,h=!!h;var d=(a=+a)*Math.cos(c),f=a*Math.sin(c),p=l+d,g=o+f,m=1^h,v=h?c-u:u-c;if(a<0)throw new Error("negative radius: "+a);null===this._x1?this._+="M"+p+","+g:(Math.abs(this._x1-p)>Em||Math.abs(this._y1-g)>Em)&&(this._+="L"+p+","+g),a&&(v<0&&(v=v%JL+JL),v>Mze?this._+="A"+a+","+a+",0,1,"+m+","+(l-d)+","+(o-f)+"A"+a+","+a+",0,1,"+m+","+(this._x1=p)+","+(this._y1=g):v>Em&&(this._+="A"+a+","+a+",0,"+ +(v>=KL)+","+m+","+(this._x1=l+a*Math.cos(u))+","+(this._y1=o+a*Math.sin(u))))},rect:function(l,o,a,c){this._+="M"+(this._x0=this._x1=+l)+","+(this._y0=this._y1=+o)+"h"+ +a+"v"+ +c+"h"+-a+"Z"},toString:function(){return this._}};const mf=wne;var Eze=Array.prototype.slice;function Am(l){return function(){return l}}function Aze(l){return l.source}function Ize(l){return l.target}function Tne(l){return l.radius}function Pze(l){return l.startAngle}function Rze(l){return l.endAngle}function Fze(){return 0}function Nze(){return 10}function One(l){var o=Aze,a=Ize,c=Tne,u=Tne,h=Pze,d=Rze,f=Fze,p=null;function g(){var m,v=o.apply(this,arguments),y=a.apply(this,arguments),_=f.apply(this,arguments)/2,b=Eze.call(arguments),C=+c.apply(this,(b[0]=v,b)),x=h.apply(this,b)-AD,S=d.apply(this,b)-AD,w=+u.apply(this,(b[0]=y,b)),O=h.apply(this,b)-AD,T=d.apply(this,b)-AD;if(p||(p=m=mf()),_>ZL&&(bne(S-x)>2*_+ZL?S>x?(x+=_,S-=_):(x-=_,S+=_):x=S=(x+S)/2,bne(T-O)>2*_+ZL?T>O?(O+=_,T-=_):(O-=_,T+=_):O=T=(O+T)/2),p.moveTo(C*Zy(x),C*Xy(x)),p.arc(0,0,C,x,S),x!==O||S!==T)if(l){var M=+l.apply(this,arguments),A=w-M,I=(O+T)/2;p.quadraticCurveTo(0,0,A*Zy(O),A*Xy(O)),p.lineTo(w*Zy(I),w*Xy(I)),p.lineTo(A*Zy(T),A*Xy(T))}else p.quadraticCurveTo(0,0,w*Zy(O),w*Xy(O)),p.arc(0,0,w,O,T);if(p.quadraticCurveTo(0,0,C*Zy(x),C*Xy(x)),p.closePath(),m)return p=null,m+""||null}return l&&(g.headRadius=function(m){return arguments.length?(l="function"==typeof m?m:Am(+m),g):l}),g.radius=function(m){return arguments.length?(c=u="function"==typeof m?m:Am(+m),g):c},g.sourceRadius=function(m){return arguments.length?(c="function"==typeof m?m:Am(+m),g):c},g.targetRadius=function(m){return arguments.length?(u="function"==typeof m?m:Am(+m),g):u},g.startAngle=function(m){return arguments.length?(h="function"==typeof m?m:Am(+m),g):h},g.endAngle=function(m){return arguments.length?(d="function"==typeof m?m:Am(+m),g):d},g.padAngle=function(m){return arguments.length?(f="function"==typeof m?m:Am(+m),g):f},g.source=function(m){return arguments.length?(o=m,g):o},g.target=function(m){return arguments.length?(a=m,g):a},g.context=function(m){return arguments.length?(p=null==m?null:m,g):p},g}function t5(){return One()}function Lze(){return One(Nze)}const Dne=Math.PI/180,kne=180/Math.PI,Ine=4/29,Yy=6/29,Pne=3*Yy*Yy;function Rne(l){if(l instanceof Qu)return new Qu(l.l,l.a,l.b,l.opacity);if(l instanceof Zh)return Nne(l);l instanceof Xo||(l=DL(l));var h,d,o=s5(l.r),a=s5(l.g),c=s5(l.b),u=n5((.2225045*o+.7168786*a+.0606169*c)/1);return o===a&&a===c?h=d=u:(h=n5((.4360747*o+.3850649*a+.1430804*c)/.96422),d=n5((.0139322*o+.0971045*a+.7141733*c)/.82521)),new Qu(116*u-16,500*(h-u),200*(u-d),l.opacity)}function Vze(l,o){return new Qu(l,0,0,null==o?1:o)}function PD(l,o,a,c){return 1===arguments.length?Rne(l):new Qu(l,o,a,null==c?1:c)}function Qu(l,o,a,c){this.l=+l,this.a=+o,this.b=+a,this.opacity=+c}function n5(l){return l>.008856451679035631?Math.pow(l,1/3):l/Pne+Ine}function i5(l){return l>Yy?l*l*l:Pne*(l-Ine)}function r5(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function s5(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Fne(l){if(l instanceof Zh)return new Zh(l.h,l.c,l.l,l.opacity);if(l instanceof Qu||(l=Rne(l)),0===l.a&&0===l.b)return new Zh(NaN,0<l.l&&l.l<100?0:NaN,l.l,l.opacity);var o=Math.atan2(l.b,l.a)*kne;return new Zh(o<0?o+360:o,Math.sqrt(l.a*l.a+l.b*l.b),l.l,l.opacity)}function zze(l,o,a,c){return 1===arguments.length?Fne(l):new Zh(a,o,l,null==c?1:c)}function RD(l,o,a,c){return 1===arguments.length?Fne(l):new Zh(l,o,a,null==c?1:c)}function Zh(l,o,a,c){this.h=+l,this.c=+o,this.l=+a,this.opacity=+c}function Nne(l){if(isNaN(l.h))return new Qu(l.l,0,0,l.opacity);var o=l.h*Dne;return new Qu(l.l,Math.cos(o)*l.c,Math.sin(o)*l.c,l.opacity)}$y(Qu,PD,OC(Cp,{brighter:function(l){return new Qu(this.l+18*(null==l?1:l),this.a,this.b,this.opacity)},darker:function(l){return new Qu(this.l-18*(null==l?1:l),this.a,this.b,this.opacity)},rgb:function(){var l=(this.l+16)/116,o=isNaN(this.a)?l:l+this.a/500,a=isNaN(this.b)?l:l-this.b/200;return new Xo(r5(3.1338561*(o=.96422*i5(o))-1.6168667*(l=1*i5(l))-.4906146*(a=.82521*i5(a))),r5(-.9787684*o+1.9161415*l+.033454*a),r5(.0719453*o-.2289914*l+1.4052427*a),this.opacity)}})),$y(Zh,RD,OC(Cp,{brighter:function(l){return new Zh(this.h,this.c,this.l+18*(null==l?1:l),this.opacity)},darker:function(l){return new Zh(this.h,this.c,this.l-18*(null==l?1:l),this.opacity)},rgb:function(){return Nne(this).rgb()}}));var o5=1.78277,a5=-.29227,FD=-.90649,NC=1.97294,Bne=NC*FD,Vne=NC*o5,zne=o5*a5- -.14861*FD;function Uze(l){if(l instanceof Im)return new Im(l.h,l.s,l.l,l.opacity);l instanceof Xo||(l=DL(l));var a=l.g/255,c=l.b/255,u=(zne*c+Bne*(l.r/255)-Vne*a)/(zne+Bne-Vne),h=c-u,d=(NC*(a-u)-a5*h)/FD,f=Math.sqrt(d*d+h*h)/(NC*u*(1-u)),p=f?Math.atan2(d,h)*kne-120:NaN;return new Im(p<0?p+360:p,f,u,l.opacity)}function ju(l,o,a,c){return 1===arguments.length?Uze(l):new Im(l,o,a,null==c?1:c)}function Im(l,o,a,c){this.h=+l,this.s=+o,this.l=+a,this.opacity=+c}$y(Im,ju,OC(Cp,{brighter:function(l){return l=null==l?Wy:Math.pow(Wy,l),new Im(this.h,this.s,this.l*l,this.opacity)},darker:function(l){return l=null==l?.7:Math.pow(.7,l),new Im(this.h,this.s,this.l*l,this.opacity)},rgb:function(){var l=isNaN(this.h)?0:(this.h+120)*Dne,o=+this.l,a=isNaN(this.s)?0:this.s*o*(1-o),c=Math.cos(l),u=Math.sin(l);return new Xo(255*(o+a*(-.14861*c+o5*u)),255*(o+a*(a5*c+FD*u)),255*(o+a*(NC*c)),this.opacity)}}));var Une=Array.prototype.slice;function $ze(l,o){return l-o}const wp=l=>()=>l;function Gze(l,o){for(var u,a=-1,c=o.length;++a<c;)if(u=Qze(l,o[a]))return u;return 0}function Qze(l,o){for(var a=o[0],c=o[1],u=-1,h=0,d=l.length,f=d-1;h<d;f=h++){var p=l[h],g=p[0],m=p[1],v=l[f],y=v[0],_=v[1];if(jze(p,v,o))return 0;m>c!=_>c&&a<(y-g)*(c-m)/(_-m)+g&&(u=-u)}return u}function jze(l,o,a){var c;return function qze(l,o,a){return(o[0]-l[0])*(a[1]-l[1])==(a[0]-l[0])*(o[1]-l[1])}(l,o,a)&&function Zze(l,o,a){return l<=o&&o<=a||a<=o&&o<=l}(l[c=+(l[0]===o[0])],a[c],o[c])}function Xze(){}var vf=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Hne(){var l=1,o=1,a=gL,c=p;function u(g){var m=a(g);if(Array.isArray(m))m=m.slice().sort($ze);else{const v=wm(g),y=Vy(v[0],v[1],m);m=By(Math.floor(v[0]/y)*y,Math.floor(v[1]/y-1)*y,m)}return m.map(v=>h(g,v))}function h(g,m){var v=[],y=[];return function d(g,m,v){var b,C,S,w,O,y=new Array,_=new Array;for(b=C=-1,vf[(S=g[0]>=m)<<1].forEach(T);++b<l-1;)vf[S|(S=g[b+1]>=m)<<1].forEach(T);for(vf[S<<0].forEach(T);++C<o-1;){for(b=-1,vf[(S=g[C*l+l]>=m)<<1|(w=g[C*l]>=m)<<2].forEach(T);++b<l-1;)O=w,vf[S|(S=g[C*l+l+b+1]>=m)<<1|(w=g[C*l+b+1]>=m)<<2|O<<3].forEach(T);vf[S|w<<3].forEach(T)}for(b=-1,vf[(w=g[C*l]>=m)<<2].forEach(T);++b<l-1;)O=w,vf[(w=g[C*l+b+1]>=m)<<2|O<<3].forEach(T);function T(M){var B,V,A=[M[0][0]+b,M[0][1]+C],I=[M[1][0]+b,M[1][1]+C],E=f(A),P=f(I);(B=_[E])?(V=y[P])?(delete _[B.end],delete y[V.start],B===V?(B.ring.push(I),v(B.ring)):y[B.start]=_[V.end]={start:B.start,end:V.end,ring:B.ring.concat(V.ring)}):(delete _[B.end],B.ring.push(I),_[B.end=P]=B):(B=y[P])?(V=_[E])?(delete y[B.start],delete _[V.end],B===V?(B.ring.push(I),v(B.ring)):y[V.start]=_[B.end]={start:V.start,end:B.end,ring:V.ring.concat(B.ring)}):(delete y[B.start],B.ring.unshift(A),y[B.start=E]=B):y[E]=_[P]={start:E,end:P,ring:[A,I]}}vf[w<<3].forEach(T)}(g,m,function(_){c(_,g,m),function Wze(l){for(var o=0,a=l.length,c=l[a-1][1]*l[0][0]-l[a-1][0]*l[0][1];++o<a;)c+=l[o-1][1]*l[o][0]-l[o-1][0]*l[o][1];return c}(_)>0?v.push([_]):y.push(_)}),y.forEach(function(_){for(var x,b=0,C=v.length;b<C;++b)if(-1!==Gze((x=v[b])[0],_))return void x.push(_)}),{type:"MultiPolygon",value:m,coordinates:v}}function f(g){return 2*g[0]+g[1]*(l+1)*4}function p(g,m,v){g.forEach(function(y){var S,_=y[0],b=y[1],C=0|_,x=0|b,w=m[x*l+C];_>0&&_<l&&C===_&&(y[0]=_+(v-(S=m[x*l+C-1]))/(w-S)-.5),b>0&&b<o&&x===b&&(y[1]=b+(v-(S=m[(x-1)*l+C]))/(w-S)-.5)})}return u.contour=h,u.size=function(g){if(!arguments.length)return[l,o];var m=Math.floor(g[0]),v=Math.floor(g[1]);if(!(m>=0&&v>=0))throw new Error("invalid size");return l=m,o=v,u},u.thresholds=function(g){return arguments.length?(a="function"==typeof g?g:Array.isArray(g)?wp(Une.call(g)):wp(g),u):a},u.smooth=function(g){return arguments.length?(c=g?p:Xze,u):c===p},u}function l5(l,o,a){for(var c=l.width,u=l.height,h=1+(a<<1),d=0;d<u;++d)for(var f=0,p=0;f<c+a;++f)f<c&&(p+=l.data[f+d*c]),f>=a&&(f>=h&&(p-=l.data[f-h+d*c]),o.data[f-a+d*c]=p/Math.min(f+1,c-1+h-f,h))}function c5(l,o,a){for(var c=l.width,u=l.height,h=1+(a<<1),d=0;d<c;++d)for(var f=0,p=0;f<u+a;++f)f<u&&(p+=l.data[d+f*c]),f>=a&&(f>=h&&(p-=l.data[d+(f-h)*c]),o.data[d+(f-a)*c]=p/Math.min(f+1,u-1+h-f,h))}function Yze(l){return l[0]}function Kze(l){return l[1]}function Jze(){return 1}function eUe(){var l=Yze,o=Kze,a=Jze,c=960,u=500,h=20,d=2,f=3*h,p=c+2*f>>d,g=u+2*f>>d,m=wp(20);function v(S){var w=new Float32Array(p*g),O=new Float32Array(p*g),T=Math.pow(2,-d);S.forEach(function(I,E,P){var B=(l(I,E,P)+f)*T,V=(o(I,E,P)+f)*T,Q=+a(I,E,P);if(B>=0&&B<p&&V>=0&&V<g){var j=Math.floor(B),N=Math.floor(V),U=B-j-.5,z=V-N-.5;w[j+N*p]+=(1-U)*(1-z)*Q,w[j+1+N*p]+=U*(1-z)*Q,w[j+1+(N+1)*p]+=U*z*Q,w[j+(N+1)*p]+=(1-U)*z*Q}}),l5({width:p,height:g,data:w},{width:p,height:g,data:O},h>>d),c5({width:p,height:g,data:O},{width:p,height:g,data:w},h>>d),l5({width:p,height:g,data:w},{width:p,height:g,data:O},h>>d),c5({width:p,height:g,data:O},{width:p,height:g,data:w},h>>d),l5({width:p,height:g,data:w},{width:p,height:g,data:O},h>>d),c5({width:p,height:g,data:O},{width:p,height:g,data:w},h>>d);var M=m(w);if(!Array.isArray(M)){var A=oD(w);M=Vy(0,A,M),(M=rc(0,Math.floor(A/M)*M,M)).shift()}return Hne().thresholds(M).size([p,g])(w).map(y)}function y(S){return S.value*=Math.pow(2,-2*d),S.coordinates.forEach(_),S}function _(S){S.forEach(b)}function b(S){S.forEach(C)}function C(S){S[0]=S[0]*Math.pow(2,d)-f,S[1]=S[1]*Math.pow(2,d)-f}function x(){return p=c+2*(f=3*h)>>d,g=u+2*f>>d,v}return v.x=function(S){return arguments.length?(l="function"==typeof S?S:wp(+S),v):l},v.y=function(S){return arguments.length?(o="function"==typeof S?S:wp(+S),v):o},v.weight=function(S){return arguments.length?(a="function"==typeof S?S:wp(+S),v):a},v.size=function(S){if(!arguments.length)return[c,u];var w=+S[0],O=+S[1];if(!(w>=0&&O>=0))throw new Error("invalid size");return c=w,u=O,x()},v.cellSize=function(S){if(!arguments.length)return 1<<d;if(!((S=+S)>=1))throw new Error("invalid cell size");return d=Math.floor(Math.log(S)/Math.LN2),x()},v.thresholds=function(S){return arguments.length?(m="function"==typeof S?S:Array.isArray(S)?wp(Une.call(S)):wp(S),v):m},v.bandwidth=function(S){if(!arguments.length)return Math.sqrt(h*(h+1));if(!((S=+S)>=0))throw new Error("invalid bandwidth");return h=Math.round((Math.sqrt(4*S*S+1)-1)/2),x()},v}const To=134217729;function LC(l,o,a,c,u){let h,d,f,p,g=o[0],m=c[0],v=0,y=0;m>g==m>-g?(h=g,g=o[++v]):(h=m,m=c[++y]);let _=0;if(v<l&&y<a)for(m>g==m>-g?(d=g+h,f=h-(d-g),g=o[++v]):(d=m+h,f=h-(d-m),m=c[++y]),h=d,0!==f&&(u[_++]=f);v<l&&y<a;)m>g==m>-g?(d=h+g,p=d-h,f=h-(d-p)+(g-p),g=o[++v]):(d=h+m,p=d-h,f=h-(d-p)+(m-p),m=c[++y]),h=d,0!==f&&(u[_++]=f);for(;v<l;)d=h+g,p=d-h,f=h-(d-p)+(g-p),g=o[++v],h=d,0!==f&&(u[_++]=f);for(;y<a;)d=h+m,p=d-h,f=h-(d-p)+(m-p),m=c[++y],h=d,0!==f&&(u[_++]=f);return(0!==h||0===_)&&(u[_++]=h),_}function Nt(l){return new Float64Array(l)}const Ky=Nt(4),$ne=Nt(8),Wne=Nt(12),Gne=Nt(16),ja=Nt(4);function ND(l,o,a,c,u,h){const d=(o-h)*(a-u),f=(l-u)*(c-h),p=d-f;if(0===d||0===f||d>0!=f>0)return p;const g=Math.abs(d+f);return Math.abs(p)>=33306690738754716e-32*g?p:-function oUe(l,o,a,c,u,h,d){let f,p,g,m,v,y,_,b,C,x,S,w,O,T,M,A,I,E;const P=l-u,B=a-u,V=o-h,Q=c-h;T=P*Q,y=To*P,_=y-(y-P),b=P-_,y=To*Q,C=y-(y-Q),x=Q-C,M=b*x-(T-_*C-b*C-_*x),A=V*B,y=To*V,_=y-(y-V),b=V-_,y=To*B,C=y-(y-B),x=B-C,I=b*x-(A-_*C-b*C-_*x),S=M-I,v=M-S,Ky[0]=M-(S+v)+(v-I),w=T+S,v=w-T,O=T-(w-v)+(S-v),S=O-A,v=O-S,Ky[1]=O-(S+v)+(v-A),E=w+S,v=E-w,Ky[2]=w-(E-v)+(S-v),Ky[3]=E;let j=function nUe(l,o){let a=o[0];for(let c=1;c<l;c++)a+=o[c];return a}(4,Ky),N=22204460492503146e-32*d;if(j>=N||-j>=N||(v=l-P,f=l-(P+v)+(v-u),v=a-B,g=a-(B+v)+(v-u),v=o-V,p=o-(V+v)+(v-h),v=c-Q,m=c-(Q+v)+(v-h),0===f&&0===p&&0===g&&0===m)||(N=11093356479670487e-47*d+33306690738754706e-32*Math.abs(j),j+=P*m+Q*f-(V*g+B*p),j>=N||-j>=N))return j;T=f*Q,y=To*f,_=y-(y-f),b=f-_,y=To*Q,C=y-(y-Q),x=Q-C,M=b*x-(T-_*C-b*C-_*x),A=p*B,y=To*p,_=y-(y-p),b=p-_,y=To*B,C=y-(y-B),x=B-C,I=b*x-(A-_*C-b*C-_*x),S=M-I,v=M-S,ja[0]=M-(S+v)+(v-I),w=T+S,v=w-T,O=T-(w-v)+(S-v),S=O-A,v=O-S,ja[1]=O-(S+v)+(v-A),E=w+S,v=E-w,ja[2]=w-(E-v)+(S-v),ja[3]=E;const U=LC(4,Ky,4,ja,$ne);T=P*m,y=To*P,_=y-(y-P),b=P-_,y=To*m,C=y-(y-m),x=m-C,M=b*x-(T-_*C-b*C-_*x),A=V*g,y=To*V,_=y-(y-V),b=V-_,y=To*g,C=y-(y-g),x=g-C,I=b*x-(A-_*C-b*C-_*x),S=M-I,v=M-S,ja[0]=M-(S+v)+(v-I),w=T+S,v=w-T,O=T-(w-v)+(S-v),S=O-A,v=O-S,ja[1]=O-(S+v)+(v-A),E=w+S,v=E-w,ja[2]=w-(E-v)+(S-v),ja[3]=E;const z=LC(U,$ne,4,ja,Wne);T=f*m,y=To*f,_=y-(y-f),b=f-_,y=To*m,C=y-(y-m),x=m-C,M=b*x-(T-_*C-b*C-_*x),A=p*g,y=To*p,_=y-(y-p),b=p-_,y=To*g,C=y-(y-g),x=g-C,I=b*x-(A-_*C-b*C-_*x),S=M-I,v=M-S,ja[0]=M-(S+v)+(v-I),w=T+S,v=w-T,O=T-(w-v)+(S-v),S=O-A,v=O-S,ja[1]=O-(S+v)+(v-A),E=w+S,v=E-w,ja[2]=w-(E-v)+(S-v),ja[3]=E;const $=LC(z,Wne,4,ja,Gne);return Gne[$-1]}(l,o,a,c,u,h,g)}Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(8),Nt(8),Nt(8),Nt(4),Nt(8),Nt(8),Nt(8),Nt(12),Nt(192),Nt(192),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(8),Nt(8),Nt(8),Nt(8),Nt(8),Nt(8),Nt(8),Nt(8),Nt(8),Nt(4),Nt(4),Nt(4),Nt(8),Nt(16),Nt(16),Nt(16),Nt(32),Nt(32),Nt(48),Nt(64),Nt(1152),Nt(1152),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(24),Nt(24),Nt(24),Nt(24),Nt(24),Nt(24),Nt(24),Nt(24),Nt(24),Nt(24),Nt(1152),Nt(1152),Nt(1152),Nt(1152),Nt(1152),Nt(2304),Nt(2304),Nt(3456),Nt(5760),Nt(8),Nt(8),Nt(8),Nt(16),Nt(24),Nt(48),Nt(48),Nt(96),Nt(192),Nt(384),Nt(384),Nt(384),Nt(768),Nt(96),Nt(96),Nt(96),Nt(1152);const die=Math.pow(2,-52),QD=new Uint32Array(512);class jD{static from(o,a=OUe,c=DUe){const u=o.length,h=new Float64Array(2*u);for(let d=0;d<u;d++){const f=o[d];h[2*d]=a(f),h[2*d+1]=c(f)}return new jD(h)}constructor(o){const a=o.length>>1;if(a>0&&"number"!=typeof o[0])throw new Error("Expected coords to contain numbers.");this.coords=o;const c=Math.max(2*a-5,0);this._triangles=new Uint32Array(3*c),this._halfedges=new Int32Array(3*c),this._hashSize=Math.ceil(Math.sqrt(a)),this._hullPrev=new Uint32Array(a),this._hullNext=new Uint32Array(a),this._hullTri=new Uint32Array(a),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(a),this._dists=new Float64Array(a),this.update()}update(){const{coords:o,_hullPrev:a,_hullNext:c,_hullTri:u,_hullHash:h}=this,d=o.length>>1;let f=1/0,p=1/0,g=-1/0,m=-1/0;for(let B=0;B<d;B++){const V=o[2*B],Q=o[2*B+1];V<f&&(f=V),Q<p&&(p=Q),V>g&&(g=V),Q>m&&(m=Q),this._ids[B]=B}const v=(f+g)/2,y=(p+m)/2;let b,C,x,_=1/0;for(let B=0;B<d;B++){const V=F5(v,y,o[2*B],o[2*B+1]);V<_&&(b=B,_=V)}const S=o[2*b],w=o[2*b+1];_=1/0;for(let B=0;B<d;B++){if(B===b)continue;const V=F5(S,w,o[2*B],o[2*B+1]);V<_&&V>0&&(C=B,_=V)}let O=o[2*C],T=o[2*C+1],M=1/0;for(let B=0;B<d;B++){if(B===b||B===C)continue;const V=wUe(S,w,O,T,o[2*B],o[2*B+1]);V<M&&(x=B,M=V)}let A=o[2*x],I=o[2*x+1];if(M===1/0){for(let Q=0;Q<d;Q++)this._dists[Q]=o[2*Q]-o[0]||o[2*Q+1]-o[1];o_(this._ids,this._dists,0,d-1);const B=new Uint32Array(d);let V=0;for(let Q=0,j=-1/0;Q<d;Q++){const N=this._ids[Q];this._dists[N]>j&&(B[V++]=N,j=this._dists[N])}return this.hull=B.subarray(0,V),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(ND(S,w,O,T,A,I)<0){const B=C,V=O,Q=T;C=x,O=A,T=I,x=B,A=V,I=Q}const E=function TUe(l,o,a,c,u,h){const d=a-l,f=c-o,p=u-l,g=h-o,m=d*d+f*f,v=p*p+g*g,y=.5/(d*g-f*p);return{x:l+(g*m-f*v)*y,y:o+(d*v-p*m)*y}}(S,w,O,T,A,I);this._cx=E.x,this._cy=E.y;for(let B=0;B<d;B++)this._dists[B]=F5(o[2*B],o[2*B+1],E.x,E.y);o_(this._ids,this._dists,0,d-1),this._hullStart=b;let P=3;c[b]=a[x]=C,c[C]=a[b]=x,c[x]=a[C]=b,u[b]=0,u[C]=1,u[x]=2,h.fill(-1),h[this._hashKey(S,w)]=b,h[this._hashKey(O,T)]=C,h[this._hashKey(A,I)]=x,this.trianglesLen=0,this._addTriangle(b,C,x,-1,-1,-1);for(let V,Q,B=0;B<this._ids.length;B++){const j=this._ids[B],N=o[2*j],U=o[2*j+1];if(B>0&&Math.abs(N-V)<=die&&Math.abs(U-Q)<=die||(V=N,Q=U,j===b||j===C||j===x))continue;let z=0;for(let X=0,K=this._hashKey(N,U);X<this._hashSize&&(z=h[(K+X)%this._hashSize],-1===z||z===c[z]);X++);z=a[z];let H,$=z;for(;H=c[$],ND(N,U,o[2*$],o[2*$+1],o[2*H],o[2*H+1])>=0;)if($=H,$===z){$=-1;break}if(-1===$)continue;let G=this._addTriangle($,j,c[$],-1,-1,u[$]);u[j]=this._legalize(G+2),u[$]=G,P++;let W=c[$];for(;H=c[W],ND(N,U,o[2*W],o[2*W+1],o[2*H],o[2*H+1])<0;)G=this._addTriangle(W,j,H,u[j],-1,u[W]),u[j]=this._legalize(G+2),c[W]=W,P--,W=H;if($===z)for(;H=a[$],ND(N,U,o[2*H],o[2*H+1],o[2*$],o[2*$+1])<0;)G=this._addTriangle(H,j,$,-1,u[$],u[H]),this._legalize(G+2),u[H]=G,c[$]=$,P--,$=H;this._hullStart=a[j]=$,c[$]=a[W]=j,c[j]=W,h[this._hashKey(N,U)]=j,h[this._hashKey(o[2*$],o[2*$+1])]=$}this.hull=new Uint32Array(P);for(let B=0,V=this._hullStart;B<P;B++)this.hull[B]=V,V=c[V];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(o,a){return Math.floor(function CUe(l,o){const a=l/(Math.abs(l)+Math.abs(o));return(o>0?3-a:1+a)/4}(o-this._cx,a-this._cy)*this._hashSize)%this._hashSize}_legalize(o){const{_triangles:a,_halfedges:c,coords:u}=this;let h=0,d=0;for(;;){const f=c[o],p=o-o%3;if(d=p+(o+2)%3,-1===f){if(0===h)break;o=QD[--h];continue}const g=f-f%3,v=g+(f+2)%3,y=a[d],_=a[o],b=a[p+(o+1)%3],C=a[v];if(SUe(u[2*y],u[2*y+1],u[2*_],u[2*_+1],u[2*b],u[2*b+1],u[2*C],u[2*C+1])){a[o]=C,a[f]=y;const S=c[v];if(-1===S){let O=this._hullStart;do{if(this._hullTri[O]===v){this._hullTri[O]=o;break}O=this._hullPrev[O]}while(O!==this._hullStart)}this._link(o,S),this._link(f,c[d]),this._link(d,v);const w=g+(f+1)%3;h<QD.length&&(QD[h++]=w)}else{if(0===h)break;o=QD[--h]}}return d}_link(o,a){this._halfedges[o]=a,-1!==a&&(this._halfedges[a]=o)}_addTriangle(o,a,c,u,h,d){const f=this.trianglesLen;return this._triangles[f]=o,this._triangles[f+1]=a,this._triangles[f+2]=c,this._link(f,u),this._link(f+1,h),this._link(f+2,d),this.trianglesLen+=3,f}}function F5(l,o,a,c){const u=l-a,h=o-c;return u*u+h*h}function SUe(l,o,a,c,u,h,d,f){const p=l-d,g=o-f,m=a-d,v=c-f,y=u-d,_=h-f,C=m*m+v*v,x=y*y+_*_;return p*(v*x-C*_)-g*(m*x-C*y)+(p*p+g*g)*(m*_-v*y)<0}function wUe(l,o,a,c,u,h){const d=a-l,f=c-o,p=u-l,g=h-o,m=d*d+f*f,v=p*p+g*g,y=.5/(d*g-f*p),_=(g*m-f*v)*y,b=(d*v-p*m)*y;return _*_+b*b}function o_(l,o,a,c){if(c-a<=20)for(let u=a+1;u<=c;u++){const h=l[u],d=o[h];let f=u-1;for(;f>=a&&o[l[f]]>d;)l[f+1]=l[f--];l[f+1]=h}else{let h=a+1,d=c;UC(l,a+c>>1,h),o[l[a]]>o[l[c]]&&UC(l,a,c),o[l[h]]>o[l[c]]&&UC(l,h,c),o[l[a]]>o[l[h]]&&UC(l,a,h);const f=l[h],p=o[f];for(;;){do{h++}while(o[l[h]]<p);do{d--}while(o[l[d]]>p);if(d<h)break;UC(l,h,d)}l[a+1]=l[d],l[d]=f,c-h+1>=d-a?(o_(l,o,h,c),o_(l,o,a,d-1)):(o_(l,o,a,d-1),o_(l,o,h,c))}}function UC(l,o,a){const c=l[o];l[o]=l[a],l[a]=c}function OUe(l){return l[0]}function DUe(l){return l[1]}class Um{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(o,a){this._+=`M${this._x0=this._x1=+o},${this._y0=this._y1=+a}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(o,a){this._+=`L${this._x1=+o},${this._y1=+a}`}arc(o,a,c){const u=(o=+o)+(c=+c),h=a=+a;if(c<0)throw new Error("negative radius");null===this._x1?this._+=`M${u},${h}`:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+u+","+h),c&&(this._+=`A${c},${c},0,1,1,${o-c},${a}A${c},${c},0,1,1,${this._x1=u},${this._y1=h}`)}rect(o,a,c,u){this._+=`M${this._x0=this._x1=+o},${this._y0=this._y1=+a}h${+c}v${+u}h${-c}Z`}value(){return this._||null}}class N5{constructor(){this._=[]}moveTo(o,a){this._.push([o,a])}closePath(){this._.push(this._[0].slice())}lineTo(o,a){this._.push([o,a])}value(){return this._.length?this._:null}}class pie{constructor(o,[a,c,u,h]=[0,0,960,500]){if(!((u=+u)>=(a=+a)&&(h=+h)>=(c=+c)))throw new Error("invalid bounds");this.delaunay=o,this._circumcenters=new Float64Array(2*o.points.length),this.vectors=new Float64Array(2*o.points.length),this.xmax=u,this.xmin=a,this.ymax=h,this.ymin=c,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:o,hull:a,triangles:c},vectors:u}=this,h=this.circumcenters=this._circumcenters.subarray(0,c.length/3*2);for(let x,S,_=0,b=0,C=c.length;_<C;_+=3,b+=2){const w=2*c[_],O=2*c[_+1],T=2*c[_+2],M=o[w],A=o[w+1],P=o[T],B=o[T+1],V=o[O]-M,Q=o[O+1]-A,j=P-M,N=B-A,U=2*(V*N-Q*j);if(Math.abs(U)<1e-9){let z=1e9;const $=2*c[0];z*=Math.sign((o[$]-M)*N-(o[$+1]-A)*j),x=(M+P)/2-z*N,S=(A+B)/2+z*j}else{const z=1/U,$=V*V+Q*Q,H=j*j+N*N;x=M+(N*$-Q*H)*z,S=A+(V*H-j*$)*z}h[b]=x,h[b+1]=S}let f,g,v,d=a[a.length-1],p=4*d,m=o[2*d],y=o[2*d+1];u.fill(0);for(let _=0;_<a.length;++_)d=a[_],f=p,g=m,v=y,p=4*d,m=o[2*d],y=o[2*d+1],u[f+2]=u[p]=v-y,u[f+3]=u[p+1]=m-g}render(o){const a=null==o?o=new Um:void 0,{delaunay:{halfedges:c,inedges:u,hull:h},circumcenters:d,vectors:f}=this;if(h.length<=1)return null;for(let m=0,v=c.length;m<v;++m){const y=c[m];if(y<m)continue;const _=2*Math.floor(m/3),b=2*Math.floor(y/3);this._renderSegment(d[_],d[_+1],d[b],d[b+1],o)}let p,g=h[h.length-1];for(let m=0;m<h.length;++m){p=g,g=h[m];const v=2*Math.floor(u[g]/3),y=d[v],_=d[v+1],b=4*p,C=this._project(y,_,f[b+2],f[b+3]);C&&this._renderSegment(y,_,C[0],C[1],o)}return a&&a.value()}renderBounds(o){const a=null==o?o=new Um:void 0;return o.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),a&&a.value()}renderCell(o,a){const c=null==a?a=new Um:void 0,u=this._clip(o);if(null===u||!u.length)return;a.moveTo(u[0],u[1]);let h=u.length;for(;u[0]===u[h-2]&&u[1]===u[h-1]&&h>1;)h-=2;for(let d=2;d<h;d+=2)(u[d]!==u[d-2]||u[d+1]!==u[d-1])&&a.lineTo(u[d],u[d+1]);return a.closePath(),c&&c.value()}*cellPolygons(){const{delaunay:{points:o}}=this;for(let a=0,c=o.length/2;a<c;++a){const u=this.cellPolygon(a);u&&(u.index=a,yield u)}}cellPolygon(o){const a=new N5;return this.renderCell(o,a),a.value()}_renderSegment(o,a,c,u,h){let d;const f=this._regioncode(o,a),p=this._regioncode(c,u);0===f&&0===p?(h.moveTo(o,a),h.lineTo(c,u)):(d=this._clipSegment(o,a,c,u,f,p))&&(h.moveTo(d[0],d[1]),h.lineTo(d[2],d[3]))}contains(o,a,c){return(a=+a)==a&&(c=+c)==c&&this.delaunay._step(o,a,c)===o}*neighbors(o){const a=this._clip(o);if(a)for(const c of this.delaunay.neighbors(o)){const u=this._clip(c);if(u)e:for(let h=0,d=a.length;h<d;h+=2)for(let f=0,p=u.length;f<p;f+=2)if(a[h]==u[f]&&a[h+1]==u[f+1]&&a[(h+2)%d]==u[(f+p-2)%p]&&a[(h+3)%d]==u[(f+p-1)%p]){yield c;break e}}}_cell(o){const{circumcenters:a,delaunay:{inedges:c,halfedges:u,triangles:h}}=this,d=c[o];if(-1===d)return null;const f=[];let p=d;do{const g=Math.floor(p/3);if(f.push(a[2*g],a[2*g+1]),p=p%3==2?p-2:p+1,h[p]!==o)break;p=u[p]}while(p!==d&&-1!==p);return f}_clip(o){if(0===o&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const a=this._cell(o);if(null===a)return null;const{vectors:c}=this,u=4*o;return c[u]||c[u+1]?this._clipInfinite(o,a,c[u],c[u+1],c[u+2],c[u+3]):this._clipFinite(o,a)}_clipFinite(o,a){const c=a.length;let h,d,g,v,u=null,f=a[c-2],p=a[c-1],m=this._regioncode(f,p),y=0;for(let _=0;_<c;_+=2)if(h=f,d=p,f=a[_],p=a[_+1],g=m,m=this._regioncode(f,p),0===g&&0===m)v=y,y=0,u?u.push(f,p):u=[f,p];else{let b,C,x,S,w;if(0===g){if(null===(b=this._clipSegment(h,d,f,p,g,m)))continue;[C,x,S,w]=b}else{if(null===(b=this._clipSegment(f,p,h,d,m,g)))continue;[S,w,C,x]=b,v=y,y=this._edgecode(C,x),v&&y&&this._edge(o,v,y,u,u.length),u?u.push(C,x):u=[C,x]}v=y,y=this._edgecode(S,w),v&&y&&this._edge(o,v,y,u,u.length),u?u.push(S,w):u=[S,w]}if(u)v=y,y=this._edgecode(u[0],u[1]),v&&y&&this._edge(o,v,y,u,u.length);else if(this.contains(o,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(o,a,c,u,h,d){for(;;){if(0===h&&0===d)return[o,a,c,u];if(h&d)return null;let f,p,g=h||d;8&g?(f=o+(c-o)*(this.ymax-a)/(u-a),p=this.ymax):4&g?(f=o+(c-o)*(this.ymin-a)/(u-a),p=this.ymin):2&g?(p=a+(u-a)*(this.xmax-o)/(c-o),f=this.xmax):(p=a+(u-a)*(this.xmin-o)/(c-o),f=this.xmin),h?h=this._regioncode(o=f,a=p):d=this._regioncode(c=f,u=p)}}_clipInfinite(o,a,c,u,h,d){let p,f=Array.from(a);if((p=this._project(f[0],f[1],c,u))&&f.unshift(p[0],p[1]),(p=this._project(f[f.length-2],f[f.length-1],h,d))&&f.push(p[0],p[1]),f=this._clipFinite(o,f))for(let v,g=0,m=f.length,y=this._edgecode(f[m-2],f[m-1]);g<m;g+=2)v=y,y=this._edgecode(f[g],f[g+1]),v&&y&&(g=this._edge(o,v,y,f,g),m=f.length);else this.contains(o,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(f=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return f}_edge(o,a,c,u,h){for(;a!==c;){let d,f;switch(a){case 5:a=4;continue;case 4:a=6,d=this.xmax,f=this.ymin;break;case 6:a=2;continue;case 2:a=10,d=this.xmax,f=this.ymax;break;case 10:a=8;continue;case 8:a=9,d=this.xmin,f=this.ymax;break;case 9:a=1;continue;case 1:a=5,d=this.xmin,f=this.ymin}(u[h]!==d||u[h+1]!==f)&&this.contains(o,d,f)&&(u.splice(h,0,d,f),h+=2)}if(u.length>4)for(let d=0;d<u.length;d+=2){const f=(d+2)%u.length,p=(d+4)%u.length;(u[d]===u[f]&&u[f]===u[p]||u[d+1]===u[f+1]&&u[f+1]===u[p+1])&&(u.splice(f,2),d-=2)}return h}_project(o,a,c,u){let d,f,p,h=1/0;if(u<0){if(a<=this.ymin)return null;(d=(this.ymin-a)/u)<h&&(p=this.ymin,f=o+(h=d)*c)}else if(u>0){if(a>=this.ymax)return null;(d=(this.ymax-a)/u)<h&&(p=this.ymax,f=o+(h=d)*c)}if(c>0){if(o>=this.xmax)return null;(d=(this.xmax-o)/c)<h&&(f=this.xmax,p=a+(h=d)*u)}else if(c<0){if(o<=this.xmin)return null;(d=(this.xmin-o)/c)<h&&(f=this.xmin,p=a+(h=d)*u)}return[f,p]}_edgecode(o,a){return(o===this.xmin?1:o===this.xmax?2:0)|(a===this.ymin?4:a===this.ymax?8:0)}_regioncode(o,a){return(o<this.xmin?1:o>this.xmax?2:0)|(a<this.ymin?4:a>this.ymax?8:0)}}const kUe=2*Math.PI,a_=Math.pow;function MUe(l){return l[0]}function EUe(l){return l[1]}function IUe(l,o,a){return[l+Math.sin(l+o)*a,o+Math.cos(l-o)*a]}class L5{static from(o,a=MUe,c=EUe,u){return new L5("length"in o?function PUe(l,o,a,c){const u=l.length,h=new Float64Array(2*u);for(let d=0;d<u;++d){const f=l[d];h[2*d]=o.call(c,f,d,l),h[2*d+1]=a.call(c,f,d,l)}return h}(o,a,c,u):Float64Array.from(function*RUe(l,o,a,c){let u=0;for(const h of l)yield o.call(c,h,u,l),yield a.call(c,h,u,l),++u}(o,a,c,u)))}constructor(o){this._delaunator=new jD(o),this.inedges=new Int32Array(o.length/2),this._hullIndex=new Int32Array(o.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const o=this._delaunator,a=this.points;if(o.hull&&o.hull.length>2&&function AUe(l){const{triangles:o,coords:a}=l;for(let c=0;c<o.length;c+=3){const u=2*o[c],h=2*o[c+1],d=2*o[c+2];if((a[d]-a[u])*(a[h+1]-a[u+1])-(a[h]-a[u])*(a[d+1]-a[u+1])>1e-10)return!1}return!0}(o)){this.collinear=Int32Array.from({length:a.length/2},(y,_)=>_).sort((y,_)=>a[2*y]-a[2*_]||a[2*y+1]-a[2*_+1]);const p=this.collinear[0],g=this.collinear[this.collinear.length-1],m=[a[2*p],a[2*p+1],a[2*g],a[2*g+1]],v=1e-8*Math.hypot(m[3]-m[1],m[2]-m[0]);for(let y=0,_=a.length/2;y<_;++y){const b=IUe(a[2*y],a[2*y+1],v);a[2*y]=b[0],a[2*y+1]=b[1]}this._delaunator=new jD(a)}else delete this.collinear;const c=this.halfedges=this._delaunator.halfedges,u=this.hull=this._delaunator.hull,h=this.triangles=this._delaunator.triangles,d=this.inedges.fill(-1),f=this._hullIndex.fill(-1);for(let p=0,g=c.length;p<g;++p){const m=h[p%3==2?p-2:p+1];(-1===c[p]||-1===d[m])&&(d[m]=p)}for(let p=0,g=u.length;p<g;++p)f[u[p]]=p;u.length<=2&&u.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=u[0],d[u[0]]=1,2===u.length&&(d[u[1]]=0,this.triangles[1]=u[1],this.triangles[2]=u[1]))}voronoi(o){return new pie(this,o)}*neighbors(o){const{inedges:a,hull:c,_hullIndex:u,halfedges:h,triangles:d,collinear:f}=this;if(f){const v=f.indexOf(o);return v>0&&(yield f[v-1]),void(v<f.length-1&&(yield f[v+1]))}const p=a[o];if(-1===p)return;let g=p,m=-1;do{if(yield m=d[g],g=g%3==2?g-2:g+1,d[g]!==o)return;if(g=h[g],-1===g){const v=c[(u[o]+1)%c.length];return void(v!==m&&(yield v))}}while(g!==p)}find(o,a,c=0){if((o=+o)!=o||(a=+a)!=a)return-1;const u=c;let h;for(;(h=this._step(c,o,a))>=0&&h!==c&&h!==u;)c=h;return h}_step(o,a,c){const{inedges:u,hull:h,_hullIndex:d,halfedges:f,triangles:p,points:g}=this;if(-1===u[o]||!g.length)return(o+1)%(g.length>>1);let m=o,v=a_(a-g[2*o],2)+a_(c-g[2*o+1],2);const y=u[o];let _=y;do{let b=p[_];const C=a_(a-g[2*b],2)+a_(c-g[2*b+1],2);if(C<v&&(v=C,m=b),_=_%3==2?_-2:_+1,p[_]!==o)break;if(_=f[_],-1===_){if(_=h[(d[o]+1)%h.length],_!==b&&a_(a-g[2*_],2)+a_(c-g[2*_+1],2)<v)return _;break}}while(_!==y);return m}render(o){const a=null==o?o=new Um:void 0,{points:c,halfedges:u,triangles:h}=this;for(let d=0,f=u.length;d<f;++d){const p=u[d];if(p<d)continue;const g=2*h[d],m=2*h[p];o.moveTo(c[g],c[g+1]),o.lineTo(c[m],c[m+1])}return this.renderHull(o),a&&a.value()}renderPoints(o,a){void 0===a&&(!o||"function"!=typeof o.moveTo)&&(a=o,o=null),a=null==a?2:+a;const c=null==o?o=new Um:void 0,{points:u}=this;for(let h=0,d=u.length;h<d;h+=2){const f=u[h],p=u[h+1];o.moveTo(f+a,p),o.arc(f,p,a,0,kUe)}return c&&c.value()}renderHull(o){const a=null==o?o=new Um:void 0,{hull:c,points:u}=this,h=2*c[0],d=c.length;o.moveTo(u[h],u[h+1]);for(let f=1;f<d;++f){const p=2*c[f];o.lineTo(u[p],u[p+1])}return o.closePath(),a&&a.value()}hullPolygon(){const o=new N5;return this.renderHull(o),o.value()}renderTriangle(o,a){const c=null==a?a=new Um:void 0,{points:u,triangles:h}=this,d=2*h[o*=3],f=2*h[o+1],p=2*h[o+2];return a.moveTo(u[d],u[d+1]),a.lineTo(u[f],u[f+1]),a.lineTo(u[p],u[p+1]),a.closePath(),c&&c.value()}*trianglePolygons(){const{triangles:o}=this;for(let a=0,c=o.length/3;a<c;++a)yield this.trianglePolygon(a)}trianglePolygon(o){const a=new N5;return this.renderTriangle(o,a),a.value()}}const qD=l=>()=>l;function B5(l,{sourceEvent:o,subject:a,target:c,identifier:u,active:h,x:d,y:f,dx:p,dy:g,dispatch:m}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:o,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:c,enumerable:!0,configurable:!0},identifier:{value:u,enumerable:!0,configurable:!0},active:{value:h,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:m}})}function FUe(l){return!l.ctrlKey&&!l.button}function NUe(){return this.parentNode}function LUe(l,o){return null==o?{x:l.x,y:l.y}:o}function BUe(){return navigator.maxTouchPoints||"ontouchstart"in this}function gie(){var f,p,g,m,l=FUe,o=NUe,a=LUe,c=BUe,u={},h=zy("start","drag","end"),d=0,v=0;function y(T){T.on("mousedown.drag",_).filter(c).on("touchstart.drag",x).on("touchmove.drag",S,NVe).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(T,M){if(!m&&l.call(this,T,M)){var A=O(this,o.call(this,T,M),T,M,"mouse");!A||(ro(T.view).on("mousemove.drag",b,TC).on("mouseup.drag",C,TC),gD(T.view),OL(T),g=!1,f=T.clientX,p=T.clientY,A("start",T))}}function b(T){if(Hy(T),!g){var M=T.clientX-f,A=T.clientY-p;g=M*M+A*A>v}u.mouse("drag",T)}function C(T){ro(T.view).on("mousemove.drag mouseup.drag",null),mD(T.view,g),Hy(T),u.mouse("end",T)}function x(T,M){if(l.call(this,T,M)){var P,B,A=T.changedTouches,I=o.call(this,T,M),E=A.length;for(P=0;P<E;++P)(B=O(this,I,T,M,A[P].identifier,A[P]))&&(OL(T),B("start",T,A[P]))}}function S(T){var I,E,M=T.changedTouches,A=M.length;for(I=0;I<A;++I)(E=u[M[I].identifier])&&(Hy(T),E("drag",T,M[I]))}function w(T){var I,E,M=T.changedTouches,A=M.length;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),I=0;I<A;++I)(E=u[M[I].identifier])&&(OL(T),E("end",T,M[I]))}function O(T,M,A,I,E,P){var Q,j,N,B=h.copy(),V=sc(P||A,M);if(null!=(N=a.call(T,new B5("beforestart",{sourceEvent:A,target:y,identifier:E,active:d,x:V[0],y:V[1],dx:0,dy:0,dispatch:B}),I)))return Q=N.x-V[0]||0,j=N.y-V[1]||0,function U(z,$,H){var W,G=V;switch(z){case"start":u[E]=U,W=d++;break;case"end":delete u[E],--d;case"drag":V=sc(H||$,M),W=d}B.call(z,T,new B5(z,{sourceEvent:$,subject:N,target:y,identifier:E,active:W,x:V[0]+Q,y:V[1]+j,dx:V[0]-G[0],dy:V[1]-G[1],dispatch:B}),I)}}return y.filter=function(T){return arguments.length?(l="function"==typeof T?T:qD(!!T),y):l},y.container=function(T){return arguments.length?(o="function"==typeof T?T:qD(T),y):o},y.subject=function(T){return arguments.length?(a="function"==typeof T?T:qD(T),y):a},y.touchable=function(T){return arguments.length?(c="function"==typeof T?T:qD(!!T),y):c},y.on=function(){var T=h.on.apply(h,arguments);return T===h?y:T},y.clickDistance=function(T){return arguments.length?(v=(T=+T)*T,y):Math.sqrt(v)},y}B5.prototype.on=function(){var l=this._.on.apply(this._,arguments);return l===this._?this:l};var mie={},V5={};function vie(l){return new Function("d","return {"+l.map(function(o,a){return JSON.stringify(o)+": d["+a+'] || ""'}).join(",")+"}")}function yie(l){var o=Object.create(null),a=[];return l.forEach(function(c){for(var u in c)u in o||a.push(o[u]=u)}),a}function Ml(l,o){var a=l+"",c=a.length;return c<o?new Array(o-c+1).join(0)+a:a}function ZD(l){var o=new RegExp('["'+l+"\n\r]"),a=l.charCodeAt(0);function u(v,y){var S,_=[],b=v.length,C=0,x=0,w=b<=0,O=!1;function T(){if(w)return V5;if(O)return O=!1,mie;var A,E,I=C;if(34===v.charCodeAt(I)){for(;C++<b&&34!==v.charCodeAt(C)||34===v.charCodeAt(++C););return(A=C)>=b?w=!0:10===(E=v.charCodeAt(C++))?O=!0:13===E&&(O=!0,10===v.charCodeAt(C)&&++C),v.slice(I+1,A-1).replace(/""/g,'"')}for(;C<b;){if(10===(E=v.charCodeAt(A=C++)))O=!0;else if(13===E)O=!0,10===v.charCodeAt(C)&&++C;else if(E!==a)continue;return v.slice(I,A)}return w=!0,v.slice(I,b)}for(10===v.charCodeAt(b-1)&&--b,13===v.charCodeAt(b-1)&&--b;(S=T())!==V5;){for(var M=[];S!==mie&&S!==V5;)M.push(S),S=T();y&&null==(M=y(M,x++))||_.push(M)}return _}function h(v,y){return v.map(function(_){return y.map(function(b){return m(_[b])}).join(l)})}function g(v){return v.map(m).join(l)}function m(v){return null==v?"":v instanceof Date?function UUe(l){var o=l.getUTCHours(),a=l.getUTCMinutes(),c=l.getUTCSeconds(),u=l.getUTCMilliseconds();return isNaN(l)?"Invalid Date":function zUe(l){return l<0?"-"+Ml(-l,6):l>9999?"+"+Ml(l,6):Ml(l,4)}(l.getUTCFullYear())+"-"+Ml(l.getUTCMonth()+1,2)+"-"+Ml(l.getUTCDate(),2)+(u?"T"+Ml(o,2)+":"+Ml(a,2)+":"+Ml(c,2)+"."+Ml(u,3)+"Z":c?"T"+Ml(o,2)+":"+Ml(a,2)+":"+Ml(c,2)+"Z":a||o?"T"+Ml(o,2)+":"+Ml(a,2)+"Z":"")}(v):o.test(v+="")?'"'+v.replace(/"/g,'""')+'"':v}return{parse:function c(v,y){var _,b,C=u(v,function(x,S){if(_)return _(x,S-1);b=x,_=y?function VUe(l,o){var a=vie(l);return function(c,u){return o(a(c),u,l)}}(x,y):vie(x)});return C.columns=b||[],C},parseRows:u,format:function d(v,y){return null==y&&(y=yie(v)),[y.map(m).join(l)].concat(h(v,y)).join("\n")},formatBody:function f(v,y){return null==y&&(y=yie(v)),h(v,y).join("\n")},formatRows:function p(v){return v.map(g).join("\n")},formatRow:g,formatValue:m}}var Hm=ZD(","),_ie=Hm.parse,HUe=Hm.parseRows,$Ue=Hm.format,WUe=Hm.formatBody,GUe=Hm.formatRows,QUe=Hm.formatRow,jUe=Hm.formatValue,$m=ZD("\t"),bie=$m.parse,qUe=$m.parseRows,ZUe=$m.format,XUe=$m.formatBody,YUe=$m.formatRows,KUe=$m.formatRow,JUe=$m.formatValue;function e7e(l){for(var o in l){var c,u,a=l[o].trim();if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if("NaN"===a)a=NaN;else if(isNaN(c=+a)){if(!(u=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;t7e&&!!u[4]&&!u[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a)}else a=c;else a=null;l[o]=a}return l}const t7e=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),n7e=l=>+l;function i7e(l){return l*l}function r7e(l){return l*(2-l)}function xie(l){return((l*=2)<=1?l*l:--l*(2-l)+1)/2}var s7e=function l(o){function a(c){return Math.pow(c,o)}return o=+o,a.exponent=l,a}(3),o7e=function l(o){function a(c){return 1-Math.pow(1-c,o)}return o=+o,a.exponent=l,a}(3),Cie=function l(o){function a(c){return((c*=2)<=1?Math.pow(c,o):2-Math.pow(2-c,o))/2}return o=+o,a.exponent=l,a}(3),Sie=Math.PI,wie=Sie/2;function a7e(l){return 1==+l?1:1-Math.cos(l*wie)}function l7e(l){return Math.sin(l*wie)}function Tie(l){return(1-Math.cos(Sie*l))/2}function Ep(l){return 1.0009775171065494*(Math.pow(2,-10*l)-.0009765625)}function c7e(l){return Ep(1-+l)}function u7e(l){return 1-Ep(l)}function Oie(l){return((l*=2)<=1?Ep(1-l):2-Ep(l-1))/2}function h7e(l){return 1-Math.sqrt(1-l*l)}function d7e(l){return Math.sqrt(1- --l*l)}function Die(l){return((l*=2)<=1?1-Math.sqrt(1-l*l):Math.sqrt(1-(l-=2)*l)+1)/2}var XD=7.5625;function x7e(l){return 1-$C(1-l)}function $C(l){return(l=+l)<.36363636363636365?XD*l*l:l<.7272727272727273?XD*(l-=.5454545454545454)*l+.75:l<.9090909090909091?XD*(l-=.8181818181818182)*l+.9375:XD*(l-=.9545454545454546)*l+.984375}function C7e(l){return((l*=2)<=1?1-$C(1-l):$C(l-1)+1)/2}var W5=1.70158,S7e=function l(o){function a(c){return(c=+c)*c*(o*(c-1)+c)}return o=+o,a.overshoot=l,a}(W5),w7e=function l(o){function a(c){return--c*c*((c+1)*o+c)+1}return o=+o,a.overshoot=l,a}(W5),kie=function l(o){function a(c){return((c*=2)<1?c*c*((o+1)*c-o):(c-=2)*c*((o+1)*c+o)+2)/2}return o=+o,a.overshoot=l,a}(W5),l_=2*Math.PI,T7e=function l(o,a){var c=Math.asin(1/(o=Math.max(1,o)))*(a/=l_);function u(h){return o*Ep(- --h)*Math.sin((c-h)/a)}return u.amplitude=function(h){return l(h,a*l_)},u.period=function(h){return l(o,h)},u}(1,.3),Mie=function l(o,a){var c=Math.asin(1/(o=Math.max(1,o)))*(a/=l_);function u(h){return 1-o*Ep(h=+h)*Math.sin((h+c)/a)}return u.amplitude=function(h){return l(h,a*l_)},u.period=function(h){return l(o,h)},u}(1,.3),O7e=function l(o,a){var c=Math.asin(1/(o=Math.max(1,o)))*(a/=l_);function u(h){return((h=2*h-1)<0?o*Ep(-h)*Math.sin((c-h)/a):2-o*Ep(h)*Math.sin((c+h)/a))/2}return u.amplitude=function(h){return l(h,a*l_)},u.period=function(h){return l(o,h)},u}(1,.3);function D7e(l){if(!l.ok)throw new Error(l.status+" "+l.statusText);return l.blob()}function k7e(l,o){return fetch(l,o).then(D7e)}function M7e(l){if(!l.ok)throw new Error(l.status+" "+l.statusText);return l.arrayBuffer()}function E7e(l,o){return fetch(l,o).then(M7e)}function A7e(l){if(!l.ok)throw new Error(l.status+" "+l.statusText);return l.text()}function YD(l,o){return fetch(l,o).then(A7e)}function Eie(l){return function(o,a,c){return 2===arguments.length&&"function"==typeof a&&(c=a,a=void 0),YD(o,a).then(function(u){return l(u,c)})}}function I7e(l,o,a,c){3===arguments.length&&"function"==typeof a&&(c=a,a=void 0);var u=ZD(l);return YD(o,a).then(function(h){return u.parse(h,c)})}var P7e=Eie(_ie),R7e=Eie(bie);function F7e(l,o){return new Promise(function(a,c){var u=new Image;for(var h in o)u[h]=o[h];u.onerror=c,u.onload=function(){a(u)},u.src=l})}function N7e(l){if(!l.ok)throw new Error(l.status+" "+l.statusText);if(204!==l.status&&205!==l.status)return l.json()}function L7e(l,o){return fetch(l,o).then(N7e)}function j5(l){return(o,a)=>YD(o,a).then(c=>(new DOMParser).parseFromString(c,l))}const B7e=j5("application/xml");var V7e=j5("text/html"),z7e=j5("image/svg+xml");function U7e(l,o){var a,c=1;function u(){var h,f,d=a.length,p=0,g=0;for(h=0;h<d;++h)p+=(f=a[h]).x,g+=f.y;for(p=(p/d-l)*c,g=(g/d-o)*c,h=0;h<d;++h)(f=a[h]).x-=p,f.y-=g}return null==l&&(l=0),null==o&&(o=0),u.initialize=function(h){a=h},u.x=function(h){return arguments.length?(l=+h,u):l},u.y=function(h){return arguments.length?(o=+h,u):o},u.strength=function(h){return arguments.length?(c=+h,u):c},u}function Aie(l,o,a,c){if(isNaN(o)||isNaN(a))return l;var u,v,y,_,b,C,x,S,w,h=l._root,d={data:c},f=l._x0,p=l._y0,g=l._x1,m=l._y1;if(!h)return l._root=d,l;for(;h.length;)if((C=o>=(v=(f+g)/2))?f=v:g=v,(x=a>=(y=(p+m)/2))?p=y:m=y,u=h,!(h=h[S=x<<1|C]))return u[S]=d,l;if(_=+l._x.call(null,h.data),b=+l._y.call(null,h.data),o===_&&a===b)return d.next=h,u?u[S]=d:l._root=d,l;do{u=u?u[S]=new Array(4):l._root=new Array(4),(C=o>=(v=(f+g)/2))?f=v:g=v,(x=a>=(y=(p+m)/2))?p=y:m=y}while((S=x<<1|C)==(w=(b>=y)<<1|_>=v));return u[w]=h,u[S]=d,l}function Xa(l,o,a,c,u){this.node=l,this.x0=o,this.y0=a,this.x1=c,this.y1=u}function eHe(l){return l[0]}function nHe(l){return l[1]}function KD(l,o,a){var c=new q5(null==o?eHe:o,null==a?nHe:a,NaN,NaN,NaN,NaN);return null==l?c:c.addAll(l)}function q5(l,o,a,c,u,h){this._x=l,this._y=o,this._x0=a,this._y0=c,this._x1=u,this._y1=h,this._root=void 0}function Iie(l){for(var o={data:l.data},a=o;l=l.next;)a=a.next={data:l.data};return o}var Ya=KD.prototype=q5.prototype;function Oo(l){return function(){return l}}function Ap(l){return 1e-6*(l()-.5)}function rHe(l){return l.x+l.vx}function sHe(l){return l.y+l.vy}function oHe(l){var o,a,c,u=1,h=1;function d(){for(var g,v,y,_,b,C,x,m=o.length,S=0;S<h;++S)for(v=KD(o,rHe,sHe).visitAfter(f),g=0;g<m;++g)x=(C=a[(y=o[g]).index])*C,_=y.x+y.vx,b=y.y+y.vy,v.visit(w);function w(O,T,M,A,I){var E=O.data,P=O.r,B=C+P;if(!E)return T>_+B||A<_-B||M>b+B||I<b-B;if(E.index>y.index){var V=_-E.x-E.vx,Q=b-E.y-E.vy,j=V*V+Q*Q;j<B*B&&(0===V&&(j+=(V=Ap(c))*V),0===Q&&(j+=(Q=Ap(c))*Q),j=(B-(j=Math.sqrt(j)))/j*u,y.vx+=(V*=j)*(B=(P*=P)/(x+P)),y.vy+=(Q*=j)*B,E.vx-=V*(B=1-B),E.vy-=Q*B)}}}function f(g){if(g.data)return g.r=a[g.data.index];for(var m=g.r=0;m<4;++m)g[m]&&g[m].r>g.r&&(g.r=g[m].r)}function p(){if(o){var g,v,m=o.length;for(a=new Array(m),g=0;g<m;++g)a[(v=o[g]).index]=+l(v,g,o)}}return"function"!=typeof l&&(l=Oo(null==l?1:+l)),d.initialize=function(g,m){o=g,c=m,p()},d.iterations=function(g){return arguments.length?(h=+g,d):h},d.strength=function(g){return arguments.length?(u=+g,d):u},d.radius=function(g){return arguments.length?(l="function"==typeof g?g:Oo(+g),p(),d):l},d}function aHe(l){return l.index}function Pie(l,o){var a=l.get(o);if(!a)throw new Error("node not found: "+o);return a}function lHe(l){var c,h,d,f,p,g,o=aHe,a=function v(x){return 1/Math.min(f[x.source.index],f[x.target.index])},u=Oo(30),m=1;function y(x){for(var S=0,w=l.length;S<m;++S)for(var T,M,A,I,E,P,B,O=0;O<w;++O)I=(A=(T=l[O]).target).x+A.vx-(M=T.source).x-M.vx||Ap(g),E=A.y+A.vy-M.y-M.vy||Ap(g),E*=P=((P=Math.sqrt(I*I+E*E))-h[O])/P*x*c[O],A.vx-=(I*=P)*(B=p[O]),A.vy-=E*B,M.vx+=I*(B=1-B),M.vy+=E*B}function _(){if(d){var x,T,S=d.length,w=l.length,O=new Map(d.map((M,A)=>[o(M,A,d),M]));for(x=0,f=new Array(S);x<w;++x)(T=l[x]).index=x,"object"!=typeof T.source&&(T.source=Pie(O,T.source)),"object"!=typeof T.target&&(T.target=Pie(O,T.target)),f[T.source.index]=(f[T.source.index]||0)+1,f[T.target.index]=(f[T.target.index]||0)+1;for(x=0,p=new Array(w);x<w;++x)p[x]=f[(T=l[x]).source.index]/(f[T.source.index]+f[T.target.index]);c=new Array(w),b(),h=new Array(w),C()}}function b(){if(d)for(var x=0,S=l.length;x<S;++x)c[x]=+a(l[x],x,l)}function C(){if(d)for(var x=0,S=l.length;x<S;++x)h[x]=+u(l[x],x,l)}return null==l&&(l=[]),y.initialize=function(x,S){d=x,g=S,_()},y.links=function(x){return arguments.length?(l=x,_(),y):l},y.id=function(x){return arguments.length?(o=x,y):o},y.iterations=function(x){return arguments.length?(m=+x,y):m},y.strength=function(x){return arguments.length?(a="function"==typeof x?x:Oo(+x),b(),y):a},y.distance=function(x){return arguments.length?(u="function"==typeof x?x:Oo(+x),C(),y):u},y}function dHe(l){return l.x}function fHe(l){return l.y}Ya.copy=function(){var a,c,l=new q5(this._x,this._y,this._x0,this._y0,this._x1,this._y1),o=this._root;if(!o)return l;if(!o.length)return l._root=Iie(o),l;for(a=[{source:o,target:l._root=new Array(4)}];o=a.pop();)for(var u=0;u<4;++u)(c=o.source[u])&&(c.length?a.push({source:c,target:o.target[u]=new Array(4)}):o.target[u]=Iie(c));return l},Ya.add=function H7e(l){const o=+this._x.call(null,l),a=+this._y.call(null,l);return Aie(this.cover(o,a),o,a,l)},Ya.addAll=function $7e(l){var o,a,u,h,c=l.length,d=new Array(c),f=new Array(c),p=1/0,g=1/0,m=-1/0,v=-1/0;for(a=0;a<c;++a)isNaN(u=+this._x.call(null,o=l[a]))||isNaN(h=+this._y.call(null,o))||(d[a]=u,f[a]=h,u<p&&(p=u),u>m&&(m=u),h<g&&(g=h),h>v&&(v=h));if(p>m||g>v)return this;for(this.cover(p,g).cover(m,v),a=0;a<c;++a)Aie(this,d[a],f[a],l[a]);return this},Ya.cover=function W7e(l,o){if(isNaN(l=+l)||isNaN(o=+o))return this;var a=this._x0,c=this._y0,u=this._x1,h=this._y1;if(isNaN(a))u=(a=Math.floor(l))+1,h=(c=Math.floor(o))+1;else{for(var p,g,d=u-a||1,f=this._root;a>l||l>=u||c>o||o>=h;)switch(g=(o<c)<<1|l<a,p=new Array(4),p[g]=f,f=p,d*=2,g){case 0:u=a+d,h=c+d;break;case 1:a=u-d,h=c+d;break;case 2:u=a+d,c=h-d;break;case 3:a=u-d,c=h-d}this._root&&this._root.length&&(this._root=f)}return this._x0=a,this._y0=c,this._x1=u,this._y1=h,this},Ya.data=function G7e(){var l=[];return this.visit(function(o){if(!o.length)do{l.push(o.data)}while(o=o.next)}),l},Ya.extent=function Q7e(l){return arguments.length?this.cover(+l[0][0],+l[0][1]).cover(+l[1][0],+l[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ya.find=function j7e(l,o,a){var c,d,f,p,g,b,C,u=this._x0,h=this._y0,m=this._x1,v=this._y1,y=[],_=this._root;for(_&&y.push(new Xa(_,u,h,m,v)),null==a?a=1/0:(u=l-a,h=o-a,m=l+a,v=o+a,a*=a);b=y.pop();)if(!(!(_=b.node)||(d=b.x0)>m||(f=b.y0)>v||(p=b.x1)<u||(g=b.y1)<h))if(_.length){var x=(d+p)/2,S=(f+g)/2;y.push(new Xa(_[3],x,S,p,g),new Xa(_[2],d,S,x,g),new Xa(_[1],x,f,p,S),new Xa(_[0],d,f,x,S)),(C=(o>=S)<<1|l>=x)&&(b=y[y.length-1],y[y.length-1]=y[y.length-1-C],y[y.length-1-C]=b)}else{var w=l-+this._x.call(null,_.data),O=o-+this._y.call(null,_.data),T=w*w+O*O;if(T<a){var M=Math.sqrt(a=T);u=l-M,h=o-M,m=l+M,v=o+M,c=_.data}}return c},Ya.remove=function q7e(l){if(isNaN(m=+this._x.call(null,l))||isNaN(v=+this._y.call(null,l)))return this;var o,c,u,h,m,v,y,_,b,C,x,S,a=this._root,d=this._x0,f=this._y0,p=this._x1,g=this._y1;if(!a)return this;if(a.length)for(;;){if((b=m>=(y=(d+p)/2))?d=y:p=y,(C=v>=(_=(f+g)/2))?f=_:g=_,o=a,!(a=a[x=C<<1|b]))return this;if(!a.length)break;(o[x+1&3]||o[x+2&3]||o[x+3&3])&&(c=o,S=x)}for(;a.data!==l;)if(u=a,!(a=a.next))return this;return(h=a.next)&&delete a.next,u?(h?u.next=h:delete u.next,this):o?(h?o[x]=h:delete o[x],(a=o[0]||o[1]||o[2]||o[3])&&a===(o[3]||o[2]||o[1]||o[0])&&!a.length&&(c?c[S]=a:this._root=a),this):(this._root=h,this)},Ya.removeAll=function Z7e(l){for(var o=0,a=l.length;o<a;++o)this.remove(l[o]);return this},Ya.root=function X7e(){return this._root},Ya.size=function Y7e(){var l=0;return this.visit(function(o){if(!o.length)do{++l}while(o=o.next)}),l},Ya.visit=function K7e(l){var a,u,h,d,f,p,o=[],c=this._root;for(c&&o.push(new Xa(c,this._x0,this._y0,this._x1,this._y1));a=o.pop();)if(!l(c=a.node,h=a.x0,d=a.y0,f=a.x1,p=a.y1)&&c.length){var g=(h+f)/2,m=(d+p)/2;(u=c[3])&&o.push(new Xa(u,g,m,f,p)),(u=c[2])&&o.push(new Xa(u,h,m,g,p)),(u=c[1])&&o.push(new Xa(u,g,d,f,m)),(u=c[0])&&o.push(new Xa(u,h,d,g,m))}return this},Ya.visitAfter=function J7e(l){var c,o=[],a=[];for(this._root&&o.push(new Xa(this._root,this._x0,this._y0,this._x1,this._y1));c=o.pop();){var u=c.node;if(u.length){var h,d=c.x0,f=c.y0,p=c.x1,g=c.y1,m=(d+p)/2,v=(f+g)/2;(h=u[0])&&o.push(new Xa(h,d,f,m,v)),(h=u[1])&&o.push(new Xa(h,m,f,p,v)),(h=u[2])&&o.push(new Xa(h,d,v,m,g)),(h=u[3])&&o.push(new Xa(h,m,v,p,g))}a.push(c)}for(;c=a.pop();)l(c.node,c.x0,c.y0,c.x1,c.y1);return this},Ya.x=function tHe(l){return arguments.length?(this._x=l,this):this._x},Ya.y=function iHe(l){return arguments.length?(this._y=l,this):this._y};var gHe=Math.PI*(3-Math.sqrt(5));function mHe(l){var o,a=1,c=.001,u=1-Math.pow(c,1/300),h=0,d=.6,f=new Map,p=wD(v),g=zy("tick","end"),m=function hHe(){let l=1;return()=>(l=(1664525*l+1013904223)%4294967296)/4294967296}();function v(){y(),g.call("tick",o),a<c&&(p.stop(),g.call("end",o))}function y(C){var x,w,S=l.length;void 0===C&&(C=1);for(var O=0;O<C;++O)for(a+=(h-a)*u,f.forEach(function(T){T(a)}),x=0;x<S;++x)null==(w=l[x]).fx?w.x+=w.vx*=d:(w.x=w.fx,w.vx=0),null==w.fy?w.y+=w.vy*=d:(w.y=w.fy,w.vy=0);return o}function _(){for(var S,C=0,x=l.length;C<x;++C){if((S=l[C]).index=C,null!=S.fx&&(S.x=S.fx),null!=S.fy&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var w=10*Math.sqrt(.5+C),O=C*gHe;S.x=w*Math.cos(O),S.y=w*Math.sin(O)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function b(C){return C.initialize&&C.initialize(l,m),C}return null==l&&(l=[]),_(),o={tick:y,restart:function(){return p.restart(v),o},stop:function(){return p.stop(),o},nodes:function(C){return arguments.length?(l=C,_(),f.forEach(b),o):l},alpha:function(C){return arguments.length?(a=+C,o):a},alphaMin:function(C){return arguments.length?(c=+C,o):c},alphaDecay:function(C){return arguments.length?(u=+C,o):+u},alphaTarget:function(C){return arguments.length?(h=+C,o):h},velocityDecay:function(C){return arguments.length?(d=1-C,o):1-d},randomSource:function(C){return arguments.length?(m=C,f.forEach(b),o):m},force:function(C,x){return arguments.length>1?(null==x?f.delete(C):f.set(C,b(x)),o):f.get(C)},find:function(C,x,S){var T,M,A,I,E,w=0,O=l.length;for(null==S?S=1/0:S*=S,w=0;w<O;++w)(A=(T=C-(I=l[w]).x)*T+(M=x-I.y)*M)<S&&(E=I,S=A);return E},on:function(C,x){return arguments.length>1?(g.on(C,x),o):g.on(C)}}}function vHe(){var l,o,a,c,h,u=Oo(-30),d=1,f=1/0,p=.81;function g(_){var b,C=l.length,x=KD(l,dHe,fHe).visitAfter(v);for(c=_,b=0;b<C;++b)o=l[b],x.visit(y)}function m(){if(l){var _,C,b=l.length;for(h=new Array(b),_=0;_<b;++_)h[(C=l[_]).index]=+u(C,_,l)}}function v(_){var C,x,w,O,T,b=0,S=0;if(_.length){for(w=O=T=0;T<4;++T)(C=_[T])&&(x=Math.abs(C.value))&&(b+=C.value,S+=x,w+=x*C.x,O+=x*C.y);_.x=w/S,_.y=O/S}else{(C=_).x=C.data.x,C.y=C.data.y;do{b+=h[C.data.index]}while(C=C.next)}_.value=b}function y(_,b,C,x){if(!_.value)return!0;var S=_.x-o.x,w=_.y-o.y,O=x-b,T=S*S+w*w;if(O*O/p<T)return T<f&&(0===S&&(T+=(S=Ap(a))*S),0===w&&(T+=(w=Ap(a))*w),T<d&&(T=Math.sqrt(d*T)),o.vx+=S*_.value*c/T,o.vy+=w*_.value*c/T),!0;if(!(_.length||T>=f)){(_.data!==o||_.next)&&(0===S&&(T+=(S=Ap(a))*S),0===w&&(T+=(w=Ap(a))*w),T<d&&(T=Math.sqrt(d*T)));do{_.data!==o&&(o.vx+=S*(O=h[_.data.index]*c/T),o.vy+=w*O)}while(_=_.next)}}return g.initialize=function(_,b){l=_,a=b,m()},g.strength=function(_){return arguments.length?(u="function"==typeof _?_:Oo(+_),m(),g):u},g.distanceMin=function(_){return arguments.length?(d=_*_,g):Math.sqrt(d)},g.distanceMax=function(_){return arguments.length?(f=_*_,g):Math.sqrt(f)},g.theta=function(_){return arguments.length?(p=_*_,g):Math.sqrt(p)},g}function yHe(l,o,a){var c,h,d,u=Oo(.1);function f(g){for(var m=0,v=c.length;m<v;++m){var y=c[m],_=y.x-o||1e-6,b=y.y-a||1e-6,C=Math.sqrt(_*_+b*b),x=(d[m]-C)*h[m]*g/C;y.vx+=_*x,y.vy+=b*x}}function p(){if(c){var g,m=c.length;for(h=new Array(m),d=new Array(m),g=0;g<m;++g)d[g]=+l(c[g],g,c),h[g]=isNaN(d[g])?0:+u(c[g],g,c)}}return"function"!=typeof l&&(l=Oo(+l)),null==o&&(o=0),null==a&&(a=0),f.initialize=function(g){c=g,p()},f.strength=function(g){return arguments.length?(u="function"==typeof g?g:Oo(+g),p(),f):u},f.radius=function(g){return arguments.length?(l="function"==typeof g?g:Oo(+g),p(),f):l},f.x=function(g){return arguments.length?(o=+g,f):o},f.y=function(g){return arguments.length?(a=+g,f):a},f}function _He(l){var a,c,u,o=Oo(.1);function h(f){for(var m,p=0,g=a.length;p<g;++p)(m=a[p]).vx+=(u[p]-m.x)*c[p]*f}function d(){if(a){var f,p=a.length;for(c=new Array(p),u=new Array(p),f=0;f<p;++f)c[f]=isNaN(u[f]=+l(a[f],f,a))?0:+o(a[f],f,a)}}return"function"!=typeof l&&(l=Oo(null==l?0:+l)),h.initialize=function(f){a=f,d()},h.strength=function(f){return arguments.length?(o="function"==typeof f?f:Oo(+f),d(),h):o},h.x=function(f){return arguments.length?(l="function"==typeof f?f:Oo(+f),d(),h):l},h}function bHe(l){var a,c,u,o=Oo(.1);function h(f){for(var m,p=0,g=a.length;p<g;++p)(m=a[p]).vy+=(u[p]-m.y)*c[p]*f}function d(){if(a){var f,p=a.length;for(c=new Array(p),u=new Array(p),f=0;f<p;++f)c[f]=isNaN(u[f]=+l(a[f],f,a))?0:+o(a[f],f,a)}}return"function"!=typeof l&&(l=Oo(null==l?0:+l)),h.initialize=function(f){a=f,d()},h.strength=function(f){return arguments.length?(o="function"==typeof f?f:Oo(+f),d(),h):o},h.y=function(f){return arguments.length?(l="function"==typeof f?f:Oo(+f),d(),h):l},h}function JD(l,o){if((a=(l=o?l.toExponential(o-1):l.toExponential()).indexOf("e"))<0)return null;var a,c=l.slice(0,a);return[c.length>1?c[0]+c.slice(2):c,+l.slice(a+1)]}function c_(l){return(l=JD(Math.abs(l)))?l[1]:NaN}var Fie,wHe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function u_(l){if(!(o=wHe.exec(l)))throw new Error("invalid format: "+l);var o;return new ek({fill:o[1],align:o[2],sign:o[3],symbol:o[4],zero:o[5],width:o[6],comma:o[7],precision:o[8]&&o[8].slice(1),trim:o[9],type:o[10]})}function ek(l){this.fill=void 0===l.fill?" ":l.fill+"",this.align=void 0===l.align?">":l.align+"",this.sign=void 0===l.sign?"-":l.sign+"",this.symbol=void 0===l.symbol?"":l.symbol+"",this.zero=!!l.zero,this.width=void 0===l.width?void 0:+l.width,this.comma=!!l.comma,this.precision=void 0===l.precision?void 0:+l.precision,this.trim=!!l.trim,this.type=void 0===l.type?"":l.type+""}function Nie(l,o){var a=JD(l,o);if(!a)return l+"";var c=a[0],u=a[1];return u<0?"0."+new Array(-u).join("0")+c:c.length>u+1?c.slice(0,u+1)+"."+c.slice(u+1):c+new Array(u-c.length+2).join("0")}u_.prototype=ek.prototype,ek.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Lie={"%":(l,o)=>(100*l).toFixed(o),b:l=>Math.round(l).toString(2),c:l=>l+"",d:function xHe(l){return Math.abs(l=Math.round(l))>=1e21?l.toLocaleString("en").replace(/,/g,""):l.toString(10)},e:(l,o)=>l.toExponential(o),f:(l,o)=>l.toFixed(o),g:(l,o)=>l.toPrecision(o),o:l=>Math.round(l).toString(8),p:(l,o)=>Nie(100*l,o),r:Nie,s:function OHe(l,o){var a=JD(l,o);if(!a)return l+"";var c=a[0],u=a[1],h=u-(Fie=3*Math.max(-8,Math.min(8,Math.floor(u/3))))+1,d=c.length;return h===d?c:h>d?c+new Array(h-d+1).join("0"):h>0?c.slice(0,h)+"."+c.slice(h):"0."+new Array(1-h).join("0")+JD(l,Math.max(0,o+h-1))[0]},X:l=>Math.round(l).toString(16).toUpperCase(),x:l=>Math.round(l).toString(16)};function Bie(l){return l}var tk,nk,Z5,Vie=Array.prototype.map,zie=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Uie(l){var o=void 0===l.grouping||void 0===l.thousands?Bie:function CHe(l,o){return function(a,c){for(var u=a.length,h=[],d=0,f=l[0],p=0;u>0&&f>0&&(p+f+1>c&&(f=Math.max(1,c-p)),h.push(a.substring(u-=f,u+f)),!((p+=f+1)>c));)f=l[d=(d+1)%l.length];return h.reverse().join(o)}}(Vie.call(l.grouping,Number),l.thousands+""),a=void 0===l.currency?"":l.currency[0]+"",c=void 0===l.currency?"":l.currency[1]+"",u=void 0===l.decimal?".":l.decimal+"",h=void 0===l.numerals?Bie:function SHe(l){return function(o){return o.replace(/[0-9]/g,function(a){return l[+a]})}}(Vie.call(l.numerals,String)),d=void 0===l.percent?"%":l.percent+"",f=void 0===l.minus?"\u2212":l.minus+"",p=void 0===l.nan?"NaN":l.nan+"";function g(v){var y=(v=u_(v)).fill,_=v.align,b=v.sign,C=v.symbol,x=v.zero,S=v.width,w=v.comma,O=v.precision,T=v.trim,M=v.type;"n"===M?(w=!0,M="g"):Lie[M]||(void 0===O&&(O=12),T=!0,M="g"),(x||"0"===y&&"="===_)&&(x=!0,y="0",_="=");var A="$"===C?a:"#"===C&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",I="$"===C?c:/[%p]/.test(M)?d:"",E=Lie[M],P=/[defgprs%]/.test(M);function B(V){var N,U,z,Q=A,j=I;if("c"===M)j=E(V)+j,V="";else{var $=(V=+V)<0||1/V<0;if(V=isNaN(V)?p:E(Math.abs(V),O),T&&(V=function THe(l){e:for(var u,o=l.length,a=1,c=-1;a<o;++a)switch(l[a]){case".":c=u=a;break;case"0":0===c&&(c=a),u=a;break;default:if(!+l[a])break e;c>0&&(c=0)}return c>0?l.slice(0,c)+l.slice(u+1):l}(V)),$&&0==+V&&"+"!==b&&($=!1),Q=($?"("===b?b:f:"-"===b||"("===b?"":b)+Q,j=("s"===M?zie[8+Fie/3]:"")+j+($&&"("===b?")":""),P)for(N=-1,U=V.length;++N<U;)if(48>(z=V.charCodeAt(N))||z>57){j=(46===z?u+V.slice(N+1):V.slice(N))+j,V=V.slice(0,N);break}}w&&!x&&(V=o(V,1/0));var H=Q.length+V.length+j.length,G=H<S?new Array(S-H+1).join(y):"";switch(w&&x&&(V=o(G+V,G.length?S-j.length:1/0),G=""),_){case"<":V=Q+V+j+G;break;case"=":V=Q+G+V+j;break;case"^":V=G.slice(0,H=G.length>>1)+Q+V+j+G.slice(H);break;default:V=G+Q+V+j}return h(V)}return O=void 0===O?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O)),B.toString=function(){return v+""},B}return{format:g,formatPrefix:function m(v,y){var _=g(((v=u_(v)).type="f",v)),b=3*Math.max(-8,Math.min(8,Math.floor(c_(y)/3))),C=Math.pow(10,-b),x=zie[8+b/3];return function(S){return _(C*S)+x}}}}function Hie(l){return tk=Uie(l),nk=tk.format,Z5=tk.formatPrefix,tk}function $ie(l){return Math.max(0,-c_(Math.abs(l)))}function Wie(l,o){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(c_(o)/3)))-c_(Math.abs(l)))}function Gie(l,o){return l=Math.abs(l),o=Math.abs(o)-l,Math.max(0,c_(o)-c_(l))+1}Hie({thousands:",",grouping:[3],currency:["$",""]});var $n=1e-6,WC=1e-12,Vi=Math.PI,Ns=Vi/2,ik=Vi/4,Ka=2*Vi,Lr=180/Vi,Wn=Vi/180,Ji=Math.abs,h_=Math.atan,Ja=Math.atan2,Pn=Math.cos,rk=Math.ceil,Qie=Math.exp,X5=(Math,Math.hypot),sk=Math.log,Y5=Math.pow,wn=Math.sin,Jc=Math.sign||function(l){return l>0?1:l<0?-1:0},Uo=Math.sqrt,K5=Math.tan;function jie(l){return l>1?0:l<-1?Vi:Math.acos(l)}function el(l){return l>1?Ns:l<-1?-Ns:Math.asin(l)}function qie(l){return(l=wn(l/2))*l}function vs(){}function ok(l,o){l&&Xie.hasOwnProperty(l.type)&&Xie[l.type](l,o)}var Zie={Feature:function(l,o){ok(l.geometry,o)},FeatureCollection:function(l,o){for(var a=l.features,c=-1,u=a.length;++c<u;)ok(a[c].geometry,o)}},Xie={Sphere:function(l,o){o.sphere()},Point:function(l,o){o.point((l=l.coordinates)[0],l[1],l[2])},MultiPoint:function(l,o){for(var a=l.coordinates,c=-1,u=a.length;++c<u;)o.point((l=a[c])[0],l[1],l[2])},LineString:function(l,o){J5(l.coordinates,o,0)},MultiLineString:function(l,o){for(var a=l.coordinates,c=-1,u=a.length;++c<u;)J5(a[c],o,0)},Polygon:function(l,o){Yie(l.coordinates,o)},MultiPolygon:function(l,o){for(var a=l.coordinates,c=-1,u=a.length;++c<u;)Yie(a[c],o)},GeometryCollection:function(l,o){for(var a=l.geometries,c=-1,u=a.length;++c<u;)ok(a[c],o)}};function J5(l,o,a){var h,c=-1,u=l.length-a;for(o.lineStart();++c<u;)o.point((h=l[c])[0],h[1],h[2]);o.lineEnd()}function Yie(l,o){var a=-1,c=l.length;for(o.polygonStart();++a<c;)J5(l[a],o,1);o.polygonEnd()}function Xu(l,o){l&&Zie.hasOwnProperty(l.type)?Zie[l.type](l,o):ok(l,o)}var Kie,Jie,eB,tB,nB,ak=new wo,lk=new wo,ed={point:vs,lineStart:vs,lineEnd:vs,polygonStart:function(){ak=new wo,ed.lineStart=DHe,ed.lineEnd=kHe},polygonEnd:function(){var l=+ak;lk.add(l<0?Ka+l:l),this.lineStart=this.lineEnd=this.point=vs},sphere:function(){lk.add(Ka)}};function DHe(){ed.point=MHe}function kHe(){ere(Kie,Jie)}function MHe(l,o){ed.point=ere,Kie=l,Jie=o,eB=l*=Wn,tB=Pn(o=(o*=Wn)/2+ik),nB=wn(o)}function ere(l,o){var a=(l*=Wn)-eB,c=a>=0?1:-1,u=c*a,h=Pn(o=(o*=Wn)/2+ik),d=wn(o),f=nB*d,p=tB*h+f*Pn(u),g=f*c*wn(u);ak.add(Ja(g,p)),eB=l,tB=h,nB=d}function EHe(l){return lk=new wo,Xu(l,ed),2*lk}function ck(l){return[Ja(l[1],l[0]),el(l[2])]}function Wm(l){var o=l[0],a=l[1],c=Pn(a);return[c*Pn(o),c*wn(o),wn(a)]}function uk(l,o){return l[0]*o[0]+l[1]*o[1]+l[2]*o[2]}function d_(l,o){return[l[1]*o[2]-l[2]*o[1],l[2]*o[0]-l[0]*o[2],l[0]*o[1]-l[1]*o[0]]}function iB(l,o){l[0]+=o[0],l[1]+=o[1],l[2]+=o[2]}function hk(l,o){return[l[0]*o,l[1]*o,l[2]*o]}function dk(l){var o=Uo(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]);l[0]/=o,l[1]/=o,l[2]/=o}var ys,El,Ls,dc,Gm,tre,nre,f_,GC,Ip,yf,_f={point:rB,lineStart:rre,lineEnd:sre,polygonStart:function(){_f.point=ore,_f.lineStart=AHe,_f.lineEnd=IHe,GC=new wo,ed.polygonStart()},polygonEnd:function(){ed.polygonEnd(),_f.point=rB,_f.lineStart=rre,_f.lineEnd=sre,ak<0?(ys=-(Ls=180),El=-(dc=90)):GC>$n?dc=90:GC<-$n&&(El=-90),yf[0]=ys,yf[1]=Ls},sphere:function(){ys=-(Ls=180),El=-(dc=90)}};function rB(l,o){Ip.push(yf=[ys=l,Ls=l]),o<El&&(El=o),o>dc&&(dc=o)}function ire(l,o){var a=Wm([l*Wn,o*Wn]);if(f_){var c=d_(f_,a),h=d_([c[1],-c[0],0],c);dk(h),h=ck(h);var g,d=l-Gm,f=d>0?1:-1,p=h[0]*Lr*f,m=Ji(d)>180;m^(f*Gm<p&&p<f*l)?(g=h[1]*Lr)>dc&&(dc=g):m^(f*Gm<(p=(p+360)%360-180)&&p<f*l)?(g=-h[1]*Lr)<El&&(El=g):(o<El&&(El=o),o>dc&&(dc=o)),m?l<Gm?fc(ys,l)>fc(ys,Ls)&&(Ls=l):fc(l,Ls)>fc(ys,Ls)&&(ys=l):Ls>=ys?(l<ys&&(ys=l),l>Ls&&(Ls=l)):l>Gm?fc(ys,l)>fc(ys,Ls)&&(Ls=l):fc(l,Ls)>fc(ys,Ls)&&(ys=l)}else Ip.push(yf=[ys=l,Ls=l]);o<El&&(El=o),o>dc&&(dc=o),f_=a,Gm=l}function rre(){_f.point=ire}function sre(){yf[0]=ys,yf[1]=Ls,_f.point=rB,f_=null}function ore(l,o){if(f_){var a=l-Gm;GC.add(Ji(a)>180?a+(a>0?360:-360):a)}else tre=l,nre=o;ed.point(l,o),ire(l,o)}function AHe(){ed.lineStart()}function IHe(){ore(tre,nre),ed.lineEnd(),Ji(GC)>$n&&(ys=-(Ls=180)),yf[0]=ys,yf[1]=Ls,f_=null}function fc(l,o){return(o-=l)<0?o+360:o}function PHe(l,o){return l[0]-o[0]}function are(l,o){return l[0]<=l[1]?l[0]<=o&&o<=l[1]:o<l[0]||l[1]<o}function RHe(l){var o,a,c,u,h,d,f;if(dc=Ls=-(ys=El=1/0),Ip=[],Xu(l,_f),a=Ip.length){for(Ip.sort(PHe),o=1,h=[c=Ip[0]];o<a;++o)are(c,(u=Ip[o])[0])||are(c,u[1])?(fc(c[0],u[1])>fc(c[0],c[1])&&(c[1]=u[1]),fc(u[0],c[1])>fc(c[0],c[1])&&(c[0]=u[0])):h.push(c=u);for(d=-1/0,o=0,c=h[a=h.length-1];o<=a;c=u,++o)(f=fc(c[1],(u=h[o])[0]))>d&&(d=f,ys=u[0],Ls=c[1])}return Ip=yf=null,ys===1/0||El===1/0?[[NaN,NaN],[NaN,NaN]]:[[ys,El],[Ls,dc]]}var QC,fk,pk,gk,mk,vk,yk,_k,sB,oB,aB,lre,cre,tl,nl,il,Yu={sphere:vs,point:lB,lineStart:ure,lineEnd:hre,polygonStart:function(){Yu.lineStart=LHe,Yu.lineEnd=BHe},polygonEnd:function(){Yu.lineStart=ure,Yu.lineEnd=hre}};function lB(l,o){l*=Wn;var a=Pn(o*=Wn);jC(a*Pn(l),a*wn(l),wn(o))}function jC(l,o,a){++QC,pk+=(l-pk)/QC,gk+=(o-gk)/QC,mk+=(a-mk)/QC}function ure(){Yu.point=FHe}function FHe(l,o){l*=Wn;var a=Pn(o*=Wn);tl=a*Pn(l),nl=a*wn(l),il=wn(o),Yu.point=NHe,jC(tl,nl,il)}function NHe(l,o){l*=Wn;var a=Pn(o*=Wn),c=a*Pn(l),u=a*wn(l),h=wn(o),d=Ja(Uo((d=nl*h-il*u)*d+(d=il*c-tl*h)*d+(d=tl*u-nl*c)*d),tl*c+nl*u+il*h);fk+=d,vk+=d*(tl+(tl=c)),yk+=d*(nl+(nl=u)),_k+=d*(il+(il=h)),jC(tl,nl,il)}function hre(){Yu.point=lB}function LHe(){Yu.point=VHe}function BHe(){dre(lre,cre),Yu.point=lB}function VHe(l,o){lre=l,cre=o,l*=Wn,o*=Wn,Yu.point=dre;var a=Pn(o);tl=a*Pn(l),nl=a*wn(l),il=wn(o),jC(tl,nl,il)}function dre(l,o){l*=Wn;var a=Pn(o*=Wn),c=a*Pn(l),u=a*wn(l),h=wn(o),d=nl*h-il*u,f=il*c-tl*h,p=tl*u-nl*c,g=X5(d,f,p),m=el(g),v=g&&-m/g;sB.add(v*d),oB.add(v*f),aB.add(v*p),fk+=m,vk+=m*(tl+(tl=c)),yk+=m*(nl+(nl=u)),_k+=m*(il+(il=h)),jC(tl,nl,il)}function zHe(l){QC=fk=pk=gk=mk=vk=yk=_k=0,sB=new wo,oB=new wo,aB=new wo,Xu(l,Yu);var o=+sB,a=+oB,c=+aB,u=X5(o,a,c);return u<WC&&(o=vk,a=yk,c=_k,fk<$n&&(o=pk,a=gk,c=mk),(u=X5(o,a,c))<WC)?[NaN,NaN]:[Ja(a,o)*Lr,el(c/u)*Lr]}function p_(l){return function(){return l}}function cB(l,o){function a(c,u){return c=l(c,u),o(c[0],c[1])}return l.invert&&o.invert&&(a.invert=function(c,u){return(c=o.invert(c,u))&&l.invert(c[0],c[1])}),a}function uB(l,o){return[Ji(l)>Vi?l+Math.round(-l/Ka)*Ka:l,o]}function hB(l,o,a){return(l%=Ka)?o||a?cB(pre(l),gre(o,a)):pre(l):o||a?gre(o,a):uB}function fre(l){return function(o,a){return[(o+=l)>Vi?o-Ka:o<-Vi?o+Ka:o,a]}}function pre(l){var o=fre(l);return o.invert=fre(-l),o}function gre(l,o){var a=Pn(l),c=wn(l),u=Pn(o),h=wn(o);function d(f,p){var g=Pn(p),m=Pn(f)*g,v=wn(f)*g,y=wn(p),_=y*a+m*c;return[Ja(v*u-_*h,m*a-y*c),el(_*u+v*h)]}return d.invert=function(f,p){var g=Pn(p),m=Pn(f)*g,v=wn(f)*g,y=wn(p),_=y*u-v*h;return[Ja(v*u+y*h,m*a+_*c),el(_*a-m*c)]},d}function mre(l){function o(a){return(a=l(a[0]*Wn,a[1]*Wn))[0]*=Lr,a[1]*=Lr,a}return l=hB(l[0]*Wn,l[1]*Wn,l.length>2?l[2]*Wn:0),o.invert=function(a){return(a=l.invert(a[0]*Wn,a[1]*Wn))[0]*=Lr,a[1]*=Lr,a},o}function vre(l,o,a,c,u,h){if(a){var d=Pn(o),f=wn(o),p=c*a;null==u?(u=o+c*Ka,h=o-p/2):(u=yre(d,u),h=yre(d,h),(c>0?u<h:u>h)&&(u+=c*Ka));for(var g,m=u;c>0?m>h:m<h;m-=p)g=ck([d,-f*Pn(m),-f*wn(m)]),l.point(g[0],g[1])}}function yre(l,o){(o=Wm(o))[0]-=l,dk(o);var a=jie(-o[1]);return((-o[2]<0?-a:a)+Ka-$n)%Ka}function UHe(){var c,u,l=p_([0,0]),o=p_(90),a=p_(6),h={point:function d(p,g){c.push(p=u(p,g)),p[0]*=Lr,p[1]*=Lr}};function f(){var p=l.apply(this,arguments),g=o.apply(this,arguments)*Wn,m=a.apply(this,arguments)*Wn;return c=[],u=hB(-p[0]*Wn,-p[1]*Wn,0).invert,vre(h,g,m,1),p={type:"Polygon",coordinates:[c]},c=u=null,p}return f.center=function(p){return arguments.length?(l="function"==typeof p?p:p_([+p[0],+p[1]]),f):l},f.radius=function(p){return arguments.length?(o="function"==typeof p?p:p_(+p),f):o},f.precision=function(p){return arguments.length?(a="function"==typeof p?p:p_(+p),f):a},f}function _re(){var o,l=[];return{point:function(a,c,u){o.push([a,c,u])},lineStart:function(){l.push(o=[])},lineEnd:vs,rejoin:function(){l.length>1&&l.push(l.pop().concat(l.shift()))},result:function(){var a=l;return l=[],o=null,a}}}function bk(l,o){return Ji(l[0]-o[0])<$n&&Ji(l[1]-o[1])<$n}function xk(l,o,a,c){this.x=l,this.z=o,this.o=a,this.e=c,this.v=!1,this.n=this.p=null}function bre(l,o,a,c,u){var f,p,h=[],d=[];if(l.forEach(function(b){if(!((C=b.length-1)<=0)){var C,w,x=b[0],S=b[C];if(bk(x,S)){if(!x[2]&&!S[2]){for(u.lineStart(),f=0;f<C;++f)u.point((x=b[f])[0],x[1]);return void u.lineEnd()}S[0]+=2*$n}h.push(w=new xk(x,b,null,!0)),d.push(w.o=new xk(x,null,w,!1)),h.push(w=new xk(S,b,null,!1)),d.push(w.o=new xk(S,null,w,!0))}}),h.length){for(d.sort(o),xre(h),xre(d),f=0,p=d.length;f<p;++f)d[f].e=a=!a;for(var m,v,g=h[0];;){for(var y=g,_=!0;y.v;)if((y=y.n)===g)return;m=y.z,u.lineStart();do{if(y.v=y.o.v=!0,y.e){if(_)for(f=0,p=m.length;f<p;++f)u.point((v=m[f])[0],v[1]);else c(y.x,y.n.x,1,u);y=y.n}else{if(_)for(f=(m=y.p.z).length-1;f>=0;--f)u.point((v=m[f])[0],v[1]);else c(y.x,y.p.x,-1,u);y=y.p}m=(y=y.o).z,_=!_}while(!y.v);u.lineEnd()}}}function xre(l){if(o=l.length){for(var o,u,a=0,c=l[0];++a<o;)c.n=u=l[a],u.p=c,c=u;c.n=u=l[0],u.p=c}}function dB(l){return Ji(l[0])<=Vi?l[0]:Jc(l[0])*((Ji(l[0])+Vi)%Ka-Vi)}function Cre(l,o){var a=dB(o),c=o[1],u=wn(c),h=[wn(a),-Pn(a),0],d=0,f=0,p=new wo;1===u?c=Ns+$n:-1===u&&(c=-Ns-$n);for(var g=0,m=l.length;g<m;++g)if(y=(v=l[g]).length)for(var v,y,_=v[y-1],b=dB(_),C=_[1]/2+ik,x=wn(C),S=Pn(C),w=0;w<y;++w,b=T,x=A,S=I,_=O){var O=v[w],T=dB(O),M=O[1]/2+ik,A=wn(M),I=Pn(M),E=T-b,P=E>=0?1:-1,B=P*E,V=B>Vi,Q=x*A;if(p.add(Ja(Q*P*wn(B),S*I+Q*Pn(B))),d+=V?E+P*Ka:E,V^b>=a^T>=a){var j=d_(Wm(_),Wm(O));dk(j);var N=d_(h,j);dk(N);var U=(V^E>=0?-1:1)*el(N[2]);(c>U||c===U&&(j[0]||j[1]))&&(f+=V^E>=0?1:-1)}}return(d<-$n||d<$n&&p<-WC)^1&f}function Sre(l,o,a,c){return function(u){var g,m,v,h=o(u),d=_re(),f=o(d),p=!1,y={point:_,lineStart:C,lineEnd:x,polygonStart:function(){y.point=S,y.lineStart=w,y.lineEnd=O,m=[],g=[]},polygonEnd:function(){y.point=_,y.lineStart=C,y.lineEnd=x,m=vL(m);var T=Cre(g,c);m.length?(p||(u.polygonStart(),p=!0),bre(m,$He,T,a,u)):T&&(p||(u.polygonStart(),p=!0),u.lineStart(),a(null,null,1,u),u.lineEnd()),p&&(u.polygonEnd(),p=!1),m=g=null},sphere:function(){u.polygonStart(),u.lineStart(),a(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function _(T,M){l(T,M)&&u.point(T,M)}function b(T,M){h.point(T,M)}function C(){y.point=b,h.lineStart()}function x(){y.point=_,h.lineEnd()}function S(T,M){v.push([T,M]),f.point(T,M)}function w(){f.lineStart(),v=[]}function O(){S(v[0][0],v[0][1]),f.lineEnd();var A,E,P,B,T=f.clean(),M=d.result(),I=M.length;if(v.pop(),g.push(v),v=null,I){if(1&T){if((E=(P=M[0]).length-1)>0){for(p||(u.polygonStart(),p=!0),u.lineStart(),A=0;A<E;++A)u.point((B=P[A])[0],B[1]);u.lineEnd()}return}I>1&&2&T&&M.push(M.pop().concat(M.shift())),m.push(M.filter(HHe))}}return y}}function HHe(l){return l.length>1}function $He(l,o){return((l=l.x)[0]<0?l[1]-Ns-$n:Ns-l[1])-((o=o.x)[0]<0?o[1]-Ns-$n:Ns-o[1])}uB.invert=uB;const fB=Sre(function(){return!0},function WHe(l){var u,o=NaN,a=NaN,c=NaN;return{lineStart:function(){l.lineStart(),u=1},point:function(h,d){var f=h>0?Vi:-Vi,p=Ji(h-o);Ji(p-Vi)<$n?(l.point(o,a=(a+d)/2>0?Ns:-Ns),l.point(c,a),l.lineEnd(),l.lineStart(),l.point(f,a),l.point(h,a),u=0):c!==f&&p>=Vi&&(Ji(o-c)<$n&&(o-=c*$n),Ji(h-f)<$n&&(h-=f*$n),a=function GHe(l,o,a,c){var u,h,d=wn(l-a);return Ji(d)>$n?h_((wn(o)*(h=Pn(c))*wn(a)-wn(c)*(u=Pn(o))*wn(l))/(u*h*d)):(o+c)/2}(o,a,h,d),l.point(c,a),l.lineEnd(),l.lineStart(),l.point(f,a),u=0),l.point(o=h,a=d),c=f},lineEnd:function(){l.lineEnd(),o=a=NaN},clean:function(){return 2-u}}},function QHe(l,o,a,c){var u;if(null==l)c.point(-Vi,u=a*Ns),c.point(0,u),c.point(Vi,u),c.point(Vi,0),c.point(Vi,-u),c.point(0,-u),c.point(-Vi,-u),c.point(-Vi,0),c.point(-Vi,u);else if(Ji(l[0]-o[0])>$n){var h=l[0]<o[0]?Vi:-Vi;c.point(-h,u=a*h/2),c.point(0,u),c.point(h,u)}else c.point(o[0],o[1])},[-Vi,-Ns]);function wre(l){var o=Pn(l),a=6*Wn,c=o>0,u=Ji(o)>$n;function d(m,v){return Pn(m)*Pn(v)>o}function p(m,v,y){var C=[1,0,0],x=d_(Wm(m),Wm(v)),S=uk(x,x),w=x[0],O=S-w*w;if(!O)return!y&&m;var T=o*S/O,M=-o*w/O,A=d_(C,x),I=hk(C,T);iB(I,hk(x,M));var P=A,B=uk(I,P),V=uk(P,P),Q=B*B-V*(uk(I,I)-1);if(!(Q<0)){var j=Uo(Q),N=hk(P,(-B-j)/V);if(iB(N,I),N=ck(N),!y)return N;var G,U=m[0],z=v[0],$=m[1],H=v[1];z<U&&(G=U,U=z,z=G);var W=z-U,X=Ji(W-Vi)<$n;if(!X&&H<$&&(G=$,$=H,H=G),X||W<$n?X?$+H>0^N[1]<(Ji(N[0]-U)<$n?$:H):$<=N[1]&&N[1]<=H:W>Vi^(U<=N[0]&&N[0]<=z)){var ae=hk(P,(-B+j)/V);return iB(ae,I),[N,ck(ae)]}}}function g(m,v){var y=c?l:Vi-l,_=0;return m<-y?_|=1:m>y&&(_|=2),v<-y?_|=4:v>y&&(_|=8),_}return Sre(d,function f(m){var v,y,_,b,C;return{lineStart:function(){b=_=!1,C=1},point:function(x,S){var O,w=[x,S],T=d(x,S),M=c?T?0:g(x,S):T?g(x+(x<0?Vi:-Vi),S):0;if(!v&&(b=_=T)&&m.lineStart(),T!==_&&(!(O=p(v,w))||bk(v,O)||bk(w,O))&&(w[2]=1),T!==_)C=0,T?(m.lineStart(),O=p(w,v),m.point(O[0],O[1])):(O=p(v,w),m.point(O[0],O[1],2),m.lineEnd()),v=O;else if(u&&v&&c^T){var A;!(M&y)&&(A=p(w,v,!0))&&(C=0,c?(m.lineStart(),m.point(A[0][0],A[0][1]),m.point(A[1][0],A[1][1]),m.lineEnd()):(m.point(A[1][0],A[1][1]),m.lineEnd(),m.lineStart(),m.point(A[0][0],A[0][1],3)))}T&&(!v||!bk(v,w))&&m.point(w[0],w[1]),v=w,_=T,y=M},lineEnd:function(){_&&m.lineEnd(),v=null},clean:function(){return C|(b&&_)<<1}}},function h(m,v,y,_){vre(_,l,a,y,m,v)},c?[0,-l]:[-Vi,l-Vi])}var qC=1e9,Ck=-qC;function Sk(l,o,a,c){function u(g,m){return l<=g&&g<=a&&o<=m&&m<=c}function h(g,m,v,y){var _=0,b=0;if(null==g||(_=d(g,v))!==(b=d(m,v))||p(g,m)<0^v>0)do{y.point(0===_||3===_?l:a,_>1?c:o)}while((_=(_+v+4)%4)!==b);else y.point(m[0],m[1])}function d(g,m){return Ji(g[0]-l)<$n?m>0?0:3:Ji(g[0]-a)<$n?m>0?2:1:Ji(g[1]-o)<$n?m>0?1:0:m>0?3:2}function f(g,m){return p(g.x,m.x)}function p(g,m){var v=d(g,1),y=d(m,1);return v!==y?v-y:0===v?m[1]-g[1]:1===v?g[0]-m[0]:2===v?g[1]-m[1]:m[0]-g[0]}return function(g){var y,_,b,C,x,S,w,O,T,M,A,m=g,v=_re(),I={point:E,lineStart:function Q(){I.point=N,_&&_.push(b=[]),M=!0,T=!1,w=O=NaN},lineEnd:function j(){y&&(N(C,x),S&&T&&v.rejoin(),y.push(v.result())),I.point=E,T&&m.lineEnd()},polygonStart:function B(){m=v,y=[],_=[],A=!0},polygonEnd:function V(){var U=function P(){for(var U=0,z=0,$=_.length;z<$;++z)for(var K,ae,H=_[z],G=1,W=H.length,X=H[0],se=X[0],Ce=X[1];G<W;++G)K=se,ae=Ce,se=(X=H[G])[0],Ce=X[1],ae<=c?Ce>c&&(se-K)*(c-ae)>(Ce-ae)*(l-K)&&++U:Ce<=c&&(se-K)*(c-ae)<(Ce-ae)*(l-K)&&--U;return U}(),z=A&&U,$=(y=vL(y)).length;(z||$)&&(g.polygonStart(),z&&(g.lineStart(),h(null,null,1,g),g.lineEnd()),$&&bre(y,f,U,h,g),g.polygonEnd()),m=g,y=_=b=null}};function E(U,z){u(U,z)&&m.point(U,z)}function N(U,z){var $=u(U,z);if(_&&b.push([U,z]),M)C=U,x=z,S=$,M=!1,$&&(m.lineStart(),m.point(U,z));else if($&&T)m.point(U,z);else{var H=[w=Math.max(Ck,Math.min(qC,w)),O=Math.max(Ck,Math.min(qC,O))],G=[U=Math.max(Ck,Math.min(qC,U)),z=Math.max(Ck,Math.min(qC,z))];!function jHe(l,o,a,c,u,h){var b,d=l[0],f=l[1],m=0,v=1,y=o[0]-d,_=o[1]-f;if(b=a-d,y||!(b>0)){if(b/=y,y<0){if(b<m)return;b<v&&(v=b)}else if(y>0){if(b>v)return;b>m&&(m=b)}if(b=u-d,y||!(b<0)){if(b/=y,y<0){if(b>v)return;b>m&&(m=b)}else if(y>0){if(b<m)return;b<v&&(v=b)}if(b=c-f,_||!(b>0)){if(b/=_,_<0){if(b<m)return;b<v&&(v=b)}else if(_>0){if(b>v)return;b>m&&(m=b)}if(b=h-f,_||!(b<0)){if(b/=_,_<0){if(b>v)return;b>m&&(m=b)}else if(_>0){if(b<m)return;b<v&&(v=b)}return m>0&&(l[0]=d+m*y,l[1]=f+m*_),v<1&&(o[0]=d+v*y,o[1]=f+v*_),!0}}}}}(H,G,l,o,a,c)?$&&(m.lineStart(),m.point(U,z),A=!1):(T||(m.lineStart(),m.point(H[0],H[1])),m.point(G[0],G[1]),$||m.lineEnd(),A=!1)}w=U,O=z,T=$}return I}}function qHe(){var u,h,d,l=0,o=0,a=960,c=500;return d={stream:function(f){return u&&h===f?u:u=Sk(l,o,a,c)(h=f)},extent:function(f){return arguments.length?(l=+f[0][0],o=+f[0][1],a=+f[1][0],c=+f[1][1],u=h=null,d):[[l,o],[a,c]]}}}var pB,gB,wk,Tk,g_={sphere:vs,point:vs,lineStart:function ZHe(){g_.point=YHe,g_.lineEnd=XHe},lineEnd:vs,polygonStart:vs,polygonEnd:vs};function XHe(){g_.point=g_.lineEnd=vs}function YHe(l,o){gB=l*=Wn,wk=wn(o*=Wn),Tk=Pn(o),g_.point=KHe}function KHe(l,o){l*=Wn;var a=wn(o*=Wn),c=Pn(o),u=Ji(l-gB),h=Pn(u),f=c*wn(u),p=Tk*a-wk*c*h,g=wk*a+Tk*c*h;pB.add(Ja(Uo(f*f+p*p),g)),gB=l,wk=a,Tk=c}function Tre(l){return pB=new wo,Xu(l,g_),+pB}var mB=[null,null],JHe={type:"LineString",coordinates:mB};function Ok(l,o){return mB[0]=l,mB[1]=o,Tre(JHe)}var Ore={Feature:function(l,o){return Dk(l.geometry,o)},FeatureCollection:function(l,o){for(var a=l.features,c=-1,u=a.length;++c<u;)if(Dk(a[c].geometry,o))return!0;return!1}},Dre={Sphere:function(){return!0},Point:function(l,o){return kre(l.coordinates,o)},MultiPoint:function(l,o){for(var a=l.coordinates,c=-1,u=a.length;++c<u;)if(kre(a[c],o))return!0;return!1},LineString:function(l,o){return Mre(l.coordinates,o)},MultiLineString:function(l,o){for(var a=l.coordinates,c=-1,u=a.length;++c<u;)if(Mre(a[c],o))return!0;return!1},Polygon:function(l,o){return Ere(l.coordinates,o)},MultiPolygon:function(l,o){for(var a=l.coordinates,c=-1,u=a.length;++c<u;)if(Ere(a[c],o))return!0;return!1},GeometryCollection:function(l,o){for(var a=l.geometries,c=-1,u=a.length;++c<u;)if(Dk(a[c],o))return!0;return!1}};function Dk(l,o){return!(!l||!Dre.hasOwnProperty(l.type))&&Dre[l.type](l,o)}function kre(l,o){return 0===Ok(l,o)}function Mre(l,o){for(var a,c,u,h=0,d=l.length;h<d;h++){if(0===(c=Ok(l[h],o))||h>0&&(u=Ok(l[h],l[h-1]))>0&&a<=u&&c<=u&&(a+c-u)*(1-Math.pow((a-c)/u,2))<WC*u)return!0;a=c}return!1}function Ere(l,o){return!!Cre(l.map(e9e),Are(o))}function e9e(l){return(l=l.map(Are)).pop(),l}function Are(l){return[l[0]*Wn,l[1]*Wn]}function t9e(l,o){return(l&&Ore.hasOwnProperty(l.type)?Ore[l.type]:Dk)(l,o)}function Ire(l,o,a){var c=rc(l,o-$n,a).concat(o);return function(u){return c.map(function(h){return[u,h]})}}function Pre(l,o,a){var c=rc(l,o-$n,a).concat(o);return function(u){return c.map(function(h){return[h,u]})}}function Rre(){var l,o,a,c,u,h,d,f,y,_,b,C,p=10,g=p,m=90,v=360,x=2.5;function S(){return{type:"MultiLineString",coordinates:w()}}function w(){return rc(rk(c/m)*m,a,m).map(b).concat(rc(rk(f/v)*v,d,v).map(C)).concat(rc(rk(o/p)*p,l,p).filter(function(O){return Ji(O%m)>$n}).map(y)).concat(rc(rk(h/g)*g,u,g).filter(function(O){return Ji(O%v)>$n}).map(_))}return S.lines=function(){return w().map(function(O){return{type:"LineString",coordinates:O}})},S.outline=function(){return{type:"Polygon",coordinates:[b(c).concat(C(d).slice(1),b(a).reverse().slice(1),C(f).reverse().slice(1))]}},S.extent=function(O){return arguments.length?S.extentMajor(O).extentMinor(O):S.extentMinor()},S.extentMajor=function(O){return arguments.length?(f=+O[0][1],d=+O[1][1],(c=+O[0][0])>(a=+O[1][0])&&(O=c,c=a,a=O),f>d&&(O=f,f=d,d=O),S.precision(x)):[[c,f],[a,d]]},S.extentMinor=function(O){return arguments.length?(h=+O[0][1],u=+O[1][1],(o=+O[0][0])>(l=+O[1][0])&&(O=o,o=l,l=O),h>u&&(O=h,h=u,u=O),S.precision(x)):[[o,h],[l,u]]},S.step=function(O){return arguments.length?S.stepMajor(O).stepMinor(O):S.stepMinor()},S.stepMajor=function(O){return arguments.length?(m=+O[0],v=+O[1],S):[m,v]},S.stepMinor=function(O){return arguments.length?(p=+O[0],g=+O[1],S):[p,g]},S.precision=function(O){return arguments.length?(x=+O,y=Ire(h,u,90),_=Pre(o,l,x),b=Ire(f,d,90),C=Pre(c,a,x),S):x},S.extentMajor([[-180,-90+$n],[180,90-$n]]).extentMinor([[-180,-80-$n],[180,80+$n]])}function n9e(){return Rre()()}function i9e(l,o){var a=l[0]*Wn,c=l[1]*Wn,u=o[0]*Wn,h=o[1]*Wn,d=Pn(c),f=wn(c),p=Pn(h),g=wn(h),m=d*Pn(a),v=d*wn(a),y=p*Pn(u),_=p*wn(u),b=2*el(Uo(qie(h-c)+d*p*qie(u-a))),C=wn(b),x=b?function(S){var w=wn(S*=b)/C,O=wn(b-S)/C,T=O*m+w*y,M=O*v+w*_,A=O*f+w*g;return[Ja(M,T)*Lr,Ja(A,Uo(T*T+M*M))*Lr]}:function(){return[a*Lr,c*Lr]};return x.distance=b,x}const ZC=l=>l;var Fre,Nre,_B,bB,vB=new wo,yB=new wo,Pp={point:vs,lineStart:vs,lineEnd:vs,polygonStart:function(){Pp.lineStart=r9e,Pp.lineEnd=o9e},polygonEnd:function(){Pp.lineStart=Pp.lineEnd=Pp.point=vs,vB.add(Ji(yB)),yB=new wo},result:function(){var l=vB/2;return vB=new wo,l}};function r9e(){Pp.point=s9e}function s9e(l,o){Pp.point=Lre,Fre=_B=l,Nre=bB=o}function Lre(l,o){yB.add(bB*l-_B*o),_B=l,bB=o}function o9e(){Lre(Fre,Nre)}const Bre=Pp;var m_=1/0,kk=m_,XC=-m_,Mk=XC,a9e={point:function l9e(l,o){l<m_&&(m_=l),l>XC&&(XC=l),o<kk&&(kk=o),o>Mk&&(Mk=o)},lineStart:vs,lineEnd:vs,polygonStart:vs,polygonEnd:vs,result:function(){var l=[[m_,kk],[XC,Mk]];return XC=Mk=-(kk=m_=1/0),l}};const Ek=a9e;var Vre,zre,td,nd,xB=0,CB=0,YC=0,Ak=0,Ik=0,v_=0,SB=0,wB=0,KC=0,Ku={point:Qm,lineStart:Ure,lineEnd:Hre,polygonStart:function(){Ku.lineStart=h9e,Ku.lineEnd=d9e},polygonEnd:function(){Ku.point=Qm,Ku.lineStart=Ure,Ku.lineEnd=Hre},result:function(){var l=KC?[SB/KC,wB/KC]:v_?[Ak/v_,Ik/v_]:YC?[xB/YC,CB/YC]:[NaN,NaN];return xB=CB=YC=Ak=Ik=v_=SB=wB=KC=0,l}};function Qm(l,o){xB+=l,CB+=o,++YC}function Ure(){Ku.point=c9e}function c9e(l,o){Ku.point=u9e,Qm(td=l,nd=o)}function u9e(l,o){var a=l-td,c=o-nd,u=Uo(a*a+c*c);Ak+=u*(td+l)/2,Ik+=u*(nd+o)/2,v_+=u,Qm(td=l,nd=o)}function Hre(){Ku.point=Qm}function h9e(){Ku.point=f9e}function d9e(){$re(Vre,zre)}function f9e(l,o){Ku.point=$re,Qm(Vre=td=l,zre=nd=o)}function $re(l,o){var a=l-td,c=o-nd,u=Uo(a*a+c*c);Ak+=u*(td+l)/2,Ik+=u*(nd+o)/2,v_+=u,SB+=(u=nd*l-td*o)*(td+l),wB+=u*(nd+o),KC+=3*u,Qm(td=l,nd=o)}const Wre=Ku;function Gre(l){this._context=l}Gre.prototype={_radius:4.5,pointRadius:function(l){return this._radius=l,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(l,o){switch(this._point){case 0:this._context.moveTo(l,o),this._point=1;break;case 1:this._context.lineTo(l,o);break;default:this._context.moveTo(l+this._radius,o),this._context.arc(l,o,this._radius,0,Ka)}},result:vs};var OB,Qre,jre,JC,eS,TB=new wo,Pk={point:vs,lineStart:function(){Pk.point=p9e},lineEnd:function(){OB&&qre(Qre,jre),Pk.point=vs},polygonStart:function(){OB=!0},polygonEnd:function(){OB=null},result:function(){var l=+TB;return TB=new wo,l}};function p9e(l,o){Pk.point=qre,Qre=JC=l,jre=eS=o}function qre(l,o){TB.add(Uo((JC-=l)*JC+(eS-=o)*eS)),JC=l,eS=o}const Zre=Pk;function Xre(){this._string=[]}function Yre(l){return"m0,"+l+"a"+l+","+l+" 0 1,1 0,"+-2*l+"a"+l+","+l+" 0 1,1 0,"+2*l+"z"}function g9e(l,o){var c,u,a=4.5;function h(d){return d&&("function"==typeof a&&u.pointRadius(+a.apply(this,arguments)),Xu(d,c(u))),u.result()}return h.area=function(d){return Xu(d,c(Bre)),Bre.result()},h.measure=function(d){return Xu(d,c(Zre)),Zre.result()},h.bounds=function(d){return Xu(d,c(Ek)),Ek.result()},h.centroid=function(d){return Xu(d,c(Wre)),Wre.result()},h.projection=function(d){return arguments.length?(c=null==d?(l=null,ZC):(l=d).stream,h):l},h.context=function(d){return arguments.length?(u=null==d?(o=null,new Xre):new Gre(o=d),"function"!=typeof a&&u.pointRadius(a),h):o},h.pointRadius=function(d){return arguments.length?(a="function"==typeof d?d:(u.pointRadius(+d),+d),h):a},h.projection(l).context(o)}function m9e(l){return{stream:tS(l)}}function tS(l){return function(o){var a=new DB;for(var c in l)a[c]=l[c];return a.stream=o,a}}function DB(){}function kB(l,o,a){var c=l.clipExtent&&l.clipExtent();return l.scale(150).translate([0,0]),null!=c&&l.clipExtent(null),Xu(a,l.stream(Ek)),o(Ek.result()),null!=c&&l.clipExtent(c),l}function Rk(l,o,a){return kB(l,function(c){var u=o[1][0]-o[0][0],h=o[1][1]-o[0][1],d=Math.min(u/(c[1][0]-c[0][0]),h/(c[1][1]-c[0][1])),f=+o[0][0]+(u-d*(c[1][0]+c[0][0]))/2,p=+o[0][1]+(h-d*(c[1][1]+c[0][1]))/2;l.scale(150*d).translate([f,p])},a)}function MB(l,o,a){return Rk(l,[[0,0],o],a)}function EB(l,o,a){return kB(l,function(c){var u=+o,h=u/(c[1][0]-c[0][0]),d=(u-h*(c[1][0]+c[0][0]))/2,f=-h*c[0][1];l.scale(150*h).translate([d,f])},a)}function AB(l,o,a){return kB(l,function(c){var u=+o,h=u/(c[1][1]-c[0][1]),d=-h*c[0][0],f=(u-h*(c[1][1]+c[0][1]))/2;l.scale(150*h).translate([d,f])},a)}Xre.prototype={_radius:4.5,_circle:Yre(4.5),pointRadius:function(l){return(l=+l)!==this._radius&&(this._radius=l,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(l,o){switch(this._point){case 0:this._string.push("M",l,",",o),this._point=1;break;case 1:this._string.push("L",l,",",o);break;default:null==this._circle&&(this._circle=Yre(this._radius)),this._string.push("M",l,",",o,this._circle)}},result:function(){if(this._string.length){var l=this._string.join("");return this._string=[],l}return null}},DB.prototype={constructor:DB,point:function(l,o){this.stream.point(l,o)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var v9e=Pn(30*Wn);function Jre(l,o){return+o?function _9e(l,o){function a(c,u,h,d,f,p,g,m,v,y,_,b,C,x){var S=g-c,w=m-u,O=S*S+w*w;if(O>4*o&&C--){var T=d+y,M=f+_,A=p+b,I=Uo(T*T+M*M+A*A),E=el(A/=I),P=Ji(Ji(A)-1)<$n||Ji(h-v)<$n?(h+v)/2:Ja(M,T),B=l(P,E),V=B[0],Q=B[1],j=V-c,N=Q-u,U=w*j-S*N;(U*U/O>o||Ji((S*j+w*N)/O-.5)>.3||d*y+f*_+p*b<v9e)&&(a(c,u,h,d,f,p,V,Q,P,T/=I,M/=I,A,C,x),x.point(V,Q),a(V,Q,P,T,M,A,g,m,v,y,_,b,C,x))}}return function(c){var u,h,d,f,p,g,m,v,y,_,b,C,x={point:S,lineStart:w,lineEnd:T,polygonStart:function(){c.polygonStart(),x.lineStart=M},polygonEnd:function(){c.polygonEnd(),x.lineStart=w}};function S(E,P){E=l(E,P),c.point(E[0],E[1])}function w(){v=NaN,x.point=O,c.lineStart()}function O(E,P){var B=Wm([E,P]),V=l(E,P);a(v,y,m,_,b,C,v=V[0],y=V[1],m=E,_=B[0],b=B[1],C=B[2],16,c),c.point(v,y)}function T(){x.point=S,c.lineEnd()}function M(){w(),x.point=A,x.lineEnd=I}function A(E,P){O(u=E,P),h=v,d=y,f=_,p=b,g=C,x.point=O}function I(){a(v,y,m,_,b,C,h,d,u,f,p,g,16,c),x.lineEnd=T,T()}return x}}(l,o):function y9e(l){return tS({point:function(o,a){o=l(o,a),this.stream.point(o[0],o[1])}})}(l)}var b9e=tS({point:function(l,o){this.stream.point(l*Wn,o*Wn)}});function ese(l,o,a,c,u,h){if(!h)return function C9e(l,o,a,c,u){function h(d,f){return[o+l*(d*=c),a-l*(f*=u)]}return h.invert=function(d,f){return[(d-o)/l*c,(a-f)/l*u]},h}(l,o,a,c,u);var d=Pn(h),f=wn(h),p=d*l,g=f*l,m=d/l,v=f/l,y=(f*a-d*o)/l,_=(f*o+d*a)/l;function b(C,x){return[p*(C*=c)-g*(x*=u)+o,a-g*C-p*x]}return b.invert=function(C,x){return[c*(m*C-v*x+y),u*(_-v*C-m*x)]},b}function id(l){return IB(function(){return l})()}function IB(l){var o,m,S,w,O,A,I,E,P,B,a=150,c=480,u=250,h=0,d=0,f=0,p=0,g=0,v=0,y=1,_=1,b=null,C=fB,x=null,T=ZC,M=.5;function V(U){return E(U[0]*Wn,U[1]*Wn)}function Q(U){return(U=E.invert(U[0],U[1]))&&[U[0]*Lr,U[1]*Lr]}function j(){var U=ese(a,0,0,y,_,v).apply(null,o(h,d)),z=ese(a,c-U[0],u-U[1],y,_,v);return m=hB(f,p,g),I=cB(o,z),E=cB(m,I),A=Jre(I,M),N()}function N(){return P=B=null,V}return V.stream=function(U){return P&&B===U?P:P=b9e(function x9e(l){return tS({point:function(o,a){var c=l(o,a);return this.stream.point(c[0],c[1])}})}(m)(C(A(T(B=U)))))},V.preclip=function(U){return arguments.length?(C=U,b=void 0,N()):C},V.postclip=function(U){return arguments.length?(T=U,x=S=w=O=null,N()):T},V.clipAngle=function(U){return arguments.length?(C=+U?wre(b=U*Wn):(b=null,fB),N()):b*Lr},V.clipExtent=function(U){return arguments.length?(T=null==U?(x=S=w=O=null,ZC):Sk(x=+U[0][0],S=+U[0][1],w=+U[1][0],O=+U[1][1]),N()):null==x?null:[[x,S],[w,O]]},V.scale=function(U){return arguments.length?(a=+U,j()):a},V.translate=function(U){return arguments.length?(c=+U[0],u=+U[1],j()):[c,u]},V.center=function(U){return arguments.length?(h=U[0]%360*Wn,d=U[1]%360*Wn,j()):[h*Lr,d*Lr]},V.rotate=function(U){return arguments.length?(f=U[0]%360*Wn,p=U[1]%360*Wn,g=U.length>2?U[2]%360*Wn:0,j()):[f*Lr,p*Lr,g*Lr]},V.angle=function(U){return arguments.length?(v=U%360*Wn,j()):v*Lr},V.reflectX=function(U){return arguments.length?(y=U?-1:1,j()):y<0},V.reflectY=function(U){return arguments.length?(_=U?-1:1,j()):_<0},V.precision=function(U){return arguments.length?(A=Jre(I,M=U*U),N()):Uo(M)},V.fitExtent=function(U,z){return Rk(V,U,z)},V.fitSize=function(U,z){return MB(V,U,z)},V.fitWidth=function(U,z){return EB(V,U,z)},V.fitHeight=function(U,z){return AB(V,U,z)},function(){return o=l.apply(this,arguments),V.invert=o.invert&&Q,j()}}function PB(l){var o=0,a=Vi/3,c=IB(l),u=c(o,a);return u.parallels=function(h){return arguments.length?c(o=h[0]*Wn,a=h[1]*Wn):[o*Lr,a*Lr]},u}function tse(l,o){var a=wn(l),c=(a+wn(o))/2;if(Ji(c)<$n)return function S9e(l){var o=Pn(l);function a(c,u){return[c*o,wn(u)/o]}return a.invert=function(c,u){return[c/o,el(u*o)]},a}(l);var u=1+a*(2*c-a),h=Uo(u)/c;function d(f,p){var g=Uo(u-2*c*wn(p))/c;return[g*wn(f*=c),h-g*Pn(f)]}return d.invert=function(f,p){var g=h-p,m=Ja(f,Ji(g))*Jc(g);return g*c<0&&(m-=Vi*Jc(f)*Jc(g)),[m/c,el((u-(f*f+g*g)*c*c)/(2*c))]},d}function Fk(){return PB(tse).scale(155.424).center([0,33.6442])}function nse(){return Fk().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function T9e(){var l,o,c,h,f,p,a=nse(),u=Fk().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=Fk().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g={point:function(y,_){p=[y,_]}};function m(y){var _=y[0],b=y[1];return p=null,c.point(_,b),p||(h.point(_,b),p)||(f.point(_,b),p)}function v(){return l=o=null,m}return m.invert=function(y){var _=a.scale(),b=a.translate(),C=(y[0]-b[0])/_,x=(y[1]-b[1])/_;return(x>=.12&&x<.234&&C>=-.425&&C<-.214?u:x>=.166&&x<.234&&C>=-.214&&C<-.115?d:a).invert(y)},m.stream=function(y){return l&&o===y?l:l=function w9e(l){var o=l.length;return{point:function(a,c){for(var u=-1;++u<o;)l[u].point(a,c)},sphere:function(){for(var a=-1;++a<o;)l[a].sphere()},lineStart:function(){for(var a=-1;++a<o;)l[a].lineStart()},lineEnd:function(){for(var a=-1;++a<o;)l[a].lineEnd()},polygonStart:function(){for(var a=-1;++a<o;)l[a].polygonStart()},polygonEnd:function(){for(var a=-1;++a<o;)l[a].polygonEnd()}}}([a.stream(o=y),u.stream(y),d.stream(y)])},m.precision=function(y){return arguments.length?(a.precision(y),u.precision(y),d.precision(y),v()):a.precision()},m.scale=function(y){return arguments.length?(a.scale(y),u.scale(.35*y),d.scale(y),m.translate(a.translate())):a.scale()},m.translate=function(y){if(!arguments.length)return a.translate();var _=a.scale(),b=+y[0],C=+y[1];return c=a.translate(y).clipExtent([[b-.455*_,C-.238*_],[b+.455*_,C+.238*_]]).stream(g),h=u.translate([b-.307*_,C+.201*_]).clipExtent([[b-.425*_+$n,C+.12*_+$n],[b-.214*_-$n,C+.234*_-$n]]).stream(g),f=d.translate([b-.205*_,C+.212*_]).clipExtent([[b-.214*_+$n,C+.166*_+$n],[b-.115*_-$n,C+.234*_-$n]]).stream(g),v()},m.fitExtent=function(y,_){return Rk(m,y,_)},m.fitSize=function(y,_){return MB(m,y,_)},m.fitWidth=function(y,_){return EB(m,y,_)},m.fitHeight=function(y,_){return AB(m,y,_)},m.scale(1070)}function ise(l){return function(o,a){var c=Pn(o),u=Pn(a),h=l(c*u);return h===1/0?[2,0]:[h*u*wn(o),h*wn(a)]}}function nS(l){return function(o,a){var c=Uo(o*o+a*a),u=l(c),h=wn(u),d=Pn(u);return[Ja(o*h,c*d),el(c&&a*h/c)]}}var RB=ise(function(l){return Uo(2/(1+l))});function O9e(){return id(RB).scale(124.75).clipAngle(179.999)}RB.invert=nS(function(l){return 2*el(l/2)});var FB=ise(function(l){return(l=jie(l))&&l/wn(l)});function D9e(){return id(FB).scale(79.4188).clipAngle(179.999)}function iS(l,o){return[l,sk(K5((Ns+o)/2))]}function k9e(){return rse(iS).scale(961/Ka)}function rse(l){var f,p,g,o=id(l),a=o.center,c=o.scale,u=o.translate,h=o.clipExtent,d=null;function m(){var v=Vi*c(),y=o(mre(o.rotate()).invert([0,0]));return h(null==d?[[y[0]-v,y[1]-v],[y[0]+v,y[1]+v]]:l===iS?[[Math.max(y[0]-v,d),f],[Math.min(y[0]+v,p),g]]:[[d,Math.max(y[1]-v,f)],[p,Math.min(y[1]+v,g)]])}return o.scale=function(v){return arguments.length?(c(v),m()):c()},o.translate=function(v){return arguments.length?(u(v),m()):u()},o.center=function(v){return arguments.length?(a(v),m()):a()},o.clipExtent=function(v){return arguments.length?(null==v?d=f=p=g=null:(d=+v[0][0],f=+v[0][1],p=+v[1][0],g=+v[1][1]),m()):null==d?null:[[d,f],[p,g]]},m()}function Nk(l){return K5((Ns+l)/2)}function sse(l,o){var a=Pn(l),c=l===o?wn(l):sk(a/Pn(o))/sk(Nk(o)/Nk(l)),u=a*Y5(Nk(l),c)/c;if(!c)return iS;function h(d,f){u>0?f<-Ns+$n&&(f=-Ns+$n):f>Ns-$n&&(f=Ns-$n);var p=u/Y5(Nk(f),c);return[p*wn(c*d),u-p*Pn(c*d)]}return h.invert=function(d,f){var p=u-f,g=Jc(c)*Uo(d*d+p*p),m=Ja(d,Ji(p))*Jc(p);return p*c<0&&(m-=Vi*Jc(d)*Jc(p)),[m/c,2*h_(Y5(u/g,1/c))-Ns]},h}function M9e(){return PB(sse).scale(109.5).parallels([30,30])}function rS(l,o){return[l,o]}function E9e(){return id(rS).scale(152.63)}function ose(l,o){var a=Pn(l),c=l===o?wn(l):(a-Pn(o))/(o-l),u=a/c+l;if(Ji(c)<$n)return rS;function h(d,f){var p=u-f,g=c*d;return[p*wn(g),u-p*Pn(g)]}return h.invert=function(d,f){var p=u-f,g=Ja(d,Ji(p))*Jc(p);return p*c<0&&(g-=Vi*Jc(d)*Jc(p)),[g/c,u-Jc(c)*Uo(d*d+p*p)]},h}function A9e(){return PB(ose).scale(131.154).center([0,13.9389])}FB.invert=nS(function(l){return l}),iS.invert=function(l,o){return[l,2*h_(Qie(o))-Ns]},rS.invert=rS;var sS=1.340264,oS=-.081106,aS=893e-6,lS=.003796,Lk=Uo(3)/2;function NB(l,o){var a=el(Lk*wn(o)),c=a*a,u=c*c*c;return[l*Pn(a)/(Lk*(sS+3*oS*c+u*(7*aS+9*lS*c))),a*(sS+oS*c+u*(aS+lS*c))]}function P9e(){return id(NB).scale(177.158)}function LB(l,o){var a=Pn(o),c=Pn(l)*a;return[a*wn(l)/c,wn(o)/c]}function R9e(){return id(LB).scale(144.049).clipAngle(60)}function F9e(){var d,f,g,m,v,x,S,l=1,o=0,a=0,c=1,u=1,h=0,p=null,y=1,_=1,b=tS({point:function(T,M){var A=O([T,M]);this.stream.point(A[0],A[1])}}),C=ZC;function w(){return y=l*c,_=l*u,x=S=null,O}function O(T){var M=T[0]*y,A=T[1]*_;if(h){var I=A*d-M*f;M=M*d+A*f,A=I}return[M+o,A+a]}return O.invert=function(T){var M=T[0]-o,A=T[1]-a;if(h){var I=A*d+M*f;M=M*d-A*f,A=I}return[M/y,A/_]},O.stream=function(T){return x&&S===T?x:x=b(C(S=T))},O.postclip=function(T){return arguments.length?(C=T,p=g=m=v=null,w()):C},O.clipExtent=function(T){return arguments.length?(C=null==T?(p=g=m=v=null,ZC):Sk(p=+T[0][0],g=+T[0][1],m=+T[1][0],v=+T[1][1]),w()):null==p?null:[[p,g],[m,v]]},O.scale=function(T){return arguments.length?(l=+T,w()):l},O.translate=function(T){return arguments.length?(o=+T[0],a=+T[1],w()):[o,a]},O.angle=function(T){return arguments.length?(f=wn(h=T%360*Wn),d=Pn(h),w()):h*Lr},O.reflectX=function(T){return arguments.length?(c=T?-1:1,w()):c<0},O.reflectY=function(T){return arguments.length?(u=T?-1:1,w()):u<0},O.fitExtent=function(T,M){return Rk(O,T,M)},O.fitSize=function(T,M){return MB(O,T,M)},O.fitWidth=function(T,M){return EB(O,T,M)},O.fitHeight=function(T,M){return AB(O,T,M)},O}function BB(l,o){var a=o*o,c=a*a;return[l*(.8707-.131979*a+c*(c*(.003971*a-.001529*c)-.013791)),o*(1.007226+a*(.015085+c*(.028874*a-.044475-.005916*c)))]}function N9e(){return id(BB).scale(175.295)}function VB(l,o){return[Pn(o)*wn(l),wn(o)]}function L9e(){return id(VB).scale(249.5).clipAngle(90+$n)}function zB(l,o){var a=Pn(o),c=1+Pn(l)*a;return[a*wn(l)/c,wn(o)/c]}function B9e(){return id(zB).scale(250).clipAngle(142)}function UB(l,o){return[sk(K5((Ns+o)/2)),-l]}function V9e(){var l=rse(UB),o=l.center,a=l.rotate;return l.center=function(c){return arguments.length?o([-c[1],c[0]]):[(c=o())[1],-c[0]]},l.rotate=function(c){return arguments.length?a([c[0],c[1],c.length>2?c[2]+90:90]):[(c=a())[0],c[1],c[2]-90]},a([0,0,90]).scale(159.155)}function z9e(l,o){return l.parent===o.parent?1:2}function H9e(l,o){return l+o.x}function W9e(l,o){return Math.max(l,o.y)}function j9e(){var l=z9e,o=1,a=1,c=!1;function u(h){var d,f=0;h.eachAfter(function(y){var _=y.children;_?(y.x=function U9e(l){return l.reduce(H9e,0)/l.length}(_),y.y=function $9e(l){return 1+l.reduce(W9e,0)}(_)):(y.x=d?f+=l(y,d):0,y.y=0,d=y)});var p=function G9e(l){for(var o;o=l.children;)l=o[0];return l}(h),g=function Q9e(l){for(var o;o=l.children;)l=o[o.length-1];return l}(h),m=p.x-l(p,g)/2,v=g.x+l(g,p)/2;return h.eachAfter(c?function(y){y.x=(y.x-h.x)*o,y.y=(h.y-y.y)*a}:function(y){y.x=(y.x-m)/(v-m)*o,y.y=(1-(h.y?y.y/h.y:1))*a})}return u.separation=function(h){return arguments.length?(l=h,u):l},u.size=function(h){return arguments.length?(c=!1,o=+h[0],a=+h[1],u):c?null:[o,a]},u.nodeSize=function(h){return arguments.length?(c=!0,o=+h[0],a=+h[1],u):c?[o,a]:null},u}function q9e(l){var o=0,a=l.children,c=a&&a.length;if(c)for(;--c>=0;)o+=a[c].value;else o=1;l.value=o}function HB(l,o){l instanceof Map?(l=[void 0,l],void 0===o&&(o=h$e)):void 0===o&&(o=u$e);for(var c,h,d,f,p,a=new jm(l),u=[a];c=u.pop();)if((d=o(c.data))&&(p=(d=Array.from(d)).length))for(c.children=d,f=p-1;f>=0;--f)u.push(h=d[f]=new jm(d[f])),h.parent=c,h.depth=c.depth+1;return a.eachBefore(ase)}function u$e(l){return l.children}function h$e(l){return Array.isArray(l)?l[1]:null}function d$e(l){void 0!==l.data.value&&(l.value=l.data.value),l.data=l.data.data}function ase(l){var o=0;do{l.height=o}while((l=l.parent)&&l.height<++o)}function jm(l){this.data=l,this.depth=this.height=0,this.parent=null}function lse(l){for(var u,h,o=0,a=(l=function p$e(l){for(var a,c,o=l.length;o;)c=Math.random()*o--|0,a=l[o],l[o]=l[c],l[c]=a;return l}(Array.from(l))).length,c=[];o<a;)u=l[o],h&&cse(h,u)?++o:(h=m$e(c=g$e(c,u)),o=0);return h}function g$e(l,o){var a,c;if($B(o,l))return[o];for(a=0;a<l.length;++a)if(Bk(o,l[a])&&$B(cS(l[a],o),l))return[l[a],o];for(a=0;a<l.length-1;++a)for(c=a+1;c<l.length;++c)if(Bk(cS(l[a],l[c]),o)&&Bk(cS(l[a],o),l[c])&&Bk(cS(l[c],o),l[a])&&$B(use(l[a],l[c],o),l))return[l[a],l[c],o];throw new Error}function Bk(l,o){var a=l.r-o.r,c=o.x-l.x,u=o.y-l.y;return a<0||a*a<c*c+u*u}function cse(l,o){var a=l.r-o.r+1e-9*Math.max(l.r,o.r,1),c=o.x-l.x,u=o.y-l.y;return a>0&&a*a>c*c+u*u}function $B(l,o){for(var a=0;a<o.length;++a)if(!cse(l,o[a]))return!1;return!0}function m$e(l){switch(l.length){case 1:return function v$e(l){return{x:l.x,y:l.y,r:l.r}}(l[0]);case 2:return cS(l[0],l[1]);case 3:return use(l[0],l[1],l[2])}}function cS(l,o){var a=l.x,c=l.y,u=l.r,h=o.x,d=o.y,f=o.r,p=h-a,g=d-c,m=f-u,v=Math.sqrt(p*p+g*g);return{x:(a+h+p/v*m)/2,y:(c+d+g/v*m)/2,r:(v+u+f)/2}}function use(l,o,a){var c=l.x,u=l.y,h=l.r,d=o.x,f=o.y,p=o.r,g=a.x,m=a.y,v=a.r,y=c-d,_=c-g,b=u-f,C=u-m,x=p-h,S=v-h,w=c*c+u*u-h*h,O=w-d*d-f*f+p*p,T=w-g*g-m*m+v*v,M=_*b-y*C,A=(b*T-C*O)/(2*M)-c,I=(C*x-b*S)/M,E=(_*O-y*T)/(2*M)-u,P=(y*S-_*x)/M,B=I*I+P*P-1,V=2*(h+A*I+E*P),Q=A*A+E*E-h*h,j=-(B?(V+Math.sqrt(V*V-4*B*Q))/(2*B):Q/V);return{x:c+A+I*j,y:u+E+P*j,r:j}}function hse(l,o,a){var u,h,f,p,c=l.x-o.x,d=l.y-o.y,g=c*c+d*d;g?(h=o.r+a.r,p=l.r+a.r,(h*=h)>(p*=p)?(u=(g+p-h)/(2*g),f=Math.sqrt(Math.max(0,p/g-u*u)),a.x=l.x-u*c-f*d,a.y=l.y-u*d+f*c):(u=(g+h-p)/(2*g),f=Math.sqrt(Math.max(0,h/g-u*u)),a.x=o.x+u*c-f*d,a.y=o.y+u*d+f*c)):(a.x=o.x+a.r,a.y=o.y)}function dse(l,o){var a=l.r+o.r-1e-6,c=o.x-l.x,u=o.y-l.y;return a>0&&a*a>c*c+u*u}function fse(l){var o=l._,a=l.next._,c=o.r+a.r,u=(o.x*a.r+a.x*o.r)/c,h=(o.y*a.r+a.y*o.r)/c;return u*u+h*h}function Vk(l){this._=l,this.next=null,this.previous=null}function pse(l){if(!(u=(l=function f$e(l){return"object"==typeof l&&"length"in l?l:Array.from(l)}(l)).length))return 0;var o,a,c,u,h,d,f,p,g,m,v;if((o=l[0]).x=0,o.y=0,!(u>1))return o.r;if(o.x=-(a=l[1]).r,a.x=o.r,a.y=0,!(u>2))return o.r+a.r;hse(a,o,c=l[2]),o=new Vk(o),a=new Vk(a),c=new Vk(c),o.next=c.previous=a,a.next=o.previous=c,c.next=a.previous=o;e:for(f=3;f<u;++f){hse(o._,a._,c=l[f]),c=new Vk(c),p=a.next,g=o.previous,m=a._.r,v=o._.r;do{if(m<=v){if(dse(p._,c._)){o.next=a=p,a.previous=o,--f;continue e}m+=p._.r,p=p.next}else{if(dse(g._,c._)){(o=g).next=a,a.previous=o,--f;continue e}v+=g._.r,g=g.previous}}while(p!==g.next);for(c.previous=o,c.next=a,o.next=a.previous=a=c,h=fse(o);(c=c.next)!==a;)(d=fse(c))<h&&(o=c,h=d);a=o.next}for(o=[a._],c=a;(c=c.next)!==a;)o.push(c._);for(c=lse(o),f=0;f<u;++f)(o=l[f]).x-=c.x,o.y-=c.y;return c.r}function y$e(l){return pse(l),l}function zk(l){return null==l?null:gse(l)}function gse(l){if("function"!=typeof l)throw new Error;return l}function qm(){return 0}function y_(l){return function(){return l}}function _$e(l){return Math.sqrt(l.value)}function b$e(){var l=null,o=1,a=1,c=qm;function u(h){return h.x=o/2,h.y=a/2,l?h.eachBefore(mse(l)).eachAfter(WB(c,.5)).eachBefore(vse(1)):h.eachBefore(mse(_$e)).eachAfter(WB(qm,1)).eachAfter(WB(c,h.r/Math.min(o,a))).eachBefore(vse(Math.min(o,a)/(2*h.r))),h}return u.radius=function(h){return arguments.length?(l=zk(h),u):l},u.size=function(h){return arguments.length?(o=+h[0],a=+h[1],u):[o,a]},u.padding=function(h){return arguments.length?(c="function"==typeof h?h:y_(+h),u):c},u}function mse(l){return function(o){o.children||(o.r=Math.max(0,+l(o)||0))}}function WB(l,o){return function(a){if(c=a.children){var c,u,f,h=c.length,d=l(a)*o||0;if(d)for(u=0;u<h;++u)c[u].r+=d;if(f=pse(c),d)for(u=0;u<h;++u)c[u].r-=d;a.r=f+d}}}function vse(l){return function(o){var a=o.parent;o.r*=l,a&&(o.x=a.x+l*o.x,o.y=a.y+l*o.y)}}function yse(l){l.x0=Math.round(l.x0),l.y0=Math.round(l.y0),l.x1=Math.round(l.x1),l.y1=Math.round(l.y1)}function uS(l,o,a,c,u){for(var d,h=l.children,f=-1,p=h.length,g=l.value&&(c-o)/l.value;++f<p;)(d=h[f]).y0=a,d.y1=u,d.x0=o,d.x1=o+=d.value*g}function x$e(){var l=1,o=1,a=0,c=!1;function u(d){var f=d.height+1;return d.x0=d.y0=a,d.x1=l,d.y1=o/f,d.eachBefore(function h(d,f){return function(p){p.children&&uS(p,p.x0,d*(p.depth+1)/f,p.x1,d*(p.depth+2)/f);var g=p.x0,m=p.y0,v=p.x1-a,y=p.y1-a;v<g&&(g=v=(g+v)/2),y<m&&(m=y=(m+y)/2),p.x0=g,p.y0=m,p.x1=v,p.y1=y}}(o,f)),c&&d.eachBefore(yse),d}return u.round=function(d){return arguments.length?(c=!!d,u):c},u.size=function(d){return arguments.length?(l=+d[0],o=+d[1],u):[l,o]},u.padding=function(d){return arguments.length?(a=+d,u):a},u}NB.invert=function(l,o){for(var d,a=o,c=a*a,u=c*c*c,h=0;h<12&&(u=(c=(a-=d=(a*(sS+oS*c+u*(aS+lS*c))-o)/(sS+3*oS*c+u*(7*aS+9*lS*c)))*a)*c*c,!(Ji(d)<WC));++h);return[Lk*l*(sS+3*oS*c+u*(7*aS+9*lS*c))/Pn(a),el(wn(a)/Lk)]},LB.invert=nS(h_),BB.invert=function(l,o){var u,a=o,c=25;do{var h=a*a,d=h*h;a-=u=(a*(1.007226+h*(.015085+d*(.028874*h-.044475-.005916*d)))-o)/(1.007226+h*(.045255+d*(.259866*h-.311325-.005916*11*d)))}while(Ji(u)>$n&&--c>0);return[l/(.8707+(h=a*a)*(h*(h*h*h*(.003971-.001529*h)-.013791)-.131979)),a]},VB.invert=nS(el),zB.invert=nS(function(l){return 2*h_(l)}),UB.invert=function(l,o){return[-o,2*h_(Qie(l))-Ns]},jm.prototype=HB.prototype={constructor:jm,count:function Z9e(){return this.eachAfter(q9e)},each:function X9e(l,o){let a=-1;for(const c of this)l.call(o,c,++a,this);return this},eachAfter:function K9e(l,o){for(var h,d,f,a=this,c=[a],u=[],p=-1;a=c.pop();)if(u.push(a),h=a.children)for(d=0,f=h.length;d<f;++d)c.push(h[d]);for(;a=u.pop();)l.call(o,a,++p,this);return this},eachBefore:function Y9e(l,o){for(var u,h,a=this,c=[a],d=-1;a=c.pop();)if(l.call(o,a,++d,this),u=a.children)for(h=u.length-1;h>=0;--h)c.push(u[h]);return this},find:function J9e(l,o){let a=-1;for(const c of this)if(l.call(o,c,++a,this))return c},sum:function e$e(l){return this.eachAfter(function(o){for(var a=+l(o.data)||0,c=o.children,u=c&&c.length;--u>=0;)a+=c[u].value;o.value=a})},sort:function t$e(l){return this.eachBefore(function(o){o.children&&o.children.sort(l)})},path:function n$e(l){for(var o=this,a=function i$e(l,o){if(l===o)return l;var a=l.ancestors(),c=o.ancestors(),u=null;for(l=a.pop(),o=c.pop();l===o;)u=l,l=a.pop(),o=c.pop();return u}(o,l),c=[o];o!==a;)c.push(o=o.parent);for(var u=c.length;l!==a;)c.splice(u,0,l),l=l.parent;return c},ancestors:function r$e(){for(var l=this,o=[l];l=l.parent;)o.push(l);return o},descendants:function s$e(){return Array.from(this)},leaves:function o$e(){var l=[];return this.eachBefore(function(o){o.children||l.push(o)}),l},links:function a$e(){var l=this,o=[];return l.each(function(a){a!==l&&o.push({source:a.parent,target:a})}),o},copy:function c$e(){return HB(this).eachBefore(d$e)},[Symbol.iterator]:function*l$e(){var o,c,u,h,l=this,a=[l];do{for(o=a.reverse(),a=[];l=o.pop();)if(yield l,c=l.children)for(u=0,h=c.length;u<h;++u)a.push(c[u])}while(a.length)}};var C$e={depth:-1},_se={},GB={};function S$e(l){return l.id}function w$e(l){return l.parentId}function T$e(){var a,l=S$e,o=w$e;function c(u){var p,g,m,v,y,_,b,C,h=Array.from(u),d=l,f=o,x=new Map;if(null!=a){const S=h.map((T,M)=>function O$e(l){let o=(l=`${l}`).length;return QB(l,o-1)&&!QB(l,o-2)&&(l=l.slice(0,-1)),"/"===l[0]?l:`/${l}`}(a(T,M,u))),w=S.map(bse),O=new Set(S).add("");for(const T of w)O.has(T)||(O.add(T),S.push(T),w.push(bse(T)),h.push(GB));d=(T,M)=>S[M],f=(T,M)=>w[M]}for(m=0,p=h.length;m<p;++m)_=h[m]=new jm(g=h[m]),null!=(b=d(g,m,u))&&(b+="")&&(C=_.id=b,x.set(C,x.has(C)?_se:_)),null!=(b=f(g,m,u))&&(b+="")&&(_.parent=b);for(m=0;m<p;++m)if(b=(_=h[m]).parent){if(!(y=x.get(b)))throw new Error("missing: "+b);if(y===_se)throw new Error("ambiguous: "+b);y.children?y.children.push(_):y.children=[_],_.parent=y}else{if(v)throw new Error("multiple roots");v=_}if(!v)throw new Error("no root");if(null!=a){for(;v.data===GB&&1===v.children.length;)v=v.children[0],--p;for(let S=h.length-1;S>=0&&(_=h[S]).data===GB;--S)_.data=null}if(v.parent=C$e,v.eachBefore(function(S){S.depth=S.parent.depth+1,--p}).eachBefore(ase),v.parent=null,p>0)throw new Error("cycle");return v}return c.id=function(u){return arguments.length?(l=zk(u),c):l},c.parentId=function(u){return arguments.length?(o=zk(u),c):o},c.path=function(u){return arguments.length?(a=zk(u),c):a},c}function bse(l){let o=l.length;if(o<2)return"";for(;--o>1&&!QB(l,o););return l.slice(0,o)}function QB(l,o){if("/"===l[o]){let a=0;for(;o>0&&"\\"===l[--o];)++a;if(0==(1&a))return!0}return!1}function D$e(l,o){return l.parent===o.parent?1:2}function jB(l){var o=l.children;return o?o[0]:l.t}function qB(l){var o=l.children;return o?o[o.length-1]:l.t}function k$e(l,o,a){var c=a/(o.i-l.i);o.c-=c,o.s+=a,l.c+=c,o.z+=a,o.m+=a}function E$e(l,o,a){return l.a.parent===o.parent?l.a:a}function Uk(l,o){this._=l,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=o}function I$e(){var l=D$e,o=1,a=1,c=null;function u(g){var m=function A$e(l){for(var a,u,h,d,f,o=new Uk(l,0),c=[o];a=c.pop();)if(h=a._.children)for(a.children=new Array(f=h.length),d=f-1;d>=0;--d)c.push(u=a.children[d]=new Uk(h[d],d)),u.parent=a;return(o.parent=new Uk(null,0)).children=[o],o}(g);if(m.eachAfter(h),m.parent.m=-m.z,m.eachBefore(d),c)g.eachBefore(p);else{var v=g,y=g,_=g;g.eachBefore(function(w){w.x<v.x&&(v=w),w.x>y.x&&(y=w),w.depth>_.depth&&(_=w)});var b=v===y?1:l(v,y)/2,C=b-v.x,x=o/(y.x+b+C),S=a/(_.depth||1);g.eachBefore(function(w){w.x=(w.x+C)*x,w.y=w.depth*S})}return g}function h(g){var m=g.children,v=g.parent.children,y=g.i?v[g.i-1]:null;if(m){!function M$e(l){for(var h,o=0,a=0,c=l.children,u=c.length;--u>=0;)(h=c[u]).z+=o,h.m+=o,o+=h.s+(a+=h.c)}(g);var _=(m[0].z+m[m.length-1].z)/2;y?(g.z=y.z+l(g._,y._),g.m=g.z-_):g.z=_}else y&&(g.z=y.z+l(g._,y._));g.parent.A=function f(g,m,v){if(m){for(var T,y=g,_=g,b=m,C=y.parent.children[0],x=y.m,S=_.m,w=b.m,O=C.m;b=qB(b),y=jB(y),b&&y;)C=jB(C),(_=qB(_)).a=g,(T=b.z+w-y.z-x+l(b._,y._))>0&&(k$e(E$e(b,g,v),g,T),x+=T,S+=T),w+=b.m,x+=y.m,O+=C.m,S+=_.m;b&&!qB(_)&&(_.t=b,_.m+=w-S),y&&!jB(C)&&(C.t=y,C.m+=x-O,v=g)}return v}(g,y,g.parent.A||v[0])}function d(g){g._.x=g.z+g.parent.m,g.m+=g.parent.m}function p(g){g.x*=o,g.y=g.depth*a}return u.separation=function(g){return arguments.length?(l=g,u):l},u.size=function(g){return arguments.length?(c=!1,o=+g[0],a=+g[1],u):c?null:[o,a]},u.nodeSize=function(g){return arguments.length?(c=!0,o=+g[0],a=+g[1],u):c?[o,a]:null},u}function Hk(l,o,a,c,u){for(var d,h=l.children,f=-1,p=h.length,g=l.value&&(u-a)/l.value;++f<p;)(d=h[f]).x0=o,d.x1=c,d.y0=a,d.y1=a+=d.value*g}Uk.prototype=Object.create(jm.prototype);var xse=(1+Math.sqrt(5))/2;function Cse(l,o,a,c,u,h){for(var p,g,_,b,x,S,w,O,T,M,A,d=[],f=o.children,m=0,v=0,y=f.length,C=o.value;m<y;){_=u-a,b=h-c;do{x=f[v++].value}while(!x&&v<y);for(S=w=x,A=x*x*(M=Math.max(b/_,_/b)/(C*l)),T=Math.max(w/A,A/S);v<y;++v){if(x+=g=f[v].value,g<S&&(S=g),g>w&&(w=g),A=x*x*M,(O=Math.max(w/A,A/S))>T){x-=g;break}T=O}d.push(p={value:x,dice:_<b,children:f.slice(m,v)}),p.dice?uS(p,a,c,u,C?c+=b*x/C:h):Hk(p,a,c,C?a+=_*x/C:u,h),C-=x,m=v}return d}const Sse=function l(o){function a(c,u,h,d,f){Cse(o,c,u,h,d,f)}return a.ratio=function(c){return l((c=+c)>1?c:1)},a}(xse);function P$e(){var l=Sse,o=!1,a=1,c=1,u=[0],h=qm,d=qm,f=qm,p=qm,g=qm;function m(y){return y.x0=y.y0=0,y.x1=a,y.y1=c,y.eachBefore(v),u=[0],o&&y.eachBefore(yse),y}function v(y){var _=u[y.depth],b=y.x0+_,C=y.y0+_,x=y.x1-_,S=y.y1-_;x<b&&(b=x=(b+x)/2),S<C&&(C=S=(C+S)/2),y.x0=b,y.y0=C,y.x1=x,y.y1=S,y.children&&(_=u[y.depth+1]=h(y)/2,b+=g(y)-_,C+=d(y)-_,(x-=f(y)-_)<b&&(b=x=(b+x)/2),(S-=p(y)-_)<C&&(C=S=(C+S)/2),l(y,b,C,x,S))}return m.round=function(y){return arguments.length?(o=!!y,m):o},m.size=function(y){return arguments.length?(a=+y[0],c=+y[1],m):[a,c]},m.tile=function(y){return arguments.length?(l=gse(y),m):l},m.padding=function(y){return arguments.length?m.paddingInner(y).paddingOuter(y):m.paddingInner()},m.paddingInner=function(y){return arguments.length?(h="function"==typeof y?y:y_(+y),m):h},m.paddingOuter=function(y){return arguments.length?m.paddingTop(y).paddingRight(y).paddingBottom(y).paddingLeft(y):m.paddingTop()},m.paddingTop=function(y){return arguments.length?(d="function"==typeof y?y:y_(+y),m):d},m.paddingRight=function(y){return arguments.length?(f="function"==typeof y?y:y_(+y),m):f},m.paddingBottom=function(y){return arguments.length?(p="function"==typeof y?y:y_(+y),m):p},m.paddingLeft=function(y){return arguments.length?(g="function"==typeof y?y:y_(+y),m):g},m}function R$e(l,o,a,c,u){var d,p,h=l.children,f=h.length,g=new Array(f+1);for(g[0]=p=d=0;d<f;++d)g[d+1]=p+=h[d].value;!function m(v,y,_,b,C,x,S){if(v>=y-1){var w=h[v];return w.x0=b,w.y0=C,w.x1=x,void(w.y1=S)}for(var O=g[v],T=_/2+O,M=v+1,A=y-1;M<A;){var I=M+A>>>1;g[I]<T?M=I+1:A=I}T-g[M-1]<g[M]-T&&v+1<M&&--M;var E=g[M]-O,P=_-E;if(x-b>S-C){var B=_?(b*P+x*E)/_:x;m(v,M,E,b,C,B,S),m(M,y,P,B,C,x,S)}else{var V=_?(C*P+S*E)/_:S;m(v,M,E,b,C,x,V),m(M,y,P,b,V,x,S)}}(0,f,l.value,o,a,c,u)}function F$e(l,o,a,c,u){(1&l.depth?Hk:uS)(l,o,a,c,u)}const N$e=function l(o){function a(c,u,h,d,f){if((p=c._squarify)&&p.ratio===o)for(var p,g,m,v,_,y=-1,b=p.length,C=c.value;++y<b;){for(m=(g=p[y]).children,v=g.value=0,_=m.length;v<_;++v)g.value+=m[v].value;g.dice?uS(g,u,h,d,C?h+=(f-h)*g.value/C:f):Hk(g,u,h,C?u+=(d-u)*g.value/C:d,f),C-=g.value}else c._squarify=p=Cse(o,c,u,h,d,f),p.ratio=o}return a.ratio=function(c){return l((c=+c)>1?c:1)},a}(xse);function L$e(l){var o=l.length;return function(a){return l[Math.max(0,Math.min(o-1,Math.floor(a*o)))]}}function B$e(l,o){var a=bD(+l,+o);return function(c){var u=a(c);return u-360*Math.floor(u/360)}}function $k(l,o){return l=+l,o=+o,function(a){return Math.round(l*(1-a)+o*a)}}function wse(l){return((l=Math.exp(l))+1/l)/2}const Tse=function l(o,a,c){function u(h,d){var x,S,f=h[0],p=h[1],g=h[2],y=d[2],_=d[0]-f,b=d[1]-p,C=_*_+b*b;if(C<1e-12)S=Math.log(y/g)/o,x=function(I){return[f+I*_,p+I*b,g*Math.exp(o*I*S)]};else{var w=Math.sqrt(C),O=(y*y-g*g+c*C)/(2*g*a*w),T=(y*y-g*g-c*C)/(2*y*a*w),M=Math.log(Math.sqrt(O*O+1)-O),A=Math.log(Math.sqrt(T*T+1)-T);S=(A-M)/o,x=function(I){var E=I*S,P=wse(M),B=g/(a*w)*(P*function U$e(l){return((l=Math.exp(2*l))-1)/(l+1)}(o*E+M)-function z$e(l){return((l=Math.exp(l))-1/l)/2}(M));return[f+B*_,p+B*b,g*P/wse(o*E+M)]}}return x.duration=1e3*S*o/Math.SQRT2,x}return u.rho=function(h){var d=Math.max(.001,+h),f=d*d;return l(d,f,f*f)},u}(Math.SQRT2,2,4);function Ose(l){return function(o,a){var c=l((o=yD(o)).h,(a=yD(a)).h),u=zo(o.s,a.s),h=zo(o.l,a.l),d=zo(o.opacity,a.opacity);return function(f){return o.h=c(f),o.s=u(f),o.l=h(f),o.opacity=d(f),o+""}}}const H$e=Ose(bD);var $$e=Ose(zo);function W$e(l,o){var a=zo((l=PD(l)).l,(o=PD(o)).l),c=zo(l.a,o.a),u=zo(l.b,o.b),h=zo(l.opacity,o.opacity);return function(d){return l.l=a(d),l.a=c(d),l.b=u(d),l.opacity=h(d),l+""}}function Dse(l){return function(o,a){var c=l((o=RD(o)).h,(a=RD(a)).h),u=zo(o.c,a.c),h=zo(o.l,a.l),d=zo(o.opacity,a.opacity);return function(f){return o.h=c(f),o.c=u(f),o.l=h(f),o.opacity=d(f),o+""}}}const G$e=Dse(bD);var Q$e=Dse(zo);function kse(l){return function o(a){function c(u,h){var d=l((u=ju(u)).h,(h=ju(h)).h),f=zo(u.s,h.s),p=zo(u.l,h.l),g=zo(u.opacity,h.opacity);return function(m){return u.h=d(m),u.s=f(m),u.l=p(Math.pow(m,a)),u.opacity=g(m),u+""}}return a=+a,c.gamma=o,c}(1)}const j$e=kse(bD);var Wk=kse(zo);function Mse(l,o){void 0===o&&(o=l,l=Sp);for(var a=0,c=o.length-1,u=o[0],h=new Array(c<0?0:c);a<c;)h[a]=l(u,u=o[++a]);return function(d){var f=Math.max(0,Math.min(c-1,Math.floor(d*=c)));return h[f](d-f)}}function q$e(l,o){for(var a=new Array(o),c=0;c<o;++c)a[c]=l(c/(o-1));return a}function Z$e(l){for(var c,o=-1,a=l.length,u=l[a-1],h=0;++o<a;)h+=(c=u)[1]*(u=l[o])[0]-c[0]*u[1];return h/2}function X$e(l){for(var h,f,o=-1,a=l.length,c=0,u=0,d=l[a-1],p=0;++o<a;)p+=f=(h=d)[0]*(d=l[o])[1]-d[0]*h[1],c+=(h[0]+d[0])*f,u+=(h[1]+d[1])*f;return[c/(p*=3),u/p]}function Y$e(l,o,a){return(o[0]-l[0])*(a[1]-l[1])-(o[1]-l[1])*(a[0]-l[0])}function K$e(l,o){return l[0]-o[0]||l[1]-o[1]}function Ese(l){const o=l.length,a=[0,1];let u,c=2;for(u=2;u<o;++u){for(;c>1&&Y$e(l[a[c-2]],l[a[c-1]],l[u])<=0;)--c;a[c++]=u}return a.slice(0,c)}function J$e(l){if((a=l.length)<3)return null;var o,a,c=new Array(a),u=new Array(a);for(o=0;o<a;++o)c[o]=[+l[o][0],+l[o][1],o];for(c.sort(K$e),o=0;o<a;++o)u[o]=[c[o][0],-c[o][1]];var h=Ese(c),d=Ese(u),f=d[0]===h[0],p=d[d.length-1]===h[h.length-1],g=[];for(o=h.length-1;o>=0;--o)g.push(l[c[h[o]][2]]);for(o=+f;o<d.length-p;++o)g.push(l[c[d[o]][2]]);return g}function eWe(l,o){for(var p,g,a=l.length,c=l[a-1],u=o[0],h=o[1],d=c[0],f=c[1],m=!1,v=0;v<a;++v)p=(c=l[v])[0],(g=c[1])>h!=f>h&&u<(d-p)*(h-g)/(f-g)+p&&(m=!m),d=p,f=g;return m}function tWe(l){for(var u,h,o=-1,a=l.length,c=l[a-1],d=c[0],f=c[1],p=0;++o<a;)u=d,h=f,u-=d=(c=l[o])[0],h-=f=c[1],p+=Math.hypot(u,h);return p}const Yo=Math.random,nWe=function l(o){function a(c,u){return c=null==c?0:+c,u=null==u?1:+u,1===arguments.length?(u=c,c=0):u-=c,function(){return o()*u+c}}return a.source=l,a}(Yo),iWe=function l(o){function a(c,u){return arguments.length<2&&(u=c,c=0),c=Math.floor(c),u=Math.floor(u)-c,function(){return Math.floor(o()*u+c)}}return a.source=l,a}(Yo),ZB=function l(o){function a(c,u){var h,d;return c=null==c?0:+c,u=null==u?1:+u,function(){var f;if(null!=h)f=h,h=null;else do{h=2*o()-1,f=2*o()-1,d=h*h+f*f}while(!d||d>1);return c+u*f*Math.sqrt(-2*Math.log(d)/d)}}return a.source=l,a}(Yo),rWe=function l(o){var a=ZB.source(o);function c(){var u=a.apply(this,arguments);return function(){return Math.exp(u())}}return c.source=l,c}(Yo),Ase=function l(o){function a(c){return(c=+c)<=0?()=>0:function(){for(var u=0,h=c;h>1;--h)u+=o();return u+h*o()}}return a.source=l,a}(Yo),sWe=function l(o){var a=Ase.source(o);function c(u){if(0==(u=+u))return o;var h=a(u);return function(){return h()/u}}return c.source=l,c}(Yo),oWe=function l(o){function a(c){return function(){return-Math.log1p(-o())/c}}return a.source=l,a}(Yo),aWe=function l(o){function a(c){if((c=+c)<0)throw new RangeError("invalid alpha");return c=1/-c,function(){return Math.pow(1-o(),c)}}return a.source=l,a}(Yo),lWe=function l(o){function a(c){if((c=+c)<0||c>1)throw new RangeError("invalid p");return function(){return Math.floor(o()+c)}}return a.source=l,a}(Yo),Ise=function l(o){function a(c){if((c=+c)<0||c>1)throw new RangeError("invalid p");return 0===c?()=>1/0:1===c?()=>1:(c=Math.log1p(-c),function(){return 1+Math.floor(Math.log1p(-o())/c)})}return a.source=l,a}(Yo),XB=function l(o){var a=ZB.source(o)();function c(u,h){if((u=+u)<0)throw new RangeError("invalid k");if(0===u)return()=>0;if(h=null==h?1:+h,1===u)return()=>-Math.log1p(-o())*h;var d=(u<1?u+1:u)-1/3,f=1/(3*Math.sqrt(d)),p=u<1?()=>Math.pow(o(),1/u):()=>1;return function(){do{do{var g=a(),m=1+f*g}while(m<=0);m*=m*m;var v=1-o()}while(v>=1-.0331*g*g*g*g&&Math.log(v)>=.5*g*g+d*(1-m+Math.log(m)));return d*m*p()*h}}return c.source=l,c}(Yo),Pse=function l(o){var a=XB.source(o);function c(u,h){var d=a(u),f=a(h);return function(){var p=d();return 0===p?0:p/(p+f())}}return c.source=l,c}(Yo),Rse=function l(o){var a=Ise.source(o),c=Pse.source(o);function u(h,d){return h=+h,(d=+d)>=1?()=>h:d<=0?()=>0:function(){for(var f=0,p=h,g=d;p*g>16&&p*(1-g)>16;){var m=Math.floor((p+1)*g),v=c(m,p-m+1)();v<=g?(f+=m,p-=m,g=(g-v)/(1-v)):(p=m-1,g/=v)}for(var y=g<.5,b=a(y?g:1-g),C=b(),x=0;C<=p;++x)C+=b();return f+(y?x:p-x)}}return u.source=l,u}(Yo),cWe=function l(o){function a(c,u,h){var d;return 0==(c=+c)?d=f=>-Math.log(f):(c=1/c,d=f=>Math.pow(f,c)),u=null==u?0:+u,h=null==h?1:+h,function(){return u+h*d(-Math.log1p(-o()))}}return a.source=l,a}(Yo),uWe=function l(o){function a(c,u){return c=null==c?0:+c,u=null==u?1:+u,function(){return c+u*Math.tan(Math.PI*o())}}return a.source=l,a}(Yo),hWe=function l(o){function a(c,u){return c=null==c?0:+c,u=null==u?1:+u,function(){var h=o();return c+u*Math.log(h/(1-h))}}return a.source=l,a}(Yo),dWe=function l(o){var a=XB.source(o),c=Rse.source(o);function u(h){return function(){for(var d=0,f=h;f>16;){var p=Math.floor(.875*f),g=a(p)();if(g>f)return d+c(p-1,f/g)();d+=p,f-=g}for(var m=-Math.log1p(-o()),v=0;m<=f;++v)m-=Math.log1p(-o());return d+v}}return u.source=l,u}(Yo),Fse=1/4294967296;function gWe(l=Math.random()){let o=0|(0<=l&&l<1?l/Fse:Math.abs(l));return()=>(o=1664525*o+1013904223|0,Fse*(o>>>0))}function eu(l,o){switch(arguments.length){case 0:break;case 1:this.range(l);break;default:this.range(o).domain(l)}return this}function bf(l,o){switch(arguments.length){case 0:break;case 1:"function"==typeof l?this.interpolator(l):this.range(l);break;default:this.domain(l),"function"==typeof o?this.interpolator(o):this.range(o)}return this}const YB=Symbol("implicit");function KB(){var l=new yC,o=[],a=[],c=YB;function u(h){let d=l.get(h);if(void 0===d){if(c!==YB)return c;l.set(h,d=o.push(h)-1)}return a[d%a.length]}return u.domain=function(h){if(!arguments.length)return o.slice();o=[],l=new yC;for(const d of h)l.has(d)||l.set(d,o.push(d)-1);return u},u.range=function(h){return arguments.length?(a=Array.from(h),u):a.slice()},u.unknown=function(h){return arguments.length?(c=h,u):c},u.copy=function(){return KB(o,a).unknown(c)},eu.apply(u,arguments),u}function JB(){var h,d,l=KB().unknown(void 0),o=l.domain,a=l.range,c=0,u=1,f=!1,p=0,g=0,m=.5;function v(){var y=o().length,_=u<c,b=_?u:c,C=_?c:u;h=(C-b)/Math.max(1,y-p+2*g),f&&(h=Math.floor(h)),b+=(C-b-h*(y-p))*m,d=h*(1-p),f&&(b=Math.round(b),d=Math.round(d));var x=rc(y).map(function(S){return b+h*S});return a(_?x.reverse():x)}return delete l.unknown,l.domain=function(y){return arguments.length?(o(y),v()):o()},l.range=function(y){return arguments.length?([c,u]=y,c=+c,u=+u,v()):[c,u]},l.rangeRound=function(y){return[c,u]=y,c=+c,u=+u,f=!0,v()},l.bandwidth=function(){return d},l.step=function(){return h},l.round=function(y){return arguments.length?(f=!!y,v()):f},l.padding=function(y){return arguments.length?(p=Math.min(1,g=+y),v()):p},l.paddingInner=function(y){return arguments.length?(p=Math.min(1,y),v()):p},l.paddingOuter=function(y){return arguments.length?(g=+y,v()):g},l.align=function(y){return arguments.length?(m=Math.max(0,Math.min(1,y)),v()):m},l.copy=function(){return JB(o(),[c,u]).round(f).paddingInner(p).paddingOuter(g).align(m)},eu.apply(v(),arguments)}function Nse(l){var o=l.copy;return l.padding=l.paddingOuter,delete l.paddingInner,delete l.paddingOuter,l.copy=function(){return Nse(o())},l}function mWe(){return Nse(JB.apply(null,arguments).paddingInner(1))}function Gk(l){return+l}var Lse=[0,1];function rl(l){return l}function e8(l,o){return(o-=l=+l)?function(a){return(a-l)/o}:function vWe(l){return function(){return l}}(isNaN(o)?NaN:.5)}function _We(l,o,a){var c=l[0],u=l[1],h=o[0],d=o[1];return u<c?(c=e8(u,c),h=a(d,h)):(c=e8(c,u),h=a(h,d)),function(f){return h(c(f))}}function bWe(l,o,a){var c=Math.min(l.length,o.length)-1,u=new Array(c),h=new Array(c),d=-1;for(l[c]<l[0]&&(l=l.slice().reverse(),o=o.slice().reverse());++d<c;)u[d]=e8(l[d],l[d+1]),h[d]=a(o[d],o[d+1]);return function(f){var p=Sm(l,f,1,c)-1;return h[p](u[p](f))}}function hS(l,o){return o.domain(l.domain()).range(l.range()).interpolate(l.interpolate()).clamp(l.clamp()).unknown(l.unknown())}function Qk(){var c,u,h,f,p,g,l=Lse,o=Lse,a=Sp,d=rl;function m(){var y=Math.min(l.length,o.length);return d!==rl&&(d=function yWe(l,o){var a;return l>o&&(a=l,l=o,o=a),function(c){return Math.max(l,Math.min(o,c))}}(l[0],l[y-1])),f=y>2?bWe:_We,p=g=null,v}function v(y){return null==y||isNaN(y=+y)?h:(p||(p=f(l.map(c),o,a)))(c(d(y)))}return v.invert=function(y){return d(u((g||(g=f(o,l.map(c),Kc)))(y)))},v.domain=function(y){return arguments.length?(l=Array.from(y,Gk),m()):l.slice()},v.range=function(y){return arguments.length?(o=Array.from(y),m()):o.slice()},v.rangeRound=function(y){return o=Array.from(y),a=$k,m()},v.clamp=function(y){return arguments.length?(d=!!y||rl,m()):d!==rl},v.interpolate=function(y){return arguments.length?(a=y,m()):a},v.unknown=function(y){return arguments.length?(h=y,v):h},function(y,_){return c=y,u=_,m()}}function t8(){return Qk()(rl,rl)}function Bse(l,o,a,c){var h,u=Vy(l,o,a);switch((c=u_(null==c?",f":c)).type){case"s":var d=Math.max(Math.abs(l),Math.abs(o));return null==c.precision&&!isNaN(h=Wie(u,d))&&(c.precision=h),Z5(c,d);case"":case"e":case"g":case"p":case"r":null==c.precision&&!isNaN(h=Gie(u,Math.max(Math.abs(l),Math.abs(o))))&&(c.precision=h-("e"===c.type));break;case"f":case"%":null==c.precision&&!isNaN(h=$ie(u))&&(c.precision=h-2*("%"===c.type))}return nk(c)}function Rp(l){var o=l.domain;return l.ticks=function(a){var c=o();return By(c[0],c[c.length-1],null==a?10:a)},l.tickFormat=function(a,c){var u=o();return Bse(u[0],u[u.length-1],null==a?10:a,c)},l.nice=function(a){null==a&&(a=10);var p,g,c=o(),u=0,h=c.length-1,d=c[u],f=c[h],m=10;for(f<d&&(g=d,d=f,f=g,g=u,u=h,h=g);m-- >0;){if((g=bC(d,f,a))===p)return c[u]=d,c[h]=f,o(c);if(g>0)d=Math.floor(d/g)*g,f=Math.ceil(f/g)*g;else{if(!(g<0))break;d=Math.ceil(d*g)/g,f=Math.floor(f*g)/g}p=g}return l},l}function __(){var l=t8();return l.copy=function(){return hS(l,__())},eu.apply(l,arguments),Rp(l)}function Vse(l){var o;function a(c){return null==c||isNaN(c=+c)?o:c}return a.invert=a,a.domain=a.range=function(c){return arguments.length?(l=Array.from(c,Gk),a):l.slice()},a.unknown=function(c){return arguments.length?(o=c,a):o},a.copy=function(){return Vse(l).unknown(o)},l=arguments.length?Array.from(l,Gk):[0,1],Rp(a)}function zse(l,o){var d,a=0,c=(l=l.slice()).length-1,u=l[a],h=l[c];return h<u&&(d=a,a=c,c=d,d=u,u=h,h=d),l[a]=o.floor(u),l[c]=o.ceil(h),l}function Use(l){return Math.log(l)}function Hse(l){return Math.exp(l)}function xWe(l){return-Math.log(-l)}function CWe(l){return-Math.exp(-l)}function SWe(l){return isFinite(l)?+("1e"+l):l<0?0:l}function $se(l){return(o,a)=>-l(-o,a)}function n8(l){const o=l(Use,Hse),a=o.domain;let u,h,c=10;function d(){return u=function TWe(l){return l===Math.E?Math.log:10===l&&Math.log10||2===l&&Math.log2||(l=Math.log(l),o=>Math.log(o)/l)}(c),h=function wWe(l){return 10===l?SWe:l===Math.E?Math.exp:o=>Math.pow(l,o)}(c),a()[0]<0?(u=$se(u),h=$se(h),l(xWe,CWe)):l(Use,Hse),o}return o.base=function(f){return arguments.length?(c=+f,d()):c},o.domain=function(f){return arguments.length?(a(f),d()):a()},o.ticks=f=>{const p=a();let g=p[0],m=p[p.length-1];const v=m<g;v&&([g,m]=[m,g]);let b,C,y=u(g),_=u(m);const x=null==f?10:+f;let S=[];if(!(c%1)&&_-y<x){if(y=Math.floor(y),_=Math.ceil(_),g>0){for(;y<=_;++y)for(b=1;b<c;++b)if(C=y<0?b/h(-y):b*h(y),!(C<g)){if(C>m)break;S.push(C)}}else for(;y<=_;++y)for(b=c-1;b>=1;--b)if(C=y>0?b/h(-y):b*h(y),!(C<g)){if(C>m)break;S.push(C)}2*S.length<x&&(S=By(g,m,x))}else S=By(y,_,Math.min(_-y,x)).map(h);return v?S.reverse():S},o.tickFormat=(f,p)=>{if(null==f&&(f=10),null==p&&(p=10===c?"s":","),"function"!=typeof p&&(!(c%1)&&null==(p=u_(p)).precision&&(p.trim=!0),p=nk(p)),f===1/0)return p;const g=Math.max(1,c*f/o.ticks().length);return m=>{let v=m/h(Math.round(u(m)));return v*c<c-.5&&(v*=c),v<=g?p(m):""}},o.nice=()=>a(zse(a(),{floor:f=>h(Math.floor(u(f))),ceil:f=>h(Math.ceil(u(f)))})),o}function Wse(){const l=n8(Qk()).domain([1,10]);return l.copy=()=>hS(l,Wse()).base(l.base()),eu.apply(l,arguments),l}function Gse(l){return function(o){return Math.sign(o)*Math.log1p(Math.abs(o/l))}}function Qse(l){return function(o){return Math.sign(o)*Math.expm1(Math.abs(o))*l}}function i8(l){var o=1,a=l(Gse(o),Qse(o));return a.constant=function(c){return arguments.length?l(Gse(o=+c),Qse(o)):o},Rp(a)}function jse(){var l=i8(Qk());return l.copy=function(){return hS(l,jse()).constant(l.constant())},eu.apply(l,arguments)}function qse(l){return function(o){return o<0?-Math.pow(-o,l):Math.pow(o,l)}}function OWe(l){return l<0?-Math.sqrt(-l):Math.sqrt(l)}function DWe(l){return l<0?-l*l:l*l}function r8(l){var o=l(rl,rl),a=1;function c(){return 1===a?l(rl,rl):.5===a?l(OWe,DWe):l(qse(a),qse(1/a))}return o.exponent=function(u){return arguments.length?(a=+u,c()):a},Rp(o)}function s8(){var l=r8(Qk());return l.copy=function(){return hS(l,s8()).exponent(l.exponent())},eu.apply(l,arguments),l}function kWe(){return s8.apply(null,arguments).exponent(.5)}function Zse(l){return Math.sign(l)*l*l}function MWe(l){return Math.sign(l)*Math.sqrt(Math.abs(l))}function Xse(){var c,l=t8(),o=[0,1],a=!1;function u(h){var d=MWe(l(h));return isNaN(d)?c:a?Math.round(d):d}return u.invert=function(h){return l.invert(Zse(h))},u.domain=function(h){return arguments.length?(l.domain(h),u):l.domain()},u.range=function(h){return arguments.length?(l.range((o=Array.from(h,Gk)).map(Zse)),u):o.slice()},u.rangeRound=function(h){return u.range(h).round(!0)},u.round=function(h){return arguments.length?(a=!!h,u):a},u.clamp=function(h){return arguments.length?(l.clamp(h),u):l.clamp()},u.unknown=function(h){return arguments.length?(c=h,u):c},u.copy=function(){return Xse(l.domain(),o).round(a).clamp(l.clamp()).unknown(c)},eu.apply(u,arguments),Rp(u)}function Yse(){var c,l=[],o=[],a=[];function u(){var d=0,f=Math.max(1,o.length);for(a=new Array(f-1);++d<f;)a[d-1]=fte(l,d/f);return h}function h(d){return null==d||isNaN(d=+d)?c:o[Sm(a,d)]}return h.invertExtent=function(d){var f=o.indexOf(d);return f<0?[NaN,NaN]:[f>0?a[f-1]:l[0],f<a.length?a[f]:l[l.length-1]]},h.domain=function(d){if(!arguments.length)return l.slice();l=[];for(let f of d)null!=f&&!isNaN(f=+f)&&l.push(f);return l.sort(Fs),u()},h.range=function(d){return arguments.length?(o=Array.from(d),u()):o.slice()},h.unknown=function(d){return arguments.length?(c=d,h):c},h.quantiles=function(){return a.slice()},h.copy=function(){return Yse().domain(l).range(o).unknown(c)},eu.apply(h,arguments)}function Kse(){var h,l=0,o=1,a=1,c=[.5],u=[0,1];function d(p){return null!=p&&p<=p?u[Sm(c,p,0,a)]:h}function f(){var p=-1;for(c=new Array(a);++p<a;)c[p]=((p+1)*o-(p-a)*l)/(a+1);return d}return d.domain=function(p){return arguments.length?([l,o]=p,l=+l,o=+o,f()):[l,o]},d.range=function(p){return arguments.length?(a=(u=Array.from(p)).length-1,f()):u.slice()},d.invertExtent=function(p){var g=u.indexOf(p);return g<0?[NaN,NaN]:g<1?[l,c[0]]:g>=a?[c[a-1],o]:[c[g-1],c[g]]},d.unknown=function(p){return arguments.length&&(h=p),d},d.thresholds=function(){return c.slice()},d.copy=function(){return Kse().domain([l,o]).range(u).unknown(h)},eu.apply(Rp(d),arguments)}function Jse(){var a,l=[.5],o=[0,1],c=1;function u(h){return null!=h&&h<=h?o[Sm(l,h,0,c)]:a}return u.domain=function(h){return arguments.length?(l=Array.from(h),c=Math.min(l.length,o.length-1),u):l.slice()},u.range=function(h){return arguments.length?(o=Array.from(h),c=Math.min(l.length,o.length-1),u):o.slice()},u.invertExtent=function(h){var d=o.indexOf(h);return[l[d-1],l[d]]},u.unknown=function(h){return arguments.length?(a=h,u):a},u.copy=function(){return Jse().domain(l).range(o).unknown(a)},eu.apply(u,arguments)}const xf=1e3,tu=6e4,Cf=60*tu,Zm=24*Cf,o8=7*Zm,a8=365*Zm;var l8=new Date,c8=new Date;function Do(l,o,a,c){function u(h){return l(h=0===arguments.length?new Date:new Date(+h)),h}return u.floor=function(h){return l(h=new Date(+h)),h},u.ceil=function(h){return l(h=new Date(h-1)),o(h,1),l(h),h},u.round=function(h){var d=u(h),f=u.ceil(h);return h-d<f-h?d:f},u.offset=function(h,d){return o(h=new Date(+h),null==d?1:Math.floor(d)),h},u.range=function(h,d,f){var g,p=[];if(h=u.ceil(h),f=null==f?1:Math.floor(f),!(h<d&&f>0))return p;do{p.push(g=new Date(+h)),o(h,f),l(h)}while(g<h&&h<d);return p},u.filter=function(h){return Do(function(d){if(d>=d)for(;l(d),!h(d);)d.setTime(d-1)},function(d,f){if(d>=d)if(f<0)for(;++f<=0;)for(;o(d,-1),!h(d););else for(;--f>=0;)for(;o(d,1),!h(d););})},a&&(u.count=function(h,d){return l8.setTime(+h),c8.setTime(+d),l(l8),l(c8),Math.floor(a(l8,c8))},u.every=function(h){return h=Math.floor(h),isFinite(h)&&h>0?h>1?u.filter(c?function(d){return c(d)%h==0}:function(d){return u.count(0,d)%h==0}):u:null}),u}var jk=Do(function(){},function(l,o){l.setTime(+l+o)},function(l,o){return o-l});jk.every=function(l){return l=Math.floor(l),isFinite(l)&&l>0?l>1?Do(function(o){o.setTime(Math.floor(o/l)*l)},function(o,a){o.setTime(+o+a*l)},function(o,a){return(a-o)/l}):jk:null};const u8=jk;var toe=jk.range,noe=Do(function(l){l.setTime(l-l.getMilliseconds())},function(l,o){l.setTime(+l+o*xf)},function(l,o){return(o-l)/xf},function(l){return l.getUTCSeconds()});const Fp=noe;var ioe=noe.range,roe=Do(function(l){l.setTime(l-l.getMilliseconds()-l.getSeconds()*xf)},function(l,o){l.setTime(+l+o*tu)},function(l,o){return(o-l)/tu},function(l){return l.getMinutes()});const h8=roe;var EWe=roe.range,soe=Do(function(l){l.setTime(l-l.getMilliseconds()-l.getSeconds()*xf-l.getMinutes()*tu)},function(l,o){l.setTime(+l+o*Cf)},function(l,o){return(o-l)/Cf},function(l){return l.getHours()});const d8=soe;var AWe=soe.range,ooe=Do(l=>l.setHours(0,0,0,0),(l,o)=>l.setDate(l.getDate()+o),(l,o)=>(o-l-(o.getTimezoneOffset()-l.getTimezoneOffset())*tu)/Zm,l=>l.getDate()-1);const dS=ooe;var IWe=ooe.range;function Xm(l){return Do(function(o){o.setDate(o.getDate()-(o.getDay()+7-l)%7),o.setHours(0,0,0,0)},function(o,a){o.setDate(o.getDate()+7*a)},function(o,a){return(a-o-(a.getTimezoneOffset()-o.getTimezoneOffset())*tu)/o8})}var b_=Xm(0),fS=Xm(1),aoe=Xm(2),loe=Xm(3),Ym=Xm(4),coe=Xm(5),uoe=Xm(6),hoe=b_.range,PWe=fS.range,RWe=aoe.range,FWe=loe.range,NWe=Ym.range,LWe=coe.range,BWe=uoe.range,doe=Do(function(l){l.setDate(1),l.setHours(0,0,0,0)},function(l,o){l.setMonth(l.getMonth()+o)},function(l,o){return o.getMonth()-l.getMonth()+12*(o.getFullYear()-l.getFullYear())},function(l){return l.getMonth()});const f8=doe;var VWe=doe.range,p8=Do(function(l){l.setMonth(0,1),l.setHours(0,0,0,0)},function(l,o){l.setFullYear(l.getFullYear()+o)},function(l,o){return o.getFullYear()-l.getFullYear()},function(l){return l.getFullYear()});p8.every=function(l){return isFinite(l=Math.floor(l))&&l>0?Do(function(o){o.setFullYear(Math.floor(o.getFullYear()/l)*l),o.setMonth(0,1),o.setHours(0,0,0,0)},function(o,a){o.setFullYear(o.getFullYear()+a*l)}):null};const Np=p8;var zWe=p8.range,foe=Do(function(l){l.setUTCSeconds(0,0)},function(l,o){l.setTime(+l+o*tu)},function(l,o){return(o-l)/tu},function(l){return l.getUTCMinutes()});const g8=foe;var UWe=foe.range,poe=Do(function(l){l.setUTCMinutes(0,0,0)},function(l,o){l.setTime(+l+o*Cf)},function(l,o){return(o-l)/Cf},function(l){return l.getUTCHours()});const m8=poe;var HWe=poe.range,goe=Do(function(l){l.setUTCHours(0,0,0,0)},function(l,o){l.setUTCDate(l.getUTCDate()+o)},function(l,o){return(o-l)/Zm},function(l){return l.getUTCDate()-1});const pS=goe;var $We=goe.range;function Km(l){return Do(function(o){o.setUTCDate(o.getUTCDate()-(o.getUTCDay()+7-l)%7),o.setUTCHours(0,0,0,0)},function(o,a){o.setUTCDate(o.getUTCDate()+7*a)},function(o,a){return(a-o)/o8})}var x_=Km(0),gS=Km(1),moe=Km(2),voe=Km(3),Jm=Km(4),yoe=Km(5),_oe=Km(6),boe=x_.range,WWe=gS.range,GWe=moe.range,QWe=voe.range,jWe=Jm.range,qWe=yoe.range,ZWe=_oe.range,xoe=Do(function(l){l.setUTCDate(1),l.setUTCHours(0,0,0,0)},function(l,o){l.setUTCMonth(l.getUTCMonth()+o)},function(l,o){return o.getUTCMonth()-l.getUTCMonth()+12*(o.getUTCFullYear()-l.getUTCFullYear())},function(l){return l.getUTCMonth()});const v8=xoe;var XWe=xoe.range,y8=Do(function(l){l.setUTCMonth(0,1),l.setUTCHours(0,0,0,0)},function(l,o){l.setUTCFullYear(l.getUTCFullYear()+o)},function(l,o){return o.getUTCFullYear()-l.getUTCFullYear()},function(l){return l.getUTCFullYear()});y8.every=function(l){return isFinite(l=Math.floor(l))&&l>0?Do(function(o){o.setUTCFullYear(Math.floor(o.getUTCFullYear()/l)*l),o.setUTCMonth(0,1),o.setUTCHours(0,0,0,0)},function(o,a){o.setUTCFullYear(o.getUTCFullYear()+a*l)}):null};const Lp=y8;var YWe=y8.range;function Coe(l,o,a,c,u,h){const d=[[Fp,1,xf],[Fp,5,5e3],[Fp,15,15e3],[Fp,30,3e4],[h,1,tu],[h,5,5*tu],[h,15,15*tu],[h,30,30*tu],[u,1,Cf],[u,3,3*Cf],[u,6,6*Cf],[u,12,12*Cf],[c,1,Zm],[c,2,2*Zm],[a,1,o8],[o,1,2592e6],[o,3,7776e6],[l,1,a8]];function p(g,m,v){const y=Math.abs(m-g)/v,_=iD(([,,x])=>x).right(d,y);if(_===d.length)return l.every(Vy(g/a8,m/a8,v));if(0===_)return u8.every(Math.max(Vy(g,m,v),1));const[b,C]=d[y/d[_-1][2]<d[_][2]/y?_-1:_];return b.every(C)}return[function f(g,m,v){const y=m<g;y&&([g,m]=[m,g]);const _=v&&"function"==typeof v.range?v:p(g,m,v),b=_?_.range(g,+m+1):[];return y?b.reverse():b},p]}const[Soe,woe]=Coe(Lp,v8,x_,pS,m8,g8),[Toe,Ooe]=Coe(Np,f8,b_,dS,d8,h8);function _8(l){if(0<=l.y&&l.y<100){var o=new Date(-1,l.m,l.d,l.H,l.M,l.S,l.L);return o.setFullYear(l.y),o}return new Date(l.y,l.m,l.d,l.H,l.M,l.S,l.L)}function b8(l){if(0<=l.y&&l.y<100){var o=new Date(Date.UTC(-1,l.m,l.d,l.H,l.M,l.S,l.L));return o.setUTCFullYear(l.y),o}return new Date(Date.UTC(l.y,l.m,l.d,l.H,l.M,l.S,l.L))}function mS(l,o,a){return{y:l,m:o,d:a,H:0,M:0,S:0,L:0}}function Doe(l){var o=l.dateTime,a=l.date,c=l.time,u=l.periods,h=l.days,d=l.shortDays,f=l.months,p=l.shortMonths,g=vS(u),m=yS(u),v=vS(h),y=yS(h),_=vS(d),b=yS(d),C=vS(f),x=yS(f),S=vS(p),w=yS(p),O={a:function $(Me){return d[Me.getDay()]},A:function H(Me){return h[Me.getDay()]},b:function G(Me){return p[Me.getMonth()]},B:function W(Me){return f[Me.getMonth()]},c:null,d:Poe,e:Poe,f:bGe,g:EGe,G:IGe,H:vGe,I:yGe,j:_Ge,L:Roe,m:xGe,M:CGe,p:function X(Me){return u[+(Me.getHours()>=12)]},q:function K(Me){return 1+~~(Me.getMonth()/3)},Q:zoe,s:Uoe,S:SGe,u:wGe,U:TGe,V:OGe,w:DGe,W:kGe,x:null,X:null,y:MGe,Y:AGe,Z:PGe,"%":Voe},T={a:function ae(Me){return d[Me.getUTCDay()]},A:function se(Me){return h[Me.getUTCDay()]},b:function Ce(Me){return p[Me.getUTCMonth()]},B:function ve(Me){return f[Me.getUTCMonth()]},c:null,d:Noe,e:Noe,f:LGe,g:jGe,G:ZGe,H:RGe,I:FGe,j:NGe,L:Loe,m:BGe,M:VGe,p:function Oe(Me){return u[+(Me.getUTCHours()>=12)]},q:function $e(Me){return 1+~~(Me.getUTCMonth()/3)},Q:zoe,s:Uoe,S:zGe,u:UGe,U:HGe,V:$Ge,w:WGe,W:GGe,x:null,X:null,y:QGe,Y:qGe,Z:XGe,"%":Voe},M={a:function B(Me,Ie,Xe){var ue=_.exec(Ie.slice(Xe));return ue?(Me.w=b.get(ue[0].toLowerCase()),Xe+ue[0].length):-1},A:function V(Me,Ie,Xe){var ue=v.exec(Ie.slice(Xe));return ue?(Me.w=y.get(ue[0].toLowerCase()),Xe+ue[0].length):-1},b:function Q(Me,Ie,Xe){var ue=S.exec(Ie.slice(Xe));return ue?(Me.m=w.get(ue[0].toLowerCase()),Xe+ue[0].length):-1},B:function j(Me,Ie,Xe){var ue=C.exec(Ie.slice(Xe));return ue?(Me.m=x.get(ue[0].toLowerCase()),Xe+ue[0].length):-1},c:function N(Me,Ie,Xe){return E(Me,o,Ie,Xe)},d:Aoe,e:Aoe,f:fGe,g:Eoe,G:Moe,H:Ioe,I:Ioe,j:cGe,L:dGe,m:lGe,M:uGe,p:function P(Me,Ie,Xe){var ue=g.exec(Ie.slice(Xe));return ue?(Me.p=m.get(ue[0].toLowerCase()),Xe+ue[0].length):-1},q:aGe,Q:gGe,s:mGe,S:hGe,u:nGe,U:iGe,V:rGe,w:tGe,W:sGe,x:function U(Me,Ie,Xe){return E(Me,a,Ie,Xe)},X:function z(Me,Ie,Xe){return E(Me,c,Ie,Xe)},y:Eoe,Y:Moe,Z:oGe,"%":pGe};function A(Me,Ie){return function(Xe){var Qe,we,We,ue=[],Re=-1,Ye=0,nt=Me.length;for(Xe instanceof Date||(Xe=new Date(+Xe));++Re<nt;)37===Me.charCodeAt(Re)&&(ue.push(Me.slice(Ye,Re)),null!=(we=koe[Qe=Me.charAt(++Re)])?Qe=Me.charAt(++Re):we="e"===Qe?" ":"0",(We=Ie[Qe])&&(Qe=We(Xe,we)),ue.push(Qe),Ye=Re+1);return ue.push(Me.slice(Ye,Re)),ue.join("")}}function I(Me,Ie){return function(Xe){var Ye,nt,ue=mS(1900,void 0,1);if(E(ue,Me,Xe+="",0)!=Xe.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(1e3*ue.s+("L"in ue?ue.L:0));if(Ie&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+12*ue.p),void 0===ue.m&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(nt=(Ye=b8(mS(ue.y,0,1))).getUTCDay(),Ye=nt>4||0===nt?gS.ceil(Ye):gS(Ye),Ye=pS.offset(Ye,7*(ue.V-1)),ue.y=Ye.getUTCFullYear(),ue.m=Ye.getUTCMonth(),ue.d=Ye.getUTCDate()+(ue.w+6)%7):(nt=(Ye=_8(mS(ue.y,0,1))).getDay(),Ye=nt>4||0===nt?fS.ceil(Ye):fS(Ye),Ye=dS.offset(Ye,7*(ue.V-1)),ue.y=Ye.getFullYear(),ue.m=Ye.getMonth(),ue.d=Ye.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),nt="Z"in ue?b8(mS(ue.y,0,1)).getUTCDay():_8(mS(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+7*ue.W-(nt+5)%7:ue.w+7*ue.U-(nt+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,b8(ue)):_8(ue)}}function E(Me,Ie,Xe,ue){for(var Qe,we,Re=0,Ye=Ie.length,nt=Xe.length;Re<Ye;){if(ue>=nt)return-1;if(37===(Qe=Ie.charCodeAt(Re++))){if(Qe=Ie.charAt(Re++),!(we=M[Qe in koe?Ie.charAt(Re++):Qe])||(ue=we(Me,Xe,ue))<0)return-1}else if(Qe!=Xe.charCodeAt(ue++))return-1}return ue}return O.x=A(a,O),O.X=A(c,O),O.c=A(o,O),T.x=A(a,T),T.X=A(c,T),T.c=A(o,T),{format:function(Me){var Ie=A(Me+="",O);return Ie.toString=function(){return Me},Ie},parse:function(Me){var Ie=I(Me+="",!1);return Ie.toString=function(){return Me},Ie},utcFormat:function(Me){var Ie=A(Me+="",T);return Ie.toString=function(){return Me},Ie},utcParse:function(Me){var Ie=I(Me+="",!0);return Ie.toString=function(){return Me},Ie}}}var C_,x8,Hoe,qk,C8,koe={"-":"",_:" ",0:"0"},Ho=/^\s*\d+/,KWe=/^%/,JWe=/[\\^$*+?|[\]().{}]/g;function hr(l,o,a){var c=l<0?"-":"",u=(c?-l:l)+"",h=u.length;return c+(h<a?new Array(a-h+1).join(o)+u:u)}function eGe(l){return l.replace(JWe,"\\$&")}function vS(l){return new RegExp("^(?:"+l.map(eGe).join("|")+")","i")}function yS(l){return new Map(l.map((o,a)=>[o.toLowerCase(),a]))}function tGe(l,o,a){var c=Ho.exec(o.slice(a,a+1));return c?(l.w=+c[0],a+c[0].length):-1}function nGe(l,o,a){var c=Ho.exec(o.slice(a,a+1));return c?(l.u=+c[0],a+c[0].length):-1}function iGe(l,o,a){var c=Ho.exec(o.slice(a,a+2));return c?(l.U=+c[0],a+c[0].length):-1}function rGe(l,o,a){var c=Ho.exec(o.slice(a,a+2));return c?(l.V=+c[0],a+c[0].length):-1}function sGe(l,o,a){var c=Ho.exec(o.slice(a,a+2));return c?(l.W=+c[0],a+c[0].length):-1}function Moe(l,o,a){var c=Ho.exec(o.slice(a,a+4));return c?(l.y=+c[0],a+c[0].length):-1}function Eoe(l,o,a){var c=Ho.exec(o.slice(a,a+2));return c?(l.y=+c[0]+(+c[0]>68?1900:2e3),a+c[0].length):-1}function oGe(l,o,a){var c=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(o.slice(a,a+6));return c?(l.Z=c[1]?0:-(c[2]+(c[3]||"00")),a+c[0].length):-1}function aGe(l,o,a){var c=Ho.exec(o.slice(a,a+1));return c?(l.q=3*c[0]-3,a+c[0].length):-1}function lGe(l,o,a){var c=Ho.exec(o.slice(a,a+2));return c?(l.m=c[0]-1,a+c[0].length):-1}function Aoe(l,o,a){var c=Ho.exec(o.slice(a,a+2));return c?(l.d=+c[0],a+c[0].length):-1}function cGe(l,o,a){var c=Ho.exec(o.slice(a,a+3));return c?(l.m=0,l.d=+c[0],a+c[0].length):-1}function Ioe(l,o,a){var c=Ho.exec(o.slice(a,a+2));return c?(l.H=+c[0],a+c[0].length):-1}function uGe(l,o,a){var c=Ho.exec(o.slice(a,a+2));return c?(l.M=+c[0],a+c[0].length):-1}function hGe(l,o,a){var c=Ho.exec(o.slice(a,a+2));return c?(l.S=+c[0],a+c[0].length):-1}function dGe(l,o,a){var c=Ho.exec(o.slice(a,a+3));return c?(l.L=+c[0],a+c[0].length):-1}function fGe(l,o,a){var c=Ho.exec(o.slice(a,a+6));return c?(l.L=Math.floor(c[0]/1e3),a+c[0].length):-1}function pGe(l,o,a){var c=KWe.exec(o.slice(a,a+1));return c?a+c[0].length:-1}function gGe(l,o,a){var c=Ho.exec(o.slice(a));return c?(l.Q=+c[0],a+c[0].length):-1}function mGe(l,o,a){var c=Ho.exec(o.slice(a));return c?(l.s=+c[0],a+c[0].length):-1}function Poe(l,o){return hr(l.getDate(),o,2)}function vGe(l,o){return hr(l.getHours(),o,2)}function yGe(l,o){return hr(l.getHours()%12||12,o,2)}function _Ge(l,o){return hr(1+dS.count(Np(l),l),o,3)}function Roe(l,o){return hr(l.getMilliseconds(),o,3)}function bGe(l,o){return Roe(l,o)+"000"}function xGe(l,o){return hr(l.getMonth()+1,o,2)}function CGe(l,o){return hr(l.getMinutes(),o,2)}function SGe(l,o){return hr(l.getSeconds(),o,2)}function wGe(l){var o=l.getDay();return 0===o?7:o}function TGe(l,o){return hr(b_.count(Np(l)-1,l),o,2)}function Foe(l){var o=l.getDay();return o>=4||0===o?Ym(l):Ym.ceil(l)}function OGe(l,o){return l=Foe(l),hr(Ym.count(Np(l),l)+(4===Np(l).getDay()),o,2)}function DGe(l){return l.getDay()}function kGe(l,o){return hr(fS.count(Np(l)-1,l),o,2)}function MGe(l,o){return hr(l.getFullYear()%100,o,2)}function EGe(l,o){return hr((l=Foe(l)).getFullYear()%100,o,2)}function AGe(l,o){return hr(l.getFullYear()%1e4,o,4)}function IGe(l,o){var a=l.getDay();return hr((l=a>=4||0===a?Ym(l):Ym.ceil(l)).getFullYear()%1e4,o,4)}function PGe(l){var o=l.getTimezoneOffset();return(o>0?"-":(o*=-1,"+"))+hr(o/60|0,"0",2)+hr(o%60,"0",2)}function Noe(l,o){return hr(l.getUTCDate(),o,2)}function RGe(l,o){return hr(l.getUTCHours(),o,2)}function FGe(l,o){return hr(l.getUTCHours()%12||12,o,2)}function NGe(l,o){return hr(1+pS.count(Lp(l),l),o,3)}function Loe(l,o){return hr(l.getUTCMilliseconds(),o,3)}function LGe(l,o){return Loe(l,o)+"000"}function BGe(l,o){return hr(l.getUTCMonth()+1,o,2)}function VGe(l,o){return hr(l.getUTCMinutes(),o,2)}function zGe(l,o){return hr(l.getUTCSeconds(),o,2)}function UGe(l){var o=l.getUTCDay();return 0===o?7:o}function HGe(l,o){return hr(x_.count(Lp(l)-1,l),o,2)}function Boe(l){var o=l.getUTCDay();return o>=4||0===o?Jm(l):Jm.ceil(l)}function $Ge(l,o){return l=Boe(l),hr(Jm.count(Lp(l),l)+(4===Lp(l).getUTCDay()),o,2)}function WGe(l){return l.getUTCDay()}function GGe(l,o){return hr(gS.count(Lp(l)-1,l),o,2)}function QGe(l,o){return hr(l.getUTCFullYear()%100,o,2)}function jGe(l,o){return hr((l=Boe(l)).getUTCFullYear()%100,o,2)}function qGe(l,o){return hr(l.getUTCFullYear()%1e4,o,4)}function ZGe(l,o){var a=l.getUTCDay();return hr((l=a>=4||0===a?Jm(l):Jm.ceil(l)).getUTCFullYear()%1e4,o,4)}function XGe(){return"+0000"}function Voe(){return"%"}function zoe(l){return+l}function Uoe(l){return Math.floor(+l/1e3)}function $oe(l){return C_=Doe(l),x8=C_.format,Hoe=C_.parse,qk=C_.utcFormat,C8=C_.utcParse,C_}function YGe(l){return new Date(l)}function KGe(l){return l instanceof Date?+l:+new Date(+l)}function S8(l,o,a,c,u,h,d,f,p,g){var m=t8(),v=m.invert,y=m.domain,_=g(".%L"),b=g(":%S"),C=g("%I:%M"),x=g("%I %p"),S=g("%a %d"),w=g("%b %d"),O=g("%B"),T=g("%Y");function M(A){return(p(A)<A?_:f(A)<A?b:d(A)<A?C:h(A)<A?x:c(A)<A?u(A)<A?S:w:a(A)<A?O:T)(A)}return m.invert=function(A){return new Date(v(A))},m.domain=function(A){return arguments.length?y(Array.from(A,KGe)):y().map(YGe)},m.ticks=function(A){var I=y();return l(I[0],I[I.length-1],null==A?10:A)},m.tickFormat=function(A,I){return null==I?M:g(I)},m.nice=function(A){var I=y();return(!A||"function"!=typeof A.range)&&(A=o(I[0],I[I.length-1],null==A?10:A)),A?y(zse(I,A)):m},m.copy=function(){return hS(m,S8(l,o,a,c,u,h,d,f,p,g))},m}function JGe(){return eu.apply(S8(Toe,Ooe,Np,f8,b_,dS,d8,h8,Fp,x8).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function eQe(){return eu.apply(S8(Soe,woe,Lp,v8,x_,pS,m8,g8,Fp,qk).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Zk(){var a,c,u,h,p,l=0,o=1,d=rl,f=!1;function g(v){return null==v||isNaN(v=+v)?p:d(0===u?.5:(v=(h(v)-a)*u,f?Math.max(0,Math.min(1,v)):v))}function m(v){return function(y){var _,b;return arguments.length?([_,b]=y,d=v(_,b),g):[d(0),d(1)]}}return g.domain=function(v){return arguments.length?([l,o]=v,a=h(l=+l),c=h(o=+o),u=a===c?0:1/(c-a),g):[l,o]},g.clamp=function(v){return arguments.length?(f=!!v,g):f},g.interpolator=function(v){return arguments.length?(d=v,g):d},g.range=m(Sp),g.rangeRound=m($k),g.unknown=function(v){return arguments.length?(p=v,g):p},function(v){return h=v,a=v(l),c=v(o),u=a===c?0:1/(c-a),g}}function Bp(l,o){return o.domain(l.domain()).interpolator(l.interpolator()).clamp(l.clamp()).unknown(l.unknown())}function Woe(){var l=Rp(Zk()(rl));return l.copy=function(){return Bp(l,Woe())},bf.apply(l,arguments)}function Goe(){var l=n8(Zk()).domain([1,10]);return l.copy=function(){return Bp(l,Goe()).base(l.base())},bf.apply(l,arguments)}function Qoe(){var l=i8(Zk());return l.copy=function(){return Bp(l,Qoe()).constant(l.constant())},bf.apply(l,arguments)}function w8(){var l=r8(Zk());return l.copy=function(){return Bp(l,w8()).exponent(l.exponent())},bf.apply(l,arguments)}function tQe(){return w8.apply(null,arguments).exponent(.5)}function joe(){var l=[],o=rl;function a(c){if(null!=c&&!isNaN(c=+c))return o((Sm(l,c,1)-1)/(l.length-1))}return a.domain=function(c){if(!arguments.length)return l.slice();l=[];for(let u of c)null!=u&&!isNaN(u=+u)&&l.push(u);return l.sort(Fs),a},a.interpolator=function(c){return arguments.length?(o=c,a):o},a.range=function(){return l.map((c,u)=>o(u/(l.length-1)))},a.quantiles=function(c){return Array.from({length:c+1},(u,h)=>CC(l,h/c))},a.copy=function(){return joe(o).domain(l)},bf.apply(a,arguments)}function Xk(){var u,h,d,f,p,m,y,l=0,o=.5,a=1,c=1,g=rl,v=!1;function _(C){return isNaN(C=+C)?y:(C=.5+((C=+m(C))-h)*(c*C<c*h?f:p),g(v?Math.max(0,Math.min(1,C)):C))}function b(C){return function(x){var S,w,O;return arguments.length?([S,w,O]=x,g=Mse(C,[S,w,O]),_):[g(0),g(.5),g(1)]}}return _.domain=function(C){return arguments.length?([l,o,a]=C,u=m(l=+l),h=m(o=+o),d=m(a=+a),f=u===h?0:.5/(h-u),p=h===d?0:.5/(d-h),c=h<u?-1:1,_):[l,o,a]},_.clamp=function(C){return arguments.length?(v=!!C,_):v},_.interpolator=function(C){return arguments.length?(g=C,_):g},_.range=b(Sp),_.rangeRound=b($k),_.unknown=function(C){return arguments.length?(y=C,_):y},function(C){return m=C,u=C(l),h=C(o),d=C(a),f=u===h?0:.5/(h-u),p=h===d?0:.5/(d-h),c=h<u?-1:1,_}}function qoe(){var l=Rp(Xk()(rl));return l.copy=function(){return Bp(l,qoe())},bf.apply(l,arguments)}function Zoe(){var l=n8(Xk()).domain([.1,1,10]);return l.copy=function(){return Bp(l,Zoe()).base(l.base())},bf.apply(l,arguments)}function Xoe(){var l=i8(Xk());return l.copy=function(){return Bp(l,Xoe()).constant(l.constant())},bf.apply(l,arguments)}function T8(){var l=r8(Xk());return l.copy=function(){return Bp(l,T8()).exponent(l.exponent())},bf.apply(l,arguments)}function nQe(){return T8.apply(null,arguments).exponent(.5)}function ki(l){for(var o=l.length/6|0,a=new Array(o),c=0;c<o;)a[c]="#"+l.slice(6*c,6*++c);return a}$oe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const iQe=ki("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),rQe=ki("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),sQe=ki("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),oQe=ki("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),aQe=ki("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),lQe=ki("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),cQe=ki("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),uQe=ki("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),hQe=ki("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),dQe=ki("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Br=l=>qte(l[l.length-1]);var Yoe=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ki);const fQe=Br(Yoe);var Koe=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ki);const pQe=Br(Koe);var Joe=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ki);const gQe=Br(Joe);var eae=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ki);const mQe=Br(eae);var tae=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ki);const vQe=Br(tae);var nae=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ki);const yQe=Br(nae);var iae=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ki);const _Qe=Br(iae);var rae=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ki);const bQe=Br(rae);var sae=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ki);const xQe=Br(sae);var oae=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ki);const CQe=Br(oae);var aae=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ki);const SQe=Br(aae);var lae=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ki);const wQe=Br(lae);var cae=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ki);const TQe=Br(cae);var uae=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ki);const OQe=Br(uae);var hae=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ki);const DQe=Br(hae);var dae=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ki);const kQe=Br(dae);var fae=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ki);const MQe=Br(fae);var pae=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ki);const EQe=Br(pae);var gae=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ki);const AQe=Br(gae);var mae=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ki);const IQe=Br(mae);var vae=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ki);const PQe=Br(vae);var yae=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ki);const RQe=Br(yae);var _ae=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ki);const FQe=Br(_ae);var bae=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ki);const NQe=Br(bae);var xae=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ki);const LQe=Br(xae);var Cae=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ki);const BQe=Br(Cae);var Sae=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ki);const VQe=Br(Sae);function zQe(l){return l=Math.max(0,Math.min(1,l)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-l*(35.34-l*(2381.73-l*(6402.7-l*(7024.72-2710.57*l)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+l*(170.73+l*(52.82-l*(131.46-l*(176.58-67.37*l)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+l*(442.36-l*(2482.43-l*(6167.24-l*(6614.94-2475.67*l)))))))+")"}const UQe=Wk(ju(300,.5,0),ju(-240,.5,1));var HQe=Wk(ju(-100,.75,.35),ju(80,1.5,.8)),$Qe=Wk(ju(260,.75,.35),ju(80,1.5,.8)),Yk=ju();function WQe(l){(l<0||l>1)&&(l-=Math.floor(l));var o=Math.abs(l-.5);return Yk.h=360*l-100,Yk.s=1.5-1.5*o,Yk.l=.8-.9*o,Yk+""}var Kk=ff(),GQe=Math.PI/3,QQe=2*Math.PI/3;function jQe(l){var o;return l=(.5-l)*Math.PI,Kk.r=255*(o=Math.sin(l))*o,Kk.g=255*(o=Math.sin(l+GQe))*o,Kk.b=255*(o=Math.sin(l+QQe))*o,Kk+""}function qQe(l){return l=Math.max(0,Math.min(1,l)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+l*(1172.33-l*(10793.56-l*(33300.12-l*(38394.49-14825.05*l)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+l*(557.33+l*(1225.33-l*(3574.96-l*(1073.77+707.56*l)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+l*(3211.1-l*(15327.97-l*(27814-l*(22569.18-6838.66*l)))))))+")"}function Jk(l){var o=l.length;return function(a){return l[Math.max(0,Math.min(o-1,Math.floor(a*o)))]}}const ZQe=Jk(ki("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var XQe=Jk(ki("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),YQe=Jk(ki("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),KQe=Jk(ki("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function JQe(l){return ro(pD(l).call(document.documentElement))}var eje=0;function wae(){return new O8}function O8(){this._="@"+(++eje).toString(36)}function tje(l,o){return l.target&&(l=Jte(l),void 0===o&&(o=l.currentTarget),l=l.touches||[l]),Array.from(l,a=>sc(a,o))}function nje(l){return"string"==typeof l?new Qa([document.querySelectorAll(l)],[document.documentElement]):new Qa([Ote(l)],TL)}function xi(l){return function(){return l}}O8.prototype=wae.prototype={constructor:O8,get:function(l){for(var o=this._;!(o in l);)if(!(l=l.parentNode))return;return l[o]},set:function(l,o){return l[this._]=o},remove:function(l){return this._ in l&&delete l[this._]},toString:function(){return this._}};const Tae=Math.abs,ba=Math.atan2,Sf=Math.cos,ije=Math.max,S_=Math.min,Al=Math.sin,qr=Math.sqrt,xa=1e-12,Vp=Math.PI,eM=Vp/2,zp=2*Vp;function rje(l){return l>1?0:l<-1?Vp:Math.acos(l)}function Oae(l){return l>=1?eM:l<=-1?-eM:Math.asin(l)}function sje(l){return l.innerRadius}function oje(l){return l.outerRadius}function aje(l){return l.startAngle}function lje(l){return l.endAngle}function cje(l){return l&&l.padAngle}function uje(l,o,a,c,u,h,d,f){var p=a-l,g=c-o,m=d-u,v=f-h,y=v*p-m*g;if(!(y*y<xa))return[l+(y=(m*(o-h)-v*(l-u))/y)*p,o+y*g]}function tM(l,o,a,c,u,h,d){var f=l-a,p=o-c,g=(d?h:-h)/qr(f*f+p*p),m=g*p,v=-g*f,y=l+m,_=o+v,b=a+m,C=c+v,x=(y+b)/2,S=(_+C)/2,w=b-y,O=C-_,T=w*w+O*O,M=u-h,A=y*C-b*_,I=(O<0?-1:1)*qr(ije(0,M*M*T-A*A)),E=(A*O-w*I)/T,P=(-A*w-O*I)/T,B=(A*O+w*I)/T,V=(-A*w+O*I)/T,Q=E-x,j=P-S,N=B-x,U=V-S;return Q*Q+j*j>N*N+U*U&&(E=B,P=V),{cx:E,cy:P,x01:-m,y01:-v,x11:E*(u/M-1),y11:P*(u/M-1)}}function D8(){var l=sje,o=oje,a=xi(0),c=null,u=aje,h=lje,d=cje,f=null;function p(){var g,m,v=+l.apply(this,arguments),y=+o.apply(this,arguments),_=u.apply(this,arguments)-eM,b=h.apply(this,arguments)-eM,C=Tae(b-_),x=b>_;if(f||(f=g=mf()),y<v&&(m=y,y=v,v=m),y>xa)if(C>zp-xa)f.moveTo(y*Sf(_),y*Al(_)),f.arc(0,0,y,_,b,!x),v>xa&&(f.moveTo(v*Sf(b),v*Al(b)),f.arc(0,0,v,b,_,x));else{var Q,j,S=_,w=b,O=_,T=b,M=C,A=C,I=d.apply(this,arguments)/2,E=I>xa&&(c?+c.apply(this,arguments):qr(v*v+y*y)),P=S_(Tae(y-v)/2,+a.apply(this,arguments)),B=P,V=P;if(E>xa){var N=Oae(E/v*Al(I)),U=Oae(E/y*Al(I));(M-=2*N)>xa?(O+=N*=x?1:-1,T-=N):(M=0,O=T=(_+b)/2),(A-=2*U)>xa?(S+=U*=x?1:-1,w-=U):(A=0,S=w=(_+b)/2)}var z=y*Sf(S),$=y*Al(S),H=v*Sf(T),G=v*Al(T);if(P>xa){var se,W=y*Sf(w),X=y*Al(w),K=v*Sf(O),ae=v*Al(O);if(C<Vp&&(se=uje(z,$,K,ae,W,X,H,G))){var Ce=z-se[0],ve=$-se[1],Oe=W-se[0],$e=X-se[1],Me=1/Al(rje((Ce*Oe+ve*$e)/(qr(Ce*Ce+ve*ve)*qr(Oe*Oe+$e*$e)))/2),Ie=qr(se[0]*se[0]+se[1]*se[1]);B=S_(P,(v-Ie)/(Me-1)),V=S_(P,(y-Ie)/(Me+1))}}A>xa?V>xa?(Q=tM(K,ae,z,$,y,V,x),j=tM(W,X,H,G,y,V,x),f.moveTo(Q.cx+Q.x01,Q.cy+Q.y01),V<P?f.arc(Q.cx,Q.cy,V,ba(Q.y01,Q.x01),ba(j.y01,j.x01),!x):(f.arc(Q.cx,Q.cy,V,ba(Q.y01,Q.x01),ba(Q.y11,Q.x11),!x),f.arc(0,0,y,ba(Q.cy+Q.y11,Q.cx+Q.x11),ba(j.cy+j.y11,j.cx+j.x11),!x),f.arc(j.cx,j.cy,V,ba(j.y11,j.x11),ba(j.y01,j.x01),!x))):(f.moveTo(z,$),f.arc(0,0,y,S,w,!x)):f.moveTo(z,$),v>xa&&M>xa?B>xa?(Q=tM(H,G,W,X,v,-B,x),j=tM(z,$,K,ae,v,-B,x),f.lineTo(Q.cx+Q.x01,Q.cy+Q.y01),B<P?f.arc(Q.cx,Q.cy,B,ba(Q.y01,Q.x01),ba(j.y01,j.x01),!x):(f.arc(Q.cx,Q.cy,B,ba(Q.y01,Q.x01),ba(Q.y11,Q.x11),!x),f.arc(0,0,v,ba(Q.cy+Q.y11,Q.cx+Q.x11),ba(j.cy+j.y11,j.cx+j.x11),x),f.arc(j.cx,j.cy,B,ba(j.y11,j.x11),ba(j.y01,j.x01),!x))):f.arc(0,0,v,T,O,x):f.lineTo(H,G)}else f.moveTo(0,0);if(f.closePath(),g)return f=null,g+""||null}return p.centroid=function(){var g=(+l.apply(this,arguments)+ +o.apply(this,arguments))/2,m=(+u.apply(this,arguments)+ +h.apply(this,arguments))/2-Vp/2;return[Sf(m)*g,Al(m)*g]},p.innerRadius=function(g){return arguments.length?(l="function"==typeof g?g:xi(+g),p):l},p.outerRadius=function(g){return arguments.length?(o="function"==typeof g?g:xi(+g),p):o},p.cornerRadius=function(g){return arguments.length?(a="function"==typeof g?g:xi(+g),p):a},p.padRadius=function(g){return arguments.length?(c=null==g?null:"function"==typeof g?g:xi(+g),p):c},p.startAngle=function(g){return arguments.length?(u="function"==typeof g?g:xi(+g),p):u},p.endAngle=function(g){return arguments.length?(h="function"==typeof g?g:xi(+g),p):h},p.padAngle=function(g){return arguments.length?(d="function"==typeof g?g:xi(+g),p):d},p.context=function(g){return arguments.length?(f=null==g?null:g,p):f},p}var hje=Array.prototype.slice;function nM(l){return"object"==typeof l&&"length"in l?l:Array.from(l)}function Dae(l){this._context=l}function iM(l){return new Dae(l)}function k8(l){return l[0]}function M8(l){return l[1]}function Ju(l,o){var a=xi(!0),c=null,u=iM,h=null;function d(f){var p,m,y,g=(f=nM(f)).length,v=!1;for(null==c&&(h=u(y=mf())),p=0;p<=g;++p)!(p<g&&a(m=f[p],p,f))===v&&((v=!v)?h.lineStart():h.lineEnd()),v&&h.point(+l(m,p,f),+o(m,p,f));if(y)return h=null,y+""||null}return l="function"==typeof l?l:void 0===l?k8:xi(l),o="function"==typeof o?o:void 0===o?M8:xi(o),d.x=function(f){return arguments.length?(l="function"==typeof f?f:xi(+f),d):l},d.y=function(f){return arguments.length?(o="function"==typeof f?f:xi(+f),d):o},d.defined=function(f){return arguments.length?(a="function"==typeof f?f:xi(!!f),d):a},d.curve=function(f){return arguments.length?(u=f,null!=c&&(h=u(c)),d):u},d.context=function(f){return arguments.length?(null==f?c=h=null:h=u(c=f),d):c},d}function E8(l,o,a){var c=null,u=xi(!0),h=null,d=iM,f=null;function p(m){var v,y,_,C,S,b=(m=nM(m)).length,x=!1,w=new Array(b),O=new Array(b);for(null==h&&(f=d(S=mf())),v=0;v<=b;++v){if(!(v<b&&u(C=m[v],v,m))===x)if(x=!x)y=v,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),_=v-1;_>=y;--_)f.point(w[_],O[_]);f.lineEnd(),f.areaEnd()}x&&(w[v]=+l(C,v,m),O[v]=+o(C,v,m),f.point(c?+c(C,v,m):w[v],a?+a(C,v,m):O[v]))}if(S)return f=null,S+""||null}function g(){return Ju().defined(u).curve(d).context(h)}return l="function"==typeof l?l:void 0===l?k8:xi(+l),o="function"==typeof o?o:xi(void 0===o?0:+o),a="function"==typeof a?a:void 0===a?M8:xi(+a),p.x=function(m){return arguments.length?(l="function"==typeof m?m:xi(+m),c=null,p):l},p.x0=function(m){return arguments.length?(l="function"==typeof m?m:xi(+m),p):l},p.x1=function(m){return arguments.length?(c=null==m?null:"function"==typeof m?m:xi(+m),p):c},p.y=function(m){return arguments.length?(o="function"==typeof m?m:xi(+m),a=null,p):o},p.y0=function(m){return arguments.length?(o="function"==typeof m?m:xi(+m),p):o},p.y1=function(m){return arguments.length?(a=null==m?null:"function"==typeof m?m:xi(+m),p):a},p.lineX0=p.lineY0=function(){return g().x(l).y(o)},p.lineY1=function(){return g().x(l).y(a)},p.lineX1=function(){return g().x(c).y(o)},p.defined=function(m){return arguments.length?(u="function"==typeof m?m:xi(!!m),p):u},p.curve=function(m){return arguments.length?(d=m,null!=h&&(f=d(h)),p):d},p.context=function(m){return arguments.length?(null==m?h=f=null:f=d(h=m),p):h},p}function dje(l,o){return o<l?-1:o>l?1:o>=l?0:NaN}function fje(l){return l}function pje(){var l=fje,o=dje,a=null,c=xi(0),u=xi(zp),h=xi(0);function d(f){var p,m,v,S,T,g=(f=nM(f)).length,y=0,_=new Array(g),b=new Array(g),C=+c.apply(this,arguments),x=Math.min(zp,Math.max(-zp,u.apply(this,arguments)-C)),w=Math.min(Math.abs(x)/g,h.apply(this,arguments)),O=w*(x<0?-1:1);for(p=0;p<g;++p)(T=b[_[p]=p]=+l(f[p],p,f))>0&&(y+=T);for(null!=o?_.sort(function(M,A){return o(b[M],b[A])}):null!=a&&_.sort(function(M,A){return a(f[M],f[A])}),p=0,v=y?(x-g*O)/y:0;p<g;++p,C=S)b[m=_[p]]={data:f[m],index:p,value:T=b[m],startAngle:C,endAngle:S=C+(T>0?T*v:0)+O,padAngle:w};return b}return d.value=function(f){return arguments.length?(l="function"==typeof f?f:xi(+f),d):l},d.sortValues=function(f){return arguments.length?(o=f,a=null,d):o},d.sort=function(f){return arguments.length?(a=f,o=null,d):a},d.startAngle=function(f){return arguments.length?(c="function"==typeof f?f:xi(+f),d):c},d.endAngle=function(f){return arguments.length?(u="function"==typeof f?f:xi(+f),d):u},d.padAngle=function(f){return arguments.length?(h="function"==typeof f?f:xi(+f),d):h},d}Dae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,o){switch(l=+l,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(l,o):this._context.moveTo(l,o);break;case 1:this._point=2;default:this._context.lineTo(l,o)}}};var kae=A8(iM);function Mae(l){this._curve=l}function A8(l){function o(a){return new Mae(l(a))}return o._curve=l,o}function _S(l){var o=l.curve;return l.angle=l.x,delete l.x,l.radius=l.y,delete l.y,l.curve=function(a){return arguments.length?o(A8(a)):o()._curve},l}function Eae(){return _S(Ju().curve(kae))}function Aae(){var l=E8().curve(kae),o=l.curve,a=l.lineX0,c=l.lineX1,u=l.lineY0,h=l.lineY1;return l.angle=l.x,delete l.x,l.startAngle=l.x0,delete l.x0,l.endAngle=l.x1,delete l.x1,l.radius=l.y,delete l.y,l.innerRadius=l.y0,delete l.y0,l.outerRadius=l.y1,delete l.y1,l.lineStartAngle=function(){return _S(a())},delete l.lineX0,l.lineEndAngle=function(){return _S(c())},delete l.lineX1,l.lineInnerRadius=function(){return _S(u())},delete l.lineY0,l.lineOuterRadius=function(){return _S(h())},delete l.lineY1,l.curve=function(d){return arguments.length?o(A8(d)):o()._curve},l}function bS(l,o){return[(o=+o)*Math.cos(l-=Math.PI/2),o*Math.sin(l)]}Mae.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(l,o){this._curve.point(o*Math.sin(l),o*-Math.cos(l))}};class Iae{constructor(o,a){this._context=o,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(o,a){switch(o=+o,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(o,a):this._context.moveTo(o,a);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+o)/2,this._y0,this._x0,a,o,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,o,this._y0,o,a)}this._x0=o,this._y0=a}}class gje{constructor(o){this._context=o}lineStart(){this._point=0}lineEnd(){}point(o,a){if(o=+o,a=+a,0==this._point++)this._x0=o,this._y0=a;else{const c=bS(this._x0,this._y0),u=bS(this._x0,this._y0=(this._y0+a)/2),h=bS(o,this._y0),d=bS(o,a);this._context.moveTo(...c),this._context.bezierCurveTo(...u,...h,...d)}}}function I8(l){return new Iae(l,!0)}function Pae(l){return new Iae(l,!1)}function mje(l){return new gje(l)}function vje(l){return l.source}function yje(l){return l.target}function rM(l){let o=vje,a=yje,c=k8,u=M8,h=null,d=null;function f(){let p;const g=hje.call(arguments),m=o.apply(this,g),v=a.apply(this,g);if(null==h&&(d=l(p=mf())),d.lineStart(),g[0]=m,d.point(+c.apply(this,g),+u.apply(this,g)),g[0]=v,d.point(+c.apply(this,g),+u.apply(this,g)),d.lineEnd(),p)return d=null,p+""||null}return f.source=function(p){return arguments.length?(o=p,f):o},f.target=function(p){return arguments.length?(a=p,f):a},f.x=function(p){return arguments.length?(c="function"==typeof p?p:xi(+p),f):c},f.y=function(p){return arguments.length?(u="function"==typeof p?p:xi(+p),f):u},f.context=function(p){return arguments.length?(null==p?h=d=null:d=l(h=p),f):h},f}function _je(){return rM(I8)}function bje(){return rM(Pae)}function xje(){const l=rM(mje);return l.angle=l.x,delete l.x,l.radius=l.y,delete l.y,l}const Cje=qr(3),Rae={draw(l,o){const a=.59436*qr(o+S_(o/28,.75)),c=a/2,u=c*Cje;l.moveTo(0,a),l.lineTo(0,-a),l.moveTo(-u,-c),l.lineTo(u,c),l.moveTo(-u,c),l.lineTo(u,-c)}},sM={draw(l,o){const a=qr(o/Vp);l.moveTo(a,0),l.arc(0,0,a,0,zp)}},Fae={draw(l,o){const a=qr(o/5)/2;l.moveTo(-3*a,-a),l.lineTo(-a,-a),l.lineTo(-a,-3*a),l.lineTo(a,-3*a),l.lineTo(a,-a),l.lineTo(3*a,-a),l.lineTo(3*a,a),l.lineTo(a,a),l.lineTo(a,3*a),l.lineTo(-a,3*a),l.lineTo(-a,a),l.lineTo(-3*a,a),l.closePath()}},Nae=qr(1/3),Sje=2*Nae,Lae={draw(l,o){const a=qr(o/Sje),c=a*Nae;l.moveTo(0,-a),l.lineTo(c,0),l.lineTo(0,a),l.lineTo(-c,0),l.closePath()}},Bae={draw(l,o){const a=.62625*qr(o);l.moveTo(0,-a),l.lineTo(a,0),l.lineTo(0,a),l.lineTo(-a,0),l.closePath()}},Vae={draw(l,o){const a=.87559*qr(o-S_(o/7,2));l.moveTo(-a,0),l.lineTo(a,0),l.moveTo(0,a),l.lineTo(0,-a)}},zae={draw(l,o){const a=qr(o),c=-a/2;l.rect(c,c,a,a)}},Uae={draw(l,o){const a=.4431*qr(o);l.moveTo(a,a),l.lineTo(a,-a),l.lineTo(-a,-a),l.lineTo(-a,a),l.closePath()}},Hae=Al(Vp/10)/Al(7*Vp/10),Tje=Al(zp/10)*Hae,Oje=-Sf(zp/10)*Hae,$ae={draw(l,o){const a=qr(.8908130915292852*o),c=Tje*a,u=Oje*a;l.moveTo(0,-a),l.lineTo(c,u);for(let h=1;h<5;++h){const d=zp*h/5,f=Sf(d),p=Al(d);l.lineTo(p*a,-f*a),l.lineTo(f*c-p*u,p*c+f*u)}l.closePath()}},P8=qr(3),Wae={draw(l,o){const a=-qr(o/(3*P8));l.moveTo(0,2*a),l.lineTo(-P8*a,-a),l.lineTo(P8*a,-a),l.closePath()}},Dje=qr(3),Gae={draw(l,o){const a=.6824*qr(o),c=a/2,u=a*Dje/2;l.moveTo(0,-a),l.lineTo(u,c),l.lineTo(-u,c),l.closePath()}},nu=-.5,iu=qr(3)/2,R8=1/qr(12),kje=3*(R8/2+1),Qae={draw(l,o){const a=qr(o/kje),c=a/2,u=a*R8,h=c,d=a*R8+a,f=-h,p=d;l.moveTo(c,u),l.lineTo(h,d),l.lineTo(f,p),l.lineTo(nu*c-iu*u,iu*c+nu*u),l.lineTo(nu*h-iu*d,iu*h+nu*d),l.lineTo(nu*f-iu*p,iu*f+nu*p),l.lineTo(nu*c+iu*u,nu*u-iu*c),l.lineTo(nu*h+iu*d,nu*d-iu*h),l.lineTo(nu*f+iu*p,nu*p-iu*f),l.closePath()}},jae={draw(l,o){const a=.6189*qr(o-S_(o/6,1.7));l.moveTo(-a,-a),l.lineTo(a,a),l.moveTo(-a,a),l.lineTo(a,-a)}},qae=[sM,Fae,Lae,zae,$ae,Wae,Qae],Mje=[sM,Vae,jae,Gae,Rae,Uae,Bae];function Eje(l,o){let a=null;function c(){let u;if(a||(a=u=mf()),l.apply(this,arguments).draw(a,+o.apply(this,arguments)),u)return a=null,u+""||null}return l="function"==typeof l?l:xi(l||sM),o="function"==typeof o?o:xi(void 0===o?64:+o),c.type=function(u){return arguments.length?(l="function"==typeof u?u:xi(u),c):l},c.size=function(u){return arguments.length?(o="function"==typeof u?u:xi(+u),c):o},c.context=function(u){return arguments.length?(a=null==u?null:u,c):a},c}function Up(){}function oM(l,o,a){l._context.bezierCurveTo((2*l._x0+l._x1)/3,(2*l._y0+l._y1)/3,(l._x0+2*l._x1)/3,(l._y0+2*l._y1)/3,(l._x0+4*l._x1+o)/6,(l._y0+4*l._y1+a)/6)}function aM(l){this._context=l}function xS(l){return new aM(l)}function Zae(l){this._context=l}function Aje(l){return new Zae(l)}function Xae(l){this._context=l}function Ije(l){return new Xae(l)}function Yae(l,o){this._basis=new aM(l),this._beta=o}aM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:oM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,o){switch(l=+l,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(l,o):this._context.moveTo(l,o);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:oM(this,l,o)}this._x0=this._x1,this._x1=l,this._y0=this._y1,this._y1=o}},Zae.prototype={areaStart:Up,areaEnd:Up,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(l,o){switch(l=+l,o=+o,this._point){case 0:this._point=1,this._x2=l,this._y2=o;break;case 1:this._point=2,this._x3=l,this._y3=o;break;case 2:this._point=3,this._x4=l,this._y4=o,this._context.moveTo((this._x0+4*this._x1+l)/6,(this._y0+4*this._y1+o)/6);break;default:oM(this,l,o)}this._x0=this._x1,this._x1=l,this._y0=this._y1,this._y1=o}},Xae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,o){switch(l=+l,o=+o,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+l)/6,c=(this._y0+4*this._y1+o)/6;this._line?this._context.lineTo(a,c):this._context.moveTo(a,c);break;case 3:this._point=4;default:oM(this,l,o)}this._x0=this._x1,this._x1=l,this._y0=this._y1,this._y1=o}},Yae.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var l=this._x,o=this._y,a=l.length-1;if(a>0)for(var p,c=l[0],u=o[0],h=l[a]-c,d=o[a]-u,f=-1;++f<=a;)this._basis.point(this._beta*l[f]+(1-this._beta)*(c+(p=f/a)*h),this._beta*o[f]+(1-this._beta)*(u+p*d));this._x=this._y=null,this._basis.lineEnd()},point:function(l,o){this._x.push(+l),this._y.push(+o)}};const Pje=function l(o){function a(c){return 1===o?new aM(c):new Yae(c,o)}return a.beta=function(c){return l(+c)},a}(.85);function lM(l,o,a){l._context.bezierCurveTo(l._x1+l._k*(l._x2-l._x0),l._y1+l._k*(l._y2-l._y0),l._x2+l._k*(l._x1-o),l._y2+l._k*(l._y1-a),l._x2,l._y2)}function F8(l,o){this._context=l,this._k=(1-o)/6}F8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:lM(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,o){switch(l=+l,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(l,o):this._context.moveTo(l,o);break;case 1:this._point=2,this._x1=l,this._y1=o;break;case 2:this._point=3;default:lM(this,l,o)}this._x0=this._x1,this._x1=this._x2,this._x2=l,this._y0=this._y1,this._y1=this._y2,this._y2=o}};const Rje=function l(o){function a(c){return new F8(c,o)}return a.tension=function(c){return l(+c)},a}(0);function N8(l,o){this._context=l,this._k=(1-o)/6}N8.prototype={areaStart:Up,areaEnd:Up,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(l,o){switch(l=+l,o=+o,this._point){case 0:this._point=1,this._x3=l,this._y3=o;break;case 1:this._point=2,this._context.moveTo(this._x4=l,this._y4=o);break;case 2:this._point=3,this._x5=l,this._y5=o;break;default:lM(this,l,o)}this._x0=this._x1,this._x1=this._x2,this._x2=l,this._y0=this._y1,this._y1=this._y2,this._y2=o}};const Fje=function l(o){function a(c){return new N8(c,o)}return a.tension=function(c){return l(+c)},a}(0);function L8(l,o){this._context=l,this._k=(1-o)/6}L8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,o){switch(l=+l,o=+o,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:lM(this,l,o)}this._x0=this._x1,this._x1=this._x2,this._x2=l,this._y0=this._y1,this._y1=this._y2,this._y2=o}};const Nje=function l(o){function a(c){return new L8(c,o)}return a.tension=function(c){return l(+c)},a}(0);function B8(l,o,a){var c=l._x1,u=l._y1,h=l._x2,d=l._y2;if(l._l01_a>xa){var f=2*l._l01_2a+3*l._l01_a*l._l12_a+l._l12_2a,p=3*l._l01_a*(l._l01_a+l._l12_a);c=(c*f-l._x0*l._l12_2a+l._x2*l._l01_2a)/p,u=(u*f-l._y0*l._l12_2a+l._y2*l._l01_2a)/p}if(l._l23_a>xa){var g=2*l._l23_2a+3*l._l23_a*l._l12_a+l._l12_2a,m=3*l._l23_a*(l._l23_a+l._l12_a);h=(h*g+l._x1*l._l23_2a-o*l._l12_2a)/m,d=(d*g+l._y1*l._l23_2a-a*l._l12_2a)/m}l._context.bezierCurveTo(c,u,h,d,l._x2,l._y2)}function Kae(l,o){this._context=l,this._alpha=o}Kae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,o){if(l=+l,o=+o,this._point){var a=this._x2-l,c=this._y2-o;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+c*c,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(l,o):this._context.moveTo(l,o);break;case 1:this._point=2;break;case 2:this._point=3;default:B8(this,l,o)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=l,this._y0=this._y1,this._y1=this._y2,this._y2=o}};const Lje=function l(o){function a(c){return o?new Kae(c,o):new F8(c,0)}return a.alpha=function(c){return l(+c)},a}(.5);function Jae(l,o){this._context=l,this._alpha=o}Jae.prototype={areaStart:Up,areaEnd:Up,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(l,o){if(l=+l,o=+o,this._point){var a=this._x2-l,c=this._y2-o;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+c*c,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=l,this._y3=o;break;case 1:this._point=2,this._context.moveTo(this._x4=l,this._y4=o);break;case 2:this._point=3,this._x5=l,this._y5=o;break;default:B8(this,l,o)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=l,this._y0=this._y1,this._y1=this._y2,this._y2=o}};const Bje=function l(o){function a(c){return o?new Jae(c,o):new N8(c,0)}return a.alpha=function(c){return l(+c)},a}(.5);function ele(l,o){this._context=l,this._alpha=o}ele.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,o){if(l=+l,o=+o,this._point){var a=this._x2-l,c=this._y2-o;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+c*c,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:B8(this,l,o)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=l,this._y0=this._y1,this._y1=this._y2,this._y2=o}};const Vje=function l(o){function a(c){return o?new ele(c,o):new L8(c,0)}return a.alpha=function(c){return l(+c)},a}(.5);function tle(l){this._context=l}function zje(l){return new tle(l)}function nle(l){return l<0?-1:1}function ile(l,o,a){var c=l._x1-l._x0,u=o-l._x1,h=(l._y1-l._y0)/(c||u<0&&-0),d=(a-l._y1)/(u||c<0&&-0),f=(h*u+d*c)/(c+u);return(nle(h)+nle(d))*Math.min(Math.abs(h),Math.abs(d),.5*Math.abs(f))||0}function rle(l,o){var a=l._x1-l._x0;return a?(3*(l._y1-l._y0)/a-o)/2:o}function V8(l,o,a){var c=l._x0,h=l._x1,d=l._y1,f=(h-c)/3;l._context.bezierCurveTo(c+f,l._y0+f*o,h-f,d-f*a,h,d)}function cM(l){this._context=l}function sle(l){this._context=new ole(l)}function ole(l){this._context=l}function Uje(l){return new cM(l)}function Hje(l){return new sle(l)}function ale(l){this._context=l}function lle(l){var o,c,a=l.length-1,u=new Array(a),h=new Array(a),d=new Array(a);for(u[0]=0,h[0]=2,d[0]=l[0]+2*l[1],o=1;o<a-1;++o)u[o]=1,h[o]=4,d[o]=4*l[o]+2*l[o+1];for(u[a-1]=2,h[a-1]=7,d[a-1]=8*l[a-1]+l[a],o=1;o<a;++o)h[o]-=c=u[o]/h[o-1],d[o]-=c*d[o-1];for(u[a-1]=d[a-1]/h[a-1],o=a-2;o>=0;--o)u[o]=(d[o]-u[o+1])/h[o];for(h[a-1]=(l[a]+u[a-1])/2,o=0;o<a-1;++o)h[o]=2*l[o+1]-u[o+1];return[u,h]}function z8(l){return new ale(l)}function uM(l,o){this._context=l,this._t=o}function $je(l){return new uM(l,.5)}function U8(l){return new uM(l,0)}function Wje(l){return new uM(l,1)}function w_(l,o){if((d=l.length)>1)for(var c,u,d,a=1,h=l[o[0]],f=h.length;a<d;++a)for(u=h,h=l[o[a]],c=0;c<f;++c)h[c][1]+=h[c][0]=isNaN(u[c][1])?u[c][0]:u[c][1]}function T_(l){for(var o=l.length,a=new Array(o);--o>=0;)a[o]=o;return a}function Gje(l,o){return l[o]}function Qje(l){const o=[];return o.key=l,o}function jje(){var l=xi([]),o=T_,a=w_,c=Gje;function u(h){var f,m,d=Array.from(l.apply(this,arguments),Qje),p=d.length,g=-1;for(const v of h)for(f=0,++g;f<p;++f)(d[f][g]=[0,+c(v,d[f].key,g,h)]).data=v;for(f=0,m=nM(o(d));f<p;++f)d[m[f]].index=f;return a(d,m),d}return u.keys=function(h){return arguments.length?(l="function"==typeof h?h:xi(Array.from(h)),u):l},u.value=function(h){return arguments.length?(c="function"==typeof h?h:xi(+h),u):c},u.order=function(h){return arguments.length?(o=null==h?T_:"function"==typeof h?h:xi(Array.from(h)),u):o},u.offset=function(h){return arguments.length?(a=null==h?w_:h,u):a},u}function qje(l,o){if((c=l.length)>0){for(var a,c,d,u=0,h=l[0].length;u<h;++u){for(d=a=0;a<c;++a)d+=l[a][u][1]||0;if(d)for(a=0;a<c;++a)l[a][u][1]/=d}w_(l,o)}}function Zje(l,o){if((p=l.length)>0)for(var a,u,h,d,f,p,c=0,g=l[o[0]].length;c<g;++c)for(d=f=0,a=0;a<p;++a)(h=(u=l[o[a]][c])[1]-u[0])>0?(u[0]=d,u[1]=d+=h):h<0?(u[1]=f,u[0]=f+=h):(u[0]=0,u[1]=h)}function Xje(l,o){if((u=l.length)>0){for(var u,a=0,c=l[o[0]],h=c.length;a<h;++a){for(var d=0,f=0;d<u;++d)f+=l[d][a][1]||0;c[a][1]+=c[a][0]=-f/2}w_(l,o)}}function Yje(l,o){if((d=l.length)>0&&(h=(u=l[o[0]]).length)>0){for(var u,h,d,a=0,c=1;c<h;++c){for(var f=0,p=0,g=0;f<d;++f){for(var m=l[o[f]],v=m[c][1]||0,_=(v-(m[c-1][1]||0))/2,b=0;b<f;++b){var C=l[o[b]];_+=(C[c][1]||0)-(C[c-1][1]||0)}p+=v,g+=_*v}u[c-1][1]+=u[c-1][0]=a,p&&(a-=g/p)}u[c-1][1]+=u[c-1][0]=a,w_(l,o)}}function cle(l){var o=l.map(Kje);return T_(l).sort(function(a,c){return o[a]-o[c]})}function Kje(l){for(var u,o=-1,a=0,c=l.length,h=-1/0;++o<c;)(u=+l[o][1])>h&&(h=u,a=o);return a}function ule(l){var o=l.map(hle);return T_(l).sort(function(a,c){return o[a]-o[c]})}function hle(l){for(var u,o=0,a=-1,c=l.length;++a<c;)(u=+l[a][1])&&(o+=u);return o}function Jje(l){return ule(l).reverse()}function eqe(l){var a,c,o=l.length,u=l.map(hle),h=cle(l),d=0,f=0,p=[],g=[];for(a=0;a<o;++a)c=h[a],d<f?(d+=u[c],p.push(c)):(f+=u[c],g.push(c));return g.reverse().concat(p)}function tqe(l){return T_(l).reverse()}tle.prototype={areaStart:Up,areaEnd:Up,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(l,o){l=+l,o=+o,this._point?this._context.lineTo(l,o):(this._point=1,this._context.moveTo(l,o))}},cM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:V8(this,this._t0,rle(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,o){var a=NaN;if(o=+o,(l=+l)!==this._x1||o!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(l,o):this._context.moveTo(l,o);break;case 1:this._point=2;break;case 2:this._point=3,V8(this,rle(this,a=ile(this,l,o)),a);break;default:V8(this,this._t0,a=ile(this,l,o))}this._x0=this._x1,this._x1=l,this._y0=this._y1,this._y1=o,this._t0=a}}},(sle.prototype=Object.create(cM.prototype)).point=function(l,o){cM.prototype.point.call(this,o,l)},ole.prototype={moveTo:function(l,o){this._context.moveTo(o,l)},closePath:function(){this._context.closePath()},lineTo:function(l,o){this._context.lineTo(o,l)},bezierCurveTo:function(l,o,a,c,u,h){this._context.bezierCurveTo(o,l,c,a,h,u)}},ale.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var l=this._x,o=this._y,a=l.length;if(a)if(this._line?this._context.lineTo(l[0],o[0]):this._context.moveTo(l[0],o[0]),2===a)this._context.lineTo(l[1],o[1]);else for(var c=lle(l),u=lle(o),h=0,d=1;d<a;++h,++d)this._context.bezierCurveTo(c[0][h],u[0][h],c[1][h],u[1][h],l[d],o[d]);(this._line||0!==this._line&&1===a)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(l,o){this._x.push(+l),this._y.push(+o)}},uM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(l,o){switch(l=+l,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(l,o):this._context.moveTo(l,o);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,o),this._context.lineTo(l,o);else{var a=this._x*(1-this._t)+l*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,o)}}this._x=l,this._y=o}};var dle="%Y-%m-%dT%H:%M:%S.%LZ",iqe=Date.prototype.toISOString?function nqe(l){return l.toISOString()}:qk(dle);const rqe=iqe;var oqe=+new Date("2000-01-01T00:00:00.000Z")?function sqe(l){var o=new Date(l);return isNaN(o)?null:o}:C8(dle);const aqe=oqe;function lqe(l,o,a){var c=new RC,u=o;return null==o?(c.restart(l,o,a),c):(c._restart=c.restart,c.restart=function(h,d,f){d=+d,f=null==f?PC():+f,c._restart(function p(g){g+=u,c._restart(p,u+=d,f),h(g)},d,f)},c.restart(l,o,a),c)}const hM=l=>()=>l;function cqe(l,{sourceEvent:o,target:a,transform:c,dispatch:u}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:o,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function rd(l,o,a){this.k=l,this.x=o,this.y=a}rd.prototype={constructor:rd,scale:function(l){return 1===l?this:new rd(this.k*l,this.x,this.y)},translate:function(l,o){return 0===l&0===o?this:new rd(this.k,this.x+this.k*l,this.y+this.k*o)},apply:function(l){return[l[0]*this.k+this.x,l[1]*this.k+this.y]},applyX:function(l){return l*this.k+this.x},applyY:function(l){return l*this.k+this.y},invert:function(l){return[(l[0]-this.x)/this.k,(l[1]-this.y)/this.k]},invertX:function(l){return(l-this.x)/this.k},invertY:function(l){return(l-this.y)/this.k},rescaleX:function(l){return l.copy().domain(l.range().map(this.invertX,this).map(l.invert,l))},rescaleY:function(l){return l.copy().domain(l.range().map(this.invertY,this).map(l.invert,l))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dM=new rd(1,0,0);function fle(l){for(;!l.__zoom;)if(!(l=l.parentNode))return dM;return l.__zoom}function H8(l){l.stopImmediatePropagation()}function CS(l){l.preventDefault(),l.stopImmediatePropagation()}function uqe(l){return!(l.ctrlKey&&"wheel"!==l.type||l.button)}function hqe(){var l=this;return l instanceof SVGElement?(l=l.ownerSVGElement||l).hasAttribute("viewBox")?[[(l=l.viewBox.baseVal).x,l.y],[l.x+l.width,l.y+l.height]]:[[0,0],[l.width.baseVal.value,l.height.baseVal.value]]:[[0,0],[l.clientWidth,l.clientHeight]]}function ple(){return this.__zoom||dM}function dqe(l){return-l.deltaY*(1===l.deltaMode?.05:l.deltaMode?1:.002)*(l.ctrlKey?10:1)}function fqe(){return navigator.maxTouchPoints||"ontouchstart"in this}function pqe(l,o,a){var c=l.invertX(o[0][0])-a[0][0],u=l.invertX(o[1][0])-a[1][0],h=l.invertY(o[0][1])-a[0][1],d=l.invertY(o[1][1])-a[1][1];return l.translate(u>c?(c+u)/2:Math.min(0,c)||Math.max(0,u),d>h?(h+d)/2:Math.min(0,h)||Math.max(0,d))}function gqe(){var m,v,y,l=uqe,o=hqe,a=pqe,c=dqe,u=fqe,h=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],f=250,p=Tse,g=zy("start","zoom","end"),_=500,C=0,x=10;function S(N){N.property("__zoom",ple).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",B).filter(u).on("touchstart.zoom",V).on("touchmove.zoom",Q).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(N,U){return(U=Math.max(h[0],Math.min(h[1],U)))===N.k?N:new rd(U,N.x,N.y)}function O(N,U,z){var $=U[0]-z[0]*N.k,H=U[1]-z[1]*N.k;return $===N.x&&H===N.y?N:new rd(N.k,$,H)}function T(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function M(N,U,z,$){N.on("start.zoom",function(){A(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event($).end()}).tween("zoom",function(){var H=this,G=arguments,W=A(H,G).event($),X=o.apply(H,G),K=null==z?T(X):"function"==typeof z?z.apply(H,G):z,ae=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),se=H.__zoom,Ce="function"==typeof U?U.apply(H,G):U,ve=p(se.invert(K).concat(ae/se.k),Ce.invert(K).concat(ae/Ce.k));return function(Oe){if(1===Oe)Oe=Ce;else{var $e=ve(Oe),Me=ae/$e[2];Oe=new rd(Me,K[0]-$e[0]*Me,K[1]-$e[1]*Me)}W.zoom(null,Oe)}})}function A(N,U,z){return!z&&N.__zooming||new I(N,U)}function I(N,U){this.that=N,this.args=U,this.active=0,this.sourceEvent=null,this.extent=o.apply(N,U),this.taps=0}function E(N,...U){if(l.apply(this,arguments)){var z=A(this,U).event(N),$=this.__zoom,H=Math.max(h[0],Math.min(h[1],$.k*Math.pow(2,c.apply(this,arguments)))),G=sc(N);if(z.wheel)(z.mouse[0][0]!==G[0]||z.mouse[0][1]!==G[1])&&(z.mouse[1]=$.invert(z.mouse[0]=G)),clearTimeout(z.wheel);else{if($.k===H)return;z.mouse=[G,$.invert(G)],Mm(this),z.start()}CS(N),z.wheel=setTimeout(W,150),z.zoom("mouse",a(O(w($,H),z.mouse[0],z.mouse[1]),z.extent,d))}function W(){z.wheel=null,z.end()}}function P(N,...U){if(!y&&l.apply(this,arguments)){var z=N.currentTarget,$=A(this,U,!0).event(N),H=ro(N.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",ae,!0),G=sc(N,z),W=N.clientX,X=N.clientY;gD(N.view),H8(N),$.mouse=[G,this.__zoom.invert(G)],Mm(this),$.start()}function K(se){if(CS(se),!$.moved){var Ce=se.clientX-W,ve=se.clientY-X;$.moved=Ce*Ce+ve*ve>C}$.event(se).zoom("mouse",a(O($.that.__zoom,$.mouse[0]=sc(se,z),$.mouse[1]),$.extent,d))}function ae(se){H.on("mousemove.zoom mouseup.zoom",null),mD(se.view,$.moved),CS(se),$.event(se).end()}}function B(N,...U){if(l.apply(this,arguments)){var z=this.__zoom,$=sc(N.changedTouches?N.changedTouches[0]:N,this),H=z.invert($),G=z.k*(N.shiftKey?.5:2),W=a(O(w(z,G),$,H),o.apply(this,U),d);CS(N),f>0?ro(this).transition().duration(f).call(M,W,$,N):ro(this).call(S.transform,W,$,N)}}function V(N,...U){if(l.apply(this,arguments)){var G,W,X,K,z=N.touches,$=z.length,H=A(this,U,N.changedTouches.length===$).event(N);for(H8(N),W=0;W<$;++W)K=[K=sc(X=z[W],this),this.__zoom.invert(K),X.identifier],H.touch0?!H.touch1&&H.touch0[2]!==K[2]&&(H.touch1=K,H.taps=0):(H.touch0=K,G=!0,H.taps=1+!!m);m&&(m=clearTimeout(m)),G&&(H.taps<2&&(v=K[0],m=setTimeout(function(){m=null},_)),Mm(this),H.start())}}function Q(N,...U){if(this.__zooming){var G,W,X,K,z=A(this,U).event(N),$=N.changedTouches,H=$.length;for(CS(N),G=0;G<H;++G)X=sc(W=$[G],this),z.touch0&&z.touch0[2]===W.identifier?z.touch0[0]=X:z.touch1&&z.touch1[2]===W.identifier&&(z.touch1[0]=X);if(W=z.that.__zoom,z.touch1){var ae=z.touch0[0],se=z.touch0[1],Ce=z.touch1[0],ve=z.touch1[1],Oe=(Oe=Ce[0]-ae[0])*Oe+(Oe=Ce[1]-ae[1])*Oe,$e=($e=ve[0]-se[0])*$e+($e=ve[1]-se[1])*$e;W=w(W,Math.sqrt(Oe/$e)),X=[(ae[0]+Ce[0])/2,(ae[1]+Ce[1])/2],K=[(se[0]+ve[0])/2,(se[1]+ve[1])/2]}else{if(!z.touch0)return;X=z.touch0[0],K=z.touch0[1]}z.zoom("touch",a(O(W,X,K),z.extent,d))}}function j(N,...U){if(this.__zooming){var G,W,z=A(this,U).event(N),$=N.changedTouches,H=$.length;for(H8(N),y&&clearTimeout(y),y=setTimeout(function(){y=null},_),G=0;G<H;++G)W=$[G],z.touch0&&z.touch0[2]===W.identifier?delete z.touch0:z.touch1&&z.touch1[2]===W.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),2===z.taps&&(W=sc(W,this),Math.hypot(v[0]-W[0],v[1]-W[1])<x)){var X=ro(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return S.transform=function(N,U,z,$){var H=N.selection?N.selection():N;H.property("__zoom",ple),N!==H?M(N,U,z,$):H.interrupt().each(function(){A(this,arguments).event($).start().zoom(null,"function"==typeof U?U.apply(this,arguments):U).end()})},S.scaleBy=function(N,U,z,$){S.scaleTo(N,function(){var H=this.__zoom.k,G="function"==typeof U?U.apply(this,arguments):U;return H*G},z,$)},S.scaleTo=function(N,U,z,$){S.transform(N,function(){var H=o.apply(this,arguments),G=this.__zoom,W=null==z?T(H):"function"==typeof z?z.apply(this,arguments):z,X=G.invert(W),K="function"==typeof U?U.apply(this,arguments):U;return a(O(w(G,K),W,X),H,d)},z,$)},S.translateBy=function(N,U,z,$){S.transform(N,function(){return a(this.__zoom.translate("function"==typeof U?U.apply(this,arguments):U,"function"==typeof z?z.apply(this,arguments):z),o.apply(this,arguments),d)},null,$)},S.translateTo=function(N,U,z,$,H){S.transform(N,function(){var G=o.apply(this,arguments),W=this.__zoom,X=null==$?T(G):"function"==typeof $?$.apply(this,arguments):$;return a(dM.translate(X[0],X[1]).scale(W.k).translate("function"==typeof U?-U.apply(this,arguments):-U,"function"==typeof z?-z.apply(this,arguments):-z),G,d)},$,H)},I.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,U){return this.mouse&&"mouse"!==N&&(this.mouse[1]=U.invert(this.mouse[0])),this.touch0&&"touch"!==N&&(this.touch0[1]=U.invert(this.touch0[0])),this.touch1&&"touch"!==N&&(this.touch1[1]=U.invert(this.touch1[0])),this.that.__zoom=U,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var U=ro(this.that).datum();g.call(N,this.that,new cqe(N,{sourceEvent:this.sourceEvent,target:S,type:N,transform:this.that.__zoom,dispatch:g}),U)}},S.wheelDelta=function(N){return arguments.length?(c="function"==typeof N?N:hM(+N),S):c},S.filter=function(N){return arguments.length?(l="function"==typeof N?N:hM(!!N),S):l},S.touchable=function(N){return arguments.length?(u="function"==typeof N?N:hM(!!N),S):u},S.extent=function(N){return arguments.length?(o="function"==typeof N?N:hM([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),S):o},S.scaleExtent=function(N){return arguments.length?(h[0]=+N[0],h[1]=+N[1],S):[h[0],h[1]]},S.translateExtent=function(N){return arguments.length?(d[0][0]=+N[0][0],d[1][0]=+N[1][0],d[0][1]=+N[0][1],d[1][1]=+N[1][1],S):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},S.constrain=function(N){return arguments.length?(a=N,S):a},S.duration=function(N){return arguments.length?(f=+N,S):f},S.interpolate=function(N){return arguments.length?(p=N,S):p},S.on=function(){var N=g.on.apply(g,arguments);return N===g?S:N},S.clickDistance=function(N){return arguments.length?(C=(N=+N)*N,S):Math.sqrt(C)},S.tapDistance=function(N){return arguments.length?(x=+N,S):x},S}fle.prototype=rd.prototype;class e0{constructor(o,a,c){this.first=o,this.second=a,this.third=c}isSecond(){return!!this.second}isThird(){return!!this.third}toArrays(){let o=[this.first];return this.second&&o.push(this.second),this.third&&o.push(this.third),o}}class t0{constructor(o,a,c,u,h,d,f,p,g,m,v,y,_,b,C,x,S,w){this.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u041a\u0440\u0435\u0441\u0442=o,this.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b=a,this.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0421\u0435\u0442\u043a\u0443=c,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=u,this.scale=h,this.width=d,this.height=f,this.delta=p,this.lineWidth=g,this.lineSizeExtra=m,this.colorBackground=v,this.colorMain=y,this.colorText=_,this.colorCircles=b,this.colorLines=C,this.colorLinesHighlighted=x,this.colorLinesSecondary=S,this.svgImage=w,this.rects=[],this.lines=[],this.linesPlate=[],this.texts=[],this.circles=[],this.ellipses=[],this.pathes=[],this.onItemSelected=null,this.params=new Map,this.fontLineRelativeOffset=.75,this.fontSize=20,this.fontWeight=700}addParam(o,a){return this.params.set(o,a),this}getParam(o){return this.params.get(o)}setColorBackground(o){return this.colorBackground=o,this}setColorMain(o){return this.colorMain=o,this}setColorText(o){return this.colorText=o,this}setColorLines(o){return this.colorLines=o,this}setWidth(o){return this.width=o,this}setHeight(o){return this.height=o,this}setFontSize(o){return this.fontSize=o,this}setFontLineRelativeOffset(o){return this.fontLineRelativeOffset=o,this}setFontWeight(o){return this.fontWeight=o,this}setLineWidth(o){return this.lineWidth=o,this}static builder(){return new t0(!0,!0,!1,!0,.5,512,512,Math.min(512,512)/15,2,Math.min(512,512)/20,"black","gold","firebrick","red","white","green","cyan",null)}clearAll(){return this.rects=[],this.lines=[],this.linesPlate=[],this.texts=[],this.circles=[],this.ellipses=[],this.pathes=[],this}}class Ri{constructor(o,a){this.x=o,this.y=a}}class fM{constructor(o,a,c){this.name=o,this.x=a,this.y=c}static builder(){return new fM("translate",0,0)}setName(o){return this.name=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}}class pM{constructor(o,a,c){this.name=o,this.x=a,this.y=c}static builder(){return new pM("scale",0,0)}setName(o){return this.name=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}}class $8{constructor(o,a,c=0,u=0){this.name=o,this.angle=a,this.x=c,this.y=u}static builder(){return new $8("rotate",0)}setName(o){return this.name=o,this}setAngle(o){return this.angle=o,this}setRotationX(o){return this.x=o,this}setRotationY(o){return this.y=o,this}}class W8{constructor(o,a){this.name=o,this.angle=a}static builder(){return new W8("skewY",0)}setName(o){return this.name=o,this}setAngle(o){return this.angle=o,this}}class G8{constructor(o,a){this.name=o,this.angle=a}static builder(){return new G8("skewX",0)}setName(o){return this.name=o,this}setAngle(o){return this.angle=o,this}}class Fi{constructor(o,a){this.name=o,this.func=a}static builder(){return new Fi("",null)}setName(o){return this.name=o,this}setFunc(o){return this.func=o,this}}class O_{constructor(o,a=[],c=[],u=!0,h=null){this.transform=o,this.classes=a,this.events=c,this.visible=u,this.transitions=h,this.d3Object=null}transformToString(o=null){return(o||this.transform).map((c,u)=>{let h=`${c.name}(`;return"translate"==c.name||"scale"==c.name?h+=`${c.x},${c.y}`:"rotate"==c.name?(h+=c.angle,(c.x||c.y)&&(h+=`,${c.x},${c.y}`)):("skewY"==c.name||"skewX"==c.name)&&(h+=c.angle),h+=")",h}).join(" ")}apply(o,a,c=null,u=null){var h=c||this.d3Object;if(null==h)return null;var d=h.transition().delay(o).duration(a);return u&&(d=d.on("end",u)),this.applyToD3Object(d)}applyToD3Object(o=null){return null}applyEventsToD3Object(o=null){var a=this,c=o;if(a.events.forEach(u=>{c=c.on(u.name,u.func)}),a.d3Object=c,a.transitions&&a.transitions.length){let u=!1,h=()=>{let d=null;u&&a.transitions&&a.transitions.length&&a.transitions.shift(),a.transitions&&a.transitions.length>0&&(d=a.transitions[0]),null!=d&&(u=!0,d.data.clone(a),c=(c=d.apply(c)).on("end",h))};h()}return c}emulateCollapseTransitions(){return this.transitions&&this.transitions.length>0&&(this.d3Object.interrupt(),this.transitions[this.transitions.length-1].data.cloneTo(this),this.transitions=[]),this}setTransforms(o){return this.transform=o,this}translate(o,a){return this.transform.push(fM.builder().setX(o).setY(a)),this}scale(o,a){return this.transform.push(pM.builder().setX(o).setY(a)),this}rotate(o,a=0,c=0){return this.transform.push($8.builder().setAngle(o).setRotationX(a).setRotationY(c)),this}skewY(o){return this.transform.push(W8.builder().setAngle(o)),this}skewX(o){return this.transform.push(G8.builder().setAngle(o)),this}setClasses(o){return this.classes=o,this}addClass(o){return this.classes.indexOf(o)<0&&this.classes.push(o),this}removeClass(o){let a=this.classes.indexOf(o);return a>=0&&this.classes.splice(a,1),this}addEvent(o){return this.events.push(o),this}setVisible(o){return this.visible=o,this}getVisible(){return this.visible}setTransitions(o){return this.transitions=o,this}addTransition(o){return null==this.transitions&&(this.transitions=[]),this.transitions.push(o),this}}class gM{constructor(o,a=0,c=1e3){this.data=o,this.delay=a,this.duration=c}static builder(){return new gM(null)}setData(o){return this.data=o,this}setDelay(o){return this.delay=o,this}setDuration(o){return this.duration=o,this}apply(o=null){return this.data.apply(this.delay,this.duration,o)}}class ri extends O_{constructor(o,a,c,u,h,d,f,p,g,m,v=300){super(m),this.text=o,this.x=a,this.y=c,this.color=u,this.strokeColor=h,this.strokeWidth=d,this.angle=f,this.fontSize=p,this.textAnchor=g,this.fontWeight=v}applyToD3Object(o=null){var c=this;return(o||this.d3Object).attr("x",0*c.x).attr("y",0*c.y).attr("font-size",c.fontSize).attr("font-weight",c.fontWeight).attr("text-anchor",c.textAnchor).attr("transform",this.transformToString(c.transform||[])).style("stroke",c.strokeColor).style("stroke-width",c.strokeWidth).style("fill",c.color).attr("class",c.classes.join(" ")).style("visibility",c.visible?"visible":"hidden")}clone(o=null){return(o||ri.builder()).setText(this.text).setX(this.x).setY(this.y).setColor(this.color).setStrokeColor(this.strokeColor).setStrokeWidth(this.strokeWidth).setAngle(this.angle).setFontSize(this.fontSize).setTextAnchor(this.textAnchor).setFontWeight(this.fontWeight).setTransitions(null).setTransforms([...this.transform]).setClasses([...this.classes])}static builder(){return new ri("\u0422\u0435\u043a\u0441\u0442",0,0,"firebrick","black",0,0,"20px","start",[])}setBold(o=!0){return this.fontWeight=o?700:300,this}setFontWeight(o){return this.fontWeight=o,this}setText(o){return this.text=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}setColor(o){return this.color=o,this}setStrokeColor(o){return this.strokeColor=o,this}setStrokeWidth(o){return this.strokeWidth=o,this}setAngle(o){return this.angle=o,this}setTextAnchor(o){return this.textAnchor=o,this}setFontSize(o){return this.fontSize=o,this}}class Hp extends O_{constructor(o,a,c,u,h,d){super(d),this.r=o,this.fillColor=a,this.fillOpacity=c,this.strokeColor=u,this.strokeWidth=h}clone(o=null){return(o||Hp.builder()).setR(this.r).setFillColor(this.fillColor).setFillOpacity(this.fillOpacity).setStrokeColor(this.strokeColor).setStrokeWidth(this.strokeWidth).setTransforms([...this.transform]).setTransitions(null).setClasses([...this.classes])}applyToD3Object(o=null){var c=this;return(o||this.d3Object).attr("cx",0).attr("cy",0).attr("r",c.r).attr("fill",c.fillColor).attr("fill-opacity",c.fillOpacity).attr("stroke",c.strokeColor).attr("stroke-width",c.strokeWidth).attr("transform",this.transformToString(c&&c.transform||[])).attr("class",c.classes.join(" ")).style("visibility",c.visible?"visible":"hidden")}static builder(){return new Hp(100,"green",1,"white",2,[])}setR(o){return this.r=o,this}setFillColor(o){return this.fillColor=o,this}setFillOpacity(o){return this.fillOpacity=o,this}setStrokeColor(o){return this.strokeColor=o,this}setStrokeWidth(o){return this.strokeWidth=o,this}}class Q8 extends O_{constructor(o,a,c,u,h,d,f){super(f),this.rx=o,this.ry=a,this.fillColor=c,this.fillOpacity=u,this.strokeColor=h,this.strokeWidth=d}static builder(){return new Q8(100,50,"green",1,"white",2,[])}setRx(o){return this.rx=o,this}setRy(o){return this.ry=o,this}setFillColor(o){return this.fillColor=o,this}setFillOpacity(o){return this.fillOpacity=o,this}setStrokeColor(o){return this.strokeColor=o,this}setStrokeWidth(o){return this.strokeWidth=o,this}}class si extends O_{constructor(o,a,c,u,h,d,f,p,g){super(g),this.x1=o,this.y1=a,this.x2=c,this.y2=u,this.color=h,this.width=d,this.startArrow=f,this.endArrow=p}clone(){return si.builder().setX1(this.x1).setY1(this.y1).setX2(this.x2).setY2(this.y2).setColor(this.color).setWidth(this.width).setStartArrow(this.startArrow).setEndArrow(this.endArrow).setTransforms(this.transform?[...this.transform]:[]).setTransitions(null)}static builder(){return new si(0,0,0,0,"white",1,"","",[])}setX1(o){return this.x1=o,this}setY1(o){return this.y1=o,this}setX2(o){return this.x2=o,this}setY2(o){return this.y2=o,this}setColor(o){return this.color=o,this}setWidth(o){return this.width=o,this}setStartArrow(o){return this.startArrow=o,this}setEndArrow(o){return this.endArrow=o,this}}class cs extends O_{constructor(o,a,c,u,h,d,f,p,g,m,v,y,_){super(_),this.x=o,this.y=a,this.rx=c,this.ry=u,this.width=h,this.height=d,this.fillColor=f,this.fillOpacity=p,this.strokeColor=g,this.strokeOpacity=m,this.strokeWidth=v,this.locked=y}static builder(){return new cs(0,0,0,0,100,100,"white",1,"",1,0,!1,[])}setX(o){return this.x=o,this}setY(o){return this.y=o,this}setWidth(o){return this.width=o,this}setHeight(o){return this.height=o,this}setRx(o){return this.rx=o,this}setRy(o){return this.ry=o,this}setFillColor(o){return this.fillColor=o,this}setFillOpacity(o){return this.fillOpacity=o,this}setStrokeColor(o){return this.strokeColor=o,this}setStrokeOpacity(o){return this.strokeOpacity=o,this}setStrokeWidth(o){return this.strokeWidth=o,this}setLocked(o){return this.locked=o,this}}class Zr extends O_{constructor(o,a,c,u,h,d,f,p,g){super(p),this.datum=o,this.d=a,this.strokeColor=c,this.strokeWidth=u,this.strokeOpacity=h,this.fillColor=d,this.fillOpacity=f,this.renderHandler=g}clone(o=null){return(o||Zr.builder()).setD(this.datum).setD(this.d).setStrokeColor(this.strokeColor).setStrokeWidth(this.strokeWidth).setStrokeOpacity(this.strokeOpacity).setFillColor(this.fillColor).setFillOpacity(this.fillOpacity).setTransforms([...this.transform]).setTransitions(null).setRenderHandler(this.renderHandler).setClasses([...this.classes])}applyToD3Object(o=null){var c=this;return(o||this.d3Object).attr("d",c.d).attr("fill",c.fillColor).attr("fill-opacity",c.fillOpacity).attr("stroke",c.strokeColor).attr("stroke-width",c.strokeWidth).attr("stroke-opacity",c.strokeOpacity||1).attr("transform",this.transformToString(c.transform||[])).attr("class",c.classes.join(" ")).style("visibility",c.visible?"visible":"hidden")}static builder(){return new Zr(null,null,"steelblue",2,1,"none",1,[],null)}setDatum(o){return this.datum=o,this}setD(o){return this.d=o,this}setStrokeColor(o){return this.strokeColor=o,this}setStrokeWidth(o){return this.strokeWidth=o,this}setStrokeOpacity(o){return this.strokeOpacity=o,this}setFillColor(o){return this.fillColor=o,this}setFillOpacity(o){return this.fillOpacity=o,this}setRenderHandler(o){return this.renderHandler=o,this}}let mM=(()=>{class l{\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(a){return 1/(a*(Math.sqrt(5)+1)/2)}createDataScale(a,c,u){let h=c(a),d=a.scale,f=a.width*(1-d)/2,p=a.height*(1-d)/2;return h.toArrays().forEach(g=>{g.forEach(m=>{m.locked||(m.transform=m.transform||[],m.transform.unshift(fM.builder().setX(f).setY(p),pM.builder().setX(d).setY(d)))})}),u(a,h),h}get createDataPtr(){return a=>this.createData(a)}get createGolgofaDataPtr(){return a=>this.createData(a,1,1-.8,.27,.6,Math.PI/8)}createBackground(a,c=1){return cs.builder().setX(0).setY(0).setWidth(a.width).setHeight(a.height).setFillColor(a.colorBackground).setFillOpacity(c).setLocked(!0)}createCrossText(a,c=0,u=0,h=0,d=0,f=0){let p=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),g=a.width*(c||p),m=f||Math.atan2(1-p,.5),v=g*(u||1-p),y=g*(h||1-p),_=g*(h||.25),b=d?a.height*d+_*Math.tan(m):a.height-g/2,C=b+_*Math.tan(m)/2+a.delta/Math.cos(m)/2,x=(a.height+b+_*Math.tan(m)/2+a.delta/Math.cos(m)/2)/2,S=+(a.height-(b+_*Math.tan(m)/2+a.delta/Math.cos(m)/2)-a.height/12)/2/2,w=.55*a.width,O=[ri.builder().setText("\u0446\u0440\u0483\u044c").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("end").setColor(a.colorMain).translate(a.width/2-y/2,(u?(g*(u||1-p)-a.delta/2)/2:g*Math.pow(1-p,2))-2*a.delta).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0426\u0430\u0440\u044c \u0421\u043b\u0430\u0432\u044b")})),ri.builder().setText("\u0441\u043b\u0483\u0432\u044b").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("start").setColor(a.colorMain).translate(a.width/2+y/2,(u?(g*(u||1-p)-a.delta/2)/2:g*Math.pow(1-p,2))-2*a.delta).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0426\u0430\u0440\u044c \u0421\u043b\u0430\u0432\u044b")})),ri.builder().setText("\u0406\u0483\u0421").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("start").setColor(a.colorMain).translate((a.width-g)/2,v-a.delta).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0418\u0438\u0441\u0443\u0441 \u0425\u0440\u0438\u0441\u0442\u043e\u0441")})),ri.builder().setText("\u0425\u0483\u0421").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("end").setColor(a.colorMain).translate((a.width+g)/2,v-a.delta).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0418\u0438\u0441\u0443\u0441 \u0425\u0440\u0438\u0441\u0442\u043e\u0441")})),ri.builder().setText("\u0441\u043d\u0483\u044a").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width-g)/2,v+2*a.delta).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0421\u044b\u043d \u0411\u043e\u0436\u0438\u0439")})),ri.builder().setText("\u0431\u0436\u0483\u0457\u0439").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width+g)/2,v+2*a.delta).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0421\u044b\u043d \u0411\u043e\u0436\u0438\u0439")})),ri.builder().setText("\u043d\u0438").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("start").setColor(a.colorMain).translate((a.width-_)/2,(b-_/Math.cos(m)/2+(v+2*a.delta))/2-a.height/12/2).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c")})),ri.builder().setText("\u043a\u0430").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("end").setColor(a.colorMain).translate((a.width+_)/2,(b-_/Math.cos(m)/2+(v+2*a.delta))/2-a.height/12/2).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c")})),ri.builder().setText("\u043c").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width-_)/2,C+S).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043c\u0435\u0441\u0442\u043e \u043b\u043e\u0431\u043d\u043e\u0435")})),ri.builder().setText("\u043b").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width+_)/2,C+S).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043c\u0435\u0441\u0442\u043e \u043b\u043e\u0431\u043d\u043e\u0435")})),ri.builder().setText("\u0440").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width-_)/2,x+S).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0440\u0430\u0441\u043f\u044f\u0442 \u0431\u044b\u0441\u0442\u044c")})),ri.builder().setText("\u0431").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width+_)/2,x+S).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0440\u0430\u0441\u043f\u044f\u0442 \u0431\u044b\u0441\u0442\u044c")})),ri.builder().setText("\u0433").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate(a.width/2-(w/2+a.delta/2*3/2),a.height).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430")})),ri.builder().setText("\u0433").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate(a.width/2+(w/2+a.delta/2*3/2),a.height).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430")})),ri.builder().setText("\u043a").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate(a.width/2-(w/2+a.delta/2*3/2),v+.3*(a.height-v)+a.height/12).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043a\u043e\u043f\u0438\u0435")})),ri.builder().setText("\u0442").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate(a.width/2+(w/2+a.delta/2*3/2),v+.3*(a.height-v)+a.height/12).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0442\u0440\u043e\u0441\u0442\u044c")})),ri.builder().setText("\u0433").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width-_)/2,a.height+2*a.delta+a.height/12/2).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430")})),ri.builder().setText("\u0430").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width+_)/2,a.height+2*a.delta+a.height/12/2).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430")}))];return[O].forEach(T=>T.forEach(M=>M.addClass("cursor"))),[O]}createKopie(a,c=0,u=0,h=0,d=0,f=0){let p=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),m=f||Math.atan2(1-p,.5),C=(d&&Math.tan(m),[]),x=a.delta/2/4,S=a.height*(1-u)*.8,M=[a.width/2-a.delta/2*5,a.height+a.delta/2],I=(V,Q,j="gold")=>{let N=(V=>({dd:V||[[0,0],[1,1],[1,-1],[0,0]],path:Ju().x(N=>N[0]).y(N=>N[1])}))(Q);return((V,Q,j)=>V.rotate(-9,j[0],j[1]))(Zr.builder().setDatum(N.dd).setD(N.path).setStrokeColor(j).setStrokeWidth(1).setFillColor(j).translate(V[0],V[1]),0,M)},E=(V,Q,j,N)=>{let U=[];return V.forEach(z=>{let $=[];$.push(z[0]*Q+j),$.push(z[1]*Q+N),U.push($)}),U},P=a.colorMain,B=[I([0,0],E([[-x,0],[-x,-S],[x,-S],[x,0],[-x,0]],1,M[0],M[1]),P),I([0,0],E([[0,2*x-S],[2*-x,-S-2*x],[0,-S-16*x],[2*+x,-S-2*x],[0,2*x-S]],1,M[0],M[1]),P),I([0,0],E([[3*-x/2,2*x-S],[0,-S-2*x],[3*+x/2,2*x-S],[3*-x/2,2*x-S]],1,M[0],M[1]),P),I([0,0],E([[3*-x/2,6*x-S],[0,2*x-S],[3*+x/2,6*x-S],[3*-x/2,6*x-S]],1,M[0],M[1]),P)];return[C,B].forEach(V=>V.forEach(Q=>Q.addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043a\u043e\u043f\u0438\u0435")})).addClass("cursor"))),new e0(C,B)}createTrost(a,c=0,u=0,h=0,d=0,f=0){let p=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),m=f||Math.atan2(1-p,.5),x=(d&&Math.tan(m),a.delta/2/4),S=a.height*(1-u)*.8,T=[a.width/2+a.delta/2*5,a.height+a.delta/2],A=(B,V,Q="gold",j=!1)=>{let N=((B,V=!1)=>{let Q=B||[[0,0],[1,1],[1,-1],[0,0]];const j=Ju().x(N=>N[0]).y(N=>N[1]);return{dd:Q,path:V?j.curve(xS):j}})(V,j);return((B,V,Q)=>B.rotate(9,Q[0],Q[1]))(Zr.builder().setDatum(N.dd).setD(N.path).setStrokeColor(Q).setStrokeWidth(1).setFillColor(Q).translate(B[0],B[1]),0,T)},I=(B,V,Q,j)=>{let N=[];return B.forEach(U=>{let z=[];z.push(U[0]*V+Q),z.push(U[1]*V+j),N.push(z)}),N},E=a.colorMain,P=[A([0,0],I([[-x,0],[-x,-S-3*x],[x,-S-3*x],[x,0],[-x,0]],1,T[0],T[1]),E),A([0,0],I([[0,-S-2*x],[5*-x,-S-2*x],[5*-x,-S-16*x],[0,-S-16*x],[5*+x,-S-16*x],[5*+x,-S-2*x],[0,-S-2*x]],1,T[0],T[1]),E,!0),A([0,0],I([[3*-x/2,2*x-S],[0,-S-2*x],[3*+x/2,2*x-S],[3*-x/2,2*x-S]],1,T[0],T[1]),E),A([0,0],I([[3*-x/2,6*x-S],[0,2*x-S],[3*+x/2,6*x-S],[3*-x/2,6*x-S]],1,T[0],T[1]),E)];return P.forEach(B=>B.addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0442\u0440\u043e\u0441\u0442\u044c")})).addClass("cursor")),new e0([],P)}createSkull(a,c=0,u=0,h=0,d=0,f=0){let p=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),m=f||Math.atan2(1-p,.5),C=(d&&Math.tan(m),[]),x=.55*a.width,w=0*a.delta/4/2,O=a.delta/4/2,T=(we,We)=>We*(1.75*a.delta+2*we),M=(we,We)=>We*(1.75*a.delta+2*we),A=.5,P=.5,B=(we,We)=>P*T(we,We)/2/2,V=1.15,N=(we,We)=>T(we,We)*P/3.8,U=(we,We)=>T(we,We)*P/2.25,H=1/5.7,G=(we,We)=>T(we,We)/2,W=(we,We)=>T(we,We)/2,se=(T(w,1),T(w,1),2*O),Ce=(we,We,Bt,bn)=>we.setX(We[0]).setY(We[1]).rotate(Bt,bn[0],bn[1]),Oe=we=>[a.width/2-T(w,we)/2+G(w,we),a.height+a.delta-w+O+se+W(w,we)],$e=1.5;C.push(cs.builder().setX(a.width/2-x/2).setY(a.height-$e).setWidth(x).setHeight(a.delta+$e).setFillColor(a.colorMain),cs.builder().setX(a.width/2-x/2-a.delta/2*3).setY(a.height+a.delta-$e).setWidth(2.5*a.delta).setHeight(a.delta+$e).setFillColor(a.colorMain),cs.builder().setX(a.width/2+x/2-a.delta).setY(a.height+a.delta-$e).setWidth(2.5*a.delta).setHeight(a.delta+$e).setFillColor(a.colorMain),cs.builder().setX(a.width/2-x/2-a.delta/2*3).setY(a.height+2*a.delta-$e).setWidth(a.delta).setHeight(a.delta+$e).setFillColor(a.colorMain),cs.builder().setX(a.width/2+x/2+a.delta/2).setY(a.height+2*a.delta-$e).setWidth(a.delta).setHeight(a.delta+$e).setFillColor(a.colorMain)),C.forEach(we=>we.addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430")})).addClass("cursor"));let Ie=(we,We)=>{C.push(Ce(cs.builder().setRx(.7*T(w,we)/2*.9).setRy(.7*M(w,we)/2*.9).setWidth(T(w,we)).setHeight(.7*M(w,we)).setFillColor(We?a.colorBackground:a.colorMain),[a.width/2-T(w,we)/2,a.height+a.delta+w+O+se],-45,Oe(we)),Ce(cs.builder().setRx(.4*M(w,we)/2*.8).setRy(.4*M(w,we)/2*.8).setWidth(P*T(w,we)).setHeight(.4*M(w,we)).setFillColor(We?a.colorBackground:a.colorMain),[a.width/2-P*T(w,we)/2+B(w,we),a.height+a.delta+w+O+M(w,we)*A+se],-45,Oe(we)),Ce(cs.builder().setRx(U(w,we)/2).setRy(U(w,we)/2).setWidth(U(w,we)*V).setHeight(U(w,we)).setFillColor(We?a.colorMain:a.colorBackground),[a.width/2+B(w,we)-N(w,we)/2+N(w,we)/2-U(w,we)*V/2-T(w,we)*H*1,a.height+a.delta+w+O+M(w,we)*A/2+se],-45,Oe(we)),Ce(cs.builder().setRx(U(w,we)/2).setRy(U(w,we)/2).setWidth(U(w,we)*V).setHeight(U(w,we)).setFillColor(We?a.colorMain:a.colorBackground),[a.width/2+B(w,we)-N(w,we)/2+N(w,we)/2-U(w,we)*V/2+T(w,we)*H,a.height+a.delta+w+O+M(w,we)*A/2+se],-45,Oe(we)))};"white"==a.colorBackground&&Ie(1.15,!1),Ie(1,"white"==a.colorBackground);let nt=[],Qe=(we,We)=>{nt.push(((we,We,Bt="gold",bn=1)=>{let Ln=(we=>({dd:we||[[0,0],[1,1],[1,-1],[0,0]],path:Ju().x(bn=>bn[0]).y(bn=>bn[1]).curve(xS)}))(We);return((we,We,Bt)=>we.rotate(-45,Bt[0],Bt[1]))(Zr.builder().setDatum(Ln.dd).setD(Ln.path).setStrokeColor(Bt).setStrokeWidth(1).setFillColor(Bt).translate(we[0],we[1]),0,Oe(bn))})([0,0],((we,We,Bt,bn)=>{let Ln=[];return[[.5,0],[1,1],[0,1],[.5,0]].forEach(he=>{let re=[];re.push(he[0]*We+Bt),re.push(he[1]*We+bn),Ln.push(re)}),Ln})(0,1.35*N(w,we),a.width/2+B(w,we)-N(w,we)/2,a.height+a.delta+w+O+M(w,we)*A+se),We?a.colorMain:a.colorBackground,we))};return"white"==a.colorBackground&&Qe(1.15,!1),Qe(1,"white"==a.colorBackground),[C,nt].forEach(we=>we.forEach(We=>{0==We.events.length&&We.addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430")})).addClass("cursor")})),new e0(C,nt)}createCross(a,c=!0,u=0,h=0,d=0,f=0,p=0,g=0,m=0,v=0,y=0){let _=u,b=h,C=d||a.width,x=f||a.height,S=a.delta/a.width*C,w=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),O=C*(p||w),T=y||Math.atan2(1-w,.5),M=O*(g||1-w),A=O*(m||1-w),I=O*(m||.25),E=v?x*v+I*Math.tan(T):x-O/2,P=c?[cs.builder().setX(_).setY(b).setWidth(C).setHeight(x).setFillColor(a.colorBackground).setLocked(!0)]:[];return P.push(cs.builder().setX(_+C/2-S/2).setY(b).setWidth(S).setHeight(x).setFillColor(a.colorMain).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043a\u0440\u0435\u0441\u0442")})),cs.builder().setX(_+(C-O)/2).setY(b+M-S/2).setWidth(O).setHeight(S).setFillColor(a.colorMain).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043a\u0440\u0435\u0441\u0442")})),cs.builder().setX(0).setY(0).setWidth(A).setHeight(S).setFillColor(a.colorMain).translate(_+(C-A)/2,b+(g?(O*(g||1-w)-S/2)/2:O*Math.pow(1-w,2))-S/2).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0418\u0438\u0441\u0443\u0441 \u041d\u0430\u0437\u043e\u0440\u0435\u0439 \u0426\u0430\u0440\u044c \u0418\u0443\u0434\u0435\u0439\u0441\u043a\u0438\u0439")})),cs.builder().setX(0).setY(0).setWidth(I).setHeight(S/Math.cos(T)).setFillColor(a.colorMain).translate(_+(C-I)/2,b+E-I/Math.cos(T)/2).skewY(this.toDegrees(T)).addEvent(Fi.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043a\u0440\u0435\u0441\u0442")}))),P}createData(a,c=0,u=0,h=0,d=0,f=0){let p=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),m=f||Math.atan2(1-p,.5),C=(d&&Math.tan(m),this.createCross(a,!0,0,0,0,0,c,u,h,d,f));[C].forEach(O=>O.forEach((T,M)=>{M&&T.addClass("cursor")}));let x=a.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?new e0([],[]):this.createSkull(a,c,u,h,d,f);C.push(...x.first);let S=x.second;x=a.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?x:this.createKopie(a,c,u,h,d,f),C.push(...x.first),S.push(...x.second),x=a.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?x:this.createTrost(a,c,u,h,d,f),C.push(...x.first),S.push(...x.second);let w=a.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?[[],[]]:this.createCrossText(a,c,u,h,d,f);return new e0(C,S,w[0])}createSizeHorizontalArrows(a,c,u,h,d,f=!0,p=!0,g="",m=""){let v=c.y<u.y?c:u,y=c.y<u.y?u:c,_=a.lineSizeExtra*(v.x<h.x?1:-1),b=[],C=[si.builder().setX1(v.x).setY1(v.y).setX2(h.x+_).setY2(v.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth),si.builder().setX1(y.x).setY1(y.y).setX2(h.x+_).setY2(y.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth)];if(v.y<=h.y&&h.y<=y.y){if(C.push(si.builder().setX1(h.x).setY1(v.y).setX2(h.x).setY2(y.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setStartArrow(f?"arrowN":"arrow").setEndArrow(f?"arrowN":"arrow")),g){let x=Math.abs(_),S=x/2*g.length/2;b.push(ri.builder().setText(g).setFontSize(`${x}px`).translate(h.x-Math.abs(_)/2,(v.y+y.y)/2+S).rotate(-90).setColor("white"))}}else{let x=h.y<v.y?v.y-h.y:h.y-y.y;if(C.push(si.builder().setX1(h.x).setY1(v.y-x).setX2(h.x).setY2(v.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(f?"arrowN":"arrow"),si.builder().setX1(h.x).setY1(y.y+x).setX2(h.x).setY2(y.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(f?"arrowN":"arrow")),g){let S=Math.abs(_),w=-S/2*3;b.push(ri.builder().setText(g).setFontSize(`${S}px`).translate(h.x-Math.abs(_)/2,v.y+w).rotate(-90).setColor("white"))}if(m){let S=Math.abs(_),w=S/2*(m.length+3);b.push(ri.builder().setText(m).setFontSize(`${S}px`).translate(h.x-Math.abs(_)/2,y.y+w).rotate(-90).setColor("white"))}p&&(d?C.push(si.builder().setX1(h.x).setY1(v.y).setX2(h.x).setY2(d.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(f?"pointN":"pointH"),si.builder().setX1(h.x).setY1(y.y).setX2(h.x).setY2(d.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(f?"pointN":"pointH"),si.builder().setX1(d.x).setY1(d.y).setX2(h.x+_).setY2(d.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth)):C.push(si.builder().setX1(h.x).setY1(v.y).setX2(h.x).setY2(y.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth)))}return[C,b]}createSizeVirtualArrows(a,c,u,h,d,f=!0,p=!0,g="",m=""){let v=c.x<u.x?c:u,y=c.x<u.x?u:c,_=a.lineSizeExtra*(v.y<h.y?1:-1),b=[],C=[si.builder().setX1(v.x).setY1(v.y).setX2(v.x).setY2(h.y+_).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth),si.builder().setX1(y.x).setY1(y.y).setX2(y.x).setY2(h.y+_).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth)];if(v.x<=h.x&&h.x<=y.x){if(C.push(si.builder().setX1(v.x).setY1(h.y).setX2(y.x).setY2(h.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setStartArrow(f?"arrowN":"arrow").setEndArrow(f?"arrowN":"arrow")),g){let x=Math.abs(_),S=x/2*g.length/2;b.push(ri.builder().setText(g).setFontSize(`${x}px`).translate((v.x+y.x)/2-S,h.y-Math.abs(_)/2).rotate(0).setColor("white"))}}else{let x=h.x<v.x?v.x-h.x:h.x-y.x;if(C.push(si.builder().setX1(v.x-x).setY1(h.y).setX2(v.x).setY2(h.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(f?"arrowN":"arrow"),si.builder().setX1(y.x+x).setY1(h.y).setX2(y.x).setY2(h.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(f?"arrowN":"arrow")),p)if(d){if(C.push(si.builder().setX1(v.x).setY1(h.y).setX2(d.x).setY2(h.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(f?"pointN":"pointH"),si.builder().setX1(y.x).setY1(h.y).setX2(d.x).setY2(h.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(f?"pointN":"pointH"),si.builder().setX1(d.x).setY1(d.y).setX2(d.x).setY2(h.y+_).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth)),g){let S=Math.abs(_),w=-S/2*(m.length+3);b.push(ri.builder().setText(g).setFontSize(`${S}px`).translate(v.x+w,h.y-Math.abs(_)/2).rotate(0).setColor("white"))}if(m){let S=Math.abs(_),w=S/2*3;b.push(ri.builder().setText(m).setFontSize(`${S}px`).translate(y.x+w,h.y-Math.abs(_)/2).rotate(0).setColor("white"))}}else C.push(si.builder().setX1(v.x).setY1(h.y).setX2(y.x).setY2(h.y).setColor(f?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth))}return[C,b]}get createLinesPlateDataPtr(){return a=>this.createLinesPlateData(a)}createLinesPlateData(a){let c=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),u=a.width*c,h=(a.width-u)/2,f=(Math.atan2(1-c,.5),a.lineWidth),p=[],v=a.height/13,y=u/8;for(let _=0;_<=13;_++)p.push(si.builder().setX1(h).setY1(v*_).setX2(a.width-h).setY2(v*_).setColor(a.colorLinesSecondary).setWidth(f));for(let _=0;_<=8;_++)p.push(si.builder().setX1(h+y*_).setY1(0).setX2(h+y*_).setY2(a.height).setColor(a.colorLinesSecondary).setWidth(f));return p.push(si.builder().setX1(a.width/2).setY1(0).setX2(h).setY2(3*v).setColor(a.colorLinesSecondary).setWidth(f)),p.push(si.builder().setX1(a.width/2).setY1(0).setX2(a.width-h).setY2(3*v).setColor(a.colorLinesSecondary).setWidth(f)),new e0(p)}get createLinesDataPtr(){return a=>this.createLinesData(a)}createLinesData(a){let c=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),u=a.width*c,h=(a.width-u)/2,d=Math.atan2(1-c,.5),f=a.lineWidth,p=[],g=[si.builder().setX1(h).setY1(0).setX2(a.width-h).setY2(0).setColor(a.colorLinesHighlighted).setWidth(f),si.builder().setX1(h).setY1(a.height).setX2(a.width-h).setY2(a.height).setColor(a.colorLinesHighlighted).setWidth(f),si.builder().setX1(h).setY1(0).setX2(h).setY2(a.height).setColor(a.colorLinesHighlighted).setWidth(f),si.builder().setX1(a.width/2).setY1(0).setX2(a.width/2).setY2(a.height).setColor(a.colorLinesHighlighted).setWidth(f),si.builder().setX1(a.width-h).setY1(0).setX2(a.width-h).setY2(a.height).setColor(a.colorLinesHighlighted).setWidth(f),si.builder().setX1(h).setY1(u*(1-c)).setX2(a.width-h).setY2(u*(1-c)).setColor(a.colorLinesHighlighted).setWidth(f),si.builder().setX1((a.width-u*(1-c))/2).setY1(u*Math.pow(1-c,2)).setX2((a.width-u*(1-c))/2+u*(1-c)).setY2(u*Math.pow(1-c,2)).setColor(a.colorLinesHighlighted).setWidth(f),si.builder().setX1(h).setY1(a.height-.5*u).setX2(a.width-h).setY2(a.height-.5*u).setColor(a.colorLinesHighlighted).setWidth(f),si.builder().setX1(h).setY1(a.height-u*(1-c+.5)).setX2(a.width-h).setY2(a.height-u*(.5-(1-c))).setColor(a.colorLinesHighlighted).setWidth(f),si.builder().setX1(h).setY1(a.height-u*(1-c+.5)).setX2(a.width-h).setY2(a.height-u*(1-c+.5)).setColor(a.colorLinesHighlighted).setWidth(f),si.builder().setX1(h).setY1(a.height-u*(.5-(1-c))).setX2(a.width-h).setY2(a.height-u*(.5-(1-c))).setColor(a.colorLinesHighlighted).setWidth(f)],m=_=>{g.push(..._[0]),p.push(..._[1])},v=Math.min(a.width,a.height)/10;return m(this.createSizeVirtualArrows(a,new Ri(h,a.height),new Ri(a.width-h,a.height),new Ri(a.width/2,a.height+3*v),null,!0,!0,"1.0")),m(this.createSizeVirtualArrows(a,new Ri(h,a.height),new Ri(a.width/2,a.height),new Ri(a.width/2,a.height+2*v),null,!0,!0,"0.5")),m(this.createSizeVirtualArrows(a,new Ri(a.width/2,a.height),new Ri(a.width-h,a.height),new Ri(a.width/2,a.height+2*v),null,!0,!0,"0.5")),m(this.createSizeVirtualArrows(a,new Ri(a.width/2-.125*u,a.height-.5*u-.25*u/Math.cos(d)/2+a.delta/Math.cos(d)),new Ri(a.width/2+.125*u,a.height-.5*u+.25*u/Math.cos(d)/2),new Ri(1.2*h,a.height+1*v),new Ri(a.width/2,a.height+1*v),!0,!0,"0.125","0.125")),m(this.createSizeVirtualArrows(a,new Ri((a.width-u*(1-c))/2,u*Math.pow(1-c,2)-a.delta/2),new Ri((a.width+u*(1-c))/2,u*Math.pow(1-c,2)-a.delta/2),new Ri(a.width/2,0-2*v),null,!0,!0,"0.382")),m(this.createSizeVirtualArrows(a,new Ri((a.width-u*(1-c))/2,u*Math.pow(1-c,2)-a.delta/2),new Ri((a.width+u*(1-c))/2,u*Math.pow(1-c,2)-a.delta/2),new Ri(1.2*h,0-1*v),new Ri(a.width/2,0),!0,!0,"0.192","0.192")),m(this.createSizeHorizontalArrows(a,new Ri(h,0),new Ri(h,a.height),new Ri(h-2*v,a.height/2),null,!0,!0,"1.618")),m(this.createSizeHorizontalArrows(a,new Ri(h,0),new Ri(h,u*(1-c)),new Ri(h-1*v,u*(1-c)/2),null,!0,!0,"0.146")),m(this.createSizeHorizontalArrows(a,new Ri(h,a.height),new Ri(h,a.height-.5*u),new Ri(h-1*v,a.height-.5*u/2),null,!0,!0,"0.5")),m(this.createSizeHorizontalArrows(a,new Ri(h,a.height-.5*u),new Ri(h,a.height-u*(1-c+.5)),new Ri(h-1*v,a.height-u*(.5+(1-c)/2)),null,!0,!0,"0.382")),m(this.createSizeHorizontalArrows(a,new Ri(a.width-h,0),new Ri(a.width-h,u*(1-c)),new Ri(a.width-h+1*v,-h),new Ri((a.width-u*(1-c))/2+u*(1-c),u*Math.pow(1-c,2)),!0,!0,"0.146","0.236")),m(this.createSizeHorizontalArrows(a,new Ri(a.width-h,a.height),new Ri(a.width-h,a.height-.5*u),new Ri(a.width-h+1*v,a.height+h),new Ri(a.width-h,a.height-u*(.5-(1-c))),!0,!0,"0.382","0.118")),new e0(g,p)}toDegrees(a){return a/Math.PI*180}transformToString(a){return a.map((c,u)=>{let h=`${c.name}(`;return"translate"==c.name||"scale"==c.name?h+=`${c.x},${c.y}`:"rotate"==c.name?(h+=c.angle,(c.x||c.y)&&(h+=`,${c.x},${c.y}`)):("skewY"==c.name||"skewX"==c.name)&&(h+=c.angle),h+=")",h}).join(" ")}render(a,c){let u=c.rects,h=c.lines,d=c.linesPlate,f=c.texts,p=c.circles,g=c.ellipses,m=c.pathes,v=Math.min(c.width,c.height)/20*c.scale,y=v,_=v/2,b=0*y,C=_/2,w=[[0,0],[0,_],[y,_/2]];if(c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439){a.append("defs").append("marker").attr("id","arrow").attr("viewBox",[0,0,y,_]).attr("refX",b).attr("refY",C).attr("markerWidth",y).attr("markerHeight",_).attr("orient","auto-start-reverse").append("path").attr("d",Ju()(w)).attr("fill",c.colorLinesHighlighted),a.select("defs").append("marker").attr("id","arrowN").attr("viewBox",[0,0,y,_]).attr("refX",b).attr("refY",C).attr("markerWidth",y).attr("markerHeight",_).attr("orient","auto-start-reverse").append("path").attr("d",Ju()(w)).attr("fill",c.colorLines);let T=v,M=v,I=(P,B,V)=>"M "+P+" "+B+" m -"+V+", 0 a "+V+","+V+" 0 1,0 "+2*V+",0 a "+V+","+V+" 0 1,0 -"+2*V+",0";a.select("defs").append("marker").attr("id","pointH").attr("viewBox",[0,0,T,M]).attr("refX",T/2).attr("refY",M/2).attr("markerWidth",v).attr("markerHeight",v).attr("orient","auto-start-reverse").append("path").attr("d",I(v/2,v/2,v/4)).attr("fill",c.colorLinesHighlighted),a.select("defs").append("marker").attr("id","pointN").attr("viewBox",[0,0,T,M]).attr("refX",T/2).attr("refY",M/2).attr("markerWidth",v).attr("markerHeight",v).attr("orient","auto-start-reverse").append("path").attr("d",I(v/2,v/2,v/4)).attr("fill",c.colorLines)}c.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u041a\u0440\u0435\u0441\u0442&&u.forEach(T=>{var M=a.append("rect").attr("x",T.x).attr("y",T.y).attr("rx",T.rx).attr("ry",T.ry).attr("transform",this.transformToString(T.transform||[])).attr("width",T.width).attr("height",T.height).style("fill",T.fillColor||"black").attr("fill-opacity",T.fillOpacity||1).style("stroke",T.strokeColor||"black").style("stroke-width",T.strokeWidth).attr("stroke-opacity",T.strokeOpacity||1).attr("class",T.classes.join(" ")).style("visibility",T.visible?"visible":"hidden");T.events.forEach(A=>{M.on(A.name,A.func)}),T.d3Object=M});let O=[];if(c.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b&&O.push(...h),c.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0421\u0435\u0442\u043a\u0443&&O.push(...d),O){let T=I=>v/c.scale*Math.cos(Math.atan2(I.y2-I.y1,I.x2-I.x1)),M=I=>v/c.scale*Math.sin(Math.atan2(I.y2-I.y1,I.x2-I.x1)),A=I=>I&&I.startsWith("arrow");O.forEach(I=>{let E=a.append("line"),P=(B,V)=>B.style("stroke",V.color).style("stroke-width",V.width).attr("x1",V.x1+(A(V.startArrow)?T(V):0)).attr("y1",V.y1+(A(V.startArrow)?M(V):0)).attr("x2",V.x2-(A(V.endArrow)?T(V):0)).attr("y2",V.y2-(A(V.endArrow)?M(V):0)).attr("transform",this.transformToString(V.transform||[])).attr("marker-start",V.startArrow?"url(#"+V.startArrow+")":"").attr("marker-end",V.endArrow?"url(#"+V.endArrow+")":"").attr("class",V.classes.join(" ")).style("visibility",V.visible?"visible":"hidden");E=P(E,I),I.transitions&&I.transitions.forEach(B=>{E=P(E.transition().delay(B.delay).duration(B.duration),B.data)})})}p.forEach(T=>{let M=a.append("circle");M=T.applyToD3Object(M),M=T.applyEventsToD3Object(M)}),a.selectAll("ellipse").data(g).enter().append("ellipse").attr("cx",0).attr("cy",0).attr("rx",T=>T.rx).attr("ry",T=>T.ry).attr("fill",T=>T.fillColor).attr("fill-opacity",T=>T.fillOpacity).attr("stroke",T=>T.strokeColor).attr("stroke-width",T=>T.strokeWidth).attr("transform",T=>this.transformToString(T&&T.transform||[])).attr("class",T=>T.classes.join(" ")).style("visibility",T=>T.visible?"visible":"hidden"),m.forEach(T=>{if(T.renderHandler)T.renderHandler(a,T);else{let M=a.append("path").datum(T.datum);M=T.applyToD3Object(M),M=T.applyEventsToD3Object(M)}}),f.forEach(T=>{let M=a.append("text").text(T.text);M=T.applyToD3Object(M),M=T.applyEventsToD3Object(M)})}textSizeDirect(a,c,u){if(ze){var h=ro("body").append("svg");h.append("text").attr("x",-99999).attr("y",-99999).attr("font-size",c).attr("font-weight",u).text(a);var f=h.node().getBBox();return h.remove(),{width:f.width,height:f.height}}}textSize(a,c){if(ze){var u=ro("body").append("svg");a.append("text").text(c.text).attr("x",-99999).attr("y",-99999).attr("font-size",c.fontSize).attr("font-weight",c.fontWeight).attr("text-anchor",c.textAnchor).style("fill",c.color).attr("class",c.classes.join(" ")).style("visibility",c.visible?"visible":"hidden");var d=u.node().getBBox();return u.remove(),{width:d.width,height:d.height}}}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class j8{constructor(o,a,c,u,h=null,d=null,f=null){this.logoWidth=o,this.logoHeight=a,this.d3Svc=c,this.mySvgRef=u,this.generator=h,this.delayedRun=d,this.d3Config=f,this.delta=1,this.svg=null,this.delta=Math.min(o,a)/10,null==this.d3Config&&this.regenerateConfig()}regenerateConfig(){return this.d3Config=new t0(!0,!0,!1,!0,.5,this.logoWidth,this.logoHeight,Math.min(this.logoWidth,this.logoHeight)/15,2,Math.min(this.logoWidth,this.logoHeight)/20,"black","gold","firebrick","red","white","green","cyan",this),this}getGenerator(){return this.generator}setGenerator(o){return this.generator&&this.clear().regenerateConfig(),this.generator=o,this}createD3Config(o){this.generator?this.generator.generate(this.d3Svc,this.d3Config,o)&&o():(this.d3Svc.createDataScale(this.d3Config,this.d3Svc.createDataPtr,(a,c)=>a.rects=c.first),this.d3Svc.createDataScale(this.d3Config,this.d3Svc.createLinesDataPtr,(a,c)=>{a.lines=c.first,c.second&&a.texts.push(...c.second)}),this.d3Svc.createDataScale(this.d3Config,this.d3Svc.createLinesPlateDataPtr,(a,c)=>a.linesPlate=c.first),o())}clear(){return this.removeExistingSvgFromParent(),this.generator.clear(),this}clearDelayed(){this.delayedRun(()=>this.clear(),0)}clearAll(){this.g.selectAll("*").remove()}updateSvg(o=(()=>{})){return this.svg||this.createSvgImage(o),this}createSvgImage(o){this.createD3Config(()=>{this.afterCreateSvgImage(o)})}afterCreateSvgImage(o){this.applySizeAfterGeneration(),this.removeExistingSvgFromParent(),this.setSvgDimensions(),this.addGraphicsElement(),this.createAreaSvg(),o&&o()}applySizeAfterGeneration(){this.generator&&(this.logoWidth=this.generator.getWidth(),this.logoHeight=this.generator.getHeight())}removeExistingSvgFromParent(){ro(this.mySvgRef.nativeElement).select("svg").remove(),this.svg=null,this.g=null}addGraphicsElement(){this.g=this.svg.append("g").attr("transform","translate(0,0)")}createAreaSvg(){this.d3Svc.render(this.g,this.d3Config)}setSvgDimensions(){let o=this.generator.getHeight(),a=this.generator.getWidth();this.svg=ro(this.mySvgRef.nativeElement).append("svg").attr("preserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+a+" "+o)}}class sl{constructor(o='\u041a\u0440\u0435\u0441\u0442 \u043f\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u0443 "\u0437\u043e\u043b\u043e\u0442\u043e\u0433\u043e \u0441\u0435\u0447\u0435\u043d\u0438\u044f".',a=512,c=512){this.name=o,this.width=a,this.height=c}clear(){return this}regenerate(){return this}getWidth(){return this.width}getHeight(){return this.height}generate(o,a,c){return o.createDataScale(a,o.createDataPtr,(u,h)=>u.rects=h.first),o.createDataScale(a,o.createLinesDataPtr,(u,h)=>{u.lines=h.first,u.texts.push(...h.second)}),o.createDataScale(a,o.createLinesPlateDataPtr,(u,h)=>u.linesPlate=h.first),a.texts.push(ri.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("gold")),!0}}class gle extends sl{constructor(o="\u041f\u0440\u0438\u043c\u0435\u0440 \u0442\u0435\u043a\u0441\u0442\u0430.",a=512,c=512){super(o,a,c)}generate(o,a,c){a.rects.push(o.createBackground(a)),a.texts.push(ri.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick"));for(let h=0;h<10;h++)a.texts.push(ri.builder().setText("\u041f\u0440\u0438\u043c\u0435\u0440 \u0442\u0435\u043a\u0441\u0442\u0430: "+h).setFontSize("20px").translate(a.width/2,a.height/2).rotate(36*h).setColor("white"));return!0}}class mle extends sl{constructor(o="\u041f\u0440\u0438\u043c\u0435\u0440 \u043e\u043a\u0440\u0443\u0436\u043d\u043e\u0441\u0442\u0435\u0439.",a=512,c=512){super(o,a,c)}generate(o,a,c){a.rects.push(o.createBackground(a)),a.texts.push(ri.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick")),a.circles.push(Hp.builder().setR(100).translate(a.width/2,a.height/2).rotate(0).setFillColor("gold"));for(let d=0;d<12;d++)a.circles.push(Hp.builder().setR(10).translate(a.width/2,a.height/2).rotate(30*d).setFillColor("gold").translate(130,0));return!0}}class vle extends sl{constructor(o="\u041f\u0440\u0438\u043c\u0435\u0440 \u044d\u043b\u043b\u0438\u043f\u0441\u043e\u0432.",a=512,c=512){super(o,a,c)}generate(o,a,c){a.rects.push(o.createBackground(a)),a.texts.push(ri.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick"));for(let h=0;h<3;h++)a.ellipses.push(Q8.builder().setRx(50).setRy(100).translate(a.width/2,a.height/2).rotate(60*h).setFillColor("gold").setFillOpacity(.5));return!0}}class yle extends sl{constructor(o="\u041f\u0440\u0438\u043c\u0435\u0440 \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a\u043e\u0432.",a=512,c=512){super(o,a,c)}generate(o,a,c){a.rects.push(o.createBackground(a)),a.texts.push(ri.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick"));for(let h=0;h<5;h++)a.rects.push(cs.builder().setX(100*h).setY(0).setWidth(100).setHeight(100).setRx(5*h).setRy(5*h).translate(6,a.height/3).rotate(0).setFillColor("gold").setStrokeColor("firebrick").setStrokeWidth(2));return a.rects.push(cs.builder().setX(0).setY(0).setWidth(200).setHeight(200).translate(a.width/2-100,a.height/3*1.5).rotate(0).setFillColor("gold").setStrokeColor("firebrick").setStrokeWidth(2).addClass("rxanimated")),!0}}class _le extends sl{constructor(o="\u041f\u0440\u0438\u043c\u0435\u0440 \u0433\u0440\u0430\u0444\u0438\u043a\u043e\u0432.",a=512,c=512){super(o,a,c)}generate(o,a,c){a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,a.rects.push(o.createBackground(a)),a.texts.push(ri.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick"));let h=()=>{const g=rc(0,10).map(_=>[.5*_*Math.PI,Math.sin(.5*_*Math.PI)]),m=__().range([0,a.width/2]).domain(wm(g,_=>_[0])),v=__().range([a.height/2-20,0]).domain([-1,1]);return{sine:g,line:Ju().x(_=>m(_[0])).y(_=>v(_[1])),x:m,y:v}},d=[10,a.height/4];{let g=h();a.pathes.push(Zr.builder().setDatum(g.sine).setD(g.line).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("none").translate(d[0],d[1]))}{let g=h();a.pathes.push(Zr.builder().setDatum(g.sine).setD(g.line.curve(U8)).setStrokeColor("green").setStrokeWidth(2).setFillColor("none").translate(d[0],d[1]))}{let g=h();a.pathes.push(Zr.builder().setDatum(g.sine).setD(g.line.curve(xS)).setStrokeColor("red").setStrokeWidth(2).setFillColor("none").translate(d[0],d[1]))}{let g=h();a.pathes.push(Zr.builder().setDatum(g.sine).setD(g.line.curve(I8)).setStrokeColor("cyan").setStrokeWidth(2).setFillColor("none").translate(d[0],d[1]))}{let g=h();a.pathes.push(Zr.builder().setDatum(g.sine).setD(g.line.curve(z8)).setStrokeColor("gold").setStrokeWidth(2).setFillColor("none").translate(d[0],d[1]))}let f=()=>{const g=rc(0,10).map(_=>[.5*_*Math.PI,Math.sin(.5*_*Math.PI)]),m=__().range([a.width/2+10,a.width-20]).domain(wm(g,_=>_[0])),v=__().range([a.height/2-20,0]).domain([-1,1]);return{sine:g,area:E8().x(_=>m(_[0])).y0(a.height/4-10).y1(_=>v(_[1]))}};{let g=f();a.pathes.push(Zr.builder().setDatum(g.sine).setD(g.area.curve(U8)).setStrokeColor("green").setStrokeWidth(2).setFillColor("green").setFillOpacity(.5).translate(d[0],d[1]))}{let g=f();a.pathes.push(Zr.builder().setDatum(g.sine).setD(g.area.curve(z8)).setStrokeColor("gold").setStrokeWidth(2).setFillColor("gold").setFillOpacity(.5).translate(d[0],d[1]))}{let g=f();a.pathes.push(Zr.builder().setDatum(g.sine).setD(g.area.curve(xS)).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("steelblue").setFillOpacity(.5).translate(d[0],d[1]))}{let g=D8();a.pathes.push(Zr.builder().setD(g({outerRadius:100,innerRadius:50,startAngle:.25*-Math.PI,endAngle:.25*Math.PI})).setStrokeColor("green").setStrokeWidth(2).setFillColor("green").setFillOpacity(.5).translate(100,a.height))}a.pathes.push(Zr.builder().setRenderHandler((g,m)=>{g.append("path").attr("d",t5()({source:{radius:50,startAngle:.3*-Math.PI,endAngle:.2*-Math.PI},target:{radius:50,startAngle:.3*Math.PI,endAngle:.3*Math.PI}})).attr("stroke",m.strokeColor).attr("stroke-width",m.strokeWidth).attr("fill",m.fillColor).attr("transform",(v,y)=>o.transformToString(m.transform||[]))}).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("steelblue").setFillOpacity(.5).translate(a.width/2,a.height-50));{const g=bte(rc(0,12),vte(rc(0,12))),m=["linen","lightsteelblue","lightcyan","lavender","honeydew","gainsboro"],v=100;a.pathes.push(Zr.builder().setRenderHandler((y,_)=>{g.forEach((b,C)=>{let x=b[0],S=b[1];y.append("path").attr("d",t5()({source:{radius:v,startAngle:-2*Math.PI*(1/g.length)*x,endAngle:-2*Math.PI*(1/g.length)*(x-1)%g.length},target:{radius:v,startAngle:-2*Math.PI*(1/g.length)*S,endAngle:-2*Math.PI*(1/g.length)*(S-1)%g.length}})).attr("stroke",m[(C+1)%m.length]).attr("stroke-width",_.strokeWidth).attr("fill",m[(C+0)%m.length]).attr("transform",(w,O)=>o.transformToString(_.transform||[]))})}).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("steelblue").setFillOpacity(.5).translate(a.width/4*3+50,a.height-v))}return!0}}class ble extends sl{constructor(o="\u041f\u0440\u0438\u043c\u0435\u0440 \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u0439.",a=512,c=512){super(o,a,c)}generate(o,a,c){return a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,a.rects.push(o.createBackground(a)),a.texts.push(ri.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick")),["easeLinear","easeQuadIn","easeQuadInOut","easeQuadOut","easeCubicIn","easeSinIn","easeCircleIn","easeBounceIn","easeCubicIn","easeCubicOut","easeCubicInOut"].forEach((u,h)=>{let d=100+30*h;a.pathes.push(Zr.builder().setRenderHandler((p,g)=>{let m=Hp.builder().setR(10).translate(a.width/2,d),v=p.append("circle").attr("cx",0).attr("cy",0).attr("r",m.r).attr("fill",m.fillColor).attr("fill-opacity",m.fillOpacity).attr("stroke",m.strokeColor).attr("stroke-width",m.strokeWidth).attr("transform",o.transformToString(m&&m.transform||[])),y=p.append("text").attr("x",0).attr("y",d).text(u).attr("font-size",20).attr("text-anchor","start").attr("stroke","yellow").style("fill","red"),b=a.width/2-10,C=(w,O)=>{w.transition().duration(3e3).ease(ze[u]).attr("x",b).attr("cx",b).attr("stroke","gold").attr("fill","red").transition().duration(3e3).ease(ze[u]).attr("x",0).attr("cx",0).attr("stroke","red").attr("fill","blue").on("end",O)},x=null;x=()=>C(v,x);let S=null;S=()=>C(y,S),x(),S()}))}),!0}}class xle extends sl{constructor(o="\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 UI.",a=512,c=512){super(o,a,c)}generate(o,a,c){a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,a.rects.push(o.createBackground(a)),a.texts.push(ri.builder().setText("UI interaction demo.").setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick"));let u=100;return[{easeFunc:"easeCubicOut",r:10},{easeFunc:"easeCubic",r:10},{easeFunc:"drag circle: ",r:50,drag:!0}].forEach((h,d)=>{let f=u+h.r+10,p=h.r;a.pathes.push(Zr.builder().setRenderHandler((g,m)=>{let v=Hp.builder().setR(p).translate(a.width/2,f),y=0,_=g.append("circle").attr("cx",y).attr("cy",0).attr("r",v.r).attr("fill",v.fillColor).attr("fill-opacity",v.fillOpacity).attr("stroke",v.strokeColor).attr("stroke-width",v.strokeWidth).attr("transform",o.transformToString(v&&v.transform||[])),b=g.append("text").attr("x",0).attr("y",f).text(h.easeFunc).attr("font-size",20).attr("text-anchor","start").attr("stroke","yellow").style("fill","red"),x=a.width/2-p,S=(M,A)=>{M.transition().duration(3e3).ease(ze[h.easeFunc]).attr("x",x).attr("cx",x).attr("stroke","gold").attr("fill","red").transition().duration(3e3).ease(ze[h.easeFunc]).attr("x",0).attr("cx",0).attr("stroke","red").attr("fill","blue")},w=null;w=()=>S(_);let O=null;O=()=>S(b);let T=()=>{w(),O()};if(h.drag){let M=gie().on("drag",A=>{const I=Math.round(1e3*A.dx)/1e3;b.text("drag: dx: "+I);let E=y+I;E<0?E=0:E>a.width/2&&(E=a.width/2),y=E,_.attr("cx",y)});_.call(M)}else _.on("click",T),b.on("click",T)})),u+=2*h.r+20}),!0}}var ol=(()=>(function(l){l[l.Default=0]="Default",l[l.Dark=1]="Dark",l[l.Light=2]="Light",l[l.Dark2=3]="Dark2",l[l.Light2=4]="Light2"}(ol||(ol={})),ol))();class D_{constructor(o=ol.Default,a="\u041a\u0440\u0435\u0441\u0442.",c=512,u=512){this.theme=o,this.name=a,this.width=c,this.height=u}clear(){return this}regenerate(){return this}getWidth(){return this.width}getHeight(){return this.height}updateThemeConfig(o){switch(this.theme){case ol.Dark:o.colorBackground="#0e161b",o.colorMain="white";break;case ol.Light:o.colorBackground="#00364D",o.colorMain="white";break;case ol.Dark2:o.colorBackground="white",o.colorMain="#0e161b";break;case ol.Light2:o.colorBackground="white",o.colorMain="#00364D"}}generate(o,a,c){a.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b=!1,this.updateThemeConfig(a),o.createDataScale(a,o.createGolgofaDataPtr,(h,d)=>{h.rects=d.first,d.isSecond()&&(h.pathes=d.second),d.isThird()&&(h.texts=d.third)});var u=ri.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("none");return a.texts.push(u),a.onItemSelected=h=>{u.d3Object&&u.d3Object.interrupt().transition(100).attr("fill-opacity",0).style("fill",a.colorMain).transition().duration(2e3).attr("fill-opacity",1).text(h).transition().delay(1e3).transition().duration(1e3).attr("fill-opacity",0)},!0}}var ko=(()=>(function(l){l[l.Default=0]="Default",l[l.Dark=1]="Dark",l[l.Light=2]="Light",l[l.Dark2=3]="Dark2",l[l.Light2=4]="Light2"}(ko||(ko={})),ko))();class Ca{constructor(o,a){this.name=o,this.tag=a}static builder(){return new Ca("",null)}setName(o){return this.name=o,this}setTag(o){return this.tag=o,this}}class $p{constructor(){this.genName="Menu",this.commands=[],this.printOnly=!1}static builder(){return new $p}setGenName(o){return this.genName=o,this}setCommands(o){return this.commands=o,this}setPrintOnly(o){return this.printOnly=o,this}addCommand(o){return this.commands.push(o),this}}class Cle extends sl{constructor(o=ko.Default,a=512,c=128){super("\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e.",a,c),this.theme=o,this.svgImage=null,this.onCommandHandler=null,this.onPreviewCommandHandler=null,this.autoClickOnChangeEnabled=!1,this.strokeInvisible=!0,this.updateAll=null,this.updateText=null,this.updateAllPds=null,this.updateAllRects=null,this.commands=[Ca.builder().setName("\u0418\u043c\u044f"),Ca.builder().setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),Ca.builder().setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),Ca.builder().setName("\u041c\u0438\u0440")],this.currentIndex=0}regenerate(){return super.regenerate(),this.updateAll&&this.updateAll(),this}setAutoClickOnChange(o){return this.autoClickOnChangeEnabled=o,this}setCommands(o,a=null){return this.commands=o,this.currentIndex=a?this.commands.indexOf(a):-1,this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.currentIndex<0&&(this.currentIndex=0),this}setOnCommandHandler(o){return this.onCommandHandler=o,this}setOnPreviewCommandHandler(o){return this.onPreviewCommandHandler=o,this}setTheme(o){return this.theme=o,this}setSvgImages(o){return this.svgImage=o,this}updateThemeConfig(o){switch(this.theme){case ko.Dark:this.strokeInvisible=!0,o.colorBackground="#0e161b",o.colorMain="white";break;case ko.Light:this.strokeInvisible=!0,o.colorBackground="#00364D",o.colorMain="white";break;case ko.Dark2:this.strokeInvisible=!0,o.colorBackground="#0e161b",o.colorMain="white";break;case ko.Light2:this.strokeInvisible=!0,o.colorBackground="white",o.colorMain="#00364D"}}isLight(){let o=!0;switch(this.theme){case ko.Light2:case ko.Light:break;default:o=!1}return o}runOnCommand(o){return this.onCommandHandler&&this.onCommandHandler(o),this}runOnPreviewCommand(o){return this.onPreviewCommandHandler&&this.onPreviewCommandHandler(o),this}isGenerated(){return!!this.updateAll}generate(o,a,c){if(this.updateAll)return this.updateAll(),!0;a.clearAll(),this.updateThemeConfig(a);let u=U=>{let z=Wu(U);return z.r<<16|z.g<<8|z.b},h=(U,z)=>{z?U.transition().duration(1).style("visibility","visible").transition().duration(1e3).attr("fill-opacity",1).attr("stroke-opacity",1):U.transition().duration(1e3).attr("fill-opacity",0).attr("stroke-opacity",0).transition().duration(1).style("visibility","hidden")},d=u(a.colorMain),p=.8,g=.3;a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1;let b=(U,z=1,$)=>{let H=(16711680&U)>>16,G=(65280&U)>>8,W=255&U;z<1&&0==H&&0==G&&0==W&&(H=G=W=255);let X=H*z&255,K=G*z&255,ae=W*z&255;if(z<1){let Ce=u(a.colorBackground);X=(16711680&Ce)>>16,K=(65280&Ce)>>8,ae=255&Ce}return ff(X,K,ae,$).formatHex()},x=a.height/32*1,S=a.height/32*1,w=Math.round(.8*a.height),O=()=>a.width/8*6,T=U=>{let z=Math.round(.8*a.height),$=o.textSizeDirect(U,z,300),H=.8*O();return $.width>H&&(z=z*H/$.width),z},M=ri.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${T(this.commands[this.currentIndex].name)}px`).translate(a.width/2+x,a.height/2+w/4+S).rotate(0).setColor(b(d,g)).setStrokeColor(b(d,g)).setStrokeWidth(1).setVisible(!0).addEvent(Fi.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor"),A=ri.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${T(this.commands[this.currentIndex].name)}px`).translate(a.width/2,a.height/2+w/4).rotate(0).setColor(b(d)).setStrokeColor(b(d,this.strokeInvisible?1:g)).setStrokeWidth(1).addEvent(Fi.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor");a.texts.push(M),a.texts.push(A),this.updateText=U=>{M.d3Object.transition().duration(150).style("fill","#00000000").style("stroke","#00000000").transition().duration(1e3).style("fill",b(d,g)).style("stroke",b(d,g)).attr("font-size",`${T(this.commands[this.currentIndex].name)}px`).text(U),A.d3Object.transition().duration(150).style("fill","#00000000").style("stroke","#00000000").transition().duration(1e3).style("fill",b(d)).style("stoke",b(d)).attr("font-size",`${T(this.commands[this.currentIndex].name)}px`).text(U)};let P=[];this.updateAllPds=()=>{P.forEach(U=>{U.shadow?h(U.pd.d3Object,this.commands.length>1):(U.leftArrow&&0==this.currentIndex?h(U.pd.d3Object,!1):U.leftArrow&&h(U.pd.d3Object,!0),U.leftArrow||this.currentIndex+1!=this.commands.length?U.leftArrow||h(U.pd.d3Object,!0):h(U.pd.d3Object,!1))})},this.updateAll=()=>{let U=this.commands[this.currentIndex];this.updateText&&U&&this.updateText(U.name),this.updateAllPds&&this.updateAllPds(),this.updateAllRects&&this.updateAllRects(),this.runOnPreviewCommand(U)};let B=(U,z=null,$="gold",H="white",G=!0,W=!1)=>{let X=((U=null)=>({dd:U||[[0,0],[1,1],[1,-1],[0,0]],line:Ju().x(H=>H[0]*(a.width/8)).y(H=>(H[1]/2+.5)*(a.height-2))}))(z),K=Zr.builder().setDatum(X.dd).setD(X.line).setStrokeColor(H).setStrokeWidth(1).setFillColor($).translate(U[0],U[1]+1).addEvent(Fi.builder().setName("click").setFunc(()=>{G?--this.currentIndex<0&&(this.currentIndex=0):++this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.updateAll&&this.updateAll(),this.onChange()})).setVisible(W&&this.commands.length>1||G&&this.currentIndex>0||!G&&this.currentIndex+1<this.commands.length);W||K.addClass("cursor"),P.push({leftArrow:G,pd:K,shadow:W}),a.pathes.push(K)},V=(U,z,$,H)=>{let G=[];return U.forEach(W=>{let X=[];X.push(W[0]*z+$/(a.width/8)),X.push(W[1]*z+H/a.height),G.push(X)}),G};B([0,0],V([[0,0],[1,1],[1,-1],[0,0]],p,x,S),b(d,g),b(d,1),!0,!0),B([a.width/8*7,0],V([[0,1],[1,0],[0,-1],[0,1]],p,x,S),b(d,g),b(d,1),!1,!0),B([0,0],V([[0,0],[1,1],[1,-1],[0,0]],p,0,0),b(d,1),b(u(b(d,1)),g),!0),B([a.width/8*7,0],V([[0,1],[1,0],[0,-1],[0,1]],p,0,0),b(d,1),b(u(b(d,1)),g),!1);let Q=this.commands.length,j=.9*O(),N=[];this.updateAllRects=()=>{N.forEach((U,z)=>{U.forEach(($,H)=>{if(0==H)return h($[0].d3Object,!0),void h($[1].d3Object,!0);z==this.currentIndex?(h($[0].d3Object,!0),h($[1].d3Object,!0)):(h($[0].d3Object,!1),h($[1].d3Object,!1))})})};for(let U=0;U<Q;U++){let z=j/Q,$=.9,H=(a.width-j)/2+z*U+z*(1-$)/2,G=[cs.builder().setFillColor("none").setStrokeColor(b(d,1)).setStrokeWidth(1).setWidth(z*$).setHeight(a.height/10*1).translate(H+x,a.height/10*8+S).setVisible(!0),cs.builder().setFillColor(b(d,g)).setStrokeColor(b(d,1)).setStrokeWidth(1).setWidth(z*$).setHeight(a.height/10*1).translate(H+x,a.height/10*8+S).setVisible(!0)],W=[cs.builder().setFillColor("none").setStrokeColor(b(d,1)).setStrokeWidth(1).setWidth(z*$).setHeight(a.height/10*1).translate(H,a.height/10*8).setVisible(U==this.currentIndex),cs.builder().setFillColor(b(d,1)).setStrokeColor(b(d,1)).setStrokeWidth(1).setWidth(z*$).setHeight(a.height/10*1).translate(H,a.height/10*8).setVisible(U==this.currentIndex)];a.rects.push(...G),a.rects.push(...W),N.push([G,W])}return!0}onChange(){this.autoClickOnChangeEnabled&&this.runOnCommand(this.commands[this.currentIndex])}}var Bs=(()=>(function(l){l[l.Default=0]="Default",l[l.Dark=1]="Dark",l[l.Light=2]="Light",l[l.Dark2=3]="Dark2",l[l.Light2=4]="Light2",l[l.Dark3=5]="Dark3",l[l.Light3=6]="Light3"}(Bs||(Bs={})),Bs))();class Wp{constructor(o,a){this.name=o,this.tag=a}static builder(){return new Wp("",null)}setName(o){return this.name=o,this}setTag(o){return this.tag=o,this}}class vM extends sl{constructor(o=Bs.Default){super("\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e.",512,512),this.theme=o,this.autoClickOnChangeEnabled=!1,this.strokeInvisible=!0,this.useShadow=!0,this.commands=[Wp.builder().setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),Wp.builder().setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),Wp.builder().setName("\u041c\u0438\u0440")],this.currentIndex=0}setShadowEnabled(o){return this.useShadow=o,this}setAutoClickOnChange(o){return this.autoClickOnChangeEnabled=o,this}setCommands(o,a){return this.commands=o,this.currentIndex=this.commands.indexOf(a),this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.currentIndex<0&&(this.currentIndex=0),this}setOnCommandHandler(o){return this.onCommandHandler=o,this}setTheme(o){return this.theme=o,this}setSvgImages(o){return this.svgImage=o,this}updateThemeConfig(o){switch(this.theme){case Bs.Dark:this.strokeInvisible=!0,o.colorBackground="#0e161b",o.colorMain="white";break;case Bs.Light:this.strokeInvisible=!0,o.colorBackground="#00364D",o.colorMain="white";break;case Bs.Dark2:this.strokeInvisible=!0,o.colorBackground="#0e161b",o.colorMain="white";break;case Bs.Light2:this.strokeInvisible=!0,o.colorBackground="white",o.colorMain="#00364D";break;case Bs.Dark3:this.strokeInvisible=!0,o.colorBackground="#0e161b",o.colorMain="#4AAED9";break;case Bs.Light3:this.strokeInvisible=!0,o.colorBackground="white",o.colorMain="#0072A3"}}isLight(){let o=!0;switch(this.theme){case Bs.Light3:case Bs.Light2:case Bs.Light:break;default:o=!1}return o}runOnCommand(o){return this.onCommandHandler&&this.onCommandHandler(o,this),this}generate(o,a,c){this.updateThemeConfig(a);let u=X=>{let K=Wu(X);return K.r<<16|K.g<<8|K.b},h=(X,K)=>{K?X.transition().duration(1).style("visibility","visible").transition().duration(1e3).attr("fill-opacity",1).attr("stroke-opacity",1):X.transition().duration(1e3).attr("fill-opacity",0).attr("stroke-opacity",0).transition().duration(1).style("visibility","hidden")},d=u(a.colorMain),f=this.useShadow,g=.3;a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1;let b=(X,K=1,ae)=>{let se=(16711680&X)>>16,Ce=(65280&X)>>8,ve=255&X;K<1&&0==se&&0==Ce&&0==ve&&(se=Ce=ve=255);let Oe=se*K&255,$e=Ce*K&255,Me=ve*K&255;if(K<1){let Xe=u(a.colorBackground);Oe=(16711680&Xe)>>16,$e=(65280&Xe)>>8,Me=255&Xe}return ff(Oe,$e,Me,ae).formatHex()},x=a.width/32*1,S=a.height/32*1,M=(Math.round(.8*a.height),1/3),A=2/3,E=X=>{let K=Math.round(.8*a.height),ae=o.textSizeDirect(X,K,300),se=a.width/24*22*.8,Ce=a.height/3*.8;return ae.width>se&&(K=K*se/ae.width,ae=o.textSizeDirect(X,K,300)),ae.height>Ce&&(K=K*Ce/ae.height),K},P=E(this.commands[this.currentIndex].name),B=ri.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${P}px`).translate(a.width/2+x,a.height/2+P/4+S).rotate(0).setColor(b(d,g)).setStrokeColor(b(d,g)).setStrokeWidth(1).setVisible(f).addEvent(Fi.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor"),V=ri.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${P}px`).translate(a.width/2,a.height/2+P/4).rotate(0).setColor(b(d)).setStrokeColor(b(d,this.strokeInvisible?1:g)).setStrokeWidth(1).addEvent(Fi.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor");a.texts.push(B),a.texts.push(V);let Q=X=>{B.d3Object.transition().duration(1e3).attr("font-size",`${E(this.commands[this.currentIndex].name)}px`).text(X),V.d3Object.transition().duration(1e3).attr("font-size",`${E(this.commands[this.currentIndex].name)}px`).text(X)},U=[],z=()=>{U.forEach(X=>{X.shadow?h(X.pd.d3Object,!0):(X.upArrow||0!=this.currentIndex?X.upArrow||h(X.pd.d3Object,!0):h(X.pd.d3Object,!1),X.upArrow&&this.currentIndex+1==this.commands.length?h(X.pd.d3Object,!1):X.upArrow&&h(X.pd.d3Object,!0))})},$=(X,K,ae="gold",se="white",Ce=!0,ve=!1)=>{let Oe=(X=>({dd:X||[[0,0],[1,1],[1,-1],[0,0]],line:Ju().x(se=>(0+se[0])*a.width).y(se=>(1-se[1])*(a.height-24))}))(K),$e=Zr.builder().setDatum(Oe.dd).setD(Oe.line).setStrokeColor(se).setStrokeWidth(1).setFillColor(ae).translate(X[0]+0*(ve?x:0),X[1]+1+(ve?S:0)).addEvent(Fi.builder().setName("click").setFunc(()=>{Ce?(this.currentIndex+1<this.commands.length&&++this.currentIndex,this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1)):(this.currentIndex>0&&--this.currentIndex,this.currentIndex<0&&(this.currentIndex=0)),Q(this.commands[this.currentIndex].name),z(),this.onChange()})).setVisible(!0);ve||$e.addClass("cursor"),U.push({upArrow:Ce,pd:$e,shadow:ve}),a.pathes.push($e)},H=(X,K,ae,se,Ce)=>{let ve=[];return X.forEach(Oe=>{let $e=[];$e.push(Oe[0]*K+se),$e.push(Oe[1]*ae+Ce),ve.push($e)}),ve};return f&&($([0,0],H([[0,0],[.5,1],[1,0],[0,0]],1,M,0,A),b(d,g),b(d,1),!0,!0),$([0,A],H([[0,1],[.5,0],[1,1],[0,1]],1,M,0,0),b(d,g),b(d,1),!1,!0)),$([0,0],H([[0,0],[.5,1],[1,0],[0,0]],1,1*M,0,A),b(d,1),b(u(b(d,1)),g),!0),$([0,A],H([[0,1],[.5,0],[1,1],[0,1]],1,1*M,0,0),b(d,1),b(u(b(d,1)),g),!1),!0}onChange(){this.autoClickOnChangeEnabled&&this.runOnCommand(this.commands[this.currentIndex])}}var Sa=(()=>(function(l){l[l.Default=0]="Default",l[l.Dark=1]="Dark",l[l.Light=2]="Light",l[l.Dark2=3]="Dark2",l[l.Light2=4]="Light2",l[l.Dark3=5]="Dark3",l[l.Light3=6]="Light3"}(Sa||(Sa={})),Sa))();class Gp{constructor(o,a,c,u){this.name=o,this.index=a,this.iWidth=c,this.tag=u,this.rect=null,this.text=null}static builder(){return new Gp("",0,1,null)}setName(o){return this.name=o,this}setTag(o){return this.tag=o,this}setIndex(o){return this.index=o,this}setIWidth(o){return this.iWidth=o,this}}class mqe extends sl{constructor(o=Sa.Default,a="\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e.",c=512,u=512){super(a,c,u),this.theme=o,this.svgImage=null,this.onCommandHandler=null,this.autoClickOnChangeEnabled=!1,this.strokeInvisible=!0,this.useShadow=!0,this.commands=[Gp.builder().setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),Gp.builder().setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),Gp.builder().setName("\u041c\u0438\u0440")],this.currentIndex=0,this.linesOfMonth=7}setShadowEnabled(o){return this.useShadow=o,this}setAutoClickOnChange(o){return this.autoClickOnChangeEnabled=o,this}setCommands(o,a=null){return this.commands=o,this.currentIndex=a?this.commands.indexOf(a):-1,this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.currentIndex<0&&(this.currentIndex=0),this}setOnCommandHandler(o){return this.onCommandHandler=o,this}setTheme(o){return this.theme=o,this}setSvgImages(o){return this.svgImage=o,this}updateThemeConfig(o){switch(this.theme){case Sa.Dark:this.strokeInvisible=!0,o.colorBackground="#0e161b",o.colorMain="white";break;case Sa.Light:this.strokeInvisible=!0,o.colorBackground="#00364D",o.colorMain="white";break;case Sa.Dark2:this.strokeInvisible=!0,o.colorBackground="#0e161b",o.colorMain="white";break;case Sa.Light2:this.strokeInvisible=!0,o.colorBackground="white",o.colorMain="#00364D";break;case Sa.Dark3:this.strokeInvisible=!0,o.colorBackground="#0e161b",o.colorMain="#4AAED9";break;case Sa.Light3:this.strokeInvisible=!0,o.colorBackground="white",o.colorMain="#0072A3"}}isLight(){let o=!0;switch(this.theme){case Sa.Light3:case Sa.Light2:case Sa.Light:break;default:o=!1}return o}runOnCommand(o){return this.onCommandHandler&&this.onCommandHandler(o,this),this}generate(o,a,c){this.updateThemeConfig(a);let u=C=>{let x=Wu(C);return x.r<<16|x.g<<8|x.b},d=u(a.colorMain);a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1;let g=(C,x=1,S)=>{let w=(16711680&C)>>16,O=(65280&C)>>8,T=255&C;x<1&&0==w&&0==O&&0==T&&(w=O=T=255);let M=w*x&255,A=O*x&255,I=T*x&255;if(x<1){let P=u(a.colorBackground);M=(16711680&P)>>16,A=(65280&P)>>8,I=255&P}return ff(M,A,I,S).formatHex()},b=C=>{let x=C.name,S=C.index,w=C.iWidth,O=Math.floor(a.width/7)*w,T=Math.floor(a.height/this.linesOfMonth),M=cs.builder().setX(O*(S%7)).setY(T*Math.floor(S/7)).setRx(O/w/10).setRy(T/10).setWidth(O).setHeight(T).setFillColor(a.colorBackground).setStrokeWidth(2).setStrokeColor(a.colorMain).addEvent(Fi.builder().setName("click").setFunc(()=>{this.runOnCommand(C)})),A=((C,x)=>{let S=Math.round(a.height/7*.7),w=o.textSizeDirect(C,S,300),O=.7*x,T=a.height/7*.7;return w.width>O&&(S=S*O/w.width,w=o.textSizeDirect(C,S,300)),w.height>T&&(S=S*T/w.height,w=o.textSizeDirect(C,S,300)),w})(x,a.width/7*w),I=ri.builder().setText(x).setTextAnchor("middle").setFontSize(`${A.height}px`).translate(O*(S%7+.5),T*Math.floor(S/7)+A.height).rotate(0).setColor(g(d)).setStrokeColor(g(d,this.strokeInvisible?1:.3)).setStrokeWidth(1).addEvent(Fi.builder().setName("click").setFunc(()=>{this.runOnCommand(C)})).addClass("cursor");C.rect=M,a.rects.push(C.rect),C.text=I,a.texts.push(C.text)};return this.commands.forEach(C=>{b(C)}),!0}onChange(){this.autoClickOnChangeEnabled&&this.runOnCommand(this.commands[this.currentIndex])}}class Mi{constructor(o,a){this.\u0438\u043c\u044f=o,this.\u043a\u043b\u0430\u0441\u0441=a}static \u043d\u043e\u0432\u044b\u0439(){return new Mi("",null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(o){return this.\u0438\u043c\u044f=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(o){return this.\u043a\u043b\u0430\u0441\u0441=o,this}}class n0{constructor(o){this.\u0444\u0443\u043d\u043a\u0446\u0438\u044f=o}static \u043d\u043e\u0432\u0430\u044f(){return new n0(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(o){return this.\u0444\u0443\u043d\u043a\u0446\u0438\u044f=o,this}}class ln{constructor(o){this.\u043e\u0431\u044a\u0435\u043a\u0442=o}static \u043d\u043e\u0432\u044b\u0439(){return new ln(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(o){return this.\u043e\u0431\u044a\u0435\u043a\u0442=o,this}}class pe{constructor(o,a,c=null){this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f=o,this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=a,this.\u043a\u0430\u0440\u0442\u0430=c}static \u043d\u043e\u0432\u044b\u0439(){return new pe(null,null,null)}static \u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new pe(null,null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(o){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o){return this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=o,this}\u0435\u0441\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(){return!!this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f(){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442(){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c(){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return this.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442()}\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return this.\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430()&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043a\u043e\u043c\u0430\u043d\u0434\u0430"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u043a\u0430\u043a\u0424\u0443\u043d\u043a\u0446\u0438\u044f(){return this.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("\u0424\u0443\u043d\u043a\u0446\u0438\u044f"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f(){return pe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0424\u0443\u043d\u043a\u0446\u0438\u044f(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0424\u0443\u043d\u043a\u0446\u0438\u044f(o){return null!=o&&"object"==typeof o&&o.constructor===n0}\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432(o=!1){return!o&&!this.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()&&this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("\u041c\u0430\u0441\u0441\u0438\u0432"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432(){return Array.isArray(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430(){return this.\u043a\u0430\u0440\u0442\u0430}\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430(){return pe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041a\u0430\u0440\u0442\u0430(this.\u043a\u0430\u0440\u0442\u0430)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041a\u0430\u0440\u0442\u0430(o){return null!=o&&"object"==typeof o&&o.constructor===Map}\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442(){return this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442(){return pe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041e\u0431\u044a\u0435\u043a\u0442(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}\u044d\u0442\u043e\u041d\u0443\u043b\u044c(){return null==this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==this.\u043a\u0430\u0440\u0442\u0430}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041e\u0431\u044a\u0435\u043a\u0442(o){return null!=o&&"object"==typeof o&&(o.constructor===pe||o.constructor===eh)}\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return this.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return pe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(o){return null!=o&&"object"==typeof o&&o.constructor===ln}\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(){return this.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("number"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e(){return pe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0427\u0438\u0441\u043b\u043e(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0427\u0438\u0441\u043b\u043e(o){return null!=o&&"number"==typeof o}\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e(){return this.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("boolean"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e(){return pe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0411\u0443\u043b\u0435\u0432\u043e(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0411\u0443\u043b\u0435\u0432\u043e(o){return null!=o&&"boolean"==typeof o}\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443(o){throw new Error(`\u041d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0432\u0438\u0435 \u0442\u0438\u043f\u0430: \u043e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f ${o}, \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f: ${this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"null"}; \u0442\u0438\u043f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f: ${typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}.`)}\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(){return this.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("string"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430(){return pe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return pe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(this)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(o){return null!=o&&"string"==typeof o.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&(o.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0441\u0442\u0440\u043e\u043a\u0430"===o.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f||o.constructor===r0)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(o){return null!=o&&"string"==typeof o}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(o,a=!1,c=!1){var u=pe.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(this,o,!1);if(null==u&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441&&(u=this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(o,!1)),null==u&&a)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${o}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return null==u&&c&&(u=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)),u}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(o,a=!1,c=!1){var u=pe.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(this,o,!1);if(null==u&&a)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${o}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return null==u&&c&&(u=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)),u||null}static \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(o,a,c=!1){var u=null;if(o.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())u=o.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(a)||null;else if(c)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${a}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof o.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return u}static \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(o,a,c=!1){var u=void 0;if(o.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432())u=o.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432()[a];else if(c)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0438\u043d\u0434\u0435\u043a\u0441 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 "${a}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof o.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return u}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(o,a=!1){var c=pe.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(this,o,!1);if(null==c&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441&&(c=this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(o,!1)),null==c&&a)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${o}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return c}static \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(o,a,c=!1){var u=void 0;if(o.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())u=o.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(a);else if(o.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442())u=o.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442[a];else if(c)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${a}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof o.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return u}\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u0412\u0441\u0435\u041f\u043e\u043b\u044f(o){if(this.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().forEach((d,f,p)=>{o(f,d)});else if(this.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()){var a=this.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;for(var c in a){var u=a[c],h="object"==typeof u;o(c,pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h?ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(u):u))}}}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(o){return pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(o))}}class eh extends pe{constructor(o){super(o,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new eh(null)}static \u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new eh(null)}}class r0 extends pe{constructor(o){super(o,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new r0(null)}static \u043d\u043e\u0432\u044b\u0439\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new r0(null)}}class yM extends pe{constructor(o){super(o,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new yM(null)}static \u043d\u043e\u0432\u044b\u0439\u0411\u0443\u043b\u0435\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new yM(null)}}class SS extends pe{constructor(o){super(o,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new SS(null)}static \u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432\u041e\u0431\u044a\u0435\u043a\u0442(){return new SS(null)}}class us extends pe{constructor(){super(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041e\u0431\u044a\u0435\u043a\u0442\u044b"),null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new us}static \u043d\u043e\u0432\u044b\u0435(){return new us}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u044b(o){this.\u043a\u0430\u0440\u0442\u0430=o}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c(o,a){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(o,a),this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(o){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(o)||null}\u0435\u0441\u0442\u044c(o){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().has(o)}\u0443\u0434\u0430\u043b\u0438\u0442\u044c(o){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().delete(o)}}let vqe=(()=>{class l{constructor(a,c,u,h=null,d=0,f=!0){this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430=a,this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=c,this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=u,this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=h,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b=d,this.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445=f,this.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=null,this.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439=-1}static \u043d\u043e\u0432\u044b\u0439(){return new l(null,null,null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a){return this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(a){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(a){return this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435(a){return this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b(a){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(a){return this.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=a,this}\u0435\u0441\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f(a){return null!=this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435&&this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u0435\u0441\u0442\u044c(a)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a,c){null==this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435&&(this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=new us);let u=null;return null===c?this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u0443\u0434\u0430\u043b\u0438\u0442\u044c(a):(u=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c),this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c(a,u)),u}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445(a){return this.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445=a,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a){return null==this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435?null:this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(a)}\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b(){var a=this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b++;return this.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439=this.\u043d\u043e\u0432\u044b\u0439\u0418\u0434\u0435\u043a\u0441\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439(),a}\u043d\u043e\u0432\u044b\u0439\u0418\u0434\u0435\u043a\u0441\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439(){return l.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439++}}return l.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439=0,l})();class ct extends pe{constructor(o,a,c){super(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u043e\u043c\u0430\u043d\u0434\u0430"),o?pe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(o)?o:n0.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(o):null),this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=a,this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=c}\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return!0}static \u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return new ct(null,null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(o){return this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(pe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(o)?o:n0.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(o)),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(o){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(o){return this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=o,this}}class Y8 extends pe{constructor(o,a,c){super(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0444\u0443\u043d\u043a\u0446\u0438\u044f"),o),this.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=a,this.\u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435=c}static \u043d\u043e\u0432\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(){return new Y8(null,!0,!1)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(o){return this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(o){return this.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u044f\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445(o){return this.\u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435=o,this}}class _n{constructor(o,a){this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430=o,this.\u0442\u0435\u043b\u043e=a}static \u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434(){return new _n(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(o){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(o){return this.\u0442\u0435\u043b\u043e=o,this}}class K8{constructor(o){this.\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f=o}static \u043d\u043e\u0432\u043e\u0435\u041f\u043e\u043b\u0435(){return new K8(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f(o){return this.\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f=o,this}}class J8{constructor(o,a){this.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430=o,this.\u0438\u043c\u044f\u041f\u043e\u043b\u044f=a}static \u043d\u043e\u0432\u044b\u0439\u0417\u0430\u0445\u0432\u0430\u0442(){return new J8(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430(o){return this.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f\u041f\u043e\u043b\u044f(o){return this.\u0438\u043c\u044f\u041f\u043e\u043b\u044f=o,this}}class _M{constructor(o){this.\u043e\u0431\u044a\u0435\u043a\u0442=o}static \u043d\u043e\u0432\u044b\u0439\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c(){return new _M(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(o){return this.\u043e\u0431\u044a\u0435\u043a\u0442=o,this}}class yqe{constructor(){this.\u0434\u043b\u0438\u043d\u0430=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]);return pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().length)},this.\u043f\u043e\u0434\u0441\u0442\u0440\u043e\u043a\u0430=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),h=a.length>2?o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[2]):null;return pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().substr(u?u.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e():0,h?h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e():void 0))},this.\u0440\u0430\u0437\u0431\u0438\u0442\u044c=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),h=c.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().split(new RegExp(u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()));return o.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.filter(f=>null!=f).map(f=>o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.trim())))},this.\u0432\u0435\u0440\u0445\u043d\u0438\u0439\u0420\u0435\u0433\u0438\u0441\u0442\u0440=(o,a)=>{var c=a[0];return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().toUpperCase())},this.\u043d\u0438\u0436\u043d\u0438\u0439\u0420\u0435\u0433\u0438\u0441\u0442\u0440=(o,a)=>{var c=a[0];return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().toLowerCase())},this.\u0432\u0427\u0438\u0441\u043b\u043e=(o,a)=>{var c=a[0];return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(+c.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},this.\u0441\u043e\u043a\u0440\u0430\u0442\u0438\u0442\u044c=(o,a)=>{var c=a[0];return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().trim())},this.\u0438\u043d\u0434\u0435\u043a\u0441\u0414\u043b\u044f=(o,a)=>{var c=a[0],u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0438\u043d\u0434\u0435\u043a\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().indexOf(u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))},this.\u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c\u0412\u0441\u0435=(o,a)=>{for(var c=a[0],u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),h=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[2]),d=c.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),f=new RegExp(u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),p=d.replace(f,h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());p!=d;)p=(d=p).replace(f,h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0438\u043d\u0434\u0435\u043a\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d)}}}class _qe{constructor(){this.\u0434\u043b\u0438\u043d\u0430=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]);return pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().length)},this.\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),u=a.length>1?o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]):null;return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(d=>""+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435).join(u?u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():""))},this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return c.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().push(u),c},this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return c.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().push(...u.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432()),c}}}class bqe{constructor(){this.\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return console.log(u?u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:JSON.stringify(u,null,2)),c},this.\u043e\u0431\u044a\u0435\u043a\u0442\u0418\u043c\u0435\u0435\u0442\u041f\u043e\u043b\u0435=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[2]),h=c&&c.\u043a\u0430\u0440\u0442\u0430&&c.\u043a\u0430\u0440\u0442\u0430.has(u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return h&&(h=!0),o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!h)},this.\u0432\u0440\u0435\u043c\u044f\u0412\u041c\u0438\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445=(o,a)=>{var c=Date.now();return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c)},this.\u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c\u0412\u0440\u0435\u043c\u044f\u0412\u0421\u0442\u0440\u043e\u043a\u0443=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),u=c.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()%1e3,h=Math.floor(c.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()/1e3),d=Math.floor(h/60);h-=60*d;var f=Math.floor(d/60);d-=60*f;var p=(g,m)=>{for(var v=""+g;v.length<m;)v="0"+v;return v};return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`${p(f,2)}:${p(d,2)}:${p(h,2)}.${p(u,3)}`)},this.\u043c\u0438\u043d\u0438\u043c\u0443\u043c=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[2]);return c.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()<=u.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?c:u},this.\u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[2]);return c.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()>=u.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?c:u},this.\u043e\u043a\u0440\u0443\u0433\u043b\u0438\u0442\u044c=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.round(c.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.floor=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.floor(c.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.ceil=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.ceil(c.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.sqrt=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.sqrt(c.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.pow=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[2]);return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.pow(c.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),u.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.cos=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.cos(c.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.sin=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.sin(c.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.atan2=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[2]);return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.atan2(c.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),u.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.\u0410\u0421\u0414=(o,a)=>{var c=a.length>1?o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]):null,u=o.\u043d\u043e\u0432\u044b\u0439\u0410\u0421\u0414("\u0410\u0421\u0414");return null!=c&&u.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c),u},this.\u0441\u0442\u043e\u043f=(o,a)=>a.length>1?a[1]:a[0]}}class xqe{constructor(){this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return o.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u)),c},this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]);return o.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(o.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442())},this.\u0435\u0441\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]);return o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0411\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!o.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)},this.\u0442\u0438\u043f=(o,a)=>{var u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!u.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e");var h=o.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(o.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(u));return h.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430()?o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043a\u043e\u043c\u0430\u043d\u0434\u0430"):h.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()?o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c"):h.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()?o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0437\u0430\u0445\u0432\u0430\u0442"):h.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0441\u0442\u0440\u043e\u043a\u0430"):h.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()?o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442"):h.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()?o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043c\u0430\u0441\u0441\u0438\u0432"):h.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0447\u0438\u0441\u043b\u043e"):h.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442()?o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043e\u0431\u044a\u0435\u043a\u0442"):h.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()?o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0431\u0443\u043b\u0435\u0432\u043e"):h.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()?o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442"):h.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()?o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0444\u0443\u043d\u043a\u0446\u0438\u044f"):o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e")},this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430=(o,a)=>{var u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!u.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e");var h=o.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(o.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(u)),d="";return h.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430()&&(d=h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d)},this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=(o,a)=>{var u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();return u.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()?o.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(o.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(u)):o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e")},this.\u0438\u043c\u044f\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0430=(o,a)=>{var u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!u.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e");var h=o.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(o.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(u));if(h.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430())return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h&&h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(h.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432())return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h&&h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(h.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e())return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h&&h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(h.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442())return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h&&h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(h.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()){var d=o.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(h);return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d&&d.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?d.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"")}return o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("")},this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=(o,a)=>{var u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!u.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0);var h=o.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(u);if(!h||!h.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430())return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0);var d=h;return o.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b?d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length:0)},this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440=(o,a)=>{var f=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]),c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(o.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1])),u=o.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(f.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442());if(!(u instanceof ct))throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.");var d=u.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b?u.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[c.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()]:null;return f=o.\u043d\u043e\u0432\u044b\u0439\u0410\u0421\u0414("\u0410\u0421\u0414"),null!=d&&f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o.\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d)),f},this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]),u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(o.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1])),h=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(o.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[2])),d=o.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(c.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442());if(!(d instanceof ct))throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.");return d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b&&(d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[u.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()]=h),h},this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c=(o,a)=>{var c=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]),u=o.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(o.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(c.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442()));if(!u.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430())throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.");return o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u)}}}class Qp{static \u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u0430\u0442\u044c(o){return o&&o.\u044d\u0442\u043e\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f()?o.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442():o}static useSetOperation(o,a,c){var u=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1]),h=null,d=null;a[0].\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()?h=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]):(d=o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]),h=o.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())));var f=c(Qp.\u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u0430\u0442\u044c(h).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435,Qp.\u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u0430\u0442\u044c(u).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);if(u=("string"==typeof f?o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430"):pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f),h&&h.\u044d\u0442\u043e\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f())h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u);else if(d)o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),u);else{let p=a[0].\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;p.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(p.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),u)}return u}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\u0412\u0414\u0432\u0438\u0436\u043e\u043a(o){o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043d\u0435\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",(a,c)=>null,!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u0440\u043e\u0441\u0438\u0442\u044c",(a,c)=>{throw a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0].\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442())},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]);if(!a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(c[0],null,u)){var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]);a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(null,d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),u)}return u},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u043b\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,c)=>Qp.useSetOperation(a,c,(u,h)=>u+h),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,c)=>Qp.useSetOperation(a,c,(u,h)=>u-h),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,c)=>Qp.useSetOperation(a,c,(u,h)=>u*h),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,c)=>Qp.useSetOperation(a,c,(u,h)=>u/h),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h=a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());if(!h)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e: "${u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}".`);return h&&h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f?h.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442():h},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043e\u0431\u044a\u0435\u043a\u0442",(a,c)=>a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0430\u0441\u0441\u0438\u0432",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]);return a.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([...u.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(d=>a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d)))])},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0438\u0437 \u043c\u0430\u0441\u0441\u0438\u0432\u0430",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]);return a.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u,h)},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u0440\u043e\u043a\u0430",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]);return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h=a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),d=null;if(h&&h.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var f=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h);d=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(h,null,d)}else if(h&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var p=h.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();d=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1),h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d)}return d},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(a,c)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):c[0],d=null;if(h&&h.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var f=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h);d=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(h,null,pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1))}else if(h&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var p=h.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();d=p,h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1))}return d},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h=a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),d=null;if(h&&h.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var f=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h);d=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(h,null,d)}else if(h&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var p=h.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();d=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d)}return d},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h=a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),d=null;if(h&&h.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var f=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h);d=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(h,null,pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1))}else if(h&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var p=h.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();d=p,h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1))}return d},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h=a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),d=null;if(h&&h.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var f=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h);d=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(h,null,d)}else if(h&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var p=h.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();d=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d)}return d},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435",(a,c)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()*a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0430\u0441\u0442\u043d\u043e\u0435",(a,c)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()/a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u043e\u0434\u0443\u043b\u044c",(a,c)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()%a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0443\u043c\u043c\u0430",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]);return u.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(""+u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435+h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c",(a,c)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0440\u0430\u0432\u043d\u043e",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(c[0]),h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(c[1]);return pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!((!u||null==u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==u.\u043a\u0430\u0440\u0442\u0430)&&(!h||null==h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==h.\u043a\u0430\u0440\u0442\u0430)||u&&h&&(null!=u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435==h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435||null==u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&(u.\u043a\u0430\u0440\u0442\u0430==h.\u043a\u0430\u0440\u0442\u0430||u.\u043a\u0430\u0440\u0442\u0430&&h.\u043a\u0430\u0440\u0442\u0430&&0==u.\u043a\u0430\u0440\u0442\u0430.size&&0==h.\u043a\u0430\u0440\u0442\u0430.size))))},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043d\u0435 \u0440\u0430\u0432\u043d\u043e",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(c[0]),h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(c[1]);return pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!((!u||null==u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==u.\u043a\u0430\u0440\u0442\u0430)&&(!h||null==h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==h.\u043a\u0430\u0440\u0442\u0430)||u&&h&&(null!=u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435==h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435||null==u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&(u.\u043a\u0430\u0440\u0442\u0430==h.\u043a\u0430\u0440\u0442\u0430||u.\u043a\u0430\u0440\u0442\u0430&&h.\u043a\u0430\u0440\u0442\u0430&&0==u.\u043a\u0430\u0440\u0442\u0430.size&&0==h.\u043a\u0430\u0440\u0442\u0430.size))))},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u0440\u043e\u0433\u043e \u0440\u0430\u0432\u043d\u043e",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(c[0]),h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(c[1]);return pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((u&&u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)===(h&&h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)&&(u&&u.\u043a\u0430\u0440\u0442\u0430)===(h&&h.\u043a\u0430\u0440\u0442\u0430))},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u0440\u043e\u0433\u043e \u043d\u0435 \u0440\u0430\u0432\u043d\u043e",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]);return pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!==h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435||u.\u043a\u0430\u0440\u0442\u0430!==h.\u043a\u0430\u0440\u0442\u0430)},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u043e\u043b\u044c\u0448\u0435",(a,c)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435>a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0435\u043d\u044c\u0448\u0435",(a,c)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435<a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e",(a,c)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435>=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e",(a,c)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435<=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e \u0438\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]);return u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435<h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(-1):u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435>h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1):pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h="\u043d\u0443\u043b\u044c";return null==u?h="\u043d\u0443\u043b\u044c":u.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()?h="\u0444\u0443\u043d\u043a\u0446\u0438\u044f":u.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?h="\u0447\u0438\u0441\u043b\u043e":u.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?h="\u0441\u0442\u0440\u043e\u043a\u0430":u.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()?h="\u043c\u0430\u0441\u0441\u0438\u0432":u.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()?h="\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442":u.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()?h="\u0431\u0443\u043b\u0435\u0432\u043e":(u.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442()||u.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())&&(h="\u043e\u0431\u044a\u0435\u043a\u0442"),r0.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h)},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043e\u0442\u0440\u0438\u0446\u0430\u043d\u0438\u0435",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h=u&&(u.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&u.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().size||u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);return yM.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!h)},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0438\u043b\u0438",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]);return u.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?u:a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1])},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0438",(a,c)=>{if(!a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1);var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u044d\u043d\u0435\u0440\u0433\u0438\u0447\u043d\u043e\u0435 \u0438\u043b\u0438",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]);return u||h||pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1)},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0438\u043d",(a,c)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.min(+a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435,+a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0430\u043a\u0441",(a,c)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.max(+a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435,+a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)),!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0435\u0441\u043b\u0438",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h=c[1],d=c[2],f=u.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?h:d;return null==f?null:a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(f,null,null,!0,!1,!1,null)},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u043e\u043a\u0440\u0430\u0449\u0451\u043d\u043d\u043e\u0435 \u0435\u0441\u043b\u0438",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]),h=c[1],d=c[2],f=u.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?h:d;return null==f?null:a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(f,null,null,!0,!1,!1,null)},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u043a\u0430",(a,c)=>{var u=!1,h=null;try{var d=c[0];do{if(d&&(u=!!a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!u)break;var f=c[1];if(f){try{h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(f,null,null,!0,!1,!1,null)}catch(p){if(p&&p.constructor!==xM)throw p}if(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430)break}}while(u)}catch(p){if(p&&p.constructor!==bM)throw p}return h},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0434\u0435\u043b\u0430\u0442\u044c",(a,c)=>{var u=!1,h=null;try{var d=c[0],f=c[1];do{if(f){try{h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(f,null,null,!0,!1,!1,null)}catch(p){if(p&&p.constructor!==xM)throw p}if(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430)break}d&&(u=!!a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}while(u)}catch(p){if(p&&p.constructor!==bM)throw p}return h},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0446\u0438\u043a\u043b",(a,c)=>{var u=!0,h=null,d=c[0],f=c[1],p=c[2],g=c[3];let m=()=>{d&&(u=!!a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);try{for(;u;){if(f){try{h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(f,null,null,!0,!1,!1,null)}catch(v){if(v&&v.constructor!==xM)throw v}if(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430)break}g&&a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null),d&&(u=!!a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}}catch(v){if(v&&v.constructor!==bM)throw v}return h};return p?a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(p,null,null,!0,!1,!1,m):m(),h},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c",(a,c)=>{var u=null,h=c[0],d=c[1],f=c[2];try{h&&(u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(h,null,null,!0,!1,!1,null))}catch(p){if(f)try{a.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(null,null,null,!0,!1,!1),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),pe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(p)?p:pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(""+p)),a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(f,null,null,!0,!1,!1,null),a.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,!1),u=a.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442}catch(g){throw a.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,!1),g}}return u},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043a\u043b\u0430\u0441\u0441",(a,c)=>{var u=c[0].\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432(),h=a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u043b\u0430\u0441\u0441");h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441=eh.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442();var d=h.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();return u.forEach(f=>{a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(f,d)}),h},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c",(a,c)=>a.\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c[0]),!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u0435\u0440\u043d\u0443\u0442\u044c",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c[0]);return a.\u0432\u043e\u0437\u0432\u0440\u0430\u0442(u),u},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043a\u043e\u043f\u0438\u044f",(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(c[0]);return null==u?null:a.\u043a\u043e\u043f\u0438\u044f\u041e\u0431\u044a\u0435\u043a\u0442\u0430(u)},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u044d\u0442\u043e",(a,c)=>a.\u044d\u0442\u043e\u0442\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0412\u044b\u0437\u043e\u0432\u0430.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0],!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c",(a,c)=>{throw new bM},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c",(a,c)=>{throw new xM},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044e",(a,c)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(c[0]),d=null;if(h&&h.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()){var f=h.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442.\u043e\u0431\u044a\u0435\u043a\u0442;d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(f),null,null,!1,!1,!1,null)}return d},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u044b\u0437\u0432\u0430\u0442\u044c",(a,c)=>{var u=!1;do{u=!1;var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(c[0],null,null,!0,!1,!1,null),f=null,p=null,g=null,m=null;if(d&&d.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"==d.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f&&(m=d.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442).\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430&&m.\u0438\u043c\u044f\u041f\u043e\u043b\u044f){g=m.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();var v=m.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(g);p=m.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430,d=v}var y=!1;if(d&&d.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f)if("\u043a\u043b\u0430\u0441\u0441"===d.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){y=!0,(f=a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442")).\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441=d;var _=d;if(_&&_.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&_.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441&&(_.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u0412\u0441\u0435\u041f\u043e\u043b\u044f((I,E)=>{if("\u043f\u043e\u043b\u0435"==E.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var P=E.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442,B=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(P.\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f,null,null,!0,!1,!1,null));f.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(I,B)}}),_.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"))){var C=[a.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f,"\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)];for(let I=2;I<a.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length;I++)C.push(a.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[I]);var x=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(C);a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(x)}}else if("\u043c\u0435\u0442\u043e\u0434"==d.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){y=!0;var S=c[1].\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e(),w=c[2],O=[p||pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()];if(w)for(let I=2;I<c.length;I++){var M=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(c[I],null,null,!0,!1,!1,null);O.push(M)}var A=d.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(A.\u0442\u0435\u043b\u043e,O,A.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432(!0),!1,S,S,null)}if(!y&&!u)throw a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g?`\u041d\u0435 \u043c\u043e\u0433\u0443 \u0432\u044b\u0437\u0432\u0430\u0442\u044c "${g}" \u0438\u0437 ${""+m}.`:`\u041d\u0435 \u043c\u043e\u0433\u0443 \u0432\u044b\u0437\u0432\u0430\u0442\u044c "${d?d.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?d.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}".`)}while(u);return f},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u043e\u043b\u044e",(a,c)=>{var h=c[1],d=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(c[0],null,null,!0,!1,!1,null)),p=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(h,null,null,!0,!1,!1,null));return a.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d,p)},!1)}}class bM{}class xM{}class ru{constructor(){this.\u043f\u0430\u0440\u0441\u0435\u0440=null,this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b=[],this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438=new Map,this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b=new us,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=1,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=0,this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=[],this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430=!1,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b()}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0441\u0435\u0440(o){return this.\u043f\u0430\u0440\u0441\u0435\u0440=o,this}\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(){return++this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,this}\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(){return--this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,this}get \u0435\u0441\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length>0}get \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[0]}get \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430]}get \u044d\u0442\u043e\u0442\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0412\u044b\u0437\u043e\u0432\u0430(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430]}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(o){this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.unshift(o)}\u0443\u0434\u0430\u043b\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.shift()}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0435\u0442\u043e\u0434\u0412\u041e\u0431\u044a\u0435\u043a\u0442(o,a,c,u){var h;let d=o.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();if(null==d)throw new Error(`\u041e\u0431\u044a\u0435\u043a\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0439, \u0430 \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f: "${null===(h=o.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f)||void 0===h?void 0:h.\u0438\u043c\u044f}".`);if(d.has(a))throw new Error(`\u0423\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0441 \u0438\u043c\u0435\u043d\u0435\u043c: "${a}".`);return d.set(a,this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(c))))),o}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(o,a,c){if(this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.has(o))throw new Error(`\u0423\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0441 \u0438\u043c\u0435\u043d\u0435\u043c: "${o}".`);return this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.set(o,Y8.\u043d\u043e\u0432\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(n0.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(c)),this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(o){let a=this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.get(o);if(!a)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f: "${o}".`);return a}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(o,a){var c=o.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b;let u=c[0].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),d=null;return c[1].\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?(d=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(c[2]).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(c[3]))),null!=a&&a.set(u,d)):(d=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043f\u043e\u043b\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(K8.\u043d\u043e\u0432\u043e\u0435\u041f\u043e\u043b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f(c[2]))),null!=a&&a.set(u,d)),d}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(o){let a=null;for(let g=0;g<this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length;g++){let m=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[g];if(!(g<this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430)||m.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445){if(a=m.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(o),a)break;if(m.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445&&m.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length){var c=m.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0],u=c;if(c.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"==c.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var h=c.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;u=h.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}if(u.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&(a=u.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(o),a&&(a=this.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u,o))),a)break}if(m.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432){for(var d=-1,f=0;f<m.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432.length;f++)if(m.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432[f].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()==o){d=f+1;break}if(d>=0&&(a=m.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[d]),a)break}if(!a&&m.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445){if(g+1<this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length){g=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length-2;continue}if(this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.has(o)){var p=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[2];a=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(o).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b&&p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length>=2?[...p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.filter((v,y)=>y>=2)]:null))))}}if(a||m.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445)break}}return a}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(o,a,c){let u=!1;if(o&&o.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"===o.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var h=o.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?h.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),c):h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()&&(h.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432()[h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()]=c),u=!0}else a&&(this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(a,c),u=!0);return u}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(o,a){let c=null;for(let h=0;h<this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length;h++){let d=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[h];if(!(h<this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430)||d.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445){if(c=d.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(o),c)break;if(d.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445&&d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length){var u=d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0];if(u.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&u.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().has(o))return u.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(o,a),a;if(c)break}if(c||d.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445)break}}if(null==c&&(c=this.\u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(o,a)),c)c.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=a;else if(null!=a)throw new Error(`\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c: "${o}".`);return c}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(o){return this.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(o))}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(o){return this.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(this.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(o)))}\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(o){if(null==o)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430: \u041e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d \u043d\u0443\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442.");return o}\u043a\u043e\u043f\u0438\u044f\u041e\u0431\u044a\u0435\u043a\u0442\u0430(o){var a=o;return o.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?a=this.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):o.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?a=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):o.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()&&(a=this.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().concat([]))),a}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(o){var a=null;if(o.\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430())if(o.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043a\u043e\u043c\u0430\u043d\u0434\u0430"===o.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){let h=o;if(h.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()){var c=this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(o.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),u=c.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b?this.\u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b):h.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b;c.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b||this.\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430();try{a=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(c,u,h.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432,!1,c.\u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435,!1,null),c.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b||this.\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430()}catch(d){throw c.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b||this.\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(),d}}else o.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()&&(a=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(o,h.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b,h.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432,!0,!0,!1,null))}else a=o;else a=o;return a}\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(o,a,c,u=!0,h=!0,d=!1){var f=u?this.\u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(a):a;return this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(vqe.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(o).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(f).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445(h)),d?(this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.push({\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435:this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u0412\u044b\u0437\u043e\u0432\u0430:this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430}),this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=1,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=0):this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.length&&++this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,this}\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(o=!1,a=!1){var c=!!o&&this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,u=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445;if(this.\u0443\u0434\u0430\u043b\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(),o&&c&&this.\u0435\u0441\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=c),this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430&&u?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430=!1:this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430&&this.\u0435\u0441\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b=Number.MAX_VALUE),a){var h=this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.pop();this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=h.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=h.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u0412\u044b\u0437\u043e\u0432\u0430}else this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.length&&--this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430;return this}\u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(o){return null==o?null:o.map(a=>this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a))}\u0432\u043e\u0437\u0432\u0440\u0430\u0442(o){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=o,this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430=!0,this}\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o){var a=null;if(o&&o.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"===o.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var c=o.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;c.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?a=c.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(c.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):c.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()&&(a=c.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(c.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}else a=o;return a}\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o,a){return this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0437\u0430\u0445\u0432\u0430\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(J8.\u043d\u043e\u0432\u044b\u0439\u0417\u0430\u0445\u0432\u0430\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430(o).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f\u041f\u043e\u043b\u044f("string"!=typeof a?a:this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a))))}\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o){return this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_M.\u043d\u043e\u0432\u044b\u0439\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(o)))}\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(o){var a,c=o.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;if(!(c instanceof _M))throw new Error(`\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u043c. \u0418\u043c\u044f \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0430: '${null===(a=o.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f)||void 0===a?void 0:a.\u0438\u043c\u044f}'.`);return c.\u043e\u0431\u044a\u0435\u043a\u0442}\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(){var o=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442,a=o.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439,c=!1,u=null;try{if(o.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()){var h=o.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432();if(o.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b<h.length){let d=h[o.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b++];c=o.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b<h.length,o.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d)}}else o.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=o.\u043a\u043e\u043c\u0430\u043d\u0434\u0430}catch(d){u=d}if(a!==o.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439&&(c=!0),u)throw u;return c}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(o,a,c,u,h,d,f){var p=null;if(o.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f())try{var g=o.\u043a\u0430\u043a\u0424\u0443\u043d\u043a\u0446\u0438\u044f().\u0444\u0443\u043d\u043a\u0446\u0438\u044f;this.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(o,a,c,u,h,d),this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=g(this,this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b),f&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=f()),p=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,d)}catch(m){throw this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,d),m}else if(o.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043a\u043e\u043c\u0430\u043d\u0434\u0430"===o.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f)try{this.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(o,a,c,u,h,d),this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(o),f&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=f()),p=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,d)}catch(m){throw this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,d),m}else if(o.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432())try{for(this.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(o,a,c,!0,h,d);this.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(););f&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=f()),p=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,d)}catch(m){throw this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,d),m}else p=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(o),f&&(p=f());return null==p&&(p=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()),p}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(o,a){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(o,a),this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(o,a){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(o)}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(){return Qp.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\u0412\u0414\u0432\u0438\u0436\u043e\u043a(this),ru.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0445\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u0414\u0432\u0438\u0436\u043e\u043a(this),this}\u043d\u043e\u0432\u044b\u0439\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(o){return eh.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(o).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e")))}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(o){return eh.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(o))}\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430(o){return r0.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(o).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u0441\u0442\u0440\u043e\u043a\u0430")))}\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432(o){return SS.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(o).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u043c\u0430\u0441\u0441\u0438\u0432")))}\u043d\u043e\u0432\u044b\u0439\u0410\u0421\u0414(o){return pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(o).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u0410\u0421\u0414")))}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0445\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u0414\u0432\u0438\u0436\u043e\u043a(o){var a=o.\u043d\u043e\u0432\u044b\u0439\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e");o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e",(c,u)=>a,!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u043e\u043f",(c,u)=>(c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[0]),u.length?u[0]:pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()),!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[0]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[1]);return a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),d),d},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[0]);return a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[0]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[1]);return a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),d),d},!1),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[0]);return a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},!1)}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(o,a){for(let c in o)this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0435\u0442\u043e\u0434\u0412\u041e\u0431\u044a\u0435\u043a\u0442(a,c,o[c],!1);return a}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b(){this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0441\u0442\u0440\u043e\u043a\u0430",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(new yqe,eh.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442())),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u043c\u0430\u0441\u0441\u0438\u0432",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(new _qe,eh.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442()));{let o=new bqe;o.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c=(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(c[1]);if(!this.\u043f\u0430\u0440\u0441\u0435\u0440)throw"\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043f\u0430\u0440\u0441\u0435\u0440.";let h=this.\u043f\u0430\u0440\u0441\u0435\u0440.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0])},o.\u0444\u0430\u0431\u0440\u0438\u043a\u0430\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439=(a,c)=>{if(!this.\u043f\u0430\u0440\u0441\u0435\u0440)throw"\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043f\u0430\u0440\u0441\u0435\u0440.";let u=this.\u043f\u0430\u0440\u0441\u0435\u0440.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a("\n              \u0440\u0430\u0437\u0431\u043e\u0440 \u043a\u043b\u0430\u0441\u0441\u0430 \u043a\u043b\u0430\u0441\u0441 {\n                \u0438\u043d\u043b\u0430\u0439\u043d\u0417\u0430\u043c\u0435\u043d\u0430\u041a\u043e\u043f\u0438\u0439(\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439)\n                {\n                  \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f = \u043a\u043b\u0430\u0441\u0441 {\n                    \u0430\u0441\u0434 = 0;\n                    \u0438\u043d\u0434\u0435\u043a\u0441 = 0;\n                    \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0430\u0441\u0434, _\u0438\u043d\u0434\u0435\u043a\u0441) {\n                      \u0430\u0441\u0434 = _\u0430\u0441\u0434;\n                      \u0438\u043d\u0434\u0435\u043a\u0441 = _\u0438\u043d\u0434\u0435\u043a\u0441;\n                    }\n                  };\n                  \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u0435\u043b\u044c = \u043a\u043b\u0430\u0441\u0441 {\n                    \u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u0430\u0441\u0434, \u043a\u043e\u043f\u0438\u044f, \u0441\u043f\u0438\u0441\u043e\u043a) {\n                      \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f = \u043a\u043b\u0430\u0441\u0441 {\n                        \u0430\u0441\u0434 = 0;\n                        \u0438\u043d\u0434\u0435\u043a\u0441 = 0;\n                        \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0430\u0441\u0434, _\u0438\u043d\u0434\u0435\u043a\u0441) {\n                          \u0430\u0441\u0434 = _\u0430\u0441\u0434;\n                          \u0438\u043d\u0434\u0435\u043a\u0441 = _\u0438\u043d\u0434\u0435\u043a\u0441;\n                        }\n                      };\n                      \u0442\u0438\u043f\u041e\u0431\u044a\u0435\u043a\u0442\u0430 = \u0430\u0441\u0434.\u0442\u0438\u043f();\n                      \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 = \u0430\u0441\u0434.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432();\n                      if (\u0442\u0438\u043f\u041e\u0431\u044a\u0435\u043a\u0442\u0430 === '\u043a\u043e\u043c\u0430\u043d\u0434\u0430'){\n                        if (\u0430\u0441\u0434.\u043a\u043e\u043c\u0430\u043d\u0434\u0430() === '\u043a\u043e\u043f\u0438\u044f') {\n                          \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c(\u043a\u043e\u043f\u0438\u044f);\n                          \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 = 0;\n                        }\n                      }\n                      for(i = 0; i < \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432; ++i) {\n                       \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 = \u0430\u0441\u0434.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(i);\n                       \u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440, \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f(\u0430\u0441\u0434, i),  \u0441\u043f\u0438\u0441\u043e\u043a);\n                      }\n                    }\n                  };\n                  //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0437\u0430\u043c\u0435\u043d\u0430\u041a\u043e\u043f\u0438\u0439 = \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438;...');\n                  \u0430\u0441\u0434 = \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0410\u0421\u0414(\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439);\n                  //\u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c\u0410\u0421\u0414(\u0430\u0441\u0434, '');\n                  \u0441\u043f\u0438\u0441\u043e\u043a = [];\n                  \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u0435\u043b\u044c.\u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u0430\u0441\u0434, \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f(\u0430\u0441\u0434, 0-1), \u0441\u043f\u0438\u0441\u043e\u043a);\n                  //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0414\u043b\u0438\u043d\u0430 \u0441\u043f\u0438\u0441\u043a\u0430: ' + \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043b\u0438\u043d\u0430());\n                  for(i = 0; i < \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043b\u0438\u043d\u0430(); ++i){\n                    \u043f\u0430\u0440\u0430 = \u0441\u043f\u0438\u0441\u043e\u043a[i];\n                    //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u043f\u0430\u0440\u0430: [' + \u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441 + '];');\n                    \u0440\u0435\u0437 = \u0412\u042b\u0417\u041e\u0412 \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(\u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441).\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c();\n                    \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(\u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441, \u0440\u0435\u0437);\n                  }\n                }\n              }");return a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[0])},o.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043eHttp=(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(c[1]),h=pageLoadedFrom+u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();let d=new XMLHttpRequest;d.open("GET",h,!1);var f=null;try{if(d.send(),200!=d.status)throw`\u041e\u0448\u0438\u0431\u043a\u0430 ${d.status}: ${d.statusText}`;f=a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.response)}catch(p){throw`\u041e\u0448\u0438\u0431\u043a\u0430 ${d.status}: ${d.statusText}`}return f},o.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f=(a,c)=>{var u=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(c[1]),h=this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return null==h&&(h=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)),h},this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(o,eh.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442()))}this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0410\u0421\u0414",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(new xqe,eh.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442()))}}class eV{constructor(o,a){this.op=o,this.exp=a}static builder(){return new eV("",null)}setExp(o){return this.exp=o,this}setOp(o){return this.op=o,this}\u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443(o){return class Cqe{static \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443(o){for(var a="",c=!1,u=0;u<o.length;++u){var h=o.charAt(u);if(c){switch(h){case"\\":a+="\\";break;case'"':a+='"';break;case"'":a+="'";break;case"r":a+="\r";break;case"n":a+="\n";break;case"t":a+="\t";break;default:a+=h}c=!1}else(c="\\"==h)||(a+=h)}return a}}.\u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443(o)}done(){let o=this.exp;switch(this.op){case"!":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043e\u0442\u0440\u0438\u0446\u0430\u043d\u0438\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"++i":{let a=this.exp,c=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==a.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?a=a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),c.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([a,c])}break;case"i++":{let a=this.exp,c=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==a.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?a=a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),c.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([a,c])}break;case"--i":{let a=this.exp,c=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==a.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?a=a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),c.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([a,c])}break;case"i--":{let a=this.exp,c=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==a.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?a=a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),c.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([a,c])}break;case";":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u043e\u043c\u0430\u043d\u0434\u0430")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043d\u0435\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438");break;case"{;}":case"number":case"\u043f\u043e\u043b\u044f":o=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp);break;case"(,)":break;case"{,}":{let a=[];this.exp&&this.exp.forEach(c=>{a.push(c)}),o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043a\u043b\u0430\u0441\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a)]),o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([o])}break;case"object":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043e\u0431\u044a\u0435\u043a\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"array":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"string":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([r0.\u043d\u043e\u0432\u044b\u0439\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp)]);break;case"\u044d\u0442\u043e":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u044d\u0442\u043e");break;case"\u043d\u0443\u043b\u044c":o=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null);break;case"\u0438\u0441\u0442\u0438\u043d\u0430":o=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0);break;case"\u043b\u043e\u0436\u044c":o=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1);break;case"id":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp)]);break;case"\u0431\u0440\u043e\u0441\u0438\u0442\u044c":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u0440\u043e\u0441\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp)]);break;case"\u043a\u043b\u0430\u0441\u0441":{let a=[];this.exp&&this.exp.forEach(c=>{a.push(c)}),o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043a\u043b\u0430\u0441\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a)])}break;case"[,]":o=SS.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp?this.exp:[]);break;case"#":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"\u0432\u0435\u0440\u043d\u0443\u0442\u044c":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u0435\u0440\u043d\u0443\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp?this.exp:pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)]);break;case"\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c");break;case"\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c");break;case"\u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"\u0432\u044b\u0437\u043e\u0432":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"{{{?}}}":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043a\u043e\u043f\u0438\u044f").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u0443\u043d\u0430\u0440\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f "${this.op}".`)}return o}}class tV{constructor(o,a,c){this.left=o,this.op=a,this.right=c}static builder(){return new tV(null,"",null)}setLeft(o){return this.left=o,this}setRight(o){return this.right=o,this}setOp(o){return this.op=o,this}done(){let o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),a=c=>{let u=this.left;"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&typeof u.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()&&(u=u.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]),o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([u,this.right])};switch(this.op){case"(.)":{let c=this.right?this.right:[];c.unshift(this.left,pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)),o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(c)}break;case"((.))":{let c=this.right?this.right:[];c.unshift(this.left,pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1)),o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(c)}break;case"[.]":o=ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438\u0437 \u043c\u0430\u0441\u0441\u0438\u0432\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"=":a("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"+=":a("\u0441\u043b\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"-=":a("\u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"*=":a("\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"/=":a("\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"+":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"-":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"*":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"/":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0447\u0430\u0441\u0442\u043d\u043e\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"%":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u043e\u0434\u0443\u043b\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"||":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"&&":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"==":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"!=":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043d\u0435 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"===":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0442\u0440\u043e\u0433\u043e \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"!==":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0442\u0440\u043e\u0433\u043e \u043d\u0435 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case">":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u043e\u043b\u044c\u0448\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0435\u043d\u044c\u0448\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case">=":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<=":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<=>":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e \u0438\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"?":{let u=[...this.right];u.unshift(this.left),o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u043e\u043a\u0440\u0430\u0449\u0451\u043d\u043d\u043e\u0435 \u0435\u0441\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(u)}break;case"\u0435\u0441\u043b\u0438":{let c=this.right?this.right:[];c.unshift(this.left),o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0435\u0441\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(c)}break;case"\u043f\u043e\u043a\u0430":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"\u0434\u0435\u043b\u0430\u0442\u044c":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0434\u0435\u043b\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"\u0446\u0438\u043a\u043b":{let c=this.right?this.right:[];c.unshift(this.left),o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0446\u0438\u043a\u043b").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(c)}break;case"\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c":{let c=this.right?this.right:[];c[0]=pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c[0]),c.unshift(this.left),o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(c)}break;case"\u043c\u0435\u0442\u043e\u0434":{let c=this.right?this.right:[];c[0]&&c[0].\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&c[0].\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c[0].\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.map(u=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u.name))),c.unshift(...[this.left,!0].map(u=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u))),o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(this.left).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(c.map(u=>u||pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u)))}break;case"\u043f\u043e\u043b\u0435":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(this.left).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.left),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1),this.right]);break;case".":o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u043e\u043b\u044e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.right)]);break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u0431\u0438\u043d\u0430\u0440\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f: "${this.op}".`)}return o}}class s0{constructor(){this.\u0434\u0432\u0438\u0436\u043e\u043a=new ru,this.\u0442\u0435\u043a\u0441\u0442="",this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430=0,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0441\u0435\u0440(this)}\u0435\u0441\u0442\u044c\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b(){return this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430<this.\u0442\u0435\u043a\u0441\u0442.length}\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b(){if(!this.\u0435\u0441\u0442\u044c\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b())throw new Error("\u0412\u0441\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u044b. \u041a\u043e\u043d\u0435\u0446 \u0442\u0435\u043a\u0441\u0442\u0430.");return this.\u0442\u0435\u043a\u0441\u0442[++this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430]}\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c(o){for(this.\u0442\u0435\u043a\u0441\u0442=o,this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430=0;this.\u0435\u0441\u0442\u044c\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b();)this.\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b()}\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(o){for(var a={BinOpBuilder:()=>tV.builder(),UnOpBuilder:()=>eV.builder()},c=null;null==c;)try{return universalParserStatic.parse(o,{builder:a})}catch(u){c=u}throw c}}class jp{constructor(o,a){this.\u043e\u0431\u044a\u0435\u043a\u0442=o,this.\u0438\u043c\u044f=a}static \u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new jp(null,"")}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(o){return this.\u043e\u0431\u044a\u0435\u043a\u0442=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(o){return this.\u0438\u043c\u044f=o,this}}class CM{constructor(o,a,c,u,h,d,f=0,p=!0,g=1,m=1){this.d3Config=o,this.d3Svc=a,this.\u0434\u0432\u0438\u0436\u043e\u043a=c,this.\u043f\u0430\u043c\u044f\u0442\u044c=u,this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434=h,this.\u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440=d,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=f,this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=p,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=g,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=m}static \u043d\u043e\u0432\u0430\u044f(){return new CM}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446(){if(null==this.\u043f\u0430\u043c\u044f\u0442\u044c)return 1;let o=this.\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u043e\u0431\u0449\u0435\u0435\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446");return null==o?1:o.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(o){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(o){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(o){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(o){return this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440(o){return this.\u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430(o,a){return this.d3Config.width=o,this.d3Config.height=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433(o){return this.d3Config=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0435\u0440\u0432\u0438\u0441(o){return this.d3Svc=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0432\u0438\u0436\u043e\u043a(o){return this.\u0434\u0432\u0438\u0436\u043e\u043a=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u043c\u044f\u0442\u044c(o){return this.\u043f\u0430\u043c\u044f\u0442\u044c=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434(o){return this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434=o,this}\u0437\u0430\u043f\u0443\u0441\u043a(o=[]){return this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434),[pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),this.\u043f\u0430\u043c\u044f\u0442\u044c,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0437\u0430\u043f\u0443\u0441\u043a"),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b)].concat(o.map(c=>c.\u043e\u0431\u044a\u0435\u043a\u0442)),[pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0440\u0435\u0436\u0438\u043c"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b")].concat(o.map(c=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u0438\u043c\u044f))),!0,!0,!1,null))}\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435(o=[]){return this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434),[pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),this.\u043f\u0430\u043c\u044f\u0442\u044c,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435"),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b)].concat(o.map(c=>c.\u043e\u0431\u044a\u0435\u043a\u0442)),[pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0440\u0435\u0436\u0438\u043c"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b")].concat(o.map(c=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u0438\u043c\u044f))),!0,!0,!1,null))}}class wS{constructor(o=0,a=0){this.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430=o,this.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c=a,this.\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b=new Map,this.\u0441\u043e\u0431\u044b\u0442\u0438\u044f=new Map}static \u043d\u043e\u0432\u044b\u0439(){return new wS}}class nV{constructor(){this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b=[wS.\u043d\u043e\u0432\u044b\u0439()],this.d3Element=null,this.d3ElementTransition=null}static \u043d\u043e\u0432\u0430\u044f(){return new nV}get \u043f\u0435\u0440\u0435\u0445\u043e\u0434(){return this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b[this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.length-1]}transition(){return this.d3Element?this.d3ElementTransition=this.d3Element.transition():this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.push(wS.\u043d\u043e\u0432\u044b\u0439()),this}resetTransition(){return this.d3Element?this.d3ElementTransition=null:this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.push(wS.\u043d\u043e\u0432\u044b\u0439()),this}duration(o){return this.d3Element?this.d3ElementTransition&&(this.d3ElementTransition=this.d3ElementTransition.duration(o)):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c=o,this}delay(o){return this.d3Element?this.d3ElementTransition&&(this.d3ElementTransition=this.d3ElementTransition.delay(o)):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430=o,this}attr(o,a){return this.d3Element?this.d3ElementTransition?this.d3ElementTransition=this.d3ElementTransition.attr(o,a):this.d3Element=this.d3Element.attr(o,a):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b.set(o,a),this}text(o){return this.d3Element?this.d3ElementTransition?this.d3ElementTransition=this.d3ElementTransition.text(o):this.d3Element=this.d3Element.text(o):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0442\u0435\u043a\u0441\u0442=o,this}event(o,a){return this.d3Element?this.d3ElementTransition?this.d3ElementTransition=this.d3ElementTransition.on(o,a(this.d3Element)):this.d3Element=this.d3Element.on(o,a(this.d3Element)):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0441\u043e\u0431\u044b\u0442\u0438\u044f.set(o,a),this}apply(o){this.d3Element=o;let a=this.d3Element;return this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.forEach((c,u)=>{u&&(a=a.transition().duration(c.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c),c.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430&&(a=a.delay(c.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430))),c.\u0441\u043e\u0431\u044b\u0442\u0438\u044f.forEach((h,d,f)=>{a=a.on(d,h(a))}),c.\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b.forEach((h,d,f)=>{a=a.attr(d,h)}),c.\u0442\u0435\u043a\u0441\u0442&&(a=a.text(c.\u0442\u0435\u043a\u0441\u0442)),u||(this.d3Element=a)}),this}}class SM extends pe{constructor(o,a){super(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0422\u0435\u043a\u0441\u0442 D3"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o,this.\u043f\u0422\u0435\u043a\u0441\u0442=a,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u0442\u0435\u043a\u0441\u0442(){return this.\u043f\u0422\u0435\u043a\u0441\u0442}set \u0442\u0435\u043a\u0441\u0442(o){this.\u043f\u0422\u0435\u043a\u0441\u0442=o}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(o){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o}static \u043d\u043e\u0432\u044b\u0439(){return new SM(null,null)}static \u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442(){return new SM(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(o){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(o){return this.\u0442\u0435\u043a\u0441\u0442=o,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let o=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();o.set("\u0442\u0435\u043a\u0441\u0442",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.text(c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1])).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),o.set("\u043f\u043e\u0437\u0438\u0446\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("x",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u0442\u0435\u043a\u0441\u0442.attr("y",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u0440\u0430\u0437\u043c\u0435\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("font-size",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u0436\u0438\u0440\u043d\u044b\u0439",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("font-weight",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?700:300),this)))))),o.set("\u0437\u0430\u043b\u0438\u0432\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("fill",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),o.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("fill-opacity",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("stroke",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),o.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("stroke-width",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439\u042f\u043a\u043e\u0440\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("text-anchor",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this))))));let a=c=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((u,h)=>{let f=[h[1],pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];h.length>2&&f.push(...h.splice(2));let p=u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(f.map(g=>u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g))));return this.\u0442\u0435\u043a\u0441\u0442.event(c,g=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([jp.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(p).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));o.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",a("click")),o.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",a("end")),o.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.transition(),this)))))),o.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.resetTransition(),this)))))),o.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u0442\u0435\u043a\u0441\u0442.duration(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),o.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u0442\u0435\u043a\u0441\u0442.delay(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class wM extends pe{constructor(o,a){super(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041a\u0440\u0443\u0433 D3"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o,this.\u043f\u041a\u0440\u0443\u0433=a,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043a\u0440\u0443\u0433(){return this.\u043f\u041a\u0440\u0443\u0433}set \u043a\u0440\u0443\u0433(o){this.\u043f\u041a\u0440\u0443\u0433=o}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(o){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o}static \u043d\u043e\u0432\u044b\u0439(){return new wM}static \u043d\u043e\u0432\u044b\u0439\u041a\u0440\u0443\u0433(){return new wM}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(o){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(o){return this.\u043a\u0440\u0443\u0433=o,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let o=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();o.set("\u0440\u0430\u0434\u0438\u0443\u0441",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.attr("r",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u043f\u043e\u0437\u0438\u0446\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.attr("cx",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043a\u0440\u0443\u0433.attr("cy",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u0437\u0430\u043b\u0438\u0432\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.attr("fill",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),o.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.attr("fill-opacity",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.attr("stroke",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),o.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.attr("stroke-width",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this))))));let a=c=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((u,h)=>{let f=[h[1],pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];h.length>2&&f.push(...h.splice(2));let p=u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(f.map(g=>u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g))));return this.\u043a\u0440\u0443\u0433.event(c,g=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([jp.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(p).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));o.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",a("click")),o.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",a("end")),o.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.transition(),this)))))),o.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.resetTransition(),this)))))),o.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u043a\u0440\u0443\u0433.duration(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),o.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u043a\u0440\u0443\u0433.delay(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class TM extends pe{constructor(o,a){super(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a D3"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o,this.\u043f\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a=a,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a(){return this.\u043f\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a}set \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a(o){this.\u043f\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a=o}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(o){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o}static \u043d\u043e\u0432\u044b\u0439(){return new TM}static \u043d\u043e\u0432\u044b\u0439\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a(){return new TM}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(o){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(o){return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a=o,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let o=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();o.set("\u0448\u0438\u0440\u0438\u043d\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("width",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u0432\u044b\u0441\u043e\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("height",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u043f\u043e\u0437\u0438\u0446\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("x",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("y",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u0442\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("transform",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),o.set("\u0441\u043a\u0440\u0443\u0433\u043b\u0435\u043d\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("rx",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("ry",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u0437\u0430\u043b\u0438\u0432\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("fill",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),o.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("fill-opacity",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("stroke",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),o.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("stroke-width",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this))))));let a=c=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((u,h)=>{let f=[h[1],pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];h.length>2&&f.push(...h.splice(2));let p=u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(f.map(g=>u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g))));return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.event(c,g=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([jp.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(p).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));o.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",a("click")),o.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",a("end")),o.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.transition(),this)))))),o.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.resetTransition(),this)))))),o.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.duration(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),o.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.delay(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class OM extends pe{constructor(o,a){super(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041b\u0438\u043d\u0438\u044f D3"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o,this.\u043f\u041b\u0438\u043d\u0438\u044f=a,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043b\u0438\u043d\u0438\u044f(){return this.\u043f\u041b\u0438\u043d\u0438\u044f}set \u043b\u0438\u043d\u0438\u044f(o){this.\u043f\u041b\u0438\u043d\u0438\u044f=o}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(o){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o}static \u043d\u043e\u0432\u044b\u0439(){return new OM}static \u043d\u043e\u0432\u0430\u044f\u041b\u0438\u043d\u0438\u044f(){return new OM}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(o){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(o){return this.\u043b\u0438\u043d\u0438\u044f=o,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let o=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();o.set("\u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("x1",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043b\u0438\u043d\u0438\u044f.attr("y1",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043b\u0438\u043d\u0438\u044f.attr("x2",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[3]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043b\u0438\u043d\u0438\u044f.attr("y2",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[4]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u0442\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("transform",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),o.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("fill-opacity",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),o.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("stroke",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),o.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("stroke-width",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this))))));let a=c=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((u,h)=>{let f=[h[1],pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];h.length>2&&f.push(...h.splice(2));let p=u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(f.map(g=>u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g))));return this.\u043b\u0438\u043d\u0438\u044f.event(c,g=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([jp.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(p).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));o.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",a("click")),o.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",a("end")),o.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.transition(),this)))))),o.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.resetTransition(),this)))))),o.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u043b\u0438\u043d\u0438\u044f.duration(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),o.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u043b\u0438\u043d\u0438\u044f.delay(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class TS extends pe{constructor(o){super(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u0440\u0438\u043c\u0435\u0440 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0432\u0441\u0442\u0430\u0432\u043a\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(o){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(o,a){let c=TS.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(a);o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443D3",(u,h)=>c,!0),o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430",(u,h)=>(c.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430(u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),c),!0)}static \u043d\u043e\u0432\u0430\u044f(){return new TS}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(o){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=o,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let o=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();o.set("\u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0422\u0435\u043a\u0441\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),f=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),g=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[3]).\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?700:300,m=this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Svc.textSizeDirect(d,f,g),v=c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u0440\u0438\u043a\u0430");return v.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0448\u0438\u0440\u0438\u043d\u0430",c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0448\u0438\u0440\u0438\u043d\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.width)),v.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0432\u044b\u0441\u043e\u0442\u0430",c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0432\u044b\u0441\u043e\u0442\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.height)),v}))))),o.set("\u0448\u0438\u0440\u0438\u043d\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.width)))))),o.set("\u0432\u044b\u0441\u043e\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.height))))));let a=(c,u)=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=nV.\u043d\u043e\u0432\u0430\u044f();return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.pathes.push(Zr.builder().setRenderHandler((g,m)=>{p.apply(g.append(u))})),c.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(p)}))));o.set("\u043a\u0440\u0443\u0433",a(wM,"circle")),o.set("\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a",a(TM,"rect")),o.set("\u0442\u0435\u043a\u0441\u0442",a(SM,"text")),o.set("\u043b\u0438\u043d\u0438\u044f",a(OM,"line")),o.set("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430(c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),u[0])))))),o.set("\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c\u0412\u0441\u0451",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h;return null===(h=this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.svgImage)||void 0===h||h.clearAll(),this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.clearAll(),u[0]}))))),o.set("\u043f\u0435\u0440\u0435\u0441\u043e\u0437\u0434\u0430\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440.regenerate(),u[0]))))))}}class Sle extends sl{constructor(){super("\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 JS."),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439="",this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=null,this.d3SvcSaved=null,this.d3ConfigSaved=null,this.cacheService=null,this.\u043f\u0430\u043c\u044f\u0442\u044c=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"))}regenerate(){return this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(o){return this.cacheService=o,this.\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),this}\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(o="/scenes/logo.scene.txt"){let a=this.cacheService.getRestPoint(o,null);this.cacheService.getTextRestcallUrl(a,c=>{this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439=c,this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c()})}clear(){return super.clear(),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c(){if(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d)return!1;this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!0;let a=(new s0).\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439),c=new ru,u=CM.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433(this.d3ConfigSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0435\u0440\u0432\u0438\u0441(this.d3SvcSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0432\u0438\u0436\u043e\u043a(c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u043c\u044f\u0442\u044c(this.\u043f\u0430\u043c\u044f\u0442\u044c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440(this);return c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),TS.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(c,u),u.\u0437\u0430\u043f\u0443\u0441\u043a(),this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f&&this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),!0}generate(o,a,c){return this.d3SvcSaved=o,this.d3ConfigSaved=a,this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c():(this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=c,!1)}}class DM extends pe{constructor(){super(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0435\u0432"),null,new Map),this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435="\n\u0420\u0410\u0421\u041f\u0418\u0421\u0410\u041d\u0418\u0415 \u0411\u041e\u0413\u041e\u0421\u041b\u0423\u0416\u0415\u041d\u0418\u0419{\u043a}\n\u042f \u041d \u0412 \u0410 \u0420 \u042c{\u043a}\n===\n1\n\u0421\u0411\n--\n\u0421\u0423\u0411\u0411\u041e\u0422\u0410 \u041f\u0420\u0415\u0414 \u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u041e\u041c\n\u0425\u0420\u0418\u0421\u0422\u041e\u0412\u042b\u041c.\n\u041c\u0423\u0427\u0415\u041d\u0418\u041a\u0410 \u0412\u041e\u041d\u0418\u0424\u0410\u0422\u0418\u042f\n--\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415{\u043a}\n--\n17.00{\u043a}\n===\n2{\u043a}\n\u0412\u0421{\u043a}\n--\n\u041d\u0415\u0414\u0415\u041b\u042f 28-\u042f{\u043a}\n\u041f\u041e \u041f\u042f\u0422\u0418\u0414\u0415\u0421\u042f\u0422\u041d\u0418\u0426\u0415,{\u043a}\n\u041f\u0420\u0415\u0414 \u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u041e\u041c \u0425\u0420\u0418\u0421\u0422\u041e\u0412\u042b\u041c,{\u043a}\n\u0421\u0412\u042f\u0422\u042b\u0425 \u041e\u0422\u0415\u0426.{\u043a}\n\u041f\u0420\u0410\u0412. \u0418\u041e\u0410\u041d\u041d\u0410 \u041a\u0420\u041e\u041d\u0428\u0422\u0410\u0414\u0422\u0421\u041a\u041e\u0413\u041e{\u043a}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n\u041b\u0438\u0442\u0438\u044f{\u043a}\n\u0412\u043e\u0434\u043e\u0441\u0432\u044f\u0442\u043d\u044b\u0439 \u043c\u043e\u043b\u0435\u0431\u0435\u043d.{\u043a}\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n\u041b\u0438\u0442\u0438\u044f{\u043a}\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421{\u0437}\n--\n6.00{\u043a}\n\n8.00{\u043a}\n8.40{\u043a}\n\n17.00{\u0437}\n===\n3{\u0437}\n\u041f\u041d{\u0437}\n--\n\u0421\u0412\u0422. \u041f\u0415\u0422\u0420\u0410, \u041c\u0418\u0422\u0420. \u041a\u0418\u0415\u0412\u0421\u041a\u041e\u0413\u041e,{\u0437}\n\u041c\u041e\u0421\u041a\u041e\u0412\u0421\u041a\u041e\u0413\u041e \u0418 \u0412\u0421\u0415\u042f \u0420\u0423\u0421\u0418,{\u0437}\n\u0427\u0423\u0414\u041e\u0422\u0412\u041e\u0420\u0426\u0410{\u0437}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u0437}\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f{\u0437}\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421\n--\n8.40\n\n17.00\n===\n4\n\u0412\u0422\n--\n\u0412\u041c\u0426. \u0410\u041d\u0410\u0421\u0422\u0410\u0421\u0418\u0418 \u0423\u0417\u041e\u0420\u0415\u0428\u0418\u0422\u0415\u041b\u042c\u041d\u0418\u0426\u042b\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421\n--\n8.40\n\n17.00\n===\n5\n\u0421\u0420\n--\n\u0414\u0415\u0421\u042f\u0422\u0418 \u041c\u0423\u0427\u0415\u041d\u0418\u041a\u041e\u0412, \u0418\u0416\u0415 \u0412 \u041a\u0420\u0418\u0422\u0415\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f.\n--\n8.40\n\n17.00\n===\n6\n\u0427\u0422\n--\n\u041d\u0410\u0412\u0415\u0427\u0415\u0420\u0418\u0415\n\u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u0410 \u0425\u0420\u0418\u0421\u0422\u041e\u0412\u0410.\n\u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u0415\u041d\u0421\u041a\u0418\u0419 \u0421\u041e\u0427\u0415\u041b\u042c\u041d\u0418\u041a\n\u041f\u0420\u041c\u0426. \u0415\u0412\u0413\u0415\u041d\u0418\u0418\n--\n\u0426\u0410\u0420\u0421\u041a\u0418\u0415 \u0427\u0410\u0421\u042b.\n\u0418\u0417\u041e\u0411\u0420\u0410\u0417\u0418\u0422\u0415\u041b\u042c\u041d\u042b.\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f \u0421 \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u0415\u0419\n\u0421\u0412\u0422. \u0412\u0410\u0421\u0418\u041b\u0418\u042f \u0412\u0415\u041b\u0418\u041a\u041e\u0413\u041e\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415{\u043a}\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n--\n8.00\n\n\n\n17.00{\u043a}\n23.00{\u043a}\n===\n7{\u043a}\n\u041f\u0422{\u043a}\n--\n\u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u041e \u0413\u041e\u0421\u041f\u041e\u0414\u0410 \u0411\u041e\u0413\u0410 \u0418 \u0421\u041f\u0410\u0421\u0410{\u043a}\n\u041d\u0410\u0428\u0415\u0413\u041e \u0418\u0418\u0421\u0423\u0421\u0410 \u0425\u0420\u0418\u0421\u0422\u0410{\u043a}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n\u0412\u0415\u041b\u0418\u041a\u0410\u042f \u0412\u0415\u0427\u0415\u0420\u041d\u042f{\u0441}\n--\n8.40{\u043a}\n17.00{\u0441}\n===\n8{\u0441}\n\u0421\u0411{\u0441}\n--\n\u0421\u0423\u0411\u0411\u041e\u0422\u0410 \u041f\u041e \u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u0415 \u0425\u0420\u0418\u0421\u0422\u041e\u0412\u041e\u041c.{\u0441}\n\u0421\u041e\u0411\u041e\u0420 \u041f\u0420\u0415\u0421\u0412\u042f\u0422\u041e\u0419 \u0411\u041e\u0413\u041e\u0420\u041e\u0414\u0418\u0426\u042b{\u0441}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u0441}\n\u041f\u0430\u043d\u0438\u0445\u0438\u0434\u0430{\u0441}\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415{\u043a}\n--\n8.40{\u0441}\n\n17.00{\u043a}\n===\n\u0414\u043e\u0440\u043e\u0433\u0438\u0435 \u0431\u0440\u0430\u0442\u044c\u044f \u0438 \u0441\u0435\u0441\u0442\u0440\u044b!\n\u0422\u0410\u0418\u041d\u0421\u0422\u0412\u041e \u0418\u0421\u041f\u041e\u0412\u0415\u0414\u0418\n\u0441\u043e\u0432\u0435\u0440\u0448\u0430\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u0448\u0435\u043c \u0445\u0440\u0430\u043c\u0435 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u0435\u0447\u0435\u0440\u043d\u0435\u0433\u043e \u0431\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u043d\u0438\u044f\n\u0438\u043b\u0438 \u043f\u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0441\u043e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u043c \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u043c.\n\u0423\u0437\u043d\u0430\u0442\u044c, \u043a\u0442\u043e \u0441\u043b\u0443\u0436\u0438\u0442, \u043c\u043e\u0436\u043d\u043e \u0437\u0430 \u0441\u0432\u0435\u0447\u043d\u044b\u043c \u044f\u0449\u0438\u043a\u043e\u043c \u0438\u043b\u0438 \u043f\u043e\n\u0442\u0435\u043b. +7 (495) 322-223\n                      ",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(o){return this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=o,this}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(o){let a=DM.\u043d\u043e\u0432\u0430\u044f();o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0435\u0432",(c,u)=>a,!0)}static \u043d\u043e\u0432\u0430\u044f(){return new DM}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0442\u0435\u043a\u0441\u0442\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((a,c)=>a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435))))))}}class iV extends sl{constructor(o=210,a=297){super("\u041f\u0440\u0438\u043c\u0435\u0440 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f JS.",o,a),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439="",this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=null,this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=null,this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0438\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f=null,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=0,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=0,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=0,this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=!0,this.d3SvcSaved=null,this.d3ConfigSaved=null,this.cacheService=null,this.\u043f\u0430\u043c\u044f\u0442\u044c=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=new Map}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(o,a){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.set(o,a),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(o){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(o){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(o){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(o){return this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(o){return this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=o,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446(){if(null==this.\u043f\u0430\u043c\u044f\u0442\u044c)return 1;let o=this.\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u043e\u0431\u0449\u0435\u0435\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446");return null==o?1:o.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()}regenerate(){return this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),this}getWidth(){return this.d3ConfigSaved?this.d3ConfigSaved.width:this.width}getHeight(){return this.d3ConfigSaved?this.d3ConfigSaved.height:this.height}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(o,a="/scenes/scheduler.scene.txt"){return this.cacheService=o,this.\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(a),this}\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(o="/scenes/scheduler.scene.txt",a="/scenes/scheduler4.txt"){let c=this.cacheService.getRestPoint(o,null),u=this.cacheService.getRestPoint(a,null);this.cacheService.getTextRestcallUrl(c,h=>{this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439=h,null!=this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c():this.cacheService.getTextRestcallUrl(u,d=>{this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=d,this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c()})})}clear(){return super.clear(),this.d3ConfigSaved.clearAll(),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c(){if(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d)return!1;this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!0;let o=new s0,a=o.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439),c=o.\u0434\u0432\u0438\u0436\u043e\u043a,u=DM.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435),h=CM.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433(this.d3ConfigSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0435\u0440\u0432\u0438\u0441(this.d3SvcSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0432\u0438\u0436\u043e\u043a(c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u043c\u044f\u0442\u044c(this.\u043f\u0430\u043c\u044f\u0442\u044c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440(this).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b);c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),TS.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(c,h);let d=[jp.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(u).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438")];return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.forEach((p,g)=>d.push(jp.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(g))),h.\u0437\u0430\u043f\u0443\u0441\u043a(d),this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f&&this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),!0}generate(o,a,c){return this.d3SvcSaved=o,this.d3ConfigSaved=a,this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c():(this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=c,!1)}}class wf{static saveData(o,a){const c=document.createElement("a"),u=window.URL.createObjectURL(o);c.href=u,c.download=a,c.click(),window.URL.revokeObjectURL(u)}static startDownload(o,a){const c=document.createElement("a");c.setAttribute("href",o),c.setAttribute("download",a),c.click(),c.remove()}}var kM=St(650);class Sqe{StatementValue(){return rV.builder()}VariableValue(){return sV.builder()}UnaryOp(){return cV.builder()}BinaryOp(){return uV.builder()}NumberValue(){return oV.builder()}IdValue(){return aV.builder()}FuncValue(){return lV.builder()}}var pc=(()=>(function(l){l[l.Number=0]="Number",l[l.Id=1]="Id",l[l.Function=2]="Function",l[l.UnaryOp=3]="UnaryOp",l[l.BinaryOp=4]="BinaryOp"}(pc||(pc={})),pc))();class rV{constructor(o,a){this.value=o,this.variables=a}static builder(){return new rV(null,[])}setValue(o){return this.value=o,this}setVariables(o){return this.variables=o,this}toString(){var o;let a=this.variables.map(c=>c.toString()).join("\r\n");return`${null===(o=this.value)||void 0===o?void 0:o.toString()};`+(a?` \u0433\u0434\u0435\n      ${a}\n`:"")+"\n."}}class sV{constructor(o,a,c){this.name=o,this.constant=a,this.type=c}static builder(){return new sV("",!1,"")}setName(o){return this.name=o,this}setConstant(o){return this.constant=o,this}setType(o){return this.type=o,this}toString(){return`${this.name}: ${this.constant?"\u043f\u043e\u0441\u0442 ":""}${this.type};`}}class OS{constructor(o){this.type=o}getType(){return this.type}toString(){return""}}class oV extends OS{constructor(o){super(pc.Number),this.value=o}static builder(){return new oV(0)}setValue(o){return this.value=o,this}toString(){return`${this.value}`}}class aV extends OS{constructor(o){return super(pc.Id),this.name=o,this}static builder(){return new aV("")}setName(o){return this.name=o,this}toString(){return`${this.name}`}}class lV extends OS{constructor(o,a){super(pc.Function),this.name=o,this.params=a}static builder(){return new lV("",[])}setName(o){return this.name=o,this}setParams(o){return this.params=o,this}isIntegralName(o){let a=!1;switch(o){case"integrate":case"integral":case"\u0438\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c":case"\u0438\u043d\u0442\u0435\u0433\u0440\u0430\u043b":a=!0}return a}isDiffName(o){let a=!1;switch(o){case"diff":case"differentiate":case"\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u043d\u0430\u044f":a=!0}return a}toString(){return this.isDiffName(this.name)&&2==this.params.length?`diff(${this.params.map(o=>o.toString()).join(",")})`:this.isIntegralName(this.name)&&2==this.params.length?`integrate(${this.params.map(o=>o.toString()).join(",")},1)`:this.isIntegralName(this.name)&&3==this.params.length?`integrate(${this.params.map(o=>o.toString()).join(",")})`:`${this.name}(${this.params.map(o=>o.toString()).join(",")})`}}class cV extends OS{constructor(o,a){return super(pc.UnaryOp),this.name=o,this.value=a,this}static builder(){return new cV("",null)}setName(o){return this.name=o,this}setValue(o){return this.value=o,this}toString(){var o,a;return"()"==this.name?`(${null===(o=this.value)||void 0===o?void 0:o.toString()})`:`${this.name}${null===(a=this.value)||void 0===a?void 0:a.toString()}`}}class uV extends OS{constructor(o,a,c){return super(pc.BinaryOp),this.left=o,this.name=a,this.right=c,this}static builder(){return new uV(null,"",null)}setLeft(o){return this.left=o,this}setName(o){return this.name=o,this}setRight(o){return this.right=o,this}toString(){var o,a;return`${null===(o=this.left)||void 0===o?void 0:o.toString()} ${this.name} ${null===(a=this.right)||void 0===a?void 0:a.toString()}`}}class MM{parse(o){return formulasParserStatic.parse(o,{builder:new Sqe})}}class Dr{constructor(o,a){this.width=o,this.height=a,this.underline=!1,this.overline=!1,this.system=!1,this.space=!1}static builder(){return new Dr(0,0)}setWidth(o){return this.width=o,this}setHeight(o){return this.height=o,this}setUnderline(o){return this.underline=o,this}setOverline(o){return this.overline=o,this}setSystem(o){return this.system=o,this}setSpace(o){return this.space=o,this}calculateFor(o,a){this.width=this.space?a.fontSize/10:0,this.height=0}drawFor(o,a,c,u,h,d){this.overline&&d.lines.push(si.builder().setWidth(d.lineWidth).setColor(d.colorLines).setX1(o).setY1(a).setX2(o+c).setY2(a)),this.underline&&d.lines.push(si.builder().setWidth(d.lineWidth).setColor(d.colorLines).setX1(o).setY1(a+u).setX2(o+c).setY2(a+u))}}class Il extends Dr{constructor(o){super(0,0),this.text=o}static builder(){return new Il("")}setText(o){return this.text=o,this}calculateFor(o,a){let c=o.textSizeDirect(this.text,a.fontSize,a.fontWeight);c&&this.setWidth(c.width).setHeight(c.height)}drawFor(o,a,c,u,h,d){super.drawFor(o,a,c,u,h,d),d.texts.push(ri.builder().setText(this.text).setTextAnchor("left").setFontSize(d.fontSize+"px").translate(o,a+u-this.height*(1-d.fontLineRelativeOffset)).rotate(0).setColor(d.colorLines))}}class su extends Dr{constructor(o){super(0,0),this.childs=o,this.centerDy=0}static builder(){return new su([])}setChilds(o){return this.childs=o,this}getCurCenterDy(o,a){return wle.getCurCenterDy(o,a)}calculateFor(o,a){this.childs.forEach(h=>h.calculateFor(o,a));let c=0,u=0;this.centerDy=0,this.childs.forEach(h=>{c+=h.width;let d=this.getCurCenterDy(h,a);if(this.centerDy<d){let f=this.centerDy,p=u-f,g=d,m=h.height-g;this.centerDy=d,u=Math.max(f,g)+Math.max(p,m)}else u=Math.max(u,h.height+(d-this.centerDy))}),this.setWidth(c).setHeight(u)}drawFor(o,a,c,u,h,d){super.drawFor(o,a,c,u,h,d);let f=o,p=a,v=c-0;this.childs.forEach(_=>{let b=this.getCurCenterDy(_,d);0==b&&(b=this.centerDy>0?(_.system?u:_.height)/2:0),_.drawFor(f,p+(_.system?0:this.centerDy-b),_.width,_.system?u:_.height,h,d),f+=_.width,v-=_.width})}}class qp extends Dr{constructor(o){super(0,0),this.opened=o}static builder(){return new qp(!0)}setOpened(o){return this.opened=o,this}getDivHeight(o){return o.lineWidth}calculateFor(o,a){this.setWidth(a.fontSize/4).setHeight(0).setSystem(!0)}drawFor(o,a,c,u,h,d){super.drawFor(o,a,c,u,h,d);let p=d.fontSize/4*(d.fontSize/u),g=a+u-d.fontSize*(1-d.fontLineRelativeOffset),m=a+d.fontSize*(1-d.fontLineRelativeOffset),v=(m+g)/2,b=(g-m)/4,C=m+b,x=C+b,S=x+b;d.pathes.push(Zr.builder().setRenderHandler((w,O)=>{let T=mf();this.opened?(T.moveTo(p,m),T.bezierCurveTo(0,C,0,x,0,v),T.bezierCurveTo(0,x,0,S,p,g)):(T.moveTo(0,m),T.bezierCurveTo(p,C,p,x,p,v),T.bezierCurveTo(p,x,p,S,0,g)),w.append("path").attr("d",T).attr("stroke",d.colorMain).attr("stroke-width",O.strokeWidth).attr("fill","none").attr("transform",(M,A)=>h.transformToString(O.transform||[]))}).setStrokeColor(d.colorMain).setStrokeWidth(1).setFillColor("none").setFillOpacity(.5).translate(o+1,0))}}class EM extends Dr{constructor(o){super(0,0),this.childs=o}static builder(){return new EM([])}setChilds(o){return this.childs=o,this}getUpPartHeight(){let o=0;for(let a=0;a<this.childs.length;++a)if(!this.childs[a].system){o=this.childs[a].height;break}return o}calculateFor(o,a){this.childs.forEach(h=>h.calculateFor(o,a));let c=0,u=0;this.childs.forEach(h=>{u+=h.height,c=Math.max(c,h.width)}),this.setWidth(c).setHeight(u)}drawFor(o,a,c,u,h,d){super.drawFor(o,a,c,u,h,d);let f=o,p=a;f+=0,p+=u>this.height?u-this.height:0,this.childs.forEach(v=>{let y=0==v.width?0:c>v.width?(c-v.width)/2:0;v.drawFor(f+y,p,v.width?v.width:c-y,v.height,h,d),p+=v.height})}}class AM extends Dr{constructor(o){super(0,0),this.underRootValue=o}static builder(){return new AM(Dr.builder())}setUnderRootValue(o){return this.underRootValue=o,this}getDivHeight(o){return 2*o.lineWidth}calculateFor(o,a){this.underRootValue.calculateFor(o,a),this.setWidth(a.fontSize/2+this.underRootValue.width).setHeight(this.underRootValue.height+2*this.getDivHeight(a))}drawFor(o,a,c,u,h,d){super.drawFor(o,a,c,u,h,d);let f=d.fontSize/2,p=a+this.getDivHeight(d),g=a+u-d.fontSize*(1-d.fontLineRelativeOffset);d.lines.push(si.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(o).setY1(p+u/2).setX2(o+f/3).setY2(p+u/2),si.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(o+f/3).setY1(p+u/2).setX2(o+2*f/3).setY2(g),si.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(o+2*f/3).setY1(g).setX2(o+f).setY2(p),si.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(o+f).setY1(p).setX2(o+c).setY2(p));let m=this.getDivHeight(d);this.underRootValue.drawFor(o+f,p+m,c-f,u-2*m,h,d)}}class IM extends Dr{constructor(o,a){super(0,0),this.rootNumberValue=o,this.underRootValue=a}static builder(){return new IM(Dr.builder(),Dr.builder())}setUnderRootValue(o){return this.underRootValue=o,this}setNumberRootValue(o){return this.rootNumberValue=o,this}getDivHeight(o){return 2*o.lineWidth}getCenterDy(o){let a=this.getDivHeight(o),u=this.rootNumberValue.height;return this.underRootValue.height/2<u&&(a+=u),a}calculateFor(o,a){this.underRootValue.calculateFor(o,a),this.rootNumberValue.calculateFor(o,a);let c=a.fontSize/2,u=this.underRootValue.height,h=this.rootNumberValue.height,d=u/2,f=this.underRootValue.height+2*this.getDivHeight(a);if(u<=a.fontSize)f=u+h;else if(h>d){let p=a.fontSize+h+2*this.getDivHeight(a);f=f<p?p:f}this.setWidth(c+this.underRootValue.width+this.rootNumberValue.width).setHeight(f)}drawFor(o,a,c,u,h,d){super.drawFor(o,a,c,u,h,d);let f=d.fontSize/2,p=a+this.getDivHeight(d),g=a+u-d.fontSize*(1-d.fontLineRelativeOffset),m=this.underRootValue.height,v=this.rootNumberValue.height,y=m/2,_=y<v?v:u/2;m<=d.fontSize?_=v:v>y&&(_=v+2*this.getDivHeight(d)),this.rootNumberValue.drawFor(o+f/3,p+_-this.rootNumberValue.height,this.rootNumberValue.width,this.rootNumberValue.height,h,d);let b=o+this.rootNumberValue.width;d.lines.push(si.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(o).setY1(p+_).setX2(b+f/3).setY2(p+_),si.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(b+f/3).setY1(p+_).setX2(b+2*f/3).setY2(g),si.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(b+2*f/3).setY1(g).setX2(b+f).setY2(p),si.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(b+f).setY1(p).setX2(b+c-this.rootNumberValue.width).setY2(p)),this.underRootValue.drawFor(o+f+this.rootNumberValue.width,g-this.underRootValue.height,c-f-this.rootNumberValue.width,this.underRootValue.height,h,d)}}class DS extends Dr{constructor(o){super(0,0),this.underRootValue=o}static builder(){return new DS(Dr.builder())}setUnderRootValue(o){return this.underRootValue=o,this}getDivHeight(o){return o.lineWidth}calculateFor(o,a){this.underRootValue.calculateFor(o,a);let c=a.fontSize/2;this.setWidth(c/2+c+this.underRootValue.width).setHeight(this.underRootValue.height+this.getDivHeight(a))}drawFor(o,a,c,u,h,d){super.drawFor(o,a,c,u,h,d);let f=d.fontSize/2,p=f/2,g=f/2,m=a+u-d.fontSize*(1-d.fontLineRelativeOffset),v=a+d.fontSize*(1-d.fontLineRelativeOffset);d.pathes.push(Zr.builder().setRenderHandler((y,_)=>{let b=mf();b.moveTo(0,m-g),b.bezierCurveTo(0,m,g,m,g,m-g),b.lineTo(g,v+g),b.bezierCurveTo(g,v,f,v,f,v+g),y.append("path").attr("d",b).attr("stroke",d.colorMain).attr("stroke-width",_.strokeWidth).attr("fill","none").attr("transform",(C,x)=>h.transformToString(_.transform||[]))}).setStrokeColor(d.colorMain).setStrokeWidth(1).setFillColor("none").setFillOpacity(.5).translate(o+1,0)),this.underRootValue.drawFor(o+f+p,a+this.getDivHeight(d),c-f,u,h,d)}}class PM extends Dr{constructor(o,a){super(0,0),this.power=o,this.value=a}static builder(){return new PM(Dr.builder(),Dr.builder())}setValue(o){return this.value=o,this}setPower(o){return this.power=o,this}calculateFor(o,a){this.value.calculateFor(o,a),this.power.calculateFor(o,a);let f=this.value.height+this.power.height-a.fontSize/4*3;this.setWidth(0*a.fontSize/4+this.value.width+this.power.width).setHeight(f)}drawFor(o,a,c,u,h,d){super.drawFor(o,a,c,u,h,d);let p=0*d.fontSize/4;this.value.drawFor(o,a+(this.power.height-d.fontSize/4*3),this.value.width,this.value.height,h,d),this.power.drawFor(o+this.value.width+p,a,this.power.width,this.power.height,h,d)}getCenterDy(o){return this.power.height-o.fontSize/4*3+this.value.height/2}}class RM extends Dr{constructor(o,a,c){super(0,0),this.diffOp=o,this.byVar=a,this.value=c}static builder(){return new RM(Dr.builder(),Dr.builder(),Dr.builder())}setValue(o){return this.value=o,this}setDiffOp(o){return this.diffOp=o,this}setByVar(o){return this.byVar=o,this}calculateFor(o,a){this.value.calculateFor(o,a),this.byVar.calculateFor(o,a),this.diffOp.calculateFor(o,a);let d=this.value.height+this.byVar.height/2+this.diffOp.height/2;this.setWidth(this.value.width+Math.max(this.diffOp.width,this.byVar.width)).setHeight(d)}drawFor(o,a,c,u,h,d){super.drawFor(o,a,c,u,h,d);let m=this.byVar.height;this.value.drawFor(o,a+this.diffOp.height/2,this.value.width,this.value.height,h,d),this.diffOp.drawFor(o+this.value.width,a,this.diffOp.width,this.diffOp.height,h,d),this.byVar.drawFor(o+this.value.width,a+u-m,this.byVar.width,this.byVar.height,h,d)}getCenterDy(o){let u=this.diffOp.height,h=wle.getCurCenterDy(this.value,o);return h=h||this.value.height/2,h+u/2}}class wle{static getCurCenterDy(o,a){let c=0;return o instanceof EM?c=o.getUpPartHeight():o instanceof su?c=o.centerDy:o instanceof DS||o instanceof AM?c=this.getCurCenterDy(o.underRootValue,a):(o instanceof IM||o instanceof PM||o instanceof RM)&&(c=o.getCenterDy(a)),c}}class wqe{constructor(o=3){this.divHight=o}convert(o){switch(o.getType()){case pc.Id:return this.getId(o);case pc.Number:return this.getNumber(o);case pc.Function:return this.getFunction(o);case pc.UnaryOp:return this.getUnary(o);case pc.BinaryOp:return this.getBinary(o);default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0442\u0438\u043f: ${o.getType()}`)}}getId(o){return Il.builder().setText(o.name)}getNumber(o){return Il.builder().setText(""+o.value)}getUnary(o){return"()"==o.name?su.builder().setChilds([qp.builder().setOpened(!0),this.convertValueOrNull(o.value),qp.builder().setOpened(!1)]):su.builder().setChilds([Il.builder().setText(o.name),this.convertValueOrNull(o.value)])}getBinary(o){return"/"==o.name?EM.builder().setChilds([this.convertValueOrNull(o.left),Dr.builder().setOverline(!0).setSystem(!0).setHeight(this.divHight),this.convertValueOrNull(o.right)]):"*"==o.name||"+"==o.name||"-"==o.name||"="==o.name?su.builder().setChilds([this.convertValueOrNull(o.left),Dr.builder().setSpace(!0),Il.builder().setText(o.name),Dr.builder().setSpace(!0),this.convertValueOrNull(o.right)]):su.builder().setChilds([this.convertValueOrNull(o.left),Il.builder().setText(o.name),this.convertValueOrNull(o.right)])}convertValueOrNull(o){return o?this.convert(o):Il.builder().setText("null")}getFunction(o){return"pow"==o.name&&2==o.params.length?PM.builder().setValue(this.convertValueOrNull(o.params[0])).setPower(this.convertValueOrNull(o.params[1])):"sqrt"==o.name&&1==o.params.length?AM.builder().setUnderRootValue(this.convertValueOrNull(o.params[0])):"root"==o.name&&2==o.params.length?IM.builder().setUnderRootValue(this.convertValueOrNull(o.params[0])).setNumberRootValue(this.convertValueOrNull(o.params[1])):"diff"==o.name&&2==o.params.length?RM.builder().setValue(su.builder().setChilds([qp.builder().setOpened(!0),this.convertValueOrNull(o.params[0]),qp.builder().setOpened(!1)])).setByVar(this.convertValueOrNull(o.params[1])).setDiffOp(Il.builder().setText("'")):"integral"==o.name&&2==o.params.length||"integrate"==o.name&&3==o.params.length?DS.builder().setUnderRootValue(su.builder().setChilds([this.convertValueOrNull(o.params[0]),Dr.builder().setSpace(!0),Dr.builder().setSpace(!0),Il.builder().setText("d"),Dr.builder().setSpace(!0),this.convertValueOrNull(o.params[1])])):su.builder().setChilds([Il.builder().setText(o.name),qp.builder().setOpened(!0),su.builder().setChilds(o.params.flatMap((a,c)=>c>0?[Il.builder().setText(","),this.convertValueOrNull(a)]:[this.convertValueOrNull(a)])),qp.builder().setOpened(!1)])}}class FM extends sl{getFormula(o){let a=o.getParam("\u0442\u0435\u043a\u0441\u0442"),c=null;try{let h=(new MM).parse(a),d=new wqe,f=h[h.length-1];f.value&&(c=d.convert(f.value))}catch(u){c=Il.builder().setText("\u041e\u0448\u0438\u0431\u043a\u0430: "+a)}return c}constructor(o="\u041f\u0440\u0438\u043c\u0435\u0440 \u0444\u043e\u0440\u043c\u0443\u043b.",a=512,c=512){super(o,a,c)}generate(o,a,c){let u=this.getFormula(a);return u.calculateFor(o,a),this.width=a.width=u.width,this.height=a.height=u.height,a.colorBackground&&a.rects.push(o.createBackground(a)),u.drawFor(0,0,u.width,u.height,o,a),!0}}class th{constructor(o,a,c){this._id=o,this.key=a,this.value=c}static create(o){return o?new th(o._id,o.key,o.value):new th(-1,"","")}static of(o,a){return new th(0,o,a)}}class Zp{constructor(o,a,c){this.success=o,this.error=a,this.item=c}static create(o){return new Zp(o.success,o.error,th.create(o.item))}}let Mo=(()=>{class l{constructor(a,c){this.config=a,this.localstorageSvc=c,this.autoThemeKey="autotheme",this.themeKey="theme"}themeName(a=!0){return this.config.baseHref+(a?"/index.html":"/index.night.html")}nowIsNight(){return thisIsNightTheme}nowIsDay(){return!thisIsNightTheme}isLight(){return!this.isAutoTheme()&&this.localstorageSvc.getStorage(this.themeKey)==this.themeName(!0)}isNight(){return!this.isAutoTheme()&&this.localstorageSvc.getStorage(this.themeKey)==this.themeName(!1)}isAutoTheme(){return"true"==this.localstorageSvc.getStorage(this.autoThemeKey)}onToggleAutoTheme(){let a=this.isLight(),c=this.isNight();if(a||c||!a&&!c){this.localstorageSvc.setStorage(this.autoThemeKey,""+!0);let u=this.themeName(a);window.location.href=u}}switchToLight(){let a=this.themeName(!0);(this.localstorageSvc.getStorage(this.themeKey)!=a||this.isAutoTheme())&&(this.localstorageSvc.setStorage(this.themeKey,this.themeName(!0)),this.localstorageSvc.setStorage(this.autoThemeKey,"false"),window.location.href=a)}switchToNight(){let a=this.themeName(!1);(this.localstorageSvc.getStorage(this.themeKey)!=a||this.isAutoTheme())&&(this.localstorageSvc.setStorage(this.themeKey,this.themeName(!1)),this.localstorageSvc.setStorage(this.autoThemeKey,"false"),window.location.href=a)}applyTheme(){let a=window.ThemeHandler;if(a)try{let c=thisIsNightTheme?"night":"day";a.setTheme(c)}catch(c){}}printWindow(a){let c=!1,u=window.ThemeHandler;if(u)try{u.printWindow(a),c=!0}catch(h){}return c}getAudioRootFolder(){let a=window.ThemeHandler,c="./";if(a)try{c=a.getAudioRootFolder()}catch(u){}return c}}return l.\u0275fac=function(a){return new(a||l)(Ae(an),Ae(pF))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class Ni{static handleError(o,a){let c="";return c=o.error instanceof ErrorEvent?`Message: ${o.error.message}`:`Code: ${o.status}; Message: ${o.message}`,function Tqe(l,o){const a=ce(l)?l:()=>l,c=u=>u.error(a());return new xn(o?u=>o.schedule(c,0,u):c)}(()=>"Something bad happened; please try again later. Error: "+c)}static callOnDone(o,a){null==a?o&&o(null):o&&("string"==typeof a||ArrayBuffer,o(a))}}class kr{static merge(o,a){if(!o&&!a)return"";if(!o)return a;if(!a)return o;let c=o.endsWith("/"),u=a.startsWith("/"),h=o;return c!=u?h+=a:c?h+=u?a.substring(1):a:h?h+="/"+a:h=a,h}}class Tle{}class Ole{}class Tf{constructor(o){this.normalizedNames=new Map,this.lazyUpdate=null,o?this.lazyInit="string"==typeof o?()=>{this.headers=new Map,o.split("\n").forEach(a=>{const c=a.indexOf(":");if(c>0){const u=a.slice(0,c),h=u.toLowerCase(),d=a.slice(c+1).trim();this.maybeSetNormalizedName(u,h),this.headers.has(h)?this.headers.get(h).push(d):this.headers.set(h,[d])}})}:()=>{this.headers=new Map,Object.keys(o).forEach(a=>{let c=o[a];const u=a.toLowerCase();"string"==typeof c&&(c=[c]),c.length>0&&(this.headers.set(u,c),this.maybeSetNormalizedName(a,u))})}:this.headers=new Map}has(o){return this.init(),this.headers.has(o.toLowerCase())}get(o){this.init();const a=this.headers.get(o.toLowerCase());return a&&a.length>0?a[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(o){return this.init(),this.headers.get(o.toLowerCase())||null}append(o,a){return this.clone({name:o,value:a,op:"a"})}set(o,a){return this.clone({name:o,value:a,op:"s"})}delete(o,a){return this.clone({name:o,value:a,op:"d"})}maybeSetNormalizedName(o,a){this.normalizedNames.has(a)||this.normalizedNames.set(a,o)}init(){this.lazyInit&&(this.lazyInit instanceof Tf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(o=>this.applyUpdate(o)),this.lazyUpdate=null))}copyFrom(o){o.init(),Array.from(o.headers.keys()).forEach(a=>{this.headers.set(a,o.headers.get(a)),this.normalizedNames.set(a,o.normalizedNames.get(a))})}clone(o){const a=new Tf;return a.lazyInit=this.lazyInit&&this.lazyInit instanceof Tf?this.lazyInit:this,a.lazyUpdate=(this.lazyUpdate||[]).concat([o]),a}applyUpdate(o){const a=o.name.toLowerCase();switch(o.op){case"a":case"s":let c=o.value;if("string"==typeof c&&(c=[c]),0===c.length)return;this.maybeSetNormalizedName(o.name,a);const u=("a"===o.op?this.headers.get(a):void 0)||[];u.push(...c),this.headers.set(a,u);break;case"d":const h=o.value;if(h){let d=this.headers.get(a);if(!d)return;d=d.filter(f=>-1===h.indexOf(f)),0===d.length?(this.headers.delete(a),this.normalizedNames.delete(a)):this.headers.set(a,d)}else this.headers.delete(a),this.normalizedNames.delete(a)}}forEach(o){this.init(),Array.from(this.normalizedNames.keys()).forEach(a=>o(this.normalizedNames.get(a),this.headers.get(a)))}}class Oqe{encodeKey(o){return Dle(o)}encodeValue(o){return Dle(o)}decodeKey(o){return decodeURIComponent(o)}decodeValue(o){return decodeURIComponent(o)}}const kqe=/%(\d[a-f0-9])/gi,Mqe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Dle(l){return encodeURIComponent(l).replace(kqe,(o,a)=>{var c;return null!==(c=Mqe[a])&&void 0!==c?c:o})}function kle(l){return`${l}`}class Of{constructor(o={}){if(this.updates=null,this.cloneFrom=null,this.encoder=o.encoder||new Oqe,o.fromString){if(o.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Dqe(l,o){const a=new Map;return l.length>0&&l.replace(/^\?/,"").split("&").forEach(u=>{const h=u.indexOf("="),[d,f]=-1==h?[o.decodeKey(u),""]:[o.decodeKey(u.slice(0,h)),o.decodeValue(u.slice(h+1))],p=a.get(d)||[];p.push(f),a.set(d,p)}),a}(o.fromString,this.encoder)}else o.fromObject?(this.map=new Map,Object.keys(o.fromObject).forEach(a=>{const c=o.fromObject[a];this.map.set(a,Array.isArray(c)?c:[c])})):this.map=null}has(o){return this.init(),this.map.has(o)}get(o){this.init();const a=this.map.get(o);return a?a[0]:null}getAll(o){return this.init(),this.map.get(o)||null}keys(){return this.init(),Array.from(this.map.keys())}append(o,a){return this.clone({param:o,value:a,op:"a"})}appendAll(o){const a=[];return Object.keys(o).forEach(c=>{const u=o[c];Array.isArray(u)?u.forEach(h=>{a.push({param:c,value:h,op:"a"})}):a.push({param:c,value:u,op:"a"})}),this.clone(a)}set(o,a){return this.clone({param:o,value:a,op:"s"})}delete(o,a){return this.clone({param:o,value:a,op:"d"})}toString(){return this.init(),this.keys().map(o=>{const a=this.encoder.encodeKey(o);return this.map.get(o).map(c=>a+"="+this.encoder.encodeValue(c)).join("&")}).filter(o=>""!==o).join("&")}clone(o){const a=new Of({encoder:this.encoder});return a.cloneFrom=this.cloneFrom||this,a.updates=(this.updates||[]).concat(o),a}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(o=>this.map.set(o,this.cloneFrom.map.get(o))),this.updates.forEach(o=>{switch(o.op){case"a":case"s":const a=("a"===o.op?this.map.get(o.param):void 0)||[];a.push(kle(o.value)),this.map.set(o.param,a);break;case"d":if(void 0===o.value){this.map.delete(o.param);break}{let c=this.map.get(o.param)||[];const u=c.indexOf(kle(o.value));-1!==u&&c.splice(u,1),c.length>0?this.map.set(o.param,c):this.map.delete(o.param)}}}),this.cloneFrom=this.updates=null)}}class Eqe{constructor(){this.map=new Map}set(o,a){return this.map.set(o,a),this}get(o){return this.map.has(o)||this.map.set(o,o.defaultValue()),this.map.get(o)}delete(o){return this.map.delete(o),this}has(o){return this.map.has(o)}keys(){return this.map.keys()}}function Mle(l){return"undefined"!=typeof ArrayBuffer&&l instanceof ArrayBuffer}function Ele(l){return"undefined"!=typeof Blob&&l instanceof Blob}function Ale(l){return"undefined"!=typeof FormData&&l instanceof FormData}class kS{constructor(o,a,c,u){let h;if(this.url=a,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=o.toUpperCase(),function Aqe(l){switch(l){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||u?(this.body=void 0!==c?c:null,h=u):h=c,h&&(this.reportProgress=!!h.reportProgress,this.withCredentials=!!h.withCredentials,h.responseType&&(this.responseType=h.responseType),h.headers&&(this.headers=h.headers),h.context&&(this.context=h.context),h.params&&(this.params=h.params)),this.headers||(this.headers=new Tf),this.context||(this.context=new Eqe),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=a;else{const f=a.indexOf("?");this.urlWithParams=a+(-1===f?"?":f<a.length-1?"&":"")+d}}else this.params=new Of,this.urlWithParams=a}serializeBody(){return null===this.body?null:Mle(this.body)||Ele(this.body)||Ale(this.body)||function Iqe(l){return"undefined"!=typeof URLSearchParams&&l instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Of?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ale(this.body)?null:Ele(this.body)?this.body.type||null:Mle(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Of?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(o={}){var a;const c=o.method||this.method,u=o.url||this.url,h=o.responseType||this.responseType,d=void 0!==o.body?o.body:this.body,f=void 0!==o.withCredentials?o.withCredentials:this.withCredentials,p=void 0!==o.reportProgress?o.reportProgress:this.reportProgress;let g=o.headers||this.headers,m=o.params||this.params;const v=null!==(a=o.context)&&void 0!==a?a:this.context;return void 0!==o.setHeaders&&(g=Object.keys(o.setHeaders).reduce((y,_)=>y.set(_,o.setHeaders[_]),g)),o.setParams&&(m=Object.keys(o.setParams).reduce((y,_)=>y.set(_,o.setParams[_]),m)),new kS(c,u,d,{params:m,headers:g,context:v,reportProgress:p,responseType:h,withCredentials:f})}}var so=(()=>((so=so||{})[so.Sent=0]="Sent",so[so.UploadProgress=1]="UploadProgress",so[so.ResponseHeader=2]="ResponseHeader",so[so.DownloadProgress=3]="DownloadProgress",so[so.Response=4]="Response",so[so.User=5]="User",so))();class hV{constructor(o,a=200,c="OK"){this.headers=o.headers||new Tf,this.status=void 0!==o.status?o.status:a,this.statusText=o.statusText||c,this.url=o.url||null,this.ok=this.status>=200&&this.status<300}}class dV extends hV{constructor(o={}){super(o),this.type=so.ResponseHeader}clone(o={}){return new dV({headers:o.headers||this.headers,status:void 0!==o.status?o.status:this.status,statusText:o.statusText||this.statusText,url:o.url||this.url||void 0})}}class NM extends hV{constructor(o={}){super(o),this.type=so.Response,this.body=void 0!==o.body?o.body:null}clone(o={}){return new NM({body:void 0!==o.body?o.body:this.body,headers:o.headers||this.headers,status:void 0!==o.status?o.status:this.status,statusText:o.statusText||this.statusText,url:o.url||this.url||void 0})}}class Ile extends hV{constructor(o){super(o,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${o.url||"(unknown url)"}`:`Http failure response for ${o.url||"(unknown url)"}: ${o.status} ${o.statusText}`,this.error=o.error||null}}function fV(l,o){return{body:o,headers:l.headers,context:l.context,observe:l.observe,params:l.params,reportProgress:l.reportProgress,responseType:l.responseType,withCredentials:l.withCredentials}}let sd=(()=>{class l{constructor(a){this.handler=a}request(a,c,u={}){let h;if(a instanceof kS)h=a;else{let p,g;p=u.headers instanceof Tf?u.headers:new Tf(u.headers),u.params&&(g=u.params instanceof Of?u.params:new Of({fromObject:u.params})),h=new kS(a,c,void 0!==u.body?u.body:null,{headers:p,context:u.context,params:g,reportProgress:u.reportProgress,responseType:u.responseType||"json",withCredentials:u.withCredentials})}const d=li(h).pipe(Jv(p=>this.handler.handle(p)));if(a instanceof kS||"events"===u.observe)return d;const f=d.pipe($s(p=>p instanceof NM));switch(u.observe||"body"){case"body":switch(h.responseType){case"arraybuffer":return f.pipe(fn(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return f.pipe(fn(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return f.pipe(fn(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return f.pipe(fn(p=>p.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${u.observe}}`)}}delete(a,c={}){return this.request("DELETE",a,c)}get(a,c={}){return this.request("GET",a,c)}head(a,c={}){return this.request("HEAD",a,c)}jsonp(a,c){return this.request("JSONP",a,{params:(new Of).append(c,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(a,c={}){return this.request("OPTIONS",a,c)}patch(a,c,u={}){return this.request("PATCH",a,fV(u,c))}post(a,c,u={}){return this.request("POST",a,fV(u,c))}put(a,c,u={}){return this.request("PUT",a,fV(u,c))}}return l.\u0275fac=function(a){return new(a||l)(Ae(Tle))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class Ple{constructor(o,a){this.next=o,this.interceptor=a}handle(o){return this.interceptor.intercept(o,this.next)}}const pV=new Zn("HTTP_INTERCEPTORS");let Pqe=(()=>{class l{intercept(a,c){return c.handle(a)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();const Rqe=/^\)\]\}',?\n/;let Rle=(()=>{class l{constructor(a){this.xhrFactory=a}handle(a){if("JSONP"===a.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new xn(c=>{const u=this.xhrFactory.build();if(u.open(a.method,a.urlWithParams),a.withCredentials&&(u.withCredentials=!0),a.headers.forEach((_,b)=>u.setRequestHeader(_,b.join(","))),a.headers.has("Accept")||u.setRequestHeader("Accept","application/json, text/plain, */*"),!a.headers.has("Content-Type")){const _=a.detectContentTypeHeader();null!==_&&u.setRequestHeader("Content-Type",_)}if(a.responseType){const _=a.responseType.toLowerCase();u.responseType="json"!==_?_:"text"}const h=a.serializeBody();let d=null;const f=()=>{if(null!==d)return d;const _=1223===u.status?204:u.status,b=u.statusText||"OK",C=new Tf(u.getAllResponseHeaders()),x=function Fqe(l){return"responseURL"in l&&l.responseURL?l.responseURL:/^X-Request-URL:/m.test(l.getAllResponseHeaders())?l.getResponseHeader("X-Request-URL"):null}(u)||a.url;return d=new dV({headers:C,status:_,statusText:b,url:x}),d},p=()=>{let{headers:_,status:b,statusText:C,url:x}=f(),S=null;204!==b&&(S=void 0===u.response?u.responseText:u.response),0===b&&(b=S?200:0);let w=b>=200&&b<300;if("json"===a.responseType&&"string"==typeof S){const O=S;S=S.replace(Rqe,"");try{S=""!==S?JSON.parse(S):null}catch(T){S=O,w&&(w=!1,S={error:T,text:S})}}w?(c.next(new NM({body:S,headers:_,status:b,statusText:C,url:x||void 0})),c.complete()):c.error(new Ile({error:S,headers:_,status:b,statusText:C,url:x||void 0}))},g=_=>{const{url:b}=f(),C=new Ile({error:_,status:u.status||0,statusText:u.statusText||"Unknown Error",url:b||void 0});c.error(C)};let m=!1;const v=_=>{m||(c.next(f()),m=!0);let b={type:so.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(b.total=_.total),"text"===a.responseType&&!!u.responseText&&(b.partialText=u.responseText),c.next(b)},y=_=>{let b={type:so.UploadProgress,loaded:_.loaded};_.lengthComputable&&(b.total=_.total),c.next(b)};return u.addEventListener("load",p),u.addEventListener("error",g),u.addEventListener("timeout",g),u.addEventListener("abort",g),a.reportProgress&&(u.addEventListener("progress",v),null!==h&&u.upload&&u.upload.addEventListener("progress",y)),u.send(h),c.next({type:so.Sent}),()=>{u.removeEventListener("error",g),u.removeEventListener("abort",g),u.removeEventListener("load",p),u.removeEventListener("timeout",g),a.reportProgress&&(u.removeEventListener("progress",v),null!==h&&u.upload&&u.upload.removeEventListener("progress",y)),u.readyState!==u.DONE&&u.abort()}})}}return l.\u0275fac=function(a){return new(a||l)(Ae(_Z))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();const gV=new Zn("XSRF_COOKIE_NAME"),mV=new Zn("XSRF_HEADER_NAME");class Fle{}let Nqe=(()=>{class l{constructor(a,c,u){this.doc=a,this.platform=c,this.cookieName=u,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const a=this.doc.cookie||"";return a!==this.lastCookieString&&(this.parseCount++,this.lastToken=hZ(a,this.cookieName),this.lastCookieString=a),this.lastToken}}return l.\u0275fac=function(a){return new(a||l)(Ae(is),Ae(ns),Ae(gV))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),vV=(()=>{class l{constructor(a,c){this.tokenService=a,this.headerName=c}intercept(a,c){const u=a.url.toLowerCase();if("GET"===a.method||"HEAD"===a.method||u.startsWith("http://")||u.startsWith("https://"))return c.handle(a);const h=this.tokenService.getToken();return null!==h&&!a.headers.has(this.headerName)&&(a=a.clone({headers:a.headers.set(this.headerName,h)})),c.handle(a)}}return l.\u0275fac=function(a){return new(a||l)(Ae(Fle),Ae(mV))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),Lqe=(()=>{class l{constructor(a,c){this.backend=a,this.injector=c,this.chain=null}handle(a){if(null===this.chain){const c=this.injector.get(pV,[]);this.chain=c.reduceRight((u,h)=>new Ple(u,h),this.backend)}return this.chain.handle(a)}}return l.\u0275fac=function(a){return new(a||l)(Ae(Ole),Ae(gr))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),Bqe=(()=>{class l{static disable(){return{ngModule:l,providers:[{provide:vV,useClass:Pqe}]}}static withOptions(a={}){return{ngModule:l,providers:[a.cookieName?{provide:gV,useValue:a.cookieName}:[],a.headerName?{provide:mV,useValue:a.headerName}:[]]}}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({providers:[vV,{provide:pV,useExisting:vV,multi:!0},{provide:Fle,useClass:Nqe},{provide:gV,useValue:"XSRF-TOKEN"},{provide:mV,useValue:"X-XSRF-TOKEN"}]}),l})(),Vqe=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({providers:[sd,{provide:Tle,useClass:Lqe},Rle,{provide:Ole,useExisting:Rle}],imports:[[Bqe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),l})(),Nle=(()=>{class l{constructor(a,c){this.http=a,this.config=c,this.restPoint="/settings"}getRestPoint(a,c){return kr.merge(kr.merge(c||this.config.serviceAPIHost,this.restPoint),a)}handleError(a,c){return Ni.handleError(a,c)}findKey(a,c){const u={_id:0,key:a,value:""};this.http.post(this.getRestPoint("/find",null),u,{}).pipe(rr(this.handleError)).subscribe({next:d=>{Ni.callOnDone(c,Zp.create(d))},error:d=>{Ni.callOnDone(c,null)}})}insertKey(a,c){this.http.post(this.getRestPoint("/insert",null),a,{}).pipe(rr(this.handleError)).subscribe({next:h=>{Ni.callOnDone(c,Zp.create(h))},error:h=>{Ni.callOnDone(c,null)}})}updateKey(a,c){this.http.post(this.getRestPoint("/update",null),a,{}).pipe(rr(this.handleError)).subscribe({next:h=>{Ni.callOnDone(c,Zp.create(h))},error:h=>{Ni.callOnDone(c,null)}})}}return l.\u0275fac=function(a){return new(a||l)(Ae(sd),Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),Lle=(()=>{class l{constructor(a){this.config=a,this.kvs=null,this.localStorageName="",this.localStorageName=a.serviceAPIHost+"KVSvc"}checkOrloadData(){if(this.kvs)return;const a=localStorage.getItem(this.localStorageName);if(a)try{this.kvs=JSON.parse(a)}catch(c){}this.kvs||(this.kvs={})}saveData(){const a=JSON.stringify(this.kvs);localStorage.setItem(this.localStorageName,a)}findKey(a,c){this.checkOrloadData();const u=this.kvs[a],h=null!=u;return this.config.post(()=>{Ni.callOnDone(c,new Zp(h,h?null:"Not found",h?new th(-1,a,u):null))}),u}insertKey(a,c){this.checkOrloadData(),this.kvs[a.key]=a.value,this.saveData(),this.config.post(()=>{Ni.callOnDone(c,new Zp(!0,null,a))})}updateKey(a,c){this.checkOrloadData(),this.kvs[a.key]=a.value,this.saveData(),this.config.post(()=>{Ni.callOnDone(c,new Zp(!0,null,a))})}}return l.\u0275fac=function(a){return new(a||l)(Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),yV=(()=>{class l{constructor(a,c,u){this.kvRest=a,this.kvMemory=c,this.config=u,this.kv=null,this.config.isMemoryServerType()&&(this.kv=this.kvMemory),(null==this.kv||this.config.isRestServerType())&&(this.kv=this.kvRest)}findKey(a,c){this.kv.findKey(a,c)}insertKey(a,c){this.kv.insertKey(a,c)}updateKey(a,c){this.kv.updateKey(a,c)}}return l.\u0275fac=function(a){return new(a||l)(Ae(Nle),Ae(Lle),Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class _V{constructor(o,a){this.name=o,this.value=a}equalsTo(o){return this.name==o.name&&this.value==o.value}static cloneFrom(o){return new _V(o.name,o.value)}}var jt=(()=>(function(l){l[l.Number=0]="Number",l[l.String=1]="String",l[l.Boolean=2]="Boolean"}(jt||(jt={})),jt))();class hn{constructor(o,a,c,u,h,d){this.name=o,this.description=a,this.type=c,this.cfg=u,this.saver=h,this.defaultValue=d}static uiTypeToString(o){return["Number","String","Boolean"][o]}static builder(){return new hn("","",jt.String,()=>null,()=>{},null)}setName(o){return this.name=o,this}setDescription(o){return this.description=o,this}setType(o){return this.type=o,this}setDefaultValue(o){return this.defaultValue=o,this}setCfg(o){return this.cfg=o,this}setSaver(o){return this.saver=o,this}get stype(){return hn.uiTypeToString(this.type)}init(){let o=this.cfg();return null==o[this.name]&&(o[this.name]=this.defaultValue),this}getStringValue(){if(this.type!==jt.String)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);return this.cfg()[this.name]}getAndVerifyStringValue(o=null,a=""){let c=null==o?this.cfg():o;if(this.type!==jt.String)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);let u=c[this.name];return("string"!=typeof u||null==u)&&(u=null==a?null==this.defaultValue?"":this.defaultValue:a),u}getNumberValue(){if(this.type!==jt.Number)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);return this.cfg()[this.name]}getAndVerifyNumberValue(o=null,a=0){let c=null==o?this.cfg():o;if(this.type!==jt.Number)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);let u=c[this.name];return("number"!=typeof u||null==u)&&(u=null==a?null==this.defaultValue?0:this.defaultValue:a),u}getBooleanValue(){if(this.type!==jt.Boolean)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0443\u043b\u0435\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);return this.cfg()[this.name]}getAndVerifyBooleanValue(o=null,a=0){let c=null==o?this.cfg():o;if(this.type!==jt.Boolean)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0443\u043b\u0435\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);let u=c[this.name];return("boolean"!=typeof u||null==u)&&(u=null==a?null!=this.defaultValue&&this.defaultValue:a),u}getAndVerifyValue(o=null,a=null){let c=null;switch(this.type){case jt.String:c=this.getAndVerifyStringValue(o,a);break;case jt.Number:c=this.getAndVerifyNumberValue(o,a);break;case jt.Boolean:c=this.getAndVerifyBooleanValue(o,a);break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u044b\u043d\u0439 \u0442\u0438\u043f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f: ${this.stype}.`)}return c}setStringValue(o){if(this.type!==jt.String)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0442\u0438\u043f \u0442\u0438\u043f\u0443: ${this.stype}.`);this.cfg()[this.name]=o,this.save()}setNumberValue(o){if(this.type!==jt.Number)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439 \u0442\u0438\u043f \u0442\u0438\u043f\u0443: ${this.stype}.`);this.cfg()[this.name]=o,this.save()}setBooleanValue(o){if(this.type!==jt.Boolean)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0431\u0443\u043b\u0435\u0432\u044b\u0439 \u0442\u0438\u043f \u0442\u0438\u043f\u0443: ${this.stype}.`);this.cfg()[this.name]=o,this.save()}setValue(o,a=null){return(null==a?this.cfg():a)[this.name]=o,null==a&&this.save(),this}get rawValue(){let o=this.cfg()[this.name];return null==o&&(this.cfg()[this.name]=this.defaultValue,o=this.cfg()[this.name]),o}set rawValue(o){this.cfg()[this.name]=o,this.save()}save(){this.saver&&this.saver()}}class zqe{constructor(){this.lastLoginApp=hn.builder().setType(jt.String).setDescription("\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435").setDefaultValue(""),this.defaultAppRoute=hn.builder().setType(jt.String).setDescription("\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e").setDefaultValue(""),this.stopServiceFlag=hn.builder().setType(jt.Boolean).setDescription("\u0412\u044b\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441").setDefaultValue(!0),this.autoDownloadAudioFiles=hn.builder().setType(jt.Boolean).setDescription("\u041a\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0443\u0434\u0438\u043e").setDefaultValue(!1),this.parallel=hn.builder().setType(jt.Boolean).setDescription("\u041f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u043a\u0430\u0437").setDefaultValue(!0),this.fineText=hn.builder().setType(jt.Boolean).setDescription("\u0420\u0430\u0441\u0442\u044f\u0433\u0438\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442").setDefaultValue(!0),this.lineBreaks=hn.builder().setType(jt.Boolean).setDescription("\u0420\u0430\u0437\u0440\u044b\u0432\u044b \u0441\u0442\u0440\u043e\u043a").setDefaultValue(!0),this.coloredTranslations=hn.builder().setType(jt.Boolean).setDescription("\u0426\u0432\u0435\u0442\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u043e\u0432").setDefaultValue(!0),this.fontSize=hn.builder().setType(jt.String).setDescription("\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430").setDefaultValue("0"),this.visitedBooksHelp=hn.builder().setType(jt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u043d\u0438\u0433").setDefaultValue(""),this.visitedMemorialHelp=hn.builder().setType(jt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430").setDefaultValue(""),this.visitedCalculatorHelp=hn.builder().setType(jt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430").setDefaultValue(""),this.visitedCalendarHelp=hn.builder().setType(jt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044f").setDefaultValue(""),this.visitedCompilerHelp=hn.builder().setType(jt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440\u0430").setDefaultValue(""),this.visitedSchedulerHelp=hn.builder().setType(jt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue(""),this.currentBook=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.currentBookName=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0438\u043c\u044f \u043a\u043d\u0438\u0433\u0438").setDefaultValue(""),this.currentBookLink=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043a\u043d\u0438\u0433\u0438").setDefaultValue(""),this.currentChapter=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.currentLanguages=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u044f\u0437\u044b\u043a\u0438").setDefaultValue(""),this.bookmarks=hn.builder().setType(jt.String).setDescription("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setDefaultValue(""),this.currentMemorial=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setDefaultValue(""),this.currentMemorialPage=hn.builder().setType(jt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430").setDefaultValue(1),this.currentMemorialPsalom=hn.builder().setType(jt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u0441\u0430\u043b\u043e\u043c").setDefaultValue(0),this.memorialChapterRequested=hn.builder().setType(jt.Number).setDescription("\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0439 \u043f\u0441\u0430\u043b\u043e\u043c").setDefaultValue(-1),this.memorialPageSize=hn.builder().setType(jt.String).setDescription("\u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b").setDefaultValue("30"),this.sortPersonsPriests=hn.builder().setType(jt.Boolean).setDescription("\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0438\u043f\u044b \u0438\u043c\u0451\u043d").setDefaultValue(!1),this.sortPersonsNames=hn.builder().setType(jt.Boolean).setDescription("\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043c\u0435\u043d\u0430").setDefaultValue(!1),this.memorialVerticalView=hn.builder().setType(jt.Boolean).setDescription("\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0432\u0438\u0434").setDefaultValue(!1),this.mergeNameOnImport=hn.builder().setType(jt.Boolean).setDescription("\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c \u0438\u043c\u0435\u043d\u0430 \u043f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435").setDefaultValue(!1),this.showMolitvy=hn.builder().setType(jt.Boolean).setDescription("\u041f\u043e\u043a\u0430\u0437 \u043c\u043e\u043b\u0438\u0442\u0432").setDefaultValue(!0),this.addCommentToName=hn.builder().setType(jt.Boolean).setDescription("\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0432 \u0438\u043c\u044f").setDefaultValue(!0),this.currentOffset=hn.builder().setType(jt.Number).setDescription("\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435").setDefaultValue(0),this.currentPersonOffset=hn.builder().setType(jt.Number).setDescription("\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0441\u043e\u043d\u044b").setDefaultValue(1),this.memorialBook=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.memorialChapter=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.memorialLine=hn.builder().setType(jt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.memorialsTitleRemark=hn.builder().setType(jt.String).setDescription("\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0437\u0430\u043f\u0438\u0441\u043e\u043a").setDefaultValue(""),this.memorialSlava1Zdrav=hn.builder().setType(jt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 1 "\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"').setDefaultValue(!0),this.memorialSlava2Zdrav=hn.builder().setType(jt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 2 "\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"').setDefaultValue(!0),this.memorialSlava3Zdrav=hn.builder().setType(jt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 3 "\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"').setDefaultValue(!0),this.memorialSlava1Upok=hn.builder().setType(jt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 1 "\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"').setDefaultValue(!0),this.memorialSlava2Upok=hn.builder().setType(jt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 2 "\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"').setDefaultValue(!0),this.memorialSlava3Upok=hn.builder().setType(jt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 3 "\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"').setDefaultValue(!0),this.memorialPsaltir=hn.builder().setType(jt.Boolean).setDescription("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c").setDefaultValue(!0),this.showFacePage=hn.builder().setType(jt.Boolean).setDescription("\u041e\u0431\u043b\u043e\u0436\u043a\u0430").setDefaultValue(!1),this.memorialPrintAllBook=hn.builder().setType(jt.Boolean).setDescription("\u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0432\u0441\u044e \u043a\u043d\u0438\u0433\u0443").setDefaultValue(!1),this.audioValue=hn.builder().setType(jt.String).setDescription("\u0417\u0432\u0443\u043a\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435").setDefaultValue("1"),this.calculatorBook=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.calculatorChapter=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.calculatorLine=hn.builder().setType(jt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.calculatorFormulaText=hn.builder().setType(jt.String).setDescription("\u0424\u043e\u0440\u043c\u0443\u043b\u0430").setDefaultValue(""),this.calendarBook=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.calendarChapter=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.calendarLine=hn.builder().setType(jt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.calendarText=hn.builder().setType(jt.String).setDescription("\u0424\u043e\u0440\u043c\u0443\u043b\u0430").setDefaultValue(""),this.compilerBook=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.compilerChapter=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.compilerLine=hn.builder().setType(jt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.compilerSourceText=hn.builder().setType(jt.String).setDescription("\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a").setDefaultValue(""),this.schedulerBook=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.schedulerChapter=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.schedulerLine=hn.builder().setType(jt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.schedulerSourceText=hn.builder().setType(jt.String).setDescription("\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a").setDefaultValue(""),this.calendarCurrentDate=hn.builder().setType(jt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0434\u0430\u0442\u0430").setDefaultValue(""),this.schedulerCurrentSettingsName=hn.builder().setType(jt.String).setDescription("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue(""),this.schedulerText=hn.builder().setType(jt.String).setDescription("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setDefaultValue(""),this.schedulerAllVariants=hn.builder().setType(jt.String).setDescription("\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue(""),this.schedulerServices=hn.builder().setType(jt.String).setDescription("\u0421\u043b\u0443\u0436\u0431\u044b \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue(""),this.schedulerClerics=hn.builder().setType(jt.String).setDescription("\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue("")}}class Uqe{constructor(o){this.onChange=o,this.saveCfg={},this.metaCfg=new zqe,this.values=new Map,this.setup()}get ui(){return this.metaCfg}cloneSaveCfg(o){let a={};return this.values.forEach((c,u,h)=>{c.setValue(c.getAndVerifyValue(o,null),a)}),a}add(o){return this.values.set(o.name,o.setCfg(()=>this.saveCfg).setSaver(()=>this.save())),o.init(),this}setup(){for(let o in this.metaCfg)this.add(this.metaCfg[o].setName(o))}getByName(o){return this.values.get(o)}forceSave(){this.save()}save(){this.onChange&&this.onChange(JSON.stringify(this.saveCfg))}get readonly(){return!!pageRequestedReadonly}load(o){try{const a=JSON.parse(o);this.saveCfg=this.cloneSaveCfg(a)}catch(a){}}toString(){return JSON.stringify(this.saveCfg)}}class o0{constructor(o,a){this.enabled=o,this.onChange=a}static builder(){return new o0(!1,o=>o)}setEnabled(o,a=!0){return this.enabled=o,a&&this.onChange(this),this}setOnChange(o){return this.onChange=o,this}}class LM{constructor(o){this.settings=o}static builder(){return new LM([])}add(o){return this.settings.push(o.setOnChange(a=>this.resetOther(a))),this}resetOther(o){!o.enabled||this.settings.forEach(a=>{a!==o&&a.setEnabled(!1,!1)})}}class Gs{constructor(o){this.uiValue=o,this.oldRawValue=null}static builder(){return new Gs(null)}setUIValue(o){return this.uiValue=o,this}resetDetector(){return this.oldRawValue=null,this}checkAndUpdate(o=null){var a,c;let u=this.oldRawValue!==(null!=o?o:null===(a=this.uiValue)||void 0===a?void 0:a.rawValue);return this.oldRawValue=null!=o?o:null===(c=this.uiValue)||void 0===c?void 0:c.rawValue,u}}let Xn=(()=>{class l{constructor(a,c,u){this.themesService=a,this.kv=c,this.config=u,this.key="uiConfig20",this.keyKafizma="kafizmyOffset",this.keyBooks="booksLink",this.ready=!1,this.pui=new Uqe(h=>{this.save(h)}),this.appRoutesId=0,this.appRoutes=null,this.mainContainerEnabled=!1,this.appParams=new Map,this.check()}getAppParam(a,c={}){return this.appParams.has(a)||this.appParams.set(a,c),this.appParams.get(a)}enableMainContainer(a){return this.mainContainerEnabled=a,this}setAppRoutes(a){let c=this.appRoutes;this.appRoutes=a;let u=++this.appRoutesId,h=this;return{unsubscribe(){u==h.appRoutesId&&(h.appRoutes=c)}}}get ui(){return this.pui.ui}get readonly(){return this.pui.readonly}check(a,c=!1){!this.ready||c?this.kv.findKey(this.key,u=>{u&&u.success&&this.pui.load(u.item.value),this.ready=!0,this.applyServiceFlag(),a&&a()}):a&&a()}applyServiceFlag(){let a=window.ThemeHandler;if(a)try{a.requestStopServiceOnExitFlag&&a.requestStopServiceOnExitFlag(this.ui.stopServiceFlag.getBooleanValue())}catch(c){}}downloadAudioFile(a,c){let u=window.ThemeHandler;if(u)try{if(this.ui.autoDownloadAudioFiles.getBooleanValue()&&u.downloadAudioFile)return u.downloadAudioFile(a,c)}catch(h){}return""}getAudioTranslations(){let a=window.ThemeHandler;if(a)try{if(a.getAudioTranslations){let c=a.getAudioTranslations(),u=JSON.parse(c),h=[];for(let d=0;d<u.length;++d)h.push(_V.cloneFrom(u[d]));return h}}catch(c){}return[]}deleteAudioTranslation(a){let c=window.ThemeHandler;if(c)try{c.deleteAudioTranslation&&c.deleteAudioTranslation(a)}catch(u){}return""}setUIReady(){let a=window.UIHandler;if(a)try{a.onUIReady&&a.onUIReady(!0)}catch(c){}}save(a){if(this.readonly)return;const c=a||this.ui.toString(),u=th.of(this.key,c),h=g=>{};this.kv.findKey(this.key,g=>{g&&g.success?(u._id=g.item._id,this.kv.updateKey(u,h)):this.kv.insertKey(u,h),this.applyServiceFlag()});let f=()=>{if("books"!=this.config.getApplication().id)return;let g=this.ui.currentBookName.getStringValue(),m=this.ui.currentBookLink.getStringValue();if(!g)return;const y=th.of(this.keyBooks,JSON.stringify({link:m,name:g}));this.kv.findKey(this.keyBooks,_=>{_&&_.success&&_.item?(y._id=_.item._id,this.kv.updateKey(y,b=>{})):this.kv.insertKey(y,b=>{})})},p=()=>{if("memorial"!=this.config.getApplication().id)return;let g=this.ui.currentOffset.getNumberValue();g<0&&(g=this.ui.currentPersonOffset.getNumberValue());let m={offset:17,personOffset:g,theme:this.themesService.isAutoTheme()?0:this.themesService.isLight()?1:-1};const v=th.of(this.keyKafizma,JSON.stringify(m));this.kv.findKey(this.keyKafizma,y=>{y&&y.success&&y.item?(v._id=y.item._id,this.kv.updateKey(v,_=>{this.config.post(f,1)})):this.kv.insertKey(v,_=>{this.config.post(f,1)})})};switch(this.config.getApplication().id){case"books":f();break;case"memorial":p();break;case"d3examples":case"d3Dexamples":case"calculator":case"calendar":case"compiler":case"scheduler":case"about":break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f: ${this.config.getApplication().id}.`)}}static getKafizmNumberBy(a,c){if(c<0)return 0;const u=new Date,h=u.getTime()-6e4*u.getTimezoneOffset(),d=Math.floor(h/1e3),f=Math.floor(d/60),p=Math.floor(f/60);return(Math.floor(p/24)%20+a+c)%20+1}static getOffsetByKafizmNumber(a,c){if(c<=0)return-1;const u=new Date,h=u.getTime()-6e4*u.getTimezoneOffset(),d=Math.floor(h/1e3),f=Math.floor(d/60),p=Math.floor(f/60);let v=(Math.floor(p/24)%20+a+0)%20+1;return c>=v?c-v:c-v+20}}return l.\u0275fac=function(a){return new(a||l)(Ae(Mo),Ae(yV),Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class BM{static dtr(o,a){for(var c=a>=0?a:47,u=new ArrayBuffer(o.length-1),h=new Uint8Array(u),d=c,f=0;f<o.length;++f){var g=255&(o[f]^d);f>0&&(h[f-1]=g),d=255&(d+g^5)}return h}static fromByteArray(o){let a="";for(let c=0;c<o.length;c+=2)a+=String.fromCharCode(o[c+1]<<8|o[c]);return a}}let Df=(()=>{class l{constructor(a,c){this.http=a,this.config=c,this.relativeCacheService=!0,this.cache=new Map,this.cacheTextWaiting=new Map,this.cacheZip=null,this.loaded=!1,this.loading=!1,this.failOnCacheMiss=!1,this.requests=[],this.cache=c.cache,this.loaded=0!==this.cache.size}get coding(){return this.config.coding}get restPoint(){return this.coding?"/staticb":"/static"}getRestPoint(a,c,u=null){const h=this.relativeCacheService||this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return kr.merge(kr.merge(c||h,null!=u?u:this.restPoint),a)}getLinkTo(a,c){const u=this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return(c||u)+a}handleError(a,c){return Ni.handleError(a,c)}getText(a,c){this.loaded?this.getTextDirect(a,c):this.loading?this.requests.push(()=>{this.getTextDirect(a,c)}):this.startLoadingStatic(a,!0,c)}getBinary(a,c){this.loaded?this.zipLoadOrReturnFalse(a,!1,c)||this.getBlobRestcall(a,c):this.loading?this.requests.push(()=>{this.zipLoadOrReturnFalse(a,!1,c)}):this.startLoadingStatic(a,!1,c)}startLoadingStatic(a,c,u){this.loading=!0,this.getBlobRestcall("/static.zip",h=>{let d=()=>{this.loaded=!0,this.loading=!1,c?this.getTextDirect(a,u):this.zipLoadOrReturnFalse(a,c,u),this.requests.forEach(f=>{f()}),this.requests=[]};if(h){this.failOnCacheMiss=!0;let f=new Blob([new Uint8Array(h,0,h.byteLength)]);this.onLoadZipFile(f,d,()=>{this.cacheZip=null,this.failOnCacheMiss=!1,d()})}else this.failOnCacheMiss=!1,d()})}zipLoadOrReturnFalse(a,c,u){if(!this.cacheZip)return!1;let h=!1,d=a.startsWith("/")?a.substr(1):a,f=this.cacheZip.file(d);return f&&(h=!0,f.async(c?"string":"arraybuffer").then(p=>{Ni.callOnDone(u,p)}).catch(()=>{Ni.callOnDone(u,null)})),h}getTextDirect(a,c){if(!this.zipLoadOrReturnFalse(a,!0,c))if(this.cache.has(a)){const u=this.cache.get(a);setTimeout(()=>{Ni.callOnDone(c,u)},0)}else this.failOnCacheMiss?Ni.callOnDone(c,null):this.getTextRestcall(a,c)}getTextRestcall(a,c){let u=this.getRestPoint(a,null);return this.getTextRestcallUrl(u,c)}completeTextOnDone(a,c){let u=this.cacheTextWaiting.get(a);u&&(u.forEach(h=>{this.config.post(()=>{h&&h(c)})}),this.cacheTextWaiting.delete(a))}readArrayBufferToString(a,c){var u=new Blob([new Uint8Array(a)]),h=new FileReader;h.onload=function(d){var f;c&&c(null===(f=d.target)||void 0===f?void 0:f.result)},h.readAsText(u)}getTextRestcallUrl(a,c){return this.coding?this.getBlobRestcallUrl(a,u=>{if(u)if(a.endsWith(".txt")||a.endsWith(".xhtml")){let d=new Uint8Array(u),f=BM.fromByteArray(d);c&&c(f)}else this.readArrayBufferToString(u,c);else c&&c(null)}):this.getTextRestcallUrlRaw(a,c)}getTextRestcallUrlRaw(a,c){if(this.cache&&this.cache.has(a)){if(c){let u=this.cache.get(a);this.config.post(()=>{Ni.callOnDone(c,u)})}}else this.cacheTextWaiting.has(a)?c&&this.cacheTextWaiting.get(a).push(c):(c&&this.cacheTextWaiting.set(a,[c]),this.http.get(a,{responseType:"text"}).pipe(rr(this.handleError)).subscribe({next:u=>{u&&this.cache.set(a,u),this.completeTextOnDone(a,u)},error:u=>{this.completeTextOnDone(a,null)}}))}getBlobRestcall(a,c){return this.getBlobRestcallUrl(this.getRestPoint(a,null),c)}getBlobRestcallUrl(a,c){let u=a;if(this.coding){let h=u.lastIndexOf(".");h>=0&&(u=u.substring(0,h)+".bin")}return this.getBlobRestcallUrlRaw(u,h=>{if(h)if(this.coding){let d=new Uint8Array(h),f=BM.dtr(d,-1);c&&c(f)}else c&&c(h);else c&&c(null)})}getBlobRestcallUrlRaw(a,c){this.http.get(a,{responseType:"arraybuffer"}).pipe(rr(this.handleError)).subscribe(u=>{Ni.callOnDone(c,u)},u=>{Ni.callOnDone(c,null)})}save(){const a=new kM;a.file("version.txt","v.1.0"),this.cache.forEach((c,u,h)=>{a.file(u,c)}),a.generateAsync({type:"blob"}).then(c=>{new TextEncoder;const h=new Blob([c],{type:"octet/stream"}),f=`Static.Cache.${(new Date).toISOString().split("T")[0]}.zip`;wf.saveData(h,f)})}onLoadZipFile(a,c,u){const h=new FileReader;h.onload=d=>{const f=p=>{this.cacheZip=null,this.failOnCacheMiss=!1,c()};try{kM.loadAsync(h.result).then(p=>{this.cacheZip=p,c()}).catch(f)}catch(p){f()}},h.readAsArrayBuffer(a)}unpackZip(a,c){const u=this.cacheZip.file(/^.*$/);let h=0;u.forEach(d=>{d.async("string").then(f=>{this.cache.set((d.name.startsWith("/")?"":"/")+d.name,f),++h==u.length&&a()}).catch(c)})}}return l.\u0275fac=function(a){return new(a||l)(Ae(sd),Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class Qn{constructor(o,a,c,u,h,d){this.vId=o,this.vName=a,this.vDescription=c,this.vOffset=u,this.vLive=h,this.vTags=d,this.vDirty=!1,this.vPerson=null,this.vOnDirty=null}static isPriest(o){return Qn.getIndex(o)>0}static getIndex(o){const a=o.name.split(" ");if(a.length<=1)return-1;const c={"\u043f\u0430\u0442\u0440.":200,"\u0441\u0445\u0438\u043c\u0438\u0442\u0440.":100,"\u043c\u0438\u0442\u0440.":100,"\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0435\u043f.":97,"\u0430\u0440\u0445\u0438\u0435\u043f.":96,"\u0441\u0445\u0438\u0435\u043f.":95,"\u0435\u043f.":90,"\u0432\u0438\u043a.":89,"\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u043c.":81,"\u0430\u0440\u0445\u0438\u043c.":80,"\u043f\u0440\u043e\u0442\u043e\u043f\u0440.":75,"\u0441\u0445\u0438\u0438\u0433\u0443\u043c.":70,"\u0438\u0433\u0443\u043c.":70,"\u043f\u0440\u043e\u0442.":60,"\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u043c.":56,"\u0438\u0435\u0440\u043e\u043c.":55,"\u0438\u0435\u0440.":50,"\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0434.":48,"\u0430\u0440\u0445\u0438\u0434.":47,"\u043f\u0440\u043e\u0442\u043e\u0434\u0438\u0430\u043a.":46,"\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u0434.":45,"\u0438\u0435\u0440\u043e\u0434.":44,"\u0434\u0438\u0430\u043a.":43,"\u0441\u0445\u0438\u043c.":35,"\u043c\u043e\u043d.":30,"\u0438\u043d.":25,"\u0438\u043f\u043e\u0434\u0438\u0430\u043a.":20,"\u0447\u0442.":10};let u=0;return a.forEach(h=>{const d=c[h];void 0!==d&&u<d&&(u=d)}),u}static sort(o,a=!1,c=!0){Qn.sortPersons(o,u=>u,a,c)}static namesCompare(o,a){return Qn.trimPrefixes(o).localeCompare(Qn.trimPrefixes(a))}static trimPrefixes(o){return o.indexOf(".")>0&&(o=o),o.split(" ").filter(c=>!c.trim().endsWith(".")).join(" ")}static namesSortFunction(o){return(a,c)=>{let u=o(a),h=o(c);return Qn.namesCompare(u.name,h.name)}}static fullSortFunction(o,a=!0){return(c,u)=>{let h=o(c),d=o(u);if(h.live!==d.live)return h.live?-1:1;const f=Qn.getIndex(h),p=Qn.getIndex(d);if(f>0||p>0){let m=p-f;return 0==m&&a&&(m=Qn.namesCompare(h.name,d.name)),m}let g=0;return 0==g&&a&&(g=Qn.namesCompare(h.name,d.name)),0===g?0:g<0?-1:1}}static sortPersons(o,a,c=!1,u=!0){return u?o.sort(Qn.fullSortFunction(a,c)):c&&o.sort(Qn.namesSortFunction(a)),o}setOnDirty(o){return this.vOnDirty=o,this}revertDirty(){this.vPerson&&(this.vName=this.vPerson.name,this.vOffset=this.vPerson.offset,this.vDescription=this.vPerson.description,this.vLive=this.vPerson.live,this.vTags=this.vPerson.tags,this.vPerson=null),this.dirty=!1}clearDirty(){this.dirty=!1,this.vPerson=null}setDirty(){this.dirty=!0,null==this.vPerson&&(this.vPerson=new Qn(this._id,this.name,this.description,this.offset,this.live,this.tags))}onDirty(){this.vOnDirty&&this.vOnDirty(this)}get old(){return this.vPerson}get dirty(){return this.vDirty}set dirty(o){this.vDirty=o}get _id(){return this.vId}set _id(o){this.setDirty(),this.vId=o,this.onDirty()}get name(){return this.vName}set name(o){this.setDirty(),this.vName=o,this.onDirty()}get description(){return this.vDescription}set description(o){this.setDirty(),this.vDescription=o,this.onDirty()}get offset(){return this.vOffset}set offset(o){this.setDirty(),this.vOffset=o,this.onDirty()}get live(){return this.vLive}set live(o){this.setDirty(),this.vLive=o,this.onDirty()}get tags(){return this.vTags}set tags(o){this.setDirty(),this.vTags=o,this.onDirty()}get kafizma(){return Xn.getKafizmNumberBy(17,this.offset)}}class k_{constructor(o){this.items=o,this.handler=null,this.handlerNewPerson=null,this.handlerDeletePerson=null}clone(){let o=new k_([...this.items]);return o.handler=this.handler,o.handlerNewPerson=this.handlerNewPerson,o.handlerDeletePerson=this.handlerDeletePerson,o}setOnDirty(o){return this.handler=o,this.items.forEach(a=>{a.setOnDirty(o)}),this}setNewPersonHandler(o){return this.handlerNewPerson=o,this}setDeletePersonHandler(o){return this.handlerDeletePerson=o,this}newPerson(o,a){if(!this.handlerNewPerson)throw new Error("handlerNewPerson is null.");return this.handlerNewPerson(o,a)}deletePerson(o,a){if(!this.handlerDeletePerson)throw new Error("handlerDeletePerson is null.");return this.handlerDeletePerson(o)}}class xV{constructor(o,a,c,u,h,d){this._id=o,this.name=a,this.description=c,this.offset=u,this.live=h,this.tags=d}}class gc{constructor(o,a){this.success=o,this.error=a}static builder(){return new gc(!1,"")}setSuccess(o){return this.success=o,this}setError(o){return this.error=o,this}}class CV{constructor(o,a,c){this.success=o,this.error=a,this.fileName=c}static builder(){return new CV(!1,"","")}setSuccess(o){return this.success=o,this}setError(o){return this.error=o,this}setFileName(o){return this.fileName=o,this}}class SV{constructor(o,a){this.success=o,this.text=a}static builder(){return new SV(!1,"")}setSuccess(o){return this.success=o,this}setText(o){return this.text=o,this}}class wV{constructor(o){this.items=o}static toPersons(o,a,c,u){const h=[];return o.items.forEach(d=>{h.push(new Qn(d._id,d.name,d.description,d.offset,!!d.live,d.tags))}),new k_(h).setOnDirty(a).setNewPersonHandler(c).setDeletePersonHandler(u)}}class Hqe{constructor(o,a,c,u,h,d,f){this.memkey=o,this.id=a,this.name=c,this.description=u,this.offset=h,this.live=d,this.tags=f}}let Ko=(()=>{class l{constructor(){this.intersectTagsMap=new Map,this.tagsHasFlagMap=new Map}static tagsHasFlag(a,c){const u=a.split(",");let h=!1;return u.forEach(d=>{d===c&&(h=!0)}),h}static addTagToTags(a,c){const u=a.split(","),h=[];let d=!1;return u.forEach(f=>{f!==c?f&&h.push(f):d=!0}),d||h.push(c),h.join(",")}static removeModificators(a){const c=a.split(","),u="\u0421\u043b\u0430\u0432\u0430 1,\u0421\u043b\u0430\u0432\u0430 2,\u0421\u043b\u0430\u0432\u0430 3,\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439".split(",");let h=[];return c.forEach(d=>{u.findIndex(f=>f===d)<0&&h.push(d)}),h.join(",")}static removeTag(a,c){const u=a.split(",");let h=[];return u.forEach(d=>{d!=c&&h.push(d)}),h.join(",")}static intersectTags(a,c){let h=c;return a.split(",").filter(f=>l.tagsHasFlag(h,f)).join(",")}intersectTags(a,c){let u=this.intersectTagsMap.get(a);if(u){let d=u.get(c);if(null!=d)return d}let h=l.intersectTags(a,c);return u||(u=new Map,this.intersectTagsMap.set(a,u)),u.set(c,h),h}tagsHasFlag(a,c){let u=this.tagsHasFlagMap.get(a);if(u){let d=u.get(c);if(null!=d)return d}let h=l.tagsHasFlag(a,c);return u||(u=new Map,this.tagsHasFlagMap.set(a,u)),u.set(c,h),h}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),Ble=(()=>{class l{constructor(a,c){this.http=a,this.config=c,this.persons=[],this.restPoint="/kafizmy",this.canSave=null,this.personSaved=new wt,this.personsSubscribersMap=new Map}setCanSave(a){this.canSave=a}getRestPoint(a,c){return kr.merge(kr.merge(c||this.config.serviceAPIHost,this.restPoint),a)}getRestPointRaw(a,c){return kr.merge(c||this.config.serviceAPIHost,a)}getAllPromise(a,c){let u=c||-1;const h=this.personsSubscribersMap.has(u);h||this.personsSubscribersMap.set(u,[]);const d=this.personsSubscribersMap.get(u);if(h)d.push(a);else{d.push(a);{const f=null!=u&&(u>=0||-1===u),p={params:{_memkey:""+u}},g={params:{}};this.http.get(this.getRestPoint(f?"/mempersons":"/persons",null),f?p:g).pipe(rr(Ni.handleError)).subscribe({next:m=>{const v=this.personsSubscribersMap.get(u);null!=v&&(v.forEach(y=>{y(wV.toPersons(m,_=>{},(_,b)=>{this.newPerson(u,new Qn(-1,_.name,_.description,_.offset,_.live,_.tags)).then(C=>{b&&b(C)},C=>{b&&b(gc.builder().setSuccess(!1).setError(C))})},_=>{this.deletePerson(u,_)}),null)}),this.personsSubscribersMap.delete(u))},error:m=>{const v=this.personsSubscribersMap.get(u);null!=v&&(v.forEach(y=>{y(null,m)}),this.personsSubscribersMap.delete(u))}})}}}getAll(){return new Promise((a,c)=>{this.getAllPromise((u,h)=>{u?a(u):c(h)})})}getPersons(a){return new Promise((c,u)=>{this.getAllPromise((h,d)=>{h?c(h):u(d)},a)})}save(a,c,u){if(!u&&this.canSave&&!this.canSave(c))return new Promise((d,f)=>{this.config.post(()=>{d(gc.builder().setSuccess(!0))})});const h={params:{__id:""+c._id,_memkey:""+a,_name:c.old.name,_description:c.old.description,_offset:""+c.old.offset,_live:c.old.live?"1":"0",_newName:c.name,_newDescription:c.description,_newOffset:""+c.offset,_newLive:c.live?"1":"0",_tags:c.tags}};return new Promise((d,f)=>{this.http.get(this.getRestPoint("/updatePerson",null),h).pipe(rr(Ni.handleError)).subscribe({next:p=>{d(p)},error:p=>{f(""+p)}}),c.clearDirty(),this.personSaved.emit(c)})}newPerson(a,c){const u={params:{_memkey:""+a,_name:c.name,_description:c.description,_offset:""+c.offset,_live:c.live?"1":"0",_tags:c.tags}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/addPerson",null),u).pipe(rr(Ni.handleError)).subscribe({next:f=>{h(f)},error:f=>{d(""+f)}}),c.clearDirty()})}newPersons(a){let u=[];a.forEach(f=>{u.push((f=>({memkey:f.memkey,name:f.name,description:f.description,offset:f.offset,live:f.live?1:0,tags:f.tags}))(f))});let h={persons:u};const d={params:{}};return new Promise((f,p)=>{this.http.post(this.getRestPoint("/addPersons",null),h,d).pipe(rr(Ni.handleError)).subscribe({next:g=>{f(g)},error:g=>{p(""+g)}})})}deletePerson(a,c){const u={params:{_personId:""+c._id}};this.http.get(this.getRestPoint("/deletePersonById",null),u).pipe(rr(Ni.handleError)).subscribe(h=>{},h=>{}),c.clearDirty()}deletePersons(a,c){const u={};let h=[];return a.forEach(d=>{h.push(d._id)}),new Promise((d,f)=>{this.http.post(this.getRestPoint("/deletePersons",null),{ids:h},u).pipe(rr(Ni.handleError)).subscribe({next:p=>{d(p)},error:p=>{f(""+p)}})})}deleteAll(a){const c=null!=a&&a>=0,u={params:{_memkey:""+a}},h={params:{}};return new Promise((d,f)=>{this.http.get(this.getRestPoint(c?"/deleteMemorialPersons":"/deleteAllPersons",null),c?u:h).pipe(rr(Ni.handleError)).subscribe({next:p=>{d(p)},error:p=>{f(""+p)}})})}addTempFile(a,c){const u={params:{_name:a}};return new Promise((h,d)=>{this.http.post(this.getRestPoint("/addFile",null),c,u).pipe(rr(Ni.handleError)).subscribe({next:f=>{h(CV.builder().setSuccess(!0).setFileName(this.getRestPointRaw("/temp/"+a,null)))},error:f=>{d(null)}})})}}return l.\u0275fac=function(a){return new(a||l)(Ae(sd),Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class kf{constructor(){this.result=!1,this.errors=""}static build(){return new kf}setResult(o){return this.result=o,this}setErrors(o){return this.errors=o,this}}class TV{constructor(){this.valid=!1,this.added=!1,this.authId="noId"}static build(){return new TV}setValid(o){return this.valid=o,this}setAdded(o){return this.added=o,this}setAuthId(o){return this.authId=o,this}}class OV{constructor(){this.errors="",this.result=!1,this.status=""}static build(){return new OV}setResult(o){return this.result=o,this}setErrors(o){return this.errors=o,this}setStatus(o){return this.status=o,this}}class MS{constructor(o,a,c){this.username=o,this.password=a,this.authId=c}static clone(o){return new MS(o.username,o.password,o.authId)}static cloneArray(o){const a=[];return o.forEach(c=>{a.push(MS.clone(c))}),a}}let ES=(()=>{class l{constructor(a){this.config=a,this.bLoggedIn=!1,this.participants=[],this.nextNewAuthId=1,this.localStorageName="",this.localStorageName=a.serviceAPIHost+"AuthSvc",this.loadData()}loadData(){const a=localStorage.getItem(this.localStorageName);if(a)try{const c=JSON.parse(a);this.participants=MS.cloneArray(c)}catch(c){this.config.addAlert(Or.of("Error: "+c,"OK",10))}}saveData(){const a=JSON.stringify(this.participants);localStorage.setItem(this.localStorageName,a)}isLoggedIn(){return new Promise((a,c)=>{this.config.post(()=>{a(kf.build().setResult(this.bLoggedIn))})})}login(){return this.bLoggedIn=!0,new Promise((a,c)=>{this.config.post(()=>{a(kf.build().setResult(!0))})})}logout(){return this.bLoggedIn=!1,new Promise((a,c)=>{this.config.post(()=>{a(kf.build().setResult(!0))})})}handleError(a,c){return Ni.handleError(a,c)}requestForUser(a,c){const u=TV.build().setValid(!1);let h=!1;if(this.participants.forEach(d=>{d.username===a&&(h=!0,u.setValid(c===d.password),u.setAuthId(d.authId=this.newAuthId()),u.setAdded(!1))}),!h&&a){const d=new MS(a,c,this.newAuthId());this.participants.push(d),u.setValid(!0),u.setAuthId(d.authId),u.setAdded(!0)}return this.saveData(),new Promise((d,f)=>{this.config.post(()=>{d(u)})})}logoutAll(){this.participants.forEach(c=>{c.authId=""});const a=kf.build();return a.setErrors(""),a.setResult(!0),new Promise((c,u)=>{this.config.post(()=>{c(a)})})}requestVersion(){this.participants.forEach(c=>{c.authId=""});const a=OV.build();return a.setErrors(""),a.setResult(!0),a.setStatus("memory.version"),new Promise((c,u)=>{this.config.post(()=>{c(a)})})}newAuthId(){return"MAT"+this.nextNewAuthId++}getParticipant(a){let c=null;return this.participants.forEach(u=>{u.authId===a&&(c=u)}),c}}return l.\u0275fac=function(a){return new(a||l)(Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),DV=(()=>{class l{constructor(a,c){this.auth=a,this.config=c,this.memkey=-1,this.authedPersons=null,this.nextPersonId=1,this.localStorageName="",this.localStorageName=c.serviceAPIHost+"KafSvc"}getUserId(){const c=this.auth.getParticipant(this.config.authId);if(!c)throw new Error("\u041d\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.");return c.username}get persons(){const a=this.getUserId();return this.checkOrLoadData(),this.authedPersons[a]||(this.authedPersons[a]=new wV([])),this.authedPersons[a]}checkOrLoadData(){if(this.authedPersons)return;const a=localStorage.getItem(this.localStorageName);if(a)try{const c=JSON.parse(a);c&&(this.authedPersons=c)}catch(c){this.authedPersons={},this.config.addAlert(Or.of("Error: "+c,"OK",10))}else this.authedPersons={};this.nextPersonId=1,this.persons.items.forEach(c=>{c._id>this.nextPersonId&&(this.nextPersonId=c._id+1)})}getNextPersonId(){return++this.nextPersonId}saveData(){const a=JSON.stringify(this.authedPersons);localStorage.setItem(this.localStorageName,a)}deleteAll(a){return this.checkOrLoadData(),this.persons.items=[],this.saveData(),new Promise((c,u)=>{c(gc.builder().setSuccess(!0))})}deletePersons(a,c){return this.checkOrLoadData(),a.forEach(u=>{let h=this.persons.items.findIndex(d=>d._id===u._id);h>=0&&this.persons.items.splice(h,1)}),this.saveData(),new Promise((u,h)=>{u(gc.builder().setSuccess(!0))})}checkAndAddDefaultHramvkostino(){let a="hramvkostino";this.persons.items.findIndex(c=>c.tags.indexOf(a)>=0)<0&&(this.addDefaultHramvkostino(this.persons,a),this.saveData())}checkAndAddDefaultAuthors(){let a="\u0430\u0432\u0442\u043e\u0440\u044b";this.persons.items.findIndex(c=>c.tags.indexOf(a)>=0)<0&&(this.addDefaultAuthors(this.persons,a),this.saveData())}addDefaultHramvkostino(a,c="\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439"){const h="\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f|-1|true\n\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430|-1|true\n\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430|-1|true\n\u0438\u0435\u0440. \u0414\u0438\u043e\u043d\u0438\u0441\u0438\u044f|1|true\n\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430|-1|true\n\u0412\u0430\u043b\u0435\u0440\u0438\u044f|0|true\n\u0421\u0435\u0440\u0433\u0438\u044f|2|true\n\u041c\u0430\u0440\u0438\u0438|3|true\n\u0422\u0430\u0442\u0438\u0430\u043d\u044b|4|true\n\u0422\u0430\u0442\u0438\u0430\u043d\u044b|5|true\n\u0413\u0430\u043b\u0438\u043d\u044b|6|true\n\u041f\u0430\u0432\u043b\u0430|7|true\n\u041c\u0438\u0445\u0430\u0438\u043b\u0430|8|true\n\u0415\u043b\u0435\u043d\u044b|9|true\n\u0412\u0430\u043b\u0435\u0440\u0438\u044f|10|true\n\u041b\u044e\u0431\u043e\u0432\u0438|11|true\n\u041d\u0430\u0434\u0435\u0436\u0434\u044b|12|true\n\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430|13|true\n\u041b\u044e\u0434\u043c\u0438\u043b\u044b|14|true\n\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d\u0430|15|true\n\u041c\u0438\u0445\u0430\u0438\u043b\u0430|16|true\n\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430|17|true\n\u0410\u043d\u0434\u0440\u0435\u044f|18|true\n\u041c\u0430\u0440\u0438\u043d\u044b|19|true\n\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430|-1|false\n\u0412\u0438\u043a\u0442\u043e\u0440\u0430|-1|false\n\u0424\u043e\u0442\u0438\u043d\u0438\u0438|-1|false".split("\n"),d=c;h.forEach((f,p)=>{const g=f.trim().split("|");0!==g.length&&a.items.push(new xV(this.getNextPersonId(),g[0],"",+g[1],"true"===g[2],d))})}addDefaultAuthors(a,c="\u0430\u0432\u0442\u043e\u0440\u044b"){const h="\u0415\u0432\u0433\u0435\u043d\u0438\u044f|-1|true\n\u0410\u043d\u0434\u0440\u0435\u044f|-1|true".split("\n"),d=c;h.forEach((f,p)=>{const g=f.trim().split("|");0!==g.length&&a.items.push(new xV(this.getNextPersonId(),g[0],"",+g[1],"true"===g[2],d))})}getPersons(a){this.checkOrLoadData();const c=wV.toPersons(this.persons,u=>{},(u,h)=>{this.newPerson(this.memkey,new Qn(-1,u.name,u.description,u.offset,u.live,u.tags)).then(d=>{h&&h(d)},d=>{h&&h(gc.builder().setSuccess(!1).setError(""+d))})},(u,h)=>{this.deletePerson(this.memkey,u,h)});return new Promise((u,h)=>{this.config.post(()=>{u(c)})})}newPersons(a,c){return new Promise((u,h)=>{this.config.post(()=>{a.forEach(d=>{this.newPersonSync(d.memkey,new Qn(d.id,d.name,d.description,d.offset,d.live,d.tags),c)}),u(gc.builder().setSuccess(!0))},0)})}newPerson(a,c,u){return new Promise((h,d)=>{this.config.post(()=>{this.newPersonSync(a,c,u).then(f=>h(f))},0)})}newPersonSync(a,c,u){return this.checkOrLoadData(),this.persons.items.push(new xV(this.getNextPersonId(),c.name,c.description,c.offset,c.live,c.tags)),this.saveData(),new Promise((h,d)=>{h(gc.builder().setSuccess(!0))})}save(a,c,u,h){this.checkOrLoadData();let d=!1;return this.persons.items.forEach(f=>{f._id===c._id&&(f.name=c.name,f.description=c.description,f.tags=c.tags,f.offset=c.offset,f.live=c.live,d=!0)}),d&&this.saveData(),c.clearDirty(),h&&h(new gc(d,d?"OK":"Not found")),new Promise((f,p)=>{f(new gc(d,d?"OK":"Not found"))})}deletePerson(a,c,u){this.checkOrLoadData();const h=this.persons.items.findIndex(f=>f._id===c._id),d=h>=0;return d&&(this.persons.items.splice(h,1),this.saveData()),c.clearDirty(),u&&u(new gc(d,d?"OK":"Not found")),new Promise((f,p)=>{f(new gc(d,d?"OK":"Not found"))})}addTempFile(a,c){return new Promise((u,h)=>{this.config.post(()=>{h("\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f.")})})}}return l.\u0275fac=function(a){return new(a||l)(Ae(ES),Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class M_{constructor(o,a,c,u){this.vId=o,this.vName=a,this.vMode=c,this.vTags=u,this.vDirty=!1,this.vMemorial=null,this.vOnDirty=null,this.clazz={},this.clazzBadge={}}getOnDirty(){return this.vOnDirty}setOnDirty(o){return this.vOnDirty=o,this}revertDirty(){this.vMemorial&&(this.vName=this.vMemorial.name,this.vMode=this.vMemorial.mode,this.vMemorial=null),this.dirty=!1}clearDirty(){this.dirty=!1,this.vMemorial=null}setDirty(){this.dirty=!0,null==this.vMemorial&&(this.vMemorial=new M_(this._id,this.name,this.mode,this.tags))}onDirty(){this.vOnDirty&&this.vOnDirty(this)}get old(){return this.vMemorial}get dirty(){return this.vDirty}set dirty(o){this.vDirty=o}get _id(){return this.vId}set _id(o){this.setDirty(),this.vId=o,this.onDirty()}get name(){return this.vName}set name(o){this.setDirty(),this.vName=o,this.onDirty()}get mode(){return this.vMode}set mode(o){this.setDirty(),this.vMode=o,this.onDirty()}get tags(){return this.vTags}set tags(o){this.setDirty(),this.vTags=o,this.onDirty()}get enabled(){return"on"===this.mode}set enabled(o){this.mode=o?"on":"off"}}class Wqe{constructor(o){this.items=o,this.handler=null,this.handlerNewMemorial=null,this.handlerDeleteMemorial=null}setOnDirty(o){return this.handler=o,this.items.forEach(a=>{a.setOnDirty(o)}),this}setNewMemorialHandler(o){return this.handlerNewMemorial=o,this}addNewMemorialHandler(o){if(this.handlerNewMemorial){const a=this.handlerNewMemorial;this.handlerNewMemorial=(c,u)=>{a(c,h=>{o(c,h.success?u:void 0),!h.success&&u&&u(h)})}}else this.handlerNewMemorial=o;return this}setDeleteMemorialHandler(o){return this.handlerDeleteMemorial=o,this}addDeleteMemorialHandler(o){if(this.handlerDeleteMemorial){const a=this.handlerDeleteMemorial;this.handlerDeleteMemorial=(c,u)=>{a(c,h=>{o(c,h.success?u:void 0),!h.success&&u&&u(h)})}}else this.handlerDeleteMemorial=o;return this}newMemorial(o,a){if(this.handlerNewMemorial)return this.handlerNewMemorial(o,a);a&&a(oo.builder().setSuccess(!1).setError("\u041d\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430."))}deleteMemorial(o,a){if(this.handlerDeleteMemorial)return this.handlerDeleteMemorial(o,a);a&&a(oo.builder().setSuccess(!1).setError("\u041d\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430."))}}class oo{constructor(o,a){this.success=o,this.error=a}static builder(){return new oo(!1,"")}setSuccess(o){return this.success=o,this}setError(o){return this.error=o,this}}class Gqe{constructor(o,a,c,u){this._id=o,this.name=a,this.mode=c,this.tags=u}}class VM{constructor(o){this.items=o}static toMemorials(o,a,c,u){const h=[];return o.items.forEach(d=>{h.push(new M_(d._id,d.name,d.mode,d.tags))}),new Wqe(h).setOnDirty(a).setNewMemorialHandler(c).setDeleteMemorialHandler(u)}}let Vle=(()=>{class l{constructor(a,c,u){this.http=a,this.config=c,this.auth=u,this.restPoint="/kafizmy",this.canSave=null,this.memorialsSubscribers=null,this.memorialSaved=new wt}setCanSave(a){this.canSave=a}getRestPoint(a,c){return kr.merge(kr.merge(c||this.config.serviceAPIHost,this.restPoint),a)}getRestPointRaw(a,c){return kr.merge(c||this.config.serviceAPIHost,a)}getAllSubscribe(){return new Promise((a,c)=>{if(null!=this.memorialsSubscribers)this.memorialsSubscribers.push((u,h)=>{u?a(u):c(h)});else{this.memorialsSubscribers=[],this.memorialsSubscribers.push((h,d)=>{h?a(h):c(d)});const u={params:{}};this.http.get(this.getRestPoint("/memorials",null),u).pipe(rr(Ni.handleError)).subscribe({next:h=>{if(null==this.memorialsSubscribers)return;const d=this.memorialsSubscribers;this.memorialsSubscribers=null,d.forEach(f=>{f(VM.toMemorials(h,p=>{this.save(p)},(p,g)=>{this.newMemorial(new M_(-1,p,"on","")).then(m=>g?g(m):null,m=>g?g(oo.builder().setError(m)):null)},(p,g)=>{this.deleteMemorial(p).then(m=>g?g(m):null,m=>g?g(oo.builder().setError(m)):null)}),null)})},error:h=>{if(null==this.memorialsSubscribers)return;const d=this.memorialsSubscribers;this.memorialsSubscribers=null,d.forEach(f=>{f(null,h)})}})}})}isReady(){return new Promise((a,c)=>{this.config.post(()=>{const h=this.auth.getParticipant(this.config.authId);a(oo.builder().setSuccess(!!h))})})}getAll(){return this.getAllSubscribe()}save(a,c){if(!c&&this.canSave&&!this.canSave(a)||!a.dirty)return new Promise((h,d)=>{this.config.post(()=>{h(oo.builder().setSuccess(!0))})});const u={params:{_name:a.old.name,_mode:a.old.mode,_newName:a.name,_newMode:a.mode,_newTags:a.tags}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/updateMemorial",null),u).pipe(rr(Ni.handleError)).subscribe({next:f=>{h(f)},error:f=>{d(null)}}),a.clearDirty(),this.memorialSaved.emit(a)})}newMemorial(a,c){const u={params:{_name:a.name,_mode:a.mode}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/addMemorial",null),u).pipe(rr(Ni.handleError)).subscribe({next:f=>{h(f)},error:f=>{d(null)}}),a.clearDirty()})}deleteMemorial(a,c){const u={params:{_name:a.name,_mode:a.mode}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/deleteMemorial",null),u).pipe(rr(Ni.handleError)).subscribe({next:f=>{h(f)},error:f=>{d(null)}}),a.clearDirty()})}deleteAll(){const a={params:{}};return new Promise((c,u)=>{this.http.get(this.getRestPoint("/deleteAllMemorials",null),a).pipe(rr(Ni.handleError)).subscribe({next:h=>{c(h)},error:h=>{u(null)}})})}}return l.\u0275fac=function(a){return new(a||l)(Ae(sd),Ae(an),Ae(ES))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),zle=(()=>{class l{constructor(a,c,u){this.kafizmSvc=a,this.auth=c,this.config=u,this.memkey=-1,this.authedMemorials=null,this.localStorageName="",this.nextMemorialId=1,this.localStorageName=u.serviceAPIHost+"MemSvc"}isReady(){return new Promise((a,c)=>{this.config.post(()=>{const h=this.auth.getParticipant(this.config.authId);a(oo.builder().setSuccess(!!h))})})}getUserId(){const c=this.auth.getParticipant(this.config.authId);if(!c)throw new Error("\u041d\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.");return c.username}get memorials(){const a=this.getUserId();return this.authedMemorials[a]||(this.authedMemorials[a]=new VM([])),this.authedMemorials[a]}getNextMemorialId(){return++this.nextMemorialId}checkOrloadData(){const a=()=>{let u=!0;this.memorials.items.forEach(d=>{"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439"===d.name&&(u=!1)})};if(this.authedMemorials)return void a();const c=localStorage.getItem(this.localStorageName);if(c)try{const u=JSON.parse(c);this.authedMemorials=u||{}}catch(u){this.authedMemorials={},this.config.addAlert(Or.of("Error: "+u,"OK",10))}this.authedMemorials||(this.authedMemorials={}),a(),this.nextMemorialId=1,this.memorials.items.forEach(u=>{u._id>this.nextMemorialId&&(this.nextMemorialId=u._id+1)})}saveData(){const a=JSON.stringify(this.authedMemorials);localStorage.setItem(this.localStorageName,a)}addTempFile(a,c,u){this.checkOrloadData()}deleteAll(){return new Promise((a,c)=>{this.config.post(()=>{this.checkOrloadData(),this.memorials.items=[],this.saveData(),a(oo.builder().setSuccess(!0))})})}deleteMemorial(a){return new Promise((c,u)=>{this.config.post(()=>{this.checkOrloadData();const h=this.memorials.items.findIndex(f=>f._id===a._id),d=h>=0;d&&this.memorials.items.splice(h,1),this.saveData(),a.clearDirty(),c(new oo(d,""))})})}getAll(){return new Promise((a,c)=>{this.config.post(()=>{this.checkOrloadData();const u=VM.toMemorials(this.memorials,h=>{},(h,d)=>{this.newMemorial(new M_(-1,h,"on","")).then(f=>d?d(f):null,f=>d?d(oo.builder().setError(f)):null)},(h,d)=>{this.deleteMemorial(h).then(f=>d?d(f):null,f=>d?d(oo.builder().setError(f)):null)});a(u)})})}getAllSubscribe(){return new Promise((a,c)=>{this.config.post(()=>{this.checkOrloadData();const u=VM.toMemorials(this.memorials,h=>{},(h,d)=>{this.newMemorial(new M_(-1,h,"on","")).then(f=>d?d(f):null,f=>d?d(oo.builder().setError(f)):null)},(h,d)=>{this.deleteMemorial(h).then(f=>d?d(f):null,f=>d?d(oo.builder().setError(f)):null)});a(u)})})}newMemorial(a){return new Promise((c,u)=>{this.config.post(()=>{if(this.checkOrloadData(),null!=this.memorials.items.find(d=>d.name==a.name))return void u(`\u0423\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c: '${a.name}'.`);let h=a.tags;h||(h+=a.name+",\u0421\u043b\u0430\u0432\u0430 1,\u0421\u043b\u0430\u0432\u0430 2,\u0421\u043b\u0430\u0432\u0430 3"),this.memorials.items.push(new Gqe(this.getNextMemorialId(),a.name,a.mode,h)),this.saveData(),"hramvkostino"==a.name?this.kafizmSvc.checkAndAddDefaultHramvkostino():"\u0430\u0432\u0442\u043e\u0440\u044b"==a.name&&this.kafizmSvc.checkAndAddDefaultAuthors(),c(new oo(!0,""))})})}save(a,c){return new Promise((u,h)=>{this.config.post(()=>{this.checkOrloadData();let d=!1;this.memorials.items.forEach(f=>{f._id===a._id&&(f.name=a.name,f.tags=a.tags,f.mode=a.mode,d=!0)}),d&&this.saveData(),"hramvkostino"==a.name?this.kafizmSvc.checkAndAddDefaultHramvkostino():"\u0430\u0432\u0442\u043e\u0440\u044b"==a.name&&this.kafizmSvc.checkAndAddDefaultAuthors(),a.clearDirty(),u(new oo(d,d?"OK":"Not found"))})})}}return l.\u0275fac=function(a){return new(a||l)(Ae(DV),Ae(ES),Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),E_=(()=>{class l{constructor(a,c,u){this.msRest=a,this.msMemory=c,this.config=u,this.memorials=null,this.subscribers=null,this.ms=null,this.updateMemorialsAction=new $X(h=>{this.getAll().then(d=>{null==h||h.map(f=>f(!0))})},100,(h,d)=>this.config.post(d,h)),this.config.isMemoryServerType()&&(this.ms=this.msMemory),(!this.ms||this.config.isRestServerType())&&(this.ms=this.msRest)}getMemorials(){return this.memorials}getActivePredefinedMemorialsRaw(){return["\u0430\u0432\u0442\u043e\u0440\u044b","hramvkostino"]}getActivePredefinedMemorials(){let a=[],c=this.getActivePredefinedMemorialsRaw();return this.memorials&&this.memorials.items&&this.memorials.items.forEach(u=>{c.forEach(h=>{h==u.name&&a.indexOf(h)<0&&a.push(h)})}),a}setMemorials(a){this.memorials=a,this.memorials.addDeleteMemorialHandler((c,u)=>{this.reloadMemorials(),u&&u(new oo(!0,""))}),this.memorials.addNewMemorialHandler((c,u)=>{this.reloadMemorials(()=>{u&&u(new oo(!0,""))})})}isReady(){return this.ms?this.ms.isReady():new Promise((a,c)=>{this.config.post(()=>{c(oo.builder().setSuccess(!1).setError("\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0433\u043e\u0442\u043e\u0432."))})})}getAll(){return new Promise((a,c)=>{if(null==this.subscribers)if(null!=this.memorials)a(this.memorials);else{this.subscribers=[(h,d)=>{h?a(h):d&&c(d)}];const u=(h,d)=>{if(h&&this.setMemorials(h),null!=this.subscribers){let f=this.subscribers;this.subscribers=null,f.forEach(p=>{d?p(null,d):p(this.memorials,null)})}};this.ms.getAll().then(h=>{u(h,null)},h=>{u(null,h)})}else this.subscribers.push((u,h)=>{u?a(u):h&&c(h)})})}save(a,c){return new Promise((u,h)=>{this.ms.save(a,c).then(d=>{this.reloadMemorials(),u(d)},d=>{h(d)})})}newMemorial(a){return new Promise((c,u)=>{this.ms.newMemorial(a).then(h=>{this.reloadMemorials(d=>{h&&h.success?c(h):u(`\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430: "${a.name}"`)})},h=>{u(h)})})}deleteMemorial(a){return new Promise((c,u)=>{this.ms.deleteMemorial(a).then(h=>{this.reloadMemorials(d=>{h&&h.success?c(h):u(`\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430: "${a.name}"`)})},h=>{u(h)})})}deleteAll(){return new Promise((a,c)=>{this.ms.deleteAll().then(u=>{this.reloadMemorials(h=>{u&&u.success?a(u):c('\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u043e\u0432."')})},u=>{c(u)})})}reloadMemorials(a){this.memorials=null,this.updateMemorialsAction.requestAction(a)}}return l.\u0275fac=function(a){return new(a||l)(Ae(Vle),Ae(zle),Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),Xp=(()=>{class l extends class $qe{constructor(){this.handler=()=>{},this.onChangesEvent=new mt,this.enabled=!0}setDetectChangesHandler(o){return this.handler=o,this}enableChangeDetector(o){this.enabled=o}getChangeDetector(){return this.onChangesEvent.asObservable()}detectedChanges(o){this.enabled&&(this.onChangesEvent.next(o),this.handler())}}{constructor(a,c,u,h){super(),this.ksRest=a,this.ksMemory=c,this.config=u,this.memorialsSvc=h,this.memkey=-1,this.persons=null,this.subscribers=null,this.ks=null,this.predefinedPersons=null,this.activePredefinedMemorialTags="",this.changesId=0,this.virtualIdBase=1e8,this.config.isMemoryServerType()&&(this.ks=this.ksMemory),(!this.ks||this.config.isRestServerType())&&(this.ks=this.ksRest),this.setupPredefinedPersons()}newChangesId(){return++this.changesId}getPersonsDirect(){return this.persons}reloadPersons(){this.persons=null,this.getPersons(-1)}getPersons(a){return new Promise((c,u)=>{var h;let d=(f,p)=>{f?c(f):u(""+p)};null==this.subscribers?null!=this.persons?c(this.persons):(this.subscribers=[d],null===(h=this.ks)||void 0===h||h.getPersons(this.memkey).then(f=>{if(this.persons=this.filterPersonsAndPredefined(f),null!=this.subscribers){const p=this.subscribers;this.subscribers=null,p.forEach(g=>{g(this.persons,null)})}this.config.post(()=>{this.runDetectAnyChanges()})},f=>{if(null!=this.subscribers){const p=this.subscribers;this.subscribers=null,p.forEach(g=>{g(null,""+f)})}})):this.subscribers.push(d)})}autoRejectOnFail(a){return this.ks?a(this.ks):new Promise((c,u)=>{this.config.post(()=>{u("\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.")})})}runDetectAnyChanges(){return this.detectedChanges(new Qn(-1,"","",-1,!0,"")),this}runChangeDetector(a){return new Promise((c,u)=>{a.then(h=>{c(h),this.runDetectAnyChanges()},h=>{u(u),this.runDetectAnyChanges()})})}save(a,c,u){return this.autoRejectOnFail(h=>this.runChangeDetector(h.save(this.memkey,c,u)))}deleteAll(a){return this.autoRejectOnFail(c=>this.runChangeDetector(c.deleteAll(this.memkey)))}deletePersons(a){return this.autoRejectOnFail(c=>this.runChangeDetector(c.deletePersons(a,this.memkey)))}newPerson(a,c,u){return this.autoRejectOnFail(h=>this.runChangeDetector(h.newPerson(this.memkey,c,u)))}newPersons(a,c){return this.autoRejectOnFail(u=>this.runChangeDetector(u.newPersons(a,c)))}addTempFile(a,c){return this.autoRejectOnFail(u=>u.addTempFile(a,c))}filterPersonsAndPredefined(a,c=!0){let u=a.items,h=a;h.items=[];let d=new k_([]),f=!1;u.forEach(g=>{this.isValidPerson(g)?h.items.push(g):g._id<this.virtualIdBase&&(f=!0,this.removePredefinedTags(g)?(this.ks.save(this.memkey,g,!0),h.items.push(g)):d.items.push(g))}),f&&this.config.addAlert(Or.of("\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.","OK",30));let p=this.memorialsSvc.getActivePredefinedMemorials();return this.activePredefinedMemorialTags=p.join(","),this.predefinedPersons.forEach((g,m)=>{p.forEach(v=>{v==m&&h.items.push(...g.clone().items)})}),d.items.length>0&&c&&this.deletePersons(d.items).then(g=>{this.config.addAlert(Or.of(g.success?"\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.":g.error,"OK",30))},g=>{this.config.addAlert(Or.of(g,"OK",30))}),a}removePredefinedTags(a){let c=!1,u=a.tags;["\u0430\u0432\u0442\u043e\u0440\u044b","hramvkostino"].forEach(p=>{let g=Ko.removeTag(u,p);g!=u&&(c=!0,u=g)});let f=""!=Ko.removeModificators(u);return f&&(a.tags=u),f}isValidPerson(a){let c=Ko.removeModificators(a.tags),h=!1;return["\u0430\u0432\u0442\u043e\u0440\u044b","hramvkostino"].forEach(d=>{let f=Ko.removeTag(c,d);f!=c&&(h=!0),c=f}),!h}setupPredefinedPersons(){this.predefinedPersons=new Map;let a=this.virtualIdBase,c=()=>++a,u="\u0430\u0432\u0442\u043e\u0440\u044b";this.predefinedPersons.set(u,new k_([new Qn(c(),"\u0415\u0432\u0433\u0435\u043d\u0438\u044f","",-1,!0,u),new Qn(c(),"\u0410\u043d\u0434\u0440\u0435\u044f","",-1,!0,u)])),u="hramvkostino",this.predefinedPersons.set(u,new k_([new Qn(c(),"\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","",-1,!0,u),new Qn(c(),"\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","",-1,!0,u),new Qn(c(),"\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","",-1,!0,u),new Qn(c(),"\u0438\u0435\u0440. \u0414\u0438\u043e\u043d\u0438\u0441\u0438\u044f","",1,!0,u),new Qn(c(),"\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","",-1,!0,u),new Qn(c(),"\u0434\u0438\u0430\u043a. \u0413\u0435\u043e\u0440\u0433\u0438\u044f","",-1,!0,u),new Qn(c(),"\u0412\u0430\u043b\u0435\u0440\u0438\u044f","",0,!0,u),new Qn(c(),"\u0421\u0435\u0440\u0433\u0438\u044f","",2,!0,u),new Qn(c(),"\u041c\u0430\u0440\u0438\u0438","",3,!0,u),new Qn(c(),"\u0422\u0430\u0442\u0438\u0430\u043d\u044b","",4,!0,u),new Qn(c(),"\u0422\u0430\u0442\u0438\u0430\u043d\u044b","",5,!0,u),new Qn(c(),"\u0413\u0430\u043b\u0438\u043d\u044b","",6,!0,u),new Qn(c(),"\u041f\u0430\u0432\u043b\u0430","",7,!0,u),new Qn(c(),"\u041c\u0438\u0445\u0430\u0438\u043b\u0430","",8,!0,u),new Qn(c(),"\u0415\u043b\u0435\u043d\u044b","",9,!0,u),new Qn(c(),"\u0412\u0430\u043b\u0435\u0440\u0438\u044f","",10,!0,u),new Qn(c(),"\u041b\u044e\u0431\u043e\u0432\u0438","",11,!0,u),new Qn(c(),"\u041d\u0430\u0434\u0435\u0436\u0434\u044b","",12,!0,u),new Qn(c(),"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","",13,!0,u),new Qn(c(),"\u041b\u044e\u0434\u043c\u0438\u043b\u044b","",14,!0,u),new Qn(c(),"\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d\u0430","",15,!0,u),new Qn(c(),"\u041c\u0438\u0445\u0430\u0438\u043b\u0430","",16,!0,u),new Qn(c(),"\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","",17,!0,u),new Qn(c(),"\u0410\u043d\u0434\u0440\u0435\u044f","",18,!0,u),new Qn(c(),"\u041c\u0430\u0440\u0438\u043d\u044b","",19,!0,u),new Qn(c(),"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","",-1,!1,u),new Qn(c(),"\u0412\u0438\u043a\u0442\u043e\u0440\u0430","",-1,!1,u),new Qn(c(),"\u0424\u043e\u0442\u0438\u043d\u0438\u0438","",-1,!1,u)]))}}return l.\u0275fac=function(a){return new(a||l)(Ae(Ble),Ae(DV),Ae(an),Ae(E_))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();const Qqe=["mySvg"];let Ule=(()=>{class l{constructor(a,c){this.d3Svc=a,this.config=c,this.svgImage=null,this.inited=!1,this.igen=null,this.cfgD3Config=null,this.iWidth=512,this.iHeight=512}get d3Config(){return this.cfgD3Config}set d3Config(a){this.cfgD3Config=a,this.svgImage&&this.setup(!0)}set generator(a){this.igen=a}get generator(){return this.igen}get width(){return this.svgImage&&this.iWidth!=this.svgImage.logoWidth&&this.updateSize(),this.iWidth}get height(){return this.svgImage&&this.iHeight!=this.svgImage.logoHeight&&this.updateSize(),this.iHeight}updateSize(){this.config.post(()=>{this.svgImage&&(this.iWidth=this.svgImage.logoWidth,this.iHeight=this.svgImage.logoHeight)})}setup(a=!1){this.inited&&!a||(this.generator&&(this.svgImage=new j8(this.generator.getWidth(),this.generator.getHeight(),this.d3Svc,this.mySvgRef,this.generator,null,this.d3Config),this.svgImage.updateSvg()),this.inited=!0)}ngOnInit(){}ngAfterViewInit(){this.setup()}}return l.\u0275fac=function(a){return new(a||l)(L(mM),L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-d3-svg"]],viewQuery:function(a,c){if(1&a&&ai(Qqe,5),2&a){let u;Vt(u=zt())&&(c.mySvgRef=u.first)}},inputs:{d3Config:"d3Config",generator:"generator"},decls:2,vars:2,consts:[[1,"centeredImage","fade-in-3"],["mySvg",""]],template:function(a,c){1&a&&(np(),me(0,"svg",0,1)),2&a&&et("width",c.width)("height",c.height)},styles:[".centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}"]}),l})(),Hle=(()=>{class l{constructor(a,c){this.http=a,this.config=c,this.bLoggedIn=!1,this.restPoint="/participant"}getRestPoint(a,c){const u=this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return kr.merge(kr.merge(c||u,this.restPoint),a)}isLoggedIn(){return new Promise((a,c)=>{this.config.post(()=>{a(kf.build().setResult(this.bLoggedIn))})})}login(){return this.bLoggedIn=!0,new Promise((a,c)=>{this.config.post(()=>{a(kf.build().setResult(!0))})})}logout(){return this.bLoggedIn=!1,new Promise((a,c)=>{this.config.post(()=>{a(kf.build().setResult(!0))})})}requestForUser(a,c){const u={params:{username:a,password:c}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/login",null),u).pipe(rr(Ni.handleError)).subscribe({next:f=>h(f),error:f=>d(f)})})}logoutAll(){const a={params:{}};return new Promise((c,u)=>{this.http.get(this.getRestPoint("/logoutAll",null),a).pipe(rr(Ni.handleError)).subscribe({next:h=>c(h),error:h=>u(h)})})}requestVersion(){const a={params:{}};return new Promise((c,u)=>{this.http.get(this.getRestPoint("/version",null),a).pipe(rr(Ni.handleError)).subscribe({next:h=>c(h),error:h=>u(h)})})}}return l.\u0275fac=function(a){return new(a||l)(Ae(sd),Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),nh=(()=>{class l{constructor(a,c,u){this.config=a,this.authRest=c,this.authMemory=u,this.auth=null,this.config.isMemoryServerType()&&(this.auth=u),(!this.auth||this.config.isRestServerType())&&(this.auth=c)}autoRejectOnFail(a){return this.auth?a(this.auth):new Promise((c,u)=>{this.config.post(()=>{u("\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.")})})}isLoggedIn(){return this.autoRejectOnFail(a=>a.isLoggedIn())}login(){return this.autoRejectOnFail(a=>a.login())}logout(){return this.autoRejectOnFail(a=>a.logout())}requestForUser(a,c){return this.autoRejectOnFail(u=>u.requestForUser(a,c))}logoutAll(){return this.autoRejectOnFail(a=>a.logoutAll())}requestVersion(){return this.autoRejectOnFail(a=>a.requestVersion())}}return l.\u0275fac=function(a){return new(a||l)(Ae(an),Ae(Hle),Ae(ES))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class a0{constructor(o){this.data=o}static builder(){return new a0(null)}setData(o){return this.data=o,this}}class Ei{constructor(o,a,c){this.text=o,this.onClick=a,this.tag=c}static builder(){return new Ei("",null,null)}setText(o){return this.text=o,this}setOnClick(o){return this.onClick=o,this}setTag(o){return this.tag=o,this}click(o){this.onClick&&this.onClick(o)}}let Yp=(()=>{class l{constructor(a,c,u){this.config=a,this.uiConfig=c,this.authSvc=u,this.aComponents=[],this.menuLinksOld=null,this.menuLinks=[],this.serviceReady=!1}get components(){return this.syncComponents(),this.aComponents}set components(a){this.aComponents=a}isComponentType(a,c){var u;if(this.components.length<=0)return!1;let h=this.components[0].data instanceof a;return h&&null!=c?(null===(u=this.components[0].data.component)||void 0===u?void 0:u.data)instanceof c:h}addMenuLink(a){return this.menuLinks.push(a),this}applyMenuAppRoutes(a=!1){let c=this.uiConfig.setAppRoutes(this.menuLinks);a||(this.menuLinksOld=c)}ngOnInit(){this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.menuLinks)},0)}ngOnDestroy(){this.menuLinksOld&&this.config.post(()=>{this.menuLinksOld&&this.menuLinksOld.unsubscribe()},0)}ngAfterViewInit(){this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.menuLinks)},0)}syncComponents(){}doLogin(a){this.authSvc.isLoggedIn().then(c=>{c.result?(this.serviceReady=!1,a&&a(this.serviceReady)):this.authSvc.login().then(u=>{if(u.result){let h="hramvkostino",d="hramvkostino";this.authSvc.requestForUser(h,d).then(f=>{this.serviceReady=f.valid,this.config.authId=f.authId,this.config.authBody=btoa(h+":"+d),a&&a(this.serviceReady)})}})})}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(nh))},l.\u0275cmp=qe({type:l,selectors:[["ng-component"]],decls:0,vars:0,template:function(a,c){},encapsulation:2}),l})();var at=(()=>(function(l){l.NZ_KZ="NZ_KZ",l.NZ_KI="NZ_KI",l.NZ_KU="NZ_KU",l.NZ_KP="NZ_KP",l.VZ_KZ="VZ_KZ",l.VZ_KI="VZ_KI",l.VZ_KU="VZ_KU",l.VZ_KP="VZ_KP",l.SL_OV="SL_OV",l.SL_BL="SL_BL",l.SL_LG="SL_LG",l.SL_TF="SL_TF"}(at||(at={})),at))();class kV{static builder(){return new kV}build(o,a,c,u,h,d,f,p){let g=EV.builder(),v=y=>{g.switchState(y,a,p,()=>{g.hideOrShowMainMenu(y,a,p,()=>{y.complementedByMenuName&&g.hideOrShowStateByType(y.complementedByMenuName,y.on,null,a,p,[y.complementedByMenuName]);let _=c();_&&_(y)})})};return new jqe(g,a,o,u,h,d,f,Math.PI,p).add(st.builder().setText("\u041d\u043e\u0432\u044b\u0439 \u0417\u0430\u0432\u0435\u0442").setSize(Math.PI).setOnClick(v)).add(st.builder().setText("\u0412\u0435\u0442\u0445\u0438\u0439 \u0417\u0430\u0432\u0435\u0442").setOnClick(v).setTypeName(Xr.DOWN)).newLine().add(st.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0437\u0430\u043a\u043e\u043d\u043e\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setSize(Math.PI).setComplementedByTypeName(at.NZ_KZ).setOnClick(v)).add(st.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0437\u0430\u043a\u043e\u043d\u043e\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setComplementedByTypeName(at.VZ_KZ).setOnClick(v).setTypeName(Xr.DOWN)).newLine().add(st.builder().setText("\u041a\u043d\u0438\u0433\u0430 \u0438\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0430\u044f").setSize(Math.PI).setComplementedByTypeName(at.NZ_KI).setOnClick(v)).add(st.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0438\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0435").setComplementedByTypeName(at.VZ_KI).setOnClick(v).setTypeName(Xr.DOWN)).newLine().add(st.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0443\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setSize(Math.PI/2).setComplementedByTypeName(at.NZ_KU).setOnClick(v)).add(st.builder().setText("\u041a\u043d\u0438\u0433\u0430 \u043f\u0440\u043e\u0440\u043e\u0447\u0435\u0441\u043a\u0430\u044f").setComplementedByTypeName(at.NZ_KP).setSize(Math.PI/2).setOnClick(v)).add(st.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u043f\u0440\u043e\u0440\u043e\u0447\u0435\u0441\u043a\u0438\u0435").setSize(Math.PI/2).setComplementedByTypeName(at.VZ_KP).setOnClick(v).setTypeName(Xr.DOWN)).add(st.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0443\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setComplementedByTypeName(at.VZ_KU).setOnClick(v).setTypeName(Xr.DOWN)).newLine().setAlpha0(Math.PI/6*4).add(st.builder().setText("   \u041e \u0432\u0435\u0440\u0435   ").setComplementedByTypeName(at.SL_OV).setTypeName(Xr.AROUND).setSize(Math.PI/6*2).setOnClick(v)).add(st.builder().setText("\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0430\u044f \u0431\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u0431\u043d\u0430\u044f \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430").setTypeName(Xr.AROUND).setSize(Math.PI/6*4).setDelayIndex(3).setComplementedByTypeName(at.SL_BL).setOnClick(v)).add(st.builder().setText("   \u042f\u0437\u044b\u043a   ").setTypeName(Xr.AROUND).setSize(Math.PI/6*2).setDelayIndex(1).setOnClick(v)).add(st.builder().setText("\u0422\u043e\u043b\u043a\u043e\u0432\u0430\u043d\u0438\u044f \u0424\u0435\u043e\u0444\u0438\u043b\u0430\u043a\u0442\u0430 \u0411\u043e\u043b\u0433\u0430\u0440\u0441\u043a\u043e\u0433\u043e").setTypeName(Xr.AROUND).setDelayIndex(2).setComplementedByTypeName(at.SL_TF).setOnClick(v)).newLine(!0,!0).setAlpha0(0).newLine().add(st.builder().setText("\u0415\u0432\u0430\u043d\u0433\u0435\u043b\u0438\u0435").setSize(Math.PI).setForceOn(!0).setOnClick(v).setTypeName(at.NZ_KZ)).newLine().add(st.builder().setText("\u043e\u0442 \u041c\u0430\u0440\u043a\u0430").setSize(Math.PI/2).setOnClick(v).setTypeName(at.NZ_KZ)).add(st.builder().setText("\u043e\u0442 \u041c\u0430\u0442\u0444\u0435\u044f").setSize(Math.PI/2).setOnClick(v).setTypeName(at.NZ_KZ)).newLine().add(st.builder().setText("\u043e\u0442 \u0418\u043e\u0430\u043d\u043d\u0430").setSize(Math.PI/2).setOnClick(v).setTypeName(at.NZ_KZ)).add(st.builder().setText("\u043e\u0442 \u041b\u0443\u043a\u0438").setSize(Math.PI/2).setOnClick(v).setTypeName(at.NZ_KZ)).newLine(!0,!0).newLine().newLine().setAlpha0(0).add(st.builder().setText("\u0414\u0435\u044f\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u043e\u0432").setSize(Math.PI).setOnClick(v).setTypeName(at.NZ_KI)).newLine(!0,!0).setAlpha0(0).setRadialSize(Math.PI).newLine().add(st.builder().setText("\u0421\u043e\u0431\u043e\u0440\u043d\u044b\u0435 \u043f\u043e\u0441\u043b\u0430\u043d\u0438\u044f").setSize(Math.PI).setForceOn(!0).setOnClick(v).setTypeName(at.NZ_KU)).newLine().add(st.builder().setText("2 \u041f\u0435\u0442\u0440\u0430").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("1 \u041f\u0435\u0442\u0440\u0430").setSize(Math.PI/2).setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0418\u0430\u043a\u043e\u0432\u0430").setOnClick(v).setTypeName(at.NZ_KU)).newLine().add(st.builder().setText("\u0418\u0443\u0434\u044b").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("3 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("2 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("1 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(v).setTypeName(at.NZ_KU)).newLine().setRadialSize(2*Math.PI).setAlpha0(2*Math.PI-Math.PI/4).add(st.builder().setText("\u041f\u043e\u0441\u043b\u0430\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u0430 \u041f\u0430\u0432\u043b\u0430").setSize(Math.PI/4*2).setForceOn(!0).setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0440\u0438\u043c\u043b\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("1 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("2 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0433\u0430\u043b\u0430\u0442\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0435\u0444\u0435\u0441\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0444\u0438\u043b\u0438\u043f\u0438\u0439\u0446\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).newLine().setAlpha0(Math.PI/4*5).add(st.builder().setText("\u043a\u043e\u043b\u043e\u0441\u0441\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("1 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("2 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("1 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("2 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0422\u0438\u0442\u0443").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0424\u0438\u043b\u0438\u043c\u043e\u043d\u0443").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0435\u0432\u0440\u0435\u044f\u043c").setOnClick(v).setTypeName(at.NZ_KU)).newLine(!0,!0).setAlpha0(0).setRadialSize(Math.PI).newLine().newLine().newLine().add(st.builder().setText("\u041e\u0442\u043a\u0440\u043e\u0432\u0435\u043d\u0438\u0435 \u0418\u043e\u0430\u043d\u043d\u0430 \u0411\u043e\u0433\u043e\u0441\u043b\u043e\u0432\u0430").setOnClick(v).setTypeName(at.NZ_KP)).newLine(!0,!0).setAlpha0(Math.PI).setRadialSize(Math.PI).newLine().add(st.builder().setText("\u041a\u043d\u0438\u0433\u0430 \u0411\u044b\u0442\u0438\u044f").setOnClick(v).setTypeName(at.VZ_KZ)).newLine().add(st.builder().setText("\u0418\u0441\u0445\u043e\u0434").setOnClick(v).setTypeName(at.VZ_KZ)).add(st.builder().setText("\u041b\u0435\u0432\u0438\u0442").setOnClick(v).setTypeName(at.VZ_KZ)).newLine().add(st.builder().setText("\u0427\u0438\u0441\u043b\u0430").setOnClick(v).setTypeName(at.VZ_KZ)).add(st.builder().setText("\u0412\u0442\u043e\u0440\u043e\u0437\u0430\u043a\u043e\u043d\u0438\u0435").setOnClick(v).setTypeName(at.VZ_KZ)).newLine(!0,!0).setAlpha0(Math.PI).setRadialSize(Math.PI).add(st.builder().setText("\u0418\u0438\u0441\u0443\u0441\u0430 \u041d\u0430\u0432\u0438\u043d\u0430").setOnClick(v).setTypeName(at.VZ_KI)).newLine().add(st.builder().setText("\u0421\u0443\u0434\u0435\u0439 \u0418\u0437\u0440\u0430\u0438\u043b\u0435\u0432\u044b\u0445").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("\u0420\u0443\u0444\u0438").setOnClick(v).setTypeName(at.VZ_KI)).newLine().add(st.builder().setText("1 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("2 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("3 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("4 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(v).setTypeName(at.VZ_KI)).newLine().add(st.builder().setText("1 \u041f\u0430\u0440\u0430\u043b\u0438\u043f\u043e\u043c\u0435\u043d\u043e\u043d").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("2 \u041f\u0430\u0440\u0430\u043b\u0438\u043f\u043e\u043c\u0435\u043d\u043e\u043d").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("1 \u0415\u0437\u0434\u0440\u044b").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("\u041d\u0435\u0435\u043c\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KI)).newLine().setRadialSize(Math.PI).add(st.builder().setText("2 \u0415\u0437\u0434\u0440\u044b").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("\u0422\u043e\u0432\u0438\u0442\u0430").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("\u0418\u0443\u0434\u0438\u0444\u0438").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("\u0415\u0441\u0444\u0438\u0440\u0438").setOnClick(v).setTypeName(at.VZ_KI)).newLine(!0,!1,!1).setRadialSize(Math.PI).setAlpha0(0).add(st.builder().setText("1 \u041c\u0430\u043a\u043a\u0430\u0432\u0435\u0439\u0441\u043a\u0430\u044f").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("2 \u041c\u0430\u043a\u043a\u0430\u0432\u0435\u0439\u0441\u043a\u0430\u044f").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("3 \u041c\u0430\u043a\u043a\u0430\u0432\u0435\u0439\u0441\u043a\u0430\u044f").setOnClick(v).setTypeName(at.VZ_KI)).newLine(!0,!0).setAlpha0(Math.PI).setRadialSize(Math.PI).add(st.builder().setText(" \u0418\u043e\u0432\u0430 ").setOnClick(v).setTypeName(at.VZ_KU)).newLine().setAlpha0(Math.PI).setRadialSize(Math.PI).add(st.builder().setText("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c").setOnClick(v).setTypeName(at.VZ_KU)).add(st.builder().setText("\u041f\u0440\u0438\u0442\u0447\u0435\u0439 \u0421\u043e\u043b\u043e\u043c\u043e\u043d\u043e\u0432\u044b\u0445").setOnClick(v).setTypeName(at.VZ_KU)).newLine().add(st.builder().setText("\u042d\u043a\u043a\u043b\u0435\u0437\u0438\u0430\u0441\u0442").setOnClick(v).setTypeName(at.VZ_KU)).add(st.builder().setText("\u041f\u0435\u0441\u043d\u044c \u041f\u0435\u0441\u043d\u0435\u0439 \u0421\u043e\u043b\u043e\u043c\u043e\u043d\u043e\u0432\u044b\u0445").setOnClick(v).setTypeName(at.VZ_KU)).newLine().add(st.builder().setText("\u041f\u0440\u0435\u043c\u0443\u0434\u0440\u043e\u0441\u0442\u0438 \u0421\u043e\u043b\u043e\u043c\u043e\u043d\u0430").setOnClick(v).setTypeName(at.VZ_KU)).add(st.builder().setText("\u041f\u0440\u0435\u043c\u0443\u0434\u0440\u043e\u0441\u0442\u0438 \u0418\u0438\u0441\u0443\u0441\u0430").setOnClick(v).setTypeName(at.VZ_KU)).newLine(!0,!0).setRadialSize(Math.PI).add(st.builder().setText(" \u0418\u0441\u0430\u0438\u0438 ").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0418\u0435\u0440\u0435\u043c\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).newLine().add(st.builder().setText("\u041f\u043b\u0430\u0447 \u0418\u0435\u0440\u0435\u043c\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u041f\u043e\u0441\u043b\u0430\u043d\u0438\u0435 \u0418\u0435\u0440\u0435\u043c\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).newLine().add(st.builder().setText("\u0412\u0430\u0440\u0443\u0445\u0430").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0418\u0435\u0437\u0435\u043a\u0438\u043b\u044f").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0414\u0430\u043d\u0438\u0438\u043b\u0430").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u041e\u0441\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).newLine().add(st.builder().setText("\u0418\u043e\u0438\u043b\u044f").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0410\u043c\u043e\u0441\u0430").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0410\u0432\u0434\u0438\u044f").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0418\u043e\u043d\u044b").setOnClick(v).setTypeName(at.VZ_KP)).newLine().setRadialSize(2*Math.PI).add(st.builder().setText("\u041c\u0438\u0445\u0435\u044f").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u041d\u0430\u0443\u043c\u0430").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0410\u0432\u0432\u0430\u043a\u0443\u043c\u0430").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0421\u043e\u0444\u043e\u043d\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0410\u0433\u0433\u0435\u044f").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0417\u0430\u0445\u0430\u0440\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u041c\u0430\u043b\u0430\u0445\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("3 \u0415\u0437\u0434\u0440\u044b").setOnClick(v).setTypeName(at.VZ_KP)).newLine(!0,!0).setRadialSize(Math.PI).newLine().newLine().setRadialSize(2*Math.PI).add(st.builder().setText("\u041e\u0431\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u0435 \u0421\u0438\u043c\u0432\u043e\u043b\u0430 \u0432\u0435\u0440\u044b").setOnClick(v).setTypeName(at.SL_OV)).add(st.builder().setText("\u0422\u043e\u0447\u043d\u043e\u0435 \u0438\u0437\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u043e\u0441\u043b\u0430\u0432\u043d\u043e\u0439 \u0432\u0435\u0440\u044b").setOnClick(v).setTypeName(at.SL_OV)).newLine().add(st.builder().setText("\u041f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439 \u0425\u0440\u0438\u0441\u0442\u0438\u0430\u043d\u0441\u043a\u0438\u0439 \u041a\u0430\u0442\u0435\u0445\u0438\u0437\u0438\u0441").setOnClick(v).setTypeName(at.SL_OV)).add(st.builder().setText("\u041a\u0430\u0442\u0435\u0445\u0438\u0437\u0438\u0441 \u0412\u043e\u0441\u0442\u043e\u0447\u043d\u043e\u0439 \u043f\u0440\u0430\u0432\u043e\u0441\u043b\u0430\u0432\u043d\u043e\u0439 \u0426\u0435\u0440\u043a\u0432\u0438").setOnClick(v).setTypeName(at.SL_OV)).newLine().newLine(!0,!0).setRadialSize(2*Math.PI).add(st.builder().setText("\u041c\u043e\u043b\u0438\u0442\u0432\u043e\u0441\u043b\u043e\u0432").setOnClick(v).setSize(Math.PI).setTypeName(at.SL_BL)).add(st.builder().setText("\u0427\u0430\u0441\u043e\u0441\u043b\u043e\u0432").setOnClick(v).setSize(Math.PI).setTypeName(at.SL_BL)).newLine().setAlpha0(Math.PI).setRadialSize(2*Math.PI).add(st.builder().setText("\u0411\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u0431\u043d\u044b\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f").setOnClick(v).setTypeName(at.SL_BL)).add(st.builder().setText("\u041c\u0435\u0441\u044f\u0446\u0435\u0441\u043b\u043e\u0432").setOnClick(v).setTypeName(at.SL_BL)).newLine().add(st.builder().setText("\u0422\u0440\u043e\u043f\u0430\u0440\u0438, \u043a\u043e\u043d\u0434\u0430\u043a\u0438 \u0438 \u0432\u0435\u043b\u0438\u0447\u0430\u043d\u0438\u044f \u043e\u0431\u0449\u0438\u0435").setOnClick(v).setTypeName(at.SL_BL)).add(st.builder().setText("\u0422\u0440\u043e\u043f\u0430\u0440\u0438 \u0438 \u043a\u043e\u043d\u0434\u0430\u043a\u0438 \u0434\u043d\u0435\u0432\u043d\u044b\u0435").setOnClick(v).setTypeName(at.SL_BL)).newLine().add(st.builder().setText("\u0422\u0440\u043e\u043f\u0430\u0440\u0438 \u0438 \u043a\u043e\u043d\u0434\u0430\u043a\u0438 \u0432\u043e\u0441\u043a\u0440\u0435\u0441\u043d\u044b\u0435").setOnClick(v).setTypeName(at.SL_BL)).add(st.builder().setText("\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0414\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435").setOnClick(v).setTypeName(at.SL_BL)).newLine().newLine().setAlpha0(0).setRadialSize(Math.PI).add(st.builder().setText("\u0412\u0441\u0435\u043d\u043e\u0449\u043d\u043e\u0435 \u0431\u0434\u0435\u043d\u0438\u0435 \u0438 \u041b\u0438\u0442\u0443\u0440\u0433\u0438\u044f").setOnClick(v).setTypeName(at.SL_BL)).newLine(!0,!0).setRadialSize(2*Math.PI).setAlpha0(Math.PI).add(st.builder().setText("\u0415\u0432\u0430\u043d\u0433\u0435\u043b\u0438\u0435").setSize(Math.PI).setForceOn(!0).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0422\u043e\u043b\u043a\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430").setSize(Math.PI).setForceOn(!0).setOnClick(v).setTypeName(at.SL_TF)).newLine().add(st.builder().setText("\u043e\u0442 \u041c\u0430\u0442\u0444\u0435\u044f").setSize(Math.PI/2).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u043e\u0442 \u041c\u0430\u0440\u043a\u0430").setSize(Math.PI/2).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0421\u043e\u0431\u043e\u0440\u043d\u044b\u0435 \u043f\u043e\u0441\u043b\u0430\u043d\u0438\u044f").setSize(Math.PI).setForceOn(!0).setOnClick(v).setTypeName(at.SL_TF)).newLine().add(st.builder().setText("\u043e\u0442 \u041b\u0443\u043a\u0438").setSize(Math.PI/2).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u043e\u0442 \u0418\u043e\u0430\u043d\u043d\u0430").setSize(Math.PI/2).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("2 \u041f\u0435\u0442\u0440\u0430").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("1 \u041f\u0435\u0442\u0440\u0430").setSize(Math.PI/2).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0418\u0430\u043a\u043e\u0432\u0430").setOnClick(v).setTypeName(at.SL_TF)).newLine().add(st.builder().setText("\u0414\u0435\u044f\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u043e\u0432").setSize(Math.PI).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0418\u0443\u0434\u044b").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("3 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("2 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("1 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(v).setTypeName(at.SL_TF)).newLine().newLine().setRadialSize(2*Math.PI).setAlpha0(2*Math.PI-Math.PI/4).add(st.builder().setText("\u041f\u043e\u0441\u043b\u0430\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u0430 \u041f\u0430\u0432\u043b\u0430").setSize(Math.PI/4*2).setForceOn(!0).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0440\u0438\u043c\u043b\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("1 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("2 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0433\u0430\u043b\u0430\u0442\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0435\u0444\u0435\u0441\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0444\u0438\u043b\u0438\u043f\u0438\u0439\u0446\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).newLine().setAlpha0(Math.PI/4*5).add(st.builder().setText("\u043a\u043e\u043b\u043e\u0441\u0441\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("1 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("2 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("1 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("2 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0422\u0438\u0442\u0443").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0424\u0438\u043b\u0438\u043c\u043e\u043d\u0443").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0435\u0432\u0440\u0435\u044f\u043c").setOnClick(v).setTypeName(at.SL_TF)).newLine(),g}}var ih=(()=>(function(l){l[l.Default=0]="Default",l[l.Dark=1]="Dark",l[l.Light=2]="Light",l[l.Dark2=3]="Dark2",l[l.Light2=4]="Light2"}(ih||(ih={})),ih))();class MV{constructor(o,a=[]){this.back=o,this.texts=a,this.currentOn=!1,this.on=!1,this.forceOn=!1,this.complementedByMenuName="",this.text="",this.typeName=""}static builder(){return new MV(null)}setTypeName(o){return this.typeName=o,this}isToggledOn(){return this.on&&!this.forceOn}setBack(o){return this.back=o,this}addText(o){return this.text+=o.text,this.texts.push(o),this}setTexts(o){return this.texts=o,this}setOn(o){return this.on=o,this}setForceOn(o){return this.forceOn=o,this}setComplementedByMenuName(o){return this.complementedByMenuName=o,this}isVisible(){var o;return!!(null===(o=this.back)||void 0===o?void 0:o.visible)}setVisible(o,a,c=null){this.back.emulateCollapseTransitions().setVisible(o),this.back.apply(0,a,null,c),this.texts.forEach(u=>{u.emulateCollapseTransitions().setVisible(o),u.apply(0,a)})}setAndSwitchState(o,a,c,u=null,h="",d=""){this.on=o||this.forceOn,(o||this.back.visible)&&(this.back.emulateCollapseTransitions().setFillColor(o?h||a.colorMain:d||"#00000000"),this.back.setStrokeColor(o?h||a.colorMain:d||a.colorMain),this.back.apply(0,c,null,u),this.texts.forEach(f=>{f.emulateCollapseTransitions().setColor(o?h||a.colorBackground:d||a.colorMain).apply(0,c)}))}}var Xr=(()=>(function(l){l.UP="UP",l.DOWN="DOWN",l.AROUND="AROUND"}(Xr||(Xr={})),Xr))();class EV{constructor(){this.menuName="",this.alternative=new Map}static builder(){return new EV}getAlternative(o){let a=this.alternative.get(o);return null==a&&(a=[],this.alternative.set(o,a)),a}isPrimaryType(o){return o==Xr.UP||o==Xr.DOWN||o==Xr.AROUND}get up(){return this.getAlternative(Xr.UP)}get down(){return this.getAlternative(Xr.DOWN)}get around(){return this.getAlternative(Xr.AROUND)}findType(o){let a="";return null!=o&&this.alternative.forEach((c,u)=>{c.indexOf(o)>=0&&(a=u)}),a||this.menuName}switchState(o,a,c,u=null){if(o&&o.on&&o.forceOn)return;let h=this.findType(o),d=p=>{p.complementedByMenuName&&this.hideOrShowStateByType(p.complementedByMenuName,p.on,null,a,c,[p.complementedByMenuName])};o&&(o.on=o.forceOn?o.forceOn:!o.on,this.getAlternative(h).forEach(p=>{let g=!0;p!=o&&(g=p.on,p.on=p.forceOn),g&&d(p)}),this.isPrimaryType(h)||o.on?this.hideOrShowStateByType(h,!1,o,a,c,[h]):this.hideOrShowStateByType(h,!1,null,a,c,[h])),this.alternative.forEach((p,g)=>{((p,g)=>{p.forEach(m=>{if(m!=o||null==o){let v=m.on;m.on=m.forceOn,v&&m.complementedByMenuName&&d(m)}})})(p)}),o&&(this.menuName=h),u&&u()}hideOrShowMainMenu(o,a,c,u=null){let h=this.findType(o);return h&&!this.isPrimaryType(h)&&(this.getAlternative(h).filter(g=>g.isToggledOn()).length>0||this.hideOrShowStateByType(h,!1,null,a,c,[h])),this.hideOrShowStateByType(h,!((!o||o.on)&&o),o,a,c,[Xr.UP,Xr.DOWN,Xr.AROUND],u)}hideOrShowStateByType(o,a,c,u,h,d=[],f=null){let p=!1,g=()=>p?null:(p=!0,f);d.forEach(v=>{((v,y)=>{let _=v.filter(b=>b.isToggledOn()).length>0;v.forEach(b=>{_||y||a?b.setVisible(!0,0,()=>{b.setAndSwitchState(b.on,u,h,b==c?g():null)}):b.setAndSwitchState(!1,u,h,b==c?g():()=>{b.setVisible(!1,0,g())},"#00000000","#00000000")})})(this.getAlternative(v),a&&o==v)}),!p&&f&&(p=!0,f())}addAlt(o,a){return this.getAlternative(o).push(a),this}addUp(o){return this.up.push(o),this}addDown(o){return this.down.push(o),this}addAround(o){return this.around.push(o),this}addText(o,a,c,u,h,d,f,p,g,m,v,y,_,b,C=null,x,S=!0){let w=U=>null!=C?C:U>=0&&U<=Math.PI,O=MV.builder().setTypeName(u),T=h,M=m-g,A=(m+g)/2,I=!0,E=a.textSizeDirect("_"+c+"_",p,300),P=(h+d)/2+(f+p/2)*(w(A)?1:-1),B=Math.abs(M)*P,V=p;E.width>B&&(V=Math.ceil(B/E.width*V));let Q=o.width/512*15/P;Q*=M<0?-1:1;for(let U=0;U<=c.length;U++){T=h;let z=c.substring(U,U+1),G=(U+0)/(c.length-1)*(M-2*Q)+g+Q,W=w(G);I=W;let X=ri.builder().setText(z).setTextAnchor("middle").setFontSize(`${V}px`).translate(o.width/2,o.height/2).translate(T*Math.cos(G),-T*Math.sin(G)).rotate(90-G/Math.PI*180+(W?0:-180)).setColor("#00000000").addClass("cursor").setVisible(S).addEvent(Fi.builder().setName("click").setFunc(()=>{x&&x(O)}));T=d+f*(W?1:-1),X.addTransition(gM.builder().setData(X.clone().setColor(o.colorMain).setTransforms([]).setVisible(S).translate(o.width/2,o.height/2).translate(T*Math.cos(G),-T*Math.sin(G)).rotate(90-G/Math.PI*180+(W?0:-180))).setDelay(v).setDuration(y)),o.texts.push(X),O.addText(X)}T=h;let j=T+(I?_:-_);return o.pathes.push((z=v,$=y,(U=Zr.builder().setDatum([]).setD(D8().innerRadius(Math.min(T,j)).outerRadius(Math.max(T,j)).startAngle(-Math.min(g,m)+Math.PI/2).endAngle(-Math.max(g,m)+Math.PI/2)).setStrokeWidth(o.lineWidth).setStrokeColor("#00000000").setFillColor("#00000000").setVisible(S).translate(o.width/2,o.height/2).addClass("cursor").addEvent(Fi.builder().setName("click").setFunc(()=>{x&&x(O)}))).addTransition(gM.builder().setDelay(z).setDuration($).setData(U.clone().setStrokeColor(o.colorMain).setVisible(S))),O.setBack(U),U)),O;var U,z,$}}class st{constructor(o,a,c,u,h,d,f,p){this.text=o,this.size=a,this.alpha0=c,this.typeName=u,this.complementedByTypeName=h,this.delayIndex=d,this.forceOn=f,this.onClick=p}static builder(){return new st("",0,0,Xr.UP,"",0,!1,null)}setText(o){return this.text=o,this}setSize(o){return this.size=o,this}setAlpha0(o){return this.alpha0=o,this}setTypeName(o){return this.typeName=o,this}setComplementedByTypeName(o){return this.complementedByTypeName=o,this}setDelayIndex(o){return this.delayIndex=o,this}setForceOn(o){return this.forceOn=o,this}setOnClick(o){return this.onClick=o,this}}class jqe{constructor(o,a,c,u,h,d,f,p,g){this.menu=o,this.d3Config=a,this.d3Svc=c,this.r=u,this.dr=h,this.textDr=d,this.textHeight=f,this.alpha0=p,this.delta=g,this.items=[],this.lineIndex=0,this.currentR=0,this.radialSize=2*Math.PI,this.currentR=this.r}newLine(o=!0,a=!1,c=!0){return o&&this.addLine(c),this.items=[],a&&(this.currentR=this.r),this}setAlpha0(o){return this.alpha0=o,this}setRadialSize(o){return this.radialSize=o,this}add(o){return this.items.push(o),this}addLine(o=!0){let a=this.radialSize;a-=this.items.filter(d=>d.size>0).map(d=>d.size).reduce((d,f)=>d+f,0);let u=a/this.items.filter(d=>d.size<=0).length,h=this.alpha0;return this.items.forEach(d=>{let f=d.size>0?d.size:u,p=h,g=p-f,m=Math.PI/180,v=Math.PI+m>=p&&g>=-m,y=v?this.currentR:this.currentR+this.dr;if(!v&&p>g){let C=p;p=g,g=C}let _=d.typeName==Xr.UP||d.typeName==Xr.DOWN||d.typeName==Xr.AROUND,b=this.menu.addText(this.d3Config,this.d3Svc,d.text,d.typeName,y,y,this.textDr,this.textHeight,p,g,(_?1:0)*(this.lineIndex+d.delayIndex)*this.delta,2*this.delta,this.dr,this.d3Config.lineWidth,v,d.onClick,_).setComplementedByMenuName(d.complementedByTypeName).setForceOn(d.forceOn);this.menu.addAlt(d.typeName,b),h-=f}),o&&(this.currentR+=this.dr),++this.lineIndex,this}}class AV{constructor(o=null){this.onSelect=o}static builder(){return new AV}}class IV extends Ei{constructor(o,a,c,u){super(o,a,c),this.menuState=u}static builder(){return new IV("",null,null,AV.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}setOnSelect(o=null){return this.menuState.onSelect=o,this}}class qqe{constructor(o=ih.Default,a="\u0411\u0438\u0431\u043b\u0438\u044f",c=512,u=512,h=null,d=kV.builder()){this.theme=o,this.name=a,this.width=c,this.height=u,this.data=h,this.menuBuilder=d}clear(){return this}regenerate(){return this}getWidth(){return this.width}getHeight(){return this.height}updateThemeConfig(o){switch(this.theme){case ih.Dark:o.colorBackground="#0e161b",o.colorMain="white";break;case ih.Light:o.colorBackground="#00364D",o.colorMain="white";break;case ih.Dark2:o.colorBackground="white",o.colorMain="#0e161b";break;case ih.Light2:o.colorBackground="white",o.colorMain="#00364D"}}getFontHeight(o){return Math.ceil(o.width/23)}generate(o,a,c){a.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b=!0,this.updateThemeConfig(a),a.rects=[o.createBackground(a)];let h=this.name,d=this.getFontHeight(a),f=Math.ceil(d/10*3),p=o.textSizeDirect(h.substring(0,1),d,300),g=p.height;a.circles=[];let v=50-(null==p?void 0:p.height);a.rects.push(...o.createCross(a,!1,a.width/2-v/2,a.height/2-v-(null==p?void 0:p.height)/2,v,v));let C=()=>{S.switchState(null,a,x),S.hideOrShowMainMenu(null,a,x,null),this.data&&this.data.menuState&&this.data.menuState.onSelect&&this.data.menuState.onSelect(null)};a.texts.push(ri.builder().setText(h).setTextAnchor("middle").setFontSize(`${d}px`).translate(a.width/2,a.height/2+p.height/4).rotate(0).setColor(a.colorMain).addClass("cursor").addEvent(Fi.builder().setName("click").setFunc(C))),a.circles.push(Hp.builder().translate(a.width/2,a.height/2).setR(50).setFillColor("#00000000").setStrokeColor(a.colorMain).addClass("cursor").addEvent(Fi.builder().setName("click").setFunc(C)));let x=400,S=this.menuBuilder.build(o,a,()=>this.data&&this.data.menuState&&this.data.menuState.onSelect?this.data.menuState.onSelect:null,50,g,f,d,x);var w=ri.builder().setText(this.name).setTextAnchor("middle").setFontSize(`${d}px`).translate(a.width/2,50).rotate(0).setColor("none");return a.texts.push(w),a.onItemSelected=O=>{w.d3Object&&w.d3Object.interrupt().transition(100).attr("fill-opacity",0).style("fill",a.colorMain).transition().duration(2e3).attr("fill-opacity",1).text(O).transition().delay(1e3).transition().duration(1e3).attr("fill-opacity",0)},!0}}const Zqe=["mySvg"],Xqe=function(l){return{"fade-in-3":!0,"print-only":l}};function Yqe(l,o){if(1&l&&(np(),me(0,"svg",5,6)),2&l){const a=Z();F("ngClass",eo(1,Xqe,a.printOnly))}}const PV=function(l){return{centeredImage:!0,"fade-in-3":!0,"print-only":l}};function Kqe(l,o){if(1&l&&(np(),me(0,"svg",7,6)),2&l){const a=Z();F("ngClass",eo(1,PV,a.printOnly))}}const Jqe=function(l){return{centeredImage:!1,"fade-in-3":!0,"print-only":l}};function eZe(l,o){if(1&l&&(np(),me(0,"svg",8,6)),2&l){const a=Z();F("ngClass",eo(1,Jqe,a.printOnly))}}function tZe(l,o){if(1&l&&(np(),me(0,"svg",9,6)),2&l){const a=Z();F("ngClass",eo(1,PV,a.printOnly))}}function nZe(l,o){if(1&l&&(np(),me(0,"svg",10,6)),2&l){const a=Z();F("ngClass",eo(1,PV,a.printOnly))}}class Jo{constructor(o,a,c,u){this.generator=o,this.onCreate=a,this.onUpdate=c,this.onSend=u}create(){this.onCreate&&this.onCreate(this)}update(){return!!this.onUpdate&&this.onUpdate(this)}send(){this.onSend&&this.onSend(this)}}class ou{constructor(o="JsScheduler",a="\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",c="/scenes/app.logo.scene.txt",u=null,h=210,d=297,f=0,p=null){this.genName=o,this.logoText=a,this.scene=c,this.tag=u,this.svgWidth=h,this.svgHeight=d,this.type=f,this.generator=p}static builder(){return new ou}setGenName(o){return this.genName=o,this}setLogoText(o){return this.logoText=o,this}setScene(o){return this.scene=o,this}setTag(o){return this.tag=o,this}setSvgWidth(o){return this.svgWidth=o,this}setSvgHeight(o){return this.svgHeight=o,this}setType(o){return this.type=0,this}setGenerator(o){return this.generator=o,this}}let mc=(()=>{class l{constructor(a,c,u,h){this.config=a,this.d3Svc=c,this.cacheService=u,this.themesService=h,this.name="\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",this.svgImage=null,this.generator=null,this.allReady=!1,this.svgData=ou.builder(),this.updateSvgAction=new $X(d=>{this.changed()},100,(d,f)=>this.config.post(f,d)),this.printOnly=!1,this.iStartPageIndex=0,this.iHorizontalPagesCount=1,this.iVerticalPagesCount=1,this.pagesCount=new wt,this.svg=new wt,this.onCommand=new wt,this.onPreviewCommand=new wt,this.showFooter=!0,this.sSchedulerText=""}get data(){return this.svgData}set data(a){this.svgData=a,this.config.post(()=>{this.recreate()})}set type(a){this.svgData.type=a}get type(){return this.svgData.type}get scene(){return this.data.scene}set scene(a){this.data.scene=a,this.updateSvgAction.requestAction(void 0)}get logoText(){return this.data.logoText}set logoText(a){this.data.logoText=a,this.changed()}set genName(a){this.data.genName=a}get genName(){return this.data.genName}get tag(){return this.data.tag}set tag(a){this.data.tag=a,this.generator&&this.changed()}get startPageIndex(){return this.iStartPageIndex}set startPageIndex(a){this.iStartPageIndex=a,this.updateSvgAction.requestAction(void 0)}get horizontalPagesCount(){return this.iHorizontalPagesCount}set horizontalPagesCount(a){this.iHorizontalPagesCount=a,this.updateSvgAction.requestAction(void 0)}get verticalPagesCount(){return this.iVerticalPagesCount}set verticalPagesCount(a){this.iVerticalPagesCount=a,this.updateSvgAction.requestAction(void 0)}set svgWidth(a){this.svgData.svgWidth=a}get svgWidth(){return this.svgData.svgWidth}set svgHeight(a){this.svgData.svgHeight=a}get svgHeight(){return this.svgData.svgHeight}get schedulerText(){return this.sSchedulerText}set schedulerText(a){this.sSchedulerText!=a&&(this.sSchedulerText=a,this.changed())}ngOnInit(){}get version(){return this.config.environment.version}newGenerator(){let a=c=>new Jo(new Cle(c,this.svgWidth,this.svgHeight),()=>{var u;let h=[];this.tag?h.push(...this.tag.commands.map(p=>({cmd:p,enabled:!0}))):this.config.environment.applications.forEach(f=>{h.push({cmd:Ca.builder().setName(f.name).setTag(f),enabled:f.applicationEnabled&&!f.applicationHidden})});let d=h.find(f=>{var p;return(null===(p=f.cmd.tag)||void 0===p?void 0:p.id)==this.config.defaultApplication});d||(d=h[0],d.cmd.tag&&d.cmd.tag.id&&(this.config.defaultApplication=d.cmd.tag.id)),(null===(u=this.generator)||void 0===u?void 0:u.generator).setCommands(h.filter(f=>f.enabled).map(f=>f.cmd),d?d.cmd:null).setOnCommandHandler(f=>{this.sendCommand(f.tag)}).setOnPreviewCommandHandler(f=>{this.sendPreviewCommand(f.tag)})},u=>{if(this.tag){let d=u.generator.setCommands(this.tag.commands).isGenerated();return u.generator.regenerate(),d}return!1},()=>{});return"Logo"==this.genName?new Jo(new D_(this.themesService.nowIsDay()?ol.Light:ol.Dark,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoLight"==this.genName?new Jo(new D_(ol.Light,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoDark"==this.genName?new Jo(new D_(ol.Dark,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoLight2"==this.genName?new Jo(new D_(ol.Light2,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoDark2"==this.genName?new Jo(new D_(ol.Dark2,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Default"==this.genName?new Jo(new sl("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Texts"==this.genName?new Jo(new gle("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Circles"==this.genName?new Jo(new mle("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Ellipses"==this.genName?new Jo(new vle("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Rects"==this.genName?new Jo(new yle("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Graphics"==this.genName?new Jo(new _le("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Animation"==this.genName?new Jo(new ble("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"UIInteraction"==this.genName?new Jo(new xle("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"BibleMenu"==this.genName?new Jo(new qqe(this.themesService.nowIsDay()?ih.Light:ih.Dark,"\u0411\u0438\u0431\u043b\u0438\u044f",this.svgWidth,this.svgHeight,this.tag),()=>{},()=>!1,()=>{}):"Menu"==this.genName?a(this.themesService.nowIsDay()?ko.Light:ko.Dark):"MenuDay"==this.genName?a(ko.Light):"MenuDay2"==this.genName?a(ko.Light2):"MenuNight"==this.genName?a(ko.Dark):"MenuNight2"==this.genName?a(ko.Dark2):"this"==this.genName&&this.svgData.generator?new Jo(this.svgData.generator,()=>{},()=>!1,()=>{}):new Jo(new iV(this.svgWidth,this.svgHeight),()=>{var c;(null===(c=this.generator)||void 0===c?void 0:c.generator).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(this.schedulerText).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(this.cacheService,this.scene).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(this.startPageIndex).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(this.horizontalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(this.verticalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(this.showFooter).\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b("\u0442\u0435\u043a\u0441\u0442\u041b\u043e\u0433\u043e\u0442\u0438\u043f\u0430",this.logoText)},()=>{var c;return(null===(c=this.generator)||void 0===c?void 0:c.generator).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(this.schedulerText).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(this.startPageIndex).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(this.horizontalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(this.verticalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(this.showFooter).\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b("\u0442\u0435\u043a\u0441\u0442\u041b\u043e\u0433\u043e\u0442\u0438\u043f\u0430",this.logoText),!1},()=>{var c;this.pagesCount.emit((null===(c=this.generator)||void 0===c?void 0:c.generator).\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446())})}ngAfterViewInit(){this.allReady=!0,this.recreate()}recreate(){!this.allReady||this.mySvgRef&&(this.generator=this.newGenerator(),this.generator.create(),this.svgImage=new j8(this.generator.generator.getWidth(),this.generator.generator.getHeight(),this.d3Svc,this.mySvgRef,this.generator.generator),this.svgImage.updateSvg(()=>{var a;this.generator.update(),this.saveSvg(),null===(a=this.generator)||void 0===a||a.send()}))}changed(){this.generator&&(this.generator.update()||this.svgImage.clear().updateSvg(()=>{var a;null===(a=this.generator)||void 0===a||a.send(),this.saveSvg()}))}saveSvg(){var a=this.mySvgRef.nativeElement,u=(new XMLSerializer).serializeToString(a);u.match(/^<svg[^>]+xmlns="http\:\/\/www\.w3\.org\/2000\/svg"/)||(u=u.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg"')),u.match(/^<svg[^>]+"http\:\/\/www\.w3\.org\/1999\/xlink"/)||(u=u.replace(/^<svg/,'<svg xmlns:xlink="http://www.w3.org/1999/xlink"')),this.svg.emit(u='<?xml version="1.0" standalone="no"?>\r\n'+u)}sendCommand(a){this.onCommand.emit(a)}sendPreviewCommand(a){this.onPreviewCommand.emit(a)}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(mM),L(Df),L(Mo))},l.\u0275cmp=qe({type:l,selectors:[["app-svg-js-image"]],viewQuery:function(a,c){if(1&a&&ai(Zqe,5),2&a){let u;Vt(u=zt())&&(c.mySvgRef=u.first)}},inputs:{data:"data",type:"type",printOnly:"printOnly",scene:"scene",logoText:"logoText",genName:"genName",tag:"tag",startPageIndex:"startPageIndex",horizontalPagesCount:"horizontalPagesCount",verticalPagesCount:"verticalPagesCount",showFooter:"showFooter",svgWidth:"svgWidth",svgHeight:"svgHeight",schedulerText:"schedulerText"},outputs:{pagesCount:"pagesCount",svg:"svg",onCommand:"onCommand",onPreviewCommand:"onPreviewCommand"},decls:5,vars:5,consts:[["width","100%","height","100%",3,"ngClass",4,"ngIf"],["width","2100","height","2970",3,"ngClass",4,"ngIf"],["width","114","height","114",3,"ngClass",4,"ngIf"],["width","5120","height","5120",3,"ngClass",4,"ngIf"],["width","5120","height","1280",3,"ngClass",4,"ngIf"],["width","100%","height","100%",3,"ngClass"],["mySvg",""],["width","2100","height","2970",3,"ngClass"],["width","114","height","114",3,"ngClass"],["width","5120","height","5120",3,"ngClass"],["width","5120","height","1280",3,"ngClass"]],template:function(a,c){1&a&&(Y(0,Yqe,2,3,"svg",0),Y(1,Kqe,2,3,"svg",1),Y(2,eZe,2,3,"svg",2),Y(3,tZe,2,3,"svg",3),Y(4,nZe,2,3,"svg",4)),2&a&&(F("ngIf",0==c.type),R(1),F("ngIf",1==c.type),R(1),F("ngIf",114==c.type),R(1),F("ngIf",512==c.type),R(1),F("ngIf",512128==c.type))},directives:[yn,ii],styles:[".centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}"]}),l})();const iZe=["myCanvas"],rZe=["mySvgMulti"];function sZe(l,o){if(1&l&&me(0,"app-d3-svg",7),2&l){const a=o.$implicit;F("generator",a.generator)("d3Config",a.d3Config)}}function oZe(l,o){if(1&l){const a=gt();D(0,"div",8),D(1,"app-svg-js-image",9),ee("svg",function(u){const d=Le(a).$implicit;return Z().onSaveSvg(d.genName,u)}),k(),k()}if(2&l){const a=o.$implicit;R(1),F("svgWidth",a.width)("svgHeight",a.height)("scene",a.scene)("genName",a.genName)}}class vc{constructor(o,a,c,u){this.width=o,this.height=a,this.scene=c,this.genName=u}}class RV{constructor(o,a){this.generator=o,this.d3Config=a}static builder(){return new RV(null,null)}setGenerator(o){return this.generator=o,this}setD3Config(o){return this.d3Config=o,this}}let aZe=(()=>{class l{constructor(a,c,u,h,d,f){this.config=a,this.uiConfig=c,this.d3Svc=u,this.themeSvc=h,this.cacheService=d,this.ks=f,this.generators=[],this.svgImage2=[],this.svgJsImages=[new vc(512,512,"/scenes/cross.scene.txt","Logo"),new vc(512,512,"/scenes/cross.scene.txt","LogoLight"),new vc(512,512,"/scenes/cross.scene.txt","LogoLight2"),new vc(512,512,"/scenes/cross.scene.txt","LogoDark"),new vc(512,512,"/scenes/cross.scene.txt","LogoDark2"),new vc(512,512,"/scenes/cross.scene.txt","Default"),new vc(512,512,"/scenes/cross.scene.txt","Texts"),new vc(512,512,"/scenes/cross.scene.txt","Circles"),new vc(512,512,"/scenes/cross.scene.txt","Ellipses"),new vc(512,512,"/scenes/cross.scene.txt","Rects"),new vc(512,512,"/scenes/cross.scene.txt","Graphics"),new vc(512,512,"/scenes/cross.scene.txt","Animation"),new vc(512,512,"/scenes/cross.scene.txt","UIInteraction")],this.svgSaved=new Map}ngOnInit(){this.uiConfig.setAppRoutes(null)}addGenerator(a,c=null){return this.generators.push(RV.builder().setGenerator(a).setD3Config(c)),(a instanceof Sle||a instanceof iV)&&a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(this.cacheService),this}ngAfterViewInit(){let h=this.themeSvc.nowIsDay()?"black":"white";this.addGenerator(new FM,t0.builder().setColorBackground("").setColorMain(h).setColorText(h).setColorLines(h).setLineWidth(1).addParam("\u0442\u0435\u043a\u0441\u0442","integral(x*sin(x),x);.")),this.addGenerator(new sl),this.addGenerator(new gle),this.addGenerator(new mle),this.addGenerator(new vle),this.addGenerator(new yle),this.addGenerator(new _le),this.addGenerator(new ble),this.addGenerator(new xle),this.addGenerator(new D_);let d=this.generators[this.generators.length-1];d&&d.generator&&this.svgImage2.push(new j8(d.generator.getWidth(),d.generator.getHeight(),this.d3Svc,this.mySvgMultiRef,d.generator)),this.addGenerator((()=>(new vM).setTheme(this.themeSvc.nowIsDay()?Bs.Light3:Bs.Dark3))()),this.addGenerator((()=>{let f=new mqe,p=[Gp.builder().setName("\u0414\u0435\u043a\u0430\u0431\u0440\u044c").setIndex(0).setIWidth(7)];["\u041f","\u0412","\u0421","\u0427","\u041f","\u0421","\u0412"].forEach((v,y)=>{p.push(Gp.builder().setName(v).setIndex(y+7).setIWidth(1))});for(let v=0;v<31;v++){let y=""+(v+1);p.push(Gp.builder().setName(y).setIndex(v+16).setIWidth(1))}return f.setTheme(this.themeSvc.nowIsDay()?Sa.Light3:Sa.Dark3).setCommands(p).setOnCommandHandler(v=>{let y=["black","#d94a4a","#DFF0D0","#4aaed9"],_=v.tag;_||(_=y[0]);let b=y.indexOf(_);b=(b+1)%y.length,_=y[b],v.tag=_,v.rect.d3Object.transition().duration(1e3).style("fill",_),v.text.d3Object.transition().duration(1e3).style("fill","black"==_?"white":"black").style("stroke","black"==_?"white":"black").style("stroke-width",0)})})()),this.addGenerator(new Sle),this.addGenerator((new iV).\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b("\u0442\u0435\u043a\u0441\u0442\u041b\u043e\u0433\u043e\u0442\u0438\u043f\u0430","\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435")),this.addGenerator((()=>(new Cle).setTheme(this.themeSvc.nowIsDay()?ko.Light2:ko.Dark2).setCommands(this.generators.map((f,p)=>Ca.builder().setName(f.generator.name).setTag(p))).setOnCommandHandler(f=>{let p=this.generators[f.tag];p&&p.generator&&this.svgImage2[0].setGenerator(p.generator).clear().updateSvg()}).setAutoClickOnChange(!0))()),this.svgImage2.forEach(f=>{f.updateSvg()})}downloadAllImages(){this.onSaveSvgDirect()}onSaveSvg(a,c){this.svgSaved.set(a,c)}onSaveSvgDirect(a=1){const c=new kM;this.svgSaved.forEach((p,g)=>{c.file("page"+g+".svg",p)});let u='<html>\n<head>\n    <style type="text/css">\n    .centeredImage {\n      max-width: 100%;\n      max-height: 100%;\n      width: auto;\n      height: auto;\n    }\n</style>\n</head>\n<body>';this.svgSaved.forEach((p,g,m)=>{u+=`<div><img src="page${g}.svg" width="630" height="891" alt="page${g}" class="centeredImage"></div>`}),u+="</body></html>",c.file("pages.html",u);let h=new Date,d=(p,g)=>{let m=""+p;for(;m.length<g;)m="0"+m;return m},f=h.getFullYear()+"_"+d(h.getMonth()+1,2)+"_"+d(h.getDate(),2);c.generateAsync({type:"blob"}).then(p=>{const g=new Blob([p],{type:"octet/stream"}),m=`\u043b\u043e\u0433\u043e\u0442\u0438\u043f\u044b.${f}.zip`;this.config.isPlatformAndroid()?this.ks.addTempFile(m,g).then(v=>{wf.startDownload(v.fileName,m)}):wf.saveData(g,m)})}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(mM),L(Mo),L(Df),L(Xp))},l.\u0275cmp=qe({type:l,selectors:[["app-d3-examples"]],viewQuery:function(a,c){if(1&a&&(ai(iZe,5),ai(rZe,5)),2&a){let u;Vt(u=zt())&&(c.myCanvasRef=u.first),Vt(u=zt())&&(c.mySvgMultiRef=u.first)}},decls:11,vars:2,consts:[["id","load-font"],[3,"generator","d3Config",4,"ngFor","ngForOf"],["class","h512",4,"ngFor","ngForOf"],["width","512","height","512",1,"centeredImage","fade-in-3"],["mySvgMulti",""],[1,"no-print"],[1,"btn","btn-success","btn-block","ucs","center","top-space",3,"click"],[3,"generator","d3Config"],[1,"h512"],[3,"svgWidth","svgHeight","scene","genName","svg"]],template:function(a,c){1&a&&(D(0,"div"),D(1,"div",0),ne(2,"\u0411\u043b\u0483\u0436\u0435\u0301\u043d\u044a \u043c\ua64b\u0301\u0436\u044a"),k(),Y(3,sZe,1,2,"app-d3-svg",1),Y(4,oZe,2,4,"div",2),np(),me(5,"svg",3,4),function X$(){!function Z1e(){ni.lFrame.currentNamespace=null}()}(),D(7,"div"),D(8,"div",5),D(9,"button",6),ee("click",function(){return c.downloadAllImages()}),ne(10,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),k(),k(),k(),k()),2&a&&(R(3),F("ngForOf",c.generators),R(1),F("ngForOf",c.svgJsImages))},directives:[_i,Ule,mc],styles:[".h512[_ngcontent-%COMP%]{height:512px;width:512px}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}.centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}.rxanimated[_ngcontent-%COMP%]{animation:rxakf 3s linear infinite;stroke:#00f;fill:green;rx:1!important;width:50px!important}@keyframes rxakf{0%{rx:100;ry:1}50%{rx:400;ry:4}to{rx:100;ry:1}}.ani[_ngcontent-%COMP%]{animation:moveCircle 4s linear infinite}@keyframes moveCircle{0%{rx:1}50%{rx:4}to{rx:1}}"]}),l})();class lZe{constructor(o,a){this.zipService=o,this.cacheService=a}}class yc{constructor(o,a){this.action=o,this.name=a,this.from=null,this.upto=null,this.onStop=null,this.config=null}static of(o,a){return new yc(o,a)}start(o,a=null){this.config=a,this.onStop=o,this.from=new Date}stop(){this.upto=new Date}getTime(){return this.upto.getTime()-this.from.getTime()}str(o,a){for(;o.length<a;)o="0"+o;return o}getTimeString(){let o=this.upto.getTime()-this.from.getTime(),a=Math.floor(o/1e3),c=Math.floor(a/60),u=Math.floor(c/60);return o-=1e3*a,a-=60*c,c-=60*u,this.str(""+u,2)+":"+this.str(""+c,2)+":"+this.str(""+a,2)+"."+this.str(""+o,3)+" \u043e\u0442 "+this.from.toISOString()}toString(){return this.getTimeString()}stopAndGetResult(o){return this.stop(),zM.of(this.name,o,this.getTimeString())}sendAndGetResult(o){return this.onStop(o,this)}delay(o,a){return setTimeout(()=>{o&&o()},a),zM.of("","","")}}class zM{constructor(o,a,c){this.name=o,this.error=a,this.info=c}static of(o,a,c){return new zM(o,a,c)}}class AS extends pe{constructor(){super(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u0440\u0438\u043c\u0435\u0440 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0432\u0441\u0442\u0430\u0432\u043a\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432"),null,new Map),this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u0430\u0440\u0441\u0435\u0440\u0430\u0412\u0414\u0432\u0438\u0436\u043e\u043a(o){let a=AS.\u043d\u043e\u0432\u044b\u0439();o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u041f\u0440\u0438\u043c\u0435\u0440",(c,u)=>a,!0)}static \u043d\u043e\u0432\u044b\u0439(){return new AS}static \u043d\u043e\u0432\u044b\u0439\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f\u0412\u0441\u0442\u0430\u0432\u043a\u0430\u041e\u0431\u044a\u0435\u043a\u0442\u043e\u0432\u041f\u0440\u0438\u043c\u0435\u0440(){return new AS}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let o=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();o.set("\u0435\u0434\u0438\u043d\u0438\u0446\u0430",pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1)),o.set("\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041d\u0430\u0415\u0434\u0438\u043d\u0438\u0446\u0443",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")]),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0435\u0434\u0438\u043d\u0438\u0446\u0430")])]))))),o.set("\u043d\u0430\u0442\u0438\u0432\u043d\u043e\u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041d\u0430\u0415\u0434\u0438\u043d\u0438\u0446\u0443",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((a,c)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c[1].\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+10))))))}}class IS extends pe{constructor(){super(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u0430\u0440\u0441\u0435\u0440"),null,new Map),this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u0430\u0440\u0441\u0435\u0440\u0430\u0412\u0414\u0432\u0438\u0436\u043e\u043a(o){let a=IS.\u043d\u043e\u0432\u044b\u0439();o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u041f\u0430\u0440\u0441\u0435\u0440",(c,u)=>a,!0)}static \u043d\u043e\u0432\u044b\u0439(){return new IS}static \u043d\u043e\u0432\u044b\u0439\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u041f\u0430\u0440\u0441\u0435\u0440(){return new IS}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(o){return pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(o))}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let o=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();o.set("\u0435\u0434\u0438\u043d\u0438\u0446\u0430",pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1)),o.set("\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041d\u0430\u0415\u0434\u0438\u043d\u0438\u0446\u0443",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")]),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0435\u0434\u0438\u043d\u0438\u0446\u0430")])]))))),o.set("\u043d\u0430\u0442\u0438\u0432\u043d\u043e\u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041d\u0430\u0415\u0434\u0438\u043d\u0438\u0446\u0443",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((a,c)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c[1].\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+10))))))}}class l0{constructor(o,a){this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430=o,this.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=a}static \u043d\u043e\u0432\u044b\u0439(){return new l0(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(o){return this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430="string"==typeof o?pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o):o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(o){return this.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=o,this}}class ea{static tests(){return[yc.of(ea.\u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f\u0412\u0441\u0442\u0430\u0432\u043a\u0430\u041e\u0431\u044a\u0435\u043a\u0442\u043e\u0432\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432,"\u0442\u0435\u0441\u0442 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u043f\u0430\u0440\u0441\u0435\u0440\u0430 \u0441 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439: \u0432\u0441\u0442\u0430\u0432\u043a\u0430 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432"),yc.of(ea.\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432,"\u0442\u0435\u0441\u0442 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u043f\u0430\u0440\u0441\u0435\u0440\u0430 \u0441 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439: \u0441\u0430\u043c \u043f\u0430\u0440\u0441\u0435\u0440"),yc.of(ea.\u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b,"\u0442\u0435\u0441\u0442 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434"),yc.of(ea.\u043f\u0430\u043a\u0435\u0442\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b,"\u0442\u0435\u0441\u0442 \u043f\u0430\u043a\u0435\u0442\u043d\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434"),yc.of(ea.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b,"\u0442\u0435\u0441\u0442 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434"),yc.of(ea.\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439\u041a\u043e\u0434,"\u0442\u0435\u0441\u0442 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u0430\u0440\u0441\u0435\u0440\u0430 (\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u043a\u043e\u0434)"),yc.of(ea.\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439\u041a\u043e\u0434\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432,"\u0442\u0435\u0441\u0442 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u0430\u0440\u0441\u0435\u0440\u0430 (\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u043a\u043e\u0434) \u0441 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439")]}static \u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(o,a,c){return l0.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(o).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(a.map(u=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u)))).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(c)}static \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b(o){let a="",c=new ru;return c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0443\u043c\u043c\u0430",(h,d)=>d[0].\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[0]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()+h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),!0),c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u0441\u0443\u043c\u043c\u0430",(h,d)=>d[0].\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[0]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()+h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),!0),c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0438\u043d",(h,d)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.min(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e())),!0),c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0430\u043a\u0441",(h,d)=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.max(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e())),!0),[ea.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0447\u0438\u0441\u043b\u0430 \u0441\u0443\u043c\u043c\u0430",[1,2],3),ea.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0447\u0438\u0441\u043b\u0430 \u043c\u0438\u043d",[1,2],1),ea.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0447\u0438\u0441\u043b\u0430 \u043c\u0430\u043a\u0441",[1,2],2),ea.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0441\u0443\u043c\u043c\u0430",[1,2],3),ea.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0441\u0443\u043c\u043c\u0430",["1","2"],"12"),l0.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(()=>pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f."))).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f."),l0.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f. (2)")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f. (2)")].forEach((h,d)=>{let f=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(h.\u043a\u043e\u043c\u0430\u043d\u0434\u0430);f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=h.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442&&(a+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${f}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${h.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442}; \u0438\u043d\u0434\u0435\u043a\u0441 \u043a\u043e\u043c\u0430\u043d\u0434\u044b: ${d}.`)}),o.sendAndGetResult(a)}static \u043f\u0430\u043a\u0435\u0442\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b(o){let a="",c=new ru;c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e();let u=[ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(2)])]),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])])],h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u),[],null,!0,!0,!1,null),d=4;h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=d&&(a+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${h}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${d}`);let f=[ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)]),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])]),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])])]),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])];h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f),[],null,!0,!0,!1,null),d=1,h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=d&&(a+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${h}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${d}`);let p=[ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)]),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u044d\u043d\u0435\u0440\u0433\u0438\u0447\u043d\u043e\u0435 \u0438\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])]),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])])]),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])];return h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p),[],null,!0,!0,!1,null),d=2,h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=d&&(a+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${h}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${d}`),o.sendAndGetResult(a)}static \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b(o){let a="",c=new ru;c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e();let u=[ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)])],h=[ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])]),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])];c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u),[],null,!0,!0,!1,null);for(let d=1;d<5;d++){let f=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h),[],null,!0,!0,!1,null),p=d;f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=p&&(a+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${f}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${p}`)}return o.sendAndGetResult(a)}static \u0440\u0430\u0437\u0431\u0438\u0442\u044c\u041d\u0430\u0422\u0435\u0441\u0442\u044b(o){return o.split(/\/\/EOT/).map(h=>h.trim()).filter(h=>!!h).map(h=>{let d=h.trim().split("\n").map(g=>g.trimRight()),f=d[d.length-1],p="//null"===f?null:+f.substr(2);return l0.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d.filter(g=>!g.startsWith("//")).join("\r\n")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(p)})}static \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439\u041a\u043e\u0434\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432(o,a="/tests/universal_engine/all_tests.txt"){return o.delay(()=>{let u=o.config.cacheService.getRestPoint(a,null);o.config.cacheService.getTextRestcallUrl(u,h=>{try{let d="",f=new s0,p=ea.\u0440\u0430\u0437\u0431\u0438\u0442\u044c\u041d\u0430\u0422\u0435\u0441\u0442\u044b(h),g=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));p.forEach((m,v)=>{console.log("------------------------------"),console.log(m.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());let y=f.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(m.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),_=new ru;_.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),_.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",(b,C)=>{var x=C[0].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();if("\u0435\u0434\u0438\u043d\u0438\u0446\u0430"===x)return pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);if("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f"===x)return b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")]),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430")])]))));if("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f\u0420\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u0430\u044f"===x){let S=f.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a("\n                  \u0440\u0430\u0437\u0431\u043e\u0440 \u043c\u0435\u0442\u043e\u0434\u0430 \u0438\u043c\u044f(\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440){\n                    \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 + \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430;\n                  }\n                  ");return b.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(S[0],null)}return null},!0);{let b=_.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(y),[pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),g],[pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c")],!0,!0,!1,null)),C=m.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;(!b||b.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=C)&&(d+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${b?b.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${C}`,console.log(`\u041e\u0448\u0438\u0431\u043a\u0430: #${v}: ${b?b.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null} == ${C}`))}}),o.sendAndGetResult(d)}catch(d){o.sendAndGetResult("Error: "+d)}})},1)}static \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439\u041a\u043e\u0434(o){let a="",c=new s0;return[l0.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443('\n        \u043a\u043b\u0430\u0441\u0441\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n          \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430 = \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c("\u0435\u0434\u0438\u043d\u0438\u0446\u0430");\n          \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f = \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f");\n          \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f\u0420\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u0430\u044f = \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f\u0420\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u0430\u044f");\n          \u0435\u0449\u0451\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(\u0437\u043d\u0430\u0447){\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0437\u043d\u0430\u0447 + \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430;\n          }\n          \u0431\u0430\u0437\u043e\u0432\u043e\u0435\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c\u043e\u0435\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442){\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(12)\n              + \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(12)\n              + \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c\u043e\u0435\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 + \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442\n              + \u0435\u0449\u0451\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(2)\n            ;\n          }\n        };\n        \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 = \u043a\u043b\u0430\u0441\u0441\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430();\n        \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440.\u0431\u0430\u0437\u043e\u0432\u043e\u0435\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(70,1);\n      ').\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(100)].forEach(u=>{let h=c.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(u.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());console.log("------------------------------"),console.log(u.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());let d=new ru;d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0441\u0435\u0440(c),d.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),d.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",(f,p)=>{var g=p[0].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();if("\u0435\u0434\u0438\u043d\u0438\u0446\u0430"===g)return pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);if("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f"===g)return f.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")]),ct.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430")])]))));if("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f\u0420\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u0430\u044f"===g){let m=c.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a("\n              \u0440\u0430\u0437\u0431\u043e\u0440 \u043c\u0435\u0442\u043e\u0434\u0430 \u0438\u043c\u044f(\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440){\n                \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 + \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430;\n              }\n            ");return f.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(m[0],null)}return null},!0);{let f=d.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h),[],null,!0,!0,!1,null)),p=u.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;(!f||f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=p)&&(a+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${f?f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${p}`)}}),o.sendAndGetResult(a)}static \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f\u0412\u0441\u0442\u0430\u0432\u043a\u0430\u041e\u0431\u044a\u0435\u043a\u0442\u043e\u0432\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432(o,a="/tests/universal_engine/dynamic_objects_tests.txt"){return o.delay(()=>{let u=o.config.cacheService.getRestPoint(a,null);o.config.cacheService.getTextRestcallUrl(u,h=>{try{let d="",f=new s0;ea.\u0440\u0430\u0437\u0431\u0438\u0442\u044c\u041d\u0430\u0422\u0435\u0441\u0442\u044b(h).forEach(g=>{console.log("------------------------------"),console.log(g.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());let m=f.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(g.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),v=new ru;v.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),AS.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u0430\u0440\u0441\u0435\u0440\u0430\u0412\u0414\u0432\u0438\u0436\u043e\u043a(v);{let y=v.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m),[],null,!0,!0,!1,null)),_=g.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;(!y||y.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=_)&&(d+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${y?y.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${_}`)}}),o.sendAndGetResult(d)}catch(d){o.sendAndGetResult("Error: "+d)}})},1)}static \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432(o,a="/tests/universal_engine/parser_tests.txt"){return o.delay(()=>{let u=o.config.cacheService.getRestPoint(a,null);o.config.cacheService.getTextRestcallUrl(u,h=>{try{let d="",f=new s0;ea.\u0440\u0430\u0437\u0431\u0438\u0442\u044c\u041d\u0430\u0422\u0435\u0441\u0442\u044b(h).forEach(g=>{console.log("------------------------------"),console.log(g.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());let m=f.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(g.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),v=new ru;v.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),IS.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u0430\u0440\u0441\u0435\u0440\u0430\u0412\u0414\u0432\u0438\u0436\u043e\u043a(v);{let y=v.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m),[],null,!0,!0,!1,null)),_=g.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;(!y||y.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=_)&&(d+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${y?y.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${_}`)}}),o.sendAndGetResult(d)}catch(d){o.sendAndGetResult("Error: "+d)}})},1)}}class UM{constructor(o,a){this.fileName=o,this.content=a}static builder(){return new UM("","")}setFileName(o){return this.fileName=o,this}setContent(o){return this.content=o,this}}let FV=(()=>{class l{zip(a){return new Promise((c,u)=>{const h=new kM;a.forEach(d=>{d.content&&h.file(d.fileName,d.content)}),h.generateAsync({type:"blob"}).then(d=>{d.arrayBuffer().then(f=>{c(f)})})})}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();function cZe(l,o){1&l&&me(0,"clr-icon",7)}function uZe(l,o){1&l&&me(0,"clr-icon",8)}const $le=function(l,o){return{"bg-4":l,"bg-6":o}};function hZe(l,o){if(1&l&&(D(0,"div"),D(1,"span",3),Y(2,cZe,1,0,"clr-icon",4),Y(3,uZe,1,0,"clr-icon",5),k(),D(4,"span",6),ne(5),k(),D(6,"span"),ne(7),k(),D(8,"span",3),ne(9),k(),D(10,"span"),ne(11),k(),k()),2&l){const a=o.$implicit,c=o.index;R(1),F("ngClass",ps(8,$le,!a.error,!!a.error)),R(1),F("ngIf",!!a.error),R(1),F("ngIf",!a.error),R(2),vi(" ",c+1," "),R(2),vi("",a.name,": "),R(1),F("ngClass",ps(11,$le,!a.error,!!a.error)),R(1),en(a.error?a.error:"\u0443\u0441\u043f\u0435\u0448\u043d\u043e"),R(2),vi(" (",a.info,")")}}function dZe(l,o){1&l&&(D(0,"div"),me(1,"clr-icon",8),ne(2," \u0412\u0441\u0435 \u0442\u0435\u0441\u0442\u044b \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u044b. "),k())}function fZe(l,o){1&l&&(D(0,"div"),D(1,"span",9),ne(2," \u0412\u044b\u043f\u043e\u043b\u043d\u044f\u044e... "),k(),k())}let pZe=(()=>{class l{constructor(a,c,u){var d;this.config=a,this.zipService=c,this.cacheService=u,this.testResults=[],this.tests=[],this.testConfig=null,this.tests.push(...(d=ea.tests(),"UniversalEngineTest::",d.map(g=>(g.name="UniversalEngineTest::"+g.name,g)))),this.testConfig=new lZe(this.zipService,this.cacheService)}static tests(){return[yc.of(l.firstTest,"\u041f\u0435\u0440\u0432\u044b\u0439 \u0442\u0435\u0441\u0442"),yc.of(l.secondTest,"\u0412\u0442\u043e\u0440\u043e\u0439 \u0442\u0435\u0441\u0442"),yc.of(l.thirdTest,"\u0422\u0440\u0435\u0442\u0438\u0439 \u0442\u0435\u0441\u0442"),yc.of(l.forthTest,"\u0427\u0435\u0442\u0432\u0451\u0440\u0442\u044b\u0439 \u0442\u0435\u0441\u0442")]}static firstTest(a){return a.sendAndGetResult("")}static secondTest(a){return a.sendAndGetResult("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0442\u0435\u0441\u0442\u0430.")}static thirdTest(a){throw new Error("\u041d\u0435\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0442\u0440\u0435\u0442\u044c\u0435\u0433\u043e \u0442\u0435\u0441\u0442\u0430.")}static forthTest(a){return a.delay(()=>a.sendAndGetResult(""),1200)}ngOnInit(){}runTests(){this.testResults=[];let a=0,c=()=>{if(a>=this.tests.length)return;let u=null,h=null;try{h=this.tests[a++],h.start((d,f)=>{let p=f.stopAndGetResult(d);return p&&this.testResults.push(p),this.config.post(c,1),p},this.testConfig),u=h.action(h),u||(u=h.sendAndGetResult("\u041d\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430."))}catch(d){u=h.sendAndGetResult(""+d)}};this.config.post(c,1)}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(FV),L(Df))},l.\u0275cmp=qe({type:l,selectors:[["app-tests"]],decls:6,vars:3,consts:[[1,"btn","btn-primary","btn-block",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass"],["shape","times",4,"ngIf"],["shape","check",4,"ngIf"],[1,"red"],["shape","times"],["shape","check"],[1,"spinner","spinner-inline"]],template:function(a,c){1&a&&(D(0,"div"),D(1,"button",0),ee("click",function(){return c.runTests()}),ne(2,"\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0442\u0435\u0441\u0442\u044b"),k(),Y(3,hZe,12,14,"div",1),Y(4,dZe,3,0,"div",2),Y(5,fZe,3,0,"div",2),k()),2&a&&(R(3),F("ngForOf",c.testResults),R(1),F("ngIf",c.testResults.length==c.tests.length),R(1),F("ngIf",c.testResults.length!=c.tests.length&&c.testResults.length>0))},directives:[_i,ii,yn,Ws],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();function gZe(l,o){if(1&l&&(D(0,"div",7),me(1,"app-svg-js-image",8),k()),2&l){const a=o.$implicit,c=Z();R(1),F("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",c.logText)("type",1)("startPageIndex",a)("horizontalPagesCount",c.horizontalPagesCount)("verticalPagesCount",c.verticalPagesCount)}}let mZe=(()=>{class l{constructor(a){this.router=a,this.logText=["*\u041c\u043e\u043b\u0435\u0431\u0435\u043d","*\u041f\u0440\u0435\u0441\u0432\u044f\u0442\u043e\u0439 \u0411\u043e\u0433\u043e\u0440\u043e\u0434\u0438\u0446\u0435","\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","\u0415\u0432\u0433\u0435\u043d\u0438\u044f","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u0421\u0435\u0440\u0433\u0438\u044f","\u041b\u0438\u043b\u0438\u0438","\u041c\u0430\u0440\u0438\u0438","\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","\u0415\u0432\u0433\u0435\u043d\u0438\u044f","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u0421\u0435\u0440\u0433\u0438\u044f","\u041b\u0438\u043b\u0438\u0438","\u041c\u0430\u0440\u0438\u0438","\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","\u0415\u0432\u0433\u0435\u043d\u0438\u044f","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u0421\u0435\u0440\u0433\u0438\u044f","\u041b\u0438\u043b\u0438\u0438","\u041c\u0430\u0440\u0438\u0438"].join(", "),this.extraPages=[],this.horizontalPagesCount=2,this.verticalPagesCount=2}ngOnInit(){}onPagesCount(a){this.extraPages=[];let c=this.horizontalPagesCount*this.verticalPagesCount,u=a-c,h=0;for(;u>0;)u=Math.max(0,u-c),h+=c,this.extraPages.push(h)}}return l.\u0275fac=function(a){return new(a||l)(L(Ps))},l.\u0275cmp=qe({type:l,selectors:[["app-memorial-pages-editor"]],decls:9,vars:11,consts:[[1,"no-print"],[1,"clr-form"],[1,"clr-control-container"],["clrTextarea","","name","day","required","",1,"memorialsText",3,"ngModel","ngModelChange"],[1,"clr-subtext"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount","pagesCount"],["class","pageBreakBefore",4,"ngFor","ngForOf"],[1,"pageBreakBefore"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount"]],template:function(a,c){1&a&&(D(0,"div",0),D(1,"form",1),D(2,"div",2),D(3,"textarea",3),ee("ngModelChange",function(h){return c.logText=h}),k(),k(),D(4,"span",4),ne(5,"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u043f\u0438\u0441\u043e\u043a"),k(),k(),k(),D(6,"div"),D(7,"app-svg-js-image",5),ee("pagesCount",function(h){return c.onPagesCount(h)}),k(),k(),Y(8,gZe,2,9,"div",6)),2&a&&(R(3),F("ngModel",c.logText),R(4),F("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",c.logText)("type",1)("startPageIndex",0)("horizontalPagesCount",c.horizontalPagesCount)("verticalPagesCount",c.verticalPagesCount),R(1),F("ngForOf",c.extraPages))},directives:[hy,cy,ef,Sl,TN,cm,No,Co,mc,_i],styles:[".h512[_ngcontent-%COMP%]{width:210px;height:297px;margin:auto}.centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}.memorialsText[_ngcontent-%COMP%]{width:97vw;height:10em}"]}),l})();class Mf{constructor(o=null){this.curValue=o}getCurValue(o){return this.isChanged()&&(this.curValue=o()),this.curValue}isChanged(){return null==this.curValue}markChanged(){this.curValue=null}}class wa extends Mf{constructor(o=null){super(),this.rememberValue=o}static builder(){return new wa}checkAndGetValue(o){let a=[];for(let c in o)a.push(c,o[c]);return this.checkChanged(...a),this.getCurValue(()=>o)}checkChanged(...o){let a=!1;if(null!=this.rememberValue&&null!=o&&this.rememberValue.length==o.length){a=!0;for(let c=0;c<this.rememberValue.length;c++)if(this.rememberValue[c]!==o[c]){a=!1;break}}return a||(this.rememberValue=o,this.markChanged()),this}}class Vn{constructor(o,a){this.component=o,this.data=a,this.detector=wa.builder()}}class Kp extends Ei{constructor(o,a,c,u,h=!1){super(o,a,c),this.menuState=u,this.whiteBack=h}static builder(){return new Kp("",null,null,$p.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}setWhiteBack(o){return this.whiteBack=o,this}setMenuState(o){return this.menuState=o,this}addCommand(o){return this.menuState.addCommand(o),this}}const vZe=function(l){return{whiteBG:l}};let HM=(()=>{class l{constructor(a){this.config=a}get menuData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getMenuState(){return this.menuData.menuState}onCommand(a){this.data.onClick&&this.data.onClick(a)}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-menu"]],inputs:{data:"data"},decls:2,vars:8,consts:[[3,"ngClass"],[3,"genName","tag","svgWidth","svgHeight","printOnly","onCommand"]],template:function(a,c){1&a&&(D(0,"div",0),D(1,"app-svg-js-image",1),ee("onCommand",function(h){return c.onCommand(h)}),k(),k()),2&a&&(F("ngClass",eo(6,vZe,c.menuData.whiteBack)),R(1),F("genName",c.getMenuState().genName)("tag",c.getMenuState())("svgWidth",512)("svgHeight",64)("printOnly",c.getMenuState().printOnly))},directives:[ii,mc],styles:[".whiteBG[_ngcontent-%COMP%]{background-color:#fff!important}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})(),Wle=(()=>{class l extends Yp{constructor(a,c,u){super(a,c,u),this.data=null,this.myBibleMenuData=IV.builder().setOnSelect(h=>{this.onBibleSelect(h)}),this.menuData=Kp.builder().addCommand(Ca.builder().setName("\u0411\u0438\u0431\u043b\u0438\u044f")).setOnClick(h=>{h&&this.onMenuClick(h.text)}),this.addMenuLink(qn.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("cog").setIsActive(()=>!0)),this.addMenuLink(qn.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book").setOnClick(()=>{this.onMenuClick("")}).setIsActive(()=>!1)),this.addMenuLink(qn.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("bookmark").setOnClick(()=>{this.onMenuClick("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438")}).setIsActive(()=>!1)),this.addMenuLink(qn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.onMenuClick("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP")}).setIsActive(()=>!1))}get bibleMenuData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}onMenuClick(a){this.data&&this.data.onClick&&this.data.onClick(a)}onBibleSelect(a){let c=a&&a.on?a.text:"\u0411\u0438\u0431\u043b\u0438\u044f",u=a&&a.on?a.typeName:"CENTER",h=c+(u?" "+u:"");this.menuData=Kp.builder().addCommand(Ca.builder().setName(c).setTag(h)).setOnClick(d=>{this.onMenuClick(d)})}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(nh))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-bible-menu"]],inputs:{data:"data"},features:[pn],decls:5,vars:5,consts:[[1,"main-container","bgColor","wh100"],[1,"content-container","centeredImage"],[1,"h80",3,"genName","svgWidth","svgHeight","tag"],[1,"login-footer"],[1,"gapTitle",3,"data"]],template:function(a,c){1&a&&(D(0,"div",0),D(1,"div",1),me(2,"app-svg-js-image",2),k(),D(3,"div",3),me(4,"app-dynamic-menu",4),k(),k()),2&a&&(R(2),F("genName","BibleMenu")("svgWidth",512)("svgHeight",512)("tag",c.myBibleMenuData),R(2),F("data",c.menuData))},directives:[mc,HM],styles:[".login-footer[_ngcontent-%COMP%]{height:20vh;padding-top:0;padding-bottom:5vh;padding-left:0}.centeredImage[_ngcontent-%COMP%]{top:0;bottom:0;left:0;right:0;max-width:100%;max-height:100%;margin:auto;overflow:auto}.wh100[_ngcontent-%COMP%]{width:100vw;height:calc(100vh - 60px)}.h80[_ngcontent-%COMP%]{height:calc(78vh - 60px);width:78vh}"]}),l})();class NV extends Mf{constructor(){super()}static builder(){return new NV}}class PS extends Ei{constructor(o,a,c,u){super(o,a,c),this.menuState=u}static builder(){return new PS("",null,null,NV.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}}class $M{constructor(o,a){this.workerId=o,this.message=a}static builder(){return new $M(-1,null)}setWorkerId(o){return this.workerId=o,this}setMessage(o){return this.message=o,this}}let Gle=(()=>{class l{constructor(a){this.type=a,this.id=0,this.callbackId=-1,this.id=l.newId()}static newId(){return l.staticId++}setCallbackId(a){return this.callbackId=a,this}}return l.staticId=0,l})(),yZe=(()=>{class l extends Gle{constructor(a){super(l.TYPE),this.pageLoadedFrom=a}static builder(){return new l("")}setPageLoadedFrom(a){return this.pageLoadedFrom=a,this}}return l.TYPE="SetupWorkerRequest",l})(),od=null;class Ta{constructor(){this.handler=null,this.workerId=Ta.nextWorkerId()}static nextWorkerId(){return Ta.iNextWorkerId++}static builder(){return new Ta}enabled(){return!!od}subscribe(){od&&(Ta.appWorkerStaticOnmessageMap.set(this.workerId,o=>{this.handler&&this.handler(o)}),od.onmessage=({data:o})=>{let a=o;if(Ta.appWorkerStaticOnmessageMap.has(a.workerId)){let c=Ta.appWorkerStaticOnmessageMap.get(a.workerId);c&&c(a.message)}})}unsubscribe(){od&&Ta.appWorkerStaticOnmessageMap.delete(this.workerId)}sendMessage(o="hello"){od&&od.postMessage($M.builder().setWorkerId(this.workerId).setMessage(o))}setOnMessage(o){return this.handler=o,this.subscribe(),this}}Ta.iNextWorkerId=0,Ta.appWorkerStaticOnmessageMap=new Map,"undefined"!=typeof Worker&&(od=new Worker(St.tu(new URL(St.p+St.u(273),St.b))),od.onmessage=({data:l})=>{let o=l;if(Ta.appWorkerStaticOnmessageMap.has(o.workerId)){let a=Ta.appWorkerStaticOnmessageMap.get(o.workerId);a&&a(o.message)}},od.onerror=l=>{},od.postMessage($M.builder().setWorkerId(-1).setMessage(yZe.builder().setPageLoadedFrom(pageLoadedFrom))));class Jp extends Gle{}let Qle=(()=>{class l extends Jp{constructor(a,c){super(l.TYPE),this.libraryRef=a,this.libraryType=c}static builder(){return new l("","")}setLibraryRef(a){return this.libraryRef=a,this}setLibraryType(a){return this.libraryType=a,this}}return l.TYPE="LibraryInfoRequest",l})(),jle=(()=>{class l extends Jp{constructor(a,c,u){super(l.TYPE),this.libraryType=a,this.bookRef=c,this.loadBooksEnabled=u}static builder(){return new l("","",!0)}setLibraryType(a){return this.libraryType=a,this}setBookRef(a){return this.bookRef=a,this}setLoadBooksEnabled(a){return this.loadBooksEnabled=a,this}}return l.TYPE="BookInfoRequest",l})(),qle=(()=>{class l extends Jp{constructor(a,c,u){super(l.TYPE),this.libraryType=a,this.bookRef=c,this.languages=u}static builder(){return new l("","",[])}setLibraryType(a){return this.libraryType=a,this}setBookRef(a){return this.bookRef=a,this}setLanguages(a){return this.languages=a,this}addLanguage(a){return this.languages.push(a),this}}return l.TYPE="BookRequest",l})();class LV{constructor(o,a,c){this.bookRef=o,this.bookPath=a,this.bookPage=c}static builder(){return new LV("","","")}setBookRef(o){return this.bookRef=o,this}setBookPath(o){return this.bookPath=o,this}setBookPage(o){return this.bookPage=o,this}}let Zle=(()=>{class l extends Jp{constructor(a){super(l.TYPE),this.pages=a}static builder(){return new l([])}setBookPages(a){return this.pages=a,this}addBookPage(a){return this.pages.push(a),this}}return l.TYPE="PagesRequest",l})(),BV=(()=>{class l extends Jp{constructor(a){super(l.TYPE),this.pages=a}static builder(){return new l([])}setPages(a){return this.pages=a,this}addPage(a){return this.pages.push(a),this}}return l.TYPE="PagesResponse",l})();class VV{constructor(o,a,c){this.bookRef=o,this.path=a,this.content=c}static builder(){return new VV("","","")}setBookRef(o){return this.bookRef=o,this}setPath(o){return this.path=o,this}setContent(o){return this.content=o,this}}let Xle=(()=>{class l extends Jp{constructor(a){super(l.TYPE),this.metaBooks=a}static builder(){return new l([])}setMetaBooks(a){return this.metaBooks=a,this}addMetaBook(a){return this.metaBooks.push(a),this}}return l.TYPE="BookResponse",l})(),Yle=(()=>{class l extends Jp{constructor(a,c,u){super(l.TYPE),this.bookRef=a,this.metaContent=c,this.loadBooksEnabled=u}static builder(){return new l("","",!0)}setBookRef(a){return this.bookRef=a,this}setMetaContent(a){return this.metaContent=a,this}setLoadBooksEnabled(a){return this.loadBooksEnabled=a,this}}return l.TYPE="BookInfoResponse",l})(),Kle=(()=>{class l extends Jp{constructor(a,c){super(l.TYPE),this.libraryRef=a,this.metaContent=c}static builder(){return new l("","")}setLibraryRef(a){return this.libraryRef=a,this}setMetaContent(a){return this.metaContent=a,this}}return l.TYPE="LibraryInfoResponse",l})();class Jle{constructor(o=null){this.messageSender=o,this.requests=new Map}send(o,a){return this.messageSender&&(this.requests.set(a.type,a),this.messageSender(o,a)),this}post(o,a){return this}runAll(o,a,c){let u=0,h=()=>{if(u>=o.length)return void(c&&c(!0));let d=o[u++];a(d,f=>{f?h():c&&c(!1)})};h()}}class zV{constructor(o,a="/static"){this.config=o,this.sRestPoint=a,this.textCache=new Map,this.waitingTextCache=new Map}get coding(){return this.config.coding}get restPoint(){return this.coding?"/staticb":this.sRestPoint}getRestPoint(o,a,c=null){const u=this.config.isRelativeCacheService()||this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return kr.merge(kr.merge(a||u,null!=c?c:this.restPoint),o)}completeOnDone(o,a){let c=this.waitingTextCache.get(o);c&&(c.forEach(u=>{this.config.post(()=>{u&&u(a)})}),this.waitingTextCache.delete(o))}getTextRestcallUrl(o,a){if(this.coding){if(this.textCache.has(o)){let c=this.textCache.get(o);if(null!=c)return void this.config.post(()=>{a&&a(c)})}return this.waitingTextCache.has(o)?void(a&&this.waitingTextCache.get(o).push(a)):(a&&this.waitingTextCache.set(o,[a]),this.getBinRestcallUrlRaw(o,c=>{if(c){let u=new Uint8Array(c),h=BM.fromByteArray(u);this.completeOnDone(o,h)}else a&&a(null)}))}return this.getTextRestcallUrlRaw(o,a)}getTextRestcallUrlRaw(o,a){if(this.textCache.has(o)){let u=this.textCache.get(o);if(null!=u)return void this.config.post(()=>{a&&a(u)})}if(this.waitingTextCache.has(o))a&&this.waitingTextCache.get(o).push(a);else{a&&this.waitingTextCache.set(o,[a]);var c=new XMLHttpRequest;c.onload=()=>{if(a){let u=4===c.readyState&&200===c.status?c.responseText:null;null!=u?this.textCache.set(o,u):this.textCache.delete(o),this.completeOnDone(o,u)}},c.open("get",o,!0),c.send()}}getBinRestcallUrlRaw(o,a){let c=o;if(this.coding){let h=c.lastIndexOf(".");h>=0&&(c=c.substring(0,h)+".bin")}var u=new XMLHttpRequest;u.onload=()=>{if(a){let d=new Uint8Array(4===u.readyState&&200===u.status?u.response:null),f=BM.dtr(d,-1);a&&a(f)}},u.open("get",c,!0),u.responseType="arraybuffer",u.send()}}class UV extends Jle{constructor(o=null){super(o),this.cacheService=null}setCacheService(o){return this.cacheService=o,this}post(o,a){switch(a.type){case Qle.TYPE:this.onLibraryInfoRequest(o,a);break;case jle.TYPE:this.onBookInfoRequest(o,a);break;case qle.TYPE:this.onBookRequest(o,a);break;case Zle.TYPE:this.onPagesRequest(o,a);break;default:throw new Error(`Unknown message type: ${a.type}.`)}return this}onLibraryInfoRequest(o,a){let c=Kle.builder().setCallbackId(a.id);a.libraryRef?this.loadLibraryInfo(a,c,a.libraryType+"/"+a.libraryRef+".library.txt",u=>{this.send(o,c)}):this.send(o,c)}loadLibraryInfo(o,a,c,u=null){let h=this.cacheService.getRestPoint(c,null);this.cacheService.getTextRestcallUrl(h,d=>{a.setMetaContent(d||"").setLibraryRef(o.libraryRef),u&&u(!!d)})}onBookInfoRequest(o,a){let c=Yle.builder().setCallbackId(a.id);a.bookRef?this.loadBookInfo(a,c,a.libraryType+"/"+a.bookRef+".book.txt",u=>{this.send(o,c)}):this.send(o,c)}loadBookInfo(o,a,c,u=null){let h=this.cacheService.getRestPoint(c,null);this.cacheService.getTextRestcallUrl(h,d=>{a.setMetaContent(d||"").setBookRef(o.bookRef),u&&u(!!d)})}onBookRequest(o,a){let c=Xle.builder().setCallbackId(a.id),u=a.languages.map(h=>h);u.length||u.push("CS","Sinodal"),u=u.map(h=>kr.merge("/"+a.libraryType,a.bookRef+"_"+h+"/index.txt")),a.bookRef?this.runAll(u,(h,d)=>{this.loadBookPath(a,c,h,d)},h=>{this.send(o,c)}):this.send(o,c)}loadBookPath(o,a,c,u=null){let h=this.cacheService.getRestPoint(c,null);this.cacheService.getTextRestcallUrl(h,d=>{a.addMetaBook(VV.builder().setBookRef(o.bookRef).setPath(c).setContent(d||"")),u&&u(!!d)})}onPagesRequest(o,a){let c=BV.builder().setCallbackId(a.id);this.runAll(a.pages,(u,h)=>{let d=this.findPathPrefix(u.bookPath),f=this.cacheService.getRestPoint(kr.merge(d,u.bookPage),null);this.cacheService.getTextRestcallUrl(f,p=>{c.addPage(p||""),h(!0)})},u=>{this.send(o,c)})}findPathPrefix(o){let a=o.lastIndexOf("/");return o.substring(0,a)}}class RS{static builder(){return new RS}Book(){return HV.builder()}NameValue(){return $V.builder()}NamePath(){return WV.builder()}}class HV{constructor(o,a){this.settings=o,this.content=a,this.cs=null,this.cs2=null}static builder(){return new HV([],[])}setSettings(o){return this.settings=o,this}setContent(o){return this.content=o,this}getCs(){return null==this.cs&&(this.cs=!!this.settings.find(o=>"\u044f\u0437\u044b\u043a"===o.name.toLowerCase()&&"\u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439"===o.value.toLowerCase())),this.cs}setCs(o){return this.cs=o,this}getCs2(){return null==this.cs2&&(this.cs2=!!this.settings.find(o=>"\u044f\u0437\u044b\u043a"===o.name.toLowerCase()&&"\u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439-ucs8"===o.value.toLowerCase())),this.cs2}setCs2(o){return this.cs2=o,this}}class $V{constructor(o,a,c){this.name=o,this.value=a,this.value2=c}static builder(){return new $V("","",[])}setName(o){return this.name=o,this}setValue(o){return this.value=o,this}setValue2(o){return this.value2=o,this}}class WV{constructor(o,a,c){this.name=o,this.path=a,this.path2=c}static builder(){return new WV("","",[])}setName(o){return this.name=o,this}setPath(o){return this.path=o,this}setPath2(o){return this.path2=o,this}}var FS=(()=>(function(l){l.\u0422\u0435\u043a\u0441\u0442="\u0442\u0435\u043a\u0442",l.\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435="\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",l.\u0413\u0440\u0430\u0444\u0438\u043a="\u0433\u0440\u0430\u0444\u0438\u043a",l.\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u042d\u043b\u0435\u043c\u0435\u043d\u0442="\u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u042d\u043b\u0435\u043c\u0435\u043d\u0442",l.\u0418\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f="\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f"}(FS||(FS={})),FS))();class NS{constructor(o,a,c,u){this.\u0442\u0438\u043f=o,this.\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430=a,this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b=c,this.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442=u,this.\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440=wa.builder()}static builder(){return new NS(FS.\u0422\u0435\u043a\u0441\u0442,!0,[],null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0438\u043f(o){return this.\u0442\u0438\u043f=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430(o){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b(o){return this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b=o,this}get fragments(){return this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442(o){return this.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442=o,this}}class _s{constructor(o,a,c,u){this.classes=o,this.text=a,this.link=c,this.component=u}static builder(){return new _s({},"",null,null)}setClasses(o){return this.classes=o,this}setText(o){return this.text=o,this}setLink(o){return this.link=o,this}setComponent(o){return this.component=o,this}}let GV=(()=>{class l{constructor(a){this.config=a}get textFragmentData(){return this.data}get classes(){return this.textFragmentData.config.fragment.classes}get text2(){return this.textFragmentData.config.fragment.text}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-text-fragment"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass"]],template:function(a,c){1&a&&(D(0,"span",0),ne(1),k()),2&a&&(F("ngClass",c.classes),R(1),en(c.text2?c.text2:"\xa0"))},directives:[ii],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class QV{constructor(o){this.fragment=o}static builder(){return new QV(null)}setFragment(o){return this.fragment=o,this}}class LS extends Ei{constructor(o,a,c,u){super(o,a,c),this.config=u}static builder(){return new LS("",null,null,QV.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}}class ece{static uuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,o=>(o^crypto.getRandomValues(new Uint8Array(1))[0]&15>>o/4).toString(16))}}class $o{constructor(o,a,c,u,h,d=!0){this.path=o,this.isText=a,this.content=c,this.data=u,this.pathZip=h,this.printable=d}getPath(){return this.pathZip?this.pathZip:this.path}}class WM{constructor(o,a,c){this.index=o,this.text=a,this.classes=c,this.lines=[]}}class jV{constructor(o,a){this.lineNumber=o,this.translations=a}}class _Ze{constructor(o,a,c,u,h){this.psalom=o,this.slava=a,this.lines=c,this.names=u,this.textJustifyClass=h,this.translations=[],this.memorials=[]}sync(){return this.translations=[],this.lines.forEach((o,a)=>{o.translations.forEach((c,u)=>{for(;this.translations.length<=u;)this.translations.push(new WM("","",""));let h=this.translations[u];c.classes&&(h.classes=c.classes),c.index&&(h.index=c.index),h.lines.push(new jV(o.lineNumber,[new WM(c.index,c.text,c.classes)]))})}),this}get translationsCount(){return this.lines.length?this.lines[0].translations.length:0}}class bZe{constructor(o,a,c,u,h){this.name=o,this.link=a,this.id=c,this.order=u,this.children=h}}class ZV{constructor(o,a){this.textSizeClass=o,this.lines=a}}class xZe{constructor(o,a,c){this.type=o,this.link=a,this.name=c}}class CZe{constructor(o,a){this.kafizma=o,this.psalmy=a,this.uuidContent="",this.uuidContributer="",this.textSizeClass="",this.textJustifyClass="",this.name="",this.psalomName="",this.application="",this.applicationId="",this.developerId="",this.developerName="",this.developerNameSortOrder="",this.developerLink="",this.date="",this.content=[],this.fileNames=[],this.molitva=new ZV("",[]),this.startMolitva=new ZV("",[]),this.endMolitva=new ZV("",[])}}class A_{constructor(o,a,c,u,h,d,f,p){this.name=o,this.psalomName=a,this.allBooks=c,this.bookNames=u,this.allBooksChapters=h,this.emptyFirstLines=d,this.showLineIndexes=f,this.showMiddleContent=p}static builder(){return new A_("","",[],[],[],[],!0,!0)}setName(o){return this.name=o,this}setPsalomName(o){return this.psalomName=o,this}setAllBooks(o){return this.allBooks=o,this}setBookNames(o){return this.bookNames=o,this}setAllBooksChapters(o){return this.allBooksChapters=o,this}setEmptyFirstLines(o){return this.emptyFirstLines=o,this}setShowLineIndexes(o){return this.showLineIndexes=o,this}setShowMiddleContent(o){return this.showMiddleContent=o,this}}class XV{constructor(o){this.requestsPack=o}static builder(){return new XV([])}setRequestPack(o){return this.requestsPack=o,this}addRequest(o){return this.requestsPack.push(o),this}}class BS{constructor(o){this.handler=o}static builder(){return new BS(null)}setHandler(o){return this.handler=o,this}print(o){this.handler&&this.handler(o)}}let tce=(()=>{class l{constructor(a,c,u,h,d){this.cacheSvc=a,this.zipSvc=c,this.config=u,this.uiConfig=h,this.ks=d,this.prefix="templates/",this.baseContents=[],this.uniqueId=0,this.tocIndex=1,this.zipEntries=[],this.content=[],this.kafizmyContent=null,this.startRequest=null,this.setup()}setup(){this.baseContents=[new $o("ebook/mimetype.txt",!0,"",null,"mimetype"),new $o("ebook/stylesheet.css",!0,"",null,"stylesheet.css"),new $o("ebook/PonomarUnicode.ttf",!1,"",null,"PonomarUnicode.ttf"),new $o("ebook/triodion-ieUcs.ttf",!1,"",null,"triodion-ieUcs.ttf"),new $o("ebook/logo.png",!1,"",null,"logo.png"),new $o("ebook/meta_inf/container.xml.txt",!0,"",null,"META-INF/container.xml"),new $o("ebook/toc.ncx.txt",!0,"",null,"toc.ncx"),new $o("ebook/metadata.opf.txt",!0,"",null,"metadata.opf"),new $o("ebook/content.xhtml",!0,"",null,"content.xhtml"),new $o("ebook/titlepage.xhtml",!0,"",null,"titlepage.xhtml"),new $o("kafizma.parallel.xhtml",!0,"",null,"",!1),new $o("kafizma.parallel.redline.xhtml",!0,"",null,"",!1),new $o("kafizma.parallel.redline.nobreaks.xhtml",!0,"",null,"",!1),new $o("kafizma.xhtml",!0,"",null,"",!1),new $o("kafizma.nobreaks.xhtml",!0,"",null,"",!1)]}clearGeneratePrintRequestsPack(a,c){this.zipEntries=[],this.content=[],this.startRequest=a,this.kafizmyContent=c,this.tocIndex=1}startGeneratePrintRequestsPack(a,c){}nextUniqueId(){return this.uniqueId++}nextTocIndex(){return++this.tocIndex}newMustacheFileName(a,c,u,h,d){return new bZe(a,c,u+"_"+h,h,d)}findContent(a){return this.content.find(c=>c.path==a)}addToc(a,c,u,h,d){a.content.push(new xZe(c,u,h)),a.fileNames.push(this.newMustacheFileName(h,u,d,`${this.nextTocIndex()}`,[]))}doGeneratePrintRequestsPack(a,c){let u=a.bookNames.map(d=>d.endsWith("\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439")||d.endsWith("\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439 (\u0440\u0443\u0441)")?"cs":d.endsWith("\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439-UCS8")?"cs2":d.endsWith("\u043f\u0440\u0435\u0444\u0438\u043a\u0441")?"right":"").map(d=>d+" "+(this.uiConfig.ui.fineText.getBooleanValue()?"ftext":"")),h=!!a.bookNames.find(d=>"\u043f\u0440\u0435\u0444\u0438\u043a\u0441"===d);for(let d=0;d<a.allBooksChapters.length;++d){let f=this.findContent(h?"kafizma.parallel.redline.xhtml":this.uiConfig.ui.parallel.getBooleanValue()?this.uiConfig.ui.lineBreaks.getBooleanValue()?"kafizma.parallel.redline.xhtml":"kafizma.parallel.redline.nobreaks.xhtml":this.uiConfig.ui.lineBreaks.getBooleanValue()?"kafizma.xhtml":"kafizma.nobreaks.xhtml");if(!f)continue;let p=(b,C)=>a.allBooks[b].flatMap((x,S)=>x.filter((w,O)=>O==C).map((w,O)=>new WM(`${C}`,w,u[S]))),g=a.allBooks[d][0].map((b,C)=>{let x=a.emptyFirstLines[d].reduce((M,A)=>M>A?A:M,100),w=p(d,C),O=C+1-x,T=w.map(M=>M.lines.length>0).reduce((M,A,I,E)=>M&&A,!0);return new jV(`${O>0&&!T&&a.showLineIndexes?O:""}`,w)}),m=new _Ze(a.allBooksChapters[d],[],g,[],this.uiConfig.ui.fineText.getBooleanValue()?"ftext":""),v=a.allBooks[d].length;for(let b=0;b<v;++b){let C=new WM("","",u[b]);C.lines=g.map(x=>new jV(x.lineNumber,[x.translations[b]])),m.translations.push(C)}c.psalmy=[m];const y=Mustache.render(f.content,c,{navPoint:"",item:"",itemref:""});let _=this.nextUniqueId();this.content.push(new $o(`glava_${a.allBooksChapters[d]}_${_}.xhtml`,!0,y,null,"")),this.addToc(c,"TextTOC",`glava_${a.allBooksChapters[d]}_${_}.xhtml`,`${c.psalomName} ${a.allBooksChapters[d]}`,`num_glava_${a.allBooksChapters[d]}_${_}`)}}updateContent(a){!this.kafizmyContent||(a.content=this.kafizmyContent.content,a.fileNames=this.kafizmyContent.fileNames)}endGeneratePrintRequestsPack(a,c,u){this.content.forEach(h=>{if(h.printable)if(h.isText)try{const d=Mustache.render(h.content,h.data?h.data:c,{navPoint:'\n    <navPoint id="{{id}}" playOrder="{{order}}">\n        <navLabel>\n          <text>{{name}}</text>\n        </navLabel>\n        <content src="{{link}}"/>{{#children}}{{>navPoint}}{{/children}}\n      </navPoint>',item:'\n    <item href="{{link}}" id="r{{id}}" media-type="application/xhtml+xml"/>{{#children}}{{>item}}{{/children}}',itemref:'\n    <itemref idref="r{{id}}"/>{{#children}}{{>itemref}}{{/children}}'});this.zipEntries.push(UM.builder().setFileName(h.getPath()).setContent(d))}catch(d){}else this.zipEntries.push(UM.builder().setFileName(h.getPath()).setContent(h.content))}),this.zipSvc.zip(this.zipEntries).then(h=>{const d=new Blob([h],{type:"octet/stream"}),f=(new Date).toISOString().split("T")[0];if(this.config.isPlatformAndroid()){const g=`${a.name}.epub`;this.ks.addTempFile(g,d).then(m=>{m&&m.success&&wf.startDownload(m.fileName,g),u(!0)})}else wf.saveData(d,`${a.name}.${f}.epub`),u(!0)})}loadBaseContent(a,c,u){let h=this.baseContents[a];h.isText?this.cacheSvc.getText(this.prefix+h.path,d=>{d?(this.content.push(new $o(h.path,h.isText,d,h.data,h.pathZip,h.printable)),this.config.post(()=>{c()})):(this.config.addAlert(Or.of(`\u041e\u0448\u0438\u0431\u043a\u0430: ${h.path}`,"\u041e\u041a",15)),u(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: ${h.path}.`))}):this.cacheSvc.getBinary(this.prefix+h.path,d=>{d?(this.content.push(new $o(h.path,h.isText,d,h.data,h.pathZip,h.printable)),this.config.post(()=>{c()})):(this.config.addAlert(Or.of(`\u041e\u0448\u0438\u0431\u043a\u0430: ${h.path}`,"\u041e\u041a",15)),u(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: ${h.path}.`))})}generate(a,c=!0,u=!0,h=!0){return new Promise((d,f)=>{let p=c?0:this.baseContents.length;const g=(this.uiConfig.ui.parallel.getBooleanValue()?"P":"")+(this.uiConfig.ui.coloredTranslations.getBooleanValue()?"C":"")+(this.uiConfig.ui.fineText.getBooleanValue()?"J":"")+(this.uiConfig.ui.showMolitvy.getBooleanValue()?"M":"");let m=new CZe(1,[]);m.name=a.name,m.psalomName=a.psalomName,m.application=this.config.getApplication().name,m.applicationId=this.config.getApplication().id,m.developerId=this.config.developerId,m.developerName=this.config.developerName,m.developerNameSortOrder=this.config.developerNameSortOrder,m.developerLink=this.config.developerLink,m.uuidContent=ece.uuidv4(),m.uuidContributer=ece.uuidv4(),m.application=`${this.config.getApplication().name} (${this.config.version}) ${g}`;const v=(new Date).toISOString(),y=v.lastIndexOf(".");m.date=v.substring(0,y)+"+00:00",c&&this.clearGeneratePrintRequestsPack(a,m);let _=()=>{let b=p++;b>=this.baseContents.length?(c?(this.startGeneratePrintRequestsPack(a,m),this.addToc(m,"TextTOC","titlepage.xhtml","\u041e\u0431\u043b\u043e\u0436\u043a\u0430","num_title"),this.addToc(m,"TextTOC","content.xhtml","\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","num_content")):this.updateContent(m),u&&this.doGeneratePrintRequestsPack(a,m),h?this.endGeneratePrintRequestsPack(a,m,C=>d(C)):d(!0)):this.loadBaseContent(b,()=>_(),C=>f(C))};_()})}}return l.\u0275fac=function(a){return new(a||l)(Ae(Df),Ae(FV),Ae(an),Ae(Xn),Ae(Xp))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class YV{constructor(o,a){this.libName=o,this.link=a}static builder(){return new YV("",null)}setLibName(o){return this.libName=o,this}setLink(o){return this.link=o,this}}class KV{constructor(o,a){this.fragment=o,this.link=a}static builder(){return new KV(null,null)}setFragment(o){return this.fragment=o,this}setLink(o){return this.link=o,this}}class JV extends Ei{constructor(o,a,c,u){super(o,a,c),this.config=u,this.id="",this.targetId="",this.waitingForSenderId="",this.printerHandler=BS.builder()}static builder(){return new JV("",null,null,KV.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}setId(o){return this.id=o,this}setTargetId(o){return this.targetId=o,this}setWaitingForSenderId(o){return this.waitingForSenderId=o,this}}class Pl extends Mf{constructor(o){super(),this.onRoute=o,this.logical=!0,this.shortName=!1,this.textIsPage=!1,this.chapter="",this.startLine=-1,this.endLine=-1,this.bookName="",this.languages=null}static builder(){return new Pl(null)}setShortName(o){return this.shortName=o,this.markChanged(),this}setTextIsPage(o){return this.textIsPage=o,this.markChanged(),this}setChapter(o){return this.chapter=o,this.markChanged(),this}setStartLine(o){return this.startLine=o,this.markChanged(),this}setEndLine(o){return this.endLine=o,this.markChanged(),this}setBookName(o){return this.bookName=o,this.markChanged(),this}setLanguages(o){return this.languages=o,this.markChanged(),this}setLogical(o){return this.logical=o,this.markChanged(),this}setOnRoute(o){return this.onRoute=o,this.markChanged(),this}route(o){this.onRoute&&this.onRoute(o)}}class Rl extends Ei{constructor(o,a,c,u,h){super(o,a,c),this.link=u,this.search=h,this.menuLinks=null,this.forceMenu=!1,this.hideUI=!1,this.enableEpub=!0,this.showPrintButtons=!1,this.handleMemorialNewTitleTarget="",this.facePage=!1,this.parallel=null,this.linebreaks=null,this.id="",this.targetId="",this.printerHandler=BS.builder(),this.autoPrint=!1}static builder(){return new Rl("",null,null,Pl.builder().setShortName(!0),"")}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}setLink(o){return this.link=o,this}setSearch(o){return this.search=o,this}setMenu(o){return this.menuLinks=o,this}setForceMenu(o){return this.forceMenu=o,this}setHideUI(o){return this.hideUI=o,this}setEpubEnabled(o){return this.enableEpub=o,this}setShowPrintButtons(o){return this.showPrintButtons=o,this}setHandleMemorialNewTitle(o){return this.handleMemorialNewTitleTarget=o,this}setFacePage(o){return this.facePage=o,this}setParallel(o){return this.parallel=o,this}setLinebreaks(o){return this.linebreaks=o,this}setId(o){return this.id=o,this}setTargetId(o){return this.targetId=o,this}setAutoPrint(o){return this.autoPrint=o,this}}function SZe(l,o){1&l&&(D(0,"span"),ne(1,"+"),k())}function wZe(l,o){if(1&l&&(D(0,"span"),ne(1),k()),2&l){const a=Z(2);R(1),vi("",a.link.endChapter,":")}}function TZe(l,o){if(1&l&&(D(0,"span"),ne(1),k()),2&l){const a=Z(2);R(1),en(a.link.endLine)}}function OZe(l,o){if(1&l&&(D(0,"span"),ne(1,"-"),Y(2,wZe,2,1,"span",2),Y(3,TZe,2,1,"span",2),k()),2&l){const a=Z();R(2),F("ngIf",a.link.endChapter>0),R(1),F("ngIf",a.link.endLine)}}function DZe(l,o){1&l&&me(0,"app-dynamic-library-book",4),2&l&&F("data",Z().bookData)}const kZe=function(l){return{"is-solid":l,cursor:!0,blue:!0}};let e6=(()=>{class l{constructor(a){this.config=a,this.bookData=Rl.builder(),this.checkLater=Tx.builder(),this.opened=!1}get linkFragmentData(){return this.data}get classes(){return this.linkFragmentData.config.fragment.classes}get link(){return this.linkFragmentData.config.link.link}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){var a,c;if(this.linkFragmentData.printerHandler.setHandler(u=>{this.bookData.printerHandler.print(u)}),this.checkLater.setConfig(this.config).setWaitingForSenderId(this.linkFragmentData.waitingForSenderId).checkEnabled(),this.linkFragmentData.config.link){let u=this.linkFragmentData.config.link.libName;u||(u="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"),this.opened!=!!(null===(c=null===(a=this.linkFragmentData.config.link)||void 0===a?void 0:a.link)||void 0===c?void 0:c.opened)&&this.config.post(()=>{var h,d;this.opened=!!(null===(d=null===(h=this.linkFragmentData.config.link)||void 0===h?void 0:h.link)||void 0===d?void 0:d.opened)}),this.bookData.setText(u).setId(this.linkFragmentData.id).setTargetId(this.linkFragmentData.targetId).setLink(Pl.builder().setOnRoute(h=>{}).setChapter(""+this.linkFragmentData.config.link.link.startChapter).setStartLine(this.linkFragmentData.config.link.link.startLine).setEndLine(this.linkFragmentData.config.link.link.endLine))}}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}toggleOpened(a){this.opened=!this.opened,a.stopPropagation()}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-link-fragment"]],inputs:{data:"data"},decls:7,vars:11,consts:[[3,"click"],[3,"ngClass","click"],[4,"ngIf"],[3,"data",4,"ngIf"],[3,"data"]],template:function(a,c){1&a&&(D(0,"span",0),ee("click",function(h){return h.stopPropagation()}),D(1,"clr-icon",1),ee("click",function(h){return c.toggleOpened(h)}),k(),D(2,"span",1),ee("click",function(h){return c.toggleOpened(h)}),ne(3),Y(4,SZe,2,0,"span",2),Y(5,OZe,4,2,"span",2),k(),Y(6,DZe,1,1,"app-dynamic-library-book",3),k()),2&a&&(R(1),F("ngClass",eo(9,kZe,c.opened)),et("shape","scroll"),R(1),F("ngClass",c.classes),R(1),Zb("",c.link.name,".",c.link.startChapter,":",c.link.startLine,""),R(1),F("ngIf",c.link.endChapter>0||c.link.endLine>=1e3),R(1),F("ngIf",c.link.endChapter>0||c.link.endLine>0&&c.link.endLine<1e3),R(1),F("ngIf",c.opened&&c.checkLater.enabled))},styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class t6{FragmentIdOp(){return i6.builder()}TextOp(){return r6.builder()}LinkOp(){return s6.builder()}}var Fl=(()=>(function(l){l[l.Text=0]="Text",l[l.Link=1]="Link",l[l.Id=2]="Id"}(Fl||(Fl={})),Fl))();class n6{constructor(o){this.type=o}}class i6 extends n6{constructor(o){super(Fl.Id),this.id=o}static builder(){return new i6("")}setId(o){return this.id=o,this}}class r6 extends n6{constructor(o,a){super(Fl.Text),this.text=o,this.color=a}static builder(){return new r6("","")}setText(o){return this.text=o,this}setColor(o){return this.color=o,this}}class s6 extends n6{constructor(o,a,c,u,h,d=null,f=!1,p="",g="",m=""){super(Fl.Link),this.name=o,this.startChapter=a,this.startLine=c,this.endChapter=u,this.endLine=h,this.langugages=d,this.opened=f,this.id=p,this.targetId=g,this.waitingForSenderId=m}static builder(){return new s6("",1,1,-1,-1)}setName(o){return this.name=o,this}setStartChapter(o){return this.startChapter=o,this}setStartLine(o){return this.startLine=o,this}setEndChapter(o){return this.endChapter=o,this}setEndLine(o){return this.endLine=o,this}setLanguages(o){return this.langugages=o,this}setOpened(o){return this.opened=o,this}setId(o){return this.id=o,this}setTargetId(o){return this.targetId=o,this}setWaitingForSenderId(o){return this.waitingForSenderId=o,this}}let o6=(()=>{class l{parseFragments(a,c,u,h="red"){let d=[],f=fragmentsParserStatic.parse(u,{builder:new t6});if(null!=f&&f.length)f[0].forEach(p=>{switch(p.type){case Fl.Text:{let g=p,m=_s.builder().setClasses(l.getLastClass(g.color,h)).setText(g.text),v=LS.builder();v.config.setFragment(m),d.push(m.setComponent(new Vn(GV,v)))}break;case Fl.Link:{let g=p,m=_s.builder().setClasses(l.getLastClass("\u0441",h));m.classes.cursor=!0;let v=JV.builder();v.config.setLink(YV.builder().setLink(g).setLibName(c(g.name))).setFragment(m),v.setId(g.id).setWaitingForSenderId(g.waitingForSenderId).setTargetId(g.targetId),d.push(m.setComponent(new Vn(e6,v)))}break;case Fl.Id:{let g=p,m=a.get(g.id);if(m)d.push(m);else{let v=_s.builder().setClasses(l.getLastClass("\u043a",h)).setText(g.id),y=LS.builder();y.config.setFragment(v),d.push(v.setComponent(new Vn(GV,y)))}}break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0442\u0438\u043f \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u0430: ${p.type}.`)}});else{let p=_s.builder().setText(""),g=LS.builder();g.config.setFragment(p),d.push(p.setComponent(new Vn(GV,g)))}return d}}return l.getLastClass=(o,a="red",c=!0)=>{let u={};switch(o){case"\u041a":case"\u043a":c&&(u[a]=c);break;case"\u0417":case"\u0437":c&&(u.green=c);break;case"\u0416":case"\u0436":c&&(u.yellow=c);break;case"\u0421":case"\u0441":c&&(u.blue=c);break;case"\u0424":case"\u0444":c&&(u.indigo=c);break;case"\u041f":case"\u043f":c&&(u.purple=c);break;case"\u041c":case"\u043c":c&&(u.cyan=c);break;case"\u041b":case"\u043b":c&&(u.greenYellow=c);break;case"\u0420":case"\u0440":c&&(u.darkRed=c)}return u},l})();class a6{constructor(o,a,c){this.book=o,this.lineIndex=a,this.bookSvc=c}static builder(){return new a6(null,0,null)}setBook(o){return this.book=o,this}setLineIndex(o){return this.lineIndex=o,this}setBookSvc(o){return this.bookSvc=o,this}}class I_ extends Ei{constructor(o,a,c,u){super(o,a,c),this.config=u}static builder(){return new I_("",null,null,a6.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}}let nce=(()=>{class l{constructor(a){this.viewContainerRef=a}}return l.\u0275fac=function(a){return new(a||l)(L(Pi))},l.\u0275dir=vt({type:l,selectors:[["","addComponent",""]]}),l})();function MZe(l,o){}let _c=(()=>{class l{constructor(){this.thisComponent=null,this.currentAdIndex=-1}set component(a){if(!a)throw new Error("Error: thisComponent is null.");this.thisComponent=a}get component(){return this.thisComponent}ngOnInit(){this.loadComponent()}ngOnDestroy(){}loadComponent(){const a=this.thisComponent,c=this.adHost.viewContainerRef;c.clear(),c.createComponent(a.component).instance.data=a.data}reload(){this.loadComponent()}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=qe({type:l,selectors:[["app-add-component"]],viewQuery:function(a,c){if(1&a&&ai(nce,7),2&a){let u;Vt(u=zt())&&(c.adHost=u.first)}},inputs:{component:"component"},decls:1,vars:0,consts:[["addComponent",""]],template:function(a,c){1&a&&Y(0,MZe,0,0,"ng-template",0)},directives:[nce],encapsulation:2}),l})();function EZe(l,o){1&l&&(D(0,"span"),ne(1,"\xa0"),k())}const AZe=function(l,o){return{red:l,redDark:o}};function IZe(l,o){if(1&l&&(D(0,"span"),D(1,"span",2),ne(2),k(),D(3,"span"),D(4,"span",3),ne(5,"."),k(),k(),k()),2&l){const a=Z(2);R(1),F("ngClass",ps(2,AZe,!(a.colored&&a.bookIndex%2),a.colored&&!!(a.bookIndex%2))),R(1),en(a.lineIndex?a.lineIndex:"")}}function PZe(l,o){1&l&&me(0,"app-add-component",5),2&l&&F("component",Z().$implicit.component)}function RZe(l,o){if(1&l&&(D(0,"span"),Y(1,PZe,1,1,"app-add-component",4),k()),2&l){const a=o.$implicit;R(1),F("ngIf",a.component)}}function FZe(l,o){if(1&l&&(D(0,"span"),Y(1,IZe,6,5,"span",0),Y(2,RZe,2,1,"span",1),k()),2&l){const a=Z();R(1),F("ngIf",a.isLineIndexed(a.book,a.lineIndex)),R(1),F("ngForOf",a.getBookFragments(a.bookIndex,a.book,a.lineIndex))}}let GM=(()=>{class l{constructor(a){this.uiConfig=a}get spanTextData(){return this.data}get bookIndex(){return this.spanTextData.config.book?this.spanTextData.config.book.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438:0}get book(){return this.spanTextData.config.book}get lineIndex(){return this.spanTextData.config.lineIndex}get bookSvc(){return this.spanTextData.config.bookSvc}get text(){return this.data&&this.data.text?this.data.text:""}get colored(){return this.uiConfig.ui.coloredTranslations.getBooleanValue()}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}isLineIndexed(a,c){return c>0&&a.\u0441\u0442\u0440\u043e\u043a\u0438[c].fragments.length>0&&a.\u0441\u0442\u0440\u043e\u043a\u0438[c].\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430}getBookFragments(a,c,u){var h,d,f;if(null==c.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430){let p=null===(f=null===(d=null===(h=this.bookSvc)||void 0===h?void 0:h.bookContent[a])||void 0===d?void 0:d.parsed)||void 0===f?void 0:f.settings.find(g=>"\u044f\u0437\u044b\u043a"===g.name.toLowerCase());c.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430=[_s.builder().setText(p?p.value:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e").setClasses({red:!0})]}return u<0?c.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430:c.\u0441\u0442\u0440\u043e\u043a\u0438[u].fragments}}return l.\u0275fac=function(a){return new(a||l)(L(Xn))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-span-text"]],inputs:{data:"data"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"hidden"],[3,"component",4,"ngIf"],[3,"component"]],template:function(a,c){1&a&&(Y(0,EZe,2,0,"span",0),Y(1,FZe,3,2,"span",0)),2&a&&(F("ngIf",!c.book),R(1),F("ngIf",c.book))},directives:[yn,ii,_i,_c],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class NZe{newText(){return l6.builder()}}class l6{constructor(o,a){this.type=o,this.text=a}static builder(){return new l6("","")}setType(o){return this.type=o,this}setText(o){return this.text=o,this}}class QM{static escapeString(o){let a="",c=!1;for(let u=0;u<o.length;u++){let h=o.charAt(u);switch(h){case"'":c||(a+="\\"),a+=h,c=!1;break;case"\\":a+=h,c=!0;break;default:a+=h,c=!1}}return a}static stdConverter(o){let a="";switch(o.type){case"*":a+=o.text;break;case"=":a+="\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0432\u044b\u0432\u0435\u0441\u0442\u0438("+o.text+");";break;case"":a+="\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0432\u044b\u0432\u0435\u0441\u0442\u0438('"+QM.escapeString(o.text)+"');"}return a}parse(o){return bracerParserStatic.parse(o,{builder:new NZe})}getStdConverter(){return o=>QM.stdConverter(o)}join(o,a=null){return a||(a=this.getStdConverter()),o.map(c=>a(c)).join("")}parseAndJoin(o,a=null){return this.join(this.parse(o),a)}}class c6 extends Mf{constructor(){super(),this.block=!1,this.outline=!1,this.type="primary"}static builder(){return new c6}setBlock(o){return this.block=o,this.markChanged(),this}setOutline(o){return this.outline=o,this.markChanged(),this}setType(o){return this.type=o,this.markChanged(),this}}class jM extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u}static builder(){return new jM("",null,null,c6.builder().setBlock(!0))}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}}let ice=(()=>{class l{constructor(a){this.config=a}get btnData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return this.btnData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){var a=this.btnData.classes;return{btn:!0,"btn-block":a.block,"btn-link":"link"==a.type&&!a.outline,"btn-primary":"primary"==a.type&&!a.outline,"btn-primary-outline":"primary"==a.type&&a.outline,"btn-success":"success"==a.type&&!a.outline,"btn-success-outline":"success"==a.type&&a.outline,"btn-danger":"danger"==a.type&&!a.outline,"btn-danger-outline":"danger"==a.type&&a.outline,"no-print":!0}}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-button"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass","click"]],template:function(a,c){1&a&&(D(0,"button",0),ee("click",function(h){return c.onClick(h)}),ne(1),k()),2&a&&(F("ngClass",c.getClasses()),R(1),en(c.text))},directives:[ii],styles:[""]}),l})(),P_=(()=>{class l{constructor(a){this.uiConfig=a}getBookmarks(){return this.uiConfig.ui.bookmarks.getStringValue().split(",").filter(a=>!!a)}setBookmarks(a){return this.uiConfig.ui.bookmarks.setStringValue(a.join(",")),this}addBookmark(a,c,u,h){if(!a)return this;let d=this.getBookmarks();return d.push(a+"."+c+(u>0?":"+u+(h>0?"-"+h:""):"")),this.setBookmarks(d),this}deleteBookmark(a){let c=this.getBookmarks(),u=c.findIndex(h=>h===a);return u>=0&&(c.splice(u,1),this.setBookmarks(c)),this}}return l.\u0275fac=function(a){return new(a||l)(Ae(Xn))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class u6{constructor(){this.\u0434\u0432\u0438\u0436\u043e\u043a=new ru,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e()}addMethod(o,a,c){return o.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(a,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ln.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(_n.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(pe.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(n0.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(c)))))),this}addBookmarksEnvironment(o,a){this.addMethod(o,"\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u0432\u0435\u0440\u0445",(c,u)=>{var d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);if(a){let f=new P_(a),p=f.getBookmarks(),g=p.findIndex(v=>v==d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),m=p;if(g>0){m=[];let v=g-1;m.push(...p.slice(0,v));let y=p.splice(g,1);m.push(...y),m.push(...p.slice(v))}f.setBookmarks(m)}return u[0]}),this.addMethod(o,"\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u043d\u0438\u0437",(c,u)=>{var d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);if(a){let f=new P_(a),p=f.getBookmarks(),g=p.findIndex(v=>v==d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),m=p;if(g>=0&&g+1<p.length){m=[],m.push(...p.slice(0,g));let y=p.splice(g,1),_=p.splice(g,1);m.push(..._),m.push(...y),m.push(...p.slice(g))}f.setBookmarks(m)}return u[0]}),this.addMethod(o,"\u0443\u0434\u0430\u043b\u0438\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443",(c,u)=>{var d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);if(a){let f=new P_(a),p=f.getBookmarks(),g=p.findIndex(v=>v==d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),m=p;g>=0&&p.splice(g,1),f.setBookmarks(m)}return u[0]})}run(o,a=null,c=null,u=null){let h=a||us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),d=c||us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),f=u||us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),g=(new s0).\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(o),m=null;{let v=this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g),[pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),h,d,f],[pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435"),pe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442")],!0,!0,!1,null));v&&v.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()&&"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e"==v.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&(m=f.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"))}return m}}class h6{constructor(o){this.check=o}static builder(){return new h6(!1)}setCheck(o){return this.check=o,this}}class d6 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u}static builder(){return new d6("",null,null,h6.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}}let LZe=(()=>{class l{constructor(a){this.config=a}get cbData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{"clr-checkbox":!0}}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-checkbox"]],inputs:{data:"data"},decls:6,vars:3,consts:[[1,"clr-form-control","no-print"],[1,"clr-control-container","clr-control-inline"],[1,"clr-checkbox-wrapper"],["type","checkbox","id","vertical-checkbox1","name","checkbox-inline-1","value","option1",3,"checked","ngClass","click"],["for","vertical-checkbox1",1,"clr-control-label"]],template:function(a,c){1&a&&(D(0,"div",0),D(1,"div",1),D(2,"div",2),D(3,"input",3),ee("click",function(h){return c.onClick(h)}),k(),D(4,"label",4),ne(5),k(),k(),k(),k()),2&a&&(R(3),F("checked",c.cbData.classes.check)("ngClass",c.getClasses()),R(2),en(c.text))},directives:[ii,ss],styles:[""]}),l})();class f6{constructor(){this.ordered=!1}static builder(){return new f6}setOrdered(o){return this.ordered=o,this}}class p6 extends Ei{constructor(o,a,c,u,h){super(o,a,c),this.classes=u,this.items=h}static builder(){return new p6("",null,null,f6.builder(),[])}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}setItems(o){return this.items=o,this}addItem(o){return this.items.push(o),this}}function BZe(l,o){if(1&l&&(D(0,"li"),me(1,"app-add-component",3),k()),2&l){const a=o.$implicit;R(1),F("component",a)}}function VZe(l,o){if(1&l&&(D(0,"ol",1),Y(1,BZe,2,1,"li",2),k()),2&l){const a=Z();F("ngClass",a.getClasses()),R(1),F("ngForOf",a.listData.items)}}function zZe(l,o){if(1&l&&(D(0,"li"),me(1,"app-add-component",3),k()),2&l){const a=o.$implicit;R(1),F("component",a)}}function UZe(l,o){if(1&l&&(D(0,"ul",1),Y(1,zZe,2,1,"li",2),k()),2&l){const a=Z();F("ngClass",a.getClasses()),R(1),F("ngForOf",a.listData.items)}}let HZe=(()=>{class l{constructor(a){this.config=a}get listData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{list:!0}}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-list"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,c){1&a&&(Y(0,VZe,2,2,"ol",0),Y(1,UZe,2,2,"ul",0)),2&a&&(F("ngIf",c.listData.classes.ordered),R(1),F("ngIf",!c.listData.classes.ordered))},directives:[yn,ii,_i,_c],styles:[""]}),l})();class R_{static builder(){return new R_}parse(o,a=null){return fragmentsParserStatic.parse(o,{builder:a||new t6})}}class g6{constructor(o=!0,a=!0,c=!0,u=!0,h=!0,d=!0){this.slava1Zdrav=o,this.slava1Upok=a,this.slava2Zdrav=c,this.slava2Upok=u,this.slava3Zdrav=h,this.slava3Upok=d}static builder(){return new g6}setSlava1Zdrav(o){return this.slava1Zdrav=o,this}setSlava1Upok(o){return this.slava1Upok=o,this}setSlava2Zdrav(o){return this.slava2Zdrav=o,this}setSlava2Upok(o){return this.slava2Upok=o,this}setSlava3Zdrav(o){return this.slava3Zdrav=o,this}setSlava3Upok(o){return this.slava3Upok=o,this}isLiveAcceptable(o){let a=!1;return a=o?this.slava1Zdrav||this.slava2Zdrav||this.slava3Zdrav:this.slava1Upok||this.slava2Upok||this.slava3Upok,a}getLiveValue(){let o=null,a=this.slava1Zdrav||this.slava2Zdrav||this.slava3Zdrav;return a!==(this.slava1Upok||this.slava2Upok||this.slava3Upok)&&(o=a),o}}class m6 extends Ei{constructor(o,a,c,u,h){super(o,a,c),this.classes=u,this.readonly=h,this.id="",this.targetId="",this.printerHandler=BS.builder()}static builder(){return new m6("",null,null,g6.builder(),!1)}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}setReadonly(o){return this.readonly=o,this}setId(o){return this.id=o,this}setTargetId(o){return this.targetId=o,this}}class v6 extends Mf{constructor(o,a,c){super(),this.alertClass=o,this.alertShape=a,this.noPrint=c}static builder(){return new v6("alert-danger","exclamation-circle",!1)}setAlertClass(o){return this.alertClass=o,this.markChanged(),this}setAlertShape(o){return this.alertShape=o,this.markChanged(),this}setNoPrint(o){return this.noPrint=o,this.markChanged(),this}}class bc{constructor(o,a,c){this.text=o,this.enabled=a,this.onClick=c}static builder(){return new bc("",!0,null)}setText(o){return this.text=o,this}setEnabled(o){return this.enabled=o,this}setOnClick(o){return this.onClick=o,this}runOnClick(){return this.onClick&&this.onClick(this),this}}class rh extends Ei{constructor(o,a,c,u,h,d,f){super(o,a,c),this.errors=u,this.classes=h,this.buttons=d,this.actions=f}static builder(){return new rh("",null,null,[],v6.builder(),[],[])}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}setErrors(o){return this.errors=o,this}setButtons(o){return this.buttons=o,this}setActions(o){return this.actions=o,this}updateClasses(o){return o(this.classes),this}}class y6{constructor(o,a){this.prefix=o,this.name=a}static builder(){return new y6("","")}setPrefix(o){return this.prefix=o,this}setName(o){return this.name=o,this}}class An{constructor(o,a){this.index=o,this.name=a}static builder(){return new An(-1,"")}setIndex(o){return this.index=o,this}setName(o){return this.name=o,this}}let qM=(()=>{class l{constructor(){this.statuses=[An.builder().setIndex(1).setName("\u0431\u043e\u043b."),An.builder().setIndex(2).setName("\u0431."),An.builder().setIndex(2).setName("\u0442.\u0431\u043e\u043b."),An.builder().setIndex(2).setName("\u0442.\u0431."),An.builder().setIndex(3).setName("\u043f\u0443\u0442."),An.builder().setIndex(3).setName("\u043f."),An.builder().setIndex(4).setName("\u0437\u043a."),An.builder().setIndex(5).setName("\u0437\u0430\u0431\u043b.")],this.statusesWiman=[An.builder().setIndex(1).setName("\u0431\u043e\u043b."),An.builder().setIndex(2).setName("\u0431."),An.builder().setIndex(2).setName("\u0442.\u0431\u043e\u043b."),An.builder().setIndex(2).setName("\u0442.\u0431."),An.builder().setIndex(3).setName("\u043f\u0443\u0442."),An.builder().setIndex(3).setName("\u043f."),An.builder().setIndex(4).setName("\u0437\u043a."),An.builder().setIndex(5).setName("\u043d\u0435\u043f\u0440\u0430\u0437\u0434."),An.builder().setIndex(6).setName("\u0437\u0430\u0431\u043b.")],this.statusesDead=[An.builder().setIndex(1).setName("\u043d.\u043f."),An.builder().setIndex(2).setName("\u043f.\u043f."),An.builder().setIndex(3).setName("\u0443\u0431.")],this.prefixes=[An.builder().setIndex(1).setName("\u043f\u0430\u0442\u0440."),An.builder().setIndex(2).setName("\u0441\u0445\u0438\u043c\u0438\u0442\u0440."),An.builder().setIndex(3).setName("\u043c\u0438\u0442\u0440."),An.builder().setIndex(4).setName("\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0435\u043f."),An.builder().setIndex(5).setName("\u0430\u0440\u0445\u0438\u0435\u043f."),An.builder().setIndex(6).setName("\u0441\u0445\u0438\u0435\u043f."),An.builder().setIndex(7).setName("\u0435\u043f."),An.builder().setIndex(8).setName("\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u043c."),An.builder().setIndex(9).setName("\u0430\u0440\u0445\u0438\u043c."),An.builder().setIndex(10).setName("\u043f\u0440\u043e\u0442\u043e\u043f\u0440."),An.builder().setIndex(11).setName("\u0441\u0445\u0438\u0438\u0433\u0443\u043c."),An.builder().setIndex(12).setName("\u0438\u0433\u0443\u043c."),An.builder().setIndex(13).setName("\u043f\u0440\u043e\u0442."),An.builder().setIndex(14).setName("\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u043c."),An.builder().setIndex(15).setName("\u0438\u0435\u0440\u043e\u043c."),An.builder().setIndex(16).setName("\u0438\u0435\u0440."),An.builder().setIndex(17).setName("\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0434."),An.builder().setIndex(18).setName("\u0430\u0440\u0445\u0438\u0434."),An.builder().setIndex(19).setName("\u043f\u0440\u043e\u0442\u043e\u0434\u0438\u0430\u043a."),An.builder().setIndex(20).setName("\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u0434."),An.builder().setIndex(21).setName("\u0438\u0435\u0440\u043e\u0434."),An.builder().setIndex(22).setName("\u0434\u0438\u0430\u043a."),An.builder().setIndex(23).setName("\u0441\u0445\u0438\u043c."),An.builder().setIndex(24).setName("\u043c\u043e\u043d."),An.builder().setIndex(25).setName("\u0438\u043d."),An.builder().setIndex(26).setName("\u0438\u043f\u043e\u0434\u0438\u0430\u043a."),An.builder().setIndex(28).setName("\u0447\u0442."),An.builder().setIndex(27).setName("\u043f\u043e\u0441\u043b."),An.builder().setIndex(29).setName("\u043e."),An.builder().setIndex(30).setName("\u043c\u043b."),An.builder().setIndex(31).setName("\u0432.")],this.prefixesWiman=[An.builder().setIndex(1).setName("\u0441\u0445\u0438\u0438\u0433\u0443\u043c."),An.builder().setIndex(2).setName("\u0438\u0433\u0443\u043c."),An.builder().setIndex(3).setName("\u0441\u0445\u0438\u043c."),An.builder().setIndex(4).setName("\u043c\u043e\u043d."),An.builder().setIndex(5).setName("\u0438\u043d."),An.builder().setIndex(6).setName("\u043c\u0430\u0442."),An.builder().setIndex(7).setName("\u043f\u043e\u0441\u043b."),An.builder().setIndex(8).setName("\u043e."),An.builder().setIndex(9).setName("\u043c\u043b."),An.builder().setIndex(10).setName("\u0432.")]}isKnownPrefix(a){let c=!1,u=h=>h.findIndex(d=>d.name===a)>=0;return c=c||u(this.prefixes),c=c||u(this.prefixesWiman),c=c||u(this.statuses),c=c||u(this.statusesWiman),c}getName(a){const c=a.split(/\s/),u=[];return c.forEach(h=>{this.isKnownPrefix(h)||u.push(h)}),u.join(" ")}getNameFrom(a,c){let u="";return c.forEach(h=>{h.index===a&&(u=h.name)}),u}getPrefixByName(a,c){return this.getIndexByName(a,c?this.prefixes:this.prefixesWiman)}getStatusByName(a,c){return this.getIndexByName(a,c?this.statuses:this.statusesWiman)}getPrefix(a,c=!0,u=!0){return this.getNameFrom(a,c?this.prefixes:this.prefixesWiman)}getStatus(a,c=!0,u=!0){return this.getNameFrom(a,u?c?this.statuses:this.statusesWiman:this.statusesDead)}getIndexByName(a,c){const u=a.split(/\s/);let h=0;return u.forEach(d=>{c.forEach(f=>{f.name===d&&h<f.index&&(h=f.index)})}),h}getPrefixedName(a){let c=a.split(/\s/),u="",h="",d=[...this.prefixes,...this.prefixesWiman,...this.statuses,...this.statusesWiman,...this.statusesDead];return c.forEach((f,p)=>{let g=p+1==c.length?"":" ";d.findIndex(m=>m.name==f)>=0?u+=f+g:h+=f+g}),new y6(u,h)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class _6{constructor(o="label-warning",a="label-success",c=!1){this.labelSelected=o,this.labelNormal=a,this.noPrint=c}static builder(){return new _6}setLabelSelected(o){return this.labelSelected=o,this}setLabelNormal(o){return this.labelNormal=o,this}setNoPrint(o){return this.noPrint=o,this}}class ta{constructor(o,a,c){this.text=o,this.tag=a,this.selected=c,this.getSpanClassDetector=wa.builder()}static builder(){return new ta("","",!1)}setText(o){return this.text=o,this}setTag(o){return this.tag=o,this}setSelected(o){return this.selected=o,this}}class au extends Ei{constructor(o,a,c,u,h){super(o,c,u),this.items=a,this.classes=h}static builder(){return new au("",[],null,null,_6.builder())}setText(o){return super.setText(o)}setItems(o){return this.items=o,this}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}updateClasses(o){return o(this.classes),this}}class b6{constructor(){this.bookSettings=!0,this.calculatorSettings=!1,this.memorialSettings=!1}static builder(){return new b6}clear(){this.bookSettings=!1,this.calculatorSettings=!1,this.memorialSettings=!1}setBookSettings(o){return o&&this.clear(),this.bookSettings=o,this}setCalculatorSettings(o){return o&&this.clear(),this.calculatorSettings=o,this}setMemorialSettings(o){return o&&this.clear(),this.memorialSettings=o,this}}class sh extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u}static builder(){return new sh("",null,null,b6.builder().setBookSettings(!0))}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}updateClasses(o){return o(this.classes),this}}class x6{constructor(o,a,c){this.name=o,this.pvalue=a,this.onChange=c}get value(){return this.pvalue}set value(o){this.pvalue=o,this.onChange&&this.onChange()}}let Li=(()=>{class l{constructor(){this.properties=[],this.onChange=null}setOnChangeCallback(a){this.onChange=a}load(a){this.properties=[],a.split(";").forEach(u=>{const h=u.split(":");if(2===h.length)this.properties.push(new x6(h[0].trim(),h[1].trim(),this.onChange));else if(1===h.length){let d=h[0].trim();if(d){let f=this.properties.findIndex(p=>p.name==l.TEXT);f>=0?this.properties[f].value+=d:this.properties.push(new x6(l.TEXT,d,this.onChange))}}})}toString(){let a="";return this.properties.forEach(c=>{c.value&&(a&&(a+=";"),a+=c.name+":"+c.value)}),a}pushNew(a,c){this.properties.push(new x6(a,c,this.onChange))}getValue(a,c){let u=null;return this.properties.forEach(h=>{h.name===a&&(u=h.value)}),null==u?c?u:"":u}setValue(a,c){let u=!1;this.properties.forEach(h=>{h.name===a&&(h.value=c,u=!0)}),u||this.pushNew(a,c)}getOffset(){const a=this.getValue(l.OFFSET);let c=a?+a:-1;return Number.isInteger(c)||(c=-1),c}isLive(){const a=this.getValue(l.STATUS,!0);return null==a?null:!(a===l.STATUS_DEAD||a===l.STATUS_DEAD_WOMAN)}isMan(){const a=this.getValue(l.GENDER,!0);return null==a?null:a!==l.GENDER_WOMAN}}return l.OFFSET="\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435",l.ORDER="\u043f\u043e\u0440\u044f\u0434\u043e\u043a",l.STATUS="\u0441\u0442\u0430\u0442\u0443\u0441",l.STATUS_LIVE="\u0436\u0438\u0432\u043e\u0439",l.STATUS_LIVE_WOMAN="\u0436\u0438\u0432\u0430\u044f",l.STATUS_DEAD="\u0443\u0441\u043e\u043f\u0448\u0438\u0439",l.STATUS_DEAD_WOMAN="\u0443\u0441\u043e\u043f\u0448\u0430\u044f",l.GENDER="\u043f\u043e\u043b",l.GENDER_MAN="\u043c\u043e\u0436\u0441\u043a\u043e\u0439",l.GENDER_WOMAN="\u0436\u0435\u043d\u0441\u043a\u0438\u0439",l.REF_ID="\u0441\u0441\u044b\u043b\u043a\u0430",l.TEXT="\u0442\u0435\u043a\u0441\u0442",l.UNION="\u043e\u0431\u044a\u0435\u0434\u0435\u043d\u0435\u043d\u043e",l.TAGS="\u0442\u0435\u0433\u0438",l.YES="\u0434\u0430",l.NO="\u043d\u0435\u0442",l})();class C6{constructor(){}static builder(){return new C6}}class S6 extends Ei{constructor(o,a,c,u,h){super(o,a,c),this.classes=u,this.person=h}static builder(){return new S6("",null,null,C6.builder(),new Qn(-1,"","",-1,!0,""))}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}setPerson(o){return this.person=o,this}updateClasses(o){return o(this.classes),this}}class $Ze{constructor(o,a){this.index=o,this.include=a}setInclude(o){return this.include=!!o,this}}class WZe{constructor(o,a,c){this.left=o,this.right=a,this.everyYear=c}}class GZe{constructor(o,a,c){this.date=o,this.month=a,this.year=c}}class QZe{constructor(o,a){this.date=o,this.intervals=a}eventDate(o=0,a=0){let c=new Date;return c.setFullYear(+this.date.year+a,+this.date.month-1,+this.date.date),c.setDate(c.getDate()+o),c}isToday(){if(this.isTodayDate(this.eventDate()))return!0;let o=!1;return this.intervals.forEach(a=>{this.isTodayInterval(a)&&(o=!0)}),o}isTodayDate(o){let a=new Date;return o.getFullYear()==a.getFullYear()&&o.getMonth()==a.getMonth()&&o.getDate()==a.getDate()}isLess(o,a,c=!1){return!c&&o.getFullYear()<a.getFullYear()||!(!c&&o.getFullYear()>a.getFullYear())&&(o.getMonth()<a.getMonth()||!(o.getMonth()>a.getMonth())&&o.getDate()<a.getDate())}isEquals(o,a,c=!1){return(c||o.getFullYear()==a.getFullYear())&&o.getMonth()==a.getMonth()&&o.getDate()==a.getDate()}isTodayInterval(o){let a=o.everyYear?[-1,0,1]:[0],c=!1,u=new Date;return a.forEach(h=>{if(!c){let d=this.eventDate(0,h),f=this.eventDate(o.left.index,h),p=this.eventDate(o.right.index,h);if(f.getTime()>p.getTime()){let S=f;f=p,p=S}let g=o.everyYear&&f.getFullYear()<d.getFullYear(),m=o.everyYear&&p.getFullYear()>d.getFullYear(),v=this.isLess(f,u,o.everyYear),y=this.isLess(u,p,o.everyYear),_=o.left.include&&this.isEquals(f,u,o.everyYear),b=o.right.include&&this.isEquals(u,p,o.everyYear),C=v||_,x=y||b;(!g&&!m&&C&&x||(g||m)&&m!=g&&(x||C)||g&&m&&(!x||!C))&&(c=!0)}}),c}}class jZe{newEvent(o,a){return new QZe(o,a)}newEventDate(o,a,c){return new GZe(o,a,c)}newDaysInterval(o,a,c){return new WZe(o,a,c)}newDay(o,a){return new $Ze(o,a)}}let ZM=(()=>{class l{parseEvent(a){return dateEventsParserStatic.parse(a,{builder:new jZe})}isToday(a){let c=new Li;c.load(a);let u=!1;return c.properties.forEach(h=>{if(!u)try{let d=this.parseEvent(h.value);d&&d.isToday()&&(u=!0)}catch(d){}}),u}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class qZe{constructor(o){this.cacheMap=new Map,this.getter=o}setGetter(o){return this.getter=o,this}getCachedResult(o,a,c){let u=this.cacheMap.get(o),h=null==u?void 0:u.get(a),d=null==h?void 0:h.get(c);return null!=d||(d=this.getter(o,a,c),h||(h=new Map),h.set(c,d),u||(u=new Map),u.set(a,h),this.cacheMap.set(o,u)),d}clear(){return this.cacheMap.clear(),this}}let w6=(()=>{class l{constructor(a,c,u,h,d,f){this.authSvc=a,this.memorialsSvc=c,this.personsSvc=u,this.config=h,this.tagsSvc=d,this.dateEventsSvc=f,this.serviceReady=!1,this.personsCache=new qZe((p,g,m)=>this.getChachedPersonsDirect(p,g,m))}getChachedPersonsDirect(a,c,u){var h;let d=null===(h=this.memorials)||void 0===h?void 0:h.items.find(f=>f.name==a);if(this.persons){let f=!!d&&this.tagsSvc.tagsHasFlag(d.tags,"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439"),p=!!d&&this.tagsSvc.tagsHasFlag(d.tags,"\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438"),g=this.persons.items;return c&&(g=g.filter(v=>null==u||u==v.live)),g.filter(v=>p||!d||!!this.tagsSvc.intersectTags(v.tags,d.tags)).filter(v=>!f||this.dateEventsSvc.isToday(v.description))}return[]}get isReady(){return this.serviceReady}setup(a){this.doLogin(a)}doLogout(){this.authSvc.isLoggedIn().then(a=>{a.result?this.authSvc.logout().then(c=>{this.serviceReady=!1,this.config.authId=""}):(this.serviceReady=!1,this.config.authId="")})}reloadMemorials(a){this.memorialsSvc.reloadMemorials(c=>{c&&this.personsSvc.reloadPersons(),a&&a(this.serviceReady)})}doLogin(a){this.authSvc.isLoggedIn().then(c=>{c.result?(this.serviceReady=!0,this.reloadMemorials(a)):this.authSvc.login().then(u=>{if(u.result){let h="hramvkostino",d="hramvkostino";this.authSvc.requestForUser(h,d).then(f=>{this.serviceReady=f.valid,this.config.authId=f.authId,this.config.authBody=btoa(h+":"+d),this.reloadMemorials(a)})}})})}get memorials(){return this.memorialsSvc.getMemorials()}get persons(){return this.personsSvc.getPersonsDirect()}getAuth(){return this.authSvc}getMemorials(){return this.memorialsSvc}getPersons(){return this.personsSvc}}return l.\u0275fac=function(a){return new(a||l)(Ae(nh),Ae(E_),Ae(Xp),Ae(an),Ae(Ko),Ae(ZM))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class T6{static builder(){return new T6}newLine(){return M6.builder()}newMemorial(){return k6.builder()}newComment(){return D6.builder()}}var ad=(()=>(function(l){l[l.Memorial=0]="Memorial",l[l.Line=1]="Line",l[l.Comment=2]="Comment"}(ad||(ad={})),ad))();class O6{constructor(o){this.type=o}toString(){return""}}class D6 extends O6{constructor(o){super(ad.Comment),this.text=o}static builder(){return new D6("")}setText(o){return this.text=o,this}toString(){return`/*${this.text}*/`}}class k6 extends O6{constructor(o,a){super(ad.Memorial),this.name=o,this.tags=a}static builder(){return new k6("","")}setName(o){return this.name=o,this}setTags(o){return this.tags=o,this}toString(){return`[${this.name}${this.tags?":"+this.tags:""}]`}}class M6 extends O6{constructor(o,a,c,u){super(ad.Line),this.name=o,this.description=a,this.offset=c,this.live=u}static builder(){return new M6("","",-1,!0)}setName(o){return this.name=o,this}setDescription(o){return this.description=o,this}setOffset(o){return this.offset=o,this}setLive(o){return this.live=o,this}toString(){return`${this.name}(${this.description?this.description:""})${null!=this.offset&&this.offset>=0?" "+this.offset:""}${this.live?"":" \u0443\u0441\u043e\u043f\u0448\u0438\u0439"}`}}class sce{static parse(o){return personsParserStatic.parse(o,{builder:T6.builder()})}}class Ef{constructor(o,a,c='"'){this.value=a,this.simbol=c,this.names=null,this.names=[o],this.value=a}static newFrom(o){return new Ef(o.name,o.value)}get name(){return this.names?this.names.join(":"):""}set name(o){this.names=[o]}toString(){return this.name+"="+this.simbol+this.value+this.simbol}}class oce{constructor(o="  ",a=!0){this.prefix=o,this.prettyPrint=a,this.offset=0}incOffset(){return++this.offset,this.getOffset()}decOffset(){return--this.offset,this.getOffset()}getOffset(){let o="";for(let a=0;a<this.offset;++a)o+=this.prefix;return o}}class na{constructor(o,a,c,u){this.name=o,this.attributes=a,this.children=c,this.text=u,this.name=o,this.attributes=a,this.children=c,this.text=u}static newFrom(o){const a=[];o.attributes&&o.attributes.forEach(u=>{a.push(Ef.newFrom(u))});const c=[];return o.children&&o.children.forEach(u=>{c.push(na.newFrom(u))}),new na(o.name,a,c,o.text)}setAttributes(o){return this.attributes=o,this}setChildren(o){return this.children=o,this}toString(o=null){let a="";if(this.name&&(a+="<"+this.name,this.attributes&&this.attributes.forEach(c=>{a+=" "+c.toString()}),a+=">"),this.children&&this.children.length){let c=this.children.length>1||!!this.children[0].name;this.children.forEach(u=>{c&&(null==o?void 0:o.prettyPrint)&&(a+="\r\n",a+=o.incOffset()),a+=u.toString(o),c&&(null==o?void 0:o.prettyPrint)&&o.decOffset()}),c&&(null==o?void 0:o.prettyPrint)&&(a+="\r\n",a+=o.getOffset())}return a+=this.name?"</"+this.name+">":this.text,a}}let ace=(()=>{class l{parseXml(a){const c=xmlParserStatic.parse(a),u=[];return c.forEach(h=>{u.push(na.newFrom(h))}),u}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class lce{constructor(o,a){this.person=o,this.props=a}}class E6{constructor(o,a){this.memorial=o,this.lines=a}static builder(){return new E6(null,[])}setMemorial(o){return this.memorial=o,this}setLines(o){return this.lines=o,this}addLine(o){return this.lines.push(o),this}toString(){var o;return`${null===(o=this.memorial)||void 0===o?void 0:o.toString()}\n${this.lines.map(a=>a.toString()).join("\r\n")}`}}let A6=(()=>{class l{constructor(a,c,u,h,d,f){this.mems=a,this.ks=c,this.config=u,this.uiConfig=h,this.xml=d,this.nameSvc=f}addPersons(a,c,u,h=!0,d=null,f=0,p=1){try{this.addPersonsDirect(a,c,u,h,d)}catch(g){this.config.addAlert(new Or("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0441\u043e\u043d\u044b: "+g,"OK",180)),d&&d()}}previewPersons(a){const c=sce.parse(a);let u=[],h=null;return c.forEach(d=>{switch(d.type){case ad.Memorial:{let f=d;h=E6.builder().setMemorial(f),u.push(h)}break;case ad.Line:{let f=d;null==h||h.addLine(f)}}}),u}addPersonsDirect(a,c,u,h=!0,d=null,f=0,p=1){const g=sce.parse(c);let m=[],v="",y=new Map,_=this.mems.getActivePredefinedMemorialsRaw(),b=!1;g.forEach(C=>{switch(C.type){case ad.Memorial:v=C.name,b=null!=_.find(S=>S==v);break;case ad.Line:{let x=C,S=a(v);if(S>=0){const w=new Li;w.load(x.description?x.description:"");const O=w.getOffset(),T=x.live||w.isLive();w.setValue(Li.ORDER,""),w.setValue(Li.OFFSET,""),w.setValue(Li.STATUS,""),w.setValue(Li.UNION,"");let M=u(v);{let B=w.getValue(Li.TAGS);B&&B.split(",").forEach(Q=>{let j=Q.trim();j&&(M=Ko.addTagToTags(M,j))})}const A=new Hqe(S,-1,x.name,w.toString(),O,null!=T&&T,M);let I=w.getValue(Li.REF_ID),E=!1,P=B=>{let V,Q=this.getNormalName(A.name);if(y.forEach(j=>{Q==this.getNormalName(j.person.name)&&w.getValue(Li.TEXT)&&w.getValue(Li.TEXT)===j.props.getValue(Li.TEXT)&&(V=j.person)}),V){if(!Ko.tagsHasFlag(V.tags,v)){V.name=this.mergeNames(V.name,A.name),V.tags=Ko.addTagToTags(V.tags,v);const j=new Li;j.load(V.description),j.getValue(Li.UNION)!=Li.YES&&j.setValue(Li.UNION,Li.YES),V.description=j.toString(),E=!0}}else y.set(B||"#"+y.size,new lce(A,w))};I?y.has(I)?(y.get(I).person.tags+=","+v,E=!0):y.set(I,new lce(A,w)):this.uiConfig.ui.mergeNameOnImport.getBooleanValue()&&P(""),!E&&!b&&m.push(A)}}}}),this.addPersonsByPersons(m,d)}addPersonsByPersons(a=[],c=null){a.length?this.ks.newPersons(a).then(u=>{setTimeout(()=>{this.config.addAlert(u&&u.success?new Or("\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e: "+a.length+` ${l.getWordName(a.length)}.`,"OK",30):new Or("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0439 \u043f\u0435\u0440\u0441\u043e\u043d\u044b: "+(u?u.error:"?"),"OK",180)),c&&c()},0)},u=>{this.config.addAlert(new Or("\u041e\u0448\u0438\u0431\u043a\u0430: "+u,"OK",180))}):(this.config.addAlert(new Or("\u041f\u0435\u0440\u0441\u043e\u043d \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.","OK",60)),c&&c())}static getWordName(a){let c="";switch(Math.floor(a%10)){case 1:c="\u0438\u043c\u044f";break;case 2:case 3:case 4:c="\u0438\u043c\u0435\u043d\u0438";break;default:c="\u0438\u043c\u0451\u043d"}return c}addPersonsOld(a,c,u,h=!0,d=null,f=0,p=1){const g=personsParserStatic.parse(c),m={i:0,memorialName:""},v=new Li;this.config.waitingIOOperationValueMax=g.length*p;const y=_=>{if(this.config.waitingIOOperationValue=m.i+g.length*f,_&&!_.success)return this.config.addAlert(new Or(_.error,"OK",30)),this.endIOWaiting(),void(null!=d&&d());if(m.i>=g.length)this.endIOWaiting(),null!=d&&d();else{const b=g[m.i];if(++m.i,void 0!==b.memorial)m.memorialName=b.memorial,setTimeout(()=>{y(_)},0);else if(void 0===b.comment){let C=a(m.memorialName);if(C>=0){v.load(b.description?b.description:"");const x=v.getOffset(),S=b.live||v.isLive();v.setValue(Li.ORDER,""),v.setValue(Li.OFFSET,""),v.setValue(Li.STATUS,"");const w=new Qn(-1,b.name,v.toString(),x,S,u(m.memorialName));this.ks.newPerson(C,w).then(O=>{setTimeout(()=>{y(O)},0)},O=>{setTimeout(()=>{y(null)},0)})}else setTimeout(()=>{y(_)},0)}else y(null)}};y(null),this.beginIOWaiting(h,g.length*f)}beginIOWaiting(a,c=0){this.config.incWaitingIO(),this.config.waitingIOOperationValue=c}endIOWaiting(){this.config.decWaitingIO()}onChildren(a,c){a&&a.forEach(u=>{c&&c(u)})}getTextFromTag(a){let c="";return a&&(a.text?c+=a.text:a.children.forEach(u=>{u.text&&(c+=u.text)})),c}onAttribute(a,c,u){a&&a.forEach(h=>{h.name===c&&u&&u(h)})}sortByOrd(a){let c=[];return c=a.slice(0),c.sort((u,h)=>{let d=0,f=0;return this.onAttribute(u.attributes,"ord",p=>{d=+p.value}),this.onAttribute(h.attributes,"ord",p=>{f=+p.value}),d-f}),c}readTagAsText(a){let c=a.text?a.text:"";return this.onChildren(a.children,u=>{c+=this.readTagAsText(u)}),c}convertRecord(a,c){if("record"!==a.name)return"";let u="",h="",d="",f=!0,p="";if(this.onAttribute(a.attributes,"gender",g=>{f="true"===g.value}),this.onAttribute(a.attributes,"prefix",g=>{p=this.nameSvc.getPrefix(+g.value,f,c)}),this.onAttribute(a.attributes,"status",g=>{let m=this.nameSvc.getStatus(+g.value,f,c);m&&(p=m+(p&&" "+p))}),this.onChildren(a.children,g=>{"name"===g.name?h=this.readTagAsText(g):"comment"===g.name&&(d=this.readTagAsText(g))}),h){p&&(u+=p+" "),u+=h+"([";const g=new Li;g.load(d),g.setValue(Li.GENDER,f?"":Li.GENDER_WOMAN),u+=g.toString()+"])",c||(u+=" "+(f?Li.STATUS_DEAD:Li.STATUS_DEAD_WOMAN))}return u&&(u+="\n"),u}convertMemorial(a){let c="",u=!0;return this.onAttribute(a.attributes,"health",h=>{u="true"===h.value}),this.onChildren(a.children,h=>{"records"===h.name&&this.onChildren(this.sortByOrd(h.children),d=>{c+=this.convertRecord(d,u)})}),c}convertXmlToString(a){const c=this.xml.parseXml(a);return this.convertTagsToString(c)}convertTagsToString(a){let c="";return a.forEach(u=>{"memorials"===u.name&&this.onChildren(u.children,h=>{let d="";this.onChildren(h.children,f=>{"notes"===f.name&&(d=this.readTagAsText(f))}),h.children.forEach(f=>{"name"===f.name&&(c+="["+this.getTextFromTag(f)+(d?":"+d:"")+"]\n")}),c+=this.convertMemorial(h)})}),c}getNormalName(a){let c=!1;return a.split(/[ \t\r\n]+/).map(h=>h.trim()).filter(h=>!!h).filter(h=>c?"":(c=c||!h.endsWith("."),h)).join(" ")||a}getPrefixes(a){let c=!1;return a.filter(u=>c||(c=c||!u.endsWith("."))?"":u).filter(u=>!!u)}getName(a){let c=!1;return a.filter(u=>c?"":(c=c||!u.endsWith("."))?u:"").filter(u=>!!u)}getPostfixes(a){let c=!1;return a.filter(u=>c?u:(c=c||!u.endsWith("."),"")).filter(u=>!!u)}mergeNames(a,c){let u=a.split(/[ \t\r\n]+/).map(_=>_.trim()).filter(_=>!!_),h=c.split(/[ \t\r\n]+/).map(_=>_.trim()).filter(_=>!!_),d=this.getPrefixes(u).join(" "),f=this.getName(u).join(" "),p=this.getPostfixes(u).join(" "),g=this.getPrefixes(h).join(" "),m=this.getName(h).join(" "),v=this.getPostfixes(h).join(" ");if(f!=m||d!=g)throw new Error(`\u041d\u0435 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0435\u043c\u044b\u0435 \u0438\u043c\u0435\u043d\u0430: '${a}' != '${c}'.`);let y=[];return d&&y.push(d),f&&y.push(f),(p||v)&&(p?(y.push(p),v&&!p.includes(v)&&y.push(v)):v&&y.push(v)),y.join(" ")}}return l.\u0275fac=function(a){return new(a||l)(Ae(E_),Ae(Xp),Ae(an),Ae(Xn),Ae(ace),Ae(qM))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),cce=(()=>{class l{constructor(a,c){this.config=a,this.memXmlLoader=c,this.text="",this.memName=""}onLoadAnyFile(a,c,u){this.memName=c,a.name.toLowerCase().endsWith(".csv")||a.name.toLowerCase().endsWith(".tsv")?this.onLoadXsvFile(a,u):this.onLoadXmlFile(a,u)}convertXsvToString(a,c,u=!0){let h=(y,_)=>{let b=y.split(_);for(let C=0;C<b.length;C++)b[C]=b[C].trim();return b},f=h(a,"\n"),p=0,g="",m=[],v=[];{let y=h(f[p],c);if(2!=y.length||"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"!=y[0]||"\u0422\u0435\u0433\u0438"!=y[1])return this.config.addAlert(new Or("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443 \u0444\u0430\u0439\u043b\u0430.","OK",180)),"";for(++p;f.length>p&&f[p];){y=h(f[p++],c);let _=y[0].trim(),b=y[1].trim();v.push(_),m.push(b),u&&(g+=`[${_}${b?":"+b:""}]\r\n`)}if(++p,y=h(f[p++],c),5!=y.length||"\u0418\u043c\u044f"!=y[0]||"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"!=y[1]||"\u0421\u0442\u0430\u0442\u0443\u0441"!=y[2]||"\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435"!=y[3]||"\u0422\u0435\u0433\u0438"!=y[4])return this.config.addAlert(new Or("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443 \u0444\u0430\u0439\u043b\u0430.","OK",180)),"";for(u&&(g+="[\u0432\u0441\u0435]\r\n");f.length>p&&f[p];){y=h(f[p++],c);let _=y[4].split(","),b=!1;if(_&&_.forEach(x=>{(!this.memName||x==this.memName)&&(b=!0)}),!b)continue;g+=y[0],g+="(";let C=g.length;g+=y[1],+y[3]>=0&&(y[1]&&(g+=";"),g+=Li.OFFSET+":",g+=y[3]),g.length!=C&&(g+=";"),g+=Li.TAGS+":",g+=y[4],g+=")",y[2].toLowerCase()===Li.STATUS_LIVE||y[2].toLowerCase()===Li.STATUS_LIVE_WOMAN||(g+=" "+Li.STATUS_DEAD),g+="\r\n"}}return g}onLoadXsvFile(a,c){if(!a)return;const u=new FileReader;u.onload=h=>{try{this.text=this.convertXsvToString(u.result.toString(),a.name.toLowerCase().endsWith(".csv")?";":"\t")}catch(d){this.config.addAlert(Or.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0444\u0430\u0439\u043b: "+d,"OK",30))}c&&c(this.text)},u.readAsText(a)}makeHtml(a){return a.replace(/(?:\r\n|\r|\n)/g,"<br />\n")}onLoadXmlFile(a,c){if(!a)return;const u=new FileReader;u.onload=h=>{try{let d=a.name.toLowerCase().endsWith(".xml");this.text=d?this.memXmlLoader.convertXmlToString(u.result.toString()):u.result.toString()}catch(d){this.config.addAlert(Or.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0444\u0430\u0439\u043b: "+d,"OK",30))}c&&c(this.text)},u.readAsText(a)}}return l.\u0275fac=function(a){return new(a||l)(Ae(an),Ae(A6))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class ZZe{constructor(o,a,c){this.memorial=o,this.setName=a,this.getName=c}}let uce=(()=>{class l{constructor(a,c){this.mems=a,this.nameSvc=c}getMemorialsXmlString(a,c,u){let h="<?xml version='1.0' encoding='UTF-8' ?>\n",d=null;c.forEach((p,g)=>{let m=this.generateMemorials(a,p,u[g]);m&&(null==d?d=m:d.children.push(...m.children))}),null==d&&(d=new na("memorials",[],[],""));let f=new oce;return h+=d.toString(f),h}getPersonsXmlString(a,c,u){let h="<?xml version='1.0' encoding='UTF-8' ?>\n",d=this.generateMemorials(a,c,u),f=new oce;return h+=d.toString(f),h}generateMemorials(a,c,u){let h=new na("memorials",[],[],""),d=[],f=p=>{p&&p.memorial.children.length&&(h.children.push(p.memorial),d.push(p))};return f(this.getMemorial(a,c,u,!0,1)),f(this.getMemorial(a,c,u,!1,2)),h}getDescription(a,c,u=!1,h=""){const d=new Li;return d.load(a.description),d.setValue(Li.OFFSET,a.offset<0?"":""+a.offset),d.setValue(Li.ORDER,""),d.setValue(Li.STATUS,""),u&&d.setValue(Li.GENDER,""),h&&d.setValue(Li.REF_ID,h),d.toString()}getMemorial(a,c,u,h,d,f=!0){const p=c;let g=null,m=new na("memorial",[new Ef("health",""+h),new Ef("ord",""+d)],[new na("name",[],[g=new na("",[],[],p||"\u0432\u0441\u0435")],""),new na("notes",[],[new na("",[],[],u)],"")],""),v=new na("records",[],[],"");m.children.push(v);let _=this.mems.getActivePredefinedMemorialsRaw();return a.filter(b=>!c||Ko.tagsHasFlag(b.tags,c)).forEach((b,C)=>{const x=b.tags.split(",");let S=!1;if(x.forEach(w=>{null==_.find(O=>O==w)&&(S=!0)}),S&&b.live===h){let w=this.isMan(b);v.children.push(this.newRecord(this.nameSvc.getName(b.name),w,C+1,this.nameSvc.getStatusByName(b.name,w),this.nameSvc.getPrefixByName(b.name,w),this.getDescription(b,C,!0,(b=>{let C=a.findIndex(x=>x===b);return C>=0?""+C:""})(b))))}}),f||v.children.length>0?new ZZe(m,b=>{g&&(g.text=b)},()=>g?g.text:""):null}isMan(a){const c=new Li;c.load(a.description);let u=c.isMan();return null==u||u}newRecord(a,c,u,h,d,f){return new na("record",[new Ef("gender",`${c}`),new Ef("ord",`${u}`),new Ef("status",`${h}`),new Ef("prefix",`${d}`)],[new na("name",[],[new na("",[],[],`${a}`)],""),new na("comment",[],[new na("",[],[],`${f}`)],"")],"")}}return l.\u0275fac=function(a){return new(a||l)(Ae(E_),Ae(qM))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class XZe{constructor(o){this.xsv=o,this.text="",this.useSeparator=!1}print(o,a=!0){return a&&(this.useSeparator?this.text+=this.xsv:this.useSeparator=!0),this.text+=o,this}println(o,a=!0){return this.print(o,a),this.text+="\r\n",this.useSeparator=!1,this}}let hce=(()=>{class l{constructor(){}getMemorialsString(a,c,u,h=";"){let d=new XZe(h);return d.print("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),d.print("\u0422\u0435\u0433\u0438"),d.println("",!1),c.forEach((f,p)=>{!f||(d.print(f),d.print(u[p]),d.println("",!1))}),d.println("",!1),d.print("\u0418\u043c\u044f"),d.print("\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"),d.print("\u0421\u0442\u0430\u0442\u0443\u0441"),d.print("\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435"),d.print("\u0422\u0435\u0433\u0438"),d.println("",!1),a.filter(f=>{if(!c)return!0;let p=!1;return c.forEach(g=>{Ko.tagsHasFlag(f.tags,g)&&(p=!0)}),p}).forEach((f,p)=>{f.tags.split(","),d.print(f.name),d.print(f.description),d.print(f.live?"\u0416\u0438\u0432\u043e\u0439":"\u0423\u0441\u043e\u043f\u0448\u0438\u0439"),d.print(""+f.offset),d.print(f.tags),d.println("",!1)}),d.text}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();var c0=(()=>(function(l){l[l.Begining=-1]="Begining",l[l.Tropari=-2]="Tropari",l[l.GospodiPomily=-3]="GospodiPomily",l[l.Molitva=-4]="Molitva"}(c0||(c0={})),c0))();class YZe{constructor(o,a,c,u){this.link=o,this.name=a,this.kafizma=c,this.psalom=u}isPsalom(){return this.psalom>0}isBegining(){return this.psalom===c0.Begining}isTropari(){return this.psalom===c0.Tropari}isGospodiPomiluy(){return this.psalom===c0.GospodiPomily}isMolitva(){return this.psalom===c0.Molitva}}class KZe{constructor(o,a,c,u){this.kafizma=o,this.psalom=a,this.add=c,this.filter=u}}let F_=(()=>{class l{constructor(a,c,u,h,d,f){this.psSvc=a,this.uiConfig=c,this.config=u,this.kvSvc=h,this.http=d,this.themeSvc=f,this.items=[],this.audio=null,this.current=null,this.playList=[],this.playRunning=!1,this.currentAudioValue=-1,this.currentAudioValueId=0,this.restPoint="/",this.startRequests=[],this.startRequestsId=0,this.setAudioDir(f.getAudioRootFolder(),()=>{}),this.control=this.getAudioSubscription(!0)}setAudioDir(a,c){let u="audioDir";this.kvSvc.findKey(u,h=>{h&&h.success?this.kvSvc.updateKey(th.of(u,a),d=>{c&&c(d?d.error:null)}):this.kvSvc.insertKey(th.of(u,a),d=>{c&&c(d?d.error:null)})})}ngOnDestroy(){this.stop()}autoPlay(){if(this.playList.length){const a=this.playList.shift();if(a){this.playRunning=!0;let c=(u,h)=>{let d=this.uiConfig.downloadAudioFile(u,"translation"+this.toString(""+this.currentAudioValue,3));d||(h=!0);let f=()=>{this.audio=new Audio(h?u:this.getPlayedLink(u)),this.audio.onended=()=>{this.autoPlay()},h||(this.audio.onerror=p=>{c(a.link,!0)});try{this.audio.play()}catch(p){}this.current=a};d?this.setAudioDir(d,()=>{f()}):f()};c(a.link,this.config.isMemoryServerType())}else this.playRunning=!1}else this.playRunning=!1}getUIAudioValue(){let a=1;try{a=+this.uiConfig.ui.audioValue.getStringValue()}catch(c){a=1}return(a<1||a>10)&&(a=1),a}reload(a,c=!1){let u=this.getUIAudioValue();if(u!==this.currentAudioValue&&(c=!0),!c&&this.items.length>0)a&&a();else{this.items=[],this.currentAudioValue=u;let h=++this.currentAudioValueId,d="audio/CS/"+this.toString(""+this.currentAudioValue,3)+".txt";this.psSvc.getText(d,f=>{if(h==this.currentAudioValueId)return f?(JSON.parse(f).forEach(g=>{this.items.push(new YZe(g.link,g.name,+g.kafizma,+g.psalom))}),void(a&&a())):(this.config.addAlert(Or.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: "+this.currentAudioValue,"Ok",15)),void(a&&a()));this.config.post(()=>{a&&a()})})}}isStarted(){return!!this.audio}isPlaying(a=!1){return this.audio&&!this.audio.paused||a&&this.playRunning}currentName(){return this.current?this.current.name:""}startCheckUI(a,c,u,h,d){let f=this.uiConfig.ui.audioValue.getStringValue();if(f&&"0"!=f)return this.start(a,c,u,h,d)}start(a,c,u,h,d){let f=this.startDirect(c,u,h,d);a&&a(f)}startDirectRaw(a,c,u,h,d){h||(this.playList=[]),this.items.forEach(f=>{(c<0||f.kafizma===c)&&(u<-5||f.psalom===u)&&(!d||d(f.psalom))&&this.playList.push(f)}),a&&(!h||!this.isPlaying(!0))&&(this.isPlaying(!0)&&!h&&this.stop(),this.autoPlay())}startDirect(a,c,u,h){const d=a<0&&c<0;let f=++this.startRequestsId;return this.startRequests.push(new KZe(a,c,u,h)),d||this.reload(()=>{if(f==this.startRequestsId){let p=this.startRequests;this.startRequests=[],p.forEach((g,m)=>this.startDirectRaw(m+1==p.length,g.kafizma,g.psalom,g.add,g.filter))}}),this.getAudioSubscription(d)}getAudioSubscription(a){const c=this;return new class u{close(d){return(!a||d)&&c.stop(),this}currentName(){return c.currentName()}isPlaying(){return c.isPlaying()}isStarted(){return c.isStarted()}next(){return c.stop(),c.autoPlay(),this}pause(){return c.pause(),this}resume(){return c.resume(),this}}}next(){this.stop(),this.autoPlay()}stop(){this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.audio=null,this.current=null,this.playRunning=!1)}pause(){this.audio&&this.audio.pause()}resume(){this.audio&&this.audio.play()}getRestPoint(a,c){return kr.merge(kr.merge(c||this.config.serviceAPIHost,this.restPoint),a)}getRestPointRaw(a,c){return kr.merge(c||this.config.serviceAPIHost,a)}toString(a,c){for(;a.length<c;)a="0"+a;return a}getPlayedLink(a){let c=a.split("/"),u=c[c.length-1];return this.getRestPointRaw(kr.merge("/audio/audio/translation"+this.toString(""+this.currentAudioValue,3),u),null)}downloadAll(a,c){let u=[];this.items.forEach(f=>{u.push(f.link)});let h=0;a(.01);let d=()=>{this.config.post(()=>{if(h>=u.length)return a(100),void c();let f=u[h++];this.uiConfig.downloadAudioFile(f,"translation"+this.toString(""+this.currentAudioValue,3)),a((h+1)/u.length*100),d()},100)};d()}deleteAudioAll(a,c){this.config.post(()=>{this.uiConfig.deleteAudioTranslation(a),c&&c()},100)}downloadAllUrls(a){var c=document.createElement("a");c.setAttribute("download",""),c.style.display="none",document.body.appendChild(c);for(var u=0;u<a.length;u++)c.setAttribute("href",a[u]),c.click();document.body.removeChild(c)}exists(a,c){this.http.get(this.getRestPoint("/exists/audio/"+a,null),{}).pipe(rr(Ni.handleError)).subscribe({next:h=>{c(h,null)},error:h=>{c(null,""+h)}})}}return l.\u0275fac=function(a){return new(a||l)(Ae(Df),Ae(Xn),Ae(an),Ae(yV),Ae(sd),Ae(Mo))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();const JZe=function(l){return{"print-only":!1,pageBreak:l}};function eXe(l,o){if(1&l&&(D(0,"div",1),me(1,"app-svg-js-image",2),me(2,"app-dynamic-menu",3),k()),2&l){const a=Z();F("ngClass",eo(6,JZe,a.enabled&&a.uiConfig.ui.showFacePage.getBooleanValue()||a.showAnyWay)),R(1),F("genName","LogoLight2")("svgWidth",512)("svgHeight",512)("type",a.type),R(1),F("data",a.dynMenuData)}}let dce=(()=>{class l{constructor(a){this.uiConfig=a,this.enabled=!0,this.showAnyWay=!1,this.type=512,this.dynMenuData=Kp.builder().setWhiteBack(!0).setMenuState($p.builder().addCommand(Ca.builder().setName("\u0414\u0435\u0432\u0438\u0441\u043a\u0438\u043d")).setGenName("MenuDay2"))}set menuClick(a){this.dynMenuData&&this.dynMenuData.setOnClick(a)}set name(a){this.dynMenuData.setMenuState($p.builder().addCommand(Ca.builder().setName(a)).setGenName("MenuDay2"))}get name(){return this.dynMenuData.menuState.commands[0].name}ngOnInit(){}}return l.\u0275fac=function(a){return new(a||l)(L(Xn))},l.\u0275cmp=qe({type:l,selectors:[["app-print-logo"]],inputs:{enabled:"enabled",showAnyWay:"showAnyWay",type:"type",menuClick:"menuClick",name:"name"},decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"genName","svgWidth","svgHeight","type"],[3,"data"]],template:function(a,c){1&a&&Y(0,eXe,3,8,"div",0),2&a&&F("ngIf",c.enabled&&c.uiConfig.ui.showFacePage.getBooleanValue()||c.showAnyWay)},directives:[yn,ii,mc,HM],styles:[""]}),l})();function tXe(l,o){if(1&l){const a=gt();D(0,"span",2),ee("click",function(){const h=Le(a).$implicit;return Z().onItem(h)}),ne(1),k()}if(2&l){const a=o.$implicit;F("ngClass",Z().getSpanClass(a)),R(1),en(a.text)}}const nXe=function(l){return{"bottom-top-space":!0,"no-print":l}};let XM=(()=>{class l{constructor(a,c){this.config=a,this.uiConfig=c,this.currentItem=null}get toolbarData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){var c={};return c["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,c}onItem(a){this.currentItem=a,this.toolbarData.onClick&&this.toolbarData.onClick(a)}getSpanClass(a){let c=this.getSpanClassRaw(a);return a.getSpanClassDetector.checkAndGetValue(c)}getSpanClassRaw(a){let c={cursor:!0,label:!0};return c[this.toolbarData.classes.labelNormal]=!a.selected,c[this.toolbarData.classes.labelSelected]=a.selected,c["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,c}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-content-toolbar"]],inputs:{data:"data"},decls:2,vars:4,consts:[[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,tXe,2,2,"span",1),k()),2&a&&(F("ngClass",eo(2,nXe,c.toolbarData.classes.noPrint)),R(1),F("ngForOf",c.toolbarData.items))},directives:[ii,_i],styles:[""]}),l})();function iXe(l,o){if(1&l){const a=gt();D(0,"div",6),D(1,"a",7),ee("click",function(){return Le(a).$implicit.runOnClick()}),ne(2),k(),k()}if(2&l){const a=o.$implicit,c=Z(2);R(1),F("ngClass",c.getAlertActionClass(!1))("hidden",!a.enabled),R(1),en(a.text)}}function rXe(l,o){1&l&&me(0,"clr-icon",9),2&l&&et("shape",Z(3).errorsData.classes.alertShape)}function sXe(l,o){if(1&l){const a=gt();D(0,"span"),Y(1,rXe,1,1,"clr-icon",8),D(2,"span",1),ee("click",function(){const h=Le(a).$implicit;return Z(2).onErrorMessage(h)}),ne(3),k(),k()}if(2&l){const a=o.$implicit,c=Z(2);R(1),F("ngIf",c.errorsData.classes.alertShape),R(1),F("ngClass",c.getAlertTextClass(!1)),R(1),vi(" ",a," ")}}function oXe(l,o){if(1&l){const a=gt();D(0,"button",10),D(1,"clr-icon",1),ee("click",function(){return Le(a).$implicit.runOnClick()}),k(),k()}if(2&l){const a=o.$implicit,c=Z(2);R(1),F("ngClass",c.getAlertButtonClass(!1)),et("shape",a.shape)}}function aXe(l,o){if(1&l&&(D(0,"div"),D(1,"div",1),ee("click",function(c){return c.stopPropagation()}),D(2,"div",2),Y(3,iXe,3,3,"div",3),Y(4,sXe,4,3,"span",4),k(),Y(5,oXe,2,2,"button",5),k(),k()),2&l){const a=Z();R(1),F("ngClass",a.getClasses()),R(2),F("ngForOf",a.errorsData.actions),R(1),F("ngForOf",a.errorsData.errors),R(1),F("ngForOf",a.errorsData.buttons)}}function lXe(l,o){if(1&l&&(D(0,"div",18),me(1,"clr-icon",9),k()),2&l){const a=Z(3);R(1),et("shape",a.errorsData.classes.alertShape)}}function cXe(l,o){if(1&l){const a=gt();D(0,"a",7),ee("click",function(){return Le(a).$implicit.runOnClick()}),ne(1),k()}if(2&l){const a=o.$implicit;F("ngClass",Z(3).getAlertActionClass())("hidden",!a.enabled),R(1),en(a.text)}}function uXe(l,o){if(1&l){const a=gt();D(0,"div",14),Y(1,lXe,2,1,"div",15),D(2,"span",1),ee("click",function(){const h=Le(a).$implicit;return Z(2).onErrorMessage(h)}),ne(3),k(),D(4,"div",16),Y(5,cXe,2,3,"a",17),k(),k()}if(2&l){const a=o.$implicit,c=Z(2);R(1),F("ngIf",c.errorsData.classes.alertShape),R(1),F("ngClass",c.getAlertTextClass()),R(1),vi(" ",a," "),R(2),F("ngForOf",c.errorsData.actions)}}function hXe(l,o){if(1&l){const a=gt();D(0,"button",10),D(1,"clr-icon",1),ee("click",function(){return Le(a).$implicit.runOnClick()}),k(),k()}if(2&l){const a=o.$implicit,c=Z(2);R(1),F("ngClass",c.getAlertButtonClass()),et("shape",a.shape)}}function dXe(l,o){if(1&l&&(D(0,"div"),D(1,"div",11),ee("click",function(c){return c.stopPropagation()}),D(2,"div",12),Y(3,uXe,6,4,"div",13),k(),Y(4,hXe,2,2,"button",5),k(),k()),2&l){const a=Z();R(1),F("ngClass",a.getClasses()),R(2),F("ngForOf",a.errorsData.errors),R(1),F("ngForOf",a.errorsData.buttons)}}let YM=(()=>{class l{constructor(a){this.uiConfig=a,this.stdErrorsEnabled=!1,this.getClassesDetector=wa.builder(),this.getAlertActionClassDetector=wa.builder(),this.getAlertTextClassTrueDetector=wa.builder(),this.getAlertTextClassFalseDetector=wa.builder()}get errorsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(a=!0){let c=this.getClassesRaw(a);return this.getClassesDetector.checkAndGetValue(c)}getClassesRaw(a=!0){var c,u=null===(c=this.errorsData)||void 0===c?void 0:c.classes,h={alert:a};return u&&(h[u.alertClass]=a,h["no-print"]=u.noPrint),h}getAlertButtonClass(a=!0){let c={"alert-icon":a};return c["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,c}getAlertActionClass(a=!0){let c=this.getAlertActionClassRaw(a);return this.getAlertActionClassDetector.checkAndGetValue(c)}getAlertActionClassRaw(a=!0){let c={"alert-action":a};return a||(c["left-space"]=!0,c["right-space"]=!0),c["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,c}getAlertTextClass(a=!0){let c=this.getAlertTextClassRaw(a);return(a?this.getAlertTextClassTrueDetector:this.getAlertTextClassFalseDetector).checkAndGetValue(c)}getAlertTextClassRaw(a=!0){let c={"alert-text":a,cursor:!0};return c["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,c}onErrorMessage(a){return this.errorsData.click(a),this}}return l.\u0275fac=function(a){return new(a||l)(L(Xn))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-errors"]],inputs:{data:"data"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngClass","click"],[1,"left-space","right-space","bottom-top-space","w100"],["class","inlineBlock underline floatRight no-print",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["type","button","class","close","aria-label","Close",4,"ngFor","ngForOf"],[1,"inlineBlock","underline","floatRight","no-print"],["href","javascript:void(0)",3,"ngClass","hidden","click"],["class","alert-icon",4,"ngIf"],[1,"alert-icon"],["type","button","aria-label","Close",1,"close"],["role","alert",3,"ngClass","click"],[1,"alert-items"],["class","alert-item static",4,"ngFor","ngForOf"],[1,"alert-item","static"],["class","alert-icon-wrapper",4,"ngIf"],[1,"alert-actions"],["href","javascript:void(0)",3,"ngClass","hidden","click",4,"ngFor","ngForOf"],[1,"alert-icon-wrapper"]],template:function(a,c){1&a&&(Y(0,aXe,6,4,"div",0),Y(1,dXe,5,3,"div",0)),2&a&&(F("ngIf",!c.stdErrorsEnabled&&(null==c.errorsData||null==c.errorsData.errors?null:c.errorsData.errors.length)),R(1),F("ngIf",c.stdErrorsEnabled&&(null==c.errorsData||null==c.errorsData.errors?null:c.errorsData.errors.length)))},directives:[yn,ii,_i,Ws],styles:[".floatRight[_ngcontent-%COMP%]{float:right}.inlineBlock[_ngcontent-%COMP%]{display:inline-block}.underline[_ngcontent-%COMP%]{text-decoration:underline}.w100[_ngcontent-%COMP%]{width:100%}"]}),l})();function fXe(l,o){if(1&l){const a=gt();D(0,"clr-radio-wrapper"),D(1,"input",17),ee("ngModelChange",function(u){return Le(a),Z(2).uiConfig.ui.fontSize.rawValue=u}),k(),D(2,"label"),ne(3),k(),k()}if(2&l){const a=o.$implicit,c=Z(2);R(1),F("name","mainFontSize")("value",""+a)("ngModel",c.uiConfig.ui.fontSize.rawValue),R(2),vi("x",a,"")}}const pXe=function(){return[0,1,2,3,4,5,6,7,8,9,10,20,30]};function gXe(l,o){if(1&l&&(D(0,"clr-radio-container",1),D(1,"label"),ne(2),k(),Y(3,fXe,4,4,"clr-radio-wrapper",2),k()),2&l){const a=Z();R(2),vi("",a.uiConfig.ui.fontSize.description,":"),R(1),F("ngForOf",bl(2,pXe))}}function mXe(l,o){if(1&l){const a=gt();D(0,"clr-toggle-wrapper"),D(1,"input",18),ee("ngModelChange",function(u){return Le(a).$implicit.rawValue=u}),k(),D(2,"label"),ne(3),k(),k()}if(2&l){const a=o.$implicit;R(1),F("name",a.name)("value",a.name)("ngModel",a.rawValue),R(2),en(a.description)}}function vXe(l,o){if(1&l){const a=gt();D(0,"clr-radio-wrapper"),D(1,"input",17),ee("ngModelChange",function(u){return Le(a),Z(2).uiConfig.ui.memorialPageSize.rawValue=u}),k(),D(2,"label"),ne(3),k(),k()}if(2&l){const a=o.$implicit,c=Z(2);R(1),F("name","mainPageSize")("value",""+a)("ngModel",c.uiConfig.ui.memorialPageSize.rawValue),R(2),vi("x",a,"")}}const yXe=function(){return[10,20,30,40,50,60,70,80,90,100]};function _Xe(l,o){if(1&l&&(D(0,"clr-radio-container",1),D(1,"label"),ne(2),k(),Y(3,vXe,4,4,"clr-radio-wrapper",2),k()),2&l){const a=Z();R(2),vi("",a.uiConfig.ui.memorialPageSize.description,":"),R(1),F("ngForOf",bl(2,yXe))}}function bXe(l,o){if(1&l){const a=gt();D(0,"clr-radio-wrapper"),D(1,"input",17),ee("ngModelChange",function(u){return Le(a),Z(2).currentKafizma=u}),k(),D(2,"label"),ne(3),k(),k()}if(2&l){const a=o.$implicit,c=Z(2);R(1),F("name","mainKafizma")("value",""+a)("ngModel",c.currentKafizma),R(2),en(a||"\u041f\u043e \u0438\u043c\u0435\u043d\u0438 \u0432 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0435")}}const xXe=function(){return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]};function CXe(l,o){1&l&&(D(0,"clr-radio-container",1),D(1,"label"),ne(2,"\u041a\u0430\u0444\u0438\u0437\u043c\u0430:"),k(),Y(3,bXe,4,4,"clr-radio-wrapper",2),k()),2&l&&(R(3),F("ngForOf",bl(1,xXe)))}function SXe(l,o){if(1&l){const a=gt();D(0,"clr-radio-wrapper"),D(1,"input",17),ee("ngModelChange",function(u){return Le(a),Z(2).uiConfig.ui.audioValue.rawValue=u}),k(),D(2,"label"),ne(3),k(),k()}if(2&l){const a=o.$implicit,c=Z(2);R(1),F("name","mainAudio")("value",a.value)("ngModel",c.uiConfig.ui.audioValue.rawValue),R(2),en(a.name)}}function wXe(l,o){if(1&l&&(D(0,"clr-radio-container",1),D(1,"label"),ne(2,"\u0417\u0432\u0443\u043a\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435:"),k(),Y(3,SXe,4,4,"clr-radio-wrapper",2),k()),2&l){const a=Z();R(3),F("ngForOf",a.audios)}}function TXe(l,o){1&l&&(D(0,"h4"),ne(1,"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430:"),k())}function OXe(l,o){1&l&&me(0,"clr-progress-bar",19),2&l&&F("clrValue",Z().translationLoadingPersantage)}function DXe(l,o){if(1&l){const a=gt();D(0,"button",20),ee("click",function(){return Le(a),Z().downloadAll()}),me(1,"clr-icon",21),ne(2," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0432\u043e\u0434\n"),k()}}function kXe(l,o){if(1&l){const a=gt();D(0,"button",20),ee("click",function(){const h=Le(a).$implicit;return Z(2).deleteTranslation(h)}),me(1,"clr-icon",23),ne(2),k()}if(2&l){const a=o.$implicit;R(2),qb(" ",a.name," (",a.nameOriginal,") ")}}function MXe(l,o){if(1&l&&(D(0,"div"),Y(1,kXe,3,2,"button",22),k()),2&l){const a=Z();R(1),F("ngForOf",a.translationInfos)}}const I6=function(l,o,a,c){return{btn:!0,"btn-primary":l,"btn-success":o,"btn-primary-outline":a,"btn-success-outline":c}};class oh{constructor(o,a,c){this.name=o,this.nameSimple=a,this.value=c}}class EXe{constructor(o,a,c){this.name=o,this.nameOriginal=a,this.value=c}equalsTo(o){return this.nameOriginal==o.name&&this.value==o.value}}class AXe{constructor(o=!1,a="",c=""){this.modalFlag=o,this.currentName=a,this.text=c}}let N_=(()=>{class l{constructor(a,c,u,h){this.config=a,this.uiConfig=c,this.themesSvc=u,this.audioSvc=h,this.translationLoadingPersantage=0,this.settingsBooks=[],this.settingsMemorial=[],this.settingsCalculator=[],this.audios=[new oh("\u0411\u0435\u0437 \u0437\u0432\u0443\u043a\u0430","\u0411\u0435\u0437 \u0437\u0432\u0443\u043a\u0430","0"),new oh("\u041f\u0441\u0430\u043b\u043c\u044b \u0414\u0430\u0432\u0438\u0434\u043e\u0432\u044b (\u0438\u0435\u0440\u043e\u0434\u0438\u0430\u043a\u043e\u043d \u0413\u0435\u0440\u043c\u0430\u043d (\u0420\u044f\u0431\u0446\u0435\u0432))","\u0438\u0435\u0440\u043e\u0434\u0438\u0430\u043a\u043e\u043d \u0413\u0435\u0440\u043c\u0430\u043d (\u0420\u044f\u0431\u0446\u0435\u0432)","1"),new oh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c (\u0441\u0438\u043d\u043e\u0434\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0435\u0440\u0435\u0432\u043e\u0434) (\u0418\u043b\u044c\u044f \u0415\u0444\u0438\u043c\u043e\u0432\u0438\u0447 \u041f\u0440\u0443\u0434\u043e\u0432\u0441\u043a\u0438\u0439)","\u0418\u043b\u044c\u044f \u0415\u0444\u0438\u043c\u043e\u0432\u0438\u0447 \u041f\u0440\u0443\u0434\u043e\u0432\u0441\u043a\u0438\u0439","9"),new oh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u043f\u0435\u0440\u0435\u0432\u043e\u0434 \u0411\u0438\u0440\u0443\u043a\u043e\u0432\u044b\u0445) (\u041b\u0435\u0432 \u041f\u0440\u044b\u0433\u0443\u043d\u043e\u0432)","\u041b\u0435\u0432 \u041f\u0440\u044b\u0433\u0443\u043d\u043e\u0432","2"),new oh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0434\u0440\u0435\u0432\u043d\u0435\u0433\u0440\u0435\u0447\u0435\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435","\u0434\u0440\u0435\u0432\u043d\u0435\u0433\u0440\u0435\u0447\u0435\u0441\u043a\u0438\u0439","4"),new oh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0434\u0438\u0430\u043a\u043e\u043d \u0418\u043e\u0430\u043d\u043d \u0413\u043b\u0435\u0431\u043e\u0432)","\u0434\u0438\u0430\u043a\u043e\u043d \u0418\u043e\u0430\u043d\u043d \u0413\u043b\u0435\u0431\u043e\u0432","3"),new oh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a \u0410\u043d\u0434\u0440\u0435\u0439 \u0421\u043c\u0438\u0440\u043d\u043e\u0432)","\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a \u0410\u043d\u0434\u0440\u0435\u0439 \u0421\u043c\u0438\u0440\u043d\u043e\u0432","5"),new oh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0418\u043b\u044c\u044f \u0420\u044b\u0431\u0430\u043a\u043e\u0432)","\u0418\u043b\u044c\u044f \u0420\u044b\u0431\u0430\u043a\u043e\u0432","6"),new oh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c (\u0438\u0433\u0443\u043c\u0435\u043d \u0418\u043e\u0430\u0441\u0430\u0444 (\u0421\u043e\u0440\u043e\u043a\u0438\u043d), \u041c\u0430\u043a\u0441\u0438\u043c \u0422\u0430\u043d\u0446\u0443\u0440\u043e\u0432)","\u0438\u0433\u0443\u043c\u0435\u043d \u0418\u043e\u0430\u0441\u0430\u0444 (\u0421\u043e\u0440\u043e\u043a\u0438\u043d), \u041c\u0430\u043a\u0441\u0438\u043c \u0422\u0430\u043d\u0446\u0443\u0440\u043e\u0432","7"),new oh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0438\u0435\u0440\u043e\u043c\u043e\u043d\u0430\u0445 \u0422\u0438\u0445\u043e\u043d (\u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432))","\u0438\u0435\u0440\u043e\u043c\u043e\u043d\u0430\u0445 \u0422\u0438\u0445\u043e\u043d (\u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432)","8"),new oh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0438\u0433\u0443\u043c\u0435\u043d \u0410\u043c\u0432\u0440\u043e\u0441\u0438\u0439 (\u0415\u0440\u043c\u0430\u043a\u043e\u0432))","\u0438\u0433\u0443\u043c\u0435\u043d \u0410\u043c\u0432\u0440\u043e\u0441\u0438\u0439 (\u0415\u0440\u043c\u0430\u043a\u043e\u0432)","10")],this.translationInfosArray=[],this.deleteTranslationDlg=new AXe,this.settingsCalculator=[],this.settingsBooks=[c.ui.parallel,c.ui.coloredTranslations,c.ui.fineText,c.ui.lineBreaks,c.ui.showFacePage],this.settingsMemorial=[c.ui.sortPersonsPriests,c.ui.sortPersonsNames,c.ui.memorialVerticalView,c.ui.mergeNameOnImport,c.ui.showMolitvy,c.ui.addCommentToName,c.ui.memorialSlava1Zdrav,c.ui.memorialSlava1Upok,c.ui.memorialSlava2Zdrav,c.ui.memorialSlava2Upok,c.ui.memorialSlava3Zdrav,c.ui.memorialSlava3Upok,c.ui.memorialPsaltir,c.ui.autoDownloadAudioFiles,c.ui.showFacePage,c.ui.stopServiceFlag]}isMemorial(){return null!=this.data&&this.stgsData.classes.memorialSettings}isCalculator(){return null!=this.data&&this.stgsData.classes.calculatorSettings}isBook(){return null==this.data||this.stgsData.classes.bookSettings}get settings(){return this.isBook()?this.settingsBooks:this.isMemorial()?this.settingsMemorial:this.settingsCalculator}get stgsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get translationInfos(){let a=this.uiConfig.getAudioTranslations(),c=()=>{this.translationInfosArray=[];for(let u=0;u<a.length;++u){let h=a[u];this.audios.forEach(d=>{d.value==""+ +h.value&&this.translationInfosArray.push(new EXe(d.nameSimple,h.name,h.value))})}};if(a.length!=this.translationInfosArray.length)c();else for(let u=0;u<a.length;++u)if(!this.translationInfosArray[u].equalsTo(a[u])){c();break}return this.translationInfosArray}get currentKafizma(){return""+Xn.getKafizmNumberBy(17,this.uiConfig.ui.currentOffset.getNumberValue())}set currentKafizma(a){this.uiConfig.ui.currentOffset.setNumberValue(Xn.getOffsetByKafizmNumber(17,+a))}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}toggleParallel(){return this.uiConfig.ui.parallel.setBooleanValue(!this.uiConfig.ui.parallel.getAndVerifyBooleanValue()),this}toggleLineBreaks(){return this.uiConfig.ui.lineBreaks.setBooleanValue(!this.uiConfig.ui.lineBreaks.getAndVerifyBooleanValue()),this}toggleColoredTranslations(){return this.uiConfig.ui.coloredTranslations.setBooleanValue(!this.uiConfig.ui.coloredTranslations.getAndVerifyBooleanValue()),this}isRedTheme(){return this.config.isRedTheme()}isLight(){return this.themesSvc.isLight()}isNight(){return this.themesSvc.isNight()}isAutoTheme(){return this.themesSvc.isAutoTheme()}onToggleAutoTheme(){this.themesSvc.onToggleAutoTheme()}switchToLight(){this.themesSvc.switchToLight()}switchToNight(){this.themesSvc.switchToNight()}downloadAll(){this.audioSvc.downloadAll(a=>(this.translationLoadingPersantage=Math.round(100*a)/100,!0),()=>{this.translationLoadingPersantage=100})}isTranslationDownloading(){return this.config.isRestServerType()&&this.translationLoadingPersantage>0&&this.translationLoadingPersantage<100}isTranslationDownloadNeeded(a){return this.config.isRestServerType()&&(!a||a&&this.uiConfig.ui.autoDownloadAudioFiles.getBooleanValue())&&this.isMemorial()}deleteTranslation(a){this.deleteTranslationDlg.currentName=a.name,this.deleteTranslationDlg.modalFlag=!0}deleteTranslationDirect(){this.config.post(()=>{let a=this.translationInfos.findIndex(h=>h.name==this.deleteTranslationDlg.currentName);a<0||a>=0&&a<this.translationInfos.length&&this.uiConfig.deleteAudioTranslation(this.translationInfos[a].value),this.deleteTranslationDlg.modalFlag=!1})}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(Mo),L(F_))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-settings"]],inputs:{data:"data"},decls:34,vars:29,consts:[["clrInline","",4,"ngIf"],["clrInline",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["clrSuccess","","clrLabeled","",3,"clrValue",4,"ngIf"],["class","btn btn-primary btn-block",3,"click",4,"ngIf"],[1,"top-space","bottom-space"],[1,"btn-group","btn-primary-outline"],[3,"ngClass","click"],["shape","sun",1,"is-solid"],["shape","moon",1,"is-solid"],[1,"s0",3,"clrModalOpen","clrModalOpenChange","click"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["type","radio","clrRadio","",3,"name","value","ngModel","ngModelChange"],["type","checkbox","clrToggle","",3,"name","value","ngModel","ngModelChange"],["clrSuccess","","clrLabeled","",3,"clrValue"],[1,"btn","btn-primary","btn-block",3,"click"],["shape","download"],["class","btn btn-primary btn-block",3,"click",4,"ngFor","ngForOf"],["shape","times"]],template:function(a,c){1&a&&(Y(0,gXe,4,3,"clr-radio-container",0),D(1,"clr-toggle-container",1),D(2,"label"),ne(3,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438:"),k(),Y(4,mXe,4,4,"clr-toggle-wrapper",2),k(),Y(5,_Xe,4,3,"clr-radio-container",0),Y(6,CXe,4,2,"clr-radio-container",0),Y(7,wXe,4,1,"clr-radio-container",0),Y(8,TXe,2,0,"h4",3),Y(9,OXe,1,1,"clr-progress-bar",4),Y(10,DXe,3,0,"button",5),Y(11,MXe,2,1,"div",3),D(12,"div",6),D(13,"clr-toggle-container",1),D(14,"label"),ne(15,"\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441:"),k(),k(),D(16,"div",7),D(17,"button",8),ee("click",function(){return c.switchToLight()}),me(18,"clr-icon",9),k(),D(19,"button",8),ee("click",function(){return c.onToggleAutoTheme()}),me(20,"clr-icon",9),me(21,"clr-icon",10),k(),D(22,"button",8),ee("click",function(){return c.switchToNight()}),me(23,"clr-icon",10),k(),k(),k(),D(24,"clr-modal",11),ee("clrModalOpenChange",function(h){return c.deleteTranslationDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),D(25,"h3",12),ne(26,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430:"),k(),D(27,"div",13),ne(28),k(),D(29,"div",14),D(30,"button",15),ee("click",function(){return c.deleteTranslationDlg.modalFlag=!1}),ne(31,"\u041e\u0442\u043c\u0435\u043d\u0430"),k(),D(32,"button",16),ee("click",function(){return c.deleteTranslationDirect()}),ne(33,"Ok"),k(),k(),k()),2&a&&(F("ngIf",c.isBook()||c.isMemorial()),R(4),F("ngForOf",c.settings),R(1),F("ngIf",c.isMemorial()),R(1),F("ngIf",c.isMemorial()),R(1),F("ngIf",c.isMemorial()),R(1),F("ngIf",c.isTranslationDownloading()),R(1),F("ngIf",c.isTranslationDownloading()),R(1),F("ngIf",c.isTranslationDownloadNeeded(!0)&&!c.isTranslationDownloading()),R(1),F("ngIf",!c.isTranslationDownloading()),R(6),F("ngClass",wT(14,I6,!c.isRedTheme()&&c.isLight(),c.isRedTheme()&&c.isLight(),!c.isRedTheme()&&!c.isLight(),c.isRedTheme()&&!c.isLight())),R(2),F("ngClass",wT(19,I6,!c.isRedTheme()&&c.isAutoTheme(),c.isRedTheme()&&c.isAutoTheme(),!c.isRedTheme()&&!c.isAutoTheme(),c.isRedTheme()&&!c.isAutoTheme())),R(3),F("ngClass",wT(24,I6,!c.isRedTheme()&&c.isNight(),c.isRedTheme()&&c.isNight(),!c.isRedTheme()&&!c.isNight(),c.isRedTheme()&&!c.isNight())),R(2),F("clrModalOpen",c.deleteTranslationDlg.modalFlag),R(4),vi(' \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0432\u0443\u043a\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430: "',c.deleteTranslationDlg.currentName,'"? '))},directives:[yn,AJ,ss,_i,wN,Rx,Sl,LO,No,Co,IO,mp,Vh,vp,lL,Ws,ii,hf,df],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();function IXe(l,o){1&l&&me(0,"clr-icon",16)}function PXe(l,o){1&l&&me(0,"clr-icon",17)}function RXe(l,o){if(1&l){const a=gt();D(0,"clr-input-container"),D(1,"label"),Y(2,IXe,1,0,"clr-icon",13),Y(3,PXe,1,0,"clr-icon",14),ne(4),k(),D(5,"input",15),ee("ngModelChange",function(u){return Le(a).$implicit.value=u}),k(),D(6,"clr-control-error"),ne(7,"\u041f\u043e\u043b\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u043e!"),k(),k()}if(2&l){const a=o.$implicit,c=Z(2);R(2),F("ngIf",c.isEventProperty(a,!1)),R(1),F("ngIf",c.isEventProperty(a,!0)),R(1),vi(" ",a.name,""),R(1),Hv("name","prop_",a.name,""),F("ngModel",a.value)}}function FXe(l,o){if(1&l){const a=gt();D(0,"button",18),ee("click",function(){return Le(a),Z(2).deletePerson()}),me(1,"clr-icon",19),k()}}function NXe(l,o){if(1&l){const a=gt();D(0,"button",11),ee("click",function(){return Le(a),Z(2).addProperty()}),me(1,"clr-icon",20),k()}}function LXe(l,o){if(1&l){const a=gt();D(0,"button",21),ee("click",function(){Le(a);const u=Z(2);return u.savePerson(u.person)}),ne(1," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c "),k()}}function BXe(l,o){if(1&l){const a=gt();D(0,"form",1),D(1,"clr-input-container"),D(2,"label"),ne(3,"\u0418\u043c\u044f"),k(),D(4,"input",2),ee("ngModelChange",function(u){return Le(a),Z().person.name=u}),k(),k(),D(5,"clr-input-container"),D(6,"label"),ne(7,"\u041a\u0430\u0444\u0438\u0437\u043c\u0430"),k(),D(8,"input",3),ee("ngModelChange",function(u){return Le(a),Z().kafizma=u}),k(),k(),D(9,"clr-checkbox-container",4),D(10,"label"),ne(11,"\u0421\u0442\u0430\u0442\u0443\u0441"),k(),D(12,"clr-checkbox-wrapper"),D(13,"input",5),ee("ngModelChange",function(u){return Le(a),Z().person.live=u}),k(),D(14,"label"),ne(15,"\u0416\u0438\u0432\u043e\u0439"),k(),k(),k(),Y(16,RXe,8,5,"clr-input-container",6),D(17,"span",7),ne(18,"\xa0"),k(),D(19,"clr-input-container"),D(20,"label"),ne(21,"*\u041d\u043e\u0432\u043e\u0435"),k(),D(22,"input",8),ee("ngModelChange",function(u){return Le(a),Z().newName=u}),k(),k(),D(23,"span",7),ne(24,"\xa0"),k(),Y(25,FXe,2,0,"button",9),Y(26,NXe,2,0,"button",10),D(27,"button",11),ee("click",function(){Le(a);const u=Z();return u.revertPerson(u.person)}),ne(28," \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c "),k(),Y(29,LXe,2,0,"button",12),k()}if(2&l){const a=Z();R(4),F("ngModel",a.person.name),R(4),F("ngModel",a.kafizma),R(5),F("ngModel",a.person.live),R(3),F("ngForOf",a.properties.properties),R(6),F("ngModel",a.newName),R(3),F("ngIf",a.personDeletionEnabled),R(1),F("ngIf",a.newName),R(3),F("ngIf",a.person.dirty)}}let VXe=(()=>{class l{constructor(a,c,u,h){this.ks=a,this.eventParserSvc=c,this.config=u,this.uiConfig=h,this.personDeletionEnabled=!1,this.memkey=-1,this.data=null,this.changesDetectorPerson=Gs.builder(),this.myProperties=new Li,this.newName=""}get person(){var a;return null===(a=this.data)||void 0===a?void 0:a.person}get kafizma(){return!this.person||this.person.offset<0?0:Xn.getKafizmNumberBy(17,this.person.offset)}set kafizma(a){if(a<=0)this.person&&(this.person.offset=-1);else if(this.person){let c=Xn.getOffsetByKafizmNumber(17,a);this.person.offset=c,this.uiConfig.ui.currentPersonOffset.setNumberValue(c)}}get properties(){return this.syncData(),this.myProperties}updateProperties(){this.newName="",this.properties.setOnChangeCallback(()=>{this.person&&this.person.setDirty()}),this.properties.load(this.person?this.person.description:""),this.properties.properties.find(a=>"\u0442\u0435\u043a\u0441\u0442"==a.name)||this.properties.pushNew("\u0442\u0435\u043a\u0441\u0442","")}ngOnDestroy(){}ngOnInit(){this.updateProperties()}savePerson(a){a.description=this.properties.toString(),this.ks.save(this.memkey,a,!0).then(c=>{var u;null===(u=this.data)||void 0===u||u.click(!0)},c=>{var u;this.config.addAlert(Or.of(""+c,"OK",15)),null===(u=this.data)||void 0===u||u.click(!1)})}revertPerson(a){var c;a.revertDirty(),null===(c=this.data)||void 0===c||c.click(!1)}addProperty(){this.newName&&(this.properties.pushNew(this.newName,""),this.newName="")}isEventProperty(a,c){try{let u=a.value?this.eventParserSvc.parseEvent(a.value):null;return null!=u&&c==u.isToday()}catch(u){}return!1}syncData(){var a;this.changesDetectorPerson.checkAndUpdate(null===(a=this.data)||void 0===a?void 0:a.person)&&this.config.post(()=>{this.updateProperties()})}deletePerson(){!this.data||this.ks.deletePersons([this.data.person]).then(a=>{var c,u;a&&a.success?null===(c=this.data)||void 0===c||c.click(!0):(this.config.addAlert(Or.of("\u041e\u0448\u0438\u0431\u043a\u0430: "+(null==a?void 0:a.error),"OK",15)),null===(u=this.data)||void 0===u||u.click(!1))},a=>{var c;this.config.addAlert(Or.of(""+a,"OK",15)),null===(c=this.data)||void 0===c||c.click(!1)})}}return l.\u0275fac=function(a){return new(a||l)(L(Xp),L(ZM),L(an),L(Xn))},l.\u0275cmp=qe({type:l,selectors:[["app-person-details"]],inputs:{data:"data"},decls:1,vars:1,consts:[["clrForm","",4,"ngIf"],["clrForm",""],["clrInput","","placeholder","\u0418\u043c\u044f","name","name",3,"ngModel","ngModelChange"],["clrInput","","placeholder","\u0418\u043d\u0434\u0435\u043a\u0441","name","offset",3,"ngModel","ngModelChange"],["clrInline",""],["type","checkbox","clrCheckbox","","name","options","value","option1",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"clr-subtext"],["clrInput","","placeholder","\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e","name","prop_new_name",3,"ngModel","ngModelChange"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["class","btn btn-success",3,"click",4,"ngIf"],["shape","event",4,"ngIf"],["shape","event","class","is-solid",4,"ngIf"],["clrInput","","placeholder","\u0422\u0435\u043a\u0441\u0442","required","",3,"name","ngModel","ngModelChange"],["shape","event"],["shape","event",1,"is-solid"],[1,"btn","btn-danger",3,"click"],["shape","trash"],["shape","plus"],[1,"btn","btn-success",3,"click"]],template:function(a,c){1&a&&Y(0,BXe,30,8,"form",0),2&a&&F("ngIf",c.person)},directives:[yn,hy,cy,ef,AO,Oy,ss,Sl,Jx,No,Co,IO,mp,Vh,vp,_i,Ws,cm,hN],styles:[".template-editor[_ngcontent-%COMP%]{height:calc(100vh - 290px)}.template-editor-2[_ngcontent-%COMP%]{height:calc(100vh - 230px)}"]}),l})(),P6=(()=>{class l{constructor(a){this.config=a,this.clazz={}}get spinnerData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){var a,c=null===(a=this.spinnerData)||void 0===a?void 0:a.classes;return this.clazz.spinner=!0,this.clazz["spinner-inline"]=!c||c.spinnerInline,this.clazz}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-spinner"]],inputs:{data:"data"},decls:5,vars:3,consts:[[3,"ngClass"]],template:function(a,c){1&a&&(D(0,"span"),D(1,"span",0),ne(2),k(),D(3,"span"),ne(4),k(),k()),2&a&&(R(1),F("ngClass",c.getClasses()),R(1),vi(" ",c.text," "),R(2),vi(" ",c.text," "))},directives:[ii],styles:[""]}),l})();const zXe=["pagesView"];function UXe(l,o){if(1&l){const a=gt();D(0,"clr-accordion-panel",59),ee("clrAccordionPanelOpenChange",function(u){return Le(a),Z(2).showSettings=u}),D(1,"clr-accordion-title"),ne(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),k(),D(3,"clr-accordion-content"),me(4,"app-dynamic-settings",4),D(5,"div",60),D(6,"button",61),ee("click",function(){return Le(a),Z(2).printBook()}),me(7,"clr-icon",62),ne(8," \u041f\u0435\u0447\u0430\u0442\u044c "),k(),k(),k(),k()}if(2&l){const a=Z(2);F("clrAccordionPanelOpen",a.showSettings),R(4),F("data",a.settingsData)}}function HXe(l,o){if(1&l){const a=gt();D(0,"clr-accordion-panel",59),ee("clrAccordionPanelOpenChange",function(u){return Le(a),Z(2).filterMemorials=u}),D(1,"clr-accordion-title"),ne(2,"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f"),k(),D(3,"clr-accordion-content"),me(4,"app-dynamic-content-toolbar",4),me(5,"app-dynamic-content-toolbar",4),k(),k()}if(2&l){const a=Z(2);F("clrAccordionPanelOpen",a.filterMemorials),R(4),F("data",a.toolbarMemorialsFilters),R(1),F("data",a.toolbarMemorialsFlags)}}function $Xe(l,o){if(1&l){const a=gt();D(0,"div",56),D(1,"form",5),D(2,"clr-input-container"),D(3,"label"),ne(4,"\u0418\u043c\u044f:"),k(),D(5,"input",63),ee("ngModelChange",function(u){return Le(a),Z(2).search=u}),k(),k(),k(),k()}if(2&l){const a=Z(2);R(5),F("ngModel",a.search)}}function WXe(l,o){1&l&&Va(0)}const GXe=function(l,o,a){return{$implicit:l,horPagesCount:o,showPersons:a}};function QXe(l,o){if(1&l){const a=gt();D(0,"div",40),ee("click",function(u){return u.stopPropagation()}),me(1,"app-print-logo",41),me(2,"app-dynamic-content-toolbar",4),me(3,"app-dynamic-errors",4),D(4,"clr-accordion",42),Y(5,UXe,9,2,"clr-accordion-panel",43),Y(6,HXe,6,3,"clr-accordion-panel",43),k(),D(7,"div",44),D(8,"div",45),D(9,"button",46),ee("click",function(){return Le(a),Z().onEditTitleInfo()}),me(10,"clr-icon"),D(11,"span",28),ne(12," \u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f"),k(),k(),k(),D(13,"div",45),D(14,"button",46),ee("click",function(){return Le(a),Z().addMemorial()}),me(15,"clr-icon",47),D(16,"span",28),ne(17," \u041d\u043e\u0432\u044b\u0439"),k(),k(),k(),D(18,"div",45),D(19,"button",46),ee("click",function(){return Le(a),Z().toggleSearching()}),me(20,"clr-icon",48),D(21,"span",28),ne(22," \u041f\u043e\u0438\u0441\u043a"),k(),k(),k(),D(23,"div",45),D(24,"button",46),ee("click",function(){return Le(a),Z().importMemorials()}),me(25,"clr-icon",49),D(26,"span",28),ne(27," \u0418\u043c\u043f\u043e\u0440\u0442"),k(),k(),k(),D(28,"div",45),D(29,"button",46),ee("click",function(){return Le(a),Z().exportMemorials()}),me(30,"clr-icon",50),D(31,"span",28),ne(32," \u042d\u043a\u0441\u043f\u043e\u0440\u0442"),k(),k(),k(),D(33,"div",45),D(34,"button",46),ee("click",function(){return Le(a),Z().deleteMemorial()}),me(35,"clr-icon",51),D(36,"span",28),ne(37," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"),k(),k(),k(),k(),D(38,"div",52),D(39,"div",53),D(40,"button",46),ee("click",function(){return Le(a),Z().onEditTitleInfo()}),me(41,"clr-icon"),D(42,"span",28),ne(43," \u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f"),k(),k(),D(44,"button",46),ee("click",function(){return Le(a),Z().addMemorial()}),me(45,"clr-icon",47),D(46,"span",28),ne(47," \u041d\u043e\u0432\u044b\u0439"),k(),k(),k(),D(48,"div",53),D(49,"button",46),ee("click",function(){return Le(a),Z().toggleSearching()}),me(50,"clr-icon",48),D(51,"span",28),ne(52," \u041f\u043e\u0438\u0441\u043a"),k(),k(),D(53,"button",46),ee("click",function(){return Le(a),Z().importMemorials()}),me(54,"clr-icon",49),D(55,"span",28),ne(56," \u0418\u043c\u043f\u043e\u0440\u0442"),k(),k(),k(),D(57,"div",53),D(58,"button",46),ee("click",function(){return Le(a),Z().exportMemorials()}),me(59,"clr-icon",50),D(60,"span",28),ne(61," \u042d\u043a\u0441\u043f\u043e\u0440\u0442"),k(),k(),D(62,"button",46),ee("click",function(){return Le(a),Z().deleteMemorial()}),me(63,"clr-icon",51),D(64,"span",28),ne(65," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"),k(),k(),k(),k(),Y(66,$Xe,6,1,"div",54),D(67,"div",null,55),D(69,"div",56),D(70,"div"),me(71,"app-dynamic-content-toolbar",4),k(),k(),Y(72,WXe,1,0,"ng-container",57),D(73,"div",56),D(74,"div"),me(75,"app-dynamic-content-toolbar",4),k(),k(),D(76,"div",58),ne(77),k(),k(),k()}if(2&l){const a=Z(),c=Fo(144),u=Fo(146),h=Fo(148),d=Fo(150);R(1),F("enabled",!a.personsData.readonly)("name",a.currentMemorial?a.currentMemorial:"\u0412\u0441\u0435"),R(1),F("data",a.toolbarMemorials),R(1),F("data",a.headerData),R(2),F("ngIf",a.showSettings&&!a.personsData.readonly),R(1),F("ngIf",a.filterMemorials&&!a.personsData.text),R(1),F("hidden",a.personsData.readonly),R(3),et("shape","form"),R(28),F("hidden",a.personsData.readonly),R(3),et("shape","form"),R(25),F("ngIf",a.isSearching()),R(5),F("data",a.toolbarPages),R(1),F("ngTemplateOutlet",c)("ngTemplateOutletContext",qj(18,GXe,a.verticalView?a.verticalView10||a.verticalView40?u:h:d,a.verticalView10?1:a.verticalView40?2:1,a.persons)),R(3),F("data",a.toolbarPages),R(2),Zb("\u0412\u0441\u0435\u0433\u043e: ",a.myPersons.length," ",a.getWordName(a.myPersons.length)," \u0438\u0437 ",a.personsAllCount,".")}}function jXe(l,o){if(1&l){const a=gt();D(0,"clr-toggle-wrapper"),D(1,"input",16),ee("ngModelChange",function(u){return Le(a).$implicit.enabled=u}),k(),D(2,"label"),ne(3),k(),k()}if(2&l){const a=o.$implicit;R(1),F("name",a.memorial.memorial.name)("value",a.memorial.memorial.name)("ngModel",a.enabled),R(2),en(a.memorial.memorial.name)}}function qXe(l,o){1&l&&(D(0,"span",64),ne(1,"\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f"),k())}function ZXe(l,o){1&l&&Va(0)}const XXe=function(l,o,a,c,u){return{mark:l,showPersons:o,horPagesCount:a,liveText:c,usopText:u}};function YXe(l,o){if(1&l&&(D(0,"div"),Y(1,ZXe,1,0,"ng-container",57),k()),2&l){const a=o.$implicit,c=o.mark,u=o.showPersons,h=o.horPagesCount,d=Z();R(1),F("ngTemplateOutlet",a)("ngTemplateOutletContext",function Zj(l,o,a,c,u,h,d,f){const p=Na()+l,g=At(),m=Gc(g,p,a,c,u,h);return ua(g,p+4,d)||m?Dh(g,p+5,f?o.call(f,a,c,u,h,d):o(a,c,u,h,d)):Gb(g,p+5)}(2,XXe,c,u,h,d.getMemorialPageText(u,!0),d.getMemorialPageText(u,!1)))}}function KXe(l,o){if(1&l){const a=gt();D(0,"div",67),D(1,"app-svg-js-image",68),ee("pagesCount",function(u){Le(a);const h=Z(),d=h.horPagesCount,f=h.horPagesCount;return Z().onPagesCount(u,d*f,!0)}),k(),k()}if(2&l){const a=Z(),c=a.liveText,u=a.horPagesCount,h=a.horPagesCount;R(1),F("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",c)("type",1)("startPageIndex",0)("horizontalPagesCount",u)("verticalPagesCount",h)}}function JXe(l,o){if(1&l&&(D(0,"div",67),me(1,"app-svg-js-image",70),k()),2&l){const a=o.$implicit,c=Z(2),u=c.liveText,h=c.horPagesCount,d=c.horPagesCount;R(1),F("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",u)("type",1)("startPageIndex",a)("horizontalPagesCount",h)("verticalPagesCount",d)}}function eYe(l,o){if(1&l&&(D(0,"div"),Y(1,JXe,2,9,"div",69),k()),2&l){const a=Z(2);R(1),F("ngForOf",a.extraPagesLive)}}function tYe(l,o){if(1&l){const a=gt();D(0,"div",67),D(1,"app-svg-js-image",68),ee("pagesCount",function(u){Le(a);const h=Z(),d=h.horPagesCount,f=h.horPagesCount;return Z().onPagesCount(u,d*f,!1)}),k(),k()}if(2&l){const a=Z(),c=a.usopText,u=a.horPagesCount,h=a.horPagesCount;R(1),F("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",c)("type",1)("startPageIndex",0)("horizontalPagesCount",u)("verticalPagesCount",h)}}function nYe(l,o){if(1&l&&(D(0,"div",67),me(1,"app-svg-js-image",70),k()),2&l){const a=o.$implicit,c=Z(2),u=c.usopText,h=c.horPagesCount,d=c.horPagesCount;R(1),F("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",u)("type",1)("startPageIndex",a)("horizontalPagesCount",h)("verticalPagesCount",d)}}function iYe(l,o){if(1&l&&(D(0,"div"),Y(1,nYe,2,9,"div",69),k()),2&l){const a=Z(2);R(1),F("ngForOf",a.extraPagesUsop)}}function rYe(l,o){if(1&l&&(Y(0,KXe,2,9,"div",65),Y(1,eYe,2,1,"div",66),Y(2,tYe,2,9,"div",65),Y(3,iYe,2,1,"div",66)),2&l){const a=o.liveText,c=o.usopText;F("ngIf",a),R(1),F("ngIf",a),R(1),F("ngIf",c),R(1),F("ngIf",c)}}function sYe(l,o){1&l&&(D(0,"span",76),ne(1,"+"),k())}function oYe(l,o){if(1&l&&(D(0,"span",73),ne(1),k()),2&l){const a=Z().$implicit;F("ngClass",Z(2).getClasses(a,a.classesBadgeHorizontal,!1,"",!1,!0)),R(1),en(a.badge)}}function aYe(l,o){if(1&l){const a=gt();D(0,"span",72),ee("click",function(u){const d=Le(a).$implicit,f=Z(2).$implicit;return Z(2).onPersonFilterClick(u,f,d)}),ne(1),k()}if(2&l){const a=o.$implicit;F("ngClass",Z(4).getFilterClasses(a)),R(1),en(a.name)}}function lYe(l,o){if(1&l&&(D(0,"div"),Y(1,aYe,2,2,"span",71),k()),2&l){const a=Z(3);R(1),F("ngForOf",a.personsFilters)}}const cYe=function(){return{"left-space-0":!0,"right-space-0":!0}};function uYe(l,o){if(1&l){const a=gt();D(0,"div",72),ee("click",function(u){const d=Le(a).$implicit;return Z(2).onPersonClick(u,d)}),D(1,"div",73),ne(2),k(),D(3,"div",73),Y(4,sYe,2,0,"span",74),ne(5),D(6,"span"),Y(7,oYe,2,2,"span",75),k(),k(),Y(8,lYe,2,1,"div",66),k()}if(2&l){const a=o.$implicit,c=Z(2);F("ngClass",c.getClasses(a,bl(8,cYe))),R(1),F("ngClass",c.getClasses(a,a.classesVertical,!1,"clr-col-4 right")),R(1),en(a.prefix),R(1),F("ngClass",c.getClasses(a,a.classesVertical,!1,"clr-col-8")),R(1),F("ngIf",!(null!=a.person&&a.person.live)),R(1),vi("",a.name," "),R(2),F("ngIf",a.badge),R(1),F("ngIf",c.personsClickHandler.person===a&&c.personsClickHandler.selectionToggle)}}function hYe(l,o){1&l&&Y(0,uYe,9,9,"div",71),2&l&&F("ngForOf",o.showPersons)}function dYe(l,o){1&l&&(D(0,"span",76),ne(1,"+"),k())}function fYe(l,o){if(1&l&&(D(0,"span",73),ne(1),k()),2&l){const a=Z().$implicit;F("ngClass",Z(2).getClasses(a,a.classesBadgeHorizontal,!1,"",!1,!0)),R(1),en(a.badge)}}function pYe(l,o){if(1&l){const a=gt();D(0,"span",72),ee("click",function(u){const d=Le(a).$implicit,f=Z(2).$implicit;return Z(2).onPersonFilterClick(u,f,d)}),ne(1),k()}if(2&l){const a=o.$implicit;F("ngClass",Z(4).getFilterClasses(a)),R(1),en(a.name)}}function gYe(l,o){if(1&l&&(D(0,"span"),Y(1,pYe,2,2,"span",71),k()),2&l){const a=Z(3);R(1),F("ngForOf",a.personsFilters)}}function mYe(l,o){if(1&l){const a=gt();D(0,"span"),D(1,"span",72),ee("click",function(u){const d=Le(a).$implicit;return Z(2).onPersonClick(u,d)}),ne(2),Y(3,dYe,2,0,"span",74),ne(4),Y(5,fYe,2,2,"span",75),k(),Y(6,gYe,2,1,"span",66),k()}if(2&l){const a=o.$implicit,c=Z(2);R(1),F("ngClass",c.getClasses(a,a.classesHorizontal,!1,"",!0)),R(1),vi("",a.prefix," "),R(1),F("ngIf",!(null!=a.person&&a.person.live)),R(1),en(a.name),R(1),F("ngIf",a.badge),R(1),F("ngIf",c.personsClickHandler.person===a&&c.personsClickHandler.selectionToggle)}}function vYe(l,o){if(1&l&&(D(0,"span"),Y(1,mYe,7,6,"span",17),k()),2&l){const a=o.showPersons;R(1),F("ngForOf",a)}}class VS{constructor(o,a,c){this.name=o,this.enabled=a,this.system=c}static builder(){return new VS("",!1,!1)}setName(o){return this.name=o,this}setEnabled(o){return this.enabled=o,this}setSystem(o){return this.system=o,this}}class R6{constructor(o,a,c){this.memorial=o,this.bEnabled=a,this.onEnabledChanged=c}get enabled(){return this.bEnabled}set enabled(o){this.bEnabled=o,this.onEnabledChanged&&this.onEnabledChanged()}static builder(){return new R6(null,!0,()=>{})}setMemorial(o){return this.memorial=o,this}setEnabled(o){return this.enabled=o,this}setOnEnabledChanged(o){this.onEnabledChanged=o}}class F6{constructor(o,a,c,u,h,d,f,p){this.prefix=o,this.name=a,this.description=c,this.badge=u,this.person=h,this.classesVertical=d,this.classesHorizontal=f,this.classesBadgeHorizontal=p}static builder(){return new F6("","","","",null,{},{},{})}setPrefix(o){return this.prefix=o,this}setName(o){return this.name=o,this}setDescription(o){return this.description=o,this}setBadge(o){return this.badge=o,this}setPerson(o){return this.person=o,this}addClassVertical(o,a=!0){return this.classesVertical[o]=a,this}addClassHorizontal(o,a=!0){return this.classesHorizontal[o]=a,this}addClassBadgeHorizontal(o,a=!0){return this.classesBadgeHorizontal[o]=a,this}}class eg{constructor(o=!1,a=!0,c="",u="",h=[]){this.modalFlag=o,this.modalAddingFlag=a,this.currentName=c,this.text=u,this.preview=h,this.updating=!1,this.singleMemorial=!0,this.clearMemorial=!1}setUpdating(o){return this.updating=o,this}updateTextByPreview(){this.updating||(this.text=this.preview.filter((o,a)=>o.enabled).map((o,a)=>o.memorial.toString()).join("\r\n"))}}class N6{constructor(o,a){this.person=o,this.handler=a,this.lastDate=new Date,this.selectionToggle=!1}static builder(){return new N6(null,()=>{})}setHandler(o){return this.handler=o,this}clickByPerson(o){let a=new Date;this.person!=o?(this.person=o,this.lastDate=a,this.selectionToggle=!0):a.getTime()-this.lastDate.getTime()<500?(this.handler(o),this.person=null):(this.lastDate=a,this.selectionToggle=!this.selectionToggle)}}let fce=(()=>{class l{constructor(a,c,u,h,d,f,p,g,m,v,y,_){this.config=a,this.uiConfig=c,this.themeSvc=u,this.memDataSvc=h,this.memLoaderSvc=d,this.memImporterSvc=f,this.memExporterSvc=p,this.memExporterXsvSvc=g,this.kafizmySvc=m,this.dateEventsSvc=v,this.audioSvc=y,this.tagsSvc=_,this.memorialsDlg=new eg,this.memorialsDeleteDlg=new eg,this.memorialsImportDlg=new eg,this.memorialsExportDlg=new eg,this.memorialsWaitingDlg=new eg,this.personDetailsDlg=new eg,this.personDeleteDlg=new eg,this.memorialsTitleInfoDlg=new eg,this.headerData=rh.builder(),this.personsClickHandler=N6.builder().setHandler(b=>this.onEditPerson(b)),this.personDetailsData=S6.builder().setOnClick(b=>{this.personDetailsDlg.modalFlag=!1,b&&this.reload()}),this.personsFilters=[],this.search=null,this.extraPagesLive=[],this.extraPagesUsop=[],this.stgShowSettings=o0.builder(),this.stgFilterMemorials=o0.builder(),this.allSettings=LM.builder().add(this.stgShowSettings).add(this.stgFilterMemorials),this.settingsData=sh.builder().updateClasses(b=>b.setMemorialSettings(!0)),this.oldPersons=null,this.myPersons=[],this.nameSvc=new qM,this.sendReadyChanges=Gs.builder(),this.sortNamesChanges=Gs.builder(),this.sortTypesChanges=Gs.builder(),this.searchChanges=Gs.builder(),this.pageSizeChanges=Gs.builder(),this.personOffsetChanges=Gs.builder(),this.offsetChanges=Gs.builder(),this.addCommentToNameChanges=Gs.builder(),this.toolbarPages=au.builder().setItems([]).setOnClick(b=>{this.selectPersonsPage(+b.tag)}).updateClasses(b=>{b.setLabelNormal("label-info")}),this.toolbarMemorials=au.builder().setItems([]).setOnClick(b=>{this.selectMemorial(b.tag)}).updateClasses(b=>{b.setLabelNormal("label-info")}),this.toolbarMemorialsFilters=au.builder().setItems([]).setOnClick(b=>{this.selectMemorialFlag(b.tag)}).updateClasses(b=>{b.setLabelNormal("label-success")}),this.toolbarMemorialsFlags=au.builder().setItems([]).setOnClick(b=>{this.selectMemorialFlag(b.tag)}).updateClasses(b=>{b.setLabelNormal("label-danger")}),this.personChangesSubscription=null}isSearching(){return null!=this.search}get showSettings(){return this.stgShowSettings.enabled}set showSettings(a){this.stgShowSettings.setEnabled(a)}get filterMemorials(){return this.stgFilterMemorials.enabled}set filterMemorials(a){this.stgFilterMemorials.setEnabled(a)}get verticalView10(){return this.uiConfig.ui.memorialVerticalView.getBooleanValue()&&"10"==this.uiConfig.ui.memorialPageSize.getStringValue()}get verticalView40(){return this.uiConfig.ui.memorialVerticalView.getBooleanValue()&&"40"==this.uiConfig.ui.memorialPageSize.getStringValue()}get verticalView(){return this.uiConfig.ui.memorialVerticalView.getBooleanValue()}set verticalView(a){this.uiConfig.ui.memorialVerticalView.setBooleanValue(a)}get sortPersonPriests(){return this.uiConfig.ui.sortPersonsPriests.getBooleanValue()}get sortPersonNames(){return this.uiConfig.ui.sortPersonsNames.getBooleanValue()}get pageSize(){let a=this.uiConfig.ui.memorialPageSize.getStringValue();return a?+a:15}get currentPage(){return this.uiConfig.ui.currentMemorialPage.getNumberValue()}set currentPage(a){this.uiConfig.ui.currentMemorialPage.setNumberValue(a)}get currentMemorial(){return this.personsData.text?this.personsData.text:this.uiConfig.ui.currentMemorial.getStringValue()}set currentMemorial(a){this.personsData.text||this.uiConfig.ui.currentMemorial.setStringValue(a)}get persons(){return this.syncMyPersons(),this.myPersons}get personsAllCount(){return this.getPersonsAllCount(this.currentMemorial)}get personsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){this.personChangesSubscription=this.memDataSvc.getPersons().getChangeDetector().subscribe(a=>this.clearCaches())}ngOnDestroy(){this.personChangesSubscription&&(this.personChangesSubscription.unsubscribe(),this.personChangesSubscription=null)}ngAfterViewInit(){this.personsData.printerHandler.setHandler(a=>this.onEpubPrint(a)),this.setErrors([this.currentMemorial?this.currentMemorial:"\u0412\u0441\u0435"]),this.sortNamesChanges.setUIValue(this.uiConfig.ui.sortPersonsNames),this.sortTypesChanges.setUIValue(this.uiConfig.ui.sortPersonsPriests),this.personsData.readonly||this.audioSvc.stop(),this.isMemorialEnabled()||this.sendReady()}clearCaches(){this.memDataSvc.personsCache.clear()}getPersonsAll(a){return this.memDataSvc.personsCache.getCachedResult(a,this.personsData.readonly,this.personsData.classes.getLiveValue())}getPersonsAllCount(a){return this.getPersonsAll(a).length}setErrors(a){this.config.post(()=>{let c=[];this.personsData.text||c.push(bc.builder().setText("\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f").setOnClick(()=>{this.filterMemorials=!this.filterMemorials})),this.personsData.readonly||c.unshift(bc.builder().setText("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setOnClick(()=>{this.showSettings=!this.showSettings})),this.headerData.setErrors(a).setActions(c).updateClasses(u=>u.setAlertClass("alert-success").setAlertShape(""))})}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(a,c,u=!0,h="",d=!1,f=!1){let g={"clr-row":u};(h=h.trim())&&h.split(" ").forEach(m=>g[h]=!0);for(const m in c)g[m]=c[m];return d||f?g[(f?"hbs":"hs")+this.uiConfig.ui.fontSize.getStringValue()]=!0:g["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,g}printBook(){this.themeSvc.printWindow("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a")||window.print()}isActivePersonHasTag(a){var c;let u=!1;return(null===(c=this.personsClickHandler.person)||void 0===c?void 0:c.person)&&(u=Ko.tagsHasFlag(this.personsClickHandler.person.person.tags,a)),"\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438"==a&&(u=!0),u}updatePersonFilterItemsDelayed(){this.config.post(()=>{this.updatePersonFilterItems()})}updatePersonFilterItems(){this.personsData.readonly?this.personsFilters.length&&(this.personsFilters=[]):this.memDataSvc.memorials?(this.personsFilters=this.memDataSvc.memorials.items.map(a=>a.name).map(a=>VS.builder().setName(a).setEnabled(this.isActivePersonHasTag(a))),this.personsFilters.unshift(VS.builder().setName("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c").setEnabled(!1).setSystem(!0),VS.builder().setName("\u0423\u0434\u0430\u043b\u0438\u0442\u044c").setEnabled(!1).setSystem(!0))):this.personsFilters.length&&(this.personsFilters=[])}getFilterItems(a){var c;let u=null===(c=this.memDataSvc.memorials)||void 0===c?void 0:c.items.find(d=>d.name==a),h=this.memDataSvc.memorials?this.memDataSvc.memorials.items.filter(d=>!this.personsData.readonly||d.enabled).filter(d=>this.personsData.readonly?this.getPersonsAllCount(a)>0:this.getPersonsAllCount(a)>=0).map(d=>d.name).map(d=>ta.builder().setText(d).setTag(d).setSelected(this.tagsSvc.tagsHasFlag(u?u.tags:a,d))):[];return h.unshift(ta.builder().setText("\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438").setTag("\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438").setSelected(this.tagsSvc.tagsHasFlag(u?u.tags:a,"\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438"))),h}syncMyPersons(a=!1){var c;let u=a;u=u||this.sortTypesChanges.checkAndUpdate(),u=u||this.sortNamesChanges.checkAndUpdate(),u=u||this.searchChanges.checkAndUpdate(this.search),u=u||this.pageSizeChanges.checkAndUpdate(this.pageSize),u=u||this.personOffsetChanges.checkAndUpdate(this.uiConfig.ui.currentPersonOffset.getNumberValue()),u=u||this.offsetChanges.checkAndUpdate(this.uiConfig.ui.currentOffset.getNumberValue()),u=u||this.addCommentToNameChanges.checkAndUpdate(this.uiConfig.ui.addCommentToName.getBooleanValue());let h=this.memDataSvc.persons;if(null==(null===(c=this.memDataSvc.memorials)||void 0===c?void 0:c.items.find(d=>d.name==this.currentMemorial))&&this.memDataSvc.memorials&&this.currentMemorial&&this.memDataSvc.memorials.items.length>0&&(this.currentMemorial=this.memDataSvc.memorials.items[0].name,u=!0),!h||h===this.oldPersons&&!u)return!h&&this.myPersons.length>0&&(this.myPersons=[]),void this.sendReady();this.oldPersons=h,this.config.post(()=>this.syncMyPersonsPosted())}syncMyPersonsPosted(){var a,c;this.sendReady(),this.setErrors([(this.currentMemorial?this.currentMemorial:"\u0412\u0441\u0435")+(this.personsData.readonly?this.personsData.classes.isLiveAcceptable(!0)?": \u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438":": \u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438":"")]);{this.toolbarMemorials.setItems((y=>{let _=this.memDataSvc.memorials?this.memDataSvc.memorials.items.filter(b=>!this.personsData.readonly||b.enabled).filter(b=>this.personsData.readonly?this.getPersonsAllCount(b.name)>0:this.getPersonsAllCount(b.name)>=0).map(b=>b.name).map(b=>ta.builder().setText(b).setTag(b).setSelected(b==this.currentMemorial)):[];return _.unshift(ta.builder().setText("\u0412\u0441\u0435").setTag("").setSelected(!this.currentMemorial)),_})()),this.updatePersonFilterItems(),this.toolbarMemorialsFilters.setItems(this.getFilterItems(this.currentMemorial));let m=["\u0421\u043b\u0430\u0432\u0430 1","\u0421\u043b\u0430\u0432\u0430 2","\u0421\u043b\u0430\u0432\u0430 3","\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439"],v=null===(a=this.memDataSvc.memorials)||void 0===a?void 0:a.items.find(y=>y.name==this.currentMemorial);this.toolbarMemorialsFlags.setItems(m.map(y=>ta.builder().setText(y).setTag(y).setSelected(!!v&&this.tagsSvc.tagsHasFlag(v.tags,y))))}let u=null===(c=this.search)||void 0===c?void 0:c.toLowerCase(),h=[...this.getPersonsAll(this.currentMemorial).filter(g=>!u||g.name.toLowerCase().indexOf(u)>=0)],d=Math.ceil(h.length/this.pageSize);this.currentPage>d&&(this.currentPage=1);let f=this.currentPage?this.pageSize*(this.currentPage-1):0,p=this.currentPage?this.pageSize*this.currentPage-1:h.length-1;(this.sortPersonPriests||this.sortPersonNames)&&(h=Qn.sortPersons(h,g=>g,this.sortPersonNames,this.sortPersonPriests));{let g=this.uiConfig.ui.currentOffset.getNumberValue(),m=this.uiConfig.ui.currentPersonOffset.getNumberValue();g<0&&(g=m);let v=this.uiConfig.ui.addCommentToName.getBooleanValue(),y=Xn.getKafizmNumberBy(17,g),_=Xn.getKafizmNumberBy(17,m);this.myPersons=h.map(b=>{let C=this.nameSvc.getPrefixedName(b.name),x=Qn.isPriest(b),S=b.kafizma==y,w=b.kafizma==_,O=new Li;O.load(b.description);let T=O.getValue("\u0442\u0435\u043a\u0441\u0442");return T&&T.length>10&&(T=T.substring(0,8)+".."),F6.builder().setPrefix(C.prefix).setName(C.name+(v&&T?" ("+T+")":"")).setBadge(b.kafizma>0?""+b.kafizma:"").setPerson(b).addClassVertical("cursor",!0).addClassVertical("bg-4",x&&b.live).addClassVertical("bg-5",!x&&b.live).addClassVertical("bg-3",!b.live).addClassHorizontal("cursor",!0).addClassHorizontal("label",!0).addClassHorizontal("label-success",x&&b.live).addClassHorizontal("label-info",!x&&b.live).addClassHorizontal("label-warning",!b.live).addClassHorizontal("label-orange",!b.live).addClassBadgeHorizontal("badge",!0).addClassBadgeHorizontal("badge-purple",S&&b.live).addClassBadgeHorizontal("badge-danger",!S&&w&&b.live).addClassBadgeHorizontal("badge-light-blue",!(S||w)&&b.live)}).filter((b,C,x)=>f<=C&&C<=p)}this.toolbarPages.setItems([ta.builder().setText("\u0412\u0441\u0435").setTag("0").setSelected(0==this.currentPage)].concat(Array.from(Array(d).keys()).map(g=>g+1).map(g=>ta.builder().setText(""+g).setTag(""+g).setSelected(g==this.currentPage))))}sendReady(){this.sendReadyChanges.checkAndUpdate(!0)&&this.config.messageBus.putMessage(ry.builder().setSender(this.personsData.id).setTarget(this.personsData.targetId))}getMemorialPageText(a,c){let u=this.uiConfig.ui.addCommentToName.getBooleanValue(),h=a.filter(f=>f.person).map(f=>f.person).filter(f=>f.live==c).map(f=>{if(!u)return f.name;let p=new Li;p.load(f.description);let g=p.getValue("\u0442\u0435\u043a\u0441\u0442");return g&&g.length>10&&(g=g.substring(0,8)+".."),f.name+(u&&g?" ("+g+")":"")}).join(", "),d=this.uiConfig.ui.memorialsTitleRemark.getStringValue();return d&&(d=d.split(",").filter(f=>!!f).map(f=>f.trim()).map(f=>f.startsWith("*")?f:"*"+f).join(",")),this.personsData.readonly?this.personsData.classes.isLiveAcceptable(c)&&h?(c?`${d||"*\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"},`:"*\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438,")+h:"":h?(c?`${d||"*\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"},`:"*\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438,")+h:""}updateSelectedPage(){this.toolbarPages.items.forEach(a=>+a.tag==this.currentPage)}scrollToPersons(){return this.pagesView.nativeElement.scrollIntoView(!0),this}reSyncView(a){this.config.post(()=>{this.oldPersons=null,a&&a()})}selectPersonsPage(a){this.currentPage=a,this.reSyncView(()=>{this.scrollToPersons()})}selectMemorialFlag(a){var c;let u=null===(c=this.memDataSvc.memorials)||void 0===c?void 0:c.items.find(h=>h.name==this.currentMemorial);u&&(u.tags=this.tagsSvc.tagsHasFlag(u.tags,a)?Ko.removeTag(u.tags,a):Ko.addTagToTags(u.tags,a),this.memDataSvc.getMemorials().save(u,!0).then(h=>{this.reload()}))}selectMemorial(a){this.currentMemorial=a,this.reSyncView(),this.config.post(()=>{this.scrollToPersons()})}addMemorial(){this.memorialsDlg.modalFlag=!0,this.memorialsDlg.modalAddingFlag=!0,this.memorialsDlg.currentName=""}editMemorial(){!this.currentMemorial||(this.memorialsDlg.modalFlag=!0,this.memorialsDlg.modalAddingFlag=!1,this.memorialsDlg.currentName=this.currentMemorial)}deleteMemorial(){this.memorialsDeleteDlg.modalFlag=!0,this.memorialsDeleteDlg.currentName=this.currentMemorial}reload(){this.memDataSvc.getMemorials().reloadMemorials(a=>{a&&this.memDataSvc.getPersons().reloadPersons()})}newMemorial(a){var c;null===(c=this.memDataSvc.memorials)||void 0===c||c.newMemorial(a,u=>{u.success?(this.currentMemorial=a,this.reload()):this.config.addAlert(Or.of(u.error,"Ok",30))})}onAddNewMemorial(){this.newMemorial(this.memorialsDlg.currentName),this.memorialsDlg.modalFlag=!1}onChangeMemorial(){var a;let c=null===(a=this.memDataSvc.memorials)||void 0===a?void 0:a.items.find(u=>u.name==this.currentMemorial);c&&(c.name=this.memorialsDlg.currentName,this.currentMemorial=c.name,this.config.post(()=>this.reload(),100)),this.memorialsDlg.modalFlag=!1}onDeleteAllPersons(){this.memorialsDeleteDlg.modalFlag=!1,this.memDataSvc.getMemorials().deleteAll().then(a=>{a&&a.success&&this.memDataSvc.getPersons().deleteAll(-1).then(c=>{c&&c.success&&(this.currentMemorial="",this.reload())})})}onDeleteMemorial(){var a,c,u;let h=null===(a=this.memDataSvc.memorials)||void 0===a?void 0:a.items.find(f=>f.name==this.currentMemorial),d=null===(c=this.memDataSvc.memorials)||void 0===c?void 0:c.items.find(f=>f.name!=this.currentMemorial);h&&(this.currentMemorial=d?d.name:"",null===(u=this.memDataSvc.memorials)||void 0===u||u.deleteMemorial(h,f=>{this.reload()})),this.memorialsDeleteDlg.modalFlag=!1}toggleSearching(){this.search=null==this.search?"":null}get visible(){var a;let c=null===(a=this.memDataSvc.memorials)||void 0===a?void 0:a.items.find(u=>u.name==this.currentMemorial);return!!c&&c.enabled}set visible(a){var c;let u=null===(c=this.memDataSvc.memorials)||void 0===c?void 0:c.items.find(h=>h.name==this.currentMemorial);u&&(u.enabled=a)}toggleVisible(){var a;let c=null===(a=this.memDataSvc.memorials)||void 0===a?void 0:a.items.find(u=>u.name==this.currentMemorial);c&&(c.enabled=!c.enabled)}importMemorials(){this.memorialsImportDlg.modalFlag=!0,this.memorialsImportDlg.currentName=this.currentMemorial,!this.memorialsImportDlg.text&&this.persons.length&&(this.memorialsImportDlg.text=this.getCurrentMemorialText())}getWordName(a){let c="";switch(Math.floor(a%10)){case 1:c="\u0438\u043c\u044f";break;case 2:case 3:case 4:c="\u0438\u043c\u0435\u043d\u0438";break;default:c="\u0438\u043c\u0451\u043d"}return c}onPersonFilterClick(a,c,u){a.stopPropagation(),c.person&&("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"==u.name?this.onEditPerson(c):"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"==u.name?this.personDeleteDlg.modalFlag=!0:(c.person.tags=Ko.addTagToTags(c.person.tags,u.name),this.memDataSvc.getPersons().save(-1,c.person,!0))),this.updatePersonFilterItemsDelayed()}onPersonClick(a,c){a.stopPropagation();let u=c.person.offset;u>=0&&!this.personsData.readonly&&this.uiConfig.ui.currentPersonOffset.setNumberValue(u),this.personsClickHandler.clickByPerson(c),this.updatePersonFilterItemsDelayed()}getTags(a=""){var c;let u="";return null===(c=this.memDataSvc.memorials)||void 0===c||c.items.forEach(h=>{h.name==(a||this.currentMemorial)&&(u+=h.name)}),u}onClearImportPreview(){this.memorialsImportDlg.preview=[],this.memorialsImportDlg.text=this.getCurrentMemorialText()}onImportMemorial(){this.memorialsWaitingDlg.modalFlag=!0,this.memorialsImportDlg.modalFlag=!1,this.memorialsImportDlg.singleMemorial&&this.memorialsImportDlg.clearMemorial&&this.clearCurrentMemorial(!1);let a=this.memorialsImportDlg.singleMemorial?[]:this.memorialsImportDlg.preview,c=a.find(h=>{var d,f;return"\u0432\u0441\u0435"===(null===(f=null===(d=h.memorial)||void 0===d?void 0:d.memorial)||void 0===f?void 0:f.name)}),u=()=>{var h,d,f,p;if(a.length){let g=a[0];a=a.slice(1);let m=null===(d=null===(h=g.memorial)||void 0===h?void 0:h.memorial)||void 0===d?void 0:d.name;g.enabled&&m?(null===(f=this.memDataSvc.memorials)||void 0===f?void 0:f.items.find(y=>y.name==m))?this.config.post(u):null===(p=this.memDataSvc.memorials)||void 0===p||p.newMemorial(m,y=>{y.success?this.config.post(u):this.memDataSvc.getMemorials().reloadMemorials(_=>{this.config.post(u)})}):this.config.post(u)}else this.memDataSvc.getMemorials().reloadMemorials(g=>{g?this.memLoaderSvc.addPersons(v=>{var y,_;return(null===(_=null===(y=this.memDataSvc.memorials)||void 0===y?void 0:y.items.find(C=>C.name==(this.memorialsImportDlg.singleMemorial?this.currentMemorial:v)))||void 0===_?void 0:_._id)||-1},this.memorialsImportDlg.text,v=>this.getTags(this.memorialsImportDlg.singleMemorial?this.currentMemorial:v),!0,()=>{var v;let y=null===(v=this.memDataSvc.getMemorials().getMemorials())||void 0===v?void 0:v.items.find(_=>"\u0432\u0441\u0435"===_.name);c&&y?this.memDataSvc.getMemorials().deleteMemorial(y).then(_=>{(!_||!_.success)&&this.config.addAlert(Or.of('\u041d\u0435 \u043c\u043e\u0433\u0443 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a "\u0432\u0441\u0435".',"\u041e\u041a",15)),this.memorialsWaitingDlg.modalFlag=!1,this.reload()}):(this.memorialsWaitingDlg.modalFlag=!1,this.reload())}):this.memorialsWaitingDlg.modalFlag=!1})};this.config.post(u)}get allMemorialEnabled(){return this.memorialsImportDlg.preview.map(a=>a.enabled).reduce((a,c)=>a&&c,!0)}set allMemorialEnabled(a){this.memorialsImportDlg.setUpdating(!0),this.memorialsImportDlg.preview.forEach(c=>c.enabled=a),this.memorialsImportDlg.setUpdating(!1),this.memorialsImportDlg.updateTextByPreview()}onImportFile(a){0!==a.target.files.length&&this.memImporterSvc.onLoadAnyFile(a.target.files[0],"",c=>{this.memorialsImportDlg.text=c,this.memorialsImportDlg.preview=this.memLoaderSvc.previewPersons(c).map(u=>R6.builder().setMemorial(u).setEnabled(!0)),this.memorialsImportDlg.preview.forEach(u=>u.setOnEnabledChanged(()=>this.memorialsImportDlg.updateTextByPreview()))})}exportMemorials(){this.memorialsExportDlg.modalFlag=!0,this.memorialsExportDlg.currentName=this.currentMemorial}onSaveAs(a){this.memorialsExportDlg.modalFlag=!1,this.onSaveAllMemorials(a)}getCurrentMemorialText(){var a,c;let u=null===(a=this.memDataSvc.memorials)||void 0===a?void 0:a.items.find(g=>g.name==this.currentMemorial);if(!u)return"";let f="",p=null===(c=this.memDataSvc.persons)||void 0===c?void 0:c.items;return f=this.memExporterSvc.getMemorialsXmlString(p,[this.currentMemorial],[u.tags]),f=this.memLoaderSvc.convertXmlToString(f),f}onSaveAllMemorials(a="xml",c=!0){var u;let h=[""],d=[""],f=this.memDataSvc.getMemorials().getActivePredefinedMemorialsRaw();null===(u=this.memDataSvc.memorials)||void 0===u||u.items.forEach(g=>{let m=null==f.find(v=>v==g.name);c&&(m=!0),g.enabled&&m&&(h.push(g.name),d.push(g.tags))}),(()=>{var g;let m="",v=null===(g=this.memDataSvc.persons)||void 0===g?void 0:g.items;switch(a){case"xml":m=this.memExporterSvc.getMemorialsXmlString(v,h,d);break;case"csv":m=this.memExporterXsvSvc.getMemorialsString(v,h,d,";");break;case"tsv":m=this.memExporterXsvSvc.getMemorialsString(v,h,d,"\t");break;default:m=this.memExporterSvc.getMemorialsXmlString(v,h,d),m=this.memLoaderSvc.convertXmlToString(m)}const y=(new Date).toISOString().split("T")[0];let _=a;if(this.config.isPlatformAndroid())this.kafizmySvc.addTempFile(`\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.${_}`,m).then(b=>{b&&b.success&&wf.startDownload(b.fileName,`\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.${y}.${_}`)});else{const b=new TextEncoder,C=new Blob([b.encode(m)],{type:"octet/stream"});wf.saveData(C,`\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.${y}.${_}`)}})()}onPagesCount(a,c,u){this.config.post(()=>{this.onPagesCountDirect(a,c,u)})}onPagesCountDirect(a,c,u){u?this.extraPagesLive=[]:this.extraPagesUsop=[];let h=a-c,d=0;for(;h>0;)h=Math.max(0,h-c),d+=c,u?this.extraPagesLive.push(d):this.extraPagesUsop.push(d)}onEditPerson(a){a.person&&!this.personsData.readonly&&(this.personDetailsData.setPerson(a.person),this.personDetailsDlg.modalFlag=!0)}isMemorialEnabled(a){let c=!1;return this.personsData.readonly||(c=!0),this.personsData.classes.slava1Zdrav&&this.uiConfig.ui.memorialSlava1Zdrav.getBooleanValue()&&(c=!0===a||void 0===a),this.personsData.classes.slava2Zdrav&&this.uiConfig.ui.memorialSlava2Zdrav.getBooleanValue()&&(c=!0===a||void 0===a),this.personsData.classes.slava3Zdrav&&this.uiConfig.ui.memorialSlava3Zdrav.getBooleanValue()&&(c=!0===a||void 0===a),this.personsData.classes.slava1Upok&&this.uiConfig.ui.memorialSlava1Upok.getBooleanValue()&&(c=!1===a||void 0===a),this.personsData.classes.slava2Upok&&this.uiConfig.ui.memorialSlava2Upok.getBooleanValue()&&(c=!1===a||void 0===a),this.personsData.classes.slava3Upok&&this.uiConfig.ui.memorialSlava3Upok.getBooleanValue()&&(c=!1===a||void 0===a),c}onEpubPrint(a){let c=[[],[],[]],u=[[],[],[]];if(this.persons.filter(h=>{var d;return null===(d=h.person)||void 0===d?void 0:d.live}).forEach(h=>{c[0].push(""),c[1].push(h.prefix),c[2].push(h.name)}),this.persons.filter(h=>{var d;return!(null===(d=h.person)||void 0===d?void 0:d.live)}).forEach(h=>{u[0].push("+"),u[1].push(h.prefix),u[2].push(h.name)}),c[0].length>0&&this.isMemorialEnabled(!0)||u[0].length>0&&this.isMemorialEnabled(!1)){let h=[],d=[],f=[],p=this.currentMemorial?this.currentMemorial:"\u0412\u0441\u0435";c[0].length&&(h.push(p+" - \u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"),d.push(c),f.push([0])),u[0].length&&(h.push(p+" - \u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"),d.push(u),f.push([0])),h.length>0&&a.addRequest(A_.builder().setName(p).setBookNames(["\u0436\u0438\u0432","\u043f\u0440\u0435\u0444\u0438\u043a\u0441","\u0438\u043c\u044f"]).setPsalomName("").setAllBooksChapters(h).setAllBooks(d).setEmptyFirstLines(f).setShowLineIndexes(!1))}}onEditTitleInfo(){this.memorialsTitleInfoDlg.modalFlag=!0,this.memorialsTitleInfoDlg.currentName=this.uiConfig.ui.memorialsTitleRemark.getStringValue()}onEndTitleInfoDlg(){this.uiConfig.ui.memorialsTitleRemark.setStringValue(this.memorialsTitleInfoDlg.currentName),this.memorialsTitleInfoDlg.modalFlag=!1}getFilterClasses(a){let c={label:!0,"label-danger":!a.enabled&&!a.system,"label-success":a.enabled&&!a.system};return c["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,c}onDeleteCurrentPerson(){var a;this.personsClickHandler.person&&this.personsClickHandler.person.person&&(null===(a=this.memDataSvc.persons)||void 0===a||a.deletePerson(this.personsClickHandler.person.person),this.reload()),this.personDeleteDlg.modalFlag=!1}clearCurrentMemorial(a){let c=[];this.persons.forEach(u=>{u.person&&(u.person.tags=Ko.removeTag(u.person.tags,this.currentMemorial),u.person.tags?this.memDataSvc.getPersons().save(-1,u.person,!0):c.push(u.person))}),this.memDataSvc.getPersons().deletePersons(c),a&&this.reload()}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(Mo),L(w6),L(A6),L(cce),L(uce),L(hce),L(Xp),L(ZM),L(F_),L(Ko))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-persons"]],viewQuery:function(a,c){if(1&a&&ai(zXe,5),2&a){let u;Vt(u=zt())&&(c.pagesView=u.first)}},inputs:{data:"data"},decls:151,vars:28,consts:[[3,"click",4,"ngIf"],[1,"s0",3,"clrModalOpen","clrModalOpenChange","click"],[1,"modal-title"],[1,"modal-body"],[3,"data"],["clrForm",""],["clrInput","","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u043b\u0435\u0431\u043d\u0430","name","input",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["clrInput","","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","name","input",3,"ngModel","ngModelChange"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-warning"],["shape","warning-standard"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["clrInline",""],["type","checkbox","clrToggle","",3,"name","value","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","checkbox","clrCheckbox","","value","singleMemorial","name","singleMemorial",3,"ngModel","ngModelChange"],["type","checkbox","clrCheckbox","","value","singleMemorial","name","clearMemorial",3,"ngModel","disabled","ngModelChange"],["class","badge",4,"ngIf"],["type","checkbox","clrCheckbox","","value","mergeNames","name","mergeNames",3,"ngModel","ngModelChange"],[1,"clr-form"],["clrTextarea","","name","description","required","",3,"ngModel","ngModelChange"],[1,"clr-row"],[1,"clr-col-6","clr-hidden-sm-up"],["type","button",1,"btn","btn-link",3,"click"],["shape","recycle"],[1,"clr-hidden-md-down"],[1,"btn","btn-link"],["type","file","placeholder","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b","accept",".xml,.json,.csv,.tsv,.txt",1,"button-input",3,"change"],["shape","upload"],[1,"clr-col-3","clr-hidden-xs-down"],[1,"clr-col-6"],["shape","ban"],[1,"clr-col-12"],["tpl1",""],["paramTemplateVerticalX",""],["paramTemplateVertical",""],["paramTemplateHorizontal",""],[3,"click"],[3,"enabled","name"],[1,"no-print","s0"],["class","fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange",4,"ngIf"],[1,"clr-row","no-print","clr-hidden-xs-down",3,"hidden"],[1,"clr-col-2"],[1,"btn","btn-link","btn-block",3,"click"],["shape","add-text"],["shape","search"],["shape","import"],["shape","export"],["shape","window-close"],[1,"clr-row","no-print","clr-hidden-sm-up",3,"hidden"],[1,"clr-col-4"],["class","no-print",4,"ngIf"],["pagesView",""],[1,"no-print"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"pageBreak","pageBreakBefore"],[1,"fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange"],[1,"bottom-top-space"],[1,"btn","btn-primary","btn-block",3,"click"],["shape","printer",1,"is-solid"],["clrInput","","placeholder","\u0418\u043c\u044f","name","input",3,"ngModel","ngModelChange"],[1,"badge"],["class","pageBreakBefore",4,"ngIf"],[4,"ngIf"],[1,"pageBreakBefore"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount","pagesCount"],["class","pageBreakBefore",4,"ngFor","ngForOf"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"ngClass"],["class","print-only",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"print-only"]],template:function(a,c){1&a&&(Y(0,QXe,78,22,"div",0),D(1,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.personDetailsDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),D(2,"h3",2),ne(3,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u044b"),k(),D(4,"div",3),me(5,"app-person-details",4),k(),k(),D(6,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.memorialsTitleInfoDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),D(7,"h3",2),ne(8,"\u0422\u0435\u043c\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u043e\u043a"),k(),D(9,"div",3),D(10,"form",5),D(11,"clr-input-container"),D(12,"label"),ne(13,"\u0422\u0435\u043a\u0441\u0442:"),k(),D(14,"input",6),ee("ngModelChange",function(h){return c.memorialsTitleInfoDlg.currentName=h}),k(),D(15,"clr-control-helper"),ne(16,"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: *\u041c\u043e\u043b\u0435\u0431\u0435\u043d, *\u041f\u0440\u0435\u0441\u0432\u044f\u0442\u043e\u0439 \u0411\u043e\u0433\u043e\u0440\u043e\u0434\u0438\u0446\u0435"),k(),k(),k(),k(),D(17,"div",7),D(18,"button",8),ee("click",function(){return c.memorialsTitleInfoDlg.modalFlag=!1}),ne(19,"\u041e\u0442\u043c\u0435\u043d\u0430"),k(),D(20,"button",9),ee("click",function(){return c.onEndTitleInfoDlg()}),ne(21,"Ok"),k(),k(),k(),D(22,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.memorialsDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),D(23,"h3",2),ne(24),k(),D(25,"div",3),D(26,"form",5),D(27,"clr-input-container"),D(28,"label"),ne(29,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435:"),k(),D(30,"input",10),ee("ngModelChange",function(h){return c.memorialsDlg.currentName=h}),k(),k(),k(),k(),D(31,"div",7),D(32,"button",8),ee("click",function(){return c.memorialsDlg.modalFlag=!1}),ne(33,"\u041e\u0442\u043c\u0435\u043d\u0430"),k(),D(34,"button",9),ee("click",function(){return c.memorialsDlg.modalAddingFlag?c.onAddNewMemorial():c.onChangeMemorial()}),ne(35,"Ok"),k(),k(),k(),D(36,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.personDeleteDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),D(37,"h3",2),ne(38,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u043d\u0438"),k(),D(39,"div",3),D(40,"p"),D(41,"button",11),me(42,"clr-icon",12),k(),ne(43),k(),k(),D(44,"div",7),D(45,"button",8),ee("click",function(){return c.personDeleteDlg.modalFlag=!1}),ne(46,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),k(),D(47,"button",13),ee("click",function(){return c.onDeleteCurrentPerson()}),ne(48,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),k(),k(),k(),D(49,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.memorialsDeleteDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),D(50,"h3",2),ne(51,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 \u043e\u0447\u0438\u0441\u0442\u043a\u0430"),k(),D(52,"div",3),D(53,"p"),D(54,"button",11),me(55,"clr-icon",12),k(),ne(56),k(),k(),D(57,"div",7),D(58,"button",8),ee("click",function(){return c.memorialsDeleteDlg.modalFlag=!1}),ne(59,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),k(),D(60,"button",13),ee("click",function(){return c.onDeleteAllPersons()}),ne(61,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0451"),k(),D(62,"button",14),ee("click",function(){return c.onDeleteMemorial()}),ne(63,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),k(),k(),k(),D(64,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.memorialsImportDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),D(65,"h3",2),ne(66,"\u0418\u043c\u043f\u043e\u0440\u0442 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430"),k(),D(67,"div",3),D(68,"clr-toggle-container",15),D(69,"label"),ne(70,"\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438:"),k(),D(71,"clr-toggle-wrapper"),D(72,"input",16),ee("ngModelChange",function(h){return c.allMemorialEnabled=h}),k(),D(73,"label"),ne(74,"\u0412\u0441\u0435"),k(),k(),Y(75,jXe,4,4,"clr-toggle-wrapper",17),k(),D(76,"clr-checkbox-container"),D(77,"clr-checkbox-wrapper"),D(78,"input",18),ee("ngModelChange",function(h){return c.memorialsImportDlg.singleMemorial=h}),k(),D(79,"label"),ne(80,"\u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),k(),k(),D(81,"clr-checkbox-wrapper"),D(82,"input",19),ee("ngModelChange",function(h){return c.memorialsImportDlg.clearMemorial=h}),k(),D(83,"label"),ne(84,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a "),Y(85,qXe,2,0,"span",20),k(),k(),D(86,"clr-checkbox-wrapper"),D(87,"input",21),ee("ngModelChange",function(h){return c.uiConfig.ui.mergeNameOnImport.rawValue=h}),k(),D(88,"label"),ne(89),k(),k(),k(),D(90,"form",22),D(91,"clr-textarea-container"),D(92,"label"),ne(93,"\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u043c\u0451\u043d:"),k(),D(94,"textarea",23),ee("ngModelChange",function(h){return c.memorialsImportDlg.text=h}),k(),D(95,"clr-control-helper"),ne(96,"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u043f\u0430\u0442\u0440. \u041a\u0438\u0440\u0438\u043b\u043b (\u043f\u0430\u0442\u0440\u0438\u0430\u0440\u0445 \u041a\u0438\u0440\u0438\u043b\u043b)"),k(),D(97,"clr-control-error"),ne(98,"\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u043c\u0451\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043f\u0443\u0441\u0442\u043e\u0439!"),k(),k(),k(),k(),D(99,"div",7),D(100,"div",24),D(101,"div",25),D(102,"button",26),ee("click",function(){return c.onClearImportPreview()}),me(103,"clr-icon",27),D(104,"span",28),ne(105," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),k(),k(),D(106,"label",29),D(107,"input",30),ee("change",function(h){return c.onImportFile(h)}),k(),me(108,"clr-icon",31),k(),k(),D(109,"div",32),D(110,"button",26),ee("click",function(){return c.onClearImportPreview()}),me(111,"clr-icon",27),D(112,"span",28),ne(113," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),k(),k(),k(),D(114,"div",32),D(115,"label",29),D(116,"input",30),ee("change",function(h){return c.onImportFile(h)}),k(),me(117,"clr-icon",31),k(),k(),D(118,"div",33),D(119,"button",8),ee("click",function(){return c.memorialsImportDlg.modalFlag=!1}),me(120,"clr-icon",34),k(),D(121,"button",14),ee("click",function(){return c.onImportMemorial()}),ne(122,"\u041e\u041a"),k(),k(),k(),k(),k(),D(123,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.memorialsExportDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),D(124,"h3",2),ne(125,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a"),k(),D(126,"div",3),ne(127," \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0430: "),k(),D(128,"div",7),D(129,"div",24),D(130,"div",35),D(131,"button",8),ee("click",function(){return c.onSaveAs("tsv")}),ne(132,"TSV"),k(),D(133,"button",8),ee("click",function(){return c.onSaveAs("xml")}),ne(134,"XML"),k(),D(135,"button",14),ee("click",function(){return c.onSaveAs("txt")}),ne(136,"TXT"),k(),k(),k(),k(),k(),D(137,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.memorialsWaitingDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),D(138,"h3",2),ne(139,"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),k(),D(140,"div",3),me(141,"app-dynamic-spinner"),k(),me(142,"div",7),k(),Y(143,YXe,2,8,"ng-template",null,36,da),Y(145,rYe,4,4,"ng-template",null,37,da),Y(147,hYe,1,1,"ng-template",null,38,da),Y(149,vYe,2,1,"ng-template",null,39,da)),2&a&&(F("ngIf",c.isMemorialEnabled()),R(1),F("clrModalOpen",c.personDetailsDlg.modalFlag),R(4),F("data",c.personDetailsData),R(1),F("clrModalOpen",c.memorialsTitleInfoDlg.modalFlag),R(8),F("ngModel",c.memorialsTitleInfoDlg.currentName),R(6),F("disabled",!c.memorialsDlg.currentName),R(2),F("clrModalOpen",c.memorialsDlg.modalFlag),R(2),vi("",c.memorialsDlg.modalAddingFlag?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435":"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435"," \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430"),R(6),F("ngModel",c.memorialsDlg.currentName),R(4),F("disabled",!c.memorialsDlg.currentName),R(2),F("clrModalOpen",c.personDeleteDlg.modalFlag),R(7),vi(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u043c\u044f: ",c.personsClickHandler.person?c.personsClickHandler.person.name:"\u041e\u0448\u0438\u0431\u043a\u0430","?"),R(6),F("clrModalOpen",c.memorialsDeleteDlg.modalFlag),R(7),vi(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c '",c.memorialsDeleteDlg.currentName?c.memorialsDeleteDlg.currentName:"\u041e\u0448\u0438\u0431\u043a\u0430","' \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a \u0438\u043b\u0438 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435?"),R(8),F("clrModalOpen",c.memorialsImportDlg.modalFlag),R(8),F("name","all")("value","all")("ngModel",c.allMemorialEnabled),R(3),F("ngForOf",c.memorialsImportDlg.preview),R(3),F("ngModel",c.memorialsImportDlg.singleMemorial),R(4),F("ngModel",c.memorialsImportDlg.clearMemorial)("disabled",!c.memorialsImportDlg.singleMemorial),R(3),F("ngIf",!c.memorialsImportDlg.singleMemorial),R(2),F("ngModel",c.uiConfig.ui.mergeNameOnImport.rawValue),R(2),en(c.uiConfig.ui.mergeNameOnImport.description),R(5),F("ngModel",c.memorialsImportDlg.text),R(29),F("clrModalOpen",c.memorialsExportDlg.modalFlag),R(14),F("clrModalOpen",c.memorialsWaitingDlg.modalFlag))},directives:[yn,dce,XM,YM,dC,Fy,Cm,pC,hC,fC,N_,Ws,hy,cy,ef,AO,Oy,ss,Sl,Jx,No,Co,Ph,hf,df,VXe,bJ,IO,mp,Vh,vp,_i,IJ,TN,cm,hN,P6,mc,ii],styles:[".button-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:7rem}.s0[_ngcontent-%COMP%]{font-size:.7rem!important;line-height:1.2rem!important}.left-space-0[_ngcontent-%COMP%]{margin-left:0!important}.right-space-0[_ngcontent-%COMP%]{margin-right:0!important}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class L6{constructor(){this.printOnly=!1}static builder(){return new L6}setPrintOnly(o){return this.printOnly=o,this}}class B6 extends Ei{constructor(o,a,c,u,h,d){super("",u,h),this.genName=o,this.svgWidth=a,this.svgHeight=c,this.classes=d}static builder(){return new B6("",512,512,null,null,L6.builder())}setGenName(o){return this.genName=o,this}setSvgWidth(o){return this.svgWidth=o,this}setSvgHeight(o){return this.svgHeight=o,this}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}updateClasses(o){return o(this.classes),this}}let yYe=(()=>{class l{constructor(a){this.config=a}get svgData(){return this.data}get text(){return this.svgData&&this.svgData.text?this.svgData.text:""}get genName(){return this.svgData&&this.svgData.genName?this.svgData.genName:"Default"}get svgWidth(){return this.svgData&&this.svgData.svgWidth?this.svgData.svgWidth:512}get svgHeight(){return this.svgData&&this.svgData.svgHeight?this.svgData.svgHeight:512}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{"print-only":this.svgData.classes.printOnly}}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-svg"]],inputs:{data:"data"},decls:1,vars:5,consts:[[3,"genName","svgWidth","svgHeight","type","ngClass"]],template:function(a,c){1&a&&me(0,"app-svg-js-image",0),2&a&&F("genName",c.genName)("svgWidth",c.svgWidth)("svgHeight",c.svgHeight)("type",512)("ngClass",c.getClasses())},directives:[mc,ii],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();function _Ye(l,o){if(1&l&&(D(0,"span"),ne(1),k()),2&l){const a=Z(2);R(1),en(a.text)}}function bYe(l,o){1&l&&me(0,"app-add-component",5),2&l&&F("component",o.$implicit)}function xYe(l,o){if(1&l&&(D(0,"div"),Y(1,bYe,1,1,"app-add-component",4),k()),2&l){const a=Z(2);R(1),F("ngForOf",a.components)}}function CYe(l,o){if(1&l&&(D(0,"div",9),me(1,"app-add-component",5),k()),2&l){const a=o.$implicit;F("ngClass",Z(3).getColClass(a)),R(1),F("component",a)}}function SYe(l,o){if(1&l&&(D(0,"div",6),D(1,"div",7),Y(2,CYe,2,2,"div",8),k(),k()),2&l){const a=Z(2);R(2),F("ngForOf",a.components)}}function wYe(l,o){if(1&l){const a=gt();D(0,"div",1),ee("click",function(u){return Le(a),Z().onClick(u)}),Y(1,_Ye,2,1,"span",2),Y(2,xYe,2,1,"div",2),Y(3,SYe,3,1,"div",3),k()}if(2&l){const a=Z();F("ngClass",a.getClasses()),R(1),F("ngIf",!a.components.length),R(1),F("ngIf",!a.isRow),R(1),F("ngIf",a.isRow)}}let V6=(()=>{class l{constructor(a){this.config=a,this.checkLater=Tx.builder().setEnabled(!1)}get divData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.divData.components.length?this.divData.components[0]:null}get components(){return this.divData.components}get isRow(){return this.divData.classes.sClasses.findIndex((a,c,u)=>"clr-row"==a)>=0}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.config.post(()=>{this.checkLater.setConfig(this.config).setWaitingForSenderId(this.divData.waitingForSenderId),this.checkLater.checkEnabled()})}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return this.divData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){var a=this.divData.classes;let c={ftext:a.fineText,pageBreak:a.pageBreakAfter,pageBreakBefore:a.pageBreakBefore};return a.sClasses.filter(u=>"clr-row"!=u&&!u.startsWith("clr-col-")).forEach(u=>c[u]=!0),c}getColClass(a){let c=this.getColClassRaw(a);return a.detector.checkAndGetValue(c)}getColClassRaw(a){let c={"clr-col":!0};return a.component===l&&a.data.classes.sClasses.filter(h=>h.startsWith("clr-col-")).forEach(h=>c[h]=!0),c}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-div"]],inputs:{data:"data"},decls:1,vars:1,consts:[[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"],[4,"ngIf"],["class","clr-col-12",4,"ngIf"],[3,"component",4,"ngFor","ngForOf"],[3,"component"],[1,"clr-col-12"],[1,"clr-row"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(a,c){1&a&&Y(0,wYe,4,4,"div",0),2&a&&F("ngIf",c.checkLater.enabled)},directives:[yn,ii,_i,_c],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class z6 extends Mf{constructor(){super(),this.fineText=!1,this.pageBreakBefore=!1,this.pageBreakAfter=!1,this.printOnly=!1,this.noPrint=!1,this.sClasses=[]}static builder(){return new z6}setFineText(o){return this.fineText=o,this.markChanged(),this}setPageBreakBefore(o){return this.pageBreakBefore=o,this.markChanged(),this}setPageBreakAfter(o){return this.pageBreakAfter=o,this.markChanged(),this}setPrintOnly(o){return this.printOnly=o,this.markChanged(),this}setNoPrint(o){return this.noPrint=o,this.markChanged(),this}addSClass(o){return this.sClasses.push(o),this.markChanged(),this}setSClasses(o){return this.sClasses=o,this.markChanged(),this}}class KM extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new KM("",null,null,z6.builder().setFineText(!0))}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setId(o){return this.id=o,this}setWaitingForSenderid(o){return this.waitingForSenderId=o,this}setComponents(o){return this.components=o,this}}const TYe=function(l,o){return{"no-print":!0,alert:!0,"alert-warning":l,"alert-success":o,"bottom-top-space":!0}};function OYe(l,o){if(1&l){const a=gt();D(0,"div",1),D(1,"div",2),D(2,"div",3),D(3,"div",4),D(4,"clr-icon",5),ee("click",function(){return Le(a),Z().toggleAudio()}),k(),k(),D(5,"span",6),ne(6),k(),k(),k(),D(7,"button",7),D(8,"clr-icon",5),ee("click",function(){return Le(a),Z().autioSvc.control.next()}),k(),k(),D(9,"button",7),D(10,"clr-icon",8),ee("click",function(){return Le(a),Z().autioSvc.control.close(!0)}),k(),k(),k()}if(2&l){const a=Z();F("ngClass",ps(4,TYe,!a.autioSvc.control.isPlaying(),a.autioSvc.control.isPlaying())),R(4),et("shape",a.autioSvc.control.isPlaying()?"pause":"play"),R(2),en(a.autioSvc.control.currentName()),R(2),et("shape","step-forward")}}let DYe=(()=>{class l{constructor(a,c){this.config=a,this.autioSvc=c}get audioData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return this.audioData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){return{}}toggleAudio(){this.autioSvc.control.isPlaying()?this.autioSvc.control.pause():this.autioSvc.control.resume()}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(F_))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-audio"]],inputs:{data:"data"},decls:1,vars:1,consts:[["role","alert",3,"ngClass",4,"ngIf"],["role","alert",3,"ngClass"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],[1,"alert-icon",3,"click"],[1,"alert-text"],["type","button","aria-label","Close",1,"close"],["aria-hidden","true","shape","close",3,"click"]],template:function(a,c){1&a&&Y(0,OYe,11,7,"div",0),2&a&&F("ngIf",c.autioSvc.control.isStarted())},directives:[yn,ii,Ws,tD],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class U6 extends Mf{constructor(){super()}static builder(){return new U6}}class H6 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u}static builder(){return new H6("",null,null,U6.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}}function kYe(l,o){1&l&&me(0,"app-add-component",4),2&l&&F("component",Z(2).$implicit.component)}function MYe(l,o){if(1&l&&(D(0,"clr-accordion-content"),Y(1,kYe,1,1,"app-add-component",3),k()),2&l){const a=Z().$implicit;R(1),F("ngIf",a.component)}}function EYe(l,o){if(1&l&&(D(0,"clr-accordion-panel"),D(1,"clr-accordion-title"),ne(2),k(),Y(3,MYe,2,1,"clr-accordion-content",2),k()),2&l){const a=o.$implicit;R(2),en(a.title)}}let AYe=(()=>{class l{constructor(a){this.config=a}get accordionData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return this.accordionData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){return{}}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-accordion"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass"],[4,"ngFor","ngForOf"],[4,"clrIfExpanded"],[3,"component",4,"ngIf"],[3,"component"]],template:function(a,c){1&a&&(D(0,"clr-accordion",0),Y(1,EYe,4,1,"clr-accordion-panel",1),k()),2&a&&(F("ngClass",c.getClasses()),R(1),F("ngForOf",c.accordionData.items))},directives:[dC,Fy,ii,_i,Cm,pC,hC,QN,fN,fC,yn,_c],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class $6 extends Mf{constructor(){super()}static builder(){return new $6}}class W6{constructor(o,a){this.title=o,this.component=a}static builder(){return new W6("",null)}setTitle(o){return this.title=o,this}setComponent(o){return this.component=o,this}}class G6 extends Ei{constructor(o,a,c,u,h){super(o,a,c),this.classes=u,this.items=h}static builder(){return new G6("",null,null,$6.builder(),[])}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}addItem(o){return this.items.push(o),this}}class Q6{constructor(){}static builder(){return new Q6}}class j6 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new j6("",null,null,Q6.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setId(o){return this.id=o,this}setWaitingForSenderid(o){return this.waitingForSenderId=o,this}setComponents(o){return this.components=o,this}}let tg=(()=>{class l{constructor(a,c){this.http=a,this.config=c,this.persons=[],this.restPoint="/math",this.canSave=null,this.personSaved=new wt,this.personsSubscribersMap=new Map}setCanSave(a){this.canSave=a}getRestPoint(a,c){return kr.merge(kr.merge(c||this.config.serviceAPIHost,this.restPoint),a)}getRestPointRaw(a,c){return kr.merge(c||this.config.serviceAPIHost,a)}mathSolve(a){const c={params:{}};return new Promise((u,h)=>{this.http.post(this.getRestPoint("/solve",null),a,c).pipe(rr(Ni.handleError)).subscribe({next:d=>{u(SV.builder().setSuccess(!!d.success).setText(d.text))},error:d=>{h(null)}})})}}return l.\u0275fac=function(a){return new(a||l)(Ae(sd),Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class q6 extends Mf{constructor(){super(),this.fineText=!1,this.pageBreakBefore=!1,this.pageBreakAfter=!1,this.printOnly=!1,this.noPrint=!1,this.sClasses=[]}static builder(){return new q6}setFineText(o){return this.fineText=o,this.markChanged(),this}setPageBreakBefore(o){return this.pageBreakBefore=o,this.markChanged(),this}setPageBreakAfter(o){return this.pageBreakAfter=o,this.markChanged(),this}setPrintOnly(o){return this.printOnly=o,this.markChanged(),this}setNoPrint(o){return this.noPrint=o,this.markChanged(),this}addSClass(o){return this.sClasses.push(o),this.markChanged(),this}setSClasses(o){return this.sClasses=o,this.markChanged(),this}}class zS extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new zS("",null,null,q6.builder().setFineText(!0))}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setId(o){return this.id=o,this}setWaitingForSenderid(o){return this.waitingForSenderId=o,this}setComponents(o){return this.components=o,this}}class xr{constructor(){}lineAt(o){if(o<0||o>this.length)throw new RangeError(`Invalid position ${o} in document of length ${this.length}`);return this.lineInner(o,!1,1,0)}line(o){if(o<1||o>this.lines)throw new RangeError(`Invalid line number ${o} in ${this.lines}-line document`);return this.lineInner(o,!0,1,0)}replace(o,a,c){let u=[];return this.decompose(0,o,u,2),c.length&&c.decompose(0,c.length,u,3),this.decompose(a,this.length,u,1),ld.from(u,this.length-(a-o)+c.length)}append(o){return this.replace(this.length,this.length,o)}slice(o,a=this.length){let c=[];return this.decompose(o,a,c,0),ld.from(c,a-o)}eq(o){if(o==this)return!0;if(o.length!=this.length||o.lines!=this.lines)return!1;let a=this.scanIdentical(o,1),c=this.length-this.scanIdentical(o,-1),u=new US(this),h=new US(o);for(let d=a,f=a;;){if(u.next(d),h.next(d),d=0,u.lineBreak!=h.lineBreak||u.done!=h.done||u.value!=h.value)return!1;if(f+=u.value.length,u.done||f>=c)return!0}}iter(o=1){return new US(this,o)}iterRange(o,a=this.length){return new gce(this,o,a)}iterLines(o,a){let c;if(null==o)c=this.iter();else{null==a&&(a=this.lines+1);let u=this.line(o).from;c=this.iterRange(u,Math.max(u,a==this.lines+1?this.length:a<=1?0:this.line(a-1).to))}return new mce(c)}toString(){return this.sliceString(0)}toJSON(){let o=[];return this.flatten(o),o}static of(o){if(0==o.length)throw new RangeError("A document must have at least one line");return 1!=o.length||o[0]?o.length<=32?new Qs(o):ld.from(Qs.split(o,[])):xr.empty}}class Qs extends xr{constructor(o,a=function IYe(l){let o=-1;for(let a of l)o+=a.length+1;return o}(o)){super(),this.text=o,this.length=a}get lines(){return this.text.length}get children(){return null}lineInner(o,a,c,u){for(let h=0;;h++){let d=this.text[h],f=u+d.length;if((a?c:f)>=o)return new PYe(u,f,c,d);u=f+1,c++}}decompose(o,a,c,u){let h=o<=0&&a>=this.length?this:new Qs(pce(this.text,o,a),Math.min(a,this.length)-Math.max(0,o));if(1&u){let d=c.pop(),f=JM(h.text,d.text.slice(),0,h.length);if(f.length<=32)c.push(new Qs(f,d.length+h.length));else{let p=f.length>>1;c.push(new Qs(f.slice(0,p)),new Qs(f.slice(p)))}}else c.push(h)}replace(o,a,c){if(!(c instanceof Qs))return super.replace(o,a,c);let u=JM(this.text,JM(c.text,pce(this.text,0,o)),a),h=this.length+c.length-(a-o);return u.length<=32?new Qs(u,h):ld.from(Qs.split(u,[]),h)}sliceString(o,a=this.length,c="\n"){let u="";for(let h=0,d=0;h<=a&&d<this.text.length;d++){let f=this.text[d],p=h+f.length;h>o&&d&&(u+=c),o<p&&a>h&&(u+=f.slice(Math.max(0,o-h),a-h)),h=p+1}return u}flatten(o){for(let a of this.text)o.push(a)}scanIdentical(){return 0}static split(o,a){let c=[],u=-1;for(let h of o)c.push(h),u+=h.length+1,32==c.length&&(a.push(new Qs(c,u)),c=[],u=-1);return u>-1&&a.push(new Qs(c,u)),a}}class ld extends xr{constructor(o,a){super(),this.children=o,this.length=a,this.lines=0;for(let c of o)this.lines+=c.lines}lineInner(o,a,c,u){for(let h=0;;h++){let d=this.children[h],f=u+d.length,p=c+d.lines-1;if((a?p:f)>=o)return d.lineInner(o,a,c,u);u=f+1,c=p+1}}decompose(o,a,c,u){for(let h=0,d=0;d<=a&&h<this.children.length;h++){let f=this.children[h],p=d+f.length;if(o<=p&&a>=d){let g=u&((d<=o?1:0)|(p>=a?2:0));d>=o&&p<=a&&!g?c.push(f):f.decompose(o-d,a-d,c,g)}d=p+1}}replace(o,a,c){if(c.lines<this.lines)for(let u=0,h=0;u<this.children.length;u++){let d=this.children[u],f=h+d.length;if(o>=h&&a<=f){let p=d.replace(o-h,a-h,c),g=this.lines-d.lines+p.lines;if(p.lines<g>>4&&p.lines>g>>6){let m=this.children.slice();return m[u]=p,new ld(m,this.length-(a-o)+c.length)}return super.replace(h,f,p)}h=f+1}return super.replace(o,a,c)}sliceString(o,a=this.length,c="\n"){let u="";for(let h=0,d=0;h<this.children.length&&d<=a;h++){let f=this.children[h],p=d+f.length;d>o&&h&&(u+=c),o<p&&a>d&&(u+=f.sliceString(o-d,a-d,c)),d=p+1}return u}flatten(o){for(let a of this.children)a.flatten(o)}scanIdentical(o,a){if(!(o instanceof ld))return 0;let c=0,[u,h,d,f]=a>0?[0,0,this.children.length,o.children.length]:[this.children.length-1,o.children.length-1,-1,-1];for(;;u+=a,h+=a){if(u==d||h==f)return c;let p=this.children[u],g=o.children[h];if(p!=g)return c+p.scanIdentical(g,a);c+=p.length+1}}static from(o,a=o.reduce((c,u)=>c+u.length+1,-1)){let c=0;for(let _ of o)c+=_.lines;if(c<32){let _=[];for(let b of o)b.flatten(_);return new Qs(_,a)}let u=Math.max(32,c>>5),h=u<<1,d=u>>1,f=[],p=0,g=-1,m=[];function v(_){let b;if(_.lines>h&&_ instanceof ld)for(let C of _.children)v(C);else _.lines>d&&(p>d||!p)?(y(),f.push(_)):_ instanceof Qs&&p&&(b=m[m.length-1])instanceof Qs&&_.lines+b.lines<=32?(p+=_.lines,g+=_.length+1,m[m.length-1]=new Qs(b.text.concat(_.text),b.length+1+_.length)):(p+_.lines>u&&y(),p+=_.lines,g+=_.length+1,m.push(_))}function y(){0!=p&&(f.push(1==m.length?m[0]:ld.from(m,g)),g=-1,p=m.length=0)}for(let _ of o)v(_);return y(),1==f.length?f[0]:new ld(f,a)}}function JM(l,o,a=0,c=1e9){for(let u=0,h=0,d=!0;h<l.length&&u<=c;h++){let f=l[h],p=u+f.length;p>=a&&(p>c&&(f=f.slice(0,c-u)),u<a&&(f=f.slice(a-u)),d?(o[o.length-1]+=f,d=!1):o.push(f)),u=p+1}return o}function pce(l,o,a){return JM(l,[""],o,a)}xr.empty=new Qs([""],0);class US{constructor(o,a=1){this.dir=a,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[o],this.offsets=[a>0?1:(o instanceof Qs?o.text.length:o.children.length)<<1]}nextInner(o,a){for(this.done=this.lineBreak=!1;;){let c=this.nodes.length-1,u=this.nodes[c],h=this.offsets[c],d=h>>1,f=u instanceof Qs?u.text.length:u.children.length;if(d==(a>0?f:0)){if(0==c)return this.done=!0,this.value="",this;a>0&&this.offsets[c-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&h)==(a>0?0:1)){if(this.offsets[c]+=a,0==o)return this.lineBreak=!0,this.value="\n",this;o--}else if(u instanceof Qs){let p=u.text[d+(a<0?-1:0)];if(this.offsets[c]+=a,p.length>Math.max(0,o))return this.value=0==o?p:a>0?p.slice(o):p.slice(0,p.length-o),this;o-=p.length}else{let p=u.children[d+(a<0?-1:0)];o>p.length?(o-=p.length,this.offsets[c]+=a):(a<0&&this.offsets[c]--,this.nodes.push(p),this.offsets.push(a>0?1:(p instanceof Qs?p.text.length:p.children.length)<<1))}}}next(o=0){return o<0&&(this.nextInner(-o,-this.dir),o=this.value.length),this.nextInner(o,this.dir)}}class gce{constructor(o,a,c){this.value="",this.done=!1,this.cursor=new US(o,a>c?-1:1),this.pos=a>c?o.length:0,this.from=Math.min(a,c),this.to=Math.max(a,c)}nextInner(o,a){if(a<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;o+=Math.max(0,a<0?this.pos-this.to:this.from-this.pos);let c=a<0?this.pos-this.from:this.to-this.pos;o>c&&(o=c),c-=o;let{value:u}=this.cursor.next(o);return this.pos+=(u.length+o)*a,this.value=u.length<=c?u:a<0?u.slice(u.length-c):u.slice(0,c),this.done=!this.value,this}next(o=0){return o<0?o=Math.max(o,this.from-this.pos):o>0&&(o=Math.min(o,this.to-this.pos)),this.nextInner(o,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class mce{constructor(o){this.inner=o,this.afterBreak=!0,this.value="",this.done=!1}next(o=0){let{done:a,lineBreak:c,value:u}=this.inner.next(o);return a?(this.done=!0,this.value=""):c?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=u,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(xr.prototype[Symbol.iterator]=function(){return this.iter()},US.prototype[Symbol.iterator]=gce.prototype[Symbol.iterator]=mce.prototype[Symbol.iterator]=function(){return this});class PYe{constructor(o,a,c,u){this.from=o,this.to=a,this.number=c,this.text=u}get length(){return this.to-this.from}}let L_="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(l=>l?parseInt(l,36):1);for(let l=1;l<L_.length;l++)L_[l]+=L_[l-1];function RYe(l){for(let o=1;o<L_.length;o+=2)if(L_[o]>l)return L_[o-1]<=l;return!1}function vce(l){return l>=127462&&l<=127487}function al(l,o,a=!0,c=!0){return(a?_ce:FYe)(l,o,c)}function _ce(l,o,a){if(o==l.length)return o;o&&bce(l.charCodeAt(o))&&xce(l.charCodeAt(o-1))&&o--;let c=ia(l,o);for(o+=xc(c);o<l.length;){let u=ia(l,o);if(8205==c||8205==u||a&&RYe(u))o+=xc(u),c=u;else{if(!vce(u))break;{let h=0,d=o-2;for(;d>=0&&vce(ia(l,d));)h++,d-=2;if(h%2==0)break;o+=2}}}return o}function FYe(l,o,a){for(;o>0;){let c=_ce(l,o-2,a);if(c<o)return c;o--}return 0}function bce(l){return l>=56320&&l<57344}function xce(l){return l>=55296&&l<56320}function ia(l,o){let a=l.charCodeAt(o);if(!xce(a)||o+1==l.length)return a;let c=l.charCodeAt(o+1);return bce(c)?c-56320+(a-55296<<10)+65536:a}function Z6(l){return l<=65535?String.fromCharCode(l):(l-=65536,String.fromCharCode(55296+(l>>10),56320+(1023&l)))}function xc(l){return l<65536?1:2}const X6=/\r\n?|\n/;var ra=function(l){return l[l.Simple=0]="Simple",l[l.TrackDel=1]="TrackDel",l[l.TrackBefore=2]="TrackBefore",l[l.TrackAfter=3]="TrackAfter",l}(ra||(ra={}));class cd{constructor(o){this.sections=o}get length(){let o=0;for(let a=0;a<this.sections.length;a+=2)o+=this.sections[a];return o}get newLength(){let o=0;for(let a=0;a<this.sections.length;a+=2){let c=this.sections[a+1];o+=c<0?this.sections[a]:c}return o}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(o){for(let a=0,c=0,u=0;a<this.sections.length;){let h=this.sections[a++],d=this.sections[a++];d<0?(o(c,u,h),u+=h):u+=d,c+=h}}iterChangedRanges(o,a=!1){Y6(this,o,a)}get invertedDesc(){let o=[];for(let a=0;a<this.sections.length;){let c=this.sections[a++],u=this.sections[a++];u<0?o.push(c,u):o.push(u,c)}return new cd(o)}composeDesc(o){return this.empty?o:o.empty?this:Cce(this,o)}mapDesc(o,a=!1){return o.empty?this:K6(this,o,a)}mapPos(o,a=-1,c=ra.Simple){let u=0,h=0;for(let d=0;d<this.sections.length;){let f=this.sections[d++],p=this.sections[d++],g=u+f;if(p<0){if(g>o)return h+(o-u);h+=f}else{if(c!=ra.Simple&&g>=o&&(c==ra.TrackDel&&u<o&&g>o||c==ra.TrackBefore&&u<o||c==ra.TrackAfter&&g>o))return null;if(g>o||g==o&&a<0&&!f)return o==u||a<0?h:h+p;h+=p}u=g}if(o>u)throw new RangeError(`Position ${o} is out of range for changeset of length ${u}`);return h}touchesRange(o,a=o){for(let c=0,u=0;c<this.sections.length&&u<=a;){let f=u+this.sections[c++];if(this.sections[c++]>=0&&u<=a&&f>=o)return!(u<o&&f>a)||"cover";u=f}return!1}toString(){let o="";for(let a=0;a<this.sections.length;){let c=this.sections[a++],u=this.sections[a++];o+=(o?" ":"")+c+(u>=0?":"+u:"")}return o}toJSON(){return this.sections}static fromJSON(o){if(!Array.isArray(o)||o.length%2||o.some(a=>"number"!=typeof a))throw new RangeError("Invalid JSON representation of ChangeDesc");return new cd(o)}static create(o){return new cd(o)}}class Eo extends cd{constructor(o,a){super(o),this.inserted=a}apply(o){if(this.length!=o.length)throw new RangeError("Applying change set to a document with the wrong length");return Y6(this,(a,c,u,h,d)=>o=o.replace(u,u+(c-a),d),!1),o}mapDesc(o,a=!1){return K6(this,o,a,!0)}invert(o){let a=this.sections.slice(),c=[];for(let u=0,h=0;u<a.length;u+=2){let d=a[u],f=a[u+1];if(f>=0){a[u]=f,a[u+1]=d;let p=u>>1;for(;c.length<p;)c.push(xr.empty);c.push(d?o.slice(h,h+d):xr.empty)}h+=d}return new Eo(a,c)}compose(o){return this.empty?o:o.empty?this:Cce(this,o,!0)}map(o,a=!1){return o.empty?this:K6(this,o,a,!0)}iterChanges(o,a=!1){Y6(this,o,a)}get desc(){return cd.create(this.sections)}filter(o){let a=[],c=[],u=[],h=new HS(this);e:for(let d=0,f=0;;){let p=d==o.length?1e9:o[d++];for(;f<p||f==p&&0==h.len;){if(h.done)break e;let m=Math.min(h.len,p-f);Oa(u,m,-1);let v=-1==h.ins?-1:0==h.off?h.ins:0;Oa(a,m,v),v>0&&ng(c,a,h.text),h.forward(m),f+=m}let g=o[d++];for(;f<g;){if(h.done)break e;let m=Math.min(h.len,g-f);Oa(a,m,-1),Oa(u,m,-1==h.ins?-1:0==h.off?h.ins:0),h.forward(m),f+=m}}return{changes:new Eo(a,c),filtered:cd.create(u)}}toJSON(){let o=[];for(let a=0;a<this.sections.length;a+=2){let c=this.sections[a],u=this.sections[a+1];o.push(u<0?c:0==u?[c]:[c].concat(this.inserted[a>>1].toJSON()))}return o}static of(o,a,c){let u=[],h=[],d=0,f=null;function p(m=!1){if(!m&&!u.length)return;d<a&&Oa(u,a-d,-1);let v=new Eo(u,h);f=f?f.compose(v.map(f)):v,u=[],h=[],d=0}return function g(m){if(Array.isArray(m))for(let v of m)g(v);else if(m instanceof Eo){if(m.length!=a)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${a})`);p(),f=f?f.compose(m.map(f)):m}else{let{from:v,to:y=v,insert:_}=m;if(v>y||v<0||y>a)throw new RangeError(`Invalid change range ${v} to ${y} (in doc of length ${a})`);let b=_?"string"==typeof _?xr.of(_.split(c||X6)):_:xr.empty,C=b.length;if(v==y&&0==C)return;v<d&&p(),v>d&&Oa(u,v-d,-1),Oa(u,y-v,C),ng(h,u,b),d=y}}(o),p(!f),f}static empty(o){return new Eo(o?[o,-1]:[],[])}static fromJSON(o){if(!Array.isArray(o))throw new RangeError("Invalid JSON representation of ChangeSet");let a=[],c=[];for(let u=0;u<o.length;u++){let h=o[u];if("number"==typeof h)a.push(h,-1);else{if(!Array.isArray(h)||"number"!=typeof h[0]||h.some((d,f)=>f&&"string"!=typeof d))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==h.length)a.push(h[0],0);else{for(;c.length<u;)c.push(xr.empty);c[u]=xr.of(h.slice(1)),a.push(h[0],c[u].length)}}}return new Eo(a,c)}static createSet(o,a){return new Eo(o,a)}}function Oa(l,o,a,c=!1){if(0==o&&a<=0)return;let u=l.length-2;u>=0&&a<=0&&a==l[u+1]?l[u]+=o:0==o&&0==l[u]?l[u+1]+=a:c?(l[u]+=o,l[u+1]+=a):l.push(o,a)}function ng(l,o,a){if(0==a.length)return;let c=o.length-2>>1;if(c<l.length)l[l.length-1]=l[l.length-1].append(a);else{for(;l.length<c;)l.push(xr.empty);l.push(a)}}function Y6(l,o,a){let c=l.inserted;for(let u=0,h=0,d=0;d<l.sections.length;){let f=l.sections[d++],p=l.sections[d++];if(p<0)u+=f,h+=f;else{let g=u,m=h,v=xr.empty;for(;g+=f,m+=p,p&&c&&(v=v.append(c[d-2>>1])),!(a||d==l.sections.length||l.sections[d+1]<0);)f=l.sections[d++],p=l.sections[d++];o(u,g,h,m,v),u=g,h=m}}}function K6(l,o,a,c=!1){let u=[],h=c?[]:null,d=new HS(l),f=new HS(o);for(let p=-1;;)if(-1==d.ins&&-1==f.ins){let g=Math.min(d.len,f.len);Oa(u,g,-1),d.forward(g),f.forward(g)}else if(f.ins>=0&&(d.ins<0||p==d.i||0==d.off&&(f.len<d.len||f.len==d.len&&!a))){let g=f.len;for(Oa(u,f.ins,-1);g;){let m=Math.min(d.len,g);d.ins>=0&&p<d.i&&d.len<=m&&(Oa(u,0,d.ins),h&&ng(h,u,d.text),p=d.i),d.forward(m),g-=m}f.next()}else{if(!(d.ins>=0)){if(d.done&&f.done)return h?Eo.createSet(u,h):cd.create(u);throw new Error("Mismatched change set lengths")}{let g=0,m=d.len;for(;m;)if(-1==f.ins){let v=Math.min(m,f.len);g+=v,m-=v,f.forward(v)}else{if(!(0==f.ins&&f.len<m))break;m-=f.len,f.next()}Oa(u,g,p<d.i?d.ins:0),h&&p<d.i&&ng(h,u,d.text),p=d.i,d.forward(d.len-m)}}}function Cce(l,o,a=!1){let c=[],u=a?[]:null,h=new HS(l),d=new HS(o);for(let f=!1;;){if(h.done&&d.done)return u?Eo.createSet(c,u):cd.create(c);if(0==h.ins)Oa(c,h.len,0,f),h.next();else if(0!=d.len||d.done){if(h.done||d.done)throw new Error("Mismatched change set lengths");{let p=Math.min(h.len2,d.len),g=c.length;if(-1==h.ins){let m=-1==d.ins?-1:d.off?0:d.ins;Oa(c,p,m,f),u&&m&&ng(u,c,d.text)}else-1==d.ins?(Oa(c,h.off?0:h.len,p,f),u&&ng(u,c,h.textBit(p))):(Oa(c,h.off?0:h.len,d.off?0:d.ins,f),u&&!d.off&&ng(u,c,d.text));f=(h.ins>p||d.ins>=0&&d.len>p)&&(f||c.length>g),h.forward2(p),d.forward(p)}}else Oa(c,0,d.ins,f),u&&ng(u,c,d.text),d.next()}}class HS{constructor(o){this.set=o,this.i=0,this.next()}next(){let{sections:o}=this.set;this.i<o.length?(this.len=o[this.i++],this.ins=o[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:o}=this.set,a=this.i-2>>1;return a>=o.length?xr.empty:o[a]}textBit(o){let{inserted:a}=this.set,c=this.i-2>>1;return c>=a.length&&!o?xr.empty:a[c].slice(this.off,null==o?void 0:this.off+o)}forward(o){o==this.len?this.next():(this.len-=o,this.off+=o)}forward2(o){-1==this.ins?this.forward(o):o==this.ins?this.next():(this.ins-=o,this.off+=o)}}class u0{constructor(o,a,c){this.from=o,this.to=a,this.flags=c}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let o=3&this.flags;return 3==o?null:o}get goalColumn(){let o=this.flags>>5;return 33554431==o?void 0:o}map(o,a=-1){let c,u;return this.empty?c=u=o.mapPos(this.from,a):(c=o.mapPos(this.from,1),u=o.mapPos(this.to,-1)),c==this.from&&u==this.to?this:new u0(c,u,this.flags)}extend(o,a=o){if(o<=this.anchor&&a>=this.anchor)return Dt.range(o,a);let c=Math.abs(o-this.anchor)>Math.abs(a-this.anchor)?o:a;return Dt.range(this.anchor,c)}eq(o){return this.anchor==o.anchor&&this.head==o.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(o){if(!o||"number"!=typeof o.anchor||"number"!=typeof o.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Dt.range(o.anchor,o.head)}static create(o,a,c){return new u0(o,a,c)}}class Dt{constructor(o,a){this.ranges=o,this.mainIndex=a}map(o,a=-1){return o.empty?this:Dt.create(this.ranges.map(c=>c.map(o,a)),this.mainIndex)}eq(o){if(this.ranges.length!=o.ranges.length||this.mainIndex!=o.mainIndex)return!1;for(let a=0;a<this.ranges.length;a++)if(!this.ranges[a].eq(o.ranges[a]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Dt([this.main],0)}addRange(o,a=!0){return Dt.create([o].concat(this.ranges),a?0:this.mainIndex+1)}replaceRange(o,a=this.mainIndex){let c=this.ranges.slice();return c[a]=o,Dt.create(c,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(o=>o.toJSON()),main:this.mainIndex}}static fromJSON(o){if(!o||!Array.isArray(o.ranges)||"number"!=typeof o.main||o.main>=o.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Dt(o.ranges.map(a=>u0.fromJSON(a)),o.main)}static single(o,a=o){return new Dt([Dt.range(o,a)],0)}static create(o,a=0){if(0==o.length)throw new RangeError("A selection needs at least one range");for(let c=0,u=0;u<o.length;u++){let h=o[u];if(h.empty?h.from<=c:h.from<c)return Dt.normalized(o.slice(),a);c=h.to}return new Dt(o,a)}static cursor(o,a=0,c,u){return u0.create(o,o,(0==a?0:a<0?4:8)|(null==c?3:Math.min(2,c))|(null!=u?u:33554431)<<5)}static range(o,a,c){let u=(null!=c?c:33554431)<<5;return a<o?u0.create(a,o,24|u):u0.create(o,a,u|(a>o?4:0))}static normalized(o,a=0){let c=o[a];o.sort((u,h)=>u.from-h.from),a=o.indexOf(c);for(let u=1;u<o.length;u++){let h=o[u],d=o[u-1];if(h.empty?h.from<=d.to:h.from<d.to){let f=d.from,p=Math.max(h.to,d.to);u<=a&&a--,o.splice(--u,2,h.anchor>h.head?Dt.range(p,f):Dt.range(f,p))}}return new Dt(o,a)}}function Sce(l,o){for(let a of l.ranges)if(a.to>o)throw new RangeError("Selection points outside of document")}let J6=0;class Rn{constructor(o,a,c,u,h){this.combine=o,this.compareInput=a,this.compare=c,this.isStatic=u,this.id=J6++,this.default=o([]),this.extensions="function"==typeof h?h(this):h}static define(o={}){return new Rn(o.combine||(a=>a),o.compareInput||((a,c)=>a===c),o.compare||(o.combine?(a,c)=>a===c:ez),!!o.static,o.enables)}of(o){return new eE([],this,0,o)}compute(o,a){if(this.isStatic)throw new Error("Can't compute a static facet");return new eE(o,this,1,a)}computeN(o,a){if(this.isStatic)throw new Error("Can't compute a static facet");return new eE(o,this,2,a)}from(o,a){return a||(a=c=>c),this.compute([o],c=>a(c.field(o)))}}function ez(l,o){return l==o||l.length==o.length&&l.every((a,c)=>a===o[c])}class eE{constructor(o,a,c,u){this.dependencies=o,this.facet=a,this.type=c,this.value=u,this.id=J6++}dynamicSlot(o){var a;let c=this.value,u=this.facet.compareInput,h=this.id,d=o[h]>>1,f=2==this.type,p=!1,g=!1,m=[];for(let v of this.dependencies)"doc"==v?p=!0:"selection"==v?g=!0:0==(1&(null!==(a=o[v.id])&&void 0!==a?a:1))&&m.push(o[v.id]);return{create:v=>(v.values[d]=c(v),1),update(v,y){if(p&&y.docChanged||g&&(y.docChanged||y.selection)||tz(v,m)){let _=c(v);if(f?!wce(_,v.values[d],u):!u(_,v.values[d]))return v.values[d]=_,1}return 0},reconfigure:(v,y)=>{let _=c(v),b=y.config.address[h];if(null!=b){let C=nE(y,b);if(this.dependencies.every(x=>x instanceof Rn?y.facet(x)===v.facet(x):!(x instanceof ao)||y.field(x,!1)==v.field(x,!1))||(f?wce(_,C,u):u(_,C)))return v.values[d]=C,0}return v.values[d]=_,1}}}}function wce(l,o,a){if(l.length!=o.length)return!1;for(let c=0;c<l.length;c++)if(!a(l[c],o[c]))return!1;return!0}function tz(l,o){let a=!1;for(let c of o)1&WS(l,c)&&(a=!0);return a}function NYe(l,o,a){let c=a.map(p=>l[p.id]),u=a.map(p=>p.type),h=c.filter(p=>!(1&p)),d=l[o.id]>>1;function f(p){let g=[];for(let m=0;m<c.length;m++){let v=nE(p,c[m]);if(2==u[m])for(let y of v)g.push(y);else g.push(v)}return o.combine(g)}return{create(p){for(let g of c)WS(p,g);return p.values[d]=f(p),1},update(p,g){if(!tz(p,h))return 0;let m=f(p);return o.compare(m,p.values[d])?0:(p.values[d]=m,1)},reconfigure(p,g){let m=tz(p,c),v=g.config.facets[o.id],y=g.facet(o);if(v&&!m&&ez(a,v))return p.values[d]=y,0;let _=f(p);return o.compare(_,y)?(p.values[d]=y,0):(p.values[d]=_,1)}}}const Tce=Rn.define({static:!0});class ao{constructor(o,a,c,u,h){this.id=o,this.createF=a,this.updateF=c,this.compareF=u,this.spec=h,this.provides=void 0}static define(o){let a=new ao(J6++,o.create,o.update,o.compare||((c,u)=>c===u),o);return o.provide&&(a.provides=o.provide(a)),a}create(o){let a=o.facet(Tce).find(c=>c.field==this);return((null==a?void 0:a.create)||this.createF)(o)}slot(o){let a=o[this.id]>>1;return{create:c=>(c.values[a]=this.create(c),1),update:(c,u)=>{let h=c.values[a],d=this.updateF(h,u);return this.compareF(h,d)?0:(c.values[a]=d,1)},reconfigure:(c,u)=>null!=u.config.address[this.id]?(c.values[a]=u.field(this),0):(c.values[a]=this.create(c),1)}}init(o){return[this,Tce.of({field:this,create:o})]}get extension(){return this}}function $S(l){return o=>new Oce(o,l)}const d0={highest:$S(0),high:$S(1),default:$S(2),low:$S(3),lowest:$S(4)};class Oce{constructor(o,a){this.inner=o,this.prec=a}}class f0{of(o){return new nz(this,o)}reconfigure(o){return f0.reconfigure.of({compartment:this,extension:o})}get(o){return o.config.compartments.get(this)}}class nz{constructor(o,a){this.compartment=o,this.inner=a}}class tE{constructor(o,a,c,u,h,d){for(this.base=o,this.compartments=a,this.dynamicSlots=c,this.address=u,this.staticValues=h,this.facets=d,this.statusTemplate=[];this.statusTemplate.length<c.length;)this.statusTemplate.push(0)}staticFacet(o){let a=this.address[o.id];return null==a?o.default:this.staticValues[a>>1]}static resolve(o,a,c){let u=[],h=Object.create(null),d=new Map;for(let y of function LYe(l,o,a){let c=[[],[],[],[],[]],u=new Map;return function h(d,f){let p=u.get(d);if(null!=p){if(p<=f)return;let g=c[p].indexOf(d);g>-1&&c[p].splice(g,1),d instanceof nz&&a.delete(d.compartment)}if(u.set(d,f),Array.isArray(d))for(let g of d)h(g,f);else if(d instanceof nz){if(a.has(d.compartment))throw new RangeError("Duplicate use of compartment in extensions");let g=o.get(d.compartment)||d.inner;a.set(d.compartment,g),h(g,f)}else if(d instanceof Oce)h(d.inner,d.prec);else if(d instanceof ao)c[f].push(d),d.provides&&h(d.provides,f);else if(d instanceof eE)c[f].push(d),d.facet.extensions&&h(d.facet.extensions,2);else{let g=d.extension;if(!g)throw new Error(`Unrecognized extension value in extension set (${d}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);h(g,f)}}(l,2),c.reduce((d,f)=>d.concat(f))}(o,a,d))y instanceof ao?u.push(y):(h[y.facet.id]||(h[y.facet.id]=[])).push(y);let f=Object.create(null),p=[],g=[];for(let y of u)f[y.id]=g.length<<1,g.push(_=>y.slot(_));let m=null==c?void 0:c.config.facets;for(let y in h){let _=h[y],b=_[0].facet,C=m&&m[y]||[];if(_.every(x=>0==x.type))if(f[b.id]=p.length<<1|1,ez(C,_))p.push(c.facet(b));else{let x=b.combine(_.map(S=>S.value));p.push(c&&b.compare(x,c.facet(b))?c.facet(b):x)}else{for(let x of _)0==x.type?(f[x.id]=p.length<<1|1,p.push(x.value)):(f[x.id]=g.length<<1,g.push(S=>x.dynamicSlot(S)));f[b.id]=g.length<<1,g.push(x=>NYe(x,b,_))}}let v=g.map(y=>y(f));return new tE(o,d,v,f,p,h)}}function WS(l,o){if(1&o)return 2;let a=o>>1,c=l.status[a];if(4==c)throw new Error("Cyclic dependency between fields and/or facets");if(2&c)return c;l.status[a]=4;let u=l.computeSlot(l,l.config.dynamicSlots[a]);return l.status[a]=2|u}function nE(l,o){return 1&o?l.config.staticValues[o>>1]:l.values[o>>1]}const Dce=Rn.define(),kce=Rn.define({combine:l=>l.some(o=>o),static:!0}),Mce=Rn.define({combine:l=>l.length?l[0]:void 0,static:!0}),Ece=Rn.define(),Ace=Rn.define(),Ice=Rn.define(),Pce=Rn.define({combine:l=>!!l.length&&l[0]});class p0{constructor(o,a){this.type=o,this.value=a}static define(){return new BYe}}class BYe{of(o){return new p0(this,o)}}class VYe{constructor(o){this.map=o}of(o){return new Gi(this,o)}}let Gi=(()=>{class l{constructor(a,c){this.type=a,this.value=c}map(a){let c=this.type.map(this.value,a);return void 0===c?void 0:c==this.value?this:new l(this.type,c)}is(a){return this.type==a}static define(a={}){return new VYe(a.map||(c=>c))}static mapEffects(a,c){if(!a.length)return a;let u=[];for(let h of a){let d=h.map(c);d&&u.push(d)}return u}}return l.reconfigure=l.define(),l.appendConfig=l.define(),l})(),ud=(()=>{class l{constructor(a,c,u,h,d,f){this.startState=a,this.changes=c,this.selection=u,this.effects=h,this.annotations=d,this.scrollIntoView=f,this._doc=null,this._state=null,u&&Sce(u,c.newLength),d.some(p=>p.type==l.time)||(this.annotations=d.concat(l.time.of(Date.now())))}static create(a,c,u,h,d,f){return new l(a,c,u,h,d,f)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(a){for(let c of this.annotations)if(c.type==a)return c.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(a){let c=this.annotation(l.userEvent);return!(!c||!(c==a||c.length>a.length&&c.slice(0,a.length)==a&&"."==c[a.length]))}}return l.time=p0.define(),l.userEvent=p0.define(),l.addToHistory=p0.define(),l.remote=p0.define(),l})();function zYe(l,o){let a=[];for(let c=0,u=0;;){let h,d;if(c<l.length&&(u==o.length||o[u]>=l[c]))h=l[c++],d=l[c++];else{if(!(u<o.length))return a;h=o[u++],d=o[u++]}!a.length||a[a.length-1]<h?a.push(h,d):a[a.length-1]<d&&(a[a.length-1]=d)}}function Rce(l,o,a){var c;let u,h,d;return a?(u=o.changes,h=Eo.empty(o.changes.length),d=l.changes.compose(o.changes)):(u=o.changes.map(l.changes),h=l.changes.mapDesc(o.changes,!0),d=l.changes.compose(u)),{changes:d,selection:o.selection?o.selection.map(h):null===(c=l.selection)||void 0===c?void 0:c.map(u),effects:Gi.mapEffects(l.effects,u).concat(Gi.mapEffects(o.effects,h)),annotations:l.annotations.length?l.annotations.concat(o.annotations):o.annotations,scrollIntoView:l.scrollIntoView||o.scrollIntoView}}function iz(l,o,a){let c=o.selection,u=B_(o.annotations);return o.userEvent&&(u=u.concat(ud.userEvent.of(o.userEvent))),{changes:o.changes instanceof Eo?o.changes:Eo.of(o.changes||[],a,l.facet(Mce)),selection:c&&(c instanceof Dt?c:Dt.single(c.anchor,c.head)),effects:B_(o.effects),annotations:u,scrollIntoView:!!o.scrollIntoView}}function Fce(l,o,a){let c=iz(l,o.length?o[0]:{},l.doc.length);o.length&&!1===o[0].filter&&(a=!1);for(let h=1;h<o.length;h++){!1===o[h].filter&&(a=!1);let d=!!o[h].sequential;c=Rce(c,iz(l,o[h],d?c.changes.newLength:l.doc.length),d)}let u=ud.create(l,c.changes,c.selection,c.effects,c.annotations,c.scrollIntoView);return function HYe(l){let o=l.startState,a=o.facet(Ice),c=l;for(let u=a.length-1;u>=0;u--){let h=a[u](l);h&&Object.keys(h).length&&(c=Rce(c,iz(o,h,l.changes.newLength),!0))}return c==l?l:ud.create(o,l.changes,l.selection,c.effects,c.annotations,c.scrollIntoView)}(a?function UYe(l){let o=l.startState,a=!0;for(let u of o.facet(Ece)){let h=u(l);if(!1===h){a=!1;break}Array.isArray(h)&&(a=!0===a?h:zYe(a,h))}if(!0!==a){let u,h;if(!1===a)h=l.changes.invertedDesc,u=Eo.empty(o.doc.length);else{let d=l.changes.filter(a);u=d.changes,h=d.filtered.mapDesc(d.changes).invertedDesc}l=ud.create(o,u,l.selection&&l.selection.map(h),Gi.mapEffects(l.effects,h),l.annotations,l.scrollIntoView)}let c=o.facet(Ace);for(let u=c.length-1;u>=0;u--){let h=c[u](l);l=h instanceof ud?h:Array.isArray(h)&&1==h.length&&h[0]instanceof ud?h[0]:Fce(o,B_(h),!1)}return l}(u):u)}const $Ye=[];function B_(l){return null==l?$Ye:Array.isArray(l)?l:[l]}var hs=function(l){return l[l.Word=0]="Word",l[l.Space=1]="Space",l[l.Other=2]="Other",l}(hs||(hs={}));const WYe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let rz;try{rz=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(l){}let ll=(()=>{class l{constructor(a,c,u,h,d,f){this.config=a,this.doc=c,this.selection=u,this.values=h,this.status=a.statusTemplate.slice(),this.computeSlot=d,f&&(f._state=this);for(let p=0;p<this.config.dynamicSlots.length;p++)WS(this,p<<1);this.computeSlot=null}field(a,c=!0){let u=this.config.address[a.id];if(null!=u)return WS(this,u),nE(this,u);if(c)throw new RangeError("Field is not present in this state")}update(...a){return Fce(this,a,!0)}applyTransaction(a){let d,c=this.config,{base:u,compartments:h}=c;for(let f of a.effects)f.is(f0.reconfigure)?(c&&(h=new Map,c.compartments.forEach((p,g)=>h.set(g,p)),c=null),h.set(f.value.compartment,f.value.extension)):f.is(Gi.reconfigure)?(c=null,u=f.value):f.is(Gi.appendConfig)&&(c=null,u=B_(u).concat(f.value));c?d=a.startState.values.slice():(c=tE.resolve(u,h,this),d=new l(c,this.doc,this.selection,c.dynamicSlots.map(()=>null),(p,g)=>g.reconfigure(p,this),null).values),new l(c,a.newDoc,a.newSelection,d,(f,p)=>p.update(f,a),a)}replaceSelection(a){return"string"==typeof a&&(a=this.toText(a)),this.changeByRange(c=>({changes:{from:c.from,to:c.to,insert:a},range:Dt.cursor(c.from+a.length)}))}changeByRange(a){let c=this.selection,u=a(c.ranges[0]),h=this.changes(u.changes),d=[u.range],f=B_(u.effects);for(let p=1;p<c.ranges.length;p++){let g=a(c.ranges[p]),m=this.changes(g.changes),v=m.map(h);for(let _=0;_<p;_++)d[_]=d[_].map(v);let y=h.mapDesc(m,!0);d.push(g.range.map(y)),h=h.compose(v),f=Gi.mapEffects(f,v).concat(Gi.mapEffects(B_(g.effects),y))}return{changes:h,selection:Dt.create(d,c.mainIndex),effects:f}}changes(a=[]){return a instanceof Eo?a:Eo.of(a,this.doc.length,this.facet(l.lineSeparator))}toText(a){return xr.of(a.split(this.facet(l.lineSeparator)||X6))}sliceDoc(a=0,c=this.doc.length){return this.doc.sliceString(a,c,this.lineBreak)}facet(a){let c=this.config.address[a.id];return null==c?a.default:(WS(this,c),nE(this,c))}toJSON(a){let c={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(a)for(let u in a){let h=a[u];h instanceof ao&&null!=this.config.address[h.id]&&(c[u]=h.spec.toJSON(this.field(a[u]),this))}return c}static fromJSON(a,c={},u){if(!a||"string"!=typeof a.doc)throw new RangeError("Invalid JSON representation for EditorState");let h=[];if(u)for(let d in u)if(Object.prototype.hasOwnProperty.call(a,d)){let f=u[d],p=a[d];h.push(f.init(g=>f.spec.fromJSON(p,g)))}return l.create({doc:a.doc,selection:Dt.fromJSON(a.selection),extensions:c.extensions?h.concat([c.extensions]):h})}static create(a={}){let c=tE.resolve(a.extensions||[],new Map),u=a.doc instanceof xr?a.doc:xr.of((a.doc||"").split(c.staticFacet(l.lineSeparator)||X6)),h=a.selection?a.selection instanceof Dt?a.selection:Dt.single(a.selection.anchor,a.selection.head):Dt.single(0);return Sce(h,u.length),c.staticFacet(kce)||(h=h.asSingle()),new l(c,u,h,c.dynamicSlots.map(()=>null),(d,f)=>f.create(d),null)}get tabSize(){return this.facet(l.tabSize)}get lineBreak(){return this.facet(l.lineSeparator)||"\n"}get readOnly(){return this.facet(Pce)}phrase(a,...c){for(let u of this.facet(l.phrases))if(Object.prototype.hasOwnProperty.call(u,a)){a=u[a];break}return c.length&&(a=a.replace(/\$(\$|\d*)/g,(u,h)=>{if("$"==h)return"$";let d=+(h||1);return!d||d>c.length?u:c[d-1]})),a}languageDataAt(a,c,u=-1){let h=[];for(let d of this.facet(Dce))for(let f of d(this,c,u))Object.prototype.hasOwnProperty.call(f,a)&&h.push(f[a]);return h}charCategorizer(a){return function QYe(l){return o=>{if(!/\S/.test(o))return hs.Space;if(function GYe(l){if(rz)return rz.test(l);for(let o=0;o<l.length;o++){let a=l[o];if(/\w/.test(a)||a>"\x80"&&(a.toUpperCase()!=a.toLowerCase()||WYe.test(a)))return!0}return!1}(o))return hs.Word;for(let a=0;a<l.length;a++)if(o.indexOf(l[a])>-1)return hs.Word;return hs.Other}}(this.languageDataAt("wordChars",a).join(""))}wordAt(a){let{text:c,from:u,length:h}=this.doc.lineAt(a),d=this.charCategorizer(a),f=a-u,p=a-u;for(;f>0;){let g=al(c,f,!1);if(d(c.slice(g,f))!=hs.Word)break;f=g}for(;p<h;){let g=al(c,p);if(d(c.slice(p,g))!=hs.Word)break;p=g}return f==p?null:Dt.range(f+u,p+u)}}return l.allowMultipleSelections=kce,l.tabSize=Rn.define({combine:o=>o.length?o[0]:4}),l.lineSeparator=Mce,l.readOnly=Pce,l.phrases=Rn.define({compare(o,a){let c=Object.keys(o),u=Object.keys(a);return c.length==u.length&&c.every(h=>o[h]==a[h])}}),l.languageData=Dce,l.changeFilter=Ece,l.transactionFilter=Ace,l.transactionExtender=Ice,l})();function ah(l,o,a={}){let c={};for(let u of l)for(let h of Object.keys(u)){let d=u[h],f=c[h];if(void 0===f)c[h]=d;else if(f!==d&&void 0!==d){if(!Object.hasOwnProperty.call(a,h))throw new Error("Config merge conflict for field "+h);c[h]=a[h](f,d)}}for(let u in o)void 0===c[u]&&(c[u]=o[u]);return c}f0.reconfigure=Gi.define();class g0{eq(o){return this==o}range(o,a=o){return GS.create(o,a,this)}}g0.prototype.startSide=g0.prototype.endSide=0,g0.prototype.point=!1,g0.prototype.mapMode=ra.TrackDel;class GS{constructor(o,a,c){this.from=o,this.to=a,this.value=c}static create(o,a,c){return new GS(o,a,c)}}function sz(l,o){return l.from-o.from||l.value.startSide-o.value.startSide}class oz{constructor(o,a,c,u){this.from=o,this.to=a,this.value=c,this.maxPoint=u}get length(){return this.to[this.to.length-1]}findIndex(o,a,c,u=0){let h=c?this.to:this.from;for(let d=u,f=h.length;;){if(d==f)return d;let p=d+f>>1,g=h[p]-o||(c?this.value[p].endSide:this.value[p].startSide)-a;if(p==d)return g>=0?d:f;g>=0?f=p:d=p+1}}between(o,a,c,u){for(let h=this.findIndex(a,-1e9,!0),d=this.findIndex(c,1e9,!1,h);h<d;h++)if(!1===u(this.from[h]+o,this.to[h]+o,this.value[h]))return!1}map(o,a){let c=[],u=[],h=[],d=-1,f=-1;for(let p=0;p<this.value.length;p++){let y,_,g=this.value[p],m=this.from[p]+o,v=this.to[p]+o;if(m==v){let b=a.mapPos(m,g.startSide,g.mapMode);if(null==b||(y=_=b,g.startSide!=g.endSide&&(_=a.mapPos(m,g.endSide),_<y)))continue}else if(y=a.mapPos(m,g.startSide),_=a.mapPos(v,g.endSide),y>_||y==_&&g.startSide>0&&g.endSide<=0)continue;(_-y||g.endSide-g.startSide)<0||(d<0&&(d=y),g.point&&(f=Math.max(f,_-y)),c.push(g),u.push(y-d),h.push(_-d))}return{mapped:c.length?new oz(u,h,c,f):null,pos:d}}}let bs=(()=>{class l{constructor(a,c,u,h){this.chunkPos=a,this.chunk=c,this.nextLayer=u,this.maxPoint=h}static create(a,c,u,h){return new l(a,c,u,h)}get length(){let a=this.chunk.length-1;return a<0?0:Math.max(this.chunkEnd(a),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let a=this.nextLayer.size;for(let c of this.chunk)a+=c.value.length;return a}chunkEnd(a){return this.chunkPos[a]+this.chunk[a].length}update(a){let{add:c=[],sort:u=!1,filterFrom:h=0,filterTo:d=this.length}=a,f=a.filter;if(0==c.length&&!f)return this;if(u&&(c=c.slice().sort(sz)),this.isEmpty)return c.length?l.of(c):this;let p=new Lce(this,null,-1).goto(0),g=0,m=[],v=new ig;for(;p.value||g<c.length;)if(g<c.length&&(p.from-c[g].from||p.startSide-c[g].value.startSide)>=0){let y=c[g++];v.addInner(y.from,y.to,y.value)||m.push(y)}else 1==p.rangeIndex&&p.chunkIndex<this.chunk.length&&(g==c.length||this.chunkEnd(p.chunkIndex)<c[g].from)&&(!f||h>this.chunkEnd(p.chunkIndex)||d<this.chunkPos[p.chunkIndex])&&v.addChunk(this.chunkPos[p.chunkIndex],this.chunk[p.chunkIndex])?p.nextChunk():((!f||h>p.to||d<p.from||f(p.from,p.to,p.value))&&(v.addInner(p.from,p.to,p.value)||m.push(GS.create(p.from,p.to,p.value))),p.next());return v.finishInner(this.nextLayer.isEmpty&&!m.length?l.empty:this.nextLayer.update({add:m,filter:f,filterFrom:h,filterTo:d}))}map(a){if(a.empty||this.isEmpty)return this;let c=[],u=[],h=-1;for(let f=0;f<this.chunk.length;f++){let p=this.chunkPos[f],g=this.chunk[f],m=a.touchesRange(p,p+g.length);if(!1===m)h=Math.max(h,g.maxPoint),c.push(g),u.push(a.mapPos(p));else if(!0===m){let{mapped:v,pos:y}=g.map(p,a);v&&(h=Math.max(h,v.maxPoint),c.push(v),u.push(y))}}let d=this.nextLayer.map(a);return 0==c.length?d:new l(u,c,d||l.empty,h)}between(a,c,u){if(!this.isEmpty){for(let h=0;h<this.chunk.length;h++){let d=this.chunkPos[h],f=this.chunk[h];if(c>=d&&a<=d+f.length&&!1===f.between(d,a-d,c-d,u))return}this.nextLayer.between(a,c,u)}}iter(a=0){return QS.from([this]).goto(a)}get isEmpty(){return this.nextLayer==this}static iter(a,c=0){return QS.from(a).goto(c)}static compare(a,c,u,h,d=-1){let f=a.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=d),p=c.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=d),g=Nce(f,p,u),m=new jS(f,g,d),v=new jS(p,g,d);u.iterGaps((y,_,b)=>Bce(m,y,v,_,b,h)),u.empty&&0==u.length&&Bce(m,0,v,0,0,h)}static eq(a,c,u=0,h){null==h&&(h=1e9);let d=a.filter(v=>!v.isEmpty&&c.indexOf(v)<0),f=c.filter(v=>!v.isEmpty&&a.indexOf(v)<0);if(d.length!=f.length)return!1;if(!d.length)return!0;let p=Nce(d,f),g=new jS(d,p,0).goto(u),m=new jS(f,p,0).goto(u);for(;;){if(g.to!=m.to||!lz(g.active,m.active)||g.point&&(!m.point||!g.point.eq(m.point)))return!1;if(g.to>h)return!0;g.next(),m.next()}}static spans(a,c,u,h,d=-1){let f=new jS(a,null,d).goto(c),p=c,g=f.openStart;for(;;){let m=Math.min(f.to,u);if(f.point?(h.point(p,m,f.point,f.activeForPoint(f.to),g,f.pointRank),g=f.openEnd(m)+(f.to>m?1:0)):m>p&&(h.span(p,m,f.active,g),g=f.openEnd(m)),f.to>u)break;p=f.to,f.next()}return g}static of(a,c=!1){let u=new ig;for(let h of a instanceof GS?[a]:c?function jYe(l){if(l.length>1)for(let o=l[0],a=1;a<l.length;a++){let c=l[a];if(sz(o,c)>0)return l.slice().sort(sz);o=c}return l}(a):a)u.add(h.from,h.to,h.value);return u.finish()}}return l.empty=new l([],[],null,-1),l})();bs.empty.nextLayer=bs.empty;class ig{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(o){this.chunks.push(new oz(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,o&&(this.from=[],this.to=[],this.value=[])}add(o,a,c){this.addInner(o,a,c)||(this.nextLayer||(this.nextLayer=new ig)).add(o,a,c)}addInner(o,a,c){let u=o-this.lastTo||c.startSide-this.last.endSide;if(u<=0&&(o-this.lastFrom||c.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(u<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=o),this.from.push(o-this.chunkStart),this.to.push(a-this.chunkStart),this.last=c,this.lastFrom=o,this.lastTo=a,this.value.push(c),c.point&&(this.maxPoint=Math.max(this.maxPoint,a-o)),0))}addChunk(o,a){if((o-this.lastTo||a.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,a.maxPoint),this.chunks.push(a),this.chunkPos.push(o);let c=a.value.length-1;return this.last=a.value[c],this.lastFrom=a.from[c]+o,this.lastTo=a.to[c]+o,!0}finish(){return this.finishInner(bs.empty)}finishInner(o){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return o;let a=bs.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(o):o,this.setMaxPoint);return this.from=null,a}}function Nce(l,o,a){let c=new Map;for(let h of l)for(let d=0;d<h.chunk.length;d++)h.chunk[d].maxPoint<=0&&c.set(h.chunk[d],h.chunkPos[d]);let u=new Set;for(let h of o)for(let d=0;d<h.chunk.length;d++){let f=c.get(h.chunk[d]);null!=f&&(a?a.mapPos(f):f)==h.chunkPos[d]&&!(null==a?void 0:a.touchesRange(f,f+h.chunk[d].length))&&u.add(h.chunk[d])}return u}class Lce{constructor(o,a,c,u=0){this.layer=o,this.skip=a,this.minPoint=c,this.rank=u}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(o,a=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(o,a,!1),this}gotoInner(o,a,c){for(;this.chunkIndex<this.layer.chunk.length;){let u=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(u)||this.layer.chunkEnd(this.chunkIndex)<o||u.maxPoint<this.minPoint))break;this.chunkIndex++,c=!1}if(this.chunkIndex<this.layer.chunk.length){let u=this.layer.chunk[this.chunkIndex].findIndex(o-this.layer.chunkPos[this.chunkIndex],a,!0);(!c||this.rangeIndex<u)&&this.setRangeIndex(u)}this.next()}forward(o,a){(this.to-o||this.endSide-a)<0&&this.gotoInner(o,a,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let o=this.layer.chunkPos[this.chunkIndex],a=this.layer.chunk[this.chunkIndex];if(this.from=o+a.from[this.rangeIndex],this.to=o+a.to[this.rangeIndex],this.value=a.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(o){if(o==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=o}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(o){return this.from-o.from||this.startSide-o.startSide||this.rank-o.rank||this.to-o.to||this.endSide-o.endSide}}class QS{constructor(o){this.heap=o}static from(o,a=null,c=-1){let u=[];for(let h=0;h<o.length;h++)for(let d=o[h];!d.isEmpty;d=d.nextLayer)d.maxPoint>=c&&u.push(new Lce(d,a,c,h));return 1==u.length?u[0]:new QS(u)}get startSide(){return this.value?this.value.startSide:0}goto(o,a=-1e9){for(let c of this.heap)c.goto(o,a);for(let c=this.heap.length>>1;c>=0;c--)az(this.heap,c);return this.next(),this}forward(o,a){for(let c of this.heap)c.forward(o,a);for(let c=this.heap.length>>1;c>=0;c--)az(this.heap,c);(this.to-o||this.value.endSide-a)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let o=this.heap[0];this.from=o.from,this.to=o.to,this.value=o.value,this.rank=o.rank,o.value&&o.next(),az(this.heap,0)}}}function az(l,o){for(let a=l[o];;){let c=1+(o<<1);if(c>=l.length)break;let u=l[c];if(c+1<l.length&&u.compare(l[c+1])>=0&&(u=l[c+1],c++),a.compare(u)<0)break;l[c]=a,l[o]=u,o=c}}class jS{constructor(o,a,c){this.minPoint=c,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=QS.from(o,a,c)}goto(o,a=-1e9){return this.cursor.goto(o,a),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=o,this.endSide=a,this.openStart=-1,this.next(),this}forward(o,a){for(;this.minActive>-1&&(this.activeTo[this.minActive]-o||this.active[this.minActive].endSide-a)<0;)this.removeActive(this.minActive);this.cursor.forward(o,a)}removeActive(o){iE(this.active,o),iE(this.activeTo,o),iE(this.activeRank,o),this.minActive=Vce(this.active,this.activeTo)}addActive(o){let a=0,{value:c,to:u,rank:h}=this.cursor;for(;a<this.activeRank.length&&this.activeRank[a]<=h;)a++;rE(this.active,a,c),rE(this.activeTo,a,u),rE(this.activeRank,a,h),o&&rE(o,a,this.cursor.from),this.minActive=Vce(this.active,this.activeTo)}next(){let o=this.to,a=this.point;this.point=null;let c=this.openStart<0?[]:null,u=0;for(;;){let h=this.minActive;if(h>-1&&(this.activeTo[h]-this.cursor.from||this.active[h].endSide-this.cursor.startSide)<0){if(this.activeTo[h]>o){this.to=this.activeTo[h],this.endSide=this.active[h].endSide;break}this.removeActive(h),c&&iE(c,h)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>o){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let d=this.cursor.value;if(d.point){if(!(a&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=d,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=d.endSide,this.cursor.from<o&&(u=1),this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(c),this.cursor.from<o&&this.cursor.to>o&&u++,this.cursor.next()}}}if(c){let h=0;for(;h<c.length&&c[h]<o;)h++;this.openStart=h+u}}activeForPoint(o){if(!this.active.length)return this.active;let a=[];for(let c=this.active.length-1;c>=0&&!(this.activeRank[c]<this.pointRank);c--)(this.activeTo[c]>o||this.activeTo[c]==o&&this.active[c].endSide>=this.point.endSide)&&a.push(this.active[c]);return a.reverse()}openEnd(o){let a=0;for(let c=this.activeTo.length-1;c>=0&&this.activeTo[c]>o;c--)a++;return a}}function Bce(l,o,a,c,u,h){l.goto(o),a.goto(c);let d=c+u,f=c,p=c-o;for(;;){let g=l.to+p-a.to||l.endSide-a.endSide,m=g<0?l.to+p:a.to,v=Math.min(m,d);if(l.point||a.point?l.point&&a.point&&(l.point==a.point||l.point.eq(a.point))&&lz(l.activeForPoint(l.to+p),a.activeForPoint(a.to))||h.comparePoint(f,v,l.point,a.point):v>f&&!lz(l.active,a.active)&&h.compareRange(f,v,l.active,a.active),m>d)break;f=m,g<=0&&l.next(),g>=0&&a.next()}}function lz(l,o){if(l.length!=o.length)return!1;for(let a=0;a<l.length;a++)if(l[a]!=o[a]&&!l[a].eq(o[a]))return!1;return!0}function iE(l,o){for(let a=o,c=l.length-1;a<c;a++)l[a]=l[a+1];l.pop()}function rE(l,o,a){for(let c=l.length-1;c>=o;c--)l[c+1]=l[c];l[o]=a}function Vce(l,o){let a=-1,c=1e9;for(let u=0;u<o.length;u++)(o[u]-c||l[u].endSide-l[a].endSide)<0&&(a=u,c=o[u]);return a}function qS(l,o,a=l.length){let c=0;for(let u=0;u<a;)9==l.charCodeAt(u)?(c+=o-c%o,u++):(c++,u=al(l,u));return c}function cz(l,o,a,c){for(let u=0,h=0;;){if(h>=o)return u;if(u==l.length)break;h+=9==l.charCodeAt(u)?a-h%a:1,u=al(l,u)}return!0===c?-1:l.length}const zce="undefined"==typeof Symbol?"__\u037c":Symbol.for("\u037c"),hz="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Uce="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class rg{constructor(o,a){this.rules=[];let{finish:c}=a||{};function u(d){return/^@/.test(d)?[d]:d.split(/,\s*/)}function h(d,f,p,g){let m=[],v=/^@(\w+)\b/.exec(d[0]),y=v&&"keyframes"==v[1];if(v&&null==f)return p.push(d[0]+";");for(let _ in f){let b=f[_];if(/&/.test(_))h(_.split(/,\s*/).map(C=>d.map(x=>C.replace(/&/,x))).reduce((C,x)=>C.concat(x)),b,p);else if(b&&"object"==typeof b){if(!v)throw new RangeError("The value of a property ("+_+") should be a primitive value.");h(u(_),b,m,y)}else null!=b&&m.push(_.replace(/_.*/,"").replace(/[A-Z]/g,C=>"-"+C.toLowerCase())+": "+b+";")}(m.length||y)&&p.push((!c||v||g?d:d.map(c)).join(", ")+" {"+m.join(" ")+"}")}for(let d in o)h(u(d),o[d],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let o=Uce[zce]||1;return Uce[zce]=o+1,"\u037c"+o.toString(36)}static mount(o,a){(o[hz]||new qYe(o)).mount(Array.isArray(a)?a:[a])}}let sE=null;class qYe{constructor(o){if(!o.head&&o.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(sE)return o.adoptedStyleSheets=[sE.sheet].concat(o.adoptedStyleSheets),o[hz]=sE;this.sheet=new CSSStyleSheet,o.adoptedStyleSheets=[this.sheet].concat(o.adoptedStyleSheets),sE=this}else{this.styleTag=(o.ownerDocument||o).createElement("style");let a=o.head||o;a.insertBefore(this.styleTag,a.firstChild)}this.modules=[],o[hz]=this}mount(o){let a=this.sheet,c=0,u=0;for(let h=0;h<o.length;h++){let d=o[h],f=this.modules.indexOf(d);if(f<u&&f>-1&&(this.modules.splice(f,1),u--,f=-1),-1==f){if(this.modules.splice(u++,0,d),a)for(let p=0;p<d.rules.length;p++)a.insertRule(d.rules[p],c++)}else{for(;u<f;)c+=this.modules[u++].rules.length;c+=d.rules.length,u++}}if(!a){let h="";for(let d=0;d<this.modules.length;d++)h+=this.modules[d].getRules()+"\n";this.styleTag.textContent=h}}}for(var sg={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ZS={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Hce="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),ZYe=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),XYe="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),YYe=ZYe||Hce&&+Hce[1]<57,sa=0;sa<10;sa++)sg[48+sa]=sg[96+sa]=String(sa);for(sa=1;sa<=24;sa++)sg[sa+111]="F"+sa;for(sa=65;sa<=90;sa++)sg[sa]=String.fromCharCode(sa+32),ZS[sa]=String.fromCharCode(sa);for(var dz in sg)ZS.hasOwnProperty(dz)||(ZS[dz]=sg[dz]);function oE(l){let o;return o=11==l.nodeType?l.getSelection?l:l.ownerDocument:l,o.getSelection()}function V_(l,o){return!!o&&(l==o||l.contains(1!=o.nodeType?o.parentNode:o))}function aE(l,o){if(!o.anchorNode)return!1;try{return V_(l,o.anchorNode)}catch(a){return!1}}function XS(l){return 3==l.nodeType?U_(l,0,l.nodeValue.length).getClientRects():1==l.nodeType?l.getClientRects():[]}function lE(l,o,a,c){return!!a&&($ce(l,o,a,c,-1)||$ce(l,o,a,c,1))}function cE(l){for(var o=0;;o++)if(!(l=l.previousSibling))return o}function $ce(l,o,a,c,u){for(;;){if(l==a&&o==c)return!0;if(o==(u<0?0:YS(l))){if("DIV"==l.nodeName)return!1;let h=l.parentNode;if(!h||1!=h.nodeType)return!1;o=cE(l)+(u<0?0:1),l=h}else{if(1!=l.nodeType)return!1;if(1==(l=l.childNodes[o+(u<0?-1:0)]).nodeType&&"false"==l.contentEditable)return!1;o=u<0?YS(l):0}}}function YS(l){return 3==l.nodeType?l.nodeValue.length:l.childNodes.length}const Wce={left:0,right:0,top:0,bottom:0};function uE(l,o){let a=o?l.left:l.right;return{left:a,right:a,top:l.top,bottom:l.bottom}}function eKe(l){return{left:0,right:l.innerWidth,top:0,bottom:l.innerHeight}}class nKe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(o){return this.anchorNode==o.anchorNode&&this.anchorOffset==o.anchorOffset&&this.focusNode==o.focusNode&&this.focusOffset==o.focusOffset}setRange(o){this.set(o.anchorNode,o.anchorOffset,o.focusNode,o.focusOffset)}set(o,a,c,u){this.anchorNode=o,this.anchorOffset=a,this.focusNode=c,this.focusOffset=u}}let Qce,z_=null;function Gce(l){if(l.setActive)return l.setActive();if(z_)return l.focus(z_);let o=[];for(let a=l;a&&(o.push(a,a.scrollTop,a.scrollLeft),a!=a.ownerDocument);a=a.parentNode);if(l.focus(null==z_?{get preventScroll(){return z_={preventScroll:!0},!0}}:void 0),!z_){z_=!1;for(let a=0;a<o.length;){let c=o[a++],u=o[a++],h=o[a++];c.scrollTop!=u&&(c.scrollTop=u),c.scrollLeft!=h&&(c.scrollLeft=h)}}}function U_(l,o,a=o){let c=Qce||(Qce=document.createRange());return c.setEnd(l,a),c.setStart(l,o),c}function KS(l,o,a){let c={key:o,code:o,keyCode:a,which:a,cancelable:!0},u=new KeyboardEvent("keydown",c);u.synthetic=!0,l.dispatchEvent(u);let h=new KeyboardEvent("keyup",c);return h.synthetic=!0,l.dispatchEvent(h),u.defaultPrevented||h.defaultPrevented}function jce(l){for(;l.attributes.length;)l.removeAttributeNode(l.attributes[0])}class Da{constructor(o,a,c=!0){this.node=o,this.offset=a,this.precise=c}static before(o,a){return new Da(o.parentNode,cE(o),a)}static after(o,a){return new Da(o.parentNode,cE(o)+1,a)}}const fz=[];class Yr{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(o){let a=this.posAtStart;for(let c of this.children){if(c==o)return a;a+=c.length+c.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(o){return this.posBefore(o)+o.length}coordsAt(o,a){return null}sync(o){if(2&this.dirty){let u,a=this.dom,c=null;for(let h of this.children){if(h.dirty){if(!h.dom&&(u=c?c.nextSibling:a.firstChild)){let d=Yr.get(u);(!d||!d.parent&&d.canReuseDOM(h))&&h.reuseDOM(u)}h.sync(o),h.dirty=0}if(u=c?c.nextSibling:a.firstChild,o&&!o.written&&o.node==a&&u!=h.dom&&(o.written=!0),h.dom.parentNode==a)for(;u&&u!=h.dom;)u=qce(u);else a.insertBefore(h.dom,u);c=h.dom}for(u=c?c.nextSibling:a.firstChild,u&&o&&o.node==a&&(o.written=!0);u;)u=qce(u)}else if(1&this.dirty)for(let a of this.children)a.dirty&&(a.sync(o),a.dirty=0)}reuseDOM(o){}localPosFromDOM(o,a){let c;if(o==this.dom)c=this.dom.childNodes[a];else{let u=0==YS(o)?0:0==a?-1:1;for(;;){let h=o.parentNode;if(h==this.dom)break;0==u&&h.firstChild!=h.lastChild&&(u=o==h.firstChild?-1:1),o=h}c=u<0?o:o.nextSibling}if(c==this.dom.firstChild)return 0;for(;c&&!Yr.get(c);)c=c.nextSibling;if(!c)return this.length;for(let u=0,h=0;;u++){let d=this.children[u];if(d.dom==c)return h;h+=d.length+d.breakAfter}}domBoundsAround(o,a,c=0){let u=-1,h=-1,d=-1,f=-1;for(let p=0,g=c,m=c;p<this.children.length;p++){let v=this.children[p],y=g+v.length;if(g<o&&y>a)return v.domBoundsAround(o,a,g);if(y>=o&&-1==u&&(u=p,h=g),g>a&&v.dom.parentNode==this.dom){d=p,f=m;break}m=y,g=y+v.breakAfter}return{from:h,to:f<0?c+this.length:f,startDOM:(u?this.children[u-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:d<this.children.length&&d>=0?this.children[d].dom:null}}markDirty(o=!1){this.dirty|=2,this.markParentsDirty(o)}markParentsDirty(o){for(let a=this.parent;a;a=a.parent){if(o&&(a.dirty|=2),1&a.dirty)return;a.dirty|=1,o=!1}}setParent(o){this.parent!=o&&(this.parent=o,this.dirty&&this.markParentsDirty(!0))}setDOM(o){this.dom&&(this.dom.cmView=null),this.dom=o,o.cmView=this}get rootView(){for(let o=this;;){let a=o.parent;if(!a)return o;o=a}}replaceChildren(o,a,c=fz){this.markDirty();for(let u=o;u<a;u++){let h=this.children[u];h.parent==this&&h.destroy()}this.children.splice(o,a-o,...c);for(let u=0;u<c.length;u++)c[u].setParent(this)}ignoreMutation(o){return!1}ignoreEvent(o){return!1}childCursor(o=this.length){return new Zce(this.children,o,this.children.length)}childPos(o,a=1){return this.childCursor().findPos(o,a)}toString(){let o=this.constructor.name.replace("View","");return o+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==o?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(o){return o.cmView}get isEditable(){return!0}merge(o,a,c,u,h,d){return!1}become(o){return!1}canReuseDOM(o){return o.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function qce(l){let o=l.nextSibling;return l.parentNode.removeChild(l),o}Yr.prototype.breakAfter=0;class Zce{constructor(o,a,c){this.children=o,this.pos=a,this.i=c,this.off=0}findPos(o,a=1){for(;;){if(o>this.pos||o==this.pos&&(a>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=o-this.pos,this;let c=this.children[--this.i];this.pos-=c.length+c.breakAfter}}}function Xce(l,o,a,c,u,h,d,f,p){let{children:g}=l,m=g.length?g[o]:null,v=h.length?h[h.length-1]:null,y=v?v.breakAfter:d;if(!(o==c&&m&&!d&&!y&&h.length<2&&m.merge(a,u,h.length?v:null,0==a,f,p))){if(c<g.length){let _=g[c];_&&u<_.length?(o==c&&(_=_.split(u),u=0),!y&&v&&_.merge(0,u,v,!0,0,p)?h[h.length-1]=_:(u&&_.merge(0,u,null,!1,0,p),h.push(_))):(null==_?void 0:_.breakAfter)&&(v?v.breakAfter=1:d=1),c++}for(m&&(m.breakAfter=d,a>0&&(!d&&h.length&&m.merge(a,m.length,h[0],!1,f,0)?m.breakAfter=h.shift().breakAfter:(a<m.length||m.children.length&&0==m.children[m.children.length-1].length)&&m.merge(a,m.length,null,!1,f,0),o++));o<c&&h.length;)if(g[c-1].become(h[h.length-1]))c--,h.pop(),p=h.length?0:f;else{if(!g[o].become(h[0]))break;o++,h.shift(),f=h.length?0:p}!h.length&&o&&c<g.length&&!g[o-1].breakAfter&&g[c].merge(0,0,g[o-1],!1,f,p)&&o--,(o<c||h.length)&&l.replaceChildren(o,c,h)}}function Yce(l,o,a,c,u,h){let d=l.childCursor(),{i:f,off:p}=d.findPos(a,1),{i:g,off:m}=d.findPos(o,-1),v=o-a;for(let y of c)v+=y.length;l.length+=v,Xce(l,g,m,f,p,c,0,u,h)}let Cc="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},pz="undefined"!=typeof document?document:{documentElement:{style:{}}};const gz=/Edge\/(\d+)/.exec(Cc.userAgent),Kce=/MSIE \d/.test(Cc.userAgent),mz=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Cc.userAgent),hE=!!(Kce||mz||gz),Jce=!hE&&/gecko\/(\d+)/i.test(Cc.userAgent),vz=!hE&&/Chrome\/(\d+)/.exec(Cc.userAgent),eue="webkitFontSmoothing"in pz.documentElement.style,tue=!hE&&/Apple Computer/.test(Cc.vendor),nue=tue&&(/Mobile\/\w+/.test(Cc.userAgent)||Cc.maxTouchPoints>2);var Fn={mac:nue||/Mac/.test(Cc.platform),windows:/Win/.test(Cc.platform),linux:/Linux|X11/.test(Cc.platform),ie:hE,ie_version:Kce?pz.documentMode||6:mz?+mz[1]:gz?+gz[1]:0,gecko:Jce,gecko_version:Jce?+(/Firefox\/(\d+)/.exec(Cc.userAgent)||[0,0])[1]:0,chrome:!!vz,chrome_version:vz?+vz[1]:0,ios:nue,android:/Android\b/.test(Cc.userAgent),webkit:eue,safari:tue,webkit_version:eue?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=pz.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class og extends Yr{constructor(o){super(),this.text=o}get length(){return this.text.length}createDOM(o){this.setDOM(o||document.createTextNode(this.text))}sync(o){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(o&&o.node==this.dom&&(o.written=!0),this.dom.nodeValue=this.text)}reuseDOM(o){3==o.nodeType&&this.createDOM(o)}merge(o,a,c){return(!c||c instanceof og&&!(this.length-(a-o)+c.length>256))&&(this.text=this.text.slice(0,o)+(c?c.text:"")+this.text.slice(a),this.markDirty(),!0)}split(o){let a=new og(this.text.slice(o));return this.text=this.text.slice(0,o),this.markDirty(),a}localPosFromDOM(o,a){return o==this.dom?a:a?this.text.length:0}domAtPos(o){return new Da(this.dom,o)}domBoundsAround(o,a,c){return{from:c,to:c+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(o,a){return yz(this.dom,o,a)}}class hd extends Yr{constructor(o,a=[],c=0){super(),this.mark=o,this.children=a,this.length=c;for(let u of a)u.setParent(this)}setAttrs(o){if(jce(o),this.mark.class&&(o.className=this.mark.class),this.mark.attrs)for(let a in this.mark.attrs)o.setAttribute(a,this.mark.attrs[a]);return o}reuseDOM(o){o.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(o),this.dirty|=6)}sync(o){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(o)}merge(o,a,c,u,h,d){return!(c&&(!(c instanceof hd&&c.mark.eq(this.mark))||o&&h<=0||a<this.length&&d<=0)||(Yce(this,o,a,c?c.children:[],h-1,d-1),this.markDirty(),0))}split(o){let a=[],c=0,u=-1,h=0;for(let f of this.children){let p=c+f.length;p>o&&a.push(c<o?f.split(o-c):f),u<0&&c>=o&&(u=h),c=p,h++}let d=this.length-o;return this.length=o,u>-1&&(this.children.length=u,this.markDirty()),new hd(this.mark,a,d)}domAtPos(o){return sue(this,o)}coordsAt(o,a){return aue(this,o,a)}}function yz(l,o,a){let c=l.nodeValue.length;o>c&&(o=c);let u=o,h=o,d=0;0==o&&a<0||o==c&&a>=0?Fn.chrome||Fn.gecko||(o?(u--,d=1):h<c&&(h++,d=-1)):a<0?u--:h<c&&h++;let f=U_(l,u,h).getClientRects();if(!f.length)return Wce;let p=f[(d?d<0:a>=0)?0:f.length-1];return Fn.safari&&!d&&0==p.width&&(p=Array.prototype.find.call(f,g=>g.width)||p),d?uE(p,d<0):p||null}class ag extends Yr{constructor(o,a,c){super(),this.widget=o,this.length=a,this.side=c,this.prevWidget=null}static create(o,a,c){return new(o.customView||ag)(o,a,c)}split(o){let a=ag.create(this.widget,this.length-o,this.side);return this.length-=o,a}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(o,a,c,u,h,d){return!(c&&(!(c instanceof ag&&this.widget.compare(c.widget))||o>0&&h<=0||a<this.length&&d<=0)||(this.length=o+(c?c.length:0)+(this.length-a),0))}become(o){return o.length==this.length&&o instanceof ag&&o.side==this.side&&this.widget.constructor==o.widget.constructor&&(this.widget.eq(o.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=o.widget,!0)}ignoreMutation(){return!0}ignoreEvent(o){return this.widget.ignoreEvent(o)}get overrideDOMText(){if(0==this.length)return xr.empty;let o=this;for(;o.parent;)o=o.parent;let a=o.editorView,c=a&&a.state.doc,u=this.posAtStart;return c?c.slice(u,u+this.length):xr.empty}domAtPos(o){return 0==o?Da.before(this.dom):Da.after(this.dom,o==this.length)}domBoundsAround(){return null}coordsAt(o,a){let c=this.dom.getClientRects(),u=null;if(!c.length)return Wce;for(let h=o>0?c.length-1:0;u=c[h],!(o>0?0==h:h==c.length-1||u.top<u.bottom);h+=o>0?-1:1);return 0==o&&a>0||o==this.length&&a<=0?u:uE(u,0==o)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class iue extends ag{domAtPos(o){let{topView:a,text:c}=this.widget;return a?_z(o,0,a,c,(u,h)=>u.domAtPos(h),u=>new Da(c,Math.min(u,c.nodeValue.length))):new Da(c,Math.min(o,c.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(o,a){let{topView:c,text:u}=this.widget;return c?rue(o,a,c,u):Math.min(a,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(o,a){let{topView:c,text:u}=this.widget;return c?_z(o,a,c,u,(h,d,f)=>h.coordsAt(d,f),(h,d)=>yz(u,h,d)):yz(u,o,a)}destroy(){var o;super.destroy(),null===(o=this.widget.topView)||void 0===o||o.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function _z(l,o,a,c,u,h){if(a instanceof hd){for(let d=a.dom.firstChild;d;d=d.nextSibling){let f=Yr.get(d);if(!f)return h(l,o);let p=V_(d,c),g=f.length+(p?c.nodeValue.length:0);if(l<g||l==g&&f.getSide()<=0)return p?_z(l,o,f,c,u,h):u(f,l,o);l-=g}return u(a,a.length,-1)}return a.dom==c?h(l,o):u(a,l,o)}function rue(l,o,a,c){if(a instanceof hd)for(let u of a.children){let h=0,d=V_(u.dom,c);if(V_(u.dom,l))return h+(d?rue(l,o,u,c):u.localPosFromDOM(l,o));h+=d?c.nodeValue.length:u.length}else if(a.dom==c)return Math.min(o,c.nodeValue.length);return a.localPosFromDOM(l,o)}class H_ extends Yr{constructor(o){super(),this.side=o}get length(){return 0}merge(){return!1}become(o){return o instanceof H_&&o.side==this.side}split(){return new H_(this.side)}sync(){if(!this.dom){let o=document.createElement("img");o.className="cm-widgetBuffer",o.setAttribute("aria-hidden","true"),this.setDOM(o)}}getSide(){return this.side}domAtPos(o){return Da.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(o){let a=this.dom.getBoundingClientRect(),c=function oKe(l,o){let a=l.parent,c=a?a.children.indexOf(l):-1;for(;a&&c>=0;)if(o<0?c>0:c<a.children.length){let u=a.children[c+o];if(u instanceof og){let h=u.coordsAt(o<0?u.length:0,o);if(h)return h}c+=o}else{if(!(a instanceof hd&&a.parent)){let u=a.dom.lastChild;if(u&&"BR"==u.nodeName)return u.getClientRects()[0];break}c=a.parent.children.indexOf(a)+(o<0?0:1),a=a.parent}}(this,this.side>0?-1:1);return c&&c.top<a.bottom&&c.bottom>a.top?{left:a.left,right:a.right,top:c.top,bottom:c.bottom}:a}get overrideDOMText(){return xr.empty}}function sue(l,o){let a=l.dom,{children:c}=l,u=0;for(let h=0;u<c.length;u++){let d=c[u],f=h+d.length;if(!(f==h&&d.getSide()<=0)){if(o>h&&o<f&&d.dom.parentNode==a)return d.domAtPos(o-h);if(o<=h)break;h=f}}for(let h=u;h>0;h--){let d=c[h-1];if(d.dom.parentNode==a)return d.domAtPos(d.length)}for(let h=u;h<c.length;h++){let d=c[h];if(d.dom.parentNode==a)return d.domAtPos(0)}return new Da(a,0)}function oue(l,o,a){let c,{children:u}=l;a>0&&o instanceof hd&&u.length&&(c=u[u.length-1])instanceof hd&&c.mark.eq(o.mark)?oue(c,o.children[0],a-1):(u.push(o),o.setParent(l)),l.length+=o.length}function aue(l,o,a){for(let h=0,d=0;d<l.children.length;d++){let g,f=l.children[d],p=h+f.length;if((a<=0||p==l.length||f.getSide()>0?p>=o:p>o)&&(o<p||d+1==l.children.length||(g=l.children[d+1]).length||g.getSide()>0)){let m=0;if(p==h){if(f.getSide()<=0)continue;m=a=-f.getSide()}let v=f.coordsAt(Math.max(0,o-h),a);return m&&v?uE(v,a<0):v}h=p}let c=l.dom.lastChild;if(!c)return l.dom.getBoundingClientRect();let u=XS(c);return u[u.length-1]||null}function bz(l,o){for(let a in l)"class"==a&&o.class?o.class+=" "+l.class:"style"==a&&o.style?o.style+=";"+l.style:o[a]=l[a];return o}function xz(l,o){if(l==o)return!0;if(!l||!o)return!1;let a=Object.keys(l),c=Object.keys(o);if(a.length!=c.length)return!1;for(let u of a)if(-1==c.indexOf(u)||l[u]!==o[u])return!1;return!0}function Cz(l,o,a){let c=null;if(o)for(let u in o)a&&u in a||l.removeAttribute(c=u);if(a)for(let u in a)o&&o[u]==a[u]||l.setAttribute(c=u,a[u]);return!!c}og.prototype.children=ag.prototype.children=H_.prototype.children=fz;class Af{eq(o){return!1}updateDOM(o){return!1}compare(o){return this==o||this.constructor==o.constructor&&this.eq(o)}get estimatedHeight(){return-1}ignoreEvent(o){return!0}get customView(){return null}destroy(o){}}var $r=function(l){return l[l.Text=0]="Text",l[l.WidgetBefore=1]="WidgetBefore",l[l.WidgetAfter=2]="WidgetAfter",l[l.WidgetRange=3]="WidgetRange",l}($r||($r={}));class Nn extends g0{constructor(o,a,c,u){super(),this.startSide=o,this.endSide=a,this.widget=c,this.spec=u}get heightRelevant(){return!1}static mark(o){return new dE(o)}static widget(o){let a=o.side||0,c=!!o.block;return a+=c?a>0?3e8:-4e8:a>0?1e8:-1e8,new m0(o,a,a,c,o.widget||null,!1)}static replace(o){let c,u,a=!!o.block;if(o.isBlockGap)c=-5e8,u=4e8;else{let{start:h,end:d}=lue(o,a);c=(h?a?-3e8:-1:5e8)-1,u=1+(d?a?2e8:1:-6e8)}return new m0(o,c,u,a,o.widget||null,!0)}static line(o){return new JS(o)}static set(o,a=!1){return bs.of(o,a)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Nn.none=bs.empty;class dE extends Nn{constructor(o){let{start:a,end:c}=lue(o);super(a?-1:5e8,c?1:-6e8,null,o),this.tagName=o.tagName||"span",this.class=o.class||"",this.attrs=o.attributes||null}eq(o){return this==o||o instanceof dE&&this.tagName==o.tagName&&this.class==o.class&&xz(this.attrs,o.attrs)}range(o,a=o){if(o>=a)throw new RangeError("Mark decorations may not be empty");return super.range(o,a)}}dE.prototype.point=!1;class JS extends Nn{constructor(o){super(-2e8,-2e8,null,o)}eq(o){return o instanceof JS&&xz(this.spec.attributes,o.spec.attributes)}range(o,a=o){if(a!=o)throw new RangeError("Line decoration ranges must be zero-length");return super.range(o,a)}}JS.prototype.mapMode=ra.TrackBefore,JS.prototype.point=!0;class m0 extends Nn{constructor(o,a,c,u,h,d){super(a,c,h,o),this.block=u,this.isReplace=d,this.mapMode=u?a<=0?ra.TrackBefore:ra.TrackAfter:ra.TrackDel}get type(){return this.startSide<this.endSide?$r.WidgetRange:this.startSide<=0?$r.WidgetBefore:$r.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(o){return o instanceof m0&&function aKe(l,o){return l==o||!!(l&&o&&l.compare(o))}(this.widget,o.widget)&&this.block==o.block&&this.startSide==o.startSide&&this.endSide==o.endSide}range(o,a=o){if(this.isReplace&&(o>a||o==a&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&a!=o)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(o,a)}}function lue(l,o=!1){let{inclusiveStart:a,inclusiveEnd:c}=l;return null==a&&(a=l.inclusive),null==c&&(c=l.inclusive),{start:null!=a?a:o,end:null!=c?c:o}}function Sz(l,o,a,c=0){let u=a.length-1;u>=0&&a[u]+c>=l?a[u]=Math.max(a[u],o):a.push(l,o)}m0.prototype.point=!0;class cl extends Yr{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(o,a,c,u,h,d){if(c){if(!(c instanceof cl))return!1;this.dom||c.transferDOM(this)}return u&&this.setDeco(c?c.attrs:null),Yce(this,o,a,c?c.children:[],h,d),!0}split(o){let a=new cl;if(a.breakAfter=this.breakAfter,0==this.length)return a;let{i:c,off:u}=this.childPos(o);u&&(a.append(this.children[c].split(u),0),this.children[c].merge(u,this.children[c].length,null,!1,0,0),c++);for(let h=c;h<this.children.length;h++)a.append(this.children[h],0);for(;c>0&&0==this.children[c-1].length;)this.children[--c].destroy();return this.children.length=c,this.markDirty(),this.length=o,a}transferDOM(o){!this.dom||(this.markDirty(),o.setDOM(this.dom),o.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(o){xz(this.attrs,o)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=o)}append(o,a){oue(this,o,a)}addLineDeco(o){let a=o.spec.attributes,c=o.spec.class;a&&(this.attrs=bz(a,this.attrs||{})),c&&(this.attrs=bz({class:c},this.attrs||{}))}domAtPos(o){return sue(this,o)}reuseDOM(o){"DIV"==o.nodeName&&(this.setDOM(o),this.dirty|=6)}sync(o){var a;this.dom?4&this.dirty&&(jce(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Cz(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(o);let c=this.dom.lastChild;for(;c&&Yr.get(c)instanceof hd;)c=c.lastChild;if(!(c&&this.length&&("BR"==c.nodeName||0!=(null===(a=Yr.get(c))||void 0===a?void 0:a.isEditable)||Fn.ios&&this.children.some(u=>u instanceof og)))){let u=document.createElement("BR");u.cmIgnore=!0,this.dom.appendChild(u)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let o=0;for(let a of this.children){if(!(a instanceof og)||/[^ -~]/.test(a.text))return null;let c=XS(a.dom);if(1!=c.length)return null;o+=c[0].width}return o?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:o/this.length}:null}coordsAt(o,a){return aue(this,o,a)}become(o){return!1}get type(){return $r.Text}static find(o,a){for(let c=0,u=0;c<o.children.length;c++){let h=o.children[c],d=u+h.length;if(d>=a){if(h instanceof cl)return h;if(d>a)break}u=d+h.breakAfter}return null}}class v0 extends Yr{constructor(o,a,c){super(),this.widget=o,this.length=a,this.type=c,this.breakAfter=0,this.prevWidget=null}merge(o,a,c,u,h,d){return!(c&&(!(c instanceof v0&&this.widget.compare(c.widget))||o>0&&h<=0||a<this.length&&d<=0)||(this.length=o+(c?c.length:0)+(this.length-a),0))}domAtPos(o){return 0==o?Da.before(this.dom):Da.after(this.dom,o==this.length)}split(o){let a=this.length-o;this.length=o;let c=new v0(this.widget,a,this.type);return c.breakAfter=this.breakAfter,c}get children(){return fz}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):xr.empty}domBoundsAround(){return null}become(o){return o instanceof v0&&o.type==this.type&&o.widget.constructor==this.widget.constructor&&(o.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=o.widget,this.length=o.length,this.breakAfter=o.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(o){return this.widget.ignoreEvent(o)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class wz{constructor(o,a,c,u){this.doc=o,this.pos=a,this.end=c,this.disallowBlockEffectsFor=u,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=o.iter(),this.skip=a}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let o=this.content[this.content.length-1];return!(o.breakAfter||o instanceof v0&&o.type==$r.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new cl),this.atCursorPos=!0),this.curLine}flushBuffer(o){this.pendingBuffer&&(this.curLine.append(fE(new H_(-1),o),o.length),this.pendingBuffer=0)}addBlockWidget(o){this.flushBuffer([]),this.curLine=null,this.content.push(o)}finish(o){o?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(o,a,c){for(;o>0;){if(this.textOff==this.text.length){let{value:h,lineBreak:d,done:f}=this.cursor.next(this.skip);if(this.skip=0,f)throw new Error("Ran out of text content when drawing inline views");if(d){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,o--;continue}this.text=h,this.textOff=0}let u=Math.min(this.text.length-this.textOff,o,512);this.flushBuffer(a.slice(0,c)),this.getLine().append(fE(new og(this.text.slice(this.textOff,this.textOff+u)),a),c),this.atCursorPos=!0,this.textOff+=u,o-=u,c=0}}span(o,a,c,u){this.buildText(a-o,c,u),this.pos=a,this.openStart<0&&(this.openStart=u)}point(o,a,c,u,h,d){if(this.disallowBlockEffectsFor[d]&&c instanceof m0){if(c.block)throw new RangeError("Block decorations may not be specified via plugins");if(a>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let f=a-o;if(c instanceof m0)if(c.block){let{type:p}=c;p==$r.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new v0(c.widget||new cue("div"),f,p))}else{let p=ag.create(c.widget||new cue("span"),f,c.startSide),g=this.atCursorPos&&!p.isEditable&&h<=u.length&&(o<a||c.startSide>0),m=!p.isEditable&&(o<a||c.startSide<=0),v=this.getLine();2==this.pendingBuffer&&!g&&(this.pendingBuffer=0),this.flushBuffer(u),g&&(v.append(fE(new H_(1),u),h),h=u.length+Math.max(0,h-u.length)),v.append(fE(p,u),h),this.atCursorPos=m,this.pendingBuffer=m?o<a?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(c);f&&(this.textOff+f<=this.text.length?this.textOff+=f:(this.skip+=f-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=a),this.openStart<0&&(this.openStart=h)}static build(o,a,c,u,h){let d=new wz(o,a,c,h);return d.openEnd=bs.spans(u,a,c,d),d.openStart<0&&(d.openStart=d.openEnd),d.finish(d.openEnd),d}}function fE(l,o){for(let a of o)l=new hd(a,[l],l.length);return l}class cue extends Af{constructor(o){super(),this.tag=o}eq(o){return o.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(o){return o.nodeName.toLowerCase()==this.tag}}const uue=Rn.define(),hue=Rn.define(),due=Rn.define(),fue=Rn.define(),Tz=Rn.define(),pue=Rn.define(),gue=Rn.define({combine:l=>l.some(o=>o)});class pE{constructor(o,a="nearest",c="nearest",u=5,h=5){this.range=o,this.y=a,this.x=c,this.yMargin=u,this.xMargin=h}map(o){return o.empty?this:new pE(this.range.map(o),this.y,this.x,this.yMargin,this.xMargin)}}const mue=Gi.define({map:(l,o)=>l.map(o)});function Sc(l,o,a){let c=l.facet(fue);c.length?c[0](o):window.onerror?window.onerror(String(o),a,void 0,void 0,o):a?console.error(a+":",o):console.error(o)}const gE=Rn.define({combine:l=>!l.length||l[0]});let lKe=0;const ew=Rn.define();class js{constructor(o,a,c,u){this.id=o,this.create=a,this.domEventHandlers=c,this.extension=u(this)}static define(o,a){const{eventHandlers:c,provide:u,decorations:h}=a||{};return new js(lKe++,o,c,d=>{let f=[ew.of(d)];return h&&f.push(tw.of(p=>{let g=p.plugin(d);return g?h(g):Nn.none})),u&&f.push(u(d)),f})}static fromClass(o,a){return js.define(c=>new o(c),a)}}class Oz{constructor(o){this.spec=o,this.mustUpdate=null,this.value=null}update(o){if(this.value){if(this.mustUpdate){let a=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(a)}catch(c){if(Sc(a.state,c,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(u){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(o)}catch(a){Sc(o.state,a,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(o){var a;if(null===(a=this.value)||void 0===a?void 0:a.destroy)try{this.value.destroy()}catch(c){Sc(o.state,c,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const vue=Rn.define(),Dz=Rn.define(),tw=Rn.define(),yue=Rn.define(),_ue=Rn.define(),nw=Rn.define();class dd{constructor(o,a,c,u){this.fromA=o,this.toA=a,this.fromB=c,this.toB=u}join(o){return new dd(Math.min(this.fromA,o.fromA),Math.max(this.toA,o.toA),Math.min(this.fromB,o.fromB),Math.max(this.toB,o.toB))}addToSet(o){let a=o.length,c=this;for(;a>0;a--){let u=o[a-1];if(!(u.fromA>c.toA)){if(u.toA<c.fromA)break;c=c.join(u),o.splice(a-1,1)}}return o.splice(a,0,c),o}static extendWithRanges(o,a){if(0==a.length)return o;let c=[];for(let u=0,h=0,d=0,f=0;;u++){let p=u==o.length?null:o[u],g=d-f,m=p?p.fromB:1e9;for(;h<a.length&&a[h]<m;){let y=a[h+1],_=Math.max(f,a[h]),b=Math.min(m,y);if(_<=b&&new dd(_+g,b+g,_,b).addToSet(c),y>m)break;h+=2}if(!p)return c;new dd(p.fromA,p.toA,p.fromB,p.toB).addToSet(c),d=p.toA,f=p.toB}}}class mE{constructor(o,a,c){this.view=o,this.state=a,this.transactions=c,this.flags=0,this.startState=o.state,this.changes=Eo.empty(this.startState.doc.length);for(let d of c)this.changes=this.changes.compose(d.changes);let u=[];this.changes.iterChangedRanges((d,f,p,g)=>u.push(new dd(d,f,p,g))),this.changedRanges=u;let h=o.hasFocus;h!=o.inputState.notifiedFocused&&(o.inputState.notifiedFocused=h,this.flags|=1)}static create(o,a,c){return new mE(o,a,c)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(o=>o.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}var xs=function(l){return l[l.LTR=0]="LTR",l[l.RTL=1]="RTL",l}(xs||(xs={}));const kz=xs.LTR,cKe=xs.RTL;function bue(l){let o=[];for(let a=0;a<l.length;a++)o.push(1<<+l[a]);return o}const uKe=bue("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),hKe=bue("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Mz=Object.create(null),fd=[];for(let l of["()","[]","{}"]){let o=l.charCodeAt(0),a=l.charCodeAt(1);Mz[o]=a,Mz[a]=-o}function dKe(l){return l<=247?uKe[l]:1424<=l&&l<=1524?2:1536<=l&&l<=1785?hKe[l-1536]:1774<=l&&l<=2220?4:8192<=l&&l<=8203?256:64336<=l&&l<=65023?4:8204==l?256:1}const fKe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class $_{constructor(o,a,c){this.from=o,this.to=a,this.level=c}get dir(){return this.level%2?cKe:kz}side(o,a){return this.dir==a==o?this.to:this.from}static find(o,a,c,u){let h=-1;for(let d=0;d<o.length;d++){let f=o[d];if(f.from<=a&&f.to>=a){if(f.level==c)return d;(h<0||(0!=u?u<0?f.from<a:f.to>a:o[h].level>f.level))&&(h=d)}}if(h<0)throw new RangeError("Index out of range");return h}}const Cs=[];function Cue(l){return[new $_(0,l,0)]}let Sue="";function wue(l,o,a,c,u){var h;let d=c.head-l.from,f=-1;if(0==d){if(!u||!l.length)return null;o[0].level!=a&&(d=o[0].side(!1,a),f=0)}else if(d==l.length){if(u)return null;let y=o[o.length-1];y.level!=a&&(d=y.side(!0,a),f=o.length-1)}f<0&&(f=$_.find(o,d,null!==(h=c.bidiLevel)&&void 0!==h?h:-1,c.assoc));let p=o[f];d==p.side(u,a)&&(p=o[f+=u?1:-1],d=p.side(!u,a));let g=u==(p.dir==a),m=al(l.text,d,g);if(Sue=l.text.slice(Math.min(d,m),Math.max(d,m)),m!=p.side(u,a))return Dt.cursor(m+l.from,g?-1:1,p.level);let v=f==(u?o.length-1:0)?null:o[f+(u?1:-1)];return v||p.level==a?v&&v.level<p.level?Dt.cursor(v.side(!u,a)+l.from,u?1:-1,v.level):Dt.cursor(m+l.from,u?-1:1,p.level):Dt.cursor(u?l.to:l.from,u?-1:1,a)}class Tue{constructor(o,a){this.points=o,this.text="",this.lineSeparator=a.facet(ll.lineSeparator)}append(o){this.text+=o}lineBreak(){this.text+="\uffff"}readRange(o,a){if(!o)return this;let c=o.parentNode;for(let u=o;;){this.findPointBefore(c,u),this.readNode(u);let h=u.nextSibling;if(h==a)break;let d=Yr.get(u),f=Yr.get(h);(d&&f?d.breakAfter:(d?d.breakAfter:Oue(u))||Oue(h)&&("BR"!=u.nodeName||u.cmIgnore))&&this.lineBreak(),u=h}return this.findPointBefore(c,a),this}readTextNode(o){let a=o.nodeValue;for(let c of this.points)c.node==o&&(c.pos=this.text.length+Math.min(c.offset,a.length));for(let c=0,u=this.lineSeparator?null:/\r\n?|\n/g;;){let f,h=-1,d=1;if(this.lineSeparator?(h=a.indexOf(this.lineSeparator,c),d=this.lineSeparator.length):(f=u.exec(a))&&(h=f.index,d=f[0].length),this.append(a.slice(c,h<0?a.length:h)),h<0)break;if(this.lineBreak(),d>1)for(let p of this.points)p.node==o&&p.pos>this.text.length&&(p.pos-=d-1);c=h+d}}readNode(o){if(o.cmIgnore)return;let a=Yr.get(o),c=a&&a.overrideDOMText;if(null!=c){this.findPointInside(o,c.length);for(let u=c.iter();!u.next().done;)u.lineBreak?this.lineBreak():this.append(u.value)}else 3==o.nodeType?this.readTextNode(o):"BR"==o.nodeName?o.nextSibling&&this.lineBreak():1==o.nodeType&&this.readRange(o.firstChild,null)}findPointBefore(o,a){for(let c of this.points)c.node==o&&o.childNodes[c.offset]==a&&(c.pos=this.text.length)}findPointInside(o,a){for(let c of this.points)(3==o.nodeType?c.node==o:o.contains(c.node))&&(c.pos=this.text.length+Math.min(a,c.offset))}}function Oue(l){return 1==l.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(l.nodeName)}class Due{constructor(o,a){this.node=o,this.offset=a,this.pos=-1}}class kue extends Yr{constructor(o){super(),this.view=o,this.compositionDeco=Nn.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(o.contentDOM),this.children=[new cl],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new dd(0,0,0,o.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(o){let a=o.changedRanges;this.minWidth>0&&a.length&&(a.every(({fromA:d,toA:f})=>f<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=o.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=o.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Nn.none:(o.transactions.length||this.dirty)&&(this.compositionDeco=function gKe(l,o){let a=Eue(l);if(!a)return Nn.none;let{from:c,to:u,node:h,text:d}=a,f=o.mapPos(c,1),p=Math.max(f,o.mapPos(u,-1)),{state:g}=l,m=3==h.nodeType?h.nodeValue:new Tue([],g).readRange(h.firstChild,null).text;if(p-f<m.length)if(g.doc.sliceString(f,Math.min(g.doc.length,f+m.length),"\uffff")==m)p=f+m.length;else{if(g.doc.sliceString(Math.max(0,p-m.length),p,"\uffff")!=m)return Nn.none;f=p-m.length}else if(g.doc.sliceString(f,p,"\uffff")!=m)return Nn.none;let v=Yr.get(h);return v instanceof iue?v=v.widget.topView:v&&(v.parent=null),Nn.set(Nn.replace({widget:new mKe(h,d,v),inclusive:!0}).range(f,p))}(this.view,o.changes)),(Fn.ie||Fn.chrome)&&!this.compositionDeco.size&&o&&o.state.doc.lines!=o.startState.doc.lines&&(this.forceSelection=!0);let h=function _Ke(l,o,a){let c=new yKe;return bs.compare(l,o,a,c),c.changes}(this.decorations,this.updateDeco(),o.changes);return a=dd.extendWithRanges(a,h),(0!=this.dirty||0!=a.length)&&(this.updateInner(a,o.startState.doc.length),o.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(o,a){this.view.viewState.mustMeasureContent=!0,this.updateChildren(o,a);let{observer:c}=this.view;c.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let h=Fn.chrome||Fn.ios?{node:c.selectionRange.focusNode,written:!1}:void 0;this.sync(h),this.dirty=0,h&&(h.written||c.selectionRange.focusNode!=h.node)&&(this.forceSelection=!0),this.dom.style.height=""});let u=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let h of this.children)h instanceof v0&&h.widget instanceof Mue&&u.push(h.dom);c.updateGaps(u)}updateChildren(o,a){let c=this.childCursor(a);for(let u=o.length-1;;u--){let h=u>=0?o[u]:null;if(!h)break;let{fromA:d,toA:f,fromB:p,toB:g}=h,{content:m,breakAtStart:v,openStart:y,openEnd:_}=wz.build(this.view.state.doc,p,g,this.decorations,this.dynamicDecorationMap),{i:b,off:C}=c.findPos(f,1),{i:x,off:S}=c.findPos(d,-1);Xce(this,x,S,b,C,m,v,y,_)}}updateSelection(o=!1,a=!1){if((o||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!a&&!this.mayControlSelection())return;let c=this.forceSelection;this.forceSelection=!1;let u=this.view.state.selection.main,h=this.domAtPos(u.anchor),d=u.empty?h:this.domAtPos(u.head);if(Fn.gecko&&u.empty&&function pKe(l){return 1==l.node.nodeType&&l.node.firstChild&&(0==l.offset||"false"==l.node.childNodes[l.offset-1].contentEditable)&&(l.offset==l.node.childNodes.length||"false"==l.node.childNodes[l.offset].contentEditable)}(h)){let p=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(p,h.node.childNodes[h.offset]||null)),h=d=new Da(p,0),c=!0}let f=this.view.observer.selectionRange;(c||!f.focusNode||!lE(h.node,h.offset,f.anchorNode,f.anchorOffset)||!lE(d.node,d.offset,f.focusNode,f.focusOffset))&&(this.view.observer.ignore(()=>{Fn.android&&Fn.chrome&&this.dom.contains(f.focusNode)&&function bKe(l,o){for(let a=l;a&&a!=o;a=a.assignedSlot||a.parentNode)if(1==a.nodeType&&"false"==a.contentEditable)return!0;return!1}(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=oE(this.view.root);if(p)if(u.empty){if(Fn.gecko){let g=function vKe(l,o){return 1!=l.nodeType?0:(o&&"false"==l.childNodes[o-1].contentEditable?1:0)|(o<l.childNodes.length&&"false"==l.childNodes[o].contentEditable?2:0)}(h.node,h.offset);if(g&&3!=g){let m=Aue(h.node,h.offset,1==g?1:-1);m&&(h=new Da(m,1==g?0:m.nodeValue.length))}}p.collapse(h.node,h.offset),null!=u.bidiLevel&&null!=f.cursorBidiLevel&&(f.cursorBidiLevel=u.bidiLevel)}else if(p.extend){p.collapse(h.node,h.offset);try{p.extend(d.node,d.offset)}catch(g){}}else{let g=document.createRange();u.anchor>u.head&&([h,d]=[d,h]),g.setEnd(d.node,d.offset),g.setStart(h.node,h.offset),p.removeAllRanges(),p.addRange(g)}}),this.view.observer.setSelectionRange(h,d)),this.impreciseAnchor=h.precise?null:new Da(f.anchorNode,f.anchorOffset),this.impreciseHead=d.precise?null:new Da(f.focusNode,f.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let o=this.view.state.selection.main,a=oE(this.view.root);if(!(a&&o.empty&&o.assoc&&a.modify))return;let c=cl.find(this,o.head);if(!c)return;let u=c.posAtStart;if(o.head==u||o.head==u+c.length)return;let h=this.coordsAt(o.head,-1),d=this.coordsAt(o.head,1);if(!h||!d||h.bottom>d.top)return;let f=this.domAtPos(o.head+o.assoc);a.collapse(f.node,f.offset),a.modify("move",o.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let o=this.view.root.activeElement;return o==this.dom||aE(this.dom,this.view.observer.selectionRange)&&!(o&&this.dom.contains(o))}nearest(o){for(let a=o;a;){let c=Yr.get(a);if(c&&c.rootView==this)return c;a=a.parentNode}return null}posFromDOM(o,a){let c=this.nearest(o);if(!c)throw new RangeError("Trying to find position for a DOM position outside of the document");return c.localPosFromDOM(o,a)+c.posAtStart}domAtPos(o){let{i:a,off:c}=this.childCursor().findPos(o,-1);for(;a<this.children.length-1;){let u=this.children[a];if(c<u.length||u instanceof cl)break;a++,c=0}return this.children[a].domAtPos(c)}coordsAt(o,a){for(let c=this.length,u=this.children.length-1;;u--){let h=this.children[u],d=c-h.breakAfter-h.length;if(o>d||o==d&&h.type!=$r.WidgetBefore&&h.type!=$r.WidgetAfter&&(!u||2==a||this.children[u-1].breakAfter||this.children[u-1].type==$r.WidgetBefore&&a>-2))return h.coordsAt(o-d,a);c=d}}measureVisibleLineHeights(o){let a=[],{from:c,to:u}=o,h=this.view.contentDOM.clientWidth,d=h>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,f=-1,p=this.view.textDirection==xs.LTR;for(let g=0,m=0;m<this.children.length;m++){let v=this.children[m],y=g+v.length;if(y>u)break;if(g>=c){let _=v.dom.getBoundingClientRect();if(a.push(_.height),d){let b=v.dom.lastChild,C=b?XS(b):[];if(C.length){let x=C[C.length-1],S=p?x.right-_.left:_.right-x.left;S>f&&(f=S,this.minWidth=h,this.minWidthFrom=g,this.minWidthTo=y)}}}g=y+v.breakAfter}return a}textDirectionAt(o){let{i:a}=this.childPos(o,1);return"rtl"==getComputedStyle(this.children[a].dom).direction?xs.RTL:xs.LTR}measureTextSize(){for(let u of this.children)if(u instanceof cl){let h=u.measureTextSize();if(h)return h}let a,c,o=document.createElement("div");return o.className="cm-line",o.style.width="99999px",o.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(o);let u=XS(o.firstChild)[0];a=o.getBoundingClientRect().height,c=u?u.width/27:7,o.remove()}),{lineHeight:a,charWidth:c}}childCursor(o=this.length){let a=this.children.length;return a&&(o-=this.children[--a].length),new Zce(this.children,o,a)}computeBlockGapDeco(){let o=[],a=this.view.viewState;for(let c=0,u=0;;u++){let h=u==a.viewports.length?null:a.viewports[u],d=h?h.from-1:this.length;if(d>c){let f=a.lineBlockAt(d).bottom-a.lineBlockAt(c).top;o.push(Nn.replace({widget:new Mue(f),block:!0,inclusive:!0,isBlockGap:!0}).range(c,d))}if(!h)break;c=h.to+1}return Nn.set(o)}updateDeco(){let o=this.view.state.facet(tw).map((a,c)=>(this.dynamicDecorationMap[c]="function"==typeof a)?a(this.view):a);for(let a=o.length;a<o.length+3;a++)this.dynamicDecorationMap[a]=!1;return this.decorations=[...o,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(o){let u,{range:a}=o,c=this.coordsAt(a.head,a.empty?a.assoc:a.head>a.anchor?-1:1);if(!c)return;!a.empty&&(u=this.coordsAt(a.anchor,a.anchor>a.head?-1:1))&&(c={left:Math.min(c.left,u.left),top:Math.min(c.top,u.top),right:Math.max(c.right,u.right),bottom:Math.max(c.bottom,u.bottom)});let h=0,d=0,f=0,p=0;for(let m of this.view.state.facet(_ue).map(v=>v(this.view)))if(m){let{left:v,right:y,top:_,bottom:b}=m;null!=v&&(h=Math.max(h,v)),null!=y&&(d=Math.max(d,y)),null!=_&&(f=Math.max(f,_)),null!=b&&(p=Math.max(p,b))}!function tKe(l,o,a,c,u,h,d,f){let p=l.ownerDocument,g=p.defaultView||window;for(let m=l;m;)if(1==m.nodeType){let v,y=m==p.body;if(y)v=eKe(g);else{if(m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let C=m.getBoundingClientRect();v={left:C.left,right:C.left+m.clientWidth,top:C.top,bottom:C.top+m.clientHeight}}let _=0,b=0;if("nearest"==u)o.top<v.top?(b=-(v.top-o.top+d),a>0&&o.bottom>v.bottom+b&&(b=o.bottom-v.bottom+b+d)):o.bottom>v.bottom&&(b=o.bottom-v.bottom+d,a<0&&o.top-b<v.top&&(b=-(v.top+b-o.top+d)));else{let C=o.bottom-o.top,x=v.bottom-v.top;b=("center"==u&&C<=x?o.top+C/2-x/2:"start"==u||"center"==u&&a<0?o.top-d:o.bottom-x+d)-v.top}if("nearest"==c?o.left<v.left?(_=-(v.left-o.left+h),a>0&&o.right>v.right+_&&(_=o.right-v.right+_+h)):o.right>v.right&&(_=o.right-v.right+h,a<0&&o.left<v.left+_&&(_=-(v.left+_-o.left+h))):_=("center"==c?o.left+(o.right-o.left)/2-(v.right-v.left)/2:"start"==c==f?o.left-h:o.right-(v.right-v.left)+h)-v.left,_||b)if(y)g.scrollBy(_,b);else{let C=0,x=0;if(b){let S=m.scrollTop;m.scrollTop+=b,x=m.scrollTop-S}if(_){let S=m.scrollLeft;m.scrollLeft+=_,C=m.scrollLeft-S}o={left:o.left-C,top:o.top-x,right:o.right-C,bottom:o.bottom-x},C&&Math.abs(C-_)<1&&(c="nearest"),x&&Math.abs(x-b)<1&&(u="nearest")}if(y)break;m=m.assignedSlot||m.parentNode}else{if(11!=m.nodeType)break;m=m.host}}(this.view.scrollDOM,{left:c.left-h,top:c.top-f,right:c.right+d,bottom:c.bottom+p},a.head<a.anchor?-1:1,o.x,o.y,o.xMargin,o.yMargin,this.view.textDirection==xs.LTR)}}class Mue extends Af{constructor(o){super(),this.height=o}toDOM(){let o=document.createElement("div");return this.updateDOM(o),o}eq(o){return o.height==this.height}updateDOM(o){return o.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Eue(l){let o=l.observer.selectionRange,a=o.focusNode&&Aue(o.focusNode,o.focusOffset,0);if(!a)return null;let c=l.docView.nearest(a);if(!c)return null;if(c instanceof cl){let u=a;for(;u.parentNode!=c.dom;)u=u.parentNode;let h=u.previousSibling;for(;h&&!Yr.get(h);)h=h.previousSibling;let d=h?Yr.get(h).posAtEnd:c.posAtStart;return{from:d,to:d,node:u,text:a}}{for(;;){let{parent:h}=c;if(!h)return null;if(h instanceof cl)break;c=h}let u=c.posAtStart;return{from:u,to:u+c.length,node:c.dom,text:a}}}class mKe extends Af{constructor(o,a,c){super(),this.top=o,this.text=a,this.topView=c}eq(o){return this.top==o.top&&this.text==o.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return iue}}function Aue(l,o,a){for(;;){if(3==l.nodeType)return l;if(1==l.nodeType&&o>0&&a<=0)o=YS(l=l.childNodes[o-1]);else{if(!(1==l.nodeType&&o<l.childNodes.length&&a>=0))return null;l=l.childNodes[o],o=0}}}class yKe{constructor(){this.changes=[]}compareRange(o,a){Sz(o,a,this.changes)}comparePoint(o,a){Sz(o,a,this.changes)}}function CKe(l,o){return o.left>l?o.left-l:Math.max(0,l-o.right)}function SKe(l,o){return o.top>l?o.top-l:Math.max(0,l-o.bottom)}function Ez(l,o){return l.top<o.bottom-1&&l.bottom>o.top+1}function Iue(l,o){return o<l.top?{top:o,left:l.left,right:l.right,bottom:l.bottom}:l}function Pue(l,o){return o>l.bottom?{top:l.top,left:l.left,right:l.right,bottom:o}:l}function Az(l,o,a){let c,u,h,d,p,g,m,v,f=!1;for(let b=l.firstChild;b;b=b.nextSibling){let C=XS(b);for(let x=0;x<C.length;x++){let S=C[x];u&&Ez(u,S)&&(S=Iue(Pue(S,u.bottom),u.top));let w=CKe(o,S),O=SKe(a,S);if(0==w&&0==O)return 3==b.nodeType?Rue(b,o,a):Az(b,o,a);(!c||d>O||d==O&&h>w)&&(c=b,u=S,h=w,d=O,f=!w||(w>0?x<C.length-1:x>0)),0==w?a>S.bottom&&(!m||m.bottom<S.bottom)?(p=b,m=S):a<S.top&&(!v||v.top>S.top)&&(g=b,v=S):m&&Ez(m,S)?m=Pue(m,S.bottom):v&&Ez(v,S)&&(v=Iue(v,S.top))}}if(m&&m.bottom>=a?(c=p,u=m):v&&v.top<=a&&(c=g,u=v),!c)return{node:l,offset:0};let y=Math.max(u.left,Math.min(u.right,o));return 3==c.nodeType?Rue(c,y,a):f&&"false"!=c.contentEditable?Az(c,y,a):{node:l,offset:Array.prototype.indexOf.call(l.childNodes,c)+(o>=(u.left+u.right)/2?1:0)}}function Rue(l,o,a){let c=l.nodeValue.length,u=-1,h=1e9,d=0;for(let f=0;f<c;f++){let p=U_(l,f,f+1).getClientRects();for(let g=0;g<p.length;g++){let m=p[g];if(m.top==m.bottom)continue;d||(d=o-m.left);let v=(m.top>a?m.top-a:a-m.bottom)-1;if(m.left-1<=o&&m.right+1>=o&&v<h){let y=o>=(m.left+m.right)/2,_=y;if((Fn.chrome||Fn.gecko)&&U_(l,f).getBoundingClientRect().left==m.right&&(_=!y),v<=0)return{node:l,offset:f+(_?1:0)};u=f+(_?1:0),h=v}}}return{node:l,offset:u>-1?u:d>0?l.nodeValue.length:0}}function Fue(l,{x:o,y:a},c,u=-1){var h;let p,d=l.contentDOM.getBoundingClientRect(),f=d.top+l.viewState.paddingTop,{docHeight:g}=l.viewState,m=a-f;if(m<0)return 0;if(m>g)return l.state.doc.length;for(let S=l.defaultLineHeight/2,w=!1;p=l.elementAtHeight(m),p.type!=$r.Text;)for(;m=u>0?p.bottom+S:p.top-S,!(m>=0&&m<=g);){if(w)return c?null:0;w=!0,u=-u}a=f+m;let v=p.from;if(v<l.viewport.from)return 0==l.viewport.from?0:c?null:Nue(l,d,p,o,a);if(v>l.viewport.to)return l.viewport.to==l.state.doc.length?l.state.doc.length:c?null:Nue(l,d,p,o,a);let y=l.dom.ownerDocument,_=l.root.elementFromPoint?l.root:y,b=_.elementFromPoint(o,a);b&&!l.contentDOM.contains(b)&&(b=null),b||(o=Math.max(d.left+1,Math.min(d.right-1,o)),b=_.elementFromPoint(o,a),b&&!l.contentDOM.contains(b)&&(b=null));let C,x=-1;if(b&&0!=(null===(h=l.docView.nearest(b))||void 0===h?void 0:h.isEditable))if(y.caretPositionFromPoint){let S=y.caretPositionFromPoint(o,a);S&&({offsetNode:C,offset:x}=S)}else if(y.caretRangeFromPoint){let S=y.caretRangeFromPoint(o,a);S&&(({startContainer:C,startOffset:x}=S),(!l.contentDOM.contains(C)||Fn.safari&&function wKe(l,o,a){let c;if(3!=l.nodeType||o!=(c=l.nodeValue.length))return!1;for(let u=l.nextSibling;u;u=u.nextSibling)if(1!=u.nodeType||"BR"!=u.nodeName)return!1;return U_(l,c-1,c).getBoundingClientRect().left>a}(C,x,o)||Fn.chrome&&function TKe(l,o,a){if(0!=o)return!1;for(let u=l;;){let h=u.parentNode;if(!h||1!=h.nodeType||h.firstChild!=u)return!1;if(h.classList.contains("cm-line"))break;u=h}return a-(1==l.nodeType?l.getBoundingClientRect():U_(l,0,Math.max(l.nodeValue.length,1)).getBoundingClientRect()).left>5}(C,x,o))&&(C=void 0))}if(!C||!l.docView.dom.contains(C)){let S=cl.find(l.docView,v);if(!S)return m>p.top+p.height/2?p.to:p.from;({node:C,offset:x}=Az(S.dom,o,a))}return l.docView.posFromDOM(C,x)}function Nue(l,o,a,c,u){let h=Math.round((c-o.left)*l.defaultCharacterWidth);l.lineWrapping&&a.height>1.5*l.defaultLineHeight&&(h+=Math.floor((u-a.top)/l.defaultLineHeight)*l.viewState.heightOracle.lineLength);let d=l.state.sliceDoc(a.from,a.to);return a.from+cz(d,h,l.state.tabSize)}function Lue(l,o,a,c){let u=l.state.doc.lineAt(o.head),h=l.bidiSpans(u),d=l.textDirectionAt(u.from);for(let f=o,p=null;;){let g=wue(u,h,d,f,a),m=Sue;if(!g){if(u.number==(a?l.state.doc.lines:1))return f;m="\n",u=l.state.doc.line(u.number+(a?1:-1)),h=l.bidiSpans(u),g=Dt.cursor(a?u.from:u.to)}if(p){if(!p(m))return f}else{if(!c)return g;p=c(m)}f=g}}function Iz(l,o,a){let c=l.state.facet(yue).map(u=>u(l));for(;;){let u=!1;for(let h of c)h.between(a.from-1,a.from+1,(d,f,p)=>{a.from>d&&a.from<f&&(a=o.head>a.from?Dt.cursor(d,1):Dt.cursor(f,-1),u=!0)});if(!u)return a}}class MKe{constructor(o){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let a in Wo){let c=Wo[a];o.contentDOM.addEventListener(a,u=>{!zue(o,u)||this.ignoreDuringComposition(u)||"keydown"==a&&this.keydown(o,u)||(this.mustFlushObserver(u)&&o.observer.forceFlush(),this.runCustomHandlers(a,o,u)?u.preventDefault():c(o,u))},Pz[a]),this.registeredEvents.push(a)}Fn.chrome&&102==Fn.chrome_version&&o.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?o.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,o.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=o.hasFocus,Fn.safari&&o.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(o){this.lastSelectionOrigin=o,this.lastSelectionTime=Date.now()}ensureHandlers(o,a){var c;let u;this.customHandlers=[];for(let h of a)if(u=null===(c=h.update(o).spec)||void 0===c?void 0:c.domEventHandlers){this.customHandlers.push({plugin:h.value,handlers:u});for(let d in u)this.registeredEvents.indexOf(d)<0&&"scroll"!=d&&(this.registeredEvents.push(d),o.contentDOM.addEventListener(d,f=>{!zue(o,f)||this.runCustomHandlers(d,o,f)&&f.preventDefault()}))}}runCustomHandlers(o,a,c){for(let u of this.customHandlers){let h=u.handlers[o];if(h)try{if(h.call(u.plugin,c,a)||c.defaultPrevented)return!0}catch(d){Sc(a.state,d)}}return!1}runScrollHandlers(o,a){this.lastScrollTop=o.scrollDOM.scrollTop,this.lastScrollLeft=o.scrollDOM.scrollLeft;for(let c of this.customHandlers){let u=c.handlers.scroll;if(u)try{u.call(c.plugin,a,o)}catch(h){Sc(o.state,h)}}}keydown(o,a){if(this.lastKeyCode=a.keyCode,this.lastKeyTime=Date.now(),9==a.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(Fn.android&&Fn.chrome&&!a.synthetic&&(13==a.keyCode||8==a.keyCode))return o.observer.delayAndroidKey(a.key,a.keyCode),!0;let c;return!(!Fn.ios||a.synthetic||a.altKey||a.metaKey||!((c=Bue.find(u=>u.keyCode==a.keyCode))&&!a.ctrlKey||EKe.indexOf(a.key)>-1&&a.ctrlKey&&!a.shiftKey)||(this.pendingIOSKey=c||a,setTimeout(()=>this.flushIOSKey(o),250),0))}flushIOSKey(o){let a=this.pendingIOSKey;return!!a&&(this.pendingIOSKey=void 0,KS(o.contentDOM,a.key,a.keyCode))}ignoreDuringComposition(o){return!!/^key/.test(o.type)&&(this.composing>0||!!(Fn.safari&&!Fn.ios&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(o){return"keydown"==o.type&&229!=o.keyCode}startMouseSelection(o){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=o}update(o){this.mouseSelection&&this.mouseSelection.update(o),o.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Bue=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EKe="dthko",Vue=[16,17,18,20,91,92,224,225];class AKe{constructor(o,a,c,u){this.view=o,this.style=c,this.mustSelect=u,this.lastEvent=a;let h=o.contentDOM.ownerDocument;h.addEventListener("mousemove",this.move=this.move.bind(this)),h.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=a.shiftKey,this.multiple=o.state.facet(ll.allowMultipleSelections)&&function IKe(l,o){let a=l.state.facet(uue);return a.length?a[0](o):Fn.mac?o.metaKey:o.ctrlKey}(o,a),this.dragMove=function PKe(l,o){let a=l.state.facet(hue);return a.length?a[0](o):Fn.mac?!o.altKey:!o.ctrlKey}(o,a),this.dragging=!(!function RKe(l,o){let{main:a}=l.state.selection;if(a.empty)return!1;let c=oE(l.root);if(!c||0==c.rangeCount)return!0;let u=c.getRangeAt(0).getClientRects();for(let h=0;h<u.length;h++){let d=u[h];if(d.left<=o.clientX&&d.right>=o.clientX&&d.top<=o.clientY&&d.bottom>=o.clientY)return!0}return!1}(o,a)||1!=Xue(a))&&null,!1===this.dragging&&(a.preventDefault(),this.select(a))}move(o){if(0==o.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=o)}up(o){null==this.dragging&&this.select(this.lastEvent),this.dragging||o.preventDefault(),this.destroy()}destroy(){let o=this.view.contentDOM.ownerDocument;o.removeEventListener("mousemove",this.move),o.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(o){let a=this.style.get(o,this.extend,this.multiple);(this.mustSelect||!a.eq(this.view.state.selection)||a.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:a,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(o){o.docChanged&&this.dragging&&(this.dragging=this.dragging.map(o.changes)),this.style.update(o)&&setTimeout(()=>this.select(this.lastEvent),20)}}function zue(l,o){if(!o.bubbles)return!0;if(o.defaultPrevented)return!1;for(let c,a=o.target;a!=l.contentDOM;a=a.parentNode)if(!a||11==a.nodeType||(c=Yr.get(a))&&c.ignoreEvent(o))return!1;return!0}const Wo=Object.create(null),Pz=Object.create(null),Uue=Fn.ie&&Fn.ie_version<15||Fn.ios&&Fn.webkit_version<604;function Hue(l,o){let c,{state:a}=l,u=1,h=a.toText(o),d=h.lines==a.selection.ranges.length;if(null!=Rz&&a.selection.ranges.every(p=>p.empty)&&Rz==h.toString()){let p=-1;c=a.changeByRange(g=>{let m=a.doc.lineAt(g.from);if(m.from==p)return{range:g};p=m.from;let v=a.toText((d?h.line(u++).text:o)+a.lineBreak);return{changes:{from:m.from,insert:v},range:Dt.cursor(g.from+v.length)}})}else c=d?a.changeByRange(p=>{let g=h.line(u++);return{changes:{from:p.from,to:p.to,insert:g.text},range:Dt.cursor(p.from+g.length)}}):a.replaceSelection(h);l.dispatch(c,{userEvent:"input.paste",scrollIntoView:!0})}function $ue(l,o,a,c){if(1==c)return Dt.cursor(o,a);if(2==c)return function xKe(l,o,a=1){let c=l.charCategorizer(o),u=l.doc.lineAt(o),h=o-u.from;if(0==u.length)return Dt.cursor(o);0==h?a=1:h==u.length&&(a=-1);let d=h,f=h;a<0?d=al(u.text,h,!1):f=al(u.text,h);let p=c(u.text.slice(d,f));for(;d>0;){let g=al(u.text,d,!1);if(c(u.text.slice(g,d))!=p)break;d=g}for(;f<u.length;){let g=al(u.text,f);if(c(u.text.slice(f,g))!=p)break;f=g}return Dt.range(d+u.from,f+u.from)}(l.state,o,a);{let u=cl.find(l.docView,o),h=l.state.doc.lineAt(u?u.posAtEnd:o),f=u?u.posAtEnd:h.to;return f<l.state.doc.length&&f==h.to&&f++,Dt.range(u?u.posAtStart:h.from,f)}}Wo.keydown=(l,o)=>{l.inputState.setSelectionOrigin("select"),27==o.keyCode?l.inputState.lastEscPress=Date.now():Vue.indexOf(o.keyCode)<0&&(l.inputState.lastEscPress=0)},Wo.touchstart=(l,o)=>{l.inputState.lastTouchTime=Date.now(),l.inputState.setSelectionOrigin("select.pointer")},Wo.touchmove=l=>{l.inputState.setSelectionOrigin("select.pointer")},Pz.touchstart=Pz.touchmove={passive:!0},Wo.mousedown=(l,o)=>{if(l.observer.flush(),l.inputState.lastTouchTime>Date.now()-2e3)return;let a=null;for(let c of l.state.facet(due))if(a=c(l,o),a)break;if(!a&&0==o.button&&(a=function BKe(l,o){let a=Que(l,o),c=Xue(o),u=l.state.selection,h=a,d=o;return{update(f){f.docChanged&&(a.pos=f.changes.mapPos(a.pos),u=u.map(f.changes),d=null)},get(f,p,g){let m;d&&f.clientX==d.clientX&&f.clientY==d.clientY?m=h:(m=h=Que(l,f),d=f);let v=$ue(l,m.pos,m.bias,c);if(a.pos!=m.pos&&!p){let y=$ue(l,a.pos,a.bias,c),_=Math.min(y.from,v.from),b=Math.max(y.to,v.to);v=_<v.from?Dt.range(_,b):Dt.range(b,_)}return p?u.replaceRange(u.main.extend(v.from,v.to)):g&&u.ranges.length>1&&u.ranges.some(y=>y.eq(v))?function VKe(l,o){for(let a=0;;a++)if(l.ranges[a].eq(o))return Dt.create(l.ranges.slice(0,a).concat(l.ranges.slice(a+1)),l.mainIndex==a?0:l.mainIndex-(l.mainIndex>a?1:0))}(u,v):g?u.addRange(v):Dt.create([v])}}}(l,o)),a){let c=l.root.activeElement!=l.contentDOM;c&&l.observer.ignore(()=>Gce(l.contentDOM)),l.inputState.startMouseSelection(new AKe(l,o,a,c))}};let Wue=(l,o)=>l>=o.top&&l<=o.bottom,Gue=(l,o,a)=>Wue(o,a)&&l>=a.left&&l<=a.right;function NKe(l,o,a,c){let u=cl.find(l.docView,o);if(!u)return 1;let h=o-u.posAtStart;if(0==h)return 1;if(h==u.length)return-1;let d=u.coordsAt(h,-1);if(d&&Gue(a,c,d))return-1;let f=u.coordsAt(h,1);return f&&Gue(a,c,f)?1:d&&Wue(c,d)?-1:1}function Que(l,o){let a=l.posAtCoords({x:o.clientX,y:o.clientY},!1);return{pos:a,bias:NKe(l,a,o.clientX,o.clientY)}}const LKe=Fn.ie&&Fn.ie_version<=11;let jue=null,que=0,Zue=0;function Xue(l){if(!LKe)return l.detail;let o=jue,a=Zue;return jue=l,Zue=Date.now(),que=!o||a>Date.now()-400&&Math.abs(o.clientX-l.clientX)<2&&Math.abs(o.clientY-l.clientY)<2?(que+1)%3:1}function Yue(l,o,a,c){if(!a)return;let u=l.posAtCoords({x:o.clientX,y:o.clientY},!1);o.preventDefault();let{mouseSelection:h}=l.inputState,d=c&&h&&h.dragging&&h.dragMove?{from:h.dragging.from,to:h.dragging.to}:null,f={from:u,insert:a},p=l.state.changes(d?[d,f]:f);l.focus(),l.dispatch({changes:p,selection:{anchor:p.mapPos(u,-1),head:p.mapPos(u,1)},userEvent:d?"move.drop":"input.drop"})}Wo.dragstart=(l,o)=>{let{selection:{main:a}}=l.state,{mouseSelection:c}=l.inputState;c&&(c.dragging=a),o.dataTransfer&&(o.dataTransfer.setData("Text",l.state.sliceDoc(a.from,a.to)),o.dataTransfer.effectAllowed="copyMove")},Wo.drop=(l,o)=>{if(!o.dataTransfer)return;if(l.state.readOnly)return o.preventDefault();let a=o.dataTransfer.files;if(a&&a.length){o.preventDefault();let c=Array(a.length),u=0,h=()=>{++u==a.length&&Yue(l,o,c.filter(d=>null!=d).join(l.state.lineBreak),!1)};for(let d=0;d<a.length;d++){let f=new FileReader;f.onerror=h,f.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(f.result)||(c[d]=f.result),h()},f.readAsText(a[d])}}else Yue(l,o,o.dataTransfer.getData("Text"),!0)},Wo.paste=(l,o)=>{if(l.state.readOnly)return o.preventDefault();l.observer.flush();let a=Uue?null:o.clipboardData;a?(Hue(l,a.getData("text/plain")),o.preventDefault()):function FKe(l){let o=l.dom.parentNode;if(!o)return;let a=o.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus(),setTimeout(()=>{l.focus(),a.remove(),Hue(l,a.value)},50)}(l)};let Rz=null;function Kue(l){setTimeout(()=>{l.hasFocus!=l.inputState.notifiedFocused&&l.update([])},10)}Wo.copy=Wo.cut=(l,o)=>{let{text:a,ranges:c,linewise:u}=function UKe(l){let o=[],a=[],c=!1;for(let u of l.selection.ranges)u.empty||(o.push(l.sliceDoc(u.from,u.to)),a.push(u));if(!o.length){let u=-1;for(let{from:h}of l.selection.ranges){let d=l.doc.lineAt(h);d.number>u&&(o.push(d.text),a.push({from:d.from,to:Math.min(l.doc.length,d.to+1)})),u=d.number}c=!0}return{text:o.join(l.lineBreak),ranges:a,linewise:c}}(l.state);if(!a&&!u)return;Rz=u?a:null;let h=Uue?null:o.clipboardData;h?(o.preventDefault(),h.clearData(),h.setData("text/plain",a)):function zKe(l,o){let a=l.dom.parentNode;if(!a)return;let c=a.appendChild(document.createElement("textarea"));c.style.cssText="position: fixed; left: -10000px; top: 10px",c.value=o,c.focus(),c.selectionEnd=o.length,c.selectionStart=0,setTimeout(()=>{c.remove(),l.focus()},50)}(l,a),"cut"==o.type&&!l.state.readOnly&&l.dispatch({changes:c,scrollIntoView:!0,userEvent:"delete.cut"})},Wo.focus=l=>{l.inputState.lastFocusTime=Date.now(),!l.scrollDOM.scrollTop&&(l.inputState.lastScrollTop||l.inputState.lastScrollLeft)&&(l.scrollDOM.scrollTop=l.inputState.lastScrollTop,l.scrollDOM.scrollLeft=l.inputState.lastScrollLeft),Kue(l)},Wo.blur=l=>{l.observer.clearSelectionRange(),Kue(l)},Wo.compositionstart=Wo.compositionupdate=l=>{null==l.inputState.compositionFirstChange&&(l.inputState.compositionFirstChange=!0),l.inputState.composing<0&&(l.inputState.composing=0)},Wo.compositionend=l=>{l.inputState.composing=-1,l.inputState.compositionEndedAt=Date.now(),l.inputState.compositionFirstChange=null,Fn.chrome&&Fn.android&&l.observer.flushSoon(),setTimeout(()=>{l.inputState.composing<0&&l.docView.compositionDeco.size&&l.update([])},50)},Wo.contextmenu=l=>{l.inputState.lastContextMenu=Date.now()},Wo.beforeinput=(l,o)=>{var a;let c;if(Fn.chrome&&Fn.android&&(c=Bue.find(u=>u.inputType==o.inputType))&&(l.observer.delayAndroidKey(c.key,c.keyCode),"Backspace"==c.key||"Delete"==c.key)){let u=(null===(a=window.visualViewport)||void 0===a?void 0:a.height)||0;setTimeout(()=>{var h;((null===(h=window.visualViewport)||void 0===h?void 0:h.height)||0)>u+10&&l.hasFocus&&(l.contentDOM.blur(),l.focus())},100)}};const Jue=["pre-wrap","normal","pre-line","break-spaces"];class ehe{constructor(){this.doc=xr.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(o,a){let c=this.doc.lineAt(a).number-this.doc.lineAt(o).number+1;return this.lineWrapping&&(c+=Math.ceil((a-o-c*this.lineLength*.5)/this.lineLength)),this.lineHeight*c}heightForLine(o){return this.lineWrapping?(1+Math.max(0,Math.ceil((o-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(o){return this.doc=o,this}mustRefreshForWrapping(o){return Jue.indexOf(o)>-1!=this.lineWrapping}mustRefreshForHeights(o){let a=!1;for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(10*u)]||(a=!0,this.heightSamples[Math.floor(10*u)]=!0)}return a}refresh(o,a,c,u,h){let d=Jue.indexOf(o)>-1,f=Math.round(a)!=Math.round(this.lineHeight)||this.lineWrapping!=d;if(this.lineWrapping=d,this.lineHeight=a,this.charWidth=c,this.lineLength=u,f){this.heightSamples={};for(let p=0;p<h.length;p++){let g=h[p];g<0?p++:this.heightSamples[Math.floor(10*g)]=!0}}return f}}class the{constructor(o,a){this.from=o,this.heights=a,this.index=0}get more(){return this.index<this.heights.length}}class cg{constructor(o,a,c,u,h){this.from=o,this.length=a,this.top=c,this.height=u,this.type=h}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(o){let a=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(o.type)?o.type:[o]);return new cg(this.from,this.length+o.length,this.top,this.height+o.height,a)}}var Wr=function(l){return l[l.ByPos=0]="ByPos",l[l.ByHeight=1]="ByHeight",l[l.ByPosNoHeight=2]="ByPosNoHeight",l}(Wr||(Wr={}));const vE=.001;class ul{constructor(o,a,c=2){this.length=o,this.height=a,this.flags=c}get outdated(){return(2&this.flags)>0}set outdated(o){this.flags=(o?2:0)|-3&this.flags}setHeight(o,a){this.height!=a&&(Math.abs(this.height-a)>vE&&(o.heightChanged=!0),this.height=a)}replace(o,a,c){return ul.of(c)}decomposeLeft(o,a){a.push(this)}decomposeRight(o,a){a.push(this)}applyChanges(o,a,c,u){let h=this;for(let d=u.length-1;d>=0;d--){let{fromA:f,toA:p,fromB:g,toB:m}=u[d],v=h.lineAt(f,Wr.ByPosNoHeight,a,0,0),y=v.to>=p?v:h.lineAt(p,Wr.ByPosNoHeight,a,0,0);for(m+=y.to-p,p=y.to;d>0&&v.from<=u[d-1].toA;)f=u[d-1].fromA,g=u[d-1].fromB,d--,f<v.from&&(v=h.lineAt(f,Wr.ByPosNoHeight,a,0,0));g+=v.from-f,f=v.from;let _=Fz.build(c,o,g,m);h=h.replace(f,p,_)}return h.updateHeight(c,0)}static empty(){return new wc(0,0)}static of(o){if(1==o.length)return o[0];let a=0,c=o.length,u=0,h=0;for(;;)if(a==c)if(u>2*h){let f=o[a-1];f.break?o.splice(--a,1,f.left,null,f.right):o.splice(--a,1,f.left,f.right),c+=1+f.break,u-=f.size}else{if(!(h>2*u))break;{let f=o[c];f.break?o.splice(c,1,f.left,null,f.right):o.splice(c,1,f.left,f.right),c+=2+f.break,h-=f.size}}else if(u<h){let f=o[a++];f&&(u+=f.size)}else{let f=o[--c];f&&(h+=f.size)}let d=0;return null==o[a-1]?(d=1,a--):null==o[a]&&(d=1,c++),new HKe(ul.of(o.slice(0,a)),d,ul.of(o.slice(c)))}}ul.prototype.size=1;class nhe extends ul{constructor(o,a,c){super(o,a),this.type=c}blockAt(o,a,c,u){return new cg(u,this.length,c,this.height,this.type)}lineAt(o,a,c,u,h){return this.blockAt(0,c,u,h)}forEachLine(o,a,c,u,h,d){o<=h+this.length&&a>=h&&d(this.blockAt(0,c,u,h))}updateHeight(o,a=0,c=!1,u){return u&&u.from<=a&&u.more&&this.setHeight(o,u.heights[u.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class wc extends nhe{constructor(o,a){super(o,a,$r.Text),this.collapsed=0,this.widgetHeight=0}replace(o,a,c){let u=c[0];return 1==c.length&&(u instanceof wc||u instanceof oa&&4&u.flags)&&Math.abs(this.length-u.length)<10?(u instanceof oa?u=new wc(u.length,this.height):u.height=this.height,this.outdated||(u.outdated=!1),u):ul.of(c)}updateHeight(o,a=0,c=!1,u){return u&&u.from<=a&&u.more?this.setHeight(o,u.heights[u.index++]):(c||this.outdated)&&this.setHeight(o,Math.max(this.widgetHeight,o.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class oa extends ul{constructor(o){super(o,0)}lines(o,a){let c=o.lineAt(a).number,u=o.lineAt(a+this.length).number;return{firstLine:c,lastLine:u,lineHeight:this.height/(u-c+1)}}blockAt(o,a,c,u){let{firstLine:h,lastLine:d,lineHeight:f}=this.lines(a,u),p=Math.max(0,Math.min(d-h,Math.floor((o-c)/f))),{from:g,length:m}=a.line(h+p);return new cg(g,m,c+f*p,f,$r.Text)}lineAt(o,a,c,u,h){if(a==Wr.ByHeight)return this.blockAt(o,c,u,h);if(a==Wr.ByPosNoHeight){let{from:v,to:y}=c.lineAt(o);return new cg(v,y-v,0,0,$r.Text)}let{firstLine:d,lineHeight:f}=this.lines(c,h),{from:p,length:g,number:m}=c.lineAt(o);return new cg(p,g,u+f*(m-d),f,$r.Text)}forEachLine(o,a,c,u,h,d){let{firstLine:f,lineHeight:p}=this.lines(c,h);for(let g=Math.max(o,h),m=Math.min(h+this.length,a);g<=m;){let v=c.lineAt(g);g==o&&(u+=p*(v.number-f)),d(new cg(v.from,v.length,u,p,$r.Text)),u+=p,g=v.to+1}}replace(o,a,c){let u=this.length-a;if(u>0){let h=c[c.length-1];h instanceof oa?c[c.length-1]=new oa(h.length+u):c.push(null,new oa(u-1))}if(o>0){let h=c[0];h instanceof oa?c[0]=new oa(o+h.length):c.unshift(new oa(o-1),null)}return ul.of(c)}decomposeLeft(o,a){a.push(new oa(o-1),null)}decomposeRight(o,a){a.push(null,new oa(this.length-o-1))}updateHeight(o,a=0,c=!1,u){let h=a+this.length;if(u&&u.from<=a+this.length&&u.more){let d=[],f=Math.max(a,u.from),p=-1,g=o.heightChanged;for(u.from>a&&d.push(new oa(u.from-a-1).updateHeight(o,a));f<=h&&u.more;){let v=o.doc.lineAt(f).length;d.length&&d.push(null);let y=u.heights[u.index++];-1==p?p=y:Math.abs(y-p)>=vE&&(p=-2);let _=new wc(v,y);_.outdated=!1,d.push(_),f+=v+1}f<=h&&d.push(null,new oa(h-f).updateHeight(o,f));let m=ul.of(d);return o.heightChanged=g||p<0||Math.abs(m.height-this.height)>=vE||Math.abs(p-this.lines(o.doc,a).lineHeight)>=vE,m}return(c||this.outdated)&&(this.setHeight(o,o.heightForGap(a,a+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class HKe extends ul{constructor(o,a,c){super(o.length+a+c.length,o.height+c.height,a|(o.outdated||c.outdated?2:0)),this.left=o,this.right=c,this.size=o.size+c.size}get break(){return 1&this.flags}blockAt(o,a,c,u){let h=c+this.left.height;return o<h?this.left.blockAt(o,a,c,u):this.right.blockAt(o,a,h,u+this.left.length+this.break)}lineAt(o,a,c,u,h){let d=u+this.left.height,f=h+this.left.length+this.break,p=a==Wr.ByHeight?o<d:o<f,g=p?this.left.lineAt(o,a,c,u,h):this.right.lineAt(o,a,c,d,f);if(this.break||(p?g.to<f:g.from>f))return g;let m=a==Wr.ByPosNoHeight?Wr.ByPosNoHeight:Wr.ByPos;return p?g.join(this.right.lineAt(f,m,c,d,f)):this.left.lineAt(f,m,c,u,h).join(g)}forEachLine(o,a,c,u,h,d){let f=u+this.left.height,p=h+this.left.length+this.break;if(this.break)o<p&&this.left.forEachLine(o,a,c,u,h,d),a>=p&&this.right.forEachLine(o,a,c,f,p,d);else{let g=this.lineAt(p,Wr.ByPos,c,u,h);o<g.from&&this.left.forEachLine(o,g.from-1,c,u,h,d),g.to>=o&&g.from<=a&&d(g),a>g.to&&this.right.forEachLine(g.to+1,a,c,f,p,d)}}replace(o,a,c){let u=this.left.length+this.break;if(a<u)return this.balanced(this.left.replace(o,a,c),this.right);if(o>this.left.length)return this.balanced(this.left,this.right.replace(o-u,a-u,c));let h=[];o>0&&this.decomposeLeft(o,h);let d=h.length;for(let f of c)h.push(f);if(o>0&&ihe(h,d-1),a<this.length){let f=h.length;this.decomposeRight(a,h),ihe(h,f)}return ul.of(h)}decomposeLeft(o,a){let c=this.left.length;if(o<=c)return this.left.decomposeLeft(o,a);a.push(this.left),this.break&&(c++,o>=c&&a.push(null)),o>c&&this.right.decomposeLeft(o-c,a)}decomposeRight(o,a){let c=this.left.length,u=c+this.break;if(o>=u)return this.right.decomposeRight(o-u,a);o<c&&this.left.decomposeRight(o,a),this.break&&o<u&&a.push(null),a.push(this.right)}balanced(o,a){return o.size>2*a.size||a.size>2*o.size?ul.of(this.break?[o,null,a]:[o,a]):(this.left=o,this.right=a,this.height=o.height+a.height,this.outdated=o.outdated||a.outdated,this.size=o.size+a.size,this.length=o.length+this.break+a.length,this)}updateHeight(o,a=0,c=!1,u){let{left:h,right:d}=this,f=a+h.length+this.break,p=null;return u&&u.from<=a+h.length&&u.more?p=h=h.updateHeight(o,a,c,u):h.updateHeight(o,a,c),u&&u.from<=f+d.length&&u.more?p=d=d.updateHeight(o,f,c,u):d.updateHeight(o,f,c),p?this.balanced(h,d):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ihe(l,o){let a,c;null==l[o]&&(a=l[o-1])instanceof oa&&(c=l[o+1])instanceof oa&&l.splice(o-1,3,new oa(a.length+1+c.length))}class Fz{constructor(o,a){this.pos=o,this.oracle=a,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=o}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(o,a){if(this.lineStart>-1){let c=Math.min(a,this.lineEnd),u=this.nodes[this.nodes.length-1];u instanceof wc?u.length+=c-this.pos:(c>this.pos||!this.isCovered)&&this.nodes.push(new wc(c-this.pos,-1)),this.writtenTo=c,a>c&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=a}point(o,a,c){if(o<a||c.heightRelevant){let u=c.widget?c.widget.estimatedHeight:0;u<0&&(u=this.oracle.lineHeight);let h=a-o;c.block?this.addBlock(new nhe(h,u,c.type)):(h||u>=5)&&this.addLineDeco(u,h)}else a>o&&this.span(o,a);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:o,to:a}=this.oracle.doc.lineAt(this.pos);this.lineStart=o,this.lineEnd=a,this.writtenTo<o&&((this.writtenTo<o-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,o-1)),this.nodes.push(null)),this.pos>o&&this.nodes.push(new wc(this.pos-o,-1)),this.writtenTo=this.pos}blankContent(o,a){let c=new oa(a-o);return this.oracle.doc.lineAt(o).to==a&&(c.flags|=4),c}ensureLine(){this.enterLine();let o=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(o instanceof wc)return o;let a=new wc(0,-1);return this.nodes.push(a),a}addBlock(o){this.enterLine(),o.type==$r.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(o),this.writtenTo=this.pos=this.pos+o.length,o.type!=$r.WidgetBefore&&(this.covering=o)}addLineDeco(o,a){let c=this.ensureLine();c.length+=a,c.collapsed+=a,c.widgetHeight=Math.max(c.widgetHeight,o),this.writtenTo=this.pos=this.pos+a}finish(o){let a=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||a instanceof wc||this.isCovered?(this.writtenTo<this.pos||null==a)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new wc(0,-1));let c=o;for(let u of this.nodes)u instanceof wc&&u.updateHeight(this.oracle,c),c+=u?u.length:1;return this.nodes}static build(o,a,c,u){let h=new Fz(c,o);return bs.spans(a,c,u,h,0),h.finish(c)}}class GKe{constructor(){this.changes=[]}compareRange(){}comparePoint(o,a,c,u){(o<a||c&&c.heightRelevant||u&&u.heightRelevant)&&Sz(o,a,this.changes,5)}}function QKe(l,o){let a=l.getBoundingClientRect(),c=l.ownerDocument,u=c.defaultView||window,h=Math.max(0,a.left),d=Math.min(u.innerWidth,a.right),f=Math.max(0,a.top),p=Math.min(u.innerHeight,a.bottom);for(let g=l.parentNode;g&&g!=c.body;)if(1==g.nodeType){let m=g,v=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&"visible"!=v.overflow){let y=m.getBoundingClientRect();h=Math.max(h,y.left),d=Math.min(d,y.right),f=Math.max(f,y.top),p=g==l.parentNode?y.bottom:Math.min(p,y.bottom)}g="absolute"==v.position||"fixed"==v.position?m.offsetParent:m.parentNode}else{if(11!=g.nodeType)break;g=g.host}return{left:h-a.left,right:Math.max(h,d)-a.left,top:f-(a.top+o),bottom:Math.max(f,p)-(a.top+o)}}function jKe(l,o){let a=l.getBoundingClientRect();return{left:0,right:a.right-a.left,top:o,bottom:a.bottom-(a.top+o)}}class Nz{constructor(o,a,c){this.from=o,this.to=a,this.size=c}static same(o,a){if(o.length!=a.length)return!1;for(let c=0;c<o.length;c++){let u=o[c],h=a[c];if(u.from!=h.from||u.to!=h.to||u.size!=h.size)return!1}return!0}draw(o){return Nn.replace({widget:new qKe(this.size,o)}).range(this.from,this.to)}}class qKe extends Af{constructor(o,a){super(),this.size=o,this.vertical=a}eq(o){return o.size==this.size&&o.vertical==this.vertical}toDOM(){let o=document.createElement("div");return this.vertical?o.style.height=this.size+"px":(o.style.width=this.size+"px",o.style.height="2px",o.style.display="inline-block"),o}get estimatedHeight(){return this.vertical?this.size:-1}}class rhe{constructor(o){this.state=o,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new ehe,this.scaler=ohe,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=xs.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=o.facet(tw).filter(a=>"function"!=typeof a),this.heightMap=ul.empty().applyChanges(this.stateDeco,xr.empty,this.heightOracle.setDoc(o.doc),[new dd(0,0,0,o.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Nn.set(this.lineGaps.map(a=>a.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let o=[this.viewport],{main:a}=this.state.selection;for(let c=0;c<=1;c++){let u=c?a.head:a.anchor;if(!o.some(({from:h,to:d})=>u>=h&&u<=d)){let{from:h,to:d}=this.lineBlockAt(u);o.push(new yE(h,d))}}this.viewports=o.sort((c,u)=>c.from-u.from),this.scaler=this.heightMap.height<=7e6?ohe:new YKe(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,o=>{this.viewportLines.push(1==this.scaler.scale?o:iw(o,this.scaler))})}update(o,a=null){this.state=o.state;let c=this.stateDeco;this.stateDeco=this.state.facet(tw).filter(g=>"function"!=typeof g);let h=dd.extendWithRanges(o.changedRanges,function WKe(l,o,a){let c=new GKe;return bs.compare(l,o,a,c,0),c.changes}(c,this.stateDeco,o?o.changes:Eo.empty(this.state.doc.length))),d=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,o.startState.doc,this.heightOracle.setDoc(this.state.doc),h),this.heightMap.height!=d&&(o.flags|=2);let f=h.length?this.mapViewport(this.viewport,o.changes):this.viewport;(a&&(a.range.head<f.from||a.range.head>f.to)||!this.viewportIsAppropriate(f))&&(f=this.getViewport(0,a));let p=!o.changes.empty||2&o.flags||f.from!=this.viewport.from||f.to!=this.viewport.to;this.viewport=f,this.updateForViewport(),p&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,o.changes))),o.flags|=this.computeVisibleRanges(),a&&(this.scrollTarget=a),!this.mustEnforceCursorAssoc&&o.selectionSet&&o.view.lineWrapping&&o.state.selection.main.empty&&o.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(o){let a=o.contentDOM,c=window.getComputedStyle(a),u=this.heightOracle,h=c.whiteSpace;this.defaultTextDirection="rtl"==c.direction?xs.RTL:xs.LTR;let d=this.heightOracle.mustRefreshForWrapping(h),f=d||this.mustMeasureContent||this.contentDOMHeight!=a.clientHeight;this.contentDOMHeight=a.clientHeight,this.mustMeasureContent=!1;let p=0,g=0,m=parseInt(c.paddingTop)||0,v=parseInt(c.paddingBottom)||0;(this.paddingTop!=m||this.paddingBottom!=v)&&(this.paddingTop=m,this.paddingBottom=v,p|=10),this.editorWidth!=o.scrollDOM.clientWidth&&(u.lineWrapping&&(f=!0),this.editorWidth=o.scrollDOM.clientWidth,p|=8);let y=(this.printing?jKe:QKe)(a,this.paddingTop),_=y.top-this.pixelViewport.top,b=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let C=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(C!=this.inView&&(this.inView=C,C&&(f=!0)),!this.inView&&!this.scrollTarget)return 0;let x=a.clientWidth;if((this.contentDOMWidth!=x||this.editorHeight!=o.scrollDOM.clientHeight)&&(this.contentDOMWidth=x,this.editorHeight=o.scrollDOM.clientHeight,p|=8),f){let w=o.docView.measureVisibleLineHeights(this.viewport);if(u.mustRefreshForHeights(w)&&(d=!0),d||u.lineWrapping&&Math.abs(x-this.contentDOMWidth)>u.charWidth){let{lineHeight:O,charWidth:T}=o.docView.measureTextSize();d=u.refresh(h,O,T,x/T,w),d&&(o.docView.minWidth=0,p|=8)}_>0&&b>0?g=Math.max(_,b):_<0&&b<0&&(g=Math.min(_,b)),u.heightChanged=!1;for(let O of this.viewports){let T=O.from==this.viewport.from?w:o.docView.measureVisibleLineHeights(O);this.heightMap=this.heightMap.updateHeight(u,0,d,new the(O.from,T))}u.heightChanged&&(p|=2)}let S=!this.viewportIsAppropriate(this.viewport,g)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return S&&(this.viewport=this.getViewport(g,this.scrollTarget)),this.updateForViewport(),(2&p||S)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(d?[]:this.lineGaps,o)),p|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,o.docView.enforceCursorAssoc()),p}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(o,a){let c=.5-Math.max(-.5,Math.min(.5,o/1e3/2)),u=this.heightMap,h=this.state.doc,{visibleTop:d,visibleBottom:f}=this,p=new yE(u.lineAt(d-1e3*c,Wr.ByHeight,h,0,0).from,u.lineAt(f+1e3*(1-c),Wr.ByHeight,h,0,0).to);if(a){let{head:g}=a.range;if(g<p.from||g>p.to){let y,m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),v=u.lineAt(g,Wr.ByPos,h,0,0);y="center"==a.y?(v.top+v.bottom)/2-m/2:"start"==a.y||"nearest"==a.y&&g<p.from?v.top:v.bottom-m,p=new yE(u.lineAt(y-500,Wr.ByHeight,h,0,0).from,u.lineAt(y+m+500,Wr.ByHeight,h,0,0).to)}}return p}mapViewport(o,a){let c=a.mapPos(o.from,-1),u=a.mapPos(o.to,1);return new yE(this.heightMap.lineAt(c,Wr.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(u,Wr.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:o,to:a},c=0){if(!this.inView)return!0;let{top:u}=this.heightMap.lineAt(o,Wr.ByPos,this.state.doc,0,0),{bottom:h}=this.heightMap.lineAt(a,Wr.ByPos,this.state.doc,0,0),{visibleTop:d,visibleBottom:f}=this;return(0==o||u<=d-Math.max(10,Math.min(-c,250)))&&(a==this.state.doc.length||h>=f+Math.max(10,Math.min(c,250)))&&u>d-2e3&&h<f+2e3}mapLineGaps(o,a){if(!o.length||a.empty)return o;let c=[];for(let u of o)a.touchesRange(u.from,u.to)||c.push(new Nz(a.mapPos(u.from),a.mapPos(u.to),u.size));return c}ensureLineGaps(o,a){let c=this.heightOracle.lineWrapping,u=c?1e4:2e3,h=u>>1,d=u<<1;if(this.defaultTextDirection!=xs.LTR&&!c)return[];let f=[],p=(g,m,v,y)=>{if(m-g<h)return;let _=this.state.selection.main,b=[_.from];_.empty||b.push(_.to);for(let x of b)if(x>g&&x<m)return p(g,x-10,v,y),void p(x+10,m,v,y);let C=function XKe(l,o){for(let a of l)if(o(a))return a}(o,x=>x.from>=v.from&&x.to<=v.to&&Math.abs(x.from-g)<h&&Math.abs(x.to-m)<h&&!b.some(S=>x.from<S&&x.to>S));if(!C){if(m<v.to&&a&&c&&a.visibleRanges.some(x=>x.from<=m&&x.to>=m)){let x=a.moveToLineBoundary(Dt.cursor(m),!1,!0).head;x>g&&(m=x)}C=new Nz(g,m,this.gapSize(v,g,m,y))}f.push(C)};for(let g of this.viewportLines){if(g.length<d)continue;let m=ZKe(g.from,g.to,this.stateDeco);if(m.total<d)continue;let y,_,v=this.scrollTarget?this.scrollTarget.range.head:null;if(c){let C,x,b=u/this.heightOracle.lineLength*this.heightOracle.lineHeight;null!=v?(C=Math.max(g.from,v-u),x=Math.min(g.to,v+u)):(C=(this.visibleTop-g.top-b)/g.height,x=(this.visibleBottom-g.top+b)/g.height),y=_E(m,C),_=_E(m,x)}else{let b,C;if(null!=v)b=Math.max(g.from,v-d),C=Math.min(g.to,v+d);else{let x=m.total*this.heightOracle.charWidth,S=u*this.heightOracle.charWidth;b=(this.pixelViewport.left-S)/x,C=(this.pixelViewport.right+S)/x}y=_E(m,b),_=_E(m,C)}y>g.from&&p(g.from,y,g,m),_<g.to&&p(_,g.to,g,m)}return f}gapSize(o,a,c,u){let h=she(u,c)-she(u,a);return this.heightOracle.lineWrapping?o.height*h:u.total*this.heightOracle.charWidth*h}updateLineGaps(o){Nz.same(o,this.lineGaps)||(this.lineGaps=o,this.lineGapDeco=Nn.set(o.map(a=>a.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let o=this.stateDeco;this.lineGaps.length&&(o=o.concat(this.lineGapDeco));let a=[];bs.spans(o,this.viewport.from,this.viewport.to,{span(u,h){a.push({from:u,to:h})},point(){}},20);let c=a.length!=this.visibleRanges.length||this.visibleRanges.some((u,h)=>u.from!=a[h].from||u.to!=a[h].to);return this.visibleRanges=a,c?4:0}lineBlockAt(o){return o>=this.viewport.from&&o<=this.viewport.to&&this.viewportLines.find(a=>a.from<=o&&a.to>=o)||iw(this.heightMap.lineAt(o,Wr.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(o){return iw(this.heightMap.lineAt(this.scaler.fromDOM(o),Wr.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(o){return iw(this.heightMap.blockAt(this.scaler.fromDOM(o),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class yE{constructor(o,a){this.from=o,this.to=a}}function ZKe(l,o,a){let c=[],u=l,h=0;return bs.spans(a,l,o,{span(){},point(d,f){d>u&&(c.push({from:u,to:d}),h+=d-u),u=f}},20),u<o&&(c.push({from:u,to:o}),h+=o-u),{total:h,ranges:c}}function _E({total:l,ranges:o},a){if(a<=0)return o[0].from;if(a>=1)return o[o.length-1].to;let c=Math.floor(l*a);for(let u=0;;u++){let{from:h,to:d}=o[u],f=d-h;if(c<=f)return h+c;c-=f}}function she(l,o){let a=0;for(let{from:c,to:u}of l.ranges){if(o<=u){a+=o-c;break}a+=u-c}return a/l.total}const ohe={toDOM:l=>l,fromDOM:l=>l,scale:1};class YKe{constructor(o,a,c){let u=0,h=0,d=0;this.viewports=c.map(({from:f,to:p})=>{let g=a.lineAt(f,Wr.ByPos,o,0,0).top,m=a.lineAt(p,Wr.ByPos,o,0,0).bottom;return u+=m-g,{from:f,to:p,top:g,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-u)/(a.height-u);for(let f of this.viewports)f.domTop=d+(f.top-h)*this.scale,d=f.domBottom=f.domTop+(f.bottom-f.top),h=f.bottom}toDOM(o){for(let a=0,c=0,u=0;;a++){let h=a<this.viewports.length?this.viewports[a]:null;if(!h||o<h.top)return u+(o-c)*this.scale;if(o<=h.bottom)return h.domTop+(o-h.top);c=h.bottom,u=h.domBottom}}fromDOM(o){for(let a=0,c=0,u=0;;a++){let h=a<this.viewports.length?this.viewports[a]:null;if(!h||o<h.domTop)return c+(o-u)/this.scale;if(o<=h.domBottom)return h.top+(o-h.domTop);c=h.bottom,u=h.domBottom}}}function iw(l,o){if(1==o.scale)return l;let a=o.toDOM(l.top),c=o.toDOM(l.bottom);return new cg(l.from,l.length,a,c-a,Array.isArray(l.type)?l.type.map(u=>iw(u,o)):l.type)}const bE=Rn.define({combine:l=>l.join(" ")}),Lz=Rn.define({combine:l=>l.indexOf(!0)>-1}),Bz=rg.newName(),ahe=rg.newName(),lhe=rg.newName(),che={"&light":"."+ahe,"&dark":"."+lhe};function Vz(l,o,a){return new rg(o,{finish:c=>/&/.test(c)?c.replace(/&\w*/,u=>{if("&"==u)return l;if(!a||!a[u])throw new RangeError(`Unsupported selector: ${u}`);return a[u]}):l+" "+c})}const KKe=Vz("."+Bz,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},che),JKe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},zz=Fn.ie&&Fn.ie_version<=11;class eJe{constructor(o,a,c){this.view=o,this.onChange=a,this.onScrollChanged=c,this.active=!1,this.selectionRange=new nKe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=o.contentDOM,this.observer=new MutationObserver(u=>{for(let h of u)this.queue.push(h);(Fn.ie&&Fn.ie_version<=11||Fn.ios&&o.composing)&&u.some(h=>"childList"==h.type&&h.removedNodes.length||"characterData"==h.type&&h.oldValue.length>h.target.nodeValue.length)?this.flushSoon():this.flush()}),zz&&(this.onCharData=u=>{this.queue.push({target:u.target,type:"characterData",oldValue:u.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(o.scrollDOM)),this.addWindowListeners(this.win=o.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(u=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),u.length>0&&u[u.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(u=>{u.length>0&&u[u.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScroll(o){this.intersecting&&this.flush(!1),this.onScrollChanged(o)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(o){if(this.gapIntersection&&(o.length!=this.gaps.length||this.gaps.some((a,c)=>a!=o[c]))){this.gapIntersection.disconnect();for(let a of o)this.gapIntersection.observe(a);this.gaps=o}}onSelectionChange(o){let a=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:c}=this,u=this.selectionRange;if(c.state.facet(gE)?c.root.activeElement!=this.dom:!aE(c.dom,u))return;let h=u.anchorNode&&c.docView.nearest(u.anchorNode);h&&h.ignoreEvent(o)?a||(this.selectionChanged=!1):(Fn.ie&&Fn.ie_version<=11||Fn.android&&Fn.chrome)&&!c.state.selection.main.empty&&u.focusNode&&lE(u.focusNode,u.focusOffset,u.anchorNode,u.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:o}=this,a=Fn.safari&&11==o.root.nodeType&&function JYe(l){let o=l.activeElement;for(;o&&o.shadowRoot;)o=o.shadowRoot.activeElement;return o}(this.dom.ownerDocument)==this.dom&&function tJe(l){let o=null;function a(p){p.preventDefault(),p.stopImmediatePropagation(),o=p.getTargetRanges()[0]}if(l.contentDOM.addEventListener("beforeinput",a,!0),l.dom.ownerDocument.execCommand("indent"),l.contentDOM.removeEventListener("beforeinput",a,!0),!o)return null;let c=o.startContainer,u=o.startOffset,h=o.endContainer,d=o.endOffset,f=l.docView.domAtPos(l.state.selection.main.anchor);return lE(f.node,f.offset,h,d)&&([c,u,h,d]=[h,d,c,u]),{anchorNode:c,anchorOffset:u,focusNode:h,focusOffset:d}}(this.view)||oE(o.root);if(!a||this.selectionRange.eq(a))return!1;let c=aE(this.dom,a);return c&&!this.selectionChanged&&o.inputState.lastFocusTime>Date.now()-200&&o.inputState.lastTouchTime<Date.now()-300&&function rKe(l,o){let a=o.focusNode,c=o.focusOffset;if(!a||o.anchorNode!=a||o.anchorOffset!=c)return!1;for(;;)if(c){if(1!=a.nodeType)return!1;let u=a.childNodes[c-1];"false"==u.contentEditable?c--:(a=u,c=YS(a))}else{if(a==l)return!0;c=cE(a),a=a.parentNode}}(this.dom,a)?(this.view.inputState.lastFocusTime=0,o.docView.updateSelection(),!1):(this.selectionRange.setRange(a),c&&(this.selectionChanged=!0),!0)}setSelectionRange(o,a){this.selectionRange.set(o.node,o.offset,a.node,a.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let o=0,a=null;for(let c=this.dom;c;)if(1==c.nodeType)!a&&o<this.scrollTargets.length&&this.scrollTargets[o]==c?o++:a||(a=this.scrollTargets.slice(0,o)),a&&a.push(c),c=c.assignedSlot||c.parentNode;else{if(11!=c.nodeType)break;c=c.host}if(o<this.scrollTargets.length&&!a&&(a=this.scrollTargets.slice(0,o)),a){for(let c of this.scrollTargets)c.removeEventListener("scroll",this.onScroll);for(let c of this.scrollTargets=a)c.addEventListener("scroll",this.onScroll)}}ignore(o){if(!this.active)return o();try{return this.stop(),o()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,JKe),zz&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),zz&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(o,a){var c;this.delayedAndroidKey||this.view.win.requestAnimationFrame(()=>{let u=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,!this.flush()&&u.force&&KS(this.dom,u.key,u.keyCode)}),(!this.delayedAndroidKey||"Enter"==o)&&(this.delayedAndroidKey={key:o,keyCode:a,force:this.lastChange<Date.now()-50||!!(null===(c=this.delayedAndroidKey)||void 0===c?void 0:c.force)})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let o=this.queue;for(let h of this.observer.takeRecords())o.push(h);o.length&&(this.queue=[]);let a=-1,c=-1,u=!1;for(let h of o){let d=this.readMutation(h);!d||(d.typeOver&&(u=!0),-1==a?({from:a,to:c}=d):(a=Math.min(d.from,a),c=Math.max(d.to,c)))}return{from:a,to:c,typeOver:u}}flush(o=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;o&&this.readSelectionRange();let{from:a,to:c,typeOver:u}=this.processRecords(),h=this.selectionChanged&&aE(this.dom,this.selectionRange);if(a<0&&!h)return!1;a>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let d=this.view.state,f=this.onChange(a,c,u);return this.view.state==d&&this.view.update([]),f}readMutation(o){let a=this.view.docView.nearest(o.target);if(!a||a.ignoreMutation(o))return null;if(a.markDirty("attributes"==o.type),"attributes"==o.type&&(a.dirty|=4),"childList"==o.type){let c=uhe(a,o.previousSibling||o.target.previousSibling,-1),u=uhe(a,o.nextSibling||o.target.nextSibling,1);return{from:c?a.posAfter(c):a.posAtStart,to:u?a.posBefore(u):a.posAtEnd,typeOver:!1}}return"characterData"==o.type?{from:a.posAtStart,to:a.posAtEnd,typeOver:o.target.nodeValue==o.oldValue}:null}setWindow(o){o!=this.win&&(this.removeWindowListeners(this.win),this.win=o,this.addWindowListeners(this.win))}addWindowListeners(o){o.addEventListener("resize",this.onResize),o.addEventListener("beforeprint",this.onPrint),o.addEventListener("scroll",this.onScroll),o.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(o){o.removeEventListener("scroll",this.onScroll),o.removeEventListener("resize",this.onResize),o.removeEventListener("beforeprint",this.onPrint),o.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var o,a,c;this.stop(),null===(o=this.intersection)||void 0===o||o.disconnect(),null===(a=this.gapIntersection)||void 0===a||a.disconnect(),null===(c=this.resize)||void 0===c||c.disconnect();for(let u of this.scrollTargets)u.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function uhe(l,o,a){for(;o;){let c=Yr.get(o);if(c&&c.parent==l)return c;let u=o.parentNode;o=u!=l.dom?u:a>0?o.nextSibling:o.previousSibling}return null}let Si=(()=>{class l{constructor(a={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=a.dispatch||(c=>this.update([c])),this.dispatch=this.dispatch.bind(this),this._root=a.root||function iKe(l){for(;l;){if(l&&(9==l.nodeType||11==l.nodeType&&l.host))return l;l=l.assignedSlot||l.parentNode}return null}(a.parent)||document,this.viewState=new rhe(a.state||ll.create(a)),this.plugins=this.state.facet(ew).map(c=>new Oz(c));for(let c of this.plugins)c.update(this);this.observer=new eJe(this,(c,u,h)=>function nJe(l,o,a,c){let u,h,d=l.state.selection.main;if(o>-1){let f=l.docView.domBoundsAround(o,a,0);if(!f||l.state.readOnly)return!1;let{from:p,to:g}=f,m=l.docView.impreciseHead||l.docView.impreciseAnchor?[]:function rJe(l){let o=[];if(l.root.activeElement!=l.contentDOM)return o;let{anchorNode:a,anchorOffset:c,focusNode:u,focusOffset:h}=l.observer.selectionRange;return a&&(o.push(new Due(a,c)),(u!=a||h!=c)&&o.push(new Due(u,h))),o}(l),v=new Tue(m,l.state);v.readRange(f.startDOM,f.endDOM);let y=d.from,_=null;(8===l.inputState.lastKeyCode&&l.inputState.lastKeyTime>Date.now()-100||Fn.android&&v.text.length<g-p)&&(y=d.to,_="end");let b=function iJe(l,o,a,c){let u=Math.min(l.length,o.length),h=0;for(;h<u&&l.charCodeAt(h)==o.charCodeAt(h);)h++;if(h==u&&l.length==o.length)return null;let d=l.length,f=o.length;for(;d>0&&f>0&&l.charCodeAt(d-1)==o.charCodeAt(f-1);)d--,f--;return"end"==c&&(a-=d+Math.max(0,h-Math.min(d,f))-h),d<h&&l.length<o.length?(h-=a<=h&&a>=d?h-a:0,f=h+(f-d),d=h):f<h&&(h-=a<=h&&a>=f?h-a:0,d=h+(d-f),f=h),{from:h,toA:d,toB:f}}(l.state.doc.sliceString(p,g,"\uffff"),v.text,y-p,_);b&&(Fn.chrome&&13==l.inputState.lastKeyCode&&b.toB==b.from+2&&"\uffff\uffff"==v.text.slice(b.from,b.toB)&&b.toB--,u={from:p+b.from,to:p+b.toA,insert:xr.of(v.text.slice(b.from,b.toB).split("\uffff"))}),h=function sJe(l,o){if(0==l.length)return null;let a=l[0].pos,c=2==l.length?l[1].pos:a;return a>-1&&c>-1?Dt.single(a+o,c+o):null}(m,p)}else if(l.hasFocus||!l.state.facet(gE)){let f=l.observer.selectionRange,{impreciseHead:p,impreciseAnchor:g}=l.docView,m=p&&p.node==f.focusNode&&p.offset==f.focusOffset||!V_(l.contentDOM,f.focusNode)?l.state.selection.main.head:l.docView.posFromDOM(f.focusNode,f.focusOffset),v=g&&g.node==f.anchorNode&&g.offset==f.anchorOffset||!V_(l.contentDOM,f.anchorNode)?l.state.selection.main.anchor:l.docView.posFromDOM(f.anchorNode,f.anchorOffset);(m!=d.head||v!=d.anchor)&&(h=Dt.single(v,m))}if(!u&&!h)return!1;if(!u&&c&&!d.empty&&h&&h.main.empty?u={from:d.from,to:d.to,insert:l.state.doc.slice(d.from,d.to)}:u&&u.from>=d.from&&u.to<=d.to&&(u.from!=d.from||u.to!=d.to)&&d.to-d.from-(u.to-u.from)<=4?u={from:d.from,to:d.to,insert:l.state.doc.slice(d.from,u.from).append(u.insert).append(l.state.doc.slice(u.to,d.to))}:(Fn.mac||Fn.android)&&u&&u.from==u.to&&u.from==d.head-1&&/^\. ?$/.test(u.insert.toString())&&(h&&2==u.insert.length&&(h=Dt.single(h.main.anchor-1,h.main.head-1)),u={from:d.from,to:d.to,insert:xr.of([" "])}),u){let f=l.state;if(Fn.ios&&l.inputState.flushIOSKey(l)||Fn.android&&(u.from==d.from&&u.to==d.to&&1==u.insert.length&&2==u.insert.lines&&KS(l.contentDOM,"Enter",13)||u.from==d.from-1&&u.to==d.to&&0==u.insert.length&&KS(l.contentDOM,"Backspace",8)||u.from==d.from&&u.to==d.to+1&&0==u.insert.length&&KS(l.contentDOM,"Delete",46)))return!0;let g,p=u.insert.toString();if(l.state.facet(pue).some(v=>v(l,u.from,u.to,p)))return!0;if(l.inputState.composing>=0&&l.inputState.composing++,u.from>=d.from&&u.to<=d.to&&u.to-u.from>=(d.to-d.from)/3&&(!h||h.main.empty&&h.main.from==u.from+u.insert.length)&&l.inputState.composing<0){let v=d.from<u.from?f.sliceDoc(d.from,u.from):"",y=d.to>u.to?f.sliceDoc(u.to,d.to):"";g=f.replaceSelection(l.state.toText(v+u.insert.sliceString(0,void 0,l.state.lineBreak)+y))}else{let v=f.changes(u),y=h&&!f.selection.main.eq(h.main)&&h.main.to<=v.newLength?h.main:void 0;if(f.selection.ranges.length>1&&l.inputState.composing>=0&&u.to<=d.to&&u.to>=d.to-10){let _=l.state.sliceDoc(u.from,u.to),b=Eue(l)||l.state.doc.lineAt(d.head),C=d.to-u.to,x=d.to-d.from;g=f.changeByRange(S=>{if(S.from==d.from&&S.to==d.to)return{changes:v,range:y||S.map(v)};let w=S.to-C,O=w-_.length;if(S.to-S.from!=x||l.state.sliceDoc(O,w)!=_||b&&S.to>=b.from&&S.from<=b.to)return{range:S};let T=f.changes({from:O,to:w,insert:u.insert}),M=S.to-d.to;return{changes:T,range:y?Dt.range(Math.max(0,y.anchor+M),Math.max(0,y.head+M)):S.map(T)}})}else g={changes:v,selection:y&&f.selection.replaceRange(y)}}let m="input.type";return l.composing&&(m+=".compose",l.inputState.compositionFirstChange&&(m+=".start",l.inputState.compositionFirstChange=!1)),l.dispatch(g,{scrollIntoView:!0,userEvent:m}),!0}if(h&&!h.main.eq(d)){let f=!1,p="select";return l.inputState.lastSelectionTime>Date.now()-50&&("select"==l.inputState.lastSelectionOrigin&&(f=!0),p=l.inputState.lastSelectionOrigin),l.dispatch({selection:h,scrollIntoView:f,userEvent:p}),!0}return!1}(this,c,u,h),c=>{this.inputState.runScrollHandlers(this,c),this.observer.intersecting&&this.measure()}),this.inputState=new MKe(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new kue(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),a.parent&&a.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...a){this._dispatch(1==a.length&&a[0]instanceof ud?a[0]:this.state.update(...a))}update(a){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let h,c=!1,u=!1,d=this.state;for(let p of a){if(p.startState!=d)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");d=p.state}if(this.destroyed)return void(this.viewState.state=d);if(this.observer.clear(),d.facet(ll.phrases)!=this.state.facet(ll.phrases))return this.setState(d);h=mE.create(this,d,a);let f=this.viewState.scrollTarget;try{this.updateState=2;for(let p of a){if(f&&(f=f.map(p.changes)),p.scrollIntoView){let{main:g}=p.state.selection;f=new pE(g.empty?g:Dt.cursor(g.head,g.head>g.anchor?-1:1))}for(let g of p.effects)g.is(mue)&&(f=g.value)}this.viewState.update(h,f),this.bidiCache=xE.update(this.bidiCache,h.changes),h.empty||(this.updatePlugins(h),this.inputState.update(h)),c=this.docView.update(h),this.state.facet(nw)!=this.styleModules&&this.mountStyles(),u=this.updateAttrs(),this.showAnnouncements(a),this.docView.updateSelection(c,a.some(p=>p.isUserEvent("select.pointer")))}finally{this.updateState=0}if(h.startState.facet(bE)!=h.state.facet(bE)&&(this.viewState.mustMeasureContent=!0),(c||u||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!h.empty)for(let p of this.state.facet(Tz))p(h)}setState(a){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=a);this.updateState=2;let c=this.hasFocus;try{for(let u of this.plugins)u.destroy(this);this.viewState=new rhe(a),this.plugins=a.facet(ew).map(u=>new Oz(u)),this.pluginMap.clear();for(let u of this.plugins)u.update(this);this.docView=new kue(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}c&&this.focus(),this.requestMeasure()}updatePlugins(a){let c=a.startState.facet(ew),u=a.state.facet(ew);if(c!=u){let h=[];for(let d of u){let f=c.indexOf(d);if(f<0)h.push(new Oz(d));else{let p=this.plugins[f];p.mustUpdate=a,h.push(p)}}for(let d of this.plugins)d.mustUpdate!=a&&d.destroy(this);this.plugins=h,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let h of this.plugins)h.mustUpdate=a;for(let h=0;h<this.plugins.length;h++)this.plugins[h].update(this)}measure(a=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,a&&this.observer.forceFlush();let c=null,{scrollHeight:u,scrollTop:h,clientHeight:d}=this.scrollDOM,f=h>u-d-4?u:h;try{for(let p=0;;p++){this.updateState=1;let g=this.viewport,m=this.viewState.lineBlockAtHeight(f),v=this.viewState.measure(this);if(!v&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(p>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let y=[];4&v||([this.measureRequests,y]=[y,this.measureRequests]);let _=y.map(S=>{try{return S.read(this)}catch(w){return Sc(this.state,w),hhe}}),b=mE.create(this,this.state,[]),C=!1,x=!1;b.flags|=v,c?c.flags|=v:c=b,this.updateState=2,b.empty||(this.updatePlugins(b),this.inputState.update(b),this.updateAttrs(),C=this.docView.update(b));for(let S=0;S<y.length;S++)if(_[S]!=hhe)try{let w=y[S];w.write&&w.write(_[S],this)}catch(w){Sc(this.state,w)}if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,x=!0;else{let S=this.viewState.lineBlockAt(m.from).top-m.top;(S>1||S<-1)&&(this.scrollDOM.scrollTop+=S,x=!0)}if(C&&this.docView.updateSelection(!0),this.viewport.from==g.from&&this.viewport.to==g.to&&!x&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(c&&!c.empty)for(let p of this.state.facet(Tz))p(c)}get themeClasses(){return Bz+" "+(this.state.facet(Lz)?lhe:ahe)+" "+this.state.facet(bE)}updateAttrs(){let a=dhe(this,vue,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),c={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(gE)?"true":"false",class:"cm-content",style:`${Fn.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(c["aria-readonly"]="true"),dhe(this,Dz,c);let u=this.observer.ignore(()=>{let h=Cz(this.contentDOM,this.contentAttrs,c),d=Cz(this.dom,this.editorAttrs,a);return h||d});return this.editorAttrs=a,this.contentAttrs=c,u}showAnnouncements(a){let c=!0;for(let u of a)for(let h of u.effects)h.is(l.announce)&&(c&&(this.announceDOM.textContent=""),c=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=h.value)}mountStyles(){this.styleModules=this.state.facet(nw),rg.mount(this.root,this.styleModules.concat(KKe).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(a){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),a){if(null!=a.key)for(let c=0;c<this.measureRequests.length;c++)if(this.measureRequests[c].key===a.key)return void(this.measureRequests[c]=a);this.measureRequests.push(a)}}plugin(a){let c=this.pluginMap.get(a);return(void 0===c||c&&c.spec!=a)&&this.pluginMap.set(a,c=this.plugins.find(u=>u.spec==a)||null),c&&c.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(a){return this.readMeasured(),this.viewState.elementAtHeight(a)}lineBlockAtHeight(a){return this.readMeasured(),this.viewState.lineBlockAtHeight(a)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(a){return this.viewState.lineBlockAt(a)}get contentHeight(){return this.viewState.contentHeight}moveByChar(a,c,u){return Iz(this,a,Lue(this,a,c,u))}moveByGroup(a,c){return Iz(this,a,Lue(this,a,c,u=>function DKe(l,o,a){let c=l.state.charCategorizer(o),u=c(a);return h=>{let d=c(h);return u==hs.Space&&(u=d),u==d}}(this,a.head,u)))}moveToLineBoundary(a,c,u=!0){return function OKe(l,o,a,c){let u=l.state.doc.lineAt(o.head),h=c&&l.lineWrapping?l.coordsAtPos(o.assoc<0&&o.head>u.from?o.head-1:o.head):null;if(h){let p=l.dom.getBoundingClientRect(),g=l.textDirectionAt(u.from),m=l.posAtCoords({x:a==(g==xs.LTR)?p.right-1:p.left+1,y:(h.top+h.bottom)/2});if(null!=m)return Dt.cursor(m,a?-1:1)}let d=cl.find(l.docView,o.head);return Dt.cursor(d?a?d.posAtEnd:d.posAtStart:a?u.to:u.from,a?-1:1)}(this,a,c,u)}moveVertically(a,c,u){return Iz(this,a,function kKe(l,o,a,c){let u=o.head,h=a?1:-1;if(u==(a?l.state.doc.length:0))return Dt.cursor(u,o.assoc);let f,d=o.goalColumn,p=l.contentDOM.getBoundingClientRect(),g=l.coordsAtPos(u),m=l.documentTop;if(g)null==d&&(d=g.left-p.left),f=h<0?g.top:g.bottom;else{let _=l.viewState.lineBlockAt(u);null==d&&(d=Math.min(p.right-p.left,l.defaultCharacterWidth*(u-_.from))),f=(h<0?_.top:_.bottom)+m}let v=p.left+d,y=null!=c?c:l.defaultLineHeight>>1;for(let _=0;;_+=10){let b=f+(y+_)*h,C=Fue(l,{x:v,y:b},!1,h);if(b<p.top||b>p.bottom||(h<0?C<u:C>u))return Dt.cursor(C,o.assoc,void 0,d)}}(this,a,c,u))}domAtPos(a){return this.docView.domAtPos(a)}posAtDOM(a,c=0){return this.docView.posFromDOM(a,c)}posAtCoords(a,c=!0){return this.readMeasured(),Fue(this,a,c)}coordsAtPos(a,c=1){this.readMeasured();let u=this.docView.coordsAt(a,c);if(!u||u.left==u.right)return u;let h=this.state.doc.lineAt(a),d=this.bidiSpans(h);return uE(u,d[$_.find(d,a-h.from,-1,c)].dir==xs.LTR==c>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(a){return!this.state.facet(gue)||a<this.viewport.from||a>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(a))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(a){if(a.length>oJe)return Cue(a.length);let c=this.textDirectionAt(a.from);for(let h of this.bidiCache)if(h.from==a.from&&h.dir==c)return h.order;let u=function xue(l,o){let a=l.length,c=o==kz?1:2,u=o==kz?2:1;if(!l||1==c&&!fKe.test(l))return Cue(a);for(let d=0,f=c,p=c;d<a;d++){let g=dKe(l.charCodeAt(d));512==g?g=f:8==g&&4==p&&(g=16),Cs[d]=4==g?2:g,7&g&&(p=g),f=g}for(let d=0,f=c,p=c;d<a;d++){let g=Cs[d];if(128==g)d<a-1&&f==Cs[d+1]&&24&f?g=Cs[d]=f:Cs[d]=256;else if(64==g){let m=d+1;for(;m<a&&64==Cs[m];)m++;let v=d&&8==f||m<a&&8==Cs[m]?1==p?1:8:256;for(let y=d;y<m;y++)Cs[y]=v;d=m-1}else 8==g&&1==p&&(Cs[d]=1);f=g,7&g&&(p=g)}for(let g,m,v,d=0,f=0,p=0;d<a;d++)if(m=Mz[g=l.charCodeAt(d)])if(m<0){for(let y=f-3;y>=0;y-=3)if(fd[y+1]==-m){let _=fd[y+2],b=2&_?c:4&_?1&_?u:c:0;b&&(Cs[d]=Cs[fd[y]]=b),f=y;break}}else{if(189==fd.length)break;fd[f++]=d,fd[f++]=g,fd[f++]=p}else if(2==(v=Cs[d])||1==v){let y=v==c;p=y?0:1;for(let _=f-3;_>=0;_-=3){let b=fd[_+2];if(2&b)break;if(y)fd[_+2]|=2;else{if(4&b)break;fd[_+2]|=4}}}for(let d=0;d<a;d++)if(256==Cs[d]){let f=d+1;for(;f<a&&256==Cs[f];)f++;let p=1==(d?Cs[d-1]:c),m=p==(1==(f<a?Cs[f]:c))?p?1:2:c;for(let v=d;v<f;v++)Cs[v]=m;d=f-1}let h=[];if(1==c)for(let d=0;d<a;){let f=d,p=1!=Cs[d++];for(;d<a&&p==(1!=Cs[d]);)d++;if(p)for(let g=d;g>f;){let m=g,v=2!=Cs[--g];for(;g>f&&v==(2!=Cs[g-1]);)g--;h.push(new $_(g,m,v?2:1))}else h.push(new $_(f,d,0))}else for(let d=0;d<a;){let f=d,p=2==Cs[d++];for(;d<a&&p==(2==Cs[d]);)d++;h.push(new $_(f,d,p?1:2))}return h}(a.text,c);return this.bidiCache.push(new xE(a.from,a.to,c,u)),u}get hasFocus(){var a;return(this.dom.ownerDocument.hasFocus()||Fn.safari&&(null===(a=this.inputState)||void 0===a?void 0:a.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Gce(this.contentDOM),this.docView.updateSelection()})}setRoot(a){this._root!=a&&(this._root=a,this.observer.setWindow((9==a.nodeType?a:a.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let a of this.plugins)a.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(a,c={}){return mue.of(new pE("number"==typeof a?Dt.cursor(a):a,c.y,c.x,c.yMargin,c.xMargin))}static domEventHandlers(a){return js.define(()=>({}),{eventHandlers:a})}static theme(a,c){let u=rg.newName(),h=[bE.of(u),nw.of(Vz(`.${u}`,a))];return c&&c.dark&&h.push(Lz.of(!0)),h}static baseTheme(a){return d0.lowest(nw.of(Vz("."+Bz,a,che)))}static findFromDOM(a){var c;let u=a.querySelector(".cm-content"),h=u&&Yr.get(u)||Yr.get(a);return(null===(c=null==h?void 0:h.rootView)||void 0===c?void 0:c.view)||null}}return l.styleModule=nw,l.inputHandler=pue,l.perLineTextDirection=gue,l.exceptionSink=fue,l.updateListener=Tz,l.editable=gE,l.mouseSelectionStyle=due,l.dragMovesSelection=hue,l.clickAddsSelectionRange=uue,l.decorations=tw,l.atomicRanges=yue,l.scrollMargins=_ue,l.darkTheme=Lz,l.contentAttributes=Dz,l.editorAttributes=vue,l.lineWrapping=l.contentAttributes.of({class:"cm-lineWrapping"}),l.announce=Gi.define(),l})();const oJe=4096,hhe={};class xE{constructor(o,a,c,u){this.from=o,this.to=a,this.dir=c,this.order=u}static update(o,a){if(a.empty)return o;let c=[],u=o.length?o[o.length-1].dir:xs.LTR;for(let h=Math.max(0,o.length-10);h<o.length;h++){let d=o[h];d.dir==u&&!a.touchesRange(d.from,d.to)&&c.push(new xE(a.mapPos(d.from,1),a.mapPos(d.to,-1),d.dir,d.order))}return c}}function dhe(l,o,a){for(let c=l.state.facet(o),u=c.length-1;u>=0;u--){let h=c[u],d="function"==typeof h?h(l):h;d&&bz(d,a)}return a}const aJe=Fn.mac?"mac":Fn.windows?"win":Fn.linux?"linux":"key";function CE(l,o,a){return o.altKey&&(l="Alt-"+l),o.ctrlKey&&(l="Ctrl-"+l),o.metaKey&&(l="Meta-"+l),!1!==a&&o.shiftKey&&(l="Shift-"+l),l}const cJe=d0.default(Si.domEventHandlers({keydown:(l,o)=>ghe(phe(o.state),l,o,"editor")})),SE=Rn.define({enables:cJe}),fhe=new WeakMap;function phe(l){let o=l.facet(SE),a=fhe.get(o);return a||fhe.set(o,a=function dJe(l,o=aJe){let a=Object.create(null),c=Object.create(null),u=(d,f)=>{let p=c[d];if(null==p)c[d]=f;else if(p!=f)throw new Error("Key binding "+d+" is used both as a regular binding and as a multi-stroke prefix")},h=(d,f,p,g)=>{var m,v;let y=a[d]||(a[d]=Object.create(null)),_=f.split(/ (?!$)/).map(x=>function lJe(l,o){const a=l.split(/-(?!$)/);let u,h,d,f,c=a[a.length-1];"Space"==c&&(c=" ");for(let p=0;p<a.length-1;++p){const g=a[p];if(/^(cmd|meta|m)$/i.test(g))f=!0;else if(/^a(lt)?$/i.test(g))u=!0;else if(/^(c|ctrl|control)$/i.test(g))h=!0;else if(/^s(hift)?$/i.test(g))d=!0;else{if(!/^mod$/i.test(g))throw new Error("Unrecognized modifier name: "+g);"mac"==o?f=!0:h=!0}}return u&&(c="Alt-"+c),h&&(c="Ctrl-"+c),f&&(c="Meta-"+c),d&&(c="Shift-"+c),c}(x,o));for(let x=1;x<_.length;x++){let S=_.slice(0,x).join(" ");u(S,!0),y[S]||(y[S]={preventDefault:!0,run:[w=>{let O=ug={view:w,prefix:S,scope:d};return setTimeout(()=>{ug==O&&(ug=null)},4e3),!0}]})}let b=_.join(" ");u(b,!1);let C=y[b]||(y[b]={preventDefault:!1,run:(null===(v=null===(m=y._any)||void 0===m?void 0:m.run)||void 0===v?void 0:v.slice())||[]});p&&C.run.push(p),g&&(C.preventDefault=!0)};for(let d of l){let f=d.scope?d.scope.split(" "):["editor"];if(d.any)for(let g of f){let m=a[g]||(a[g]=Object.create(null));m._any||(m._any={preventDefault:!1,run:[]});for(let v in m)m[v].run.push(d.any)}let p=d[o]||d.key;if(p)for(let g of f)h(g,p,d.run,d.preventDefault),d.shift&&h(g,"Shift-"+p,d.shift,d.preventDefault)}return a}(o.reduce((c,u)=>c.concat(u),[]))),a}let ug=null;function ghe(l,o,a,c){let u=function KYe(l){var a=!(YYe&&(l.ctrlKey||l.altKey||l.metaKey)||XYe&&l.shiftKey&&l.key&&1==l.key.length||"Unidentified"==l.key)&&l.key||(l.shiftKey?ZS:sg)[l.keyCode]||l.key||"Unidentified";return"Esc"==a&&(a="Escape"),"Del"==a&&(a="Delete"),"Left"==a&&(a="ArrowLeft"),"Up"==a&&(a="ArrowUp"),"Right"==a&&(a="ArrowRight"),"Down"==a&&(a="ArrowDown"),a}(o),h=ia(u,0),d=xc(h)==u.length&&" "!=u,f="",p=!1;ug&&ug.view==a&&ug.scope==c&&(f=ug.prefix+" ",(p=Vue.indexOf(o.keyCode)<0)&&(ug=null));let y,_,g=new Set,m=b=>{if(b){for(let C of b.run)if(!g.has(C)&&(g.add(C),C(a,o)))return!0;b.preventDefault&&(p=!0)}return!1},v=l[c];if(v){if(m(v[f+CE(u,o,!d)]))return!0;if(d&&(o.shiftKey||o.altKey||o.metaKey||h>127)&&(y=sg[o.keyCode])&&y!=u){if(m(v[f+CE(y,o,!0)]))return!0;if(o.shiftKey&&(_=ZS[o.keyCode])!=u&&_!=y&&m(v[f+CE(_,o,!1)]))return!0}else if(d&&o.shiftKey&&m(v[f+CE(u,o,!0)]))return!0;if(m(v._any))return!0}return p}const mhe=!Fn.ios,rw=Rn.define({combine:l=>ah(l,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(o,a)=>Math.min(o,a),drawRangeCursor:(o,a)=>o||a})});function fJe(l={}){return[rw.of(l),pJe,gJe]}class vhe{constructor(o,a,c,u,h){this.left=o,this.top=a,this.width=c,this.height=u,this.className=h}draw(){let o=document.createElement("div");return o.className=this.className,this.adjust(o),o}adjust(o){o.style.left=this.left+"px",o.style.top=this.top+"px",this.width>=0&&(o.style.width=this.width+"px"),o.style.height=this.height+"px"}eq(o){return this.left==o.left&&this.top==o.top&&this.width==o.width&&this.height==o.height&&this.className==o.className}}const pJe=js.fromClass(class{constructor(l){this.view=l,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=l.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=l.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),l.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(rw).cursorBlinkRate+"ms"}update(l){let o=l.startState.facet(rw)!=l.state.facet(rw);(o||l.selectionSet||l.geometryChanged||l.viewportChanged)&&this.view.requestMeasure(this.measureReq),l.transactions.some(a=>a.scrollIntoView)&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),o&&this.setBlinkRate()}readPos(){let{state:l}=this.view,o=l.facet(rw),a=l.selection.ranges.map(u=>u.empty?[]:function mJe(l,o){if(o.to<=l.viewport.from||o.from>=l.viewport.to)return[];let a=Math.max(o.from,l.viewport.from),c=Math.min(o.to,l.viewport.to),u=l.textDirection==xs.LTR,h=l.contentDOM,d=h.getBoundingClientRect(),f=_he(l),p=window.getComputedStyle(h.firstChild),g=d.left+parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)),m=d.right-parseInt(p.paddingRight),v=xhe(l,a),y=xhe(l,c),_=v.type==$r.Text?v:null,b=y.type==$r.Text?y:null;if(l.lineWrapping&&(_&&(_=bhe(l,a,_)),b&&(b=bhe(l,c,b))),_&&b&&_.from==b.from)return x(S(o.from,o.to,_));{let O=_?S(o.from,null,_):w(v,!1),T=b?S(null,o.to,b):w(y,!0),M=[];return(_||v).to<(b||y).from-1?M.push(C(g,O.bottom,m,T.top)):O.bottom<T.top&&l.elementAtHeight((O.bottom+T.top)/2).type==$r.Text&&(O.bottom=T.top=(O.bottom+T.top)/2),x(O).concat(M).concat(x(T))}function C(O,T,M,A){return new vhe(O-f.left,T-f.top-.01,M-O,A-T+.01,"cm-selectionBackground")}function x({top:O,bottom:T,horizontal:M}){let A=[];for(let I=0;I<M.length;I+=2)A.push(C(M[I],O,M[I+1],T));return A}function S(O,T,M){let A=1e9,I=-1e9,E=[];function P(Q,j,N,U,z){let $=l.coordsAtPos(Q,Q==M.to?-2:2),H=l.coordsAtPos(N,N==M.from?2:-2);A=Math.min($.top,H.top,A),I=Math.max($.bottom,H.bottom,I),z==xs.LTR?E.push(u&&j?g:$.left,u&&U?m:H.right):E.push(!u&&U?g:H.left,!u&&j?m:$.right)}let B=null!=O?O:M.from,V=null!=T?T:M.to;for(let Q of l.visibleRanges)if(Q.to>B&&Q.from<V)for(let j=Math.max(Q.from,B),N=Math.min(Q.to,V);;){let U=l.state.doc.lineAt(j);for(let z of l.bidiSpans(U)){let $=z.from+U.from,H=z.to+U.from;if($>=N)break;H>j&&P(Math.max($,j),null==O&&$<=B,Math.min(H,N),null==T&&H>=V,z.dir)}if(j=U.to+1,j>=N)break}return 0==E.length&&P(B,null==O,V,null==T,l.textDirection),{top:A,bottom:I,horizontal:E}}function w(O,T){let M=d.top+(T?O.top:O.bottom);return{top:M,bottom:M,horizontal:[]}}}(this.view,u)).reduce((u,h)=>u.concat(h)),c=[];for(let u of l.selection.ranges){let h=u==l.selection.main;if(u.empty?!h||mhe:o.drawRangeCursor){let d=vJe(this.view,u,h);d&&c.push(d)}}return{rangePieces:a,cursors:c}}drawSel({rangePieces:l,cursors:o}){if(l.length!=this.rangePieces.length||l.some((a,c)=>!a.eq(this.rangePieces[c]))){this.selectionLayer.textContent="";for(let a of l)this.selectionLayer.appendChild(a.draw());this.rangePieces=l}if(o.length!=this.cursors.length||o.some((a,c)=>!a.eq(this.cursors[c]))){let a=this.cursorLayer.children;if(a.length!==o.length){this.cursorLayer.textContent="";for(const c of o)this.cursorLayer.appendChild(c.draw())}else o.forEach((c,u)=>c.adjust(a[u]));this.cursors=o}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),yhe={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};mhe&&(yhe[".cm-line"].caretColor="transparent !important");const gJe=d0.highest(Si.theme(yhe));function _he(l){let o=l.scrollDOM.getBoundingClientRect();return{left:(l.textDirection==xs.LTR?o.left:o.right-l.scrollDOM.clientWidth)-l.scrollDOM.scrollLeft,top:o.top-l.scrollDOM.scrollTop}}function bhe(l,o,a){let c=Dt.cursor(o);return{from:Math.max(a.from,l.moveToLineBoundary(c,!1,!0).from),to:Math.min(a.to,l.moveToLineBoundary(c,!0,!0).from),type:$r.Text}}function xhe(l,o){let a=l.lineBlockAt(o);if(Array.isArray(a.type))for(let c of a.type)if(c.to>o||c.to==o&&(c.to==a.to||c.type==$r.Text))return c;return a}function vJe(l,o,a){let c=l.coordsAtPos(o.head,o.assoc||1);if(!c)return null;let u=_he(l);return new vhe(c.left-u.left,c.top-u.top,-1,c.bottom-c.top,a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const Che=Gi.define({map:(l,o)=>null==l?null:o.mapPos(l)}),sw=ao.define({create:()=>null,update:(l,o)=>(null!=l&&(l=o.changes.mapPos(l)),o.effects.reduce((a,c)=>c.is(Che)?c.value:a,l))}),yJe=js.fromClass(class{constructor(l){this.view=l,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(l){var o;let a=l.state.field(sw);null==a?null!=this.cursor&&(null===(o=this.cursor)||void 0===o||o.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(l.startState.field(sw)!=a||l.docChanged||l.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let l=this.view.state.field(sw),o=null!=l&&this.view.coordsAtPos(l);if(!o)return null;let a=this.view.scrollDOM.getBoundingClientRect();return{left:o.left-a.left+this.view.scrollDOM.scrollLeft,top:o.top-a.top+this.view.scrollDOM.scrollTop,height:o.bottom-o.top}}drawCursor(l){this.cursor&&(l?(this.cursor.style.left=l.left+"px",this.cursor.style.top=l.top+"px",this.cursor.style.height=l.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(l){this.view.state.field(sw)!=l&&this.view.dispatch({effects:Che.of(l)})}},{eventHandlers:{dragover(l){this.setDropPos(this.view.posAtCoords({x:l.clientX,y:l.clientY}))},dragleave(l){(l.target==this.view.contentDOM||!this.view.contentDOM.contains(l.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function She(l,o,a,c,u){o.lastIndex=0;for(let f,h=l.iterRange(a,c),d=a;!h.next().done;d+=h.value.length)if(!h.lineBreak)for(;f=o.exec(h.value);)u(d+f.index,f)}class xJe{constructor(o){const{regexp:a,decoration:c,decorate:u,boundary:h,maxLength:d=1e3}=o;if(!a.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=a,u)this.addMatch=(f,p,g,m)=>u(m,g,g+f[0].length,f,p);else if("function"==typeof c)this.addMatch=(f,p,g,m)=>{let v=c(f,p,g);v&&m(g,g+f[0].length,v)};else{if(!c)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(f,p,g,m)=>m(g,g+f[0].length,c)}this.boundary=h,this.maxLength=d}createDeco(o){let a=new ig,c=a.add.bind(a);for(let{from:u,to:h}of function bJe(l,o){let a=l.visibleRanges;if(1==a.length&&a[0].from==l.viewport.from&&a[0].to==l.viewport.to)return a;let c=[];for(let{from:u,to:h}of a)u=Math.max(l.state.doc.lineAt(u).from,u-o),h=Math.min(l.state.doc.lineAt(h).to,h+o),c.length&&c[c.length-1].to>=u?c[c.length-1].to=h:c.push({from:u,to:h});return c}(o,this.maxLength))She(o.state.doc,this.regexp,u,h,(d,f)=>this.addMatch(f,o,d,c));return a.finish()}updateDeco(o,a){let c=1e9,u=-1;return o.docChanged&&o.changes.iterChanges((h,d,f,p)=>{p>o.view.viewport.from&&f<o.view.viewport.to&&(c=Math.min(f,c),u=Math.max(p,u))}),o.viewportChanged||u-c>1e3?this.createDeco(o.view):u>-1?this.updateRange(o.view,a.map(o.changes),c,u):a}updateRange(o,a,c,u){for(let h of o.visibleRanges){let d=Math.max(h.from,c),f=Math.min(h.to,u);if(f>d){let p=o.state.doc.lineAt(d),g=p.to<f?o.state.doc.lineAt(f):p,m=Math.max(h.from,p.from),v=Math.min(h.to,g.to);if(this.boundary){for(;d>p.from;d--)if(this.boundary.test(p.text[d-1-p.from])){m=d;break}for(;f<g.to;f++)if(this.boundary.test(g.text[f-g.from])){v=f;break}}let _,y=[],b=(C,x,S)=>y.push(S.range(C,x));if(p==g)for(this.regexp.lastIndex=m-p.from;(_=this.regexp.exec(p.text))&&_.index<v-p.from;)this.addMatch(_,o,_.index+p.from,b);else She(o.state.doc,this.regexp,m,v,(C,x)=>this.addMatch(x,o,C,b));a=a.update({filterFrom:m,filterTo:v,filter:(C,x)=>C<m||x>v,add:y})}}return a}}const Uz=null!=/x/.unicode?"gu":"g",CJe=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]",Uz),SJe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Hz=null;const wE=Rn.define({combine(l){let o=ah(l,{render:null,specialChars:CJe,addSpecialChars:null});return(o.replaceTabs=!function wJe(){var l;if(null==Hz&&"undefined"!=typeof document&&document.body){let o=document.body.style;Hz=null!=(null!==(l=o.tabSize)&&void 0!==l?l:o.MozTabSize)}return Hz||!1}())&&(o.specialChars=new RegExp("\t|"+o.specialChars.source,Uz)),o.addSpecialChars&&(o.specialChars=new RegExp(o.specialChars.source+"|"+o.addSpecialChars.source,Uz)),o}});function TJe(l={}){return[wE.of(l),whe||(whe=js.fromClass(class{constructor(l){this.view=l,this.decorations=Nn.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(l.state.facet(wE)),this.decorations=this.decorator.createDeco(l)}makeDecorator(l){return new xJe({regexp:l.specialChars,decoration:(o,a,c)=>{let{doc:u}=a.state,h=ia(o[0],0);if(9==h){let d=u.lineAt(c),f=a.state.tabSize,p=qS(d.text,f,c-d.from);return Nn.replace({widget:new EJe((f-p%f)*this.view.defaultCharacterWidth)})}return this.decorationCache[h]||(this.decorationCache[h]=Nn.replace({widget:new MJe(l,h)}))},boundary:l.replaceTabs?void 0:/[^]/})}update(l){let o=l.state.facet(wE);l.startState.facet(wE)!=o?(this.decorator=this.makeDecorator(o),this.decorations=this.decorator.createDeco(l.view)):this.decorations=this.decorator.updateDeco(l,this.decorations)}},{decorations:l=>l.decorations}))]}let whe=null;class MJe extends Af{constructor(o,a){super(),this.options=o,this.code=a}eq(o){return o.code==this.code}toDOM(o){let a=function kJe(l){return l>=32?"\u2022":10==l?"\u2424":String.fromCharCode(9216+l)}(this.code),c=o.state.phrase("Control character")+" "+(SJe[this.code]||"0x"+this.code.toString(16)),u=this.options.render&&this.options.render(this.code,c,a);if(u)return u;let h=document.createElement("span");return h.textContent=a,h.title=c,h.setAttribute("aria-label",c),h.className="cm-specialChar",h}ignoreEvent(){return!1}}class EJe extends Af{constructor(o){super(),this.width=o}eq(o){return o.width==this.width}toDOM(){let o=document.createElement("span");return o.textContent="\t",o.className="cm-tab",o.style.width=this.width+"px",o}ignoreEvent(){return!1}}const IJe=Nn.line({class:"cm-activeLine"}),PJe=js.fromClass(class{constructor(l){this.decorations=this.getDeco(l)}update(l){(l.docChanged||l.selectionSet)&&(this.decorations=this.getDeco(l.view))}getDeco(l){let o=-1,a=[];for(let c of l.state.selection.ranges){let u=l.lineBlockAt(c.head);u.from>o&&(a.push(IJe.range(u.from)),o=u.from)}return Nn.set(a)}},{decorations:l=>l.decorations});function Ohe(l,o){let a=l.posAtCoords({x:o.clientX,y:o.clientY},!1),c=l.state.doc.lineAt(a),u=a-c.from,h=u>2e3?-1:u==c.length?function NJe(l,o){let a=l.coordsAtPos(l.viewport.from);return a?Math.round(Math.abs((a.left-o)/l.defaultCharacterWidth)):-1}(l,o.clientX):qS(c.text,l.state.tabSize,a-c.from);return{line:c.number,col:h,off:u}}function BJe(l){let o=(null==l?void 0:l.eventFilter)||(a=>a.altKey&&0==a.button);return Si.mouseSelectionStyle.of((a,c)=>o(c)?function LJe(l,o){let a=Ohe(l,o),c=l.state.selection;return a?{update(u){if(u.docChanged){let h=u.changes.mapPos(u.startState.doc.line(a.line).from),d=u.state.doc.lineAt(h);a={line:d.number,col:a.col,off:Math.min(a.off,d.length)},c=c.map(u.changes)}},get(u,h,d){let f=Ohe(l,u);if(!f)return c;let p=function FJe(l,o,a){let c=Math.min(o.line,a.line),u=Math.max(o.line,a.line),h=[];if(o.off>2e3||a.off>2e3||o.col<0||a.col<0){let d=Math.min(o.off,a.off),f=Math.max(o.off,a.off);for(let p=c;p<=u;p++){let g=l.doc.line(p);g.length<=f&&h.push(Dt.range(g.from+d,g.to+f))}}else{let d=Math.min(o.col,a.col),f=Math.max(o.col,a.col);for(let p=c;p<=u;p++){let g=l.doc.line(p),m=cz(g.text,d,l.tabSize,!0);if(m>-1){let v=cz(g.text,f,l.tabSize);h.push(Dt.range(g.from+m,g.from+v))}}}return h}(l.state,a,f);return p.length?Dt.create(d?p.concat(c.ranges):p):c}}:null}(a,c):null)}const VJe={Alt:[18,l=>l.altKey],Control:[17,l=>l.ctrlKey],Shift:[16,l=>l.shiftKey],Meta:[91,l=>l.metaKey]},zJe={style:"cursor: crosshair"};function UJe(l={}){let[o,a]=VJe[l.key||"Alt"],c=js.fromClass(class{constructor(u){this.view=u,this.isDown=!1}set(u){this.isDown!=u&&(this.isDown=u,this.view.update([]))}},{eventHandlers:{keydown(u){this.set(u.keyCode==o||a(u))},keyup(u){(u.keyCode==o||!a(u))&&this.set(!1)}}});return[c,Si.contentAttributes.of(u=>{var h;return(null===(h=u.plugin(c))||void 0===h?void 0:h.isDown)?zJe:null})]}const Wz="-10000px";class Dhe{constructor(o,a,c){this.facet=a,this.createTooltipView=c,this.input=o.state.facet(a),this.tooltips=this.input.filter(u=>u),this.tooltipViews=this.tooltips.map(c)}update(o){let a=o.state.facet(this.facet),c=a.filter(h=>h);if(a===this.input){for(let h of this.tooltipViews)h.update&&h.update(o);return!1}let u=[];for(let h=0;h<c.length;h++){let d=c[h],f=-1;if(d){for(let p=0;p<this.tooltips.length;p++){let g=this.tooltips[p];g&&g.create==d.create&&(f=p)}if(f<0)u[h]=this.createTooltipView(d);else{let p=u[h]=this.tooltipViews[f];p.update&&p.update(o)}}}for(let h of this.tooltipViews)u.indexOf(h)<0&&h.dom.remove();return this.input=a,this.tooltips=c,this.tooltipViews=u,!0}}function HJe(l){let{win:o}=l;return{top:0,left:0,bottom:o.innerHeight,right:o.innerWidth}}const TE=Rn.define({combine:l=>{var o,a,c;return{position:Fn.ios?"absolute":(null===(o=l.find(u=>u.position))||void 0===o?void 0:o.position)||"fixed",parent:(null===(a=l.find(u=>u.parent))||void 0===a?void 0:a.parent)||null,tooltipSpace:(null===(c=l.find(u=>u.tooltipSpace))||void 0===c?void 0:c.tooltipSpace)||HJe}}}),Gz=js.fromClass(class{constructor(l){this.view=l,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let o=l.state.facet(TE);this.position=o.position,this.parent=o.parent,this.classes=l.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Dhe(l,OE,a=>this.createTooltip(a)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(a=>{Date.now()>this.lastTransaction-50&&a.length>0&&a[a.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),l.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let l of this.manager.tooltipViews)this.intersectionObserver.observe(l.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(l){l.transactions.length&&(this.lastTransaction=Date.now());let o=this.manager.update(l);o&&this.observeIntersection();let a=o||l.geometryChanged,c=l.state.facet(TE);if(c.position!=this.position){this.position=c.position;for(let u of this.manager.tooltipViews)u.dom.style.position=this.position;a=!0}if(c.parent!=this.parent){this.parent&&this.container.remove(),this.parent=c.parent,this.createContainer();for(let u of this.manager.tooltipViews)this.container.appendChild(u.dom);a=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);a&&this.maybeMeasure()}createTooltip(l){let o=l.create(this.view);if(o.dom.classList.add("cm-tooltip"),l.arrow&&!o.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let a=document.createElement("div");a.className="cm-tooltip-arrow",o.dom.appendChild(a)}return o.dom.style.position=this.position,o.dom.style.top=Wz,this.container.appendChild(o.dom),o.mount&&o.mount(this.view),o}destroy(){var l;this.view.win.removeEventListener("resize",this.measureSoon);for(let{dom:o}of this.manager.tooltipViews)o.remove();null===(l=this.intersectionObserver)||void 0===l||l.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let l=this.view.dom.getBoundingClientRect();return{editor:l,parent:this.parent?this.container.getBoundingClientRect():l,pos:this.manager.tooltips.map((o,a)=>{let c=this.manager.tooltipViews[a];return c.getCoords?c.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(TE).tooltipSpace(this.view)}}writeMeasure(l){let{editor:o,space:a}=l,c=[];for(let u=0;u<this.manager.tooltips.length;u++){let h=this.manager.tooltips[u],d=this.manager.tooltipViews[u],{dom:f}=d,p=l.pos[u],g=l.size[u];if(!p||p.bottom<=Math.max(o.top,a.top)||p.top>=Math.min(o.bottom,a.bottom)||p.right<Math.max(o.left,a.left)-.1||p.left>Math.min(o.right,a.right)+.1){f.style.top=Wz;continue}let m=h.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,v=m?7:0,y=g.right-g.left,_=g.bottom-g.top,b=d.offset||WJe,C=this.view.textDirection==xs.LTR,x=g.width>a.right-a.left?C?a.left:a.right-g.width:C?Math.min(p.left-(m?14:0)+b.x,a.right-y):Math.max(a.left,p.left-y+(m?14:0)-b.x),S=!!h.above;!h.strictSide&&(S?p.top-(g.bottom-g.top)-b.y<a.top:p.bottom+(g.bottom-g.top)+b.y>a.bottom)&&S==a.bottom-p.bottom>p.top-a.top&&(S=!S);let w=S?p.top-_-v-b.y:p.bottom+v+b.y,O=x+y;if(!0!==d.overlap)for(let T of c)T.left<O&&T.right>x&&T.top<w+_&&T.bottom>w&&(w=S?T.top-_-2-v:T.bottom+v+2);"absolute"==this.position?(f.style.top=w-l.parent.top+"px",f.style.left=x-l.parent.left+"px"):(f.style.top=w+"px",f.style.left=x+"px"),m&&(m.style.left=p.left+(C?b.x:-b.x)-(x+14-7)+"px"),!0!==d.overlap&&c.push({left:x,top:w,right:O,bottom:w+_}),f.classList.toggle("cm-tooltip-above",S),f.classList.toggle("cm-tooltip-below",!S),d.positioned&&d.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let l of this.manager.tooltipViews)l.dom.style.top=Wz}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),WJe={x:0,y:0},OE=Rn.define({enables:[Gz,Si.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}})]}),ow=Rn.define();class Qz{constructor(o){this.view=o,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Dhe(o,ow,a=>this.createHostedView(a))}static create(o){return new Qz(o)}createHostedView(o){let a=o.create(this.view);return a.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(a.dom),this.mounted&&a.mount&&a.mount(this.view),a}mount(o){for(let a of this.manager.tooltipViews)a.mount&&a.mount(o);this.mounted=!0}positioned(){for(let o of this.manager.tooltipViews)o.positioned&&o.positioned()}update(o){this.manager.update(o)}}const GJe=OE.compute([ow],l=>{let o=l.facet(ow).filter(a=>a);return 0===o.length?null:{pos:Math.min(...o.map(a=>a.pos)),end:Math.max(...o.filter(a=>null!=a.end).map(a=>a.end)),create:Qz.create,above:o[0].above,arrow:o.some(a=>a.arrow)}});class QJe{constructor(o,a,c,u,h){this.view=o,this.source=a,this.field=c,this.setHover=u,this.hoverTime=h,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:o.dom,time:0},this.checkHover=this.checkHover.bind(this),o.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),o.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let o=Date.now()-this.lastMove.time;o<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-o):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:o}=this,a=this.view.contentDOM.contains(o.target)?this.view.posAtCoords(o):null;if(null==a)return;let c=this.view.coordsAtPos(a);if(null==c||o.y<c.top||o.y>c.bottom||o.x<c.left-this.view.defaultCharacterWidth||o.x>c.right+this.view.defaultCharacterWidth)return;let u=this.view.bidiSpans(this.view.state.doc.lineAt(a)).find(f=>f.from<=a&&f.to>=a),h=u&&u.dir==xs.RTL?-1:1,d=this.source(this.view,a,o.x<c.left?-h:h);if(null==d?void 0:d.then){let f=this.pending={pos:a};d.then(p=>{this.pending==f&&(this.pending=null,p&&this.view.dispatch({effects:this.setHover.of(p)}))},p=>Sc(this.view.state,p,"hover tooltip"))}else d&&this.view.dispatch({effects:this.setHover.of(d)})}mousemove(o){var a;this.lastMove={x:o.clientX,y:o.clientY,target:o.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let c=this.active;if(c&&!function jJe(l){for(let o=l;o;o=o.parentNode)if(1==o.nodeType&&o.classList.contains("cm-tooltip"))return!0;return!1}(this.lastMove.target)||this.pending){let{pos:u}=c||this.pending,h=null!==(a=null==c?void 0:c.end)&&void 0!==a?a:u;(u==h?this.view.posAtCoords(this.lastMove)!=u:!function qJe(l,o,a,c,u,h){let d=document.createRange(),f=l.domAtPos(o),p=l.domAtPos(a);d.setEnd(p.node,p.offset),d.setStart(f.node,f.offset);let g=d.getClientRects();d.detach();for(let m=0;m<g.length;m++){let v=g[m];if(Math.max(v.top-u,u-v.bottom,v.left-c,c-v.right)<=h)return!0}return!1}(this.view,u,h,o.clientX,o.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function ZJe(l,o={}){let a=Gi.define(),c=ao.define({create:()=>null,update(u,h){if(u&&(o.hideOnChange&&(h.docChanged||h.selection)||o.hideOn&&o.hideOn(h,u)))return null;if(u&&h.docChanged){let d=h.changes.mapPos(u.pos,-1,ra.TrackDel);if(null==d)return null;let f=Object.assign(Object.create(null),u);f.pos=d,null!=u.end&&(f.end=h.changes.mapPos(u.end)),u=f}for(let d of h.effects)d.is(a)&&(u=d.value),d.is(YJe)&&(u=null);return u},provide:u=>ow.from(u)});return[c,js.define(u=>new QJe(u,l,c,a,o.hoverTime||300)),GJe]}const YJe=Gi.define(),jz=Rn.define({combine(l){let o,a;for(let c of l)o=o||c.topContainer,a=a||c.bottomContainer;return{topContainer:o,bottomContainer:a}}});function aw(l,o){let a=l.plugin(khe),c=a?a.specs.indexOf(o):-1;return c>-1?a.panels[c]:null}const khe=js.fromClass(class{constructor(l){this.input=l.state.facet(lw),this.specs=this.input.filter(a=>a),this.panels=this.specs.map(a=>a(l));let o=l.state.facet(jz);this.top=new DE(l,!0,o.topContainer),this.bottom=new DE(l,!1,o.bottomContainer),this.top.sync(this.panels.filter(a=>a.top)),this.bottom.sync(this.panels.filter(a=>!a.top));for(let a of this.panels)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}update(l){let o=l.state.facet(jz);this.top.container!=o.topContainer&&(this.top.sync([]),this.top=new DE(l.view,!0,o.topContainer)),this.bottom.container!=o.bottomContainer&&(this.bottom.sync([]),this.bottom=new DE(l.view,!1,o.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let a=l.state.facet(lw);if(a!=this.input){let c=a.filter(p=>p),u=[],h=[],d=[],f=[];for(let p of c){let m,g=this.specs.indexOf(p);g<0?(m=p(l.view),f.push(m)):(m=this.panels[g],m.update&&m.update(l)),u.push(m),(m.top?h:d).push(m)}this.specs=c,this.panels=u,this.top.sync(h),this.bottom.sync(d);for(let p of f)p.dom.classList.add("cm-panel"),p.mount&&p.mount()}else for(let c of this.panels)c.update&&c.update(l)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:l=>Si.scrollMargins.of(o=>{let a=o.plugin(l);return a&&{top:a.top.scrollMargin(),bottom:a.bottom.scrollMargin()}})});class DE{constructor(o,a,c){this.view=o,this.top=a,this.container=c,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(o){for(let a of this.panels)a.destroy&&o.indexOf(a)<0&&a.destroy();this.panels=o,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let a=this.container||this.view.dom;a.insertBefore(this.dom,this.top?a.firstChild:null)}let o=this.dom.firstChild;for(let a of this.panels)if(a.dom.parentNode==this.dom){for(;o!=a.dom;)o=Mhe(o);o=o.nextSibling}else this.dom.insertBefore(a.dom,o);for(;o;)o=Mhe(o)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let o of this.classes.split(" "))o&&this.container.classList.remove(o);for(let o of(this.classes=this.view.themeClasses).split(" "))o&&this.container.classList.add(o)}}}function Mhe(l){let o=l.nextSibling;return l.remove(),o}const lw=Rn.define({enables:khe});class pd extends g0{compare(o){return this==o||this.constructor==o.constructor&&this.eq(o)}eq(o){return!1}destroy(o){}}pd.prototype.elementClass="",pd.prototype.toDOM=void 0,pd.prototype.mapMode=ra.TrackBefore,pd.prototype.startSide=pd.prototype.endSide=-1,pd.prototype.point=!0;const kE=Rn.define(),KJe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>bs.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},cw=Rn.define();function Ehe(l){return[Ahe(),cw.of(Object.assign(Object.assign({},KJe),l))]}const qz=Rn.define({combine:l=>l.some(o=>o)});function Ahe(l){let o=[JJe];return l&&!1===l.fixed&&o.push(qz.of(!0)),o}const JJe=js.fromClass(class{constructor(l){this.view=l,this.prevViewport=l.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=l.state.facet(cw).map(o=>new Rhe(l,o));for(let o of this.gutters)this.dom.appendChild(o.dom);this.fixed=!l.state.facet(qz),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),l.scrollDOM.insertBefore(this.dom,l.contentDOM)}update(l){if(this.updateGutters(l)){let o=this.prevViewport,a=l.view.viewport,c=Math.min(o.to,a.to)-Math.max(o.from,a.from);this.syncGutters(c<.8*(a.to-a.from))}l.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(qz)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=l.view.viewport}syncGutters(l){let o=this.dom.nextSibling;l&&this.dom.remove();let a=bs.iter(this.view.state.facet(kE),this.view.viewport.from),c=[],u=this.gutters.map(h=>new eet(h,this.view.viewport,-this.view.documentPadding.top));for(let h of this.view.viewportLineBlocks){let d;if(Array.isArray(h.type)){for(let f of h.type)if(f.type==$r.Text){d=f;break}}else d=h.type==$r.Text?h:void 0;if(d){c.length&&(c=[]),Phe(a,c,h.from);for(let f of u)f.line(this.view,d,c)}}for(let h of u)h.finish();l&&this.view.scrollDOM.insertBefore(this.dom,o)}updateGutters(l){let o=l.startState.facet(cw),a=l.state.facet(cw),c=l.docChanged||l.heightChanged||l.viewportChanged||!bs.eq(l.startState.facet(kE),l.state.facet(kE),l.view.viewport.from,l.view.viewport.to);if(o==a)for(let u of this.gutters)u.update(l)&&(c=!0);else{c=!0;let u=[];for(let h of a){let d=o.indexOf(h);d<0?u.push(new Rhe(this.view,h)):(this.gutters[d].update(l),u.push(this.gutters[d]))}for(let h of this.gutters)h.dom.remove(),u.indexOf(h)<0&&h.destroy();for(let h of u)this.dom.appendChild(h.dom);this.gutters=u}return c}destroy(){for(let l of this.gutters)l.destroy();this.dom.remove()}},{provide:l=>Si.scrollMargins.of(o=>{let a=o.plugin(l);return a&&0!=a.gutters.length&&a.fixed?o.textDirection==xs.LTR?{left:a.dom.offsetWidth}:{right:a.dom.offsetWidth}:null})});function Ihe(l){return Array.isArray(l)?l:[l]}function Phe(l,o,a){for(;l.value&&l.from<=a;)l.from==a&&o.push(l.value),l.next()}class eet{constructor(o,a,c){this.gutter=o,this.height=c,this.localMarkers=[],this.i=0,this.cursor=bs.iter(o.markers,a.from)}line(o,a,c){this.localMarkers.length&&(this.localMarkers=[]),Phe(this.cursor,this.localMarkers,a.from);let u=c.length?this.localMarkers.concat(c):this.localMarkers,h=this.gutter.config.lineMarker(o,a,u);h&&u.unshift(h);let d=this.gutter;if(0==u.length&&!d.config.renderEmptyElements)return;let f=a.top-this.height;if(this.i==d.elements.length){let p=new Fhe(o,a.height,f,u);d.elements.push(p),d.dom.appendChild(p.dom)}else d.elements[this.i].update(o,a.height,f,u);this.height=a.bottom,this.i++}finish(){let o=this.gutter;for(;o.elements.length>this.i;){let a=o.elements.pop();o.dom.removeChild(a.dom),a.destroy()}}}class Rhe{constructor(o,a){this.view=o,this.config=a,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let c in a.domEventHandlers)this.dom.addEventListener(c,u=>{let h=o.lineBlockAtHeight(u.clientY-o.documentTop);a.domEventHandlers[c](o,h,u)&&u.preventDefault()});this.markers=Ihe(a.markers(o)),a.initialSpacer&&(this.spacer=new Fhe(o,0,0,[a.initialSpacer(o)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(o){let a=this.markers;if(this.markers=Ihe(this.config.markers(o.view)),this.spacer&&this.config.updateSpacer){let u=this.config.updateSpacer(this.spacer.markers[0],o);u!=this.spacer.markers[0]&&this.spacer.update(o.view,0,0,[u])}let c=o.view.viewport;return!bs.eq(this.markers,a,c.from,c.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(o)}destroy(){for(let o of this.elements)o.destroy()}}class Fhe{constructor(o,a,c,u){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(o,a,c,u)}update(o,a,c,u){this.height!=a&&(this.dom.style.height=(this.height=a)+"px"),this.above!=c&&(this.dom.style.marginTop=(this.above=c)?c+"px":""),function tet(l,o){if(l.length!=o.length)return!1;for(let a=0;a<l.length;a++)if(!l[a].compare(o[a]))return!1;return!0}(this.markers,u)||this.setMarkers(o,u)}setMarkers(o,a){let c="cm-gutterElement",u=this.dom.firstChild;for(let h=0,d=0;;){let f=d,p=h<a.length?a[h++]:null,g=!1;if(p){let m=p.elementClass;m&&(c+=" "+m);for(let v=d;v<this.markers.length;v++)if(this.markers[v].compare(p)){f=v,g=!0;break}}else f=this.markers.length;for(;d<f;){let m=this.markers[d++];if(m.toDOM){m.destroy(u);let v=u.nextSibling;u.remove(),u=v}}if(!p)break;p.toDOM&&(g?u=u.nextSibling:this.dom.insertBefore(p.toDOM(o),u)),g&&d++}this.dom.className=c,this.markers=a}destroy(){this.setMarkers(null,[])}}const net=Rn.define(),W_=Rn.define({combine:l=>ah(l,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(o,a){let c=Object.assign({},o);for(let u in a){let h=c[u],d=a[u];c[u]=h?(f,p,g)=>h(f,p,g)||d(f,p,g):d}return c}})});class Zz extends pd{constructor(o){super(),this.number=o}eq(o){return this.number==o.number}toDOM(){return document.createTextNode(this.number)}}function Xz(l,o){return l.state.facet(W_).formatNumber(o,l.state)}const iet=cw.compute([W_],l=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:o=>o.state.facet(net),lineMarker:(o,a,c)=>c.some(u=>u.toDOM)?null:new Zz(Xz(o,o.state.doc.lineAt(a.from).number)),lineMarkerChange:o=>o.startState.facet(W_)!=o.state.facet(W_),initialSpacer:o=>new Zz(Xz(o,Nhe(o.state.doc.lines))),updateSpacer(o,a){let c=Xz(a.view,Nhe(a.view.state.doc.lines));return c==o.number?o:new Zz(c)},domEventHandlers:l.facet(W_).domEventHandlers}));function ret(l={}){return[W_.of(l),Ahe(),iet]}function Nhe(l){let o=9;for(;o<l;)o=10*o+9;return o}const set=new class extends pd{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},oet=kE.compute(["selection"],l=>{let o=[],a=-1;for(let c of l.selection.ranges){let u=l.doc.lineAt(c.head).from;u>a&&(a=u,o.push(set.range(u)))}return bs.of(o)}),Lhe=1024;let cet=0;class lu{constructor(o,a){this.from=o,this.to=a}}class Qi{constructor(o={}){this.id=cet++,this.perNode=!!o.perNode,this.deserialize=o.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(o){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof o&&(o=hl.match(o)),a=>{let c=o(a);return void 0===c?null:[this,c]}}}Qi.closedBy=new Qi({deserialize:l=>l.split(" ")}),Qi.openedBy=new Qi({deserialize:l=>l.split(" ")}),Qi.group=new Qi({deserialize:l=>l.split(" ")}),Qi.contextHash=new Qi({perNode:!0}),Qi.lookAhead=new Qi({perNode:!0}),Qi.mounted=new Qi({perNode:!0});const het=Object.create(null);class hl{constructor(o,a,c,u=0){this.name=o,this.props=a,this.id=c,this.flags=u}static define(o){let a=o.props&&o.props.length?Object.create(null):het,u=new hl(o.name||"",a,o.id,(o.top?1:0)|(o.skipped?2:0)|(o.error?4:0)|(null==o.name?8:0));if(o.props)for(let h of o.props)if(Array.isArray(h)||(h=h(u)),h){if(h[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");a[h[0].id]=h[1]}return u}prop(o){return this.props[o.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(o){if("string"==typeof o){if(this.name==o)return!0;let a=this.prop(Qi.group);return!!a&&a.indexOf(o)>-1}return this.id==o}static match(o){let a=Object.create(null);for(let c in o)for(let u of c.split(" "))a[u]=o[c];return c=>{for(let u=c.prop(Qi.group),h=-1;h<(u?u.length:0);h++){let d=a[h<0?c.name:u[h]];if(d)return d}}}}hl.none=new hl("",Object.create(null),0,8);class ME{constructor(o){this.types=o;for(let a=0;a<o.length;a++)if(o[a].id!=a)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...o){let a=[];for(let c of this.types){let u=null;for(let h of o){let d=h(c);d&&(u||(u=Object.assign({},c.props)),u[d[0].id]=d[1])}a.push(u?new hl(c.name,u,c.id,c.flags):c)}return new ME(a)}}const EE=new WeakMap,Bhe=new WeakMap;var Kr=(()=>(function(l){l[l.ExcludeBuffers=1]="ExcludeBuffers",l[l.IncludeAnonymous=2]="IncludeAnonymous",l[l.IgnoreMounts=4]="IgnoreMounts",l[l.IgnoreOverlays=8]="IgnoreOverlays"}(Kr||(Kr={})),Kr))();class Ss{constructor(o,a,c,u,h){if(this.type=o,this.children=a,this.positions=c,this.length=u,this.props=null,h&&h.length){this.props=Object.create(null);for(let[d,f]of h)this.props["number"==typeof d?d:d.id]=f}}toString(){let o=this.prop(Qi.mounted);if(o&&!o.overlay)return o.tree.toString();let a="";for(let c of this.children){let u=c.toString();u&&(a&&(a+=","),a+=u)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(a.length?"("+a+")":""):a}cursor(o=0){return new uw(this.topNode,o)}cursorAt(o,a=0,c=0){let u=EE.get(this)||this.topNode,h=new uw(u);return h.moveTo(o,a),EE.set(this,h._tree),h}get topNode(){return new cu(this,0,0,null)}resolve(o,a=0){let c=G_(EE.get(this)||this.topNode,o,a,!1);return EE.set(this,c),c}resolveInner(o,a=0){let c=G_(Bhe.get(this)||this.topNode,o,a,!0);return Bhe.set(this,c),c}iterate(o){let{enter:a,leave:c,from:u=0,to:h=this.length}=o;for(let d=this.cursor((o.mode||0)|Kr.IncludeAnonymous);;){let f=!1;if(d.from<=h&&d.to>=u&&(d.type.isAnonymous||!1!==a(d))){if(d.firstChild())continue;f=!0}for(;f&&c&&!d.type.isAnonymous&&c(d),!d.nextSibling();){if(!d.parent())return;f=!0}}}prop(o){return o.perNode?this.props?this.props[o.id]:void 0:this.type.prop(o)}get propValues(){let o=[];if(this.props)for(let a in this.props)o.push([+a,this.props[a]]);return o}balance(o={}){return this.children.length<=8?this:Jz(hl.none,this.children,this.positions,0,this.children.length,0,this.length,(a,c,u)=>new Ss(this.type,a,c,u,this.propValues),o.makeTree||((a,c,u)=>new Ss(hl.none,a,c,u)))}static build(o){return function fet(l){var o;let{buffer:a,nodeSet:c,maxBufferLength:u=Lhe,reused:h=[],minRepeatType:d=c.types.length}=l,f=Array.isArray(a)?new Yz(a,a.length):a,p=c.types,g=0,m=0;function v(T,M,A,I,E){let{id:P,start:B,end:V,size:Q}=f,j=m;for(;Q<0;){if(f.next(),-1==Q)return A.push(h[P]),void I.push(B-T);if(-3==Q)return void(g=P);if(-4==Q)return void(m=P);throw new RangeError(`Unrecognized record size: ${Q}`)}let U,z,N=p[P],$=B-T;if(V-B<=u&&(z=function C(T,M){let A=f.fork(),I=0,E=0,P=0,B=A.end-u,V={size:0,start:0,skip:0};e:for(let Q=A.pos-T;A.pos>Q;){let j=A.size;if(A.id==M&&j>=0){V.size=I,V.start=E,V.skip=P,P+=4,I+=4,A.next();continue}let N=A.pos-j;if(j<0||N<Q||A.start<B)break;let U=A.id>=d?4:0,z=A.start;for(A.next();A.pos>N;){if(A.size<0){if(-3!=A.size)break e;U+=4}else A.id>=d&&(U+=4);A.next()}E=z,I+=j,P+=U}return(M<0||I==T)&&(V.size=I,V.start=E,V.skip=P),V.size>4?V:void 0}(f.pos-M,E))){let H=new Uint16Array(z.size-z.skip),G=f.pos-z.size,W=H.length;for(;f.pos>G;)W=x(z.start,H,W);U=new y0(H,V-z.start,c),$=z.start-T}else{let H=f.pos-Q;f.next();let G=[],W=[],X=P>=d?P:-1,K=0,ae=V;for(;f.pos>H;)X>=0&&f.id==X&&f.size>=0?(f.end<=ae-u&&(_(G,W,B,K,f.end,ae,X,j),K=G.length,ae=f.end),f.next()):v(B,H,G,W,X);if(X>=0&&K>0&&K<G.length&&_(G,W,B,K,B,ae,X,j),G.reverse(),W.reverse(),X>-1&&K>0){let se=function y(T){return(M,A,I)=>{let B,V,E=0,P=M.length-1;if(P>=0&&(B=M[P])instanceof Ss){if(!P&&B.type==T&&B.length==I)return B;(V=B.prop(Qi.lookAhead))&&(E=A[P]+B.length+V)}return b(T,M,A,I,E)}}(N);U=Jz(N,G,W,0,G.length,0,V-B,se,se)}else U=b(N,G,W,V-B,j-V)}A.push(U),I.push($)}function _(T,M,A,I,E,P,B,V){let Q=[],j=[];for(;T.length>I;)Q.push(T.pop()),j.push(M.pop()+A-E);T.push(b(c.types[B],Q,j,P-E,V-P)),M.push(E-A)}function b(T,M,A,I,E=0,P){if(g){let B=[Qi.contextHash,g];P=P?[B].concat(P):[B]}if(E>25){let B=[Qi.lookAhead,E];P=P?[B].concat(P):[B]}return new Ss(T,M,A,I,P)}function x(T,M,A){let{id:I,start:E,end:P,size:B}=f;if(f.next(),B>=0&&I<d){let V=A;if(B>4){let Q=f.pos-(B-4);for(;f.pos>Q;)A=x(T,M,A)}M[--A]=V,M[--A]=P-T,M[--A]=E-T,M[--A]=I}else-3==B?g=I:-4==B&&(m=I);return A}let S=[],w=[];for(;f.pos>0;)v(l.start||0,l.bufferStart||0,S,w,-1);let O=null!==(o=l.length)&&void 0!==o?o:S.length?w[0]+S[0].length:0;return new Ss(p[l.topID],S.reverse(),w.reverse(),O)}(o)}}Ss.empty=new Ss(hl.none,[],[],0);class Yz{constructor(o,a){this.buffer=o,this.index=a}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Yz(this.buffer,this.index)}}class y0{constructor(o,a,c){this.buffer=o,this.length=a,this.set=c}get type(){return hl.none}toString(){let o=[];for(let a=0;a<this.buffer.length;)o.push(this.childString(a)),a=this.buffer[a+3];return o.join(",")}childString(o){let c=this.buffer[o+3],u=this.set.types[this.buffer[o]],h=u.name;if(/\W/.test(h)&&!u.isError&&(h=JSON.stringify(h)),c==(o+=4))return h;let d=[];for(;o<c;)d.push(this.childString(o)),o=this.buffer[o+3];return h+"("+d.join(",")+")"}findChild(o,a,c,u,h){let{buffer:d}=this,f=-1;for(let p=o;p!=a&&!(Vhe(h,u,d[p+1],d[p+2])&&(f=p,c>0));p=d[p+3]);return f}slice(o,a,c,u){let h=this.buffer,d=new Uint16Array(a-o);for(let f=o,p=0;f<a;)d[p++]=h[f++],d[p++]=h[f++]-c,d[p++]=h[f++]-c,d[p++]=h[f++]-o;return new y0(d,u-c,this.set)}}function Vhe(l,o,a,c){switch(l){case-2:return a<o;case-1:return c>=o&&a<o;case 0:return a<o&&c>o;case 1:return a<=o&&c>o;case 2:return c>o;case 4:return!0}}function zhe(l,o){let a=l.childBefore(o);for(;a;){let c=a.lastChild;if(!c||c.to!=a.to)break;c.type.isError&&c.from==c.to?(l=a,a=c.prevSibling):a=c}return l}function G_(l,o,a,c){for(var u;l.from==l.to||(a<1?l.from>=o:l.from>o)||(a>-1?l.to<=o:l.to<o);){let d=!c&&l instanceof cu&&l.index<0?null:l.parent;if(!d)return l;l=d}let h=c?0:Kr.IgnoreOverlays;if(c)for(let d=l,f=d.parent;f;d=f,f=d.parent)d instanceof cu&&d.index<0&&(null===(u=f.enter(o,a,h))||void 0===u?void 0:u.from)!=d.from&&(l=f);for(;;){let d=l.enter(o,a,h);if(!d)return l;l=d}}class cu{constructor(o,a,c,u){this._tree=o,this.from=a,this.index=c,this._parent=u}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(o,a,c,u,h=0){for(let d=this;;){for(let{children:f,positions:p}=d._tree,g=a>0?f.length:-1;o!=g;o+=a){let m=f[o],v=p[o]+d.from;if(Vhe(u,c,v,v+m.length))if(m instanceof y0){if(h&Kr.ExcludeBuffers)continue;let y=m.findChild(0,m.buffer.length,a,c-v,u);if(y>-1)return new gd(new det(d,m,o,v),null,y)}else if(h&Kr.IncludeAnonymous||!m.type.isAnonymous||Kz(m)){let y;if(!(h&Kr.IgnoreMounts)&&m.props&&(y=m.prop(Qi.mounted))&&!y.overlay)return new cu(y.tree,v,o,d);let _=new cu(m,v,o,d);return h&Kr.IncludeAnonymous||!_.type.isAnonymous?_:_.nextChild(a<0?m.children.length-1:0,a,c,u)}}if(h&Kr.IncludeAnonymous||!d.type.isAnonymous||(o=d.index>=0?d.index+a:a<0?-1:d._parent._tree.children.length,d=d._parent,!d))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(o){return this.nextChild(0,1,o,2)}childBefore(o){return this.nextChild(this._tree.children.length-1,-1,o,-2)}enter(o,a,c=0){let u;if(!(c&Kr.IgnoreOverlays)&&(u=this._tree.prop(Qi.mounted))&&u.overlay){let h=o-this.from;for(let{from:d,to:f}of u.overlay)if((a>0?d<=h:d<h)&&(a<0?f>=h:f>h))return new cu(u.tree,u.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,o,a,c)}nextSignificantParent(){let o=this;for(;o.type.isAnonymous&&o._parent;)o=o._parent;return o}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(o=0){return new uw(this,o)}get tree(){return this._tree}toTree(){return this._tree}resolve(o,a=0){return G_(this,o,a,!1)}resolveInner(o,a=0){return G_(this,o,a,!0)}enterUnfinishedNodesBefore(o){return zhe(this,o)}getChild(o,a=null,c=null){let u=AE(this,o,a,c);return u.length?u[0]:null}getChildren(o,a=null,c=null){return AE(this,o,a,c)}toString(){return this._tree.toString()}get node(){return this}matchContext(o){return IE(this,o)}}function AE(l,o,a,c){let u=l.cursor(),h=[];if(!u.firstChild())return h;if(null!=a)for(;!u.type.is(a);)if(!u.nextSibling())return h;for(;;){if(null!=c&&u.type.is(c))return h;if(u.type.is(o)&&h.push(u.node),!u.nextSibling())return null==c?h:[]}}function IE(l,o,a=o.length-1){for(let c=l.parent;a>=0;c=c.parent){if(!c)return!1;if(!c.type.isAnonymous){if(o[a]&&o[a]!=c.name)return!1;a--}}return!0}class det{constructor(o,a,c,u){this.parent=o,this.buffer=a,this.index=c,this.start=u}}class gd{constructor(o,a,c){this.context=o,this._parent=a,this.index=c,this.type=o.buffer.set.types[o.buffer.buffer[c]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(o,a,c){let{buffer:u}=this.context,h=u.findChild(this.index+4,u.buffer[this.index+3],o,a-this.context.start,c);return h<0?null:new gd(this.context,this,h)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(o){return this.child(1,o,2)}childBefore(o){return this.child(-1,o,-2)}enter(o,a,c=0){if(c&Kr.ExcludeBuffers)return null;let{buffer:u}=this.context,h=u.findChild(this.index+4,u.buffer[this.index+3],a>0?1:-1,o-this.context.start,a);return h<0?null:new gd(this.context,this,h)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(o){return this._parent?null:this.context.parent.nextChild(this.context.index+o,o,0,4)}get nextSibling(){let{buffer:o}=this.context,a=o.buffer[this.index+3];return a<(this._parent?o.buffer[this._parent.index+3]:o.buffer.length)?new gd(this.context,this._parent,a):this.externalSibling(1)}get prevSibling(){let{buffer:o}=this.context,a=this._parent?this._parent.index+4:0;return this.index==a?this.externalSibling(-1):new gd(this.context,this._parent,o.findChild(a,this.index,-1,0,4))}cursor(o=0){return new uw(this,o)}get tree(){return null}toTree(){let o=[],a=[],{buffer:c}=this.context,u=this.index+4,h=c.buffer[this.index+3];return h>u&&(o.push(c.slice(u,h,c.buffer[this.index+1],c.buffer[this.index+2])),a.push(0)),new Ss(this.type,o,a,this.to-this.from)}resolve(o,a=0){return G_(this,o,a,!1)}resolveInner(o,a=0){return G_(this,o,a,!0)}enterUnfinishedNodesBefore(o){return zhe(this,o)}toString(){return this.context.buffer.childString(this.index)}getChild(o,a=null,c=null){let u=AE(this,o,a,c);return u.length?u[0]:null}getChildren(o,a=null,c=null){return AE(this,o,a,c)}get node(){return this}matchContext(o){return IE(this,o)}}class uw{constructor(o,a=0){if(this.mode=a,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,o instanceof cu)this.yieldNode(o);else{this._tree=o.context.parent,this.buffer=o.context;for(let c=o._parent;c;c=c._parent)this.stack.unshift(c.index);this.bufferNode=o,this.yieldBuf(o.index)}}get name(){return this.type.name}yieldNode(o){return!!o&&(this._tree=o,this.type=o.type,this.from=o.from,this.to=o.to,!0)}yieldBuf(o,a){this.index=o;let{start:c,buffer:u}=this.buffer;return this.type=a||u.set.types[u.buffer[o]],this.from=c+u.buffer[o+1],this.to=c+u.buffer[o+2],!0}yield(o){return!!o&&(o instanceof cu?(this.buffer=null,this.yieldNode(o)):(this.buffer=o.context,this.yieldBuf(o.index,o.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(o,a,c){if(!this.buffer)return this.yield(this._tree.nextChild(o<0?this._tree._tree.children.length-1:0,o,a,c,this.mode));let{buffer:u}=this.buffer,h=u.findChild(this.index+4,u.buffer[this.index+3],o,a-this.buffer.start,c);return!(h<0)&&(this.stack.push(this.index),this.yieldBuf(h))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(o){return this.enterChild(1,o,2)}childBefore(o){return this.enterChild(-1,o,-2)}enter(o,a,c=this.mode){return this.buffer?!(c&Kr.ExcludeBuffers)&&this.enterChild(1,o,a):this.yield(this._tree.enter(o,a,c))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Kr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let o=this.mode&Kr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(o)}sibling(o){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+o,o,0,4,this.mode));let{buffer:a}=this.buffer,c=this.stack.length-1;if(o<0){let u=c<0?0:this.stack[c]+4;if(this.index!=u)return this.yieldBuf(a.findChild(u,this.index,-1,0,4))}else{let u=a.buffer[this.index+3];if(u<(c<0?a.buffer.length:a.buffer[this.stack[c]+3]))return this.yieldBuf(u)}return c<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+o,o,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(o){let a,c,{buffer:u}=this;if(u){if(o>0){if(this.index<u.buffer.buffer.length)return!1}else for(let h=0;h<this.index;h++)if(u.buffer.buffer[h+3]<this.index)return!1;({index:a,parent:c}=u)}else({index:a,_parent:c}=this._tree);for(;c;({index:a,_parent:c}=c))if(a>-1)for(let h=a+o,d=o<0?-1:c._tree.children.length;h!=d;h+=o){let f=c._tree.children[h];if(this.mode&Kr.IncludeAnonymous||f instanceof y0||!f.type.isAnonymous||Kz(f))return!1}return!0}move(o,a){if(a&&this.enterChild(o,0,4))return!0;for(;;){if(this.sibling(o))return!0;if(this.atLastNode(o)||!this.parent())return!1}}next(o=!0){return this.move(1,o)}prev(o=!0){return this.move(-1,o)}moveTo(o,a=0){for(;(this.from==this.to||(a<1?this.from>=o:this.from>o)||(a>-1?this.to<=o:this.to<o))&&this.parent(););for(;this.enterChild(1,o,a););return this}get node(){if(!this.buffer)return this._tree;let o=this.bufferNode,a=null,c=0;if(o&&o.context==this.buffer)e:for(let u=this.index,h=this.stack.length;h>=0;){for(let d=o;d;d=d._parent)if(d.index==u){if(u==this.index)return d;a=d,c=h+1;break e}u=this.stack[--h]}for(let u=c;u<this.stack.length;u++)a=new gd(this.buffer,a,this.stack[u]);return this.bufferNode=new gd(this.buffer,a,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(o,a){for(let c=0;;){let u=!1;if(this.type.isAnonymous||!1!==o(this)){if(this.firstChild()){c++;continue}this.type.isAnonymous||(u=!0)}for(;u&&a&&a(this),u=this.type.isAnonymous,!this.nextSibling();){if(!c)return;this.parent(),c--,u=!0}}}matchContext(o){if(!this.buffer)return IE(this.node,o);let{buffer:a}=this.buffer,{types:c}=a.set;for(let u=o.length-1,h=this.stack.length-1;u>=0;h--){if(h<0)return IE(this.node,o,u);let d=c[a.buffer[this.stack[h]]];if(!d.isAnonymous){if(o[u]&&o[u]!=d.name)return!1;u--}}return!0}}function Kz(l){return l.children.some(o=>o instanceof y0||!o.type.isAnonymous||Kz(o))}const Uhe=new WeakMap;function PE(l,o){if(!l.isAnonymous||o instanceof y0||o.type!=l)return 1;let a=Uhe.get(o);if(null==a){a=1;for(let c of o.children){if(c.type!=l||!(c instanceof Ss)){a=1;break}a+=PE(l,c)}Uhe.set(o,a)}return a}function Jz(l,o,a,c,u,h,d,f,p){let g=0;for(let b=c;b<u;b++)g+=PE(l,o[b]);let m=Math.ceil(1.5*g/8),v=[],y=[];return function _(b,C,x,S,w){for(let O=x;O<S;){let T=O,M=C[O],A=PE(l,b[O]);for(O++;O<S;O++){let I=PE(l,b[O]);if(A+I>=m)break;A+=I}if(O==T+1){if(A>m){let I=b[T];_(I.children,I.positions,0,I.children.length,C[T]+w);continue}v.push(b[T])}else v.push(Jz(l,b,C,T,O,M,C[O-1]+b[O-1].length-M,null,p));y.push(M+w-h)}}(o,a,c,u,0),(f||p)(v,y,d)}class pet{constructor(){this.map=new WeakMap}setBuffer(o,a,c){let u=this.map.get(o);u||this.map.set(o,u=new Map),u.set(a,c)}getBuffer(o,a){let c=this.map.get(o);return c&&c.get(a)}set(o,a){o instanceof gd?this.setBuffer(o.context.buffer,o.index,a):o instanceof cu&&this.map.set(o.tree,a)}get(o){return o instanceof gd?this.getBuffer(o.context.buffer,o.index):o instanceof cu?this.map.get(o.tree):void 0}cursorSet(o,a){o.buffer?this.setBuffer(o.buffer.buffer,o.index,a):this.map.set(o.tree,a)}cursorGet(o){return o.buffer?this.getBuffer(o.buffer.buffer,o.index):this.map.get(o.tree)}}class If{constructor(o,a,c,u,h=!1,d=!1){this.from=o,this.to=a,this.tree=c,this.offset=u,this.open=(h?1:0)|(d?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(o,a=[],c=!1){let u=[new If(0,o.length,o,0,!1,c)];for(let h of a)h.to>o.length&&u.push(h);return u}static applyChanges(o,a,c=128){if(!a.length)return o;let u=[],h=1,d=o.length?o[0]:null;for(let f=0,p=0,g=0;;f++){let m=f<a.length?a[f]:null,v=m?m.fromA:1e9;if(v-p>=c)for(;d&&d.from<v;){let y=d;if(p>=y.from||v<=y.to||g){let _=Math.max(y.from,p)-g,b=Math.min(y.to,v)-g;y=_>=b?null:new If(_,b,y.tree,y.offset+g,f>0,!!m)}if(y&&u.push(y),d.to>v)break;d=h<o.length?o[h++]:null}if(!m)break;p=m.toA,g=m.toA-m.toB}return u}}class Hhe{startParse(o,a,c){return"string"==typeof o&&(o=new get(o)),c=c?c.length?c.map(u=>new lu(u.from,u.to)):[new lu(0,0)]:[new lu(0,o.length)],this.createParse(o,a||[],c)}parse(o,a,c){let u=this.startParse(o,a,c);for(;;){let h=u.advance();if(h)return h}}}class get{constructor(o){this.string=o}get length(){return this.string.length}chunk(o){return this.string.slice(o)}get lineChunks(){return!1}read(o,a){return this.string.slice(o,a)}}new Qi({perNode:!0});let Cet=0;class md{constructor(o,a,c){this.set=o,this.base=a,this.modified=c,this.id=Cet++}static define(o){if(null==o?void 0:o.base)throw new Error("Can not derive from a modified tag");let a=new md([],null,[]);if(a.set.push(a),o)for(let c of o.set)a.set.push(c);return a}static defineModifier(){let o=new RE;return a=>a.modified.indexOf(o)>-1?a:RE.get(a.base||a,a.modified.concat(o).sort((c,u)=>c.id-u.id))}}let wet=0;class RE{constructor(){this.instances=[],this.id=wet++}static get(o,a){if(!a.length)return o;let c=a[0].instances.find(f=>f.base==o&&function Tet(l,o){return l.length==o.length&&l.every((a,c)=>a==o[c])}(a,f.modified));if(c)return c;let u=[],h=new md(u,o,a);for(let f of a)f.instances.push(h);let d=qhe(a);for(let f of o.set)for(let p of d)u.push(RE.get(f,p));return h}}function qhe(l){let o=[l];for(let a=0;a<l.length;a++)for(let c of qhe(l.slice(0,a).concat(l.slice(a+1))))o.push(c);return o}function Zhe(l){let o=Object.create(null);for(let a in l){let c=l[a];Array.isArray(c)||(c=[c]);for(let u of a.split(" "))if(u){let h=[],d=2,f=u;for(let v=0;;){if("..."==f&&v>0&&v+3==u.length){d=1;break}let y=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(f);if(!y)throw new RangeError("Invalid path: "+u);if(h.push("*"==y[0]?"":'"'==y[0][0]?JSON.parse(y[0]):y[0]),v+=y[0].length,v==u.length)break;let _=u[v++];if(v==u.length&&"!"==_){d=0;break}if("/"!=_)throw new RangeError("Invalid path: "+u);f=u.slice(v)}let p=h.length-1,g=h[p];if(!g)throw new RangeError("Invalid path: "+u);let m=new FE(c,d,p>0?h.slice(0,p):null);o[g]=m.sort(o[g])}}return Xhe.add(o)}const Xhe=new Qi;class FE{constructor(o,a,c,u){this.tags=o,this.mode=a,this.context=c,this.next=u}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(o){return!o||o.depth<this.depth?(this.next=o,this):(o.next=this.sort(o.next),o)}get depth(){return this.context?this.context.length:0}}function Yhe(l,o){let a=Object.create(null);for(let h of l)if(Array.isArray(h.tag))for(let d of h.tag)a[d.id]=h.class;else a[h.tag.id]=h.class;let{scope:c,all:u=null}=o||{};return{style:h=>{let d=u;for(let f of h)for(let p of f.set){let g=a[p.id];if(g){d=d?d+" "+g:g;break}}return d},scope:c}}function Det(l,o,a,c=0,u=l.length){let h=new ket(c,Array.isArray(o)?o:[o],a);h.highlightRange(l.cursor(),c,u,"",h.highlighters),h.flush(u)}FE.empty=new FE([],2,null);class ket{constructor(o,a,c){this.at=o,this.highlighters=a,this.span=c,this.class=""}startSpan(o,a){a!=this.class&&(this.flush(o),o>this.at&&(this.at=o),this.class=a)}flush(o){o>this.at&&this.class&&this.span(this.at,o,this.class)}highlightRange(o,a,c,u,h){let{type:d,from:f,to:p}=o;if(f>=c||p<=a)return;d.isTop&&(h=this.highlighters.filter(_=>!_.scope||_.scope(d)));let g=u,m=function Met(l){let o=l.type.prop(Xhe);for(;o&&o.context&&!l.matchContext(o.context);)o=o.next;return o||null}(o)||FE.empty,v=function Oet(l,o){let a=null;for(let c of l){let u=c.style(o);u&&(a=a?a+" "+u:u)}return a}(h,m.tags);if(v&&(g&&(g+=" "),g+=v,1==m.mode&&(u+=(u?" ":"")+v)),this.startSpan(o.from,g),m.opaque)return;let y=o.tree&&o.tree.prop(Qi.mounted);if(y&&y.overlay){let _=o.node.enter(y.overlay[0].from+f,1),b=this.highlighters.filter(x=>!x.scope||x.scope(y.tree.type)),C=o.firstChild();for(let x=0,S=f;;x++){let w=x<y.overlay.length?y.overlay[x]:null,O=w?w.from+f:p,T=Math.max(a,S),M=Math.min(c,O);if(T<M&&C)for(;o.from<M&&(this.highlightRange(o,T,M,u,h),this.startSpan(Math.min(c,o.to),g),!(o.to>=O)&&o.nextSibling()););if(!w||O>c)break;S=w.to+f,S>a&&(this.highlightRange(_.cursor(),Math.max(a,w.from+f),Math.min(c,S),u,b),this.startSpan(S,g))}C&&o.parent()}else if(o.firstChild()){do{if(!(o.to<=a)){if(o.from>=c)break;this.highlightRange(o,a,c,u,h),this.startSpan(Math.min(c,o.to),g)}}while(o.nextSibling());o.parent()}}}const tn=md.define,NE=tn(),hg=tn(),Khe=tn(hg),Jhe=tn(hg),dg=tn(),LE=tn(dg),tU=tn(dg),vd=tn(),_0=tn(vd),yd=tn(),_d=tn(),nU=tn(),hw=tn(nU),BE=tn(),Be={comment:NE,lineComment:tn(NE),blockComment:tn(NE),docComment:tn(NE),name:hg,variableName:tn(hg),typeName:Khe,tagName:tn(Khe),propertyName:Jhe,attributeName:tn(Jhe),className:tn(hg),labelName:tn(hg),namespace:tn(hg),macroName:tn(hg),literal:dg,string:LE,docString:tn(LE),character:tn(LE),attributeValue:tn(LE),number:tU,integer:tn(tU),float:tn(tU),bool:tn(dg),regexp:tn(dg),escape:tn(dg),color:tn(dg),url:tn(dg),keyword:yd,self:tn(yd),null:tn(yd),atom:tn(yd),unit:tn(yd),modifier:tn(yd),operatorKeyword:tn(yd),controlKeyword:tn(yd),definitionKeyword:tn(yd),moduleKeyword:tn(yd),operator:_d,derefOperator:tn(_d),arithmeticOperator:tn(_d),logicOperator:tn(_d),bitwiseOperator:tn(_d),compareOperator:tn(_d),updateOperator:tn(_d),definitionOperator:tn(_d),typeOperator:tn(_d),controlOperator:tn(_d),punctuation:nU,separator:tn(nU),bracket:hw,angleBracket:tn(hw),squareBracket:tn(hw),paren:tn(hw),brace:tn(hw),content:vd,heading:_0,heading1:tn(_0),heading2:tn(_0),heading3:tn(_0),heading4:tn(_0),heading5:tn(_0),heading6:tn(_0),contentSeparator:tn(vd),list:tn(vd),quote:tn(vd),emphasis:tn(vd),strong:tn(vd),link:tn(vd),monospace:tn(vd),strikethrough:tn(vd),inserted:tn(),deleted:tn(),changed:tn(),invalid:tn(),meta:BE,documentMeta:tn(BE),annotation:tn(BE),processingInstruction:tn(BE),definition:md.defineModifier(),constant:md.defineModifier(),function:md.defineModifier(),standard:md.defineModifier(),local:md.defineModifier(),special:md.defineModifier()};var iU;Yhe([{tag:Be.link,class:"tok-link"},{tag:Be.heading,class:"tok-heading"},{tag:Be.emphasis,class:"tok-emphasis"},{tag:Be.strong,class:"tok-strong"},{tag:Be.keyword,class:"tok-keyword"},{tag:Be.atom,class:"tok-atom"},{tag:Be.bool,class:"tok-bool"},{tag:Be.url,class:"tok-url"},{tag:Be.labelName,class:"tok-labelName"},{tag:Be.inserted,class:"tok-inserted"},{tag:Be.deleted,class:"tok-deleted"},{tag:Be.literal,class:"tok-literal"},{tag:Be.string,class:"tok-string"},{tag:Be.number,class:"tok-number"},{tag:[Be.regexp,Be.escape,Be.special(Be.string)],class:"tok-string2"},{tag:Be.variableName,class:"tok-variableName"},{tag:Be.local(Be.variableName),class:"tok-variableName tok-local"},{tag:Be.definition(Be.variableName),class:"tok-variableName tok-definition"},{tag:Be.special(Be.variableName),class:"tok-variableName2"},{tag:Be.definition(Be.propertyName),class:"tok-propertyName tok-definition"},{tag:Be.typeName,class:"tok-typeName"},{tag:Be.namespace,class:"tok-namespace"},{tag:Be.className,class:"tok-className"},{tag:Be.macroName,class:"tok-macroName"},{tag:Be.propertyName,class:"tok-propertyName"},{tag:Be.operator,class:"tok-operator"},{tag:Be.comment,class:"tok-comment"},{tag:Be.meta,class:"tok-meta"},{tag:Be.invalid,class:"tok-invalid"},{tag:Be.punctuation,class:"tok-punctuation"}]);const Q_=new Qi;let uu=(()=>{class l{constructor(a,c,u=[]){this.data=a,ll.prototype.hasOwnProperty("tree")||Object.defineProperty(ll.prototype,"tree",{get(){return qs(this)}}),this.parser=c,this.extension=[fg.of(this),ll.languageData.of((h,d,f)=>h.facet(tde(h,d,f)))].concat(u)}isActiveAt(a,c,u=-1){return tde(a,c,u)==this.data}findRegions(a){let c=a.facet(fg);if((null==c?void 0:c.data)==this.data)return[{from:0,to:a.doc.length}];if(!c||!c.allowsNesting)return[];let u=[],h=(d,f)=>{if(d.prop(Q_)==this.data)return void u.push({from:f,to:f+d.length});let p=d.prop(Qi.mounted);if(p){if(p.tree.prop(Q_)==this.data){if(p.overlay)for(let g of p.overlay)u.push({from:g.from+f,to:g.to+f});else u.push({from:f,to:f+d.length});return}if(p.overlay){let g=u.length;if(h(p.tree,p.overlay[0].from+f),u.length>g)return}}for(let g=0;g<d.children.length;g++){let m=d.children[g];m instanceof Ss&&h(m,d.positions[g]+f)}};return h(qs(a),0),u}get allowsNesting(){return!0}}return l.setState=Gi.define(),l})();function tde(l,o,a){let c=l.facet(fg);if(!c)return null;let u=c.data;if(c.allowsNesting)for(let h=qs(l).topNode;h;h=h.enter(o,a,Kr.ExcludeBuffers))u=h.type.prop(Q_)||u;return u}class VE extends uu{constructor(o,a){super(o,a),this.parser=a}static define(o){let a=function ede(l){return Rn.define({combine:l?o=>o.concat(l):void 0})}(o.languageData);return new VE(a,o.parser.configure({props:[Q_.add(c=>c.isTop?a:void 0)]}))}configure(o){return new VE(this.data,this.parser.configure(o))}get allowsNesting(){return this.parser.hasWrappers()}}function qs(l){let o=l.field(uu.state,!1);return o?o.tree:Ss.empty}class Aet{constructor(o,a=o.length){this.doc=o,this.length=a,this.cursorPos=0,this.string="",this.cursor=o.iter()}syncTo(o){return this.string=this.cursor.next(o-this.cursorPos).value,this.cursorPos=o+this.string.length,this.cursorPos-this.string.length}chunk(o){return this.syncTo(o),this.string}get lineChunks(){return!0}read(o,a){let c=this.cursorPos-this.string.length;return o<c||a>=this.cursorPos?this.doc.sliceString(o,a):this.string.slice(o-c,a-c)}}let dw=null;class j_{constructor(o,a,c=[],u,h,d,f,p){this.parser=o,this.state=a,this.fragments=c,this.tree=u,this.treeLen=h,this.viewport=d,this.skipped=f,this.scheduleOn=p,this.parse=null,this.tempSkipped=[]}static create(o,a,c){return new j_(o,a,[],Ss.empty,0,c,[],null)}startParse(){return this.parser.startParse(new Aet(this.state.doc),this.fragments)}work(o,a){return null!=a&&a>=this.state.doc.length&&(a=void 0),this.tree!=Ss.empty&&this.isDone(null!=a?a:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var c;if("number"==typeof o){let u=Date.now()+o;o=()=>Date.now()>u}for(this.parse||(this.parse=this.startParse()),null!=a&&(null==this.parse.stoppedAt||this.parse.stoppedAt>a)&&a<this.state.doc.length&&this.parse.stopAt(a);;){let u=this.parse.advance();if(u){if(this.fragments=this.withoutTempSkipped(If.addTree(u,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(c=this.parse.stoppedAt)&&void 0!==c?c:this.state.doc.length,this.tree=u,this.parse=null,!(this.treeLen<(null!=a?a:this.state.doc.length)))return!0;this.parse=this.startParse()}if(o())return!1}})}takeTree(){let o,a;this.parse&&(o=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>o)&&this.parse.stopAt(o),this.withContext(()=>{for(;!(a=this.parse.advance()););}),this.treeLen=o,this.tree=a,this.fragments=this.withoutTempSkipped(If.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(o){let a=dw;dw=this;try{return o()}finally{dw=a}}withoutTempSkipped(o){for(let a;a=this.tempSkipped.pop();)o=nde(o,a.from,a.to);return o}changes(o,a){let{fragments:c,tree:u,treeLen:h,viewport:d,skipped:f}=this;if(this.takeTree(),!o.empty){let p=[];if(o.iterChangedRanges((g,m,v,y)=>p.push({fromA:g,toA:m,fromB:v,toB:y})),c=If.applyChanges(c,p),u=Ss.empty,h=0,d={from:o.mapPos(d.from,-1),to:o.mapPos(d.to,1)},this.skipped.length){f=[];for(let g of this.skipped){let m=o.mapPos(g.from,1),v=o.mapPos(g.to,-1);m<v&&f.push({from:m,to:v})}}}return new j_(this.parser,a,c,u,h,d,f,this.scheduleOn)}updateViewport(o){if(this.viewport.from==o.from&&this.viewport.to==o.to)return!1;this.viewport=o;let a=this.skipped.length;for(let c=0;c<this.skipped.length;c++){let{from:u,to:h}=this.skipped[c];u<o.to&&h>o.from&&(this.fragments=nde(this.fragments,u,h),this.skipped.splice(c--,1))}return!(this.skipped.length>=a||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(o,a){this.skipped.push({from:o,to:a})}static getSkippingParser(o){return new class extends Hhe{createParse(a,c,u){let h=u[0].from,d=u[u.length-1].to;return{parsedPos:h,advance(){let p=dw;if(p){for(let g of u)p.tempSkipped.push(g);o&&(p.scheduleOn=p.scheduleOn?Promise.all([p.scheduleOn,o]):o)}return this.parsedPos=d,new Ss(hl.none,[],[],d-h)},stoppedAt:null,stopAt(){}}}}}isDone(o){o=Math.min(o,this.state.doc.length);let a=this.fragments;return this.treeLen>=o&&a.length&&0==a[0].from&&a[0].to>=o}static get(){return dw}}function nde(l,o,a){return If.applyChanges(l,[{fromA:o,toA:a,fromB:o,toB:a}])}class q_{constructor(o){this.context=o,this.tree=o.tree}apply(o){if(!o.docChanged&&this.tree==this.context.tree)return this;let a=this.context.changes(o.changes,o.state),c=this.context.treeLen==o.startState.doc.length?void 0:Math.max(o.changes.mapPos(this.context.treeLen),a.viewport.to);return a.work(20,c)||a.takeTree(),new q_(a)}static init(o){let a=Math.min(3e3,o.doc.length),c=j_.create(o.facet(fg).parser,o,{from:0,to:a});return c.work(20,a)||c.takeTree(),new q_(c)}}uu.state=ao.define({create:q_.init,update(l,o){for(let a of o.effects)if(a.is(uu.setState))return a.value;return o.startState.facet(fg)!=o.state.facet(fg)?q_.init(o.state):l.apply(o)}});let ide=l=>{let o=setTimeout(()=>l(),500);return()=>clearTimeout(o)};"undefined"!=typeof requestIdleCallback&&(ide=l=>{let o=-1,a=setTimeout(()=>{o=requestIdleCallback(l,{timeout:400})},100);return()=>o<0?clearTimeout(a):cancelIdleCallback(o)});const rU="undefined"!=typeof navigator&&(null===(iU=navigator.scheduling)||void 0===iU?void 0:iU.isInputPending)?()=>navigator.scheduling.isInputPending():null,rde=js.fromClass(class{constructor(o){this.view=o,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(o){let a=this.view.state.field(uu.state).context;(a.updateViewport(o.view.viewport)||this.view.viewport.to>a.treeLen)&&this.scheduleWork(),o.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(a)}scheduleWork(){if(this.working)return;let{state:o}=this.view,a=o.field(uu.state);(a.tree!=a.context.tree||!a.context.isDone(o.doc.length))&&(this.working=ide(this.work))}work(o){this.working=null;let a=Date.now();if(this.chunkEnd<a&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=a+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:c,viewport:{to:u}}=this.view,h=c.field(uu.state);if(h.tree==h.context.tree&&h.context.isDone(u+1e5))return;let d=Date.now()+Math.min(this.chunkBudget,100,o&&!rU?Math.max(25,o.timeRemaining()-5):1e9),f=h.context.treeLen<u&&c.doc.length>u+1e3,p=h.context.work(()=>rU&&rU()||Date.now()>d,u+(f?0:1e5));this.chunkBudget-=Date.now()-a,(p||this.chunkBudget<=0)&&(h.context.takeTree(),this.view.dispatch({effects:uu.setState.of(new q_(h.context))})),this.chunkBudget>0&&!(p&&!f)&&this.scheduleWork(),this.checkAsyncSchedule(h.context)}checkAsyncSchedule(o){o.scheduleOn&&(this.workScheduled++,o.scheduleOn.then(()=>this.scheduleWork()).catch(a=>Sc(this.view.state,a)).then(()=>this.workScheduled--),o.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),fg=Rn.define({combine:l=>l.length?l[0]:null,enables:[uu.state,rde]});class Iet{constructor(o,a=[]){this.language=o,this.support=a,this.extension=[o,a]}}const ode=Rn.define(),zE=Rn.define({combine:l=>{if(!l.length)return"  ";if(!/^(?: +|\t+)$/.test(l[0]))throw new Error("Invalid indent unit: "+JSON.stringify(l[0]));return l[0]}});function b0(l){let o=l.facet(zE);return 9==o.charCodeAt(0)?l.tabSize*o.length:o.length}function Z_(l,o){let a="",c=l.tabSize;if(9==l.facet(zE).charCodeAt(0))for(;o>=c;)a+="\t",o-=c;for(let u=0;u<o;u++)a+=" ";return a}function UE(l,o){l instanceof ll&&(l=new fw(l));for(let c of l.state.facet(ode)){let u=c(l,o);if(null!=u)return u}let a=qs(l.state);return a?function Pet(l,o,a){return lde(o.resolveInner(a).enterUnfinishedNodesBefore(a),a,l)}(l,a,o):null}class fw{constructor(o,a={}){this.state=o,this.options=a,this.unit=b0(o)}lineAt(o,a=1){let c=this.state.doc.lineAt(o),{simulateBreak:u,simulateDoubleBreak:h}=this.options;return null!=u&&u>=c.from&&u<=c.to?h&&u==o?{text:"",from:o}:(a<0?u<o:u<=o)?{text:c.text.slice(u-c.from),from:u}:{text:c.text.slice(0,u-c.from),from:c.from}:c}textAfterPos(o,a=1){if(this.options.simulateDoubleBreak&&o==this.options.simulateBreak)return"";let{text:c,from:u}=this.lineAt(o,a);return c.slice(o-u,Math.min(c.length,o+100-u))}column(o,a=1){let{text:c,from:u}=this.lineAt(o,a),h=this.countColumn(c,o-u),d=this.options.overrideIndentation?this.options.overrideIndentation(u):-1;return d>-1&&(h+=d-this.countColumn(c,c.search(/\S|$/))),h}countColumn(o,a=o.length){return qS(o,this.state.tabSize,a)}lineIndent(o,a=1){let{text:c,from:u}=this.lineAt(o,a),h=this.options.overrideIndentation;if(h){let d=h(u);if(d>-1)return d}return this.countColumn(c,c.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const ade=new Qi;function Fet(l){let o=l.type.prop(ade);if(o)return o;let c,a=l.firstChild;if(a&&(c=a.type.prop(Qi.closedBy))){let u=l.lastChild,h=u&&c.indexOf(u.name)>-1;return d=>cde(d,!0,1,void 0,h&&!function Ret(l){return l.pos==l.options.simulateBreak&&l.options.simulateDoubleBreak}(d)?u.from:void 0)}return null==l.parent?Net:null}function lde(l,o,a){for(;l;l=l.parent){let c=Fet(l);if(c)return c(sU.create(a,o,l))}return null}function Net(){return 0}class sU extends fw{constructor(o,a,c){super(o.state,o.options),this.base=o,this.pos=a,this.node=c}static create(o,a,c){return new sU(o,a,c)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let o=this.state.doc.lineAt(this.node.from);for(;;){let a=this.node.resolve(o.from);for(;a.parent&&a.parent.from==a.from;)a=a.parent;if(Let(a,this.node))break;o=this.state.doc.lineAt(a.from)}return this.lineIndent(o.from)}continue(){let o=this.node.parent;return o?lde(o,this.pos,this.base):0}}function Let(l,o){for(let a=o;a;a=a.parent)if(l==a)return!0;return!1}function Vet({closing:l,align:o=!0,units:a=1}){return c=>cde(c,o,a,l)}function cde(l,o,a,c,u){let h=l.textAfter,d=h.match(/^\s*/)[0].length,f=c&&h.slice(d,d+c.length)==c||u==l.pos+d,p=o?function Bet(l){let o=l.node,a=o.childAfter(o.from),c=o.lastChild;if(!a)return null;let u=l.options.simulateBreak,h=l.state.doc.lineAt(a.from),d=null==u||u<=h.from?h.to:Math.min(h.to,u);for(let f=a.to;;){let p=o.childAfter(f);if(!p||p==c)return null;if(!p.type.isSkipped)return p.from<d?a:null;f=p.to}}(l):null;return p?l.column(f?p.from:p.to):l.baseIndent+(f?0:l.unit*a)}function oU({except:l,units:o=1}={}){return a=>{let c=l&&l.test(a.textAfter);return a.baseIndent+(c?0:o*a.unit)}}const $et=Rn.define(),ude=new Qi;function Qet(l){let o=l.lastChild;return o&&o.to==l.to&&o.type.isError}function HE(l,o,a){for(let c of l.facet($et)){let u=c(l,o,a);if(u)return u}return function Get(l,o,a){let c=qs(l);if(c.length<a)return null;let h=null;for(let d=c.resolveInner(a);d;d=d.parent){if(d.to<=a||d.from>a)continue;if(h&&d.from<o)break;let f=d.type.prop(ude);if(f&&(d.to<c.length-50||c.length==l.doc.length||!Qet(d))){let p=f(d,l);p&&p.from<=a&&p.from>=o&&p.to>a&&(h=p)}}return h}(l,o,a)}function hde(l,o){let a=o.mapPos(l.from,1),c=o.mapPos(l.to,-1);return a>=c?void 0:{from:a,to:c}}const $E=Gi.define({map:hde}),pw=Gi.define({map:hde});function dde(l){let o=[];for(let{head:a}of l.state.selection.ranges)o.some(c=>c.from<=a&&c.to>=a)||o.push(l.lineBlockAt(a));return o}const pg=ao.define({create:()=>Nn.none,update(l,o){l=l.map(o.changes);for(let a of o.effects)a.is($E)&&!jet(l,a.value.from,a.value.to)?l=l.update({add:[vde.range(a.value.from,a.value.to)]}):a.is(pw)&&(l=l.update({filter:(c,u)=>a.value.from!=c||a.value.to!=u,filterFrom:a.value.from,filterTo:a.value.to}));if(o.selection){let a=!1,{head:c}=o.selection.main;l.between(c,c,(u,h)=>{u<c&&h>c&&(a=!0)}),a&&(l=l.update({filterFrom:c,filterTo:c,filter:(u,h)=>h<=c||u>=c}))}return l},provide:l=>Si.decorations.from(l),toJSON(l,o){let a=[];return l.between(0,o.doc.length,(c,u)=>{a.push(c,u)}),a},fromJSON(l){if(!Array.isArray(l)||l.length%2)throw new RangeError("Invalid JSON for fold state");let o=[];for(let a=0;a<l.length;){let c=l[a++],u=l[a++];if("number"!=typeof c||"number"!=typeof u)throw new RangeError("Invalid JSON for fold state");o.push(vde.range(c,u))}return Nn.set(o,!0)}});function WE(l,o,a){var c;let u=null;return null===(c=l.field(pg,!1))||void 0===c||c.between(o,a,(h,d)=>{(!u||u.from>h)&&(u={from:h,to:d})}),u}function jet(l,o,a){let c=!1;return l.between(o,o,(u,h)=>{u==o&&h==a&&(c=!0)}),c}function fde(l,o){return l.field(pg,!1)?o:o.concat(Gi.appendConfig.of(mde()))}function pde(l,o,a=!0){let c=l.state.doc.lineAt(o.from).number,u=l.state.doc.lineAt(o.to).number;return Si.announce.of(`${l.state.phrase(a?"Folded lines":"Unfolded lines")} ${c} ${l.state.phrase("to")} ${u}.`)}const Xet=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:l=>{for(let o of dde(l)){let a=HE(l.state,o.from,o.to);if(a)return l.dispatch({effects:fde(l.state,[$E.of(a),pde(l,a)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:l=>{if(!l.state.field(pg,!1))return!1;let o=[];for(let a of dde(l)){let c=WE(l.state,a.from,a.to);c&&o.push(pw.of(c),pde(l,c,!1))}return o.length&&l.dispatch({effects:o}),o.length>0}},{key:"Ctrl-Alt-[",run:l=>{let{state:o}=l,a=[];for(let c=0;c<o.doc.length;){let u=l.lineBlockAt(c),h=HE(o,u.from,u.to);h&&a.push($E.of(h)),c=(h?l.lineBlockAt(h.to):u).to+1}return a.length&&l.dispatch({effects:fde(l.state,a)}),!!a.length}},{key:"Ctrl-Alt-]",run:l=>{let o=l.state.field(pg,!1);if(!o||!o.size)return!1;let a=[];return o.between(0,l.state.doc.length,(c,u)=>{a.push(pw.of({from:c,to:u}))}),l.dispatch({effects:a}),!0}}],Yet={placeholderDOM:null,placeholderText:"\u2026"},gde=Rn.define({combine:l=>ah(l,Yet)});function mde(l){let o=[pg,ett];return l&&o.push(gde.of(l)),o}const vde=Nn.replace({widget:new class extends Af{toDOM(l){let{state:o}=l,a=o.facet(gde),c=h=>{let d=l.lineBlockAt(l.posAtDOM(h.target)),f=WE(l.state,d.from,d.to);f&&l.dispatch({effects:pw.of(f)}),h.preventDefault()};if(a.placeholderDOM)return a.placeholderDOM(l,c);let u=document.createElement("span");return u.textContent=a.placeholderText,u.setAttribute("aria-label",o.phrase("folded code")),u.title=o.phrase("unfold"),u.className="cm-foldPlaceholder",u.onclick=c,u}}}),Ket={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class aU extends pd{constructor(o,a){super(),this.config=o,this.open=a}eq(o){return this.config==o.config&&this.open==o.open}toDOM(o){if(this.config.markerDOM)return this.config.markerDOM(this.open);let a=document.createElement("span");return a.textContent=this.open?this.config.openText:this.config.closedText,a.title=o.state.phrase(this.open?"Fold line":"Unfold line"),a}}function Jet(l={}){let o=Object.assign(Object.assign({},Ket),l),a=new aU(o,!0),c=new aU(o,!1),u=js.fromClass(class{constructor(d){this.from=d.viewport.from,this.markers=this.buildMarkers(d)}update(d){(d.docChanged||d.viewportChanged||d.startState.facet(fg)!=d.state.facet(fg)||d.startState.field(pg,!1)!=d.state.field(pg,!1)||qs(d.startState)!=qs(d.state)||o.foldingChanged(d))&&(this.markers=this.buildMarkers(d.view))}buildMarkers(d){let f=new ig;for(let p of d.viewportLineBlocks){let g=WE(d.state,p.from,p.to)?c:HE(d.state,p.from,p.to)?a:null;g&&f.add(p.from,p.from,g)}return f.finish()}}),{domEventHandlers:h}=o;return[u,Ehe({class:"cm-foldGutter",markers(d){var f;return(null===(f=d.plugin(u))||void 0===f?void 0:f.markers)||bs.empty},initialSpacer:()=>new aU(o,!1),domEventHandlers:Object.assign(Object.assign({},h),{click:(d,f,p)=>{if(h.click&&h.click(d,f,p))return!0;let g=WE(d.state,f.from,f.to);if(g)return d.dispatch({effects:pw.of(g)}),!0;let m=HE(d.state,f.from,f.to);return!!m&&(d.dispatch({effects:$E.of(m)}),!0)}})}),mde()]}const ett=Si.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class gw{constructor(o,a){let c;function u(f){let p=rg.newName();return(c||(c=Object.create(null)))["."+p]=f,p}const h="string"==typeof a.all?a.all:a.all?u(a.all):void 0,d=a.scope;this.scope=d instanceof uu?f=>f.prop(Q_)==d.data:d?f=>f==d:void 0,this.style=Yhe(o.map(f=>({tag:f.tag,class:f.class||u(Object.assign({},f,{tag:null}))})),{all:h}).style,this.module=c?new rg(c):null,this.themeType=a.themeType}static define(o,a){return new gw(o,a||{})}}const lU=Rn.define(),yde=Rn.define({combine:l=>l.length?[l[0]]:null});function GE(l){let o=l.facet(lU);return o.length?o:l.facet(yde)}function QE(l,o){let c,a=[ntt];return l instanceof gw&&(l.module&&a.push(Si.styleModule.of(l.module)),c=l.themeType),a.push((null==o?void 0:o.fallback)?yde.of(l):c?lU.computeN([Si.darkTheme],u=>u.facet(Si.darkTheme)==("dark"==c)?[l]:[]):lU.of(l)),a}class ttt{constructor(o){this.markCache=Object.create(null),this.tree=qs(o.state),this.decorations=this.buildDeco(o,GE(o.state))}update(o){let a=qs(o.state),c=GE(o.state),u=c!=GE(o.startState);a.length<o.view.viewport.to&&!u&&a.type==this.tree.type?this.decorations=this.decorations.map(o.changes):(a!=this.tree||o.viewportChanged||u)&&(this.tree=a,this.decorations=this.buildDeco(o.view,c))}buildDeco(o,a){if(!a||!this.tree.length)return Nn.none;let c=new ig;for(let{from:u,to:h}of o.visibleRanges)Det(this.tree,a,(d,f,p)=>{c.add(d,f,this.markCache[p]||(this.markCache[p]=Nn.mark({class:p})))},u,h);return c.finish()}}const ntt=d0.high(js.fromClass(ttt,{decorations:l=>l.decorations})),_de=gw.define([{tag:Be.meta,color:"#7a757a"},{tag:Be.link,textDecoration:"underline"},{tag:Be.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Be.emphasis,fontStyle:"italic"},{tag:Be.strong,fontWeight:"bold"},{tag:Be.strikethrough,textDecoration:"line-through"},{tag:Be.keyword,color:"#708"},{tag:[Be.atom,Be.bool,Be.url,Be.contentSeparator,Be.labelName],color:"#219"},{tag:[Be.literal,Be.inserted],color:"#164"},{tag:[Be.string,Be.deleted],color:"#a11"},{tag:[Be.regexp,Be.escape,Be.special(Be.string)],color:"#e40"},{tag:Be.definition(Be.variableName),color:"#00f"},{tag:Be.local(Be.variableName),color:"#30a"},{tag:[Be.typeName,Be.namespace],color:"#085"},{tag:Be.className,color:"#167"},{tag:[Be.special(Be.variableName),Be.macroName],color:"#256"},{tag:Be.definition(Be.propertyName),color:"#00c"},{tag:Be.comment,color:"#940"},{tag:Be.invalid,color:"#f00"}]),itt=Si.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Cde=Rn.define({combine:l=>ah(l,{afterCursor:!0,brackets:"()[]{}",maxScanDistance:1e4,renderMatch:ott})}),rtt=Nn.mark({class:"cm-matchingBracket"}),stt=Nn.mark({class:"cm-nonmatchingBracket"});function ott(l){let o=[],a=l.matched?rtt:stt;return o.push(a.range(l.start.from,l.start.to)),l.end&&o.push(a.range(l.end.from,l.end.to)),o}const att=[ao.define({create:()=>Nn.none,update(l,o){if(!o.docChanged&&!o.selection)return l;let a=[],c=o.state.facet(Cde);for(let u of o.state.selection.ranges){if(!u.empty)continue;let h=bd(o.state,u.head,-1,c)||u.head>0&&bd(o.state,u.head-1,1,c)||c.afterCursor&&(bd(o.state,u.head,1,c)||u.head<o.state.doc.length&&bd(o.state,u.head+1,-1,c));h&&(a=a.concat(c.renderMatch(h,o.state)))}return Nn.set(a,!0)},provide:l=>Si.decorations.from(l)}),itt];function ltt(l={}){return[Cde.of(l),att]}function cU(l,o,a){let c=l.prop(o<0?Qi.openedBy:Qi.closedBy);if(c)return c;if(1==l.name.length){let u=a.indexOf(l.name);if(u>-1&&u%2==(o<0?1:0))return[a[u+o]]}return null}function bd(l,o,a,c={}){let u=c.maxScanDistance||1e4,h=c.brackets||"()[]{}",d=qs(l),f=d.resolveInner(o,a);for(let p=f;p;p=p.parent){let g=cU(p.type,a,h);if(g&&p.from<p.to)return ctt(0,0,a,p,g,h)}return function utt(l,o,a,c,u,h,d){let f=a<0?l.sliceDoc(o-1,o):l.sliceDoc(o,o+1),p=d.indexOf(f);if(p<0||p%2==0!=a>0)return null;let g={from:a<0?o-1:o,to:a>0?o+1:o},m=l.doc.iterRange(o,a>0?l.doc.length:0),v=0;for(let y=0;!m.next().done&&y<=h;){let _=m.value;a<0&&(y+=_.length);let b=o+y*a;for(let C=a>0?0:_.length-1,x=a>0?_.length:-1;C!=x;C+=a){let S=d.indexOf(_[C]);if(!(S<0||c.resolveInner(b+C,1).type!=u))if(S%2==0==a>0)v++;else{if(1==v)return{start:g,end:{from:b+C,to:b+C+1},matched:S>>1==p>>1};v--}}a>0&&(y+=_.length)}return m.done?{start:g,matched:!1}:null}(l,o,a,d,f.type,u,h)}function ctt(l,o,a,c,u,h){let d=c.parent,f={from:c.from,to:c.to},p=0,g=null==d?void 0:d.cursor();if(g&&(a<0?g.childBefore(c.from):g.childAfter(c.to)))do{if(a<0?g.to<=c.from:g.from>=c.to){if(0==p&&u.indexOf(g.type.name)>-1&&g.from<g.to)return{start:f,end:{from:g.from,to:g.to},matched:!0};if(cU(g.type,a,h))p++;else if(cU(g.type,-a,h)){if(0==p)return{start:f,end:g.from==g.to?void 0:{from:g.from,to:g.to},matched:!1};p--}}}while(a<0?g.prevSibling():g.nextSibling());return{start:f,matched:!1}}const hU=Object.create(null),mw=[hl.none],kde=[],Mde=Object.create(null);for(let[l,o]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Mde[l]=Ade(hU,o);function dU(l,o){kde.indexOf(l)>-1||(kde.push(l),console.warn(o))}function Ade(l,o){let a=null;for(let h of o.split(".")){let d=l[h]||Be[h];d?"function"==typeof d?a?a=d(a):dU(h,`Modifier ${h} used at start of tag`):a?dU(h,`Tag ${h} used as modifier`):a=d:dU(h,`Unknown highlighting tag ${h}`)}if(!a)return 0;let c=o.replace(/ /g,"_"),u=hl.define({id:mw.length,name:c,props:[Zhe({[c]:a})]});return mw.push(u),u.id}function fU(l,o){return({state:a,dispatch:c})=>{if(a.readOnly)return!1;let u=l(o,a);return!!u&&(c(a.update(u)),!0)}}const _tt=fU(wtt,0),btt=fU(Ide,0),xtt=fU((l,o)=>Ide(l,o,function Stt(l){let o=[];for(let a of l.selection.ranges){let c=l.doc.lineAt(a.from),u=a.to<=c.to?c:l.doc.lineAt(a.to),h=o.length-1;h>=0&&o[h].to>c.from?o[h].to=u.to:o.push({from:c.from,to:u.to})}return o}(o)),0);function pU(l,o=l.selection.main.head){let a=l.languageDataAt("commentTokens",o);return a.length?a[0]:{}}function Ide(l,o,a=o.selection.ranges){let c=a.map(h=>pU(o,h.from).block);if(!c.every(h=>h))return null;let u=a.map((h,d)=>function Ctt(l,{open:o,close:a},c,u){let m,v,h=l.sliceDoc(c-50,c),d=l.sliceDoc(u,u+50),f=/\s*$/.exec(h)[0].length,p=/^\s*/.exec(d)[0].length,g=h.length-f;if(h.slice(g-o.length,g)==o&&d.slice(p,p+a.length)==a)return{open:{pos:c-f,margin:f&&1},close:{pos:u+p,margin:p&&1}};u-c<=100?m=v=l.sliceDoc(c,u):(m=l.sliceDoc(c,c+50),v=l.sliceDoc(u-50,u));let y=/^\s*/.exec(m)[0].length,_=/\s*$/.exec(v)[0].length,b=v.length-_-a.length;return m.slice(y,y+o.length)==o&&v.slice(b,b+a.length)==a?{open:{pos:c+y+o.length,margin:/\s/.test(m.charAt(y+o.length))?1:0},close:{pos:u-_-a.length,margin:/\s/.test(v.charAt(b-1))?1:0}}:null}(o,c[d],h.from,h.to));if(2!=l&&!u.every(h=>h))return{changes:o.changes(a.map((h,d)=>u[d]?[]:[{from:h.from,insert:c[d].open+" "},{from:h.to,insert:" "+c[d].close}]))};if(1!=l&&u.some(h=>h)){let h=[];for(let f,d=0;d<u.length;d++)if(f=u[d]){let p=c[d],{open:g,close:m}=f;h.push({from:g.pos-p.open.length,to:g.pos+g.margin},{from:m.pos-m.margin,to:m.pos+p.close.length})}return{changes:h}}return null}function wtt(l,o,a=o.selection.ranges){let c=[],u=-1;for(let{from:h,to:d}of a){let f=c.length,p=1e9;for(let g=h;g<=d;){let m=o.doc.lineAt(g);if(m.from>u&&(h==d||d>m.from)){u=m.from;let v=pU(o,g).line;if(!v)continue;let y=/^\s*/.exec(m.text)[0].length,_=y==m.length,b=m.text.slice(y,y+v.length)==v?y:-1;y<m.text.length&&y<p&&(p=y),c.push({line:m,comment:b,token:v,indent:y,empty:_,single:!1})}g=m.to+1}if(p<1e9)for(let g=f;g<c.length;g++)c[g].indent<c[g].line.text.length&&(c[g].indent=p);c.length==f+1&&(c[f].single=!0)}if(2!=l&&c.some(h=>h.comment<0&&(!h.empty||h.single))){let h=[];for(let{line:f,token:p,indent:g,empty:m,single:v}of c)(v||!m)&&h.push({from:f.from+g,insert:p+" "});let d=o.changes(h);return{changes:d,selection:o.selection.map(d,1)}}if(1!=l&&c.some(h=>h.comment>=0)){let h=[];for(let{line:d,comment:f,token:p}of c)if(f>=0){let g=d.from+f,m=g+p.length;" "==d.text[m-d.from]&&m++,h.push({from:g,to:m})}return{changes:h}}return null}const gU=p0.define(),Ttt=p0.define(),Ott=Rn.define(),Pde=Rn.define({combine:l=>ah(l,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}),mU=ao.define({create:()=>_U.empty,update(l,o){let a=o.state.facet(Pde),c=o.annotation(gU);if(c){let p=o.docChanged?Dt.single(function Dtt(l){let o=0;return l.iterChangedRanges((a,c)=>o=c),o}(o.changes)):void 0,g=Nl.fromTransaction(o,p),m=c.side,v=0==m?l.undone:l.done;return v=g?qE(v,v.length,a.minDepth,g):Nde(v,o.startState.selection),new _U(0==m?c.rest:v,0==m?v:c.rest)}let u=o.annotation(Ttt);if(("full"==u||"before"==u)&&(l=l.isolate()),!1===o.annotation(ud.addToHistory))return o.changes.empty?l:l.addMapping(o.changes.desc);let h=Nl.fromTransaction(o),d=o.annotation(ud.time),f=o.annotation(ud.userEvent);return h?l=l.addChanges(h,d,f,a.newGroupDelay,a.minDepth):o.selection&&(l=l.addSelection(o.startState.selection,d,f,a.newGroupDelay)),("full"==u||"after"==u)&&(l=l.isolate()),l},toJSON:l=>({done:l.done.map(o=>o.toJSON()),undone:l.undone.map(o=>o.toJSON())}),fromJSON:l=>new _U(l.done.map(Nl.fromJSON),l.undone.map(Nl.fromJSON))});function ktt(l={}){return[mU,Pde.of(l),Si.domEventHandlers({beforeinput(o,a){let c="historyUndo"==o.inputType?Rde:"historyRedo"==o.inputType?vU:null;return!!c&&(o.preventDefault(),c(a))}})]}function jE(l,o){return function({state:a,dispatch:c}){if(!o&&a.readOnly)return!1;let u=a.field(mU,!1);if(!u)return!1;let h=u.pop(l,a,o);return!!h&&(c(h),!0)}}const Rde=jE(0,!1),vU=jE(1,!1),Mtt=jE(0,!0),Ett=jE(1,!0);class Nl{constructor(o,a,c,u,h){this.changes=o,this.effects=a,this.mapped=c,this.startSelection=u,this.selectionsAfter=h}setSelAfter(o){return new Nl(this.changes,this.effects,this.mapped,this.startSelection,o)}toJSON(){var o,a,c;return{changes:null===(o=this.changes)||void 0===o?void 0:o.toJSON(),mapped:null===(a=this.mapped)||void 0===a?void 0:a.toJSON(),startSelection:null===(c=this.startSelection)||void 0===c?void 0:c.toJSON(),selectionsAfter:this.selectionsAfter.map(u=>u.toJSON())}}static fromJSON(o){return new Nl(o.changes&&Eo.fromJSON(o.changes),[],o.mapped&&cd.fromJSON(o.mapped),o.startSelection&&Dt.fromJSON(o.startSelection),o.selectionsAfter.map(Dt.fromJSON))}static fromTransaction(o,a){let c=hu;for(let u of o.startState.facet(Ott)){let h=u(o);h.length&&(c=c.concat(h))}return!c.length&&o.changes.empty?null:new Nl(o.changes.invert(o.startState.doc),c,void 0,a||o.startState.selection,hu)}static selection(o){return new Nl(void 0,hu,void 0,void 0,o)}}function qE(l,o,a,c){let h=l.slice(o+1>a+20?o-a-1:0,o);return h.push(c),h}function Fde(l,o){return l.length?o.length?l.concat(o):l:o}const hu=[];function Nde(l,o){if(l.length){let a=l[l.length-1],c=a.selectionsAfter.slice(Math.max(0,a.selectionsAfter.length-200));return c.length&&c[c.length-1].eq(o)?l:(c.push(o),qE(l,l.length-1,1e9,a.setSelAfter(c)))}return[Nl.selection([o])]}function Rtt(l){let o=l[l.length-1],a=l.slice();return a[l.length-1]=o.setSelAfter(o.selectionsAfter.slice(0,o.selectionsAfter.length-1)),a}function yU(l,o){if(!l.length)return l;let a=l.length,c=hu;for(;a;){let u=Ftt(l[a-1],o,c);if(u.changes&&!u.changes.empty||u.effects.length){let h=l.slice(0,a);return h[a-1]=u,h}o=u.mapped,a--,c=u.selectionsAfter}return c.length?[Nl.selection(c)]:hu}function Ftt(l,o,a){let c=Fde(l.selectionsAfter.length?l.selectionsAfter.map(f=>f.map(o)):hu,a);if(!l.changes)return Nl.selection(c);let u=l.changes.map(o),h=o.mapDesc(l.changes,!0),d=l.mapped?l.mapped.composeDesc(h):h;return new Nl(u,Gi.mapEffects(l.effects,o),d,l.startSelection.map(h),c)}const Ntt=/^(input\.type|delete)($|\.)/;let _U=(()=>{class l{constructor(a,c,u=0,h){this.done=a,this.undone=c,this.prevTime=u,this.prevUserEvent=h}isolate(){return this.prevTime?new l(this.done,this.undone):this}addChanges(a,c,u,h,d){let f=this.done,p=f[f.length-1];return f=p&&p.changes&&!p.changes.empty&&a.changes&&(!u||Ntt.test(u))&&(!p.selectionsAfter.length&&c-this.prevTime<h&&function Att(l,o){let a=[],c=!1;return l.iterChangedRanges((u,h)=>a.push(u,h)),o.iterChangedRanges((u,h,d,f)=>{for(let p=0;p<a.length;){let g=a[p++],m=a[p++];f>=g&&d<=m&&(c=!0)}}),c}(p.changes,a.changes)||"input.type.compose"==u)?qE(f,f.length-1,d,new Nl(a.changes.compose(p.changes),Fde(a.effects,p.effects),p.mapped,p.startSelection,hu)):qE(f,f.length,d,a),new l(f,hu,c,u)}addSelection(a,c,u,h){let d=this.done.length?this.done[this.done.length-1].selectionsAfter:hu;return d.length>0&&c-this.prevTime<h&&u==this.prevUserEvent&&u&&/^select($|\.)/.test(u)&&function Itt(l,o){return l.ranges.length==o.ranges.length&&0===l.ranges.filter((a,c)=>a.empty!=o.ranges[c].empty).length}(d[d.length-1],a)?this:new l(Nde(this.done,a),this.undone,c,u)}addMapping(a){return new l(yU(this.done,a),yU(this.undone,a),this.prevTime,this.prevUserEvent)}pop(a,c,u){let h=0==a?this.done:this.undone;if(0==h.length)return null;let d=h[h.length-1];if(u&&d.selectionsAfter.length)return c.update({selection:d.selectionsAfter[d.selectionsAfter.length-1],annotations:gU.of({side:a,rest:Rtt(h)}),userEvent:0==a?"select.undo":"select.redo",scrollIntoView:!0});if(d.changes){let f=1==h.length?hu:h.slice(0,h.length-1);return d.mapped&&(f=yU(f,d.mapped)),c.update({changes:d.changes,selection:d.startSelection,effects:d.effects,annotations:gU.of({side:a,rest:f}),filter:!1,userEvent:0==a?"undo":"redo",scrollIntoView:!0})}return null}}return l.empty=new l(hu,hu),l})();const Ltt=[{key:"Mod-z",run:Rde,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:vU,preventDefault:!0},{linux:"Ctrl-Shift-z",run:vU,preventDefault:!0},{key:"Mod-u",run:Mtt,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Ett,preventDefault:!0}];function X_(l,o){return Dt.create(l.ranges.map(o),l.mainIndex)}function xd(l,o){return l.update({selection:o,scrollIntoView:!0,userEvent:"select"})}function du({state:l,dispatch:o},a){let c=X_(l.selection,a);return!c.eq(l.selection)&&(o(xd(l,c)),!0)}function yw(l,o){return Dt.cursor(o?l.to:l.from)}function ZE(l,o){return du(l,a=>a.empty?l.moveByChar(a,o):yw(a,o))}function ka(l){return l.textDirectionAt(l.state.selection.main.head)==xs.LTR}const Lde=l=>ZE(l,!ka(l)),Bde=l=>ZE(l,ka(l));function XE(l,o){return du(l,a=>a.empty?l.moveByGroup(a,o):yw(a,o))}function ztt(l,o,a){if(o.type.prop(a))return!0;let c=o.to-o.from;return c&&(c>2||/[^\s,.;:]/.test(l.sliceDoc(o.from,o.to)))||o.firstChild}function YE(l,o,a){let d,f,c=qs(l).resolveInner(o.head),u=a?Qi.closedBy:Qi.openedBy;for(let p=o.head;;){let g=a?c.childAfter(p):c.childBefore(p);if(!g)break;ztt(l,g,u)?c=g:p=a?g.to:g.from}return f=c.type.prop(u)&&(d=a?bd(l,c.from,1):bd(l,c.to,-1))&&d.matched?a?d.end.to:d.end.from:a?c.to:c.from,Dt.cursor(f,a?-1:1)}function Ude(l,o){return du(l,a=>{if(!a.empty)return yw(a,o);let c=l.moveVertically(a,o);return c.head!=a.head?c:l.moveToLineBoundary(a,o)})}const Hde=l=>Ude(l,!1),$de=l=>Ude(l,!0);function Wde(l){return Math.max(l.defaultLineHeight,Math.min(l.dom.clientHeight,innerHeight)-5)}function Gde(l,o){let{state:a}=l,c=X_(a.selection,f=>f.empty?l.moveVertically(f,o,Wde(l)):yw(f,o));if(c.eq(a.selection))return!1;let d,u=l.coordsAtPos(a.selection.main.head),h=l.scrollDOM.getBoundingClientRect();return u&&u.top>h.top&&u.bottom<h.bottom&&u.top-h.top<=l.scrollDOM.scrollHeight-l.scrollDOM.scrollTop-l.scrollDOM.clientHeight&&(d=Si.scrollIntoView(c.main.head,{y:"start",yMargin:u.top-h.top})),l.dispatch(xd(a,c),{effects:d}),!0}const Qde=l=>Gde(l,!1),bU=l=>Gde(l,!0);function gg(l,o,a){let c=l.lineBlockAt(o.head),u=l.moveToLineBoundary(o,a);if(u.head==o.head&&u.head!=(a?c.to:c.from)&&(u=l.moveToLineBoundary(o,a,!1)),!a&&u.head==c.from&&c.length){let h=/^\s*/.exec(l.state.sliceDoc(c.from,Math.min(c.from+100,c.to)))[0].length;h&&o.head!=c.from+h&&(u=Dt.cursor(c.from+h))}return u}function Tc(l,o){let a=X_(l.state.selection,c=>{let u=o(c);return Dt.range(c.anchor,u.head,u.goalColumn)});return!a.eq(l.state.selection)&&(l.dispatch(xd(l.state,a)),!0)}function KE(l,o){return Tc(l,a=>l.moveByChar(a,o))}const qde=l=>KE(l,!ka(l)),Zde=l=>KE(l,ka(l));function JE(l,o){return Tc(l,a=>l.moveByGroup(a,o))}function Yde(l,o){return Tc(l,a=>l.moveVertically(a,o))}const Kde=l=>Yde(l,!1),Jde=l=>Yde(l,!0);function efe(l,o){return Tc(l,a=>l.moveVertically(a,o,Wde(l)))}const tfe=l=>efe(l,!1),nfe=l=>efe(l,!0),ife=({state:l,dispatch:o})=>(o(xd(l,{anchor:0})),!0),rfe=({state:l,dispatch:o})=>(o(xd(l,{anchor:l.doc.length})),!0),sfe=({state:l,dispatch:o})=>(o(xd(l,{anchor:l.selection.main.anchor,head:0})),!0),ofe=({state:l,dispatch:o})=>(o(xd(l,{anchor:l.selection.main.anchor,head:l.doc.length})),!0);function eA(l,o){if(l.state.readOnly)return!1;let a="delete.selection",{state:c}=l,u=c.changeByRange(h=>{let{from:d,to:f}=h;if(d==f){let p=o(d);p<d?(a="delete.backward",p=tA(l,p,!1)):p>d&&(a="delete.forward",p=tA(l,p,!0)),d=Math.min(d,p),f=Math.max(f,p)}else d=tA(l,d,!1),f=tA(l,d,!0);return d==f?{range:h}:{changes:{from:d,to:f},range:Dt.cursor(d)}});return!u.changes.empty&&(l.dispatch(c.update(u,{scrollIntoView:!0,userEvent:a,effects:"delete.selection"==a?Si.announce.of(c.phrase("Selection deleted")):void 0})),!0)}function tA(l,o,a){if(l instanceof Si)for(let c of l.state.facet(Si.atomicRanges).map(u=>u(l)))c.between(o,o,(u,h)=>{u<o&&h>o&&(o=a?h:u)});return o}const afe=(l,o)=>eA(l,a=>{let h,d,{state:c}=l,u=c.doc.lineAt(a);if(!o&&a>u.from&&a<u.from+200&&!/[^ \t]/.test(h=u.text.slice(0,a-u.from))){if("\t"==h[h.length-1])return a-1;let p=qS(h,c.tabSize)%b0(c)||b0(c);for(let g=0;g<p&&" "==h[h.length-1-g];g++)a--;d=a}else d=al(u.text,a-u.from,o,o)+u.from,d==a&&u.number!=(o?c.doc.lines:1)&&(d+=o?1:-1);return d}),xU=l=>afe(l,!1),lfe=l=>afe(l,!0),cfe=(l,o)=>eA(l,a=>{let c=a,{state:u}=l,h=u.doc.lineAt(c),d=u.charCategorizer(c);for(let f=null;;){if(c==(o?h.to:h.from)){c==a&&h.number!=(o?u.doc.lines:1)&&(c+=o?1:-1);break}let p=al(h.text,c-h.from,o)+h.from,g=h.text.slice(Math.min(c,p)-h.from,Math.max(c,p)-h.from),m=d(g);if(null!=f&&m!=f)break;(" "!=g||c!=a)&&(f=m),c=p}return c}),ufe=l=>cfe(l,!1),hfe=l=>eA(l,o=>{let a=l.lineBlockAt(o).to;return o<a?a:Math.min(l.state.doc.length,o+1)});function nA(l){let o=[],a=-1;for(let c of l.selection.ranges){let u=l.doc.lineAt(c.from),h=l.doc.lineAt(c.to);if(!c.empty&&c.to==h.from&&(h=l.doc.lineAt(c.to-1)),a>=u.number){let d=o[o.length-1];d.to=h.to,d.ranges.push(c)}else o.push({from:u.from,to:h.to,ranges:[c]});a=h.number+1}return o}function dfe(l,o,a){if(l.readOnly)return!1;let c=[],u=[];for(let h of nA(l)){if(a?h.to==l.doc.length:0==h.from)continue;let d=l.doc.lineAt(a?h.to+1:h.from-1),f=d.length+1;if(a){c.push({from:h.to,to:d.to},{from:h.from,insert:d.text+l.lineBreak});for(let p of h.ranges)u.push(Dt.range(Math.min(l.doc.length,p.anchor+f),Math.min(l.doc.length,p.head+f)))}else{c.push({from:d.from,to:h.from},{from:h.to,insert:l.lineBreak+d.text});for(let p of h.ranges)u.push(Dt.range(p.anchor-f,p.head-f))}}return!!c.length&&(o(l.update({changes:c,scrollIntoView:!0,selection:Dt.create(u,l.selection.mainIndex),userEvent:"move.line"})),!0)}function ffe(l,o,a){if(l.readOnly)return!1;let c=[];for(let u of nA(l))c.push(a?{from:u.from,insert:l.doc.slice(u.from,u.to)+l.lineBreak}:{from:u.to,insert:l.lineBreak+l.doc.slice(u.from,u.to)});return o(l.update({changes:c,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const bnt=pfe(!1),xnt=pfe(!0);function pfe(l){return({state:o,dispatch:a})=>{if(o.readOnly)return!1;let c=o.changeByRange(u=>{let{from:h,to:d}=u,f=o.doc.lineAt(h),p=!l&&h==d&&function _nt(l,o){if(/\(\)|\[\]|\{\}/.test(l.sliceDoc(o-1,o+1)))return{from:o,to:o};let h,a=qs(l).resolveInner(o),c=a.childBefore(o),u=a.childAfter(o);return c&&u&&c.to<=o&&u.from>=o&&(h=c.type.prop(Qi.closedBy))&&h.indexOf(u.name)>-1&&l.doc.lineAt(c.to).from==l.doc.lineAt(u.from).from?{from:c.to,to:u.from}:null}(o,h);l&&(h=d=(d<=f.to?f:o.doc.lineAt(d)).to);let g=new fw(o,{simulateBreak:h,simulateDoubleBreak:!!p}),m=UE(g,h);for(null==m&&(m=/^\s*/.exec(o.doc.lineAt(h).text)[0].length);d<f.to&&/\s/.test(f.text[d-f.from]);)d++;p?({from:h,to:d}=p):h>f.from&&h<f.from+100&&!/\S/.test(f.text.slice(0,h))&&(h=f.from);let v=["",Z_(o,m)];return p&&v.push(Z_(o,g.lineIndent(f.from,-1))),{changes:{from:h,to:d,insert:xr.of(v)},range:Dt.cursor(h+1+v[1].length)}});return a(o.update(c,{scrollIntoView:!0,userEvent:"input"})),!0}}function CU(l,o){let a=-1;return l.changeByRange(c=>{let u=[];for(let d=c.from;d<=c.to;){let f=l.doc.lineAt(d);f.number>a&&(c.empty||c.to>f.from)&&(o(f,u,c),a=f.number),d=f.to+1}let h=l.changes(u);return{changes:u,range:Dt.range(h.mapPos(c.anchor,1),h.mapPos(c.head,1))}})}const Snt=[{key:"Ctrl-b",run:Lde,shift:qde,preventDefault:!0},{key:"Ctrl-f",run:Bde,shift:Zde},{key:"Ctrl-p",run:Hde,shift:Kde},{key:"Ctrl-n",run:$de,shift:Jde},{key:"Ctrl-a",run:l=>du(l,o=>Dt.cursor(l.lineBlockAt(o.head).from,1)),shift:l=>Tc(l,o=>Dt.cursor(l.lineBlockAt(o.head).from))},{key:"Ctrl-e",run:l=>du(l,o=>Dt.cursor(l.lineBlockAt(o.head).to,-1)),shift:l=>Tc(l,o=>Dt.cursor(l.lineBlockAt(o.head).to))},{key:"Ctrl-d",run:lfe},{key:"Ctrl-h",run:xU},{key:"Ctrl-k",run:hfe},{key:"Ctrl-Alt-h",run:ufe},{key:"Ctrl-o",run:({state:l,dispatch:o})=>{if(l.readOnly)return!1;let a=l.changeByRange(c=>({changes:{from:c.from,to:c.to,insert:xr.of(["",""])},range:Dt.cursor(c.from)}));return o(l.update(a,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:l,dispatch:o})=>{if(l.readOnly)return!1;let a=l.changeByRange(c=>{if(!c.empty||0==c.from||c.from==l.doc.length)return{range:c};let u=c.from,h=l.doc.lineAt(u),d=u==h.from?u-1:al(h.text,u-h.from,!1)+h.from,f=u==h.to?u+1:al(h.text,u-h.from,!0)+h.from;return{changes:{from:d,to:f,insert:l.doc.slice(u,f).append(l.doc.slice(d,u))},range:Dt.cursor(f)}});return!a.changes.empty&&(o(l.update(a,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:bU}],wnt=[{key:"ArrowLeft",run:Lde,shift:qde,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:l=>XE(l,!ka(l)),shift:l=>JE(l,!ka(l)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:l=>du(l,o=>gg(l,o,!ka(l))),shift:l=>Tc(l,o=>gg(l,o,!ka(l))),preventDefault:!0},{key:"ArrowRight",run:Bde,shift:Zde,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:l=>XE(l,ka(l)),shift:l=>JE(l,ka(l)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:l=>du(l,o=>gg(l,o,ka(l))),shift:l=>Tc(l,o=>gg(l,o,ka(l))),preventDefault:!0},{key:"ArrowUp",run:Hde,shift:Kde,preventDefault:!0},{mac:"Cmd-ArrowUp",run:ife,shift:sfe},{mac:"Ctrl-ArrowUp",run:Qde,shift:tfe},{key:"ArrowDown",run:$de,shift:Jde,preventDefault:!0},{mac:"Cmd-ArrowDown",run:rfe,shift:ofe},{mac:"Ctrl-ArrowDown",run:bU,shift:nfe},{key:"PageUp",run:Qde,shift:tfe},{key:"PageDown",run:bU,shift:nfe},{key:"Home",run:l=>du(l,o=>gg(l,o,!1)),shift:l=>Tc(l,o=>gg(l,o,!1)),preventDefault:!0},{key:"Mod-Home",run:ife,shift:sfe},{key:"End",run:l=>du(l,o=>gg(l,o,!0)),shift:l=>Tc(l,o=>gg(l,o,!0)),preventDefault:!0},{key:"Mod-End",run:rfe,shift:ofe},{key:"Enter",run:bnt},{key:"Mod-a",run:({state:l,dispatch:o})=>(o(l.update({selection:{anchor:0,head:l.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:xU,shift:xU},{key:"Delete",run:lfe},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ufe},{key:"Mod-Delete",mac:"Alt-Delete",run:l=>cfe(l,!0)},{mac:"Mod-Backspace",run:l=>eA(l,o=>{let a=l.lineBlockAt(o).from;return o>a?a:Math.max(0,o-1)})},{mac:"Mod-Delete",run:hfe}].concat(Snt.map(l=>({mac:l.key,run:l.run,shift:l.shift}))),Tnt=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:l=>du(l,o=>YE(l.state,o,!ka(l))),shift:l=>Tc(l,o=>YE(l.state,o,!ka(l)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:l=>du(l,o=>YE(l.state,o,ka(l))),shift:l=>Tc(l,o=>YE(l.state,o,ka(l)))},{key:"Alt-ArrowUp",run:({state:l,dispatch:o})=>dfe(l,o,!1)},{key:"Shift-Alt-ArrowUp",run:({state:l,dispatch:o})=>ffe(l,o,!1)},{key:"Alt-ArrowDown",run:({state:l,dispatch:o})=>dfe(l,o,!0)},{key:"Shift-Alt-ArrowDown",run:({state:l,dispatch:o})=>ffe(l,o,!0)},{key:"Escape",run:({state:l,dispatch:o})=>{let a=l.selection,c=null;return a.ranges.length>1?c=Dt.create([a.main]):a.main.empty||(c=Dt.create([Dt.cursor(a.main.head)])),!!c&&(o(xd(l,c)),!0)}},{key:"Mod-Enter",run:xnt},{key:"Alt-l",mac:"Ctrl-l",run:({state:l,dispatch:o})=>{let a=nA(l).map(({from:c,to:u})=>Dt.range(c,Math.min(u+1,l.doc.length)));return o(l.update({selection:Dt.create(a),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:l,dispatch:o})=>{let a=X_(l.selection,c=>{var u;let h=qs(l).resolveInner(c.head,1);for(;!(h.from<c.from&&h.to>=c.to||h.to>c.to&&h.from<=c.from)&&(null===(u=h.parent)||void 0===u?void 0:u.parent);)h=h.parent;return Dt.range(h.to,h.from)});return o(xd(l,a)),!0},preventDefault:!0},{key:"Mod-[",run:({state:l,dispatch:o})=>!l.readOnly&&(o(l.update(CU(l,(a,c)=>{let u=/^\s*/.exec(a.text)[0];if(!u)return;let h=qS(u,l.tabSize),d=0,f=Z_(l,Math.max(0,h-b0(l)));for(;d<u.length&&d<f.length&&u.charCodeAt(d)==f.charCodeAt(d);)d++;c.push({from:a.from+d,to:a.from+u.length,insert:f.slice(d)})}),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:l,dispatch:o})=>!l.readOnly&&(o(l.update(CU(l,(a,c)=>{c.push({from:a.from,insert:l.facet(zE)})}),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:l,dispatch:o})=>{if(l.readOnly)return!1;let a=Object.create(null),c=new fw(l,{overrideIndentation:h=>{let d=a[h];return null==d?-1:d}}),u=CU(l,(h,d,f)=>{let p=UE(c,h.from);if(null==p)return;/\S/.test(h.text)||(p=0);let g=/^\s*/.exec(h.text)[0],m=Z_(l,p);(g!=m||f.from<h.from+g.length)&&(a[h.from]=p,d.push({from:h.from,to:h.from+g.length,insert:m}))});return u.changes.empty||o(l.update(u,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:l=>{if(l.state.readOnly)return!1;let{state:o}=l,a=o.changes(nA(o).map(({from:u,to:h})=>(u>0?u--:h<o.doc.length&&h++,{from:u,to:h}))),c=X_(o.selection,u=>l.moveVertically(u,!0)).map(a);return l.dispatch({changes:a,selection:c,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:l,dispatch:o})=>function jde(l,o,a){let c=!1,u=X_(l.selection,h=>{let d=bd(l,h.head,-1)||bd(l,h.head,1)||h.head>0&&bd(l,h.head-1,1)||h.head<l.doc.length&&bd(l,h.head+1,-1);if(!d||!d.end)return h;c=!0;let f=d.start.from==h.head?d.end.to:d.end.from;return a?Dt.range(h.anchor,f):Dt.cursor(f)});return!!c&&(o(xd(l,u)),!0)}(l,o,!1)},{key:"Mod-/",run:l=>{let o=pU(l.state);return o.line?_tt(l):!!o.block&&xtt(l)}},{key:"Alt-A",run:btt}].concat(wnt);function Gr(){var l=arguments[0];"string"==typeof l&&(l=document.createElement(l));var o=1,a=arguments[1];if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var u=a[c];"string"==typeof u?l.setAttribute(c,u):null!=u&&(l[c]=u)}o++}for(;o<arguments.length;o++)mfe(l,arguments[o]);return l}function mfe(l,o){if("string"==typeof o)l.appendChild(document.createTextNode(o));else if(null!=o)if(null!=o.nodeType)l.appendChild(o);else{if(!Array.isArray(o))throw new RangeError("Unsupported child node: "+o);for(var a=0;a<o.length;a++)mfe(l,o[a])}}const vfe="function"==typeof String.prototype.normalize?l=>l.normalize("NFKD"):l=>l;class Y_{constructor(o,a,c=0,u=o.length,h,d){this.test=d,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=o.iterRange(c,u),this.bufferStart=c,this.normalize=h?f=>h(vfe(f)):vfe,this.query=this.normalize(a)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ia(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let o=this.peek();if(o<0)return this.done=!0,this;let a=Z6(o),c=this.bufferStart+this.bufferPos;this.bufferPos+=xc(o);let u=this.normalize(a);for(let h=0,d=c;;h++){let f=u.charCodeAt(h),p=this.match(f,d);if(p)return this.value=p,this;if(h==u.length-1)break;d==c&&h<a.length&&a.charCodeAt(h)==f&&d++}}}match(o,a){let c=null;for(let u=0;u<this.matches.length;u+=2){let h=this.matches[u],d=!1;this.query.charCodeAt(h)==o&&(h==this.query.length-1?c={from:this.matches[u+1],to:a+1}:(this.matches[u]++,d=!0)),d||(this.matches.splice(u,2),u-=2)}return this.query.charCodeAt(0)==o&&(1==this.query.length?c={from:a,to:a+1}:this.matches.push(1,a)),c&&this.test&&!this.test(c.from,c.to,this.buffer,this.bufferPos)&&(c=null),c}}"undefined"!=typeof Symbol&&(Y_.prototype[Symbol.iterator]=function(){return this});const yfe={from:-1,to:-1,match:/.*/.exec("")},wU="gm"+(null==/x/.unicode?"":"u");class _fe{constructor(o,a,c,u=0,h=o.length){if(this.text=o,this.to=h,this.curLine="",this.done=!1,this.value=yfe,/\\[sWDnr]|\n|\r|\[\^/.test(a))return new bfe(o,a,c,u,h);this.re=new RegExp(a,wU+((null==c?void 0:c.ignoreCase)?"i":"")),this.test=null==c?void 0:c.test,this.iter=o.iter();let d=o.lineAt(u);this.curLineStart=d.from,this.matchPos=iA(o,u),this.getLine(this.curLineStart)}getLine(o){this.iter.next(o),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let o=this.matchPos-this.curLineStart;;){this.re.lastIndex=o;let a=this.matchPos<=this.to&&this.re.exec(this.curLine);if(a){let c=this.curLineStart+a.index,u=c+a[0].length;if(this.matchPos=iA(this.text,u+(c==u?1:0)),c==this.curLine.length&&this.nextLine(),(c<u||c>this.value.to)&&(!this.test||this.test(c,u,a)))return this.value={from:c,to:u,match:a},this;o=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),o=0}}}}const TU=new WeakMap;class K_{constructor(o,a){this.from=o,this.text=a}get to(){return this.from+this.text.length}static get(o,a,c){let u=TU.get(o);if(!u||u.from>=c||u.to<=a){let f=new K_(a,o.sliceString(a,c));return TU.set(o,f),f}if(u.from==a&&u.to==c)return u;let{text:h,from:d}=u;return d>a&&(h=o.sliceString(a,d)+h,d=a),u.to<c&&(h+=o.sliceString(u.to,c)),TU.set(o,new K_(d,h)),new K_(a,h.slice(a-d,c-d))}}class bfe{constructor(o,a,c,u,h){this.text=o,this.to=h,this.done=!1,this.value=yfe,this.matchPos=iA(o,u),this.re=new RegExp(a,wU+((null==c?void 0:c.ignoreCase)?"i":"")),this.test=null==c?void 0:c.test,this.flat=K_.get(o,u,this.chunkEnd(u+5e3))}chunkEnd(o){return o>=this.to?this.to:this.text.lineAt(o).to}next(){for(;;){let o=this.re.lastIndex=this.matchPos-this.flat.from,a=this.re.exec(this.flat.text);if(a&&!a[0]&&a.index==o&&(this.re.lastIndex=o+1,a=this.re.exec(this.flat.text)),a){let c=this.flat.from+a.index,u=c+a[0].length;if((this.flat.to>=this.to||a.index+a[0].length<=this.flat.text.length-10)&&(!this.test||this.test(c,u,a)))return this.value={from:c,to:u,match:a},this.matchPos=iA(this.text,u+(c==u?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=K_.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function iA(l,o){if(o>=l.length)return o;let c,a=l.lineAt(o);for(;o<a.to&&(c=a.text.charCodeAt(o-a.from))>=56320&&c<57344;)o++;return o}function OU(l){let o=Gr("input",{class:"cm-textfield",name:"line"});function c(){let u=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(o.value);if(!u)return;let{state:h}=l,d=h.doc.lineAt(h.selection.main.head),[,f,p,g,m]=u,v=g?+g.slice(1):0,y=p?+p:d.number;if(p&&m){let b=y/100;f&&(b=b*("-"==f?-1:1)+d.number/h.doc.lines),y=Math.round(h.doc.lines*b)}else p&&f&&(y=y*("-"==f?-1:1)+d.number);let _=h.doc.line(Math.max(1,Math.min(h.doc.lines,y)));l.dispatch({effects:rA.of(!1),selection:Dt.cursor(_.from+Math.max(0,Math.min(v,_.length))),scrollIntoView:!0}),l.focus()}return{dom:Gr("form",{class:"cm-gotoLine",onkeydown:u=>{27==u.keyCode?(u.preventDefault(),l.dispatch({effects:rA.of(!1)}),l.focus()):13==u.keyCode&&(u.preventDefault(),c())},onsubmit:u=>{u.preventDefault(),c()}},Gr("label",l.state.phrase("Go to line"),": ",o)," ",Gr("button",{class:"cm-button",type:"submit"},l.state.phrase("go")))}}"undefined"!=typeof Symbol&&(_fe.prototype[Symbol.iterator]=bfe.prototype[Symbol.iterator]=function(){return this});const rA=Gi.define(),xfe=ao.define({create:()=>!0,update(l,o){for(let a of o.effects)a.is(rA)&&(l=a.value);return l},provide:l=>lw.from(l,o=>o?OU:null)}),knt=Si.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Mnt={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Cfe=Rn.define({combine:l=>ah(l,Mnt,{highlightWordAroundCursor:(o,a)=>o||a,minSelectionLength:Math.min,maxMatches:Math.min})});function Ent(l){let o=[Fnt,Rnt];return l&&o.push(Cfe.of(l)),o}const Ant=Nn.mark({class:"cm-selectionMatch"}),Int=Nn.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Sfe(l,o,a,c){return!(0!=a&&l(o.sliceDoc(a-1,a))==hs.Word||c!=o.doc.length&&l(o.sliceDoc(c,c+1))==hs.Word)}const Rnt=js.fromClass(class{constructor(l){this.decorations=this.getDeco(l)}update(l){(l.selectionSet||l.docChanged||l.viewportChanged)&&(this.decorations=this.getDeco(l.view))}getDeco(l){let o=l.state.facet(Cfe),{state:a}=l,c=a.selection;if(c.ranges.length>1)return Nn.none;let h,u=c.main,d=null;if(u.empty){if(!o.highlightWordAroundCursor)return Nn.none;let p=a.wordAt(u.head);if(!p)return Nn.none;d=a.charCategorizer(u.head),h=a.sliceDoc(p.from,p.to)}else{let p=u.to-u.from;if(p<o.minSelectionLength||p>200)return Nn.none;if(o.wholeWords){if(h=a.sliceDoc(u.from,u.to),d=a.charCategorizer(u.head),!Sfe(d,a,u.from,u.to)||!function Pnt(l,o,a,c){return l(o.sliceDoc(a,a+1))==hs.Word&&l(o.sliceDoc(c-1,c))==hs.Word}(d,a,u.from,u.to))return Nn.none}else if(h=a.sliceDoc(u.from,u.to).trim(),!h)return Nn.none}let f=[];for(let p of l.visibleRanges){let g=new Y_(a.doc,h,p.from,p.to);for(;!g.next().done;){let{from:m,to:v}=g.value;if((!d||Sfe(d,a,m,v))&&(u.empty&&m<=u.from&&v>=u.to?f.push(Int.range(m,v)):(m>=u.to||v<=u.from)&&f.push(Ant.range(m,v)),f.length>o.maxMatches))return Nn.none}}return Nn.set(f)}},{decorations:l=>l.decorations}),Fnt=Si.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),sA=Rn.define({combine:l=>ah(l,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:o=>new Xnt(o)})});class wfe{constructor(o){this.search=o.search,this.caseSensitive=!!o.caseSensitive,this.literal=!!o.literal,this.regexp=!!o.regexp,this.replace=o.replace||"",this.valid=!!this.search&&(!this.regexp||function Ont(l){try{return new RegExp(l,wU),!0}catch(o){return!1}}(this.search)),this.unquoted=this.literal?this.search:this.search.replace(/\\([nrt\\])/g,(a,c)=>"n"==c?"\n":"r"==c?"\r":"t"==c?"\t":"\\"),this.wholeWord=!!o.wholeWord}eq(o){return this.search==o.search&&this.replace==o.replace&&this.caseSensitive==o.caseSensitive&&this.regexp==o.regexp&&this.wholeWord==o.wholeWord}create(){return this.regexp?new Hnt(this):new znt(this)}getCursor(o,a=0,c){let u=o.doc?o:ll.create({doc:o});return null==c&&(c=u.doc.length),this.regexp?e1(this,u,a,c):J_(this,u,a,c)}}class Tfe{constructor(o){this.spec=o}}function J_(l,o,a,c){return new Y_(o.doc,l.unquoted,a,c,l.caseSensitive?void 0:u=>u.toLowerCase(),l.wholeWord?function Vnt(l,o){return(a,c,u,h)=>((h>a||h+u.length<c)&&(h=Math.max(0,a-2),u=l.sliceString(h,Math.min(l.length,c+2))),!(o(oA(u,a-h))==hs.Word&&o(aA(u,a-h))==hs.Word||o(aA(u,c-h))==hs.Word&&o(oA(u,c-h))==hs.Word))}(o.doc,o.charCategorizer(o.selection.main.head)):void 0)}class znt extends Tfe{constructor(o){super(o)}nextMatch(o,a,c){let u=J_(this.spec,o,c,o.doc.length).nextOverlapping();return u.done&&(u=J_(this.spec,o,0,a).nextOverlapping()),u.done?null:u.value}prevMatchInRange(o,a,c){for(let u=c;;){let h=Math.max(a,u-1e4-this.spec.unquoted.length),d=J_(this.spec,o,h,u),f=null;for(;!d.nextOverlapping().done;)f=d.value;if(f)return f;if(h==a)return null;u-=1e4}}prevMatch(o,a,c){return this.prevMatchInRange(o,0,a)||this.prevMatchInRange(o,c,o.doc.length)}getReplacement(o){return this.spec.replace}matchAll(o,a){let c=J_(this.spec,o,0,o.doc.length),u=[];for(;!c.next().done;){if(u.length>=a)return null;u.push(c.value)}return u}highlight(o,a,c,u){let h=J_(this.spec,o,Math.max(0,a-this.spec.unquoted.length),Math.min(c+this.spec.unquoted.length,o.doc.length));for(;!h.next().done;)u(h.value.from,h.value.to)}}function e1(l,o,a,c){return new _fe(o.doc,l.search,{ignoreCase:!l.caseSensitive,test:l.wholeWord?Unt(o.charCategorizer(o.selection.main.head)):void 0},a,c)}function oA(l,o){return l.slice(al(l,o,!1),o)}function aA(l,o){return l.slice(o,al(l,o))}function Unt(l){return(o,a,c)=>!c[0].length||(l(oA(c.input,c.index))!=hs.Word||l(aA(c.input,c.index))!=hs.Word)&&(l(aA(c.input,c.index+c[0].length))!=hs.Word||l(oA(c.input,c.index+c[0].length))!=hs.Word)}class Hnt extends Tfe{nextMatch(o,a,c){let u=e1(this.spec,o,c,o.doc.length).next();return u.done&&(u=e1(this.spec,o,0,a).next()),u.done?null:u.value}prevMatchInRange(o,a,c){for(let u=1;;u++){let h=Math.max(a,c-1e4*u),d=e1(this.spec,o,h,c),f=null;for(;!d.next().done;)f=d.value;if(f&&(h==a||f.from>h+10))return f;if(h==a)return null}}prevMatch(o,a,c){return this.prevMatchInRange(o,0,a)||this.prevMatchInRange(o,c,o.doc.length)}getReplacement(o){return this.spec.replace.replace(/\$([$&\d+])/g,(a,c)=>"$"==c?"$":"&"==c?o.match[0]:"0"!=c&&+c<o.match.length?o.match[c]:a)}matchAll(o,a){let c=e1(this.spec,o,0,o.doc.length),u=[];for(;!c.next().done;){if(u.length>=a)return null;u.push(c.value)}return u}highlight(o,a,c,u){let h=e1(this.spec,o,Math.max(0,a-250),Math.min(c+250,o.doc.length));for(;!h.next().done;)u(h.value.from,h.value.to)}}const _w=Gi.define(),DU=Gi.define(),Cd=ao.define({create:l=>new kU(uA(l).create(),null),update(l,o){for(let a of o.effects)a.is(_w)?l=new kU(a.value.create(),l.panel):a.is(DU)&&(l=new kU(l.query,a.value?MU:null));return l},provide:l=>lw.from(l,o=>o.panel)});class kU{constructor(o,a){this.query=o,this.panel=a}}const $nt=Nn.mark({class:"cm-searchMatch"}),Wnt=Nn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Gnt=js.fromClass(class{constructor(l){this.view=l,this.decorations=this.highlight(l.state.field(Cd))}update(l){let o=l.state.field(Cd);(o!=l.startState.field(Cd)||l.docChanged||l.selectionSet||l.viewportChanged)&&(this.decorations=this.highlight(o))}highlight({query:l,panel:o}){if(!o||!l.spec.valid)return Nn.none;let{view:a}=this,c=new ig;for(let u=0,h=a.visibleRanges,d=h.length;u<d;u++){let{from:f,to:p}=h[u];for(;u<d-1&&p>h[u+1].from-500;)p=h[++u].to;l.highlight(a.state,f,p,(g,m)=>{let v=a.state.selection.ranges.some(y=>y.from==g&&y.to==m);c.add(g,m,v?Wnt:$nt)})}return c.finish()}},{decorations:l=>l.decorations});function bw(l){return o=>{let a=o.state.field(Cd,!1);return a&&a.query.spec.valid?l(o,a):Dfe(o)}}const lA=bw((l,{query:o})=>{let{to:a}=l.state.selection.main,c=o.nextMatch(l.state,a,a);return!!c&&(l.dispatch({selection:{anchor:c.from,head:c.to},scrollIntoView:!0,effects:EU(l,c),userEvent:"select.search"}),!0)}),cA=bw((l,{query:o})=>{let{state:a}=l,{from:c}=a.selection.main,u=o.prevMatch(a,c,c);return!!u&&(l.dispatch({selection:{anchor:u.from,head:u.to},scrollIntoView:!0,effects:EU(l,u),userEvent:"select.search"}),!0)}),Qnt=bw((l,{query:o})=>{let a=o.matchAll(l.state,1e3);return!(!a||!a.length||(l.dispatch({selection:Dt.create(a.map(c=>Dt.range(c.from,c.to))),userEvent:"select.search.matches"}),0))}),Ofe=bw((l,{query:o})=>{let{state:a}=l,{from:c,to:u}=a.selection.main;if(a.readOnly)return!1;let h=o.nextMatch(a,c,c);if(!h)return!1;let f,p,d=[],g=[];if(h.from==c&&h.to==u&&(p=a.toText(o.getReplacement(h)),d.push({from:h.from,to:h.to,insert:p}),h=o.nextMatch(a,h.from,h.to),g.push(Si.announce.of(a.phrase("replaced match on line $",a.doc.lineAt(c).number)+"."))),h){let m=0==d.length||d[0].from>=h.to?0:h.to-h.from-p.length;f={anchor:h.from-m,head:h.to-m},g.push(EU(l,h))}return l.dispatch({changes:d,selection:f,scrollIntoView:!!f,effects:g,userEvent:"input.replace"}),!0}),qnt=bw((l,{query:o})=>{if(l.state.readOnly)return!1;let a=o.matchAll(l.state,1e9).map(u=>{let{from:h,to:d}=u;return{from:h,to:d,insert:o.getReplacement(u)}});if(!a.length)return!1;let c=l.state.phrase("replaced $ matches",a.length)+".";return l.dispatch({changes:a,effects:Si.announce.of(c),userEvent:"input.replace.all"}),!0});function MU(l){return l.state.facet(sA).createPanel(l)}function uA(l,o){var a,c,u,h;let d=l.selection.main,f=d.empty||d.to>d.from+100?"":l.sliceDoc(d.from,d.to);if(o&&!f)return o;let p=l.facet(sA);return new wfe({search:(null!==(a=null==o?void 0:o.literal)&&void 0!==a?a:p.literal)?f:f.replace(/\n/g,"\\n"),caseSensitive:null!==(c=null==o?void 0:o.caseSensitive)&&void 0!==c?c:p.caseSensitive,literal:null!==(u=null==o?void 0:o.literal)&&void 0!==u?u:p.literal,wholeWord:null!==(h=null==o?void 0:o.wholeWord)&&void 0!==h?h:p.wholeWord})}const Dfe=l=>{let o=l.state.field(Cd,!1);if(o&&o.panel){let a=aw(l,MU);if(!a)return!1;let c=a.dom.querySelector("[main-field]");if(c&&c!=l.root.activeElement){let u=uA(l.state,o.query.spec);u.valid&&l.dispatch({effects:_w.of(u)}),c.focus(),c.select()}}else l.dispatch({effects:[DU.of(!0),o?_w.of(uA(l.state,o.query.spec)):Gi.appendConfig.of(AU)]});return!0},kfe=l=>{let o=l.state.field(Cd,!1);if(!o||!o.panel)return!1;let a=aw(l,MU);return a&&a.dom.contains(l.root.activeElement)&&l.focus(),l.dispatch({effects:DU.of(!1)}),!0},Znt=[{key:"Mod-f",run:Dfe,scope:"editor search-panel"},{key:"F3",run:lA,shift:cA,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:lA,shift:cA,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:kfe,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:l,dispatch:o})=>{let a=l.selection;if(a.ranges.length>1||a.main.empty)return!1;let{from:c,to:u}=a.main,h=[],d=0;for(let f=new Y_(l.doc,l.sliceDoc(c,u));!f.next().done;){if(h.length>1e3)return!1;f.value.from==c&&(d=h.length),h.push(Dt.range(f.value.from,f.value.to))}return o(l.update({selection:Dt.create(h,d),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:l=>{let o=aw(l,OU);if(!o){let a=[rA.of(!0)];null==l.state.field(xfe,!1)&&a.push(Gi.appendConfig.of([xfe,knt])),l.dispatch({effects:a}),o=aw(l,OU)}return o&&o.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:l,dispatch:o})=>{let{ranges:a}=l.selection;if(a.some(h=>h.from===h.to))return(({state:l,dispatch:o})=>{let{selection:a}=l,c=Dt.create(a.ranges.map(u=>l.wordAt(u.head)||Dt.cursor(u.head)),a.mainIndex);return!c.eq(a)&&(o(l.update({selection:c})),!0)})({state:l,dispatch:o});let c=l.sliceDoc(a[0].from,a[0].to);if(l.selection.ranges.some(h=>l.sliceDoc(h.from,h.to)!=c))return!1;let u=function Lnt(l,o){let{main:a,ranges:c}=l.selection,u=l.wordAt(a.head),h=u&&u.from==a.from&&u.to==a.to;for(let d=!1,f=new Y_(l.doc,o,c[c.length-1].to);;){if(f.next(),!f.done){if(d&&c.some(p=>p.from==f.value.from))continue;if(h){let p=l.wordAt(f.value.from);if(!p||p.from!=f.value.from||p.to!=f.value.to)continue}return f.value}if(d)return null;f=new Y_(l.doc,o,0,Math.max(0,c[c.length-1].from-1)),d=!0}}(l,c);return!!u&&(o(l.update({selection:l.selection.addRange(Dt.range(u.from,u.to),!1),effects:Si.scrollIntoView(u.to)})),!0)},preventDefault:!0}];class Xnt{constructor(o){this.view=o;let a=this.query=o.state.field(Cd).query.spec;function c(u,h,d){return Gr("button",{class:"cm-button",name:u,onclick:h,type:"button"},d)}this.commit=this.commit.bind(this),this.searchField=Gr("input",{value:a.search,placeholder:Oc(o,"Find"),"aria-label":Oc(o,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Gr("input",{value:a.replace,placeholder:Oc(o,"Replace"),"aria-label":Oc(o,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=Gr("input",{type:"checkbox",name:"case",checked:a.caseSensitive,onchange:this.commit}),this.reField=Gr("input",{type:"checkbox",name:"re",checked:a.regexp,onchange:this.commit}),this.wordField=Gr("input",{type:"checkbox",name:"word",checked:a.wholeWord,onchange:this.commit}),this.dom=Gr("div",{onkeydown:u=>this.keydown(u),class:"cm-search"},[this.searchField,c("next",()=>lA(o),[Oc(o,"next")]),c("prev",()=>cA(o),[Oc(o,"previous")]),c("select",()=>Qnt(o),[Oc(o,"all")]),Gr("label",null,[this.caseField,Oc(o,"match case")]),Gr("label",null,[this.reField,Oc(o,"regexp")]),Gr("label",null,[this.wordField,Oc(o,"by word")]),...o.state.readOnly?[]:[Gr("br"),this.replaceField,c("replace",()=>Ofe(o),[Oc(o,"replace")]),c("replaceAll",()=>qnt(o),[Oc(o,"replace all")]),Gr("button",{name:"close",onclick:()=>kfe(o),"aria-label":Oc(o,"close"),type:"button"},["\xd7"])]])}commit(){let o=new wfe({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});o.eq(this.query)||(this.query=o,this.view.dispatch({effects:_w.of(o)}))}keydown(o){!function uJe(l,o,a){return ghe(phe(l.state),o,l,a)}(this.view,o,"search-panel")?13==o.keyCode&&o.target==this.searchField?(o.preventDefault(),(o.shiftKey?cA:lA)(this.view)):13==o.keyCode&&o.target==this.replaceField&&(o.preventDefault(),Ofe(this.view)):o.preventDefault()}update(o){for(let a of o.transactions)for(let c of a.effects)c.is(_w)&&!c.value.eq(this.query)&&this.setQuery(c.value)}setQuery(o){this.query=o,this.searchField.value=o.search,this.replaceField.value=o.replace,this.caseField.checked=o.caseSensitive,this.reField.checked=o.regexp,this.wordField.checked=o.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(sA).top}}function Oc(l,o){return l.state.phrase(o)}const dA=/[\s\.,:;?!]/;function EU(l,{from:o,to:a}){let c=l.state.doc.lineAt(o),u=l.state.doc.lineAt(a).to,h=Math.max(c.from,o-30),d=Math.min(u,a+30),f=l.state.sliceDoc(h,d);if(h!=c.from)for(let p=0;p<30;p++)if(!dA.test(f[p+1])&&dA.test(f[p])){f=f.slice(p);break}if(d!=u)for(let p=f.length-1;p>f.length-30;p--)if(!dA.test(f[p-1])&&dA.test(f[p])){f=f.slice(0,p);break}return Si.announce.of(`${l.state.phrase("current match")}. ${f} ${l.state.phrase("on line")} ${c.number}.`)}const Ynt=Si.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),AU=[Cd,d0.lowest(Gnt),Ynt];class Mfe{constructor(o,a,c){this.state=o,this.pos=a,this.explicit=c,this.abortListeners=[]}tokenBefore(o){let a=qs(this.state).resolveInner(this.pos,-1);for(;a&&o.indexOf(a.name)<0;)a=a.parent;return a?{from:a.from,to:this.pos,text:this.state.sliceDoc(a.from,this.pos),type:a.type}:null}matchBefore(o){let a=this.state.doc.lineAt(this.pos),c=Math.max(a.from,this.pos-250),u=a.text.slice(c-a.from,this.pos-a.from),h=u.search(Pfe(o,!1));return h<0?null:{from:c+h,to:this.pos,text:u.slice(h)}}get aborted(){return null==this.abortListeners}addEventListener(o,a){"abort"==o&&this.abortListeners&&this.abortListeners.push(a)}}function Efe(l){let o=Object.keys(l).join(""),a=/\w/.test(o);return a&&(o=o.replace(/\w/g,"")),`[${a?"\\w":""}${o.replace(/[^\w\s]/g,"\\$&")}]`}function Afe(l){let o=l.map(u=>"string"==typeof u?{label:u}:u),[a,c]=o.every(u=>/^\w+$/.test(u.label))?[/\w*$/,/\w+$/]:function Knt(l){let o=Object.create(null),a=Object.create(null);for(let{label:u}of l){o[u[0]]=!0;for(let h=1;h<u.length;h++)a[u[h]]=!0}let c=Efe(o)+Efe(a)+"*$";return[new RegExp("^"+c),new RegExp(c)]}(o);return u=>{let h=u.matchBefore(c);return h||u.explicit?{from:h?h.from:u.pos,options:o,validFor:a}:null}}function Jnt(l,o){return a=>{for(let c=qs(a.state).resolveInner(a.pos,-1);c;c=c.parent)if(l.indexOf(c.name)>-1)return null;return o(a)}}class Ife{constructor(o,a,c){this.completion=o,this.source=a,this.match=c}}function mg(l){return l.selection.main.head}function Pfe(l,o){var a;let{source:c}=l,u=o&&"^"!=c[0],h="$"!=c[c.length-1];return u||h?new RegExp(`${u?"^":""}(?:${c})${h?"$":""}`,null!==(a=l.flags)&&void 0!==a?a:l.ignoreCase?"i":""):l}function Rfe(l,o){const a=o.completion.apply||o.completion.label;let c=o.source;"string"==typeof a?l.dispatch(function eit(l,o,a,c){return Object.assign(Object.assign({},l.changeByRange(u=>{if(u==l.selection.main)return{changes:{from:a,to:c,insert:o},range:Dt.cursor(a+o.length)};let h=c-a;return!u.empty||h&&l.sliceDoc(u.from-h,u.from)!=l.sliceDoc(a,c)?{range:u}:{changes:{from:u.from-h,to:u.from,insert:o},range:Dt.cursor(u.from-h+o.length)}})),{userEvent:"input.complete"})}(l.state,a,c.from,c.to)):a(l,o.completion,c.from,c.to)}const Ffe=new WeakMap;function tit(l){if(!Array.isArray(l))return l;let o=Ffe.get(l);return o||Ffe.set(l,o=Afe(l)),o}class nit{constructor(o){this.pattern=o,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let a=0;a<o.length;){let c=ia(o,a),u=xc(c);this.chars.push(c);let h=o.slice(a,a+u),d=h.toUpperCase();this.folded.push(ia(d==h?h.toLowerCase():d,0)),a+=u}this.astral=o.length!=this.chars.length}match(o){if(0==this.pattern.length)return[0];if(o.length<this.pattern.length)return null;let{chars:a,folded:c,any:u,precise:h,byWord:d}=this;if(1==a.length){let w=ia(o,0);return w==a[0]?[0,0,xc(w)]:w==c[0]?[-200,0,xc(w)]:null}let f=o.indexOf(this.pattern);if(0==f)return[0,0,this.pattern.length];let p=a.length,g=0;if(f<0){for(let w=0,O=Math.min(o.length,200);w<O&&g<p;){let T=ia(o,w);(T==a[g]||T==c[g])&&(u[g++]=w),w+=xc(T)}if(g<p)return null}let m=0,v=0,y=!1,_=0,b=-1,C=-1,x=/[a-z]/.test(o),S=!0;for(let w=0,O=Math.min(o.length,200),T=0;w<O&&v<p;){let M=ia(o,w);f<0&&(m<p&&M==a[m]&&(h[m++]=w),_<p&&(M==a[_]||M==c[_]?(0==_&&(b=w),C=w+1,_++):_=0));let A,I=M<255?M>=48&&M<=57||M>=97&&M<=122?2:M>=65&&M<=90?1:0:(A=Z6(M))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!w||1==I&&x||0==T&&0!=I)&&(a[v]==M||c[v]==M&&(y=!0)?d[v++]=w:d.length&&(S=!1)),T=I,w+=xc(M)}return v==p&&0==d[0]&&S?this.result((y?-200:0)-100,d,o):_==p&&0==b?[-200-o.length,0,C]:f>-1?[-700-o.length,f,f+this.pattern.length]:_==p?[-900-o.length,b,C]:v==p?this.result((y?-200:0)-100-700+(S?0:-1100),d,o):2==a.length?null:this.result((u[0]?-700:0)-200-1100,u,o)}result(o,a,c){let u=[o-c.length],h=1;for(let d of a){let f=d+(this.astral?xc(ia(c,d)):1);h>1&&u[h-1]==d?u[h-1]=f:(u[h++]=d,u[h++]=f)}return u}}const fu=Rn.define({combine:l=>ah(l,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(o,a)=>o.label.localeCompare(a.label),interactionDelay:75},{defaultKeymap:(o,a)=>o&&a,closeOnBlur:(o,a)=>o&&a,icons:(o,a)=>o&&a,optionClass:(o,a)=>c=>function iit(l,o){return l?o?l+" "+o:l:o}(o(c),a(c)),addToOptions:(o,a)=>o.concat(a)})});function Nfe(l,o,a){if(l<=a)return{from:0,to:l};if(o<0&&(o=0),o<=l>>1){let u=Math.floor(o/a);return{from:u*a,to:(u+1)*a}}let c=Math.floor((l-o)/a);return{from:l-(c+1)*a,to:l-c*a}}class sit{constructor(o,a){this.view=o,this.stateField=a,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:f=>this.positionInfo(f),key:this};let c=o.state.field(a),{options:u,selected:h}=c.open,d=o.state.facet(fu);this.optionContent=function rit(l){let o=l.addToOptions.slice();return l.icons&&o.push({render(a){let c=document.createElement("div");return c.classList.add("cm-completionIcon"),a.type&&c.classList.add(...a.type.split(/\s+/g).map(u=>"cm-completionIcon-"+u)),c.setAttribute("aria-hidden","true"),c},position:20}),o.push({render(a,c,u){let h=document.createElement("span");h.className="cm-completionLabel";let{label:d}=a,f=0;for(let p=1;p<u.length;){let g=u[p++],m=u[p++];g>f&&h.appendChild(document.createTextNode(d.slice(f,g)));let v=h.appendChild(document.createElement("span"));v.appendChild(document.createTextNode(d.slice(g,m))),v.className="cm-completionMatchedText",f=m}return f<d.length&&h.appendChild(document.createTextNode(d.slice(f))),h},position:50},{render(a){if(!a.detail)return null;let c=document.createElement("span");return c.className="cm-completionDetail",c.textContent=a.detail,c},position:80}),o.sort((a,c)=>a.position-c.position).map(a=>a.render)}(d),this.optionClass=d.optionClass,this.range=Nfe(u.length,h,d.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",f=>{for(let g,p=f.target;p&&p!=this.dom;p=p.parentNode)if("LI"==p.nodeName&&(g=/-(\d+)$/.exec(p.id))&&+g[1]<u.length)return Rfe(o,u[+g[1]]),void f.preventDefault()}),this.list=this.dom.appendChild(this.createListBox(u,c.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(o){o.state.field(this.stateField)!=o.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let o=this.view.state.field(this.stateField),a=o.open;if((a.selected>-1&&a.selected<this.range.from||a.selected>=this.range.to)&&(this.range=Nfe(a.options.length,a.selected,this.view.state.facet(fu).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(a.options,o.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(a.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:c}=a.options[a.selected],{info:u}=c;if(!u)return;let h="string"==typeof u?document.createTextNode(u):u(c);if(!h)return;"then"in h?h.then(d=>{d&&this.view.state.field(this.stateField,!1)==o&&this.addInfoPane(d)}).catch(d=>Sc(this.view.state,d,"completion info")):this.addInfoPane(h)}}addInfoPane(o){let a=this.info=document.createElement("div");a.className="cm-tooltip cm-completionInfo",a.appendChild(o),this.dom.appendChild(a),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(o){let a=null;for(let c=this.list.firstChild,u=this.range.from;c;c=c.nextSibling,u++)u==o?c.hasAttribute("aria-selected")||(c.setAttribute("aria-selected","true"),a=c):c.hasAttribute("aria-selected")&&c.removeAttribute("aria-selected");return a&&function ait(l,o){let a=l.getBoundingClientRect(),c=o.getBoundingClientRect();c.top<a.top?l.scrollTop-=a.top-c.top:c.bottom>a.bottom&&(l.scrollTop+=c.bottom-a.bottom)}(this.list,a),a}measureInfo(){let o=this.dom.querySelector("[aria-selected]");if(!o||!this.info)return null;let a=this.dom.ownerDocument.defaultView||window,c=this.dom.getBoundingClientRect(),u=this.info.getBoundingClientRect(),h=o.getBoundingClientRect();if(h.top>Math.min(a.innerHeight,c.bottom)-10||h.bottom<Math.max(0,c.top)+10)return null;let g,d=this.view.textDirection==xs.RTL,f=d,p=!1,m="",v="",y=c.left,_=a.innerWidth-c.right;if(f&&y<Math.min(u.width,_)?f=!1:!f&&_<Math.min(u.width,y)&&(f=!0),u.width<=(f?y:_))m=Math.max(0,Math.min(h.top,a.innerHeight-u.height))-c.top+"px",g=Math.min(400,f?y:_)+"px";else{p=!0,g=Math.min(400,(d?c.right:a.innerWidth-c.left)-30)+"px";let b=a.innerHeight-c.bottom;b>=u.height||b>c.top?m=h.bottom-c.top+"px":v=c.bottom-h.top+"px"}return{top:m,bottom:v,maxWidth:g,class:p?d?"left-narrow":"right-narrow":f?"left":"right"}}positionInfo(o){this.info&&(o?(this.info.style.top=o.top,this.info.style.bottom=o.bottom,this.info.style.maxWidth=o.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+o.class):this.info.style.top="-1e6px")}createListBox(o,a,c){const u=document.createElement("ul");u.id=a,u.setAttribute("role","listbox"),u.setAttribute("aria-expanded","true"),u.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let h=c.from;h<c.to;h++){let{completion:d,match:f}=o[h];const p=u.appendChild(document.createElement("li"));p.id=a+"-"+h,p.setAttribute("role","option");let g=this.optionClass(d);g&&(p.className=g);for(let m of this.optionContent){let v=m(d,this.view.state,f);v&&p.appendChild(v)}}return c.from&&u.classList.add("cm-completionListIncompleteTop"),c.to<o.length&&u.classList.add("cm-completionListIncompleteBottom"),u}}function oit(l){return o=>new sit(o,l)}function Lfe(l){return 100*(l.boost||0)+(l.apply?10:0)+(l.info?5:0)+(l.type?1:0)}class xw{constructor(o,a,c,u,h){this.options=o,this.attrs=a,this.tooltip=c,this.timestamp=u,this.selected=h}setSelected(o,a){return o==this.selected||o>=this.options.length?this:new xw(this.options,Bfe(a,o),this.tooltip,this.timestamp,o)}static build(o,a,c,u,h){let d=function lit(l,o){let a=[],c=0;for(let f of l)if(f.hasResult())if(!1===f.result.filter){let p=f.result.getMatch;for(let g of f.result.options){let m=[1e9-c++];if(p)for(let v of p(g))m.push(v);a.push(new Ife(g,f,m))}}else{let g,p=new nit(o.sliceDoc(f.from,f.to));for(let m of f.result.options)(g=p.match(m.label))&&(null!=m.boost&&(g[0]+=m.boost),a.push(new Ife(m,f,g)))}let u=[],h=null,d=o.facet(fu).compareCompletions;for(let f of a.sort((p,g)=>g.match[0]-p.match[0]||d(p.completion,g.completion)))!h||h.label!=f.completion.label||h.detail!=f.completion.detail||null!=h.type&&null!=f.completion.type&&h.type!=f.completion.type||h.apply!=f.completion.apply?u.push(f):Lfe(f.completion)>Lfe(h)&&(u[u.length-1]=f),h=f.completion;return u}(o,a);if(!d.length)return null;let f=a.facet(fu).selectOnOpen?0:-1;if(u&&u.selected!=f&&-1!=u.selected){let p=u.options[u.selected].completion;for(let g=0;g<d.length;g++)if(d[g].completion==p){f=g;break}}return new xw(d,Bfe(c,f),{pos:o.reduce((p,g)=>g.hasResult()?Math.min(p,g.from):p,1e8),create:oit(Ma),above:h.aboveCursor},u?u.timestamp:Date.now(),f)}map(o){return new xw(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:o.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class fA{constructor(o,a,c){this.active=o,this.id=a,this.open=c}static start(){return new fA(hit,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(o){let{state:a}=o,c=a.facet(fu),h=(c.override||a.languageDataAt("autocomplete",mg(a)).map(tit)).map(f=>(this.active.find(g=>g.source==f)||new Ll(f,this.active.some(g=>0!=g.state)?1:0)).update(o,c));h.length==this.active.length&&h.every((f,p)=>f==this.active[p])&&(h=this.active);let d=o.selection||h.some(f=>f.hasResult()&&o.changes.touchesRange(f.from,f.to))||!function cit(l,o){if(l==o)return!0;for(let a=0,c=0;;){for(;a<l.length&&!l[a].hasResult;)a++;for(;c<o.length&&!o[c].hasResult;)c++;let u=a==l.length,h=c==o.length;if(u||h)return u==h;if(l[a++].result!=o[c++].result)return!1}}(h,this.active)?xw.build(h,a,this.id,this.open,c):this.open&&o.docChanged?this.open.map(o.changes):this.open;!d&&h.every(f=>1!=f.state)&&h.some(f=>f.hasResult())&&(h=h.map(f=>f.hasResult()?new Ll(f.source,0):f));for(let f of o.effects)f.is(RU)&&(d=d&&d.setSelected(f.value,this.id));return h==this.active&&d==this.open?this:new fA(h,this.id,d)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:uit}}const uit={"aria-autocomplete":"list"};function Bfe(l,o){let a={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":l};return o>-1&&(a["aria-activedescendant"]=l+"-"+o),a}const hit=[];function IU(l){return l.isUserEvent("input.type")?"input":l.isUserEvent("delete.backward")?"delete":null}class Ll{constructor(o,a,c=-1){this.source=o,this.state=a,this.explicitPos=c}hasResult(){return!1}update(o,a){let c=IU(o),u=this;c?u=u.handleUserEvent(o,c,a):o.docChanged?u=u.handleChange(o):o.selection&&0!=u.state&&(u=new Ll(u.source,0));for(let h of o.effects)if(h.is(PU))u=new Ll(u.source,1,h.value?mg(o.state):-1);else if(h.is(pA))u=new Ll(u.source,0);else if(h.is(Vfe))for(let d of h.value)d.source==u.source&&(u=d);return u}handleUserEvent(o,a,c){return"delete"!=a&&c.activateOnTyping?new Ll(this.source,1):this.map(o.changes)}handleChange(o){return o.changes.touchesRange(mg(o.startState))?new Ll(this.source,0):this.map(o.changes)}map(o){return o.empty||this.explicitPos<0?this:new Ll(this.source,this.state,o.mapPos(this.explicitPos))}}class Cw extends Ll{constructor(o,a,c,u,h){super(o,2,a),this.result=c,this.from=u,this.to=h}hasResult(){return!0}handleUserEvent(o,a,c){var u;let h=o.changes.mapPos(this.from),d=o.changes.mapPos(this.to,1),f=mg(o.state);if((this.explicitPos<0?f<=h:f<this.from)||f>d||"delete"==a&&mg(o.startState)==this.from)return new Ll(this.source,"input"==a&&c.activateOnTyping?1:0);let g,p=this.explicitPos<0?-1:o.changes.mapPos(this.explicitPos);return function dit(l,o,a,c){if(!l)return!1;let u=o.sliceDoc(a,c);return"function"==typeof l?l(u,a,c,o):Pfe(l,!0).test(u)}(this.result.validFor,o.state,h,d)?new Cw(this.source,p,this.result,h,d):this.result.update&&(g=this.result.update(this.result,h,d,new Mfe(o.state,f,p>=0)))?new Cw(this.source,p,g,g.from,null!==(u=g.to)&&void 0!==u?u:mg(o.state)):new Ll(this.source,1,p)}handleChange(o){return o.changes.touchesRange(this.from,this.to)?new Ll(this.source,0):this.map(o.changes)}map(o){return o.empty?this:new Cw(this.source,this.explicitPos<0?-1:o.mapPos(this.explicitPos),this.result,o.mapPos(this.from),o.mapPos(this.to,1))}}const PU=Gi.define(),pA=Gi.define(),Vfe=Gi.define({map:(l,o)=>l.map(a=>a.map(o))}),RU=Gi.define(),Ma=ao.define({create:()=>fA.start(),update:(l,o)=>l.update(o),provide:l=>[OE.from(l,o=>o.tooltip),Si.contentAttributes.from(l,o=>o.attrs)]});function gA(l,o="option"){return a=>{let c=a.state.field(Ma,!1);if(!c||!c.open||Date.now()-c.open.timestamp<a.state.facet(fu).interactionDelay)return!1;let h,u=1;"page"==o&&(h=function XJe(l,o){let a=l.plugin(Gz);if(!a)return null;let c=a.manager.tooltips.indexOf(o);return c<0?null:a.manager.tooltipViews[c]}(a,c.open.tooltip))&&(u=Math.max(2,Math.floor(h.dom.offsetHeight/h.dom.querySelector("li").offsetHeight)-1));let{length:d}=c.open.options,f=c.open.selected>-1?c.open.selected+u*(l?1:-1):l?0:d-1;return f<0?f="page"==o?0:d-1:f>=d&&(f="page"==o?d-1:0),a.dispatch({effects:RU.of(f)}),!0}}class mit{constructor(o,a){this.active=o,this.context=a,this.time=Date.now(),this.updates=[],this.done=void 0}}const _it=js.fromClass(class{constructor(l){this.view=l,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let o of l.state.field(Ma).active)1==o.state&&this.startQuery(o)}update(l){let o=l.state.field(Ma);if(!l.selectionSet&&!l.docChanged&&l.startState.field(Ma)==o)return;let a=l.transactions.some(c=>(c.selection||c.docChanged)&&!IU(c));for(let c=0;c<this.running.length;c++){let u=this.running[c];if(a||u.updates.length+l.transactions.length>50&&Date.now()-u.time>1e3){for(let h of u.context.abortListeners)try{h()}catch(d){Sc(this.view.state,d)}u.context.abortListeners=null,this.running.splice(c--,1)}else u.updates.push(...l.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=o.active.some(c=>1==c.state&&!this.running.some(u=>u.active.source==c.source))?setTimeout(()=>this.startUpdate(),50):-1,0!=this.composing)for(let c of l.transactions)"input"==IU(c)?this.composing=2:2==this.composing&&c.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:l}=this.view,o=l.field(Ma);for(let a of o.active)1==a.state&&!this.running.some(c=>c.active.source==a.source)&&this.startQuery(a)}startQuery(l){let{state:o}=this.view,a=mg(o),c=new Mfe(o,a,l.explicitPos==a),u=new mit(l,c);this.running.push(u),Promise.resolve(l.source(c)).then(h=>{u.context.aborted||(u.done=h||null,this.scheduleAccept())},h=>{this.view.dispatch({effects:pA.of(null)}),Sc(this.view.state,h)})}scheduleAccept(){this.running.every(l=>void 0!==l.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),50))}accept(){var l;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let o=[],a=this.view.state.facet(fu);for(let c=0;c<this.running.length;c++){let u=this.running[c];if(void 0===u.done)continue;if(this.running.splice(c--,1),u.done){let d=new Cw(u.active.source,u.active.explicitPos,u.done,u.done.from,null!==(l=u.done.to)&&void 0!==l?l:mg(u.updates.length?u.updates[0].startState:this.view.state));for(let f of u.updates)d=d.update(f,a);if(d.hasResult()){o.push(d);continue}}let h=this.view.state.field(Ma).active.find(d=>d.source==u.active.source);if(h&&1==h.state)if(null==u.done){let d=new Ll(u.active.source,0);for(let f of u.updates)d=d.update(f,a);1!=d.state&&o.push(d)}else this.startQuery(h)}o.length&&this.view.dispatch({effects:Vfe.of(o)})}},{eventHandlers:{blur(){let l=this.view.state.field(Ma,!1);l&&l.tooltip&&this.view.state.facet(fu).closeOnBlur&&this.view.dispatch({effects:pA.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:PU.of(!1)}),20),this.composing=0}}}),Ufe=Si.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1d465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1d436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1d461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1f511}\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class bit{constructor(o,a,c,u){this.field=o,this.line=a,this.from=c,this.to=u}}class FU{constructor(o,a,c){this.field=o,this.from=a,this.to=c}map(o){let a=o.mapPos(this.from,-1,ra.TrackDel),c=o.mapPos(this.to,1,ra.TrackDel);return null==a||null==c?null:new FU(this.field,a,c)}}class NU{constructor(o,a){this.lines=o,this.fieldPositions=a}instantiate(o,a){let c=[],u=[a],h=o.doc.lineAt(a),d=/^\s*/.exec(h.text)[0];for(let p of this.lines){if(c.length){let g=d,m=/^\t*/.exec(p)[0].length;for(let v=0;v<m;v++)g+=o.facet(zE);u.push(a+g.length-m),p=g+p.slice(m)}c.push(p),a+=p.length+1}return{text:c,ranges:this.fieldPositions.map(p=>new FU(p.field,u[p.line]+p.from,u[p.line]+p.to))}}static parse(o){let h,a=[],c=[],u=[];for(let d of o.split(/\r\n?|\n/)){for(;h=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(d);){let f=h[1]?+h[1]:null,p=h[2]||h[3]||"",g=-1;for(let m=0;m<a.length;m++)(null!=f?a[m].seq==f:p&&a[m].name==p)&&(g=m);if(g<0){let m=0;for(;m<a.length&&(null==f||null!=a[m].seq&&a[m].seq<f);)m++;a.splice(m,0,{seq:f,name:p}),g=m;for(let v of u)v.field>=g&&v.field++}u.push(new bit(g,c.length,h.index,h.index+p.length)),d=d.slice(0,h.index)+p+d.slice(h.index+h[0].length)}for(let f;f=/([$#])\\{/.exec(d);){d=d.slice(0,f.index)+f[1]+"{"+d.slice(f.index+f[0].length);for(let p of u)p.line==c.length&&p.from>f.index&&(p.from--,p.to--)}c.push(d)}return new NU(c,u)}}let xit=Nn.widget({widget:new class extends Af{toDOM(){let l=document.createElement("span");return l.className="cm-snippetFieldPosition",l}ignoreEvent(){return!1}}}),Cit=Nn.mark({class:"cm-snippetField"});class t1{constructor(o,a){this.ranges=o,this.active=a,this.deco=Nn.set(o.map(c=>(c.from==c.to?xit:Cit).range(c.from,c.to)))}map(o){let a=[];for(let c of this.ranges){let u=c.map(o);if(!u)return null;a.push(u)}return new t1(a,this.active)}selectionInsideField(o){return o.ranges.every(a=>this.ranges.some(c=>c.field==this.active&&c.from<=a.from&&c.to>=a.to))}}const Sw=Gi.define({map:(l,o)=>l&&l.map(o)}),Sit=Gi.define(),ww=ao.define({create:()=>null,update(l,o){for(let a of o.effects){if(a.is(Sw))return a.value;if(a.is(Sit)&&l)return new t1(l.ranges,a.value)}return l&&o.docChanged&&(l=l.map(o.changes)),l&&o.selection&&!l.selectionInsideField(o.selection)&&(l=null),l},provide:l=>Si.decorations.from(l,o=>o?o.deco:Nn.none)});function LU(l,o){return Dt.create(l.filter(a=>a.field==o).map(a=>Dt.range(a.from,a.to)))}function wit(l){let o=NU.parse(l);return(a,c,u,h)=>{let{text:d,ranges:f}=o.instantiate(a.state,u),p={changes:{from:u,to:h,insert:xr.of(d)},scrollIntoView:!0};if(f.length&&(p.selection=LU(f,0)),f.length>1){let g=new t1(f,0),m=p.effects=[Sw.of(g)];void 0===a.state.field(ww,!1)&&m.push(Gi.appendConfig.of([ww,Oit,Dit,Ufe]))}a.dispatch(a.state.update(p))}}function Hfe(l){return({state:o,dispatch:a})=>{let c=o.field(ww,!1);if(!c||l<0&&0==c.active)return!1;let u=c.active+l,h=l>0&&!c.ranges.some(d=>d.field==u+l);return a(o.update({selection:LU(c.ranges,u),effects:Sw.of(h?null:new t1(c.ranges,u))})),!0}}const Tit=[{key:"Tab",run:Hfe(1),shift:Hfe(-1)},{key:"Escape",run:({state:l,dispatch:o})=>!!l.field(ww,!1)&&(o(l.update({effects:Sw.of(null)})),!0)}],$fe=Rn.define({combine:l=>l.length?l[0]:Tit}),Oit=d0.highest(SE.compute([$fe],l=>l.facet($fe)));function lh(l,o){return Object.assign(Object.assign({},o),{apply:wit(l)})}const Dit=Si.domEventHandlers({mousedown(l,o){let c,a=o.state.field(ww,!1);if(!a||null==(c=o.posAtCoords({x:l.clientX,y:l.clientY})))return!1;let u=a.ranges.find(h=>h.from<=c&&h.to>=c);return!(!u||u.field==a.active||(o.dispatch({selection:LU(a.ranges,u.field),effects:Sw.of(a.ranges.some(h=>h.field>u.field)?new t1(a.ranges,u.field):null)}),0))}}),Tw={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},x0=Gi.define({map(l,o){let a=o.mapPos(l,-1,ra.TrackAfter);return null==a?void 0:a}}),BU=Gi.define({map:(l,o)=>o.mapPos(l)}),VU=new class extends g0{};VU.startSide=1,VU.endSide=-1;const qfe=ao.define({create:()=>bs.empty,update(l,o){if(o.selection){let a=o.state.doc.lineAt(o.selection.main.head).from,c=o.startState.doc.lineAt(o.startState.selection.main.head).from;a!=o.changes.mapPos(c,-1)&&(l=bs.empty)}l=l.map(o.changes);for(let a of o.effects)a.is(x0)?l=l.update({add:[VU.range(a.value,a.value+1)]}):a.is(BU)&&(l=l.update({filter:c=>c!=a.value}));return l}}),zU="()[]{}<>";function Zfe(l){for(let o=0;o<zU.length;o+=2)if(zU.charCodeAt(o)==l)return zU.charAt(o+1);return Z6(l<128?l:l+1)}function Xfe(l,o){return l.languageDataAt("closeBrackets",o)[0]||Tw}const Ait="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Iit=Si.inputHandler.of((l,o,a,c)=>{if((Ait?l.composing:l.compositionStarted)||l.state.readOnly)return!1;let u=l.state.selection.main;if(c.length>2||2==c.length&&1==xc(ia(c,0))||o!=u.from||a!=u.to)return!1;let h=function Rit(l,o){let a=Xfe(l,l.selection.main.head),c=a.brackets||Tw.brackets;for(let u of c){let h=Zfe(ia(u,0));if(o==u)return h==u?Bit(l,u,c.indexOf(u+u+u)>-1,a):Nit(l,u,h,a.before||Tw.before);if(o==h&&Yfe(l,l.selection.main.from))return Lit(l,0,h)}return null}(l.state,c);return!!h&&(l.dispatch(h),!0)}),Pit=[{key:"Backspace",run:({state:l,dispatch:o})=>{if(l.readOnly)return!1;let c=Xfe(l,l.selection.main.head).brackets||Tw.brackets,u=null,h=l.changeByRange(d=>{if(d.empty){let f=function Fit(l,o){let a=l.sliceString(o-2,o);return xc(ia(a,0))==a.length?a:a.slice(1)}(l.doc,d.head);for(let p of c)if(p==f&&mA(l.doc,d.head)==Zfe(ia(p,0)))return{changes:{from:d.head-p.length,to:d.head+p.length},range:Dt.cursor(d.head-p.length)}}return{range:u=d}});return u||o(l.update(h,{scrollIntoView:!0,userEvent:"delete.backward"})),!u}}];function Yfe(l,o){let a=!1;return l.field(qfe).between(0,l.doc.length,c=>{c==o&&(a=!0)}),a}function mA(l,o){let a=l.sliceString(o,o+2);return a.slice(0,xc(ia(a,0)))}function Nit(l,o,a,c){let u=null,h=l.changeByRange(d=>{if(!d.empty)return{changes:[{insert:o,from:d.from},{insert:a,from:d.to}],effects:x0.of(d.to+o.length),range:Dt.range(d.anchor+o.length,d.head+o.length)};let f=mA(l.doc,d.head);return!f||/\s/.test(f)||c.indexOf(f)>-1?{changes:{insert:o+a,from:d.head},effects:x0.of(d.head+o.length),range:Dt.cursor(d.head+o.length)}:{range:u=d}});return u?null:l.update(h,{scrollIntoView:!0,userEvent:"input.type"})}function Lit(l,o,a){let c=null,u=l.selection.ranges.map(h=>h.empty&&mA(l.doc,h.head)==a?Dt.cursor(h.head+a.length):c=h);return c?null:l.update({selection:Dt.create(u,l.selection.mainIndex),scrollIntoView:!0,effects:l.selection.ranges.map(({from:h})=>BU.of(h))})}function Bit(l,o,a,c){let u=c.stringPrefixes||Tw.stringPrefixes,h=null,d=l.changeByRange(f=>{if(!f.empty)return{changes:[{insert:o,from:f.from},{insert:o,from:f.to}],effects:x0.of(f.to+o.length),range:Dt.range(f.anchor+o.length,f.head+o.length)};let m,p=f.head,g=mA(l.doc,p);if(g==o){if(Kfe(l,p))return{changes:{insert:o+o,from:p},effects:x0.of(p+o.length),range:Dt.cursor(p+o.length)};if(Yfe(l,p)){let v=a&&l.sliceDoc(p,p+3*o.length)==o+o+o;return{range:Dt.cursor(p+o.length*(v?3:1)),effects:BU.of(p)}}}else{if(a&&l.sliceDoc(p-2*o.length,p)==o+o&&(m=Jfe(l,p-2*o.length,u))>-1&&Kfe(l,m))return{changes:{insert:o+o+o+o,from:p},effects:x0.of(p+o.length),range:Dt.cursor(p+o.length)};if(l.charCategorizer(p)(g)!=hs.Word&&Jfe(l,p,u)>-1&&!function Vit(l,o,a,c){let u=qs(l).resolveInner(o,-1),h=c.reduce((d,f)=>Math.max(d,f.length),0);for(let d=0;d<5;d++){let f=l.sliceDoc(u.from,Math.min(u.to,u.from+a.length+h)),p=f.indexOf(a);if(!p||p>-1&&c.indexOf(f.slice(0,p))>-1){let m=u.firstChild;for(;m&&m.from==u.from&&m.to-m.from>a.length+p;){if(l.sliceDoc(m.to-a.length,m.to)==a)return!1;m=m.firstChild}return!0}let g=u.to==o&&u.parent;if(!g)break;u=g}return!1}(l,p,o,u))return{changes:{insert:o+o,from:p},effects:x0.of(p+o.length),range:Dt.cursor(p+o.length)}}return{range:h=f}});return h?null:l.update(d,{scrollIntoView:!0,userEvent:"input.type"})}function Kfe(l,o){let a=qs(l).resolveInner(o+1);return a.parent&&a.from==o}function Jfe(l,o,a){let c=l.charCategorizer(o);if(c(l.sliceDoc(o-1,o))!=hs.Word)return o;for(let u of a){let h=o-u.length;if(l.sliceDoc(h,o)==u&&c(l.sliceDoc(h-1,h))!=hs.Word)return h}return-1}function epe(l={}){return[Ma,fu.of(l),_it,zit,Ufe]}const tpe=[{key:"Ctrl-Space",run:l=>!!l.state.field(Ma,!1)&&(l.dispatch({effects:PU.of(!0)}),!0)},{key:"Escape",run:l=>{let o=l.state.field(Ma,!1);return!(!o||!o.active.some(a=>0!=a.state)||(l.dispatch({effects:pA.of(null)}),0))}},{key:"ArrowDown",run:gA(!0)},{key:"ArrowUp",run:gA(!1)},{key:"PageDown",run:gA(!0,"page")},{key:"PageUp",run:gA(!1,"page")},{key:"Enter",run:l=>{let o=l.state.field(Ma,!1);return!(l.state.readOnly||!o||!o.open||o.open.selected<0||Date.now()-o.open.timestamp<l.state.facet(fu).interactionDelay||(Rfe(l,o.open.options[o.open.selected]),0))}}],zit=d0.highest(SE.computeN([fu],l=>l.facet(fu).defaultKeymap?[tpe]:[]));class Uit{constructor(o,a,c){this.from=o,this.to=a,this.diagnostic=c}}class C0{constructor(o,a,c){this.diagnostics=o,this.panel=a,this.selected=c}static init(o,a,c){let u=o,h=c.facet(S0).markerFilter;h&&(u=h(u));let d=Nn.set(u.map(f=>f.from==f.to||f.from==f.to-1&&c.doc.lineAt(f.from).to==f.from?Nn.widget({widget:new jit(f),diagnostic:f}).range(f.from):Nn.mark({attributes:{class:"cm-lintRange cm-lintRange-"+f.severity},diagnostic:f}).range(f.from,f.to)),!0);return new C0(d,a,n1(d))}}function n1(l,o=null,a=0){let c=null;return l.between(a,1e9,(u,h,{spec:d})=>{if(!o||d.diagnostic==o)return c=new Uit(u,h,d.diagnostic),!1}),c}function ipe(l,o){return!(!l.effects.some(a=>a.is(vA))&&!l.changes.touchesRange(o.pos))}function rpe(l,o){return l.field(Bl,!1)?o:o.concat(Gi.appendConfig.of([Bl,Si.decorations.compute([Bl],a=>{let{selected:c,panel:u}=a.field(Bl);return c&&u&&c.from!=c.to?Nn.set([$it.range(c.from,c.to)]):Nn.none}),ZJe(Wit,{hideOn:ipe}),qit]))}const vA=Gi.define(),UU=Gi.define(),spe=Gi.define(),Bl=ao.define({create:()=>new C0(Nn.none,null,null),update(l,o){if(o.docChanged){let a=l.diagnostics.map(o.changes),c=null;if(l.selected){let u=o.changes.mapPos(l.selected.from,1);c=n1(a,l.selected.diagnostic,u)||n1(a,null,u)}l=new C0(a,l.panel,c)}for(let a of o.effects)a.is(vA)?l=C0.init(a.value,l.panel,o.state):a.is(UU)?l=new C0(l.diagnostics,a.value?yA.open:null,l.selected):a.is(spe)&&(l=new C0(l.diagnostics,l.panel,a.value));return l},provide:l=>[lw.from(l,o=>o.panel),Si.decorations.from(l,o=>o.diagnostics)]}),$it=Nn.mark({class:"cm-lintRange cm-lintRange-active"});function Wit(l,o,a){let{diagnostics:c}=l.state.field(Bl),u=[],h=2e8,d=0;c.between(o-(a<0?1:0),o+(a>0?1:0),(p,g,{spec:m})=>{o>=p&&o<=g&&(p==g||(o>p||a>0)&&(o<g||a<0))&&(u.push(m.diagnostic),h=Math.min(p,h),d=Math.max(g,d))});let f=l.state.facet(S0).tooltipFilter;return f&&(u=f(u)),u.length?{pos:h,end:d,above:l.state.doc.lineAt(h).to<d,create:()=>({dom:ope(l,u)})}:null}function ope(l,o){return Gr("ul",{class:"cm-tooltip-lint"},o.map(a=>upe(l,a,!1)))}const ape=l=>{let o=l.state.field(Bl,!1);return!(!o||!o.panel||(l.dispatch({effects:UU.of(!1)}),0))},Qit=[{key:"Mod-Shift-m",run:l=>{let o=l.state.field(Bl,!1);(!o||!o.panel)&&l.dispatch({effects:rpe(l.state,[UU.of(!0)])});let a=aw(l,yA.open);return a&&a.dom.querySelector(".cm-panel-lint ul").focus(),!0}},{key:"F8",run:l=>{let o=l.state.field(Bl,!1);if(!o)return!1;let a=l.state.selection.main,c=o.diagnostics.iter(a.to+1);return!(!c.value&&(c=o.diagnostics.iter(0),!c.value||c.from==a.from&&c.to==a.to)||(l.dispatch({selection:{anchor:c.from,head:c.to},scrollIntoView:!0}),0))}}],lpe=js.fromClass(class{constructor(l){this.view=l,this.timeout=-1,this.set=!0;let{delay:o}=l.state.facet(S0);this.lintTime=Date.now()+o,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,o)}run(){let l=Date.now();if(l<this.lintTime-10)setTimeout(this.run,this.lintTime-l);else{this.set=!1;let{state:o}=this.view,{sources:a}=o.facet(S0);Promise.all(a.map(c=>Promise.resolve(c(this.view)))).then(c=>{let u=c.reduce((h,d)=>h.concat(d));this.view.state.doc==o.doc&&this.view.dispatch(function Hit(l,o){return{effects:rpe(l,[vA.of(o)])}}(this.view.state,u))},c=>{Sc(this.view.state,c)})}}update(l){let o=l.state.facet(S0);(l.docChanged||o!=l.startState.facet(S0))&&(this.lintTime=Date.now()+o.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,o.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),S0=Rn.define({combine:l=>Object.assign({sources:l.map(o=>o.source)},ah(l.map(o=>o.config),{delay:750,markerFilter:null,tooltipFilter:null})),enables:lpe});function cpe(l){let o=[];if(l)e:for(let{name:a}of l){for(let c=0;c<a.length;c++){let u=a[c];if(/[a-zA-Z]/.test(u)&&!o.some(h=>h.toLowerCase()==u.toLowerCase())){o.push(u);continue e}}o.push("")}return o}function upe(l,o,a){var c;let u=a?cpe(o.actions):[];return Gr("li",{class:"cm-diagnostic cm-diagnostic-"+o.severity},Gr("span",{class:"cm-diagnosticText"},o.renderMessage?o.renderMessage():o.message),null===(c=o.actions)||void 0===c?void 0:c.map((h,d)=>{let f=v=>{v.preventDefault();let y=n1(l.state.field(Bl).diagnostics,o);y&&h.apply(l,y.from,y.to)},{name:p}=h,g=u[d]?p.indexOf(u[d]):-1,m=g<0?p:[p.slice(0,g),Gr("u",p.slice(g,g+1)),p.slice(g+1)];return Gr("button",{type:"button",class:"cm-diagnosticAction",onclick:f,onmousedown:f,"aria-label":` Action: ${p}${g<0?"":` (access key "${u[d]})"`}.`},m)}),o.source&&Gr("div",{class:"cm-diagnosticSource"},o.source))}class jit extends Af{constructor(o){super(),this.diagnostic=o}eq(o){return o.diagnostic==this.diagnostic}toDOM(){return Gr("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class hpe{constructor(o,a){this.diagnostic=a,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=upe(o,a,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class yA{constructor(o){this.view=o,this.items=[],this.list=Gr("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:u=>{if(27==u.keyCode)ape(this.view),this.view.focus();else if(38==u.keyCode||33==u.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==u.keyCode||34==u.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==u.keyCode)this.moveSelection(0);else if(35==u.keyCode)this.moveSelection(this.items.length-1);else if(13==u.keyCode)this.view.focus();else{if(!(u.keyCode>=65&&u.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:h}=this.items[this.selectedIndex],d=cpe(h.actions);for(let f=0;f<d.length;f++)if(d[f].toUpperCase().charCodeAt(0)==u.keyCode){let p=n1(this.view.state.field(Bl).diagnostics,h);p&&h.actions[f].apply(o,p.from,p.to)}}}u.preventDefault()},onclick:u=>{for(let h=0;h<this.items.length;h++)this.items[h].dom.contains(u.target)&&this.moveSelection(h)}}),this.dom=Gr("div",{class:"cm-panel-lint"},this.list,Gr("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ape(this.view)},"\xd7")),this.update()}get selectedIndex(){let o=this.view.state.field(Bl).selected;if(!o)return-1;for(let a=0;a<this.items.length;a++)if(this.items[a].diagnostic==o.diagnostic)return a;return-1}update(){let{diagnostics:o,selected:a}=this.view.state.field(Bl),c=0,u=!1,h=null;for(o.between(0,this.view.state.doc.length,(d,f,{spec:p})=>{let m,g=-1;for(let v=c;v<this.items.length;v++)if(this.items[v].diagnostic==p.diagnostic){g=v;break}g<0?(m=new hpe(this.view,p.diagnostic),this.items.splice(c,0,m),u=!0):(m=this.items[g],g>c&&(this.items.splice(c,g-c),u=!0)),a&&m.diagnostic==a.diagnostic?m.dom.hasAttribute("aria-selected")||(m.dom.setAttribute("aria-selected","true"),h=m):m.dom.hasAttribute("aria-selected")&&m.dom.removeAttribute("aria-selected"),c++});c<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)u=!0,this.items.pop();0==this.items.length&&(this.items.push(new hpe(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),u=!0),h?(this.list.setAttribute("aria-activedescendant",h.id),this.view.requestMeasure({key:this,read:()=>({sel:h.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:d,panel:f})=>{d.top<f.top?this.list.scrollTop-=f.top-d.top:d.bottom>f.bottom&&(this.list.scrollTop+=d.bottom-f.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),u&&this.sync()}sync(){let o=this.list.firstChild;function a(){let c=o;o=c.nextSibling,c.remove()}for(let c of this.items)if(c.dom.parentNode==this.list){for(;o!=c.dom;)a();o=c.dom.nextSibling}else this.list.insertBefore(c.dom,o);for(;o;)a()}moveSelection(o){if(this.selectedIndex<0)return;let c=n1(this.view.state.field(Bl).diagnostics,this.items[o].diagnostic);!c||this.view.dispatch({selection:{anchor:c.from,head:c.to},scrollIntoView:!0,effects:spe.of(c)})}static open(o){return new yA(o)}}function HU(l){return function _A(l,o='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${o}>${encodeURIComponent(l)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${l}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const qit=Si.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:HU("#d11")},".cm-lintRange-warning":{backgroundImage:HU("orange")},".cm-lintRange-info":{backgroundImage:HU("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),trt=(()=>[ret(),oet,TJe(),ktt(),Jet(),fJe(),[sw,yJe],ll.allowMultipleSelections.of(!0),ll.transactionFilter.of(l=>{if(!l.docChanged||!l.isUserEvent("input.type")&&!l.isUserEvent("input.complete"))return l;let o=l.startState.languageDataAt("indentOnInput",l.startState.selection.main.head);if(!o.length)return l;let a=l.newDoc,{head:c}=l.newSelection.main,u=a.lineAt(c);if(c>u.from+200)return l;let h=a.sliceString(u.from,c);if(!o.some(g=>g.test(h)))return l;let{state:d}=l,f=-1,p=[];for(let{head:g}of d.selection.ranges){let m=d.doc.lineAt(g);if(m.from==f)continue;f=m.from;let v=UE(d,m.from);if(null==v)continue;let y=/^\s*/.exec(m.text)[0],_=Z_(d,v);y!=_&&p.push({from:m.from,to:m.from+y.length,insert:_})}return p.length?[l,{changes:p,sequential:!0}]:l}),QE(_de,{fallback:!0}),ltt(),[Iit,qfe],epe(),BJe(),UJe(),PJe,Ent(),SE.of([...Pit,...Tnt,...Znt,...Ltt,...Xet,...tpe,...Qit])])();class xA{constructor(o,a,c,u,h,d,f,p,g,m=0,v){this.p=o,this.stack=a,this.state=c,this.reducePos=u,this.pos=h,this.score=d,this.buffer=f,this.bufferBase=p,this.curContext=g,this.lookAhead=m,this.parent=v}toString(){return`[${this.stack.filter((o,a)=>a%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(o,a,c=0){let u=o.parser.context;return new xA(o,[],a,c,c,0,[],0,u?new ppe(u,u.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(o,a){this.stack.push(this.state,a,this.bufferBase+this.buffer.length),this.state=o}reduce(o){let a=o>>19,c=65535&o,{parser:u}=this.p,h=u.dynamicPrecedence(c);if(h&&(this.score+=h),0==a)return this.pushState(u.getGoto(this.state,c,!0),this.reducePos),c<u.minRepeatTerm&&this.storeNode(c,this.reducePos,this.reducePos,4,!0),void this.reduceContext(c,this.reducePos);let d=this.stack.length-3*(a-1)-(262144&o?6:0),f=this.stack[d-2],g=this.bufferBase+this.buffer.length-this.stack[d-1];if(c<u.minRepeatTerm||131072&o){let m=u.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(c,f,m,g+4,!0)}for(this.state=262144&o?this.stack[d]:u.getGoto(this.stack[d-3],c,!0);this.stack.length>d;)this.stack.pop();this.reduceContext(c,f)}storeNode(o,a,c,u=4,h=!1){if(0==o&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let d=this,f=this.buffer.length;if(0==f&&d.parent&&(f=d.bufferBase-d.parent.bufferBase,d=d.parent),f>0&&0==d.buffer[f-4]&&d.buffer[f-1]>-1){if(a==c)return;if(d.buffer[f-2]>=a)return void(d.buffer[f-2]=c)}}if(h&&this.pos!=c){let d=this.buffer.length;if(d>0&&0!=this.buffer[d-4])for(;d>0&&this.buffer[d-2]>c;)this.buffer[d]=this.buffer[d-4],this.buffer[d+1]=this.buffer[d-3],this.buffer[d+2]=this.buffer[d-2],this.buffer[d+3]=this.buffer[d-1],d-=4,u>4&&(u-=4);this.buffer[d]=o,this.buffer[d+1]=a,this.buffer[d+2]=c,this.buffer[d+3]=u}else this.buffer.push(o,a,c,u)}shift(o,a,c){let u=this.pos;if(131072&o)this.pushState(65535&o,this.pos);else if(0==(262144&o)){let h=o,{parser:d}=this.p;(c>this.pos||a<=d.maxNode)&&(this.pos=c,d.stateFlag(h,1)||(this.reducePos=c)),this.pushState(h,u),this.shiftContext(a,u),a<=d.maxNode&&this.buffer.push(a,u,c,4)}else this.pos=c,this.shiftContext(a,u),a<=this.p.parser.maxNode&&this.buffer.push(a,u,c,4)}apply(o,a,c){65536&o?this.reduce(o):this.shift(o,a,c)}useNode(o,a){let c=this.p.reused.length-1;(c<0||this.p.reused[c]!=o)&&(this.p.reused.push(o),c++);let u=this.pos;this.reducePos=this.pos=u+o.length,this.pushState(a,u),this.buffer.push(c,u,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,o,this,this.p.stream.reset(this.pos-o.length)))}split(){let o=this,a=o.buffer.length;for(;a>0&&o.buffer[a-2]>o.reducePos;)a-=4;let c=o.buffer.slice(a),u=o.bufferBase+a;for(;o&&u==o.bufferBase;)o=o.parent;return new xA(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,c,u,this.curContext,this.lookAhead,o)}recoverByDelete(o,a){let c=o<=this.p.parser.maxNode;c&&this.storeNode(o,this.pos,a,4),this.storeNode(0,this.pos,a,c?8:4),this.pos=this.reducePos=a,this.score-=190}canShift(o){for(let a=new nrt(this);;){let c=this.p.parser.stateSlot(a.state,4)||this.p.parser.hasAction(a.state,o);if(0==(65536&c))return!0;if(0==c)return!1;a.reduce(c)}}recoverByInsert(o){if(this.stack.length>=300)return[];let a=this.p.parser.nextStates(this.state);if(a.length>8||this.stack.length>=120){let u=[];for(let d,h=0;h<a.length;h+=2)(d=a[h+1])!=this.state&&this.p.parser.hasAction(d,o)&&u.push(a[h],d);if(this.stack.length<120)for(let h=0;u.length<8&&h<a.length;h+=2){let d=a[h+1];u.some((f,p)=>1&p&&f==d)||u.push(a[h],d)}a=u}let c=[];for(let u=0;u<a.length&&c.length<4;u+=2){let h=a[u+1];if(h==this.state)continue;let d=this.split();d.pushState(h,this.pos),d.storeNode(0,d.pos,d.pos,4,!0),d.shiftContext(a[u],this.pos),d.score-=200,c.push(d)}return c}forceReduce(){let o=this.p.parser.stateSlot(this.state,5);if(0==(65536&o))return!1;let{parser:a}=this.p;if(!a.validAction(this.state,o)){let u=65535&o,h=this.stack.length-3*(o>>19);if(h<0||a.getGoto(this.stack[h],u,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(o),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:o}=this.p;return 65535==o.data[o.stateSlot(this.state,1)]&&!o.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(o){if(this.state!=o.state||this.stack.length!=o.stack.length)return!1;for(let a=0;a<this.stack.length;a+=3)if(this.stack[a]!=o.stack[a])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(o){return this.p.parser.dialect.flags[o]}shiftContext(o,a){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,o,this,this.p.stream.reset(a)))}reduceContext(o,a){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,o,this,this.p.stream.reset(a)))}emitContext(){let o=this.buffer.length-1;(o<0||-3!=this.buffer[o])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let o=this.buffer.length-1;(o<0||-4!=this.buffer[o])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(o){if(o!=this.curContext.context){let a=new ppe(this.curContext.tracker,o);a.hash!=this.curContext.hash&&this.emitContext(),this.curContext=a}}setLookAhead(o){o>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=o)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class ppe{constructor(o,a){this.tracker=o,this.context=a,this.hash=o.strict?o.hash(a):0}}class nrt{constructor(o){this.start=o,this.state=o.state,this.stack=o.stack,this.base=this.stack.length}reduce(o){let a=65535&o,c=o>>19;0==c?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(c-1);let u=this.start.p.parser.getGoto(this.stack[this.base-3],a,!0);this.state=u}}class CA{constructor(o,a,c){this.stack=o,this.pos=a,this.index=c,this.buffer=o.buffer,0==this.index&&this.maybeNext()}static create(o,a=o.bufferBase+o.buffer.length){return new CA(o,a,a-o.bufferBase)}maybeNext(){let o=this.stack.parent;null!=o&&(this.index=this.stack.bufferBase-o.bufferBase,this.stack=o,this.buffer=o.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new CA(this.stack,this.pos,this.index)}}class SA{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const gpe=new SA;class irt{constructor(o,a){this.input=o,this.ranges=a,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=gpe,this.rangeIndex=0,this.pos=this.chunkPos=a[0].from,this.range=a[0],this.end=a[a.length-1].to,this.readNext()}resolveOffset(o,a){let c=this.range,u=this.rangeIndex,h=this.pos+o;for(;h<c.from;){if(!u)return null;let d=this.ranges[--u];h-=c.from-d.to,c=d}for(;a<0?h>c.to:h>=c.to;){if(u==this.ranges.length-1)return null;let d=this.ranges[++u];h+=d.from-c.to,c=d}return h}clipPos(o){if(o>=this.range.from&&o<this.range.to)return o;for(let a of this.ranges)if(a.to>o)return Math.max(o,a.from);return this.end}peek(o){let c,u,a=this.chunkOff+o;if(a>=0&&a<this.chunk.length)c=this.pos+o,u=this.chunk.charCodeAt(a);else{let h=this.resolveOffset(o,1);if(null==h)return-1;if(c=h,c>=this.chunk2Pos&&c<this.chunk2Pos+this.chunk2.length)u=this.chunk2.charCodeAt(c-this.chunk2Pos);else{let d=this.rangeIndex,f=this.range;for(;f.to<=c;)f=this.ranges[++d];this.chunk2=this.input.chunk(this.chunk2Pos=c),c+this.chunk2.length>f.to&&(this.chunk2=this.chunk2.slice(0,f.to-c)),u=this.chunk2.charCodeAt(0)}}return c>=this.token.lookAhead&&(this.token.lookAhead=c+1),u}acceptToken(o,a=0){let c=a?this.resolveOffset(a,-1):this.pos;if(null==c||c<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=o,this.token.end=c}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:o,chunkPos:a}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=o,this.chunk2Pos=a,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let o=this.input.chunk(this.pos);this.chunk=this.pos+o.length>this.range.to?o.slice(0,this.range.to-this.pos):o,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.next=this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?-1:this.chunk.charCodeAt(this.chunkOff)}advance(o=1){for(this.chunkOff+=o;this.pos+o>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();o-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=o,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(o,a){if(a?(this.token=a,a.start=o,a.lookAhead=o+1,a.value=a.extended=-1):this.token=gpe,this.pos!=o){if(this.pos=o,o==this.end)return this.setDone(),this;for(;o<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;o>=this.range.to;)this.range=this.ranges[++this.rangeIndex];o>=this.chunkPos&&o<this.chunkPos+this.chunk.length?this.chunkOff=o-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(o,a){if(o>=this.chunkPos&&a<=this.chunkPos+this.chunk.length)return this.chunk.slice(o-this.chunkPos,a-this.chunkPos);if(o>=this.chunk2Pos&&a<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(o-this.chunk2Pos,a-this.chunk2Pos);if(o>=this.range.from&&a<=this.range.to)return this.input.read(o,a);let c="";for(let u of this.ranges){if(u.from>=a)break;u.to>o&&(c+=this.input.read(Math.max(u.from,o),Math.min(u.to,a)))}return c}}class wA{constructor(o,a){this.data=o,this.id=a}token(o,a){!function rrt(l,o,a,c){let u=0,h=1<<c,{parser:d}=a.p,{dialect:f}=d;e:for(;0!=(h&l[u]);){let p=l[u+1];for(let y=u+3;y<p;y+=2)if((l[y+1]&h)>0){let _=l[y];if(f.allows(_)&&(-1==o.token.value||o.token.value==_||d.overrides(_,o.token.value))){o.acceptToken(_);break}}let g=o.next,m=0,v=l[u+2];if(!(o.next<0&&v>m&&65535==l[p+3*v-3])){for(;m<v;){let y=m+v>>1,_=p+y+(y<<1),C=l[_+1];if(g<l[_])v=y;else{if(!(g>=C)){u=l[_+2],o.advance();continue e}m=y+1}}break}u=l[p+3*v-1]}}(this.data,o,a,this.id)}}wA.prototype.contextual=wA.prototype.fallback=wA.prototype.extend=!1;class Ow{constructor(o,a={}){this.token=o,this.contextual=!!a.contextual,this.fallback=!!a.fallback,this.extend=!!a.extend}}function TA(l,o=Uint16Array){if("string"!=typeof l)return l;let a=null;for(let c=0,u=0;c<l.length;){let h=0;for(;;){let d=l.charCodeAt(c++),f=!1;if(126==d){h=65535;break}d>=92&&d--,d>=34&&d--;let p=d-32;if(p>=46&&(p-=46,f=!0),h+=p,f)break;h*=46}a?a[u++]=h:a=new o(h)}return a}const ch="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let WU=null;function mpe(l,o,a){let c=l.cursor(Kr.IncludeAnonymous);for(c.moveTo(o);;)if(!(a<0?c.childBefore(o):c.childAfter(o)))for(;;){if((a<0?c.to<o:c.from>o)&&!c.type.isError)return a<0?Math.max(0,Math.min(c.to-1,o-25)):Math.min(l.length,Math.max(c.from+1,o+25));if(a<0?c.prevSibling():c.nextSibling())break;if(!c.parent())return a<0?0:l.length}}class srt{constructor(o,a){this.fragments=o,this.nodeSet=a,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let o=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(o){for(this.safeFrom=o.openStart?mpe(o.tree,o.from+o.offset,1)-o.offset:o.from,this.safeTo=o.openEnd?mpe(o.tree,o.to+o.offset,-1)-o.offset:o.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(o.tree),this.start.push(-o.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(o){if(o<this.nextStart)return null;for(;this.fragment&&this.safeTo<=o;)this.nextFragment();if(!this.fragment)return null;for(;;){let a=this.trees.length-1;if(a<0)return this.nextFragment(),null;let c=this.trees[a],u=this.index[a];if(u==c.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let h=c.children[u],d=this.start[a]+c.positions[u];if(d>o)return this.nextStart=d,null;if(h instanceof Ss){if(d==o){if(d<this.safeFrom)return null;let f=d+h.length;if(f<=this.safeTo){let p=h.prop(Qi.lookAhead);if(!p||f+p<this.fragment.to)return h}}this.index[a]++,d+h.length>=Math.max(this.safeFrom,o)&&(this.trees.push(h),this.start.push(d),this.index.push(0))}else this.index[a]++,this.nextStart=d+h.length}}}class ort{constructor(o,a){this.stream=a,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=o.tokenizers.map(c=>new SA)}getActions(o){let a=0,c=null,{parser:u}=o.p,{tokenizers:h}=u,d=u.stateSlot(o.state,3),f=o.curContext?o.curContext.hash:0,p=0;for(let g=0;g<h.length;g++){if(0==(1<<g&d))continue;let m=h[g],v=this.tokens[g];if((!c||m.fallback)&&((m.contextual||v.start!=o.pos||v.mask!=d||v.context!=f)&&(this.updateCachedToken(v,m,o),v.mask=d,v.context=f),v.lookAhead>v.end+25&&(p=Math.max(v.lookAhead,p)),0!=v.value)){let y=a;if(v.extended>-1&&(a=this.addActions(o,v.extended,v.end,a)),a=this.addActions(o,v.value,v.end,a),!m.extend&&(c=v,a>y))break}}for(;this.actions.length>a;)this.actions.pop();return p&&o.setLookAhead(p),!c&&o.pos==this.stream.end&&(c=new SA,c.value=o.p.parser.eofTerm,c.start=c.end=o.pos,a=this.addActions(o,c.value,c.end,a)),this.mainToken=c,this.actions}getMainToken(o){if(this.mainToken)return this.mainToken;let a=new SA,{pos:c,p:u}=o;return a.start=c,a.end=Math.min(c+1,u.stream.end),a.value=c==u.stream.end?u.parser.eofTerm:0,a}updateCachedToken(o,a,c){let u=this.stream.clipPos(c.pos);if(a.token(this.stream.reset(u,o),c),o.value>-1){let{parser:h}=c.p;for(let d=0;d<h.specialized.length;d++)if(h.specialized[d]==o.value){let f=h.specializers[d](this.stream.read(o.start,o.end),c);if(f>=0&&c.p.parser.dialect.allows(f>>1)){0==(1&f)?o.value=f>>1:o.extended=f>>1;break}}}else o.value=0,o.end=this.stream.clipPos(u+1)}putAction(o,a,c,u){for(let h=0;h<u;h+=3)if(this.actions[h]==o)return u;return this.actions[u++]=o,this.actions[u++]=a,this.actions[u++]=c,u}addActions(o,a,c,u){let{state:h}=o,{parser:d}=o.p,{data:f}=d;for(let p=0;p<2;p++)for(let g=d.stateSlot(h,p?2:1);;g+=3){if(65535==f[g]){if(1!=f[g+1]){0==u&&2==f[g+1]&&(u=this.putAction(Pf(f,g+2),a,c,u));break}g=Pf(f,g+2)}f[g]==a&&(u=this.putAction(Pf(f,g+1),a,c,u))}return u}}class art{constructor(o,a,c,u){this.parser=o,this.input=a,this.ranges=u,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new irt(a,u),this.tokens=new ort(o,this.stream),this.topTerm=o.top[1];let{from:h}=u[0];this.stacks=[xA.start(this,o.top[0],h)],this.fragments=c.length&&this.stream.end-h>4*o.bufferLength?new srt(c,o.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let u,h,o=this.stacks,a=this.minStackPos,c=this.stacks=[];for(let d=0;d<o.length;d++){let f=o[d];for(;;){if(this.tokens.mainToken=null,f.pos>a)c.push(f);else{if(this.advanceStack(f,c,o))continue;{u||(u=[],h=[]),u.push(f);let p=this.tokens.getMainToken(f);h.push(p.value,p.end)}}break}}if(!c.length){let d=u&&function urt(l){let o=null;for(let a of l){let c=a.p.stoppedAt;(a.pos==a.p.stream.end||null!=c&&a.pos>c)&&a.p.parser.stateFlag(a.state,2)&&(!o||o.score<a.score)&&(o=a)}return o}(u);if(d)return this.stackToTree(d);if(this.parser.strict)throw ch&&u&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+a);this.recovering||(this.recovering=5)}if(this.recovering&&u){let d=null!=this.stoppedAt&&u[0].pos>this.stoppedAt?u[0]:this.runRecovery(u,h,c);if(d)return this.stackToTree(d.forceAll())}if(this.recovering){let d=1==this.recovering?1:3*this.recovering;if(c.length>d)for(c.sort((f,p)=>p.score-f.score);c.length>d;)c.pop();c.some(f=>f.reducePos>a)&&this.recovering--}else if(c.length>1)e:for(let d=0;d<c.length-1;d++){let f=c[d];for(let p=d+1;p<c.length;p++){let g=c[p];if(f.sameState(g)||f.buffer.length>500&&g.buffer.length>500){if(!((f.score-g.score||f.buffer.length-g.buffer.length)>0)){c.splice(d--,1);continue e}c.splice(p--,1)}}}this.minStackPos=c[0].pos;for(let d=1;d<c.length;d++)c[d].pos<this.minStackPos&&(this.minStackPos=c[d].pos);return null}stopAt(o){if(null!=this.stoppedAt&&this.stoppedAt<o)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=o}advanceStack(o,a,c){let u=o.pos,{parser:h}=this,d=ch?this.stackID(o)+" -> ":"";if(null!=this.stoppedAt&&u>this.stoppedAt)return o.forceReduce()?o:null;if(this.fragments){let g=o.curContext&&o.curContext.tracker.strict,m=g?o.curContext.hash:0;for(let v=this.fragments.nodeAt(u);v;){let y=this.parser.nodeSet.types[v.type.id]==v.type?h.getGoto(o.state,v.type.id):-1;if(y>-1&&v.length&&(!g||(v.prop(Qi.contextHash)||0)==m))return o.useNode(v,y),ch&&console.log(d+this.stackID(o)+` (via reuse of ${h.getName(v.type.id)})`),!0;if(!(v instanceof Ss)||0==v.children.length||v.positions[0]>0)break;let _=v.children[0];if(!(_ instanceof Ss&&0==v.positions[0]))break;v=_}}let f=h.stateSlot(o.state,4);if(f>0)return o.reduce(f),ch&&console.log(d+this.stackID(o)+` (via always-reduce ${h.getName(65535&f)})`),!0;if(o.stack.length>=15e3)for(;o.stack.length>9e3&&o.forceReduce(););let p=this.tokens.getActions(o);for(let g=0;g<p.length;){let m=p[g++],v=p[g++],y=p[g++],_=g==p.length||!c,b=_?o:o.split();if(b.apply(m,v,y),ch&&console.log(d+this.stackID(b)+` (via ${0==(65536&m)?"shift":`reduce of ${h.getName(65535&m)}`} for ${h.getName(v)} @ ${u}${b==o?"":", split"})`),_)return!0;b.pos>u?a.push(b):c.push(b)}return!1}advanceFully(o,a){let c=o.pos;for(;;){if(!this.advanceStack(o,null,null))return!1;if(o.pos>c)return vpe(o,a),!0}}runRecovery(o,a,c){let u=null,h=!1;for(let d=0;d<o.length;d++){let f=o[d],p=a[d<<1],g=a[1+(d<<1)],m=ch?this.stackID(f)+" -> ":"";if(f.deadEnd&&(h||(h=!0,f.restart(),ch&&console.log(m+this.stackID(f)+" (restarted)"),this.advanceFully(f,c))))continue;let v=f.split(),y=m;for(let _=0;v.forceReduce()&&_<10&&(ch&&console.log(y+this.stackID(v)+" (via force-reduce)"),!this.advanceFully(v,c));_++)ch&&(y=this.stackID(v)+" -> ");for(let _ of f.recoverByInsert(p))ch&&console.log(m+this.stackID(_)+" (via recover-insert)"),this.advanceFully(_,c);this.stream.end>f.pos?(g==f.pos&&(g++,p=0),f.recoverByDelete(p,g),ch&&console.log(m+this.stackID(f)+` (via recover-delete ${this.parser.getName(p)})`),vpe(f,c)):(!u||u.score<f.score)&&(u=f)}return u}stackToTree(o){return o.close(),Ss.build({buffer:CA.create(o),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:o.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(o){let a=(WU||(WU=new WeakMap)).get(o);return a||WU.set(o,a=String.fromCodePoint(this.nextStackID++)),a+o}}function vpe(l,o){for(let a=0;a<o.length;a++){let c=o[a];if(c.pos==l.pos&&c.sameState(l))return void(o[a].score<l.score&&(o[a]=l))}o.push(l)}class lrt{constructor(o,a,c){this.source=o,this.flags=a,this.disabled=c}allows(o){return!this.disabled||0==this.disabled[o]}}const GU=l=>l;class OA extends Hhe{constructor(o){if(super(),this.wrappers=[],14!=o.version)throw new RangeError(`Parser version (${o.version}) doesn't match runtime version (14)`);let a=o.nodeNames.split(" ");this.minRepeatTerm=a.length;for(let f=0;f<o.repeatNodeCount;f++)a.push("");let c=Object.keys(o.topRules).map(f=>o.topRules[f][1]),u=[];for(let f=0;f<a.length;f++)u.push([]);function h(f,p,g){u[f].push([p,p.deserialize(String(g))])}if(o.nodeProps)for(let f of o.nodeProps){let p=f[0];"string"==typeof p&&(p=Qi[p]);for(let g=1;g<f.length;){let m=f[g++];if(m>=0)h(m,p,f[g++]);else{let v=f[g+-m];for(let y=-m;y>0;y--)h(f[g++],p,v);g++}}}this.nodeSet=new ME(a.map((f,p)=>hl.define({name:p>=this.minRepeatTerm?void 0:f,id:p,props:u[p],top:c.indexOf(p)>-1,error:0==p,skipped:o.skippedNodes&&o.skippedNodes.indexOf(p)>-1}))),o.propSources&&(this.nodeSet=this.nodeSet.extend(...o.propSources)),this.strict=!1,this.bufferLength=Lhe;let d=TA(o.tokenData);this.context=o.context,this.specializerSpecs=o.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let f=0;f<this.specializerSpecs.length;f++)this.specialized[f]=this.specializerSpecs[f].term;this.specializers=this.specializerSpecs.map(_pe),this.states=TA(o.states,Uint32Array),this.data=TA(o.stateData),this.goto=TA(o.goto),this.maxTerm=o.maxTerm,this.tokenizers=o.tokenizers.map(f=>"number"==typeof f?new wA(d,f):f),this.topRules=o.topRules,this.dialects=o.dialects||{},this.dynamicPrecedences=o.dynamicPrecedences||null,this.tokenPrecTable=o.tokenPrec,this.termNames=o.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(o,a,c){let u=new art(this,o,a,c);for(let h of this.wrappers)u=h(u,o,a,c);return u}getGoto(o,a,c=!1){let u=this.goto;if(a>=u[0])return-1;for(let h=u[a+1];;){let d=u[h++],f=1&d,p=u[h++];if(f&&c)return p;for(let g=h+(d>>1);h<g;h++)if(u[h]==o)return p;if(f)return-1}}hasAction(o,a){let c=this.data;for(let u=0;u<2;u++)for(let d,h=this.stateSlot(o,u?2:1);;h+=3){if(65535==(d=c[h])){if(1!=c[h+1]){if(2==c[h+1])return Pf(c,h+2);break}d=c[h=Pf(c,h+2)]}if(d==a||0==d)return Pf(c,h+1)}return 0}stateSlot(o,a){return this.states[6*o+a]}stateFlag(o,a){return(this.stateSlot(o,0)&a)>0}validAction(o,a){if(a==this.stateSlot(o,4))return!0;for(let c=this.stateSlot(o,1);;c+=3){if(65535==this.data[c]){if(1!=this.data[c+1])return!1;c=Pf(this.data,c+2)}if(a==Pf(this.data,c+1))return!0}}nextStates(o){let a=[];for(let c=this.stateSlot(o,1);;c+=3){if(65535==this.data[c]){if(1!=this.data[c+1])break;c=Pf(this.data,c+2)}if(0==(1&this.data[c+2])){let u=this.data[c+1];a.some((h,d)=>1&d&&h==u)||a.push(this.data[c],u)}}return a}overrides(o,a){let c=ype(this.data,this.tokenPrecTable,a);return c<0||ype(this.data,this.tokenPrecTable,o)<c}configure(o){let a=Object.assign(Object.create(OA.prototype),this);if(o.props&&(a.nodeSet=this.nodeSet.extend(...o.props)),o.top){let c=this.topRules[o.top];if(!c)throw new RangeError(`Invalid top rule name ${o.top}`);a.top=c}return o.tokenizers&&(a.tokenizers=this.tokenizers.map(c=>{let u=o.tokenizers.find(h=>h.from==c);return u?u.to:c})),o.specializers&&(a.specializers=this.specializers.slice(),a.specializerSpecs=this.specializerSpecs.map((c,u)=>{let h=o.specializers.find(f=>f.from==c.external);if(!h)return c;let d=Object.assign(Object.assign({},c),{external:h.to});return a.specializers[u]=_pe(d),d})),o.contextTracker&&(a.context=o.contextTracker),o.dialect&&(a.dialect=this.parseDialect(o.dialect)),null!=o.strict&&(a.strict=o.strict),o.wrap&&(a.wrappers=a.wrappers.concat(o.wrap)),null!=o.bufferLength&&(a.bufferLength=o.bufferLength),a}hasWrappers(){return this.wrappers.length>0}getName(o){return this.termNames?this.termNames[o]:String(o<=this.maxNode&&this.nodeSet.types[o].name||o)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(o){let a=this.dynamicPrecedences;return null==a?0:a[o]||0}parseDialect(o){let a=Object.keys(this.dialects),c=a.map(()=>!1);if(o)for(let h of o.split(" ")){let d=a.indexOf(h);d>=0&&(c[d]=!0)}let u=null;for(let h=0;h<a.length;h++)if(!c[h])for(let f,d=this.dialects[a[h]];65535!=(f=this.data[d++]);)(u||(u=new Uint8Array(this.maxTerm+1)))[f]=1;return new lrt(o,c,u)}static deserialize(o){return new OA(o)}}function Pf(l,o){return l[o]|l[o+1]<<16}function ype(l,o,a){for(let u,c=o;65535!=(u=l[c]);c++)if(u==a)return c-o;return-1}function _pe(l){if(l.external){let o=l.extend?1:0;return(a,c)=>l.external(a,c)<<1|o}return l.get}const brt=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],Mrt=new class crt{constructor(o){this.start=o.start,this.shift=o.shift||GU,this.reduce=o.reduce||GU,this.reuse=o.reuse||GU,this.hash=o.hash||(()=>0),this.strict=!1!==o.strict}}({start:!1,shift:(l,o)=>5==o||6==o||286==o?l:287==o,strict:!1}),Ert=new Ow((l,o)=>{let{next:a}=l;(125==a||-1==a||o.context)&&o.canShift(284)&&l.acceptToken(284)},{contextual:!0,fallback:!0}),Art=new Ow((l,o)=>{let c,{next:a}=l;brt.indexOf(a)>-1||47==a&&(47==(c=l.peek(1))||42==c)||125!=a&&59!=a&&-1!=a&&!o.context&&o.canShift(281)&&l.acceptToken(281)},{contextual:!0}),Irt=new Ow((l,o)=>{let{next:a}=l;if((43==a||45==a)&&(l.advance(),a==l.next)){l.advance();let c=!o.context&&o.canShift(2);l.acceptToken(c?2:3)}},{contextual:!0}),Prt=new Ow(l=>{for(let o=!1,a=0;;a++){let{next:c}=l;if(c<0){a&&l.acceptToken(282);break}if(96==c){a?l.acceptToken(282):l.acceptToken(283,1);break}if(123==c&&o){1==a?l.acceptToken(4,1):l.acceptToken(282,-1);break}if(10==c&&a){l.advance(),l.acceptToken(282);break}92==c&&l.advance(),o=36==c,l.advance()}}),Rrt=new Ow((l,o)=>{if(101==l.next&&o.dialectEnabled(1)){l.advance();for(let a=0;a<6;a++){if(l.next!="xtends".charCodeAt(a))return;l.advance()}l.next>=57&&l.next<=65||l.next>=48&&l.next<=90||95==l.next||l.next>=97&&l.next<=122||l.next>160||l.acceptToken(1)}}),Frt=Zhe({"get set async static":Be.modifier,"for while do if else switch try catch finally return throw break continue default case":Be.controlKeyword,"in of await yield void typeof delete instanceof":Be.operatorKeyword,"let var const function class extends":Be.definitionKeyword,"import export from":Be.moduleKeyword,"with debugger as new":Be.keyword,TemplateString:Be.special(Be.string),super:Be.atom,BooleanLiteral:Be.bool,this:Be.self,null:Be.null,Star:Be.modifier,VariableName:Be.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Be.function(Be.variableName),VariableDefinition:Be.definition(Be.variableName),Label:Be.labelName,PropertyName:Be.propertyName,PrivatePropertyName:Be.special(Be.propertyName),"CallExpression/MemberExpression/PropertyName":Be.function(Be.propertyName),"FunctionDeclaration/VariableDefinition":Be.function(Be.definition(Be.variableName)),"ClassDeclaration/VariableDefinition":Be.definition(Be.className),PropertyDefinition:Be.definition(Be.propertyName),PrivatePropertyDefinition:Be.definition(Be.special(Be.propertyName)),UpdateOp:Be.updateOperator,LineComment:Be.lineComment,BlockComment:Be.blockComment,Number:Be.number,String:Be.string,ArithOp:Be.arithmeticOperator,LogicOp:Be.logicOperator,BitOp:Be.bitwiseOperator,CompareOp:Be.compareOperator,RegExp:Be.regexp,Equals:Be.definitionOperator,Arrow:Be.function(Be.punctuation),": Spread":Be.punctuation,"( )":Be.paren,"[ ]":Be.squareBracket,"{ }":Be.brace,"InterpolationStart InterpolationEnd":Be.special(Be.brace),".":Be.derefOperator,", ;":Be.separator,TypeName:Be.typeName,TypeDefinition:Be.definition(Be.typeName),"type enum interface implements namespace module declare":Be.definitionKeyword,"abstract global Privacy readonly override":Be.modifier,"is keyof unique infer":Be.operatorKeyword,JSXAttributeValue:Be.attributeValue,JSXText:Be.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Be.angleBracket,"JSXIdentifier JSXNameSpacedName":Be.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Be.attributeName}),Nrt={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},Lrt={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},Brt={__proto__:null,"<":129},Vrt=OA.deserialize({version:14,states:"$8SO`QdOOO'QQ(C|O'#ChO'XOWO'#DVO)dQdO'#D]O)tQdO'#DhO){QdO'#DrO-xQdO'#DxOOQO'#E]'#E]O.]Q`O'#E[O.bQ`O'#E[OOQ(C['#Ef'#EfO0aQ(C|O'#ItO2wQ(C|O'#IuO3eQ`O'#EzO3jQ!bO'#FaOOQ(C['#FS'#FSO3rO#tO'#FSO4QQ&jO'#FhO5bQ`O'#FgOOQ(C['#Iu'#IuOOQ(CW'#It'#ItOOQS'#J^'#J^O5gQ`O'#HpO5lQ(ChO'#HqOOQS'#Ih'#IhOOQS'#Hr'#HrQ`QdOOO){QdO'#DjO5tQ`O'#G[O5yQ&jO'#CmO6XQ`O'#EZO6dQ`O'#EgO6iQ,UO'#FRO7TQ`O'#G[O7YQ`O'#G`O7eQ`O'#G`O7sQ`O'#GcO7sQ`O'#GdO7sQ`O'#GfO5tQ`O'#GiO8dQ`O'#GlO9rQ`O'#CdO:SQ`O'#GyO:[Q`O'#HPO:[Q`O'#HRO`QdO'#HTO:[Q`O'#HVO:[Q`O'#HYO:aQ`O'#H`O:fQ(CjO'#HfO){QdO'#HhO:qQ(CjO'#HjO:|Q(CjO'#HlO5lQ(ChO'#HnO){QdO'#DWOOOW'#Ht'#HtO;XOWO,59qOOQ(C[,59q,59qO=jQtO'#ChO=tQdO'#HuO>XQ`O'#IvO@WQtO'#IvO'dQdO'#IvO@_Q`O,59wO@uQ7[O'#DbOAnQ`O'#E]OA{Q`O'#JROBWQ`O'#JQOBWQ`O'#JQOB`Q`O,5:yOBeQ`O'#JPOBlQaO'#DyO5yQ&jO'#EZOBzQ`O'#EZOCVQpO'#FROOQ(C[,5:S,5:SOC_QdO,5:SOE]Q(C|O,5:^OEyQ`O,5:dOFdQ(ChO'#JOO7YQ`O'#I}OFkQ`O'#I}OFsQ`O,5:xOFxQ`O'#I}OGWQdO,5:vOIWQ&jO'#EWOJeQ`O,5:vOKwQ&jO'#DlOLOQdO'#DqOLYQ7[O,5;PO){QdO,5;POOQS'#Er'#ErOOQS'#Et'#EtO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;ROOQS'#Ex'#ExOLbQdO,5;cOOQ(C[,5;h,5;hOOQ(C[,5;i,5;iONbQ`O,5;iOOQ(C[,5;j,5;jO){QdO'#IPONgQ(ChO,5<TO! RQ&jO,5;RO){QdO,5;fO! kQ!bO'#JVO! YQ!bO'#JVO! rQ!bO'#JVO!!TQ!bO,5;qOOOO,5;{,5;{O!!cQdO'#FcOOOO'#IO'#IOO3rO#tO,5;nO!!jQ!bO'#FeOOQ(C[,5;n,5;nO!#WQ,VO'#CrOOQ(C]'#Cu'#CuO!#kQ`O'#CuO!#pOWO'#CyO!$^Q,VO,5<QO!$eQ`O,5<SO!%tQ&jO'#FrO!&RQ`O'#FsO!&WQ`O'#FsO!&]Q&jO'#FwO!'[Q7[O'#F{O!'}Q,VO'#IqOOQ(C]'#Iq'#IqO!(XQaO'#IpO!(gQ`O'#IoO!(oQ`O'#CqOOQ(C]'#Cs'#CsOOQ(C]'#C|'#C|O!(wQ`O'#DOOJjQ&jO'#FjOJjQ&jO'#FlO!(|Q`O'#FnO!)RQ`O'#FoO!&WQ`O'#FuOJjQ&jO'#FzO!)WQ`O'#E^O!)oQ`O,5<RO`QdO,5>[OOQS'#Ik'#IkOOQS,5>],5>]OOQS-E;p-E;pO!+kQ(C|O,5:UOOQ(CX'#Cp'#CpO!,[Q&kO,5<vOOQO'#Cf'#CfO!,mQ(ChO'#IlO5bQ`O'#IlO:aQ`O,59XO!-OQ!bO,59XO!-WQ&jO,59XO5yQ&jO,59XO!-cQ`O,5:vO!-kQ`O'#GxO!-yQ`O'#JbO){QdO,5;kO!.RQ7[O,5;mO!.WQ`O,5=cO!.]Q`O,5=cO!.bQ`O,5=cO5lQ(ChO,5=cO5tQ`O,5<vO!.pQ`O'#E_O!/UQ7[O'#E`OOQ(CW'#JP'#JPO!/gQ(ChO'#J_O5lQ(ChO,5<zO7sQ`O,5=QOOQP'#Cr'#CrO!/rQ!bO,5<}O!/zQ!cO,5=OO!0VQ`O,5=QO!0[QpO,5=TO:aQ`O'#GnO5tQ`O'#GpO!0dQ`O'#GpO5yQ&jO'#GsO!0iQ`O'#GsOOQS,5=W,5=WO!0nQ`O'#GtO!0vQ`O'#CmO!0{Q`O,59OO!1VQ`O,59OO!3XQdO,59OOOQS,59O,59OO!3fQ(ChO,59OO){QdO,59OO!3qQdO'#G{OOQS'#G|'#G|OOQS'#G}'#G}O`QdO,5=eO!4RQ`O,5=eO){QdO'#DxO`QdO,5=kO`QdO,5=mO!4WQ`O,5=oO`QdO,5=qO!4]Q`O,5=tO!4bQdO,5=zOOQS,5>Q,5>QO){QdO,5>QO5lQ(ChO,5>SOOQS,5>U,5>UO!8cQ`O,5>UOOQS,5>W,5>WO!8cQ`O,5>WOOQS,5>Y,5>YO!8hQpO,59rOOOW-E;r-E;rOOQ(C[1G/]1G/]O!8mQtO,5>aO'dQdO,5>aOOQO,5>f,5>fO!8wQdO'#HuOOQO-E;s-E;sO!9UQ`O,5?bO!9^QtO,5?bO!9eQ`O,5?lOOQ(C[1G/c1G/cO!9mQ!bO'#DTOOQO'#Ix'#IxO){QdO'#IxO!:[Q!bO'#IxO!:yQ!bO'#DcO!;[Q7[O'#DcO!=gQdO'#DcO!=nQ`O'#IwO!=vQ`O,59|O!={Q`O'#EaO!>ZQ`O'#JSO!>cQ`O,5:zO!>yQ7[O'#DcO){QdO,5?mO!?TQ`O'#HzOOQO-E;x-E;xO!9eQ`O,5?lOOQ(CW1G0e1G0eO!@aQ7[O'#D|OOQ(C[,5:e,5:eO){QdO,5:eOIWQ&jO,5:eO!@hQaO,5:eO:aQ`O,5:uO!-OQ!bO,5:uO!-WQ&jO,5:uO5yQ&jO,5:uOOQ(C[1G/n1G/nOOQ(C[1G0O1G0OOOQ(CW'#EV'#EVO){QdO,5?jO!@sQ(ChO,5?jO!AUQ(ChO,5?jO!A]Q`O,5?iO!AeQ`O'#H|O!A]Q`O,5?iOOQ(CW1G0d1G0dO7YQ`O,5?iOOQ(C[1G0b1G0bO!BPQ(C|O1G0bO!CRQ(CyO,5:rOOQ(C]'#Fq'#FqO!CoQ(C}O'#IqOGWQdO1G0bO!EqQ,VO'#IyO!E{Q`O,5:WO!FQQtO'#IzO){QdO'#IzO!F[Q`O,5:]OOQ(C]'#DT'#DTOOQ(C[1G0k1G0kO!FaQ`O1G0kO!HrQ(C|O1G0mO!HyQ(C|O1G0mO!K^Q(C|O1G0mO!KeQ(C|O1G0mO!MlQ(C|O1G0mO!NPQ(C|O1G0mO#!pQ(C|O1G0mO#!wQ(C|O1G0mO#%[Q(C|O1G0mO#%cQ(C|O1G0mO#'WQ(C|O1G0mO#*QQMlO'#ChO#+{QMlO1G0}O#-vQMlO'#IuOOQ(C[1G1T1G1TO#.ZQ(C|O,5>kOOQ(CW-E;}-E;}O#.zQ(C}O1G0mOOQ(C[1G0m1G0mO#1PQ(C|O1G1QO#1pQ!bO,5;sO#1uQ!bO,5;tO#1zQ!bO'#F[O#2`Q`O'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#2eQ!bO1G1]OOQ(C[1G1]1G1]OOOO1G1f1G1fO#2sQMlO'#ItO#2}Q`O,5;}OLbQdO,5;}OOOO-E;|-E;|OOQ(C[1G1Y1G1YOOQ(C[,5<P,5<PO#3SQ!bO,5<POOQ(C],59a,59aOIWQ&jO'#C{OOOW'#Hs'#HsO#3XOWO,59eOOQ(C],59e,59eO){QdO1G1lO!)RQ`O'#IRO#3dQ`O,5<eOOQ(C],5<b,5<bOOQO'#GV'#GVOJjQ&jO,5<pOOQO'#GX'#GXOJjQ&jO,5<rOIWQ&jO,5<tOOQO1G1n1G1nO#3oQqO'#CpO#4SQqO,5<^O#4ZQ`O'#JZO5tQ`O'#JZO#4iQ`O,5<`OJjQ&jO,5<_O#4nQ`O'#FtO#4yQ`O,5<_O#5OQqO'#FqO#5]QqO'#J[O#5gQ`O'#J[OIWQ&jO'#J[O#5lQ`O,5<cOOQ(CW'#Dg'#DgO#5qQ!bO'#F|O!'VQ7[O'#F|O!'VQ7[O'#GOO#6SQ`O'#GPO!&WQ`O'#GSO#6XQ(ChO'#ITO#6dQ7[O,5<gOOQ(C],5<g,5<gO#6kQ7[O'#F|O#6yQ7[O'#F}O#7RQ7[O'#F}OOQ(C],5<u,5<uOJjQ&jO,5?[OJjQ&jO,5?[O#7WQ`O'#IUO#7cQ`O,5?ZO#7kQ`O,59]OOQ(C]'#Ch'#ChO#8[Q,VO,59jOOQ(C],59j,59jO#8}Q,VO,5<UO#9pQ,VO,5<WO#9zQ`O,5<YOOQ(C],5<Z,5<ZO#:PQ`O,5<aO#:UQ,VO,5<fOGWQdO1G1mO#:fQ`O1G1mOOQS1G3v1G3vOOQ(C[1G/p1G/pONbQ`O1G/pOOQS1G2b1G2bOIWQ&jO1G2bO){QdO1G2bOIWQ&jO1G2bO#:kQaO1G2bO#<QQ&jO'#EWOOQ(CW,5?W,5?WO#<[Q(ChO,5?WOOQS1G.s1G.sO:aQ`O1G.sO!-OQ!bO1G.sO!-WQ&jO1G.sO#<mQ`O1G0bO#<rQ`O'#ChO#<}Q`O'#JcO#=VQ`O,5=dO#=[Q`O'#JcO#=aQ`O'#JcO#=iQ`O'#I^O#=wQ`O,5?|O#>PQtO1G1VOOQ(C[1G1X1G1XO5tQ`O1G2}O#>WQ`O1G2}O#>]Q`O1G2}O#>bQ`O1G2}OOQS1G2}1G2}O#>gQ&kO1G2bO7YQ`O'#JQO7YQ`O'#EaO7YQ`O'#IWO#>xQ(ChO,5?yOOQS1G2f1G2fO!0VQ`O1G2lOIWQ&jO1G2iO#?TQ`O1G2iOOQS1G2j1G2jOIWQ&jO1G2jO#?YQaO1G2jO#?bQ7[O'#GhOOQS1G2l1G2lO!'VQ7[O'#IYO!0[QpO1G2oOOQS1G2o1G2oOOQS,5=Y,5=YO#?jQ&kO,5=[O5tQ`O,5=[O#6SQ`O,5=_O5bQ`O,5=_O!-OQ!bO,5=_O!-WQ&jO,5=_O5yQ&jO,5=_O#?{Q`O'#JaO#@WQ`O,5=`OOQS1G.j1G.jO#@]Q(ChO1G.jO#@hQ`O1G.jO#@mQ`O1G.jO5lQ(ChO1G.jO#@uQtO,5@OO#APQ`O,5@OO#A[QdO,5=gO#AcQ`O,5=gO7YQ`O,5@OOOQS1G3P1G3PO`QdO1G3POOQS1G3V1G3VOOQS1G3X1G3XO:[Q`O1G3ZO#AhQdO1G3]O#EcQdO'#H[OOQS1G3`1G3`O#EpQ`O'#HbO:aQ`O'#HdOOQS1G3f1G3fO#ExQdO1G3fO5lQ(ChO1G3lOOQS1G3n1G3nOOQ(CW'#Fx'#FxO5lQ(ChO1G3pO5lQ(ChO1G3rOOOW1G/^1G/^O#IvQpO,5<TO#JOQtO1G3{OOQO1G4Q1G4QO){QdO,5>aO#JYQ`O1G4|O#JbQ`O1G5WO#JjQ`O,5?dOLbQdO,5:{O7YQ`O,5:{O:aQ`O,59}OLbQdO,59}O!-OQ!bO,59}O#JoQMlO,59}OOQO,5:{,5:{O#JyQ7[O'#HvO#KaQ`O,5?cOOQ(C[1G/h1G/hO#KiQ7[O'#H{O#K}Q`O,5?nOOQ(CW1G0f1G0fO!;[Q7[O,59}O#LVQtO1G5XO7YQ`O,5>fOOQ(CW'#ES'#ESO#LaQ(DjO'#ETO!@XQ7[O'#D}OOQO'#Hy'#HyO#L{Q7[O,5:hOOQ(C[,5:h,5:hO#MSQ7[O'#D}O#MeQ7[O'#D}O#MlQ7[O'#EYO#MoQ7[O'#ETO#M|Q7[O'#ETO!@XQ7[O'#ETO#NaQ`O1G0PO#NfQqO1G0POOQ(C[1G0P1G0PO){QdO1G0POIWQ&jO1G0POOQ(C[1G0a1G0aO:aQ`O1G0aO!-OQ!bO1G0aO!-WQ&jO1G0aO#NmQ(C|O1G5UO){QdO1G5UO#N}Q(ChO1G5UO$ `Q`O1G5TO7YQ`O,5>hOOQO,5>h,5>hO$ hQ`O,5>hOOQO-E;z-E;zO$ `Q`O1G5TO$ vQ(C}O,59jO$#xQ(C}O,5<UO$%}Q(C}O,5<WO$(SQ(C}O,5<fOOQ(C[7+%|7+%|O$*_Q(C|O7+%|O$+OQ&jO'#HwO$+YQ`O,5?eOOQ(C]1G/r1G/rO$+bQdO'#HxO$+oQ`O,5?fO$+wQtO,5?fOOQ(C[1G/w1G/wOOQ(C[7+&V7+&VO$,RQMlO,5:^O){QdO7+&iO$,]QMlO,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$,jQ!LQO,5;vOLbQdO,5;uOOQO-E;{-E;{OOQ(C[7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$,uQ`O1G1iOOQ(C[1G1k1G1kO$,zQqO,59gOOOW-E;q-E;qOOQ(C]1G/P1G/PO$-RQ(C|O7+'WOOQ(C],5>m,5>mO$-rQ`O,5>mOOQ(C]1G2P1G2PP$-wQ`O'#IRPOQ(C]-E<P-E<PO$.hQ,VO1G2[O$/ZQ,VO1G2^O$/eQqO1G2`OOQ(C]1G1x1G1xO$/lQ`O'#IQO$/zQ`O,5?uO$/zQ`O,5?uO$0SQ`O,5?uO$0_Q`O,5?uOOQO1G1z1G1zO$0mQ,VO1G1yOJjQ&jO1G1yO$0}Q&jO'#ISO$1_Q`O,5?vOIWQ&jO,5?vO$1gQqO,5?vOOQ(C]1G1}1G1}OOQ(CW,5<h,5<hOOQ(CW,5<i,5<iO$1qQ`O,5<iO#5}Q`O,5<iO!-OQ!bO,5<hO$1vQ`O,5<jOOQ(CW,5<k,5<kO$1qQ`O,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ(C]1G2R1G2RO!'VQ7[O,5<hO$2OQ`O,5<iO!'VQ7[O,5<jO!'VQ7[O,5<iO$2ZQ,VO1G4vO$2eQ,VO1G4vOOQO,5>p,5>pOOQO-E<S-E<SOOQP1G.w1G.wO!.RQ7[O,59lO){QdO,59lO$2rQ`O1G1tOJjQ&jO1G1{O$2wQ(C|O7+'XOOQ(C[7+'X7+'XOGWQdO7+'XOOQ(C[7+%[7+%[O$3hQqO'#J]O#NaQ`O7+'|O$3rQ`O7+'|O$3zQqO7+'|OOQS7+'|7+'|OIWQ&jO7+'|O){QdO7+'|OIWQ&jO7+'|O$4UQ(CyO'#ChO$4iQ(CyO,5<lO$5ZQ`O,5<lOOQ(CW1G4r1G4rOOQS7+$_7+$_O:aQ`O7+$_O!-OQ!bO7+$_OGWQdO7+%|O$5`Q`O'#I]O$5qQ`O,5?}OOQO1G3O1G3OO5tQ`O,5?}O$5qQ`O,5?}O$5yQ`O,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ(C[7+&q7+&qO$6OQ`O7+(iO5lQ(ChO7+(iO5tQ`O7+(iO$6TQ`O7+(iO$6YQaO7+'|OOQ(CW,5>r,5>rOOQ(CW-E<U-E<UOOQS7+(W7+(WO$6hQ(CyO7+(TOIWQ&jO7+(TO$6rQqO7+(UOOQS7+(U7+(UOIWQ&jO7+(UO$6yQ`O'#J`O$7UQ`O,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQS7+(Z7+(ZO$8OQ7[O'#GqOOQS1G2v1G2vOIWQ&jO1G2vO){QdO1G2vOIWQ&jO1G2vO$8VQaO1G2vO$8eQ&kO1G2vO5lQ(ChO1G2yO#6SQ`O1G2yO5bQ`O1G2yO!-OQ!bO1G2yO!-WQ&jO1G2yO$8vQ`O'#I[O$9RQ`O,5?{O$9ZQ7[O,5?{OOQ(CW1G2z1G2zOOQS7+$U7+$UO$9cQ`O7+$UO5lQ(ChO7+$UO$9hQ`O7+$UO){QdO1G5jO){QdO1G5kO$9mQdO1G3RO$9tQ`O1G3RO$9yQdO1G3RO$:QQ(ChO1G5jOOQS7+(k7+(kO5lQ(ChO7+(uO`QdO7+(wOOQS'#Jf'#JfOOQS'#I_'#I_O$:[QdO,5=vOOQS,5=v,5=vO){QdO'#H]O$:iQ`O'#H_OOQS,5=|,5=|O7YQ`O,5=|OOQS,5>O,5>OOOQS7+)Q7+)QOOQS7+)W7+)WOOQS7+)[7+)[OOQS7+)^7+)^OOQO1G5O1G5OO$:nQMlO1G0gO$:xQ`O1G0gOOQO1G/i1G/iO$;TQMlO1G/iO:aQ`O1G/iOLbQdO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!-OQ!bO1G/iO:aQ`O,5:iOOQO,5:o,5:oO){QdO,5:oO$;_Q(ChO,5:oO$;jQ(ChO,5:oO!-OQ!bO,5:iOOQO-E;w-E;wOOQ(C[1G0S1G0SO!@XQ7[O,5:iO$;xQ7[O,5:iO$<ZQ(DjO,5:oO$<uQ7[O,5:iO!@XQ7[O,5:oOOQO,5:t,5:tO$<|Q7[O,5:oO$=ZQ(ChO,5:oOOQ(C[7+%k7+%kO#NaQ`O7+%kO#NfQqO7+%kOOQ(C[7+%{7+%{O:aQ`O7+%{O!-OQ!bO7+%{O$=oQ(C|O7+*pO){QdO7+*pOOQO1G4S1G4SO7YQ`O1G4SO$>PQ`O7+*oO$>XQ(C}O1G2[O$@^Q(C}O1G2^O$BcQ(C}O1G1yO$DnQ,VO,5>cOOQO-E;u-E;uO$DxQtO,5>dO){QdO,5>dOOQO-E;v-E;vO$ESQ`O1G5QO$E[QMlO1G0bO$GcQMlO1G0mO$GjQMlO1G0mO$IkQMlO1G0mO$IrQMlO1G0mO$KgQMlO1G0mO$KzQMlO1G0mO$NXQMlO1G0mO$N`QMlO1G0mO%!aQMlO1G0mO%!hQMlO1G0mO%$]QMlO1G0mO%$pQ(C|O<<JTO%%rQMmO1G0mO%'|QMmO'#IqO%)iQMlO1G1QOLbQdO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%)vQ`O1G1aO%){QMlO,5>kOOOO7+'T7+'TOOOW1G/R1G/ROOQ(C]1G4X1G4XOJjQ&jO7+'zO%*VQ`O,5>lO5tQ`O,5>lOOQO-E<O-E<OO%*eQ`O1G5aO%*eQ`O1G5aO%*mQ`O1G5aO%*xQ,VO7+'eO%+YQqO,5>nO%+dQ`O,5>nOIWQ&jO,5>nOOQO-E<Q-E<QO%+iQqO1G5bO%+sQ`O1G5bOOQ(CW1G2T1G2TO$1qQ`O1G2TOOQ(CW1G2S1G2SO%+{Q`O1G2UOIWQ&jO1G2UOOQ(CW1G2Y1G2YO!-OQ!bO1G2SO#5}Q`O1G2TO%,QQ`O1G2UO%,YQ`O1G2TOJjQ&jO7+*bOOQ(C]1G/W1G/WO%,eQ`O1G/WOOQ(C]7+'`7+'`O%,jQ,VO7+'gO%,zQ(C|O<<JsOOQ(C[<<Js<<JsOIWQ&jO'#IVO%-kQ`O,5?wOOQS<<Kh<<KhOIWQ&jO<<KhO#NaQ`O<<KhO%-sQ`O<<KhO%-{QqO<<KhOIWQ&jO1G2WOOQS<<Gy<<GyO:aQ`O<<GyO%.VQ(C|O<<IhOOQ(C[<<Ih<<IhOOQO,5>w,5>wO%.vQ`O,5>wO%.{Q`O,5>wOOQO-E<Z-E<ZO%/TQ`O1G5iO%/TQ`O1G5iO5tQ`O1G5iO%/]Q`O<<LTOOQS<<LT<<LTO%/bQ`O<<LTO5lQ(ChO<<LTO){QdO<<KhOIWQ&jO<<KhOOQS<<Ko<<KoO$6hQ(CyO<<KoOOQS<<Kp<<KpO$6rQqO<<KpO%/gQ7[O'#IXO%/rQ`O,5?zOLbQdO,5?zOOQS1G2n1G2nO#LaQ(DjO'#ETO!@XQ7[O'#GrOOQO'#IZ'#IZO%/zQ7[O,5=]OOQS,5=],5=]O%0RQ7[O'#ETO%0^Q7[O'#ETO%0uQ7[O'#ETO%1PQ7[O'#GrO%1bQ`O7+(bO%1gQ`O7+(bO%1oQqO7+(bOOQS7+(b7+(bOIWQ&jO7+(bO){QdO7+(bOIWQ&jO7+(bO%1yQaO7+(bOOQS7+(e7+(eO5lQ(ChO7+(eO#6SQ`O7+(eO5bQ`O7+(eO!-OQ!bO7+(eO%2XQ`O,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%2dQ`O1G5gO5lQ(ChO<<GpOOQS<<Gp<<GpO%2lQ`O<<GpO%2qQ`O7++UO%2vQ`O7++VOOQS7+(m7+(mO%2{Q`O7+(mO%3QQdO7+(mO%3XQ`O7+(mO){QdO7++UO){QdO7++VOOQS<<La<<LaOOQS<<Lc<<LcOOQS-E<]-E<]OOQS1G3b1G3bO%3^Q`O,5=wOOQS,5=y,5=yO%3cQ`O1G3hOLbQdO7+&ROOQO7+%T7+%TO%3hQMlO1G5XO:aQ`O7+%TOOQO1G0T1G0TO%3rQ(C|O1G0ZOOQO1G0Z1G0ZO){QdO1G0ZO%3|Q(ChO1G0ZO:aQ`O1G0TO!-OQ!bO1G0TO!@XQ7[O1G0TO%4XQ(ChO1G0ZO%4gQ7[O1G0TO%4xQ(ChO1G0ZO%5^Q(DjO1G0ZO%5hQ7[O1G0TO!@XQ7[O1G0ZOOQ(C[<<IV<<IVOOQ(C[<<Ig<<IgO:aQ`O<<IgO%5oQ(C|O<<N[OOQO7+)n7+)nO%6PQ(C}O7+'eO%8[Q(C}O7+'gO%:gQtO1G4OO%:qQMlO7+%|O%;gQMmO,59jO%=hQMmO,5<UO%?lQMmO,5<WO%A[QMmO,5<fO%B}QMlO7+'WO%C[QMlO7+'XO%CiQ`O,5;xOOQO7+&{7+&{O%CnQ,VO<<KfOOQO1G4W1G4WO%CuQ`O1G4WO%DQQ`O1G4WO%D`Q`O7+*{O%D`Q`O7+*{OIWQ&jO1G4YO%DhQqO1G4YO%DrQ`O7+*|OOQ(CW7+'o7+'oO$1qQ`O7+'pO%DzQqO7+'pOOQ(CW7+'n7+'nO$1qQ`O7+'oO%ERQ`O7+'pOIWQ&jO7+'pO#5}Q`O7+'oO%EWQ,VO<<M|OOQ(C]7+$r7+$rO%EbQqO,5>qOOQO-E<T-E<TO#NaQ`OANASOOQSANASANASOIWQ&jOANASO%ElQ(CyO7+'rOOQSAN=eAN=eO5tQ`O1G4cOOQO1G4c1G4cO%E|Q`O1G4cO%FRQ`O7++TO%FRQ`O7++TO5lQ(ChOANAoO%FZQ`OANAoOOQSANAoANAoO%F`Q`OANASO%FhQqOANASOOQSANAZANAZOOQSANA[ANA[O%FrQ`O,5>sOOQO-E<V-E<VO%F}QMlO1G5fO#6SQ`O,5=^O5bQ`O,5=^O!-OQ!bO,5=^OOQO-E<X-E<XOOQS1G2w1G2wO$<ZQ(DjO,5:oO!@XQ7[O,5=^O%GXQ7[O,5=^O%GjQ7[O,5:oOOQS<<K|<<K|OIWQ&jO<<K|O%1bQ`O<<K|O%GtQ`O<<K|O%G|QqO<<K|O){QdO<<K|OIWQ&jO<<K|OOQS<<LP<<LPO5lQ(ChO<<LPO#6SQ`O<<LPO5bQ`O<<LPO%HWQ7[O1G4bO%H`Q`O7++ROOQSAN=[AN=[O5lQ(ChOAN=[OOQS<<Np<<NpOOQS<<Nq<<NqOOQS<<LX<<LXO%HhQ`O<<LXO%HmQdO<<LXO%HtQ`O<<NpO%HyQ`O<<NqOOQS1G3c1G3cO:aQ`O7+)SO%IOQMlO<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%3rQ(C|O7+%uO){QdO7+%uOOQO7+%o7+%oO:aQ`O7+%oO!-OQ!bO7+%oO%IYQ(ChO7+%uO!@XQ7[O7+%oO%IeQ(ChO7+%uO%IsQ7[O7+%oO%JUQ(ChO7+%uOOQ(C[AN?RAN?RO%JjQMlO<<JTO%JwQMmO1G1yO%MOQMmO1G2[O& SQMmO1G2^O&!rQMlO<<JsO&#PQMlO<<IhOOQO1G1d1G1dOJjQ&jOANAQOOQO7+)r7+)rO&#^Q`O7+)rO&#iQ`O<<NgO&#qQqO7+)tOOQ(CW<<K[<<K[O$1qQ`O<<K[OOQ(CW<<KZ<<KZO&#{QqO<<K[O$1qQ`O<<KZOOQSG26nG26nO#NaQ`OG26nOOQO7+)}7+)}O5tQ`O7+)}O&$SQ`O<<NoOOQSG27ZG27ZO5lQ(ChOG27ZOIWQ&jOG26nOLbQdO1G4_O&$[Q`O7++QO5lQ(ChO1G2xO#6SQ`O1G2xO5bQ`O1G2xO!-OQ!bO1G2xO!@XQ7[O1G2xO%5^Q(DjO1G0ZO&$dQ7[O1G2xO%1bQ`OANAhOOQSANAhANAhOIWQ&jOANAhO&$uQ`OANAhO&$}QqOANAhOOQSANAkANAkO5lQ(ChOANAkO#6SQ`OANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQSG22vG22vOOQSANAsANAsO&%XQ`OANAsOOQSAND[AND[OOQSAND]AND]OOQS<<Ln<<LnOOQO<<Ia<<IaO%3rQ(C|O<<IaOOQO<<IZ<<IZO:aQ`O<<IZO){QdO<<IaO!-OQ!bO<<IZO&%^Q(ChO<<IaO!@XQ7[O<<IZO&%iQ(ChO<<IaO&%wQMmO7+'eO&'jQMmO7+'gO&)]Q,VOG26lOOQO<<M^<<M^OOQ(CWAN@vAN@vO$1qQ`OAN@vOOQ(CWAN@uAN@uOOQSLD,YLD,YOOQO<<Mi<<MiOOQSLD,uLD,uO#NaQ`OLD,YO&)mQMlO7+)yOOQO7+(d7+(dO5lQ(ChO7+(dO#6SQ`O7+(dO5bQ`O7+(dO!-OQ!bO7+(dO!@XQ7[O7+(dOOQSG27SG27SO%1bQ`OG27SOIWQ&jOG27SOOQSG27VG27VO5lQ(ChOG27VOOQSG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%3rQ(C|OAN>{O:aQ`OAN>uO){QdOAN>{O!-OQ!bOAN>uO&)wQ(ChOAN>{O&*SQ(C}OG26lOOQ(CWG26bG26bOOQS!$( t!$( tOOQO<<LO<<LOO5lQ(ChO<<LOO#6SQ`O<<LOO5bQ`O<<LOO!-OQ!bO<<LOOOQSLD,nLD,nO%1bQ`OLD,nOOQSLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%3rQ(C|OG24gO:aQ`OG24aO){QdOG24gO&,pQ!LRO,5:rO&-gQ$ITO'#IqOOQOANAjANAjO5lQ(ChOANAjO#6SQ`OANAjO5bQ`OANAjOOQS!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%3rQ(C|OLD*RO&.ZQMmOG26lO&/|Q!LRO,59jO&0pQ!LRO,5<UO&1dQ!LRO,5<WO&2WQ!LRO,5<fOOQOG27UG27UO5lQ(ChOG27UO#6SQ`OG27UOOQO!$'Mm!$'MmO&2}Q!LRO1G2[O&3qQ!LRO1G2^O&4eQ!LRO1G1yOOQOLD,pLD,pO5lQ(ChOLD,pO&5[Q!LRO7+'eO&6RQ!LRO7+'gOOQO!$(![!$(![O&6xQ!LROG26lOLbQdO'#DrO&7oQtO'#ItOLbQdO'#DjO&7vQ(C|O'#ChO&8aQtO'#ChO&8qQdO,5:vO&:qQ&jO'#EWOLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO'#IPO&<OQ`O,5<TO&=eQ&jO,5;ROLbQdO,5;fO!(wQ`O'#DOO!(wQ`O'#DOO!(wQ`O'#DOOIWQ&jO'#FjO&:qQ&jO'#FjO&<WQ&jO'#FjOIWQ&jO'#FlO&:qQ&jO'#FlO&<WQ&jO'#FlOIWQ&jO'#FzO&:qQ&jO'#FzO&<WQ&jO'#FzOLbQdO,5?mO&8qQdO1G0bO&=lQMlO'#ChOLbQdO1G1lOIWQ&jO,5<pO&:qQ&jO,5<pO&<WQ&jO,5<pOIWQ&jO,5<rO&:qQ&jO,5<rO&<WQ&jO,5<rOIWQ&jO,5<_O&:qQ&jO,5<_O&<WQ&jO,5<_O&8qQdO1G1mOLbQdO7+&iOIWQ&jO1G1yO&:qQ&jO1G1yO&<WQ&jO1G1yOIWQ&jO1G1{O&:qQ&jO1G1{O&<WQ&jO1G1{O&8qQdO7+'XO&8qQdO7+%|O&=vQ`O7+'pOIWQ&jOANAQO&:qQ&jOANAQO&<WQ&jOANAQO&=vQ`O<<K[O&=vQ`OAN@vO&={Q`O'#E[O&>QQ`O'#E[O&>YQ`O'#EzO&>_Q`O'#EgO&>dQ`O'#JRO&>oQ`O'#JPO&>zQ`O,5:vO&?PQ,VO,5<QO&?WQ`O'#FsO&?]Q`O'#FsO&?bQ`O'#FsO&?gQ`O,5<RO&?oQ`O,5:vO&?wQMlO1G0}O&@OQ`O,5<_O&@TQ`O,5<_O&@YQ`O,5<_O&@_Q`O,5<aO&@dQ`O,5<aO&@iQ`O,5<aO&@nQ`O1G1mO&@sQ`O1G0bO&@xQ`O1G2UO&@}Q,VO<<KfO&AUQ,VO<<KfO&A]Q,VO<<KfO&AdQqO7+'pO&AkQ`O7+'pO&ApQqO<<K[O4QQ&jO'#FhO5bQ`O'#FgOBzQ`O'#EZOLbQdO,5;cO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FuO!&WQ`O'#FuO!&WQ`O'#FuO&AwQ`O,5<jOJjQ&jO7+'zOJjQ&jO7+'zOJjQ&jO7+'zOIWQ&jO1G2UO&BPQ`O1G2UOIWQ&jO7+'pO!'VQ7[O'#GOO$/eQqO1G2`O$/eQqO1G2`O$/eQqO1G2`O!'VQ7[O,5<jOIWQ&jO,5<tOIWQ&jO,5<tOIWQ&jO,5<t",stateData:"&B}~O'YOS'ZOSTOSUOS~OQTORTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OQ[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOS!WO'U!XO'V!ZO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9bO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOQ'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']#pO'b$PO'f#sO'a'cP~O!d$ZO~O!]$]O~O_$^O'W$^O~O']$bO~O!d$ZO']$bO'^$dO'b$PO~Oc$jO!d$ZO']$bO~O#c#TO~O]$sOu$oO!T$lO!d$nO%R$rO']$bO'^$dO^(UP~O!n$tO~Ox$uO!T$vO']$bO~Ox$uO!T$vO%Z$zO']$bO~O']${O~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%UOc%TO!n%RO%P%SO%c%QO~P7xOb%XOcmO!T%WO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%[O!{%_O%R%YO'^$dO~P8wO!d%`O!g%dO~O!d%eO~O!TSO~O_$^O'T%mO'W$^O~O_$^O'T%pO'W$^O~O_$^O'T%rO'W$^O~OS!WO'U!XO'V%vO~OQ[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;dO!Q%xO!O&iX!O&nX!R&iX!R&nX~P'dO!R%zO!O'jX~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R%zO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>aO!O&PO~Ox&SO!W&^O!X&VO!Y&VO'^$dO~O]&TOk&TO!Q&WO'g&QO!S'kP!S'vP~P@dO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PA]O!{&_O!O'uX!R'uX~O!R&`O!O'tX~O!O&cO~O!{#eO~PA]OP&gO!T&dO!o&fO']$bO~Oc&lO!d$ZO']$bO~Ou$oO!d$nO~O!S&mO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOQ!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCfO!c&nO~O!]!wO!{&pO'p&oO!R'rX_'rX'W'rX~O!c'rX~PFOO!R&tO!c'qX~O!c&vO~Ox$uO!T$vO#V&wO']$bO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO']&{O'b$PO'f#sO~O#W&}O~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']&{O'b$PO'f#sO~O'a'mP~PJjO!Q'RO!c'nP~P){O'g'TO'oYO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'jO~PIWO!]'lO!T'yX#w'yX#z'yX$R'yX~Ou'mO~P! YOu'mO!T'yX#w'yX#z'yX$R'yX~O!T'oO#w'sO#z'nO$R'tO~O!Q'wO~PLbO#z#fO$R'zO~OP$eXu$eXx$eX!b$eX'w$eX'x$eX~OPfX!RfX!{fX'afX'a$eX~P!!rOk'|O~OS'}O'U(OO'V(QO~OP(ZOu(SOx(TO'w(VO'x(XO~O'a(RO~P!#{O'a([O~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~O!Q(`O'](]O!c'}P~P!$jO#W(bO~O!d(cO~O!Q(hO'](eO!O(OP~P!$jOj(uOx(mO!W(sO!X(lO!Y(lO!d(cO!x(tO$w(oO'^$dO'g(jO~O!S(rO~P!&jO!b!yOP'eXu'eXx'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'cOP(xO!{(wO!R'dX'a'dX~O!R(yO'a'cX~O']${O'a'cP~O'](|O~O!d)RO~O']&{O~Ox$uO!Q!rO!T$vO#U!uO#V!rO']$bO!c'qP~O!]!wO#W)VO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)wOP)_O!T&dO!o)^O%Q)]O'b$PO~O!])aO!T'`X_'`X!R'`X'W'`X~O!d$ZO'b$PO~O!d$ZO']$bO'b$PO~O!]!wO#W&}O~O])lO%R)mO'])iO!S(VP~O!R)nO^(UX~O'g'TO~OZ)rO~O^)sO~O!T$lO']$bO'^$dO^(UP~Ox$uO!Q)xO!R&`O!T$vO']$bO!O'tP~O]&ZOk&ZO!Q)yO'g'TO!S'vP~O!R)zO_(RX'W(RX~O!{*OO'b$PO~OP*RO!T#zO'b$PO~O!T*TO~Ou*VO!TSO~O!n*[O~Oc*aO~O'](|O!S(TP~Oc$jO~O%RtO']${O~P8wOZ*gO^*fO~OQTORTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9aO~P!1_O^*fO_$^O'W$^O~O_*kO#d*mO%T*mO%U*mO~P){O!d%`O~O%t*rO~O!T*tO~O&V*vO&X*wOQ&SaR&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*|O~On+PO~O!O&ia!R&ia~P!)wO!Q+TO!O&iX!R&iX~P){O!R%zO!O'ja~O!O'ja~P>aO!R&`O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+YO!{+XO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+[O!d$ZO'b$PO!R!VX!S!VX~O]&ROk&ROx&SO'g(jO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O'fQO'oYO'|;^O~O']:SO~P!;jO!R+`O!S'kX~O!S+bO~O!]+YO!{+XO!R#TX!S#TX~O!R+cO!S'vX~O!S+eO~O]&ROk&ROx&SO'^$dO'g(jO~O!X+fO!Y+fO~P!>hOx$uO!Q+hO!T$vO']$bO!O&nX!R&nX~O_+lO!W+oO!X+kO!Y+kO!r+sO!s+qO!t+rO!u+pO!x+tO'^$dO'g(jO'o+iO~O!S+nO~P!?iOP+yO!T&dO!o+xO~O!{,PO!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@sO!R&tO!c'qa~Ox$uO!Q,SO!T$vO#U,UO#V,SO']$bO!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)wOP;tOu(SOx(TO'w(VO'x(XO~O#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!BpO#W'eXQ'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX'p'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'cO!R,_O'a'mX~P!#{O'a,aO~O!R,bO!c'nX~P!)wO!c,eO~O!O,fO~OQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!FfO#[#PO~P!FfOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!IQOj#RO~P!IQOQ#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!KlOZ#dO!a#TO#a#TO#b#TO#c#TO~P!KlOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!NdO'w!}O~P!NdOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P##OO'x#OO~P##OOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#%jOQ[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#'}OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO#j9oO'fQO'p#[O'w!}O'x#OO~O#m,hO~P#*XOQ'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9sO#o9sO#c'iX#m'iX!S'iX~P#,SO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)wOQ#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!BpO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)wO#z,jO~O#z,kO~O!]'lO!{,lO!T$OX#w$OX#z$OX$R$OX~O!Q,mO~O!T'oO#w,oO#z'nO$R,pO~O!R9pO!S'hX~P#*XO!S,qO~O$R,sO~OS'}O'U(OO'V,vO~O],yOk,yO!O,zO~O!RdX!]dX!cdX!c$eX'pdX~P!!rO!c-QO~P!BpO!R-RO!]!wO'p&oO!c'}X~O!c-WO~O!Q(`O']$bO!c'}P~O#W-YO~O!O$eX!R$eX!]$lX~P!!rO!R-ZO!O(OX~P!BpO!]-]O~O!O-_O~Oj-cO!]!wO!d$ZO'b$PO'p&oO~O!])aO~O_$^O!R-hO'W$^O~O!S-jO~P!&jO!X-kO!Y-kO'^$dO'g(jO~Ox-mO'g(jO~O!x-nO~O']${O!R&xX'a&xX~O!R(yO'a'ca~O'a-sO~Ou-tOv-tOx-uOPra'wra'xra!Rra!{ra~O'ara#mra~P#7pOu(SOx(TOP$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#8fOu(SOx(TOP$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#9XO]-vO~O#W-wO~O'a$na!R$na!{$na#m$na~P!#{O#W-zO~OP.TO!T&dO!o.SO%Q.RO~O]#qOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~Oh.VO'].UO~P#:yO!])aO!T'`a_'`a!R'`a'W'`a~O#W.]O~OZ[X!RdX!SdX~O!R.^O!S(VX~O!S.`O~OZ.aO~O].cO'])iO~O!T$lO']$bO^'QX!R'QX~O!R)nO^(Ua~O!c.fO~P!)wO].hO~OZ.iO~O^.jO~OP.TO!T&dO!o.SO%Q.RO'b$PO~O!R)zO_(Ra'W(Ra~O!{.pO~OP.sO!T#zO~O'g'TO!S(SP~OP.}O!T.yO!o.|O%Q.{O'b$PO~OZ/XO!R/VO!S(TX~O!S/YO~O^/[O_$^O'W$^O~O]/]O~O]/^O'](|O~O#c/_O%r/`O~P0zO!{#eO#c/_O%r/`O~O_/aO~P){O_/cO~O%{/gOQ%yiR%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/mO!S/kO&Q/lO~P`O!TSO!d/oO~O&X*wOQ&SiR&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)wO!R%zO!O'ji~O!R&`O!O'ti~O!O/uO~O!R!Va!S!Va~P#*XO]&ROk&RO!Q/{O'g(jO!R&jX!S&jX~P@dO!R+`O!S'ka~O]&ZOk&ZO!Q)yO'g'TO!R&oX!S&oX~O!R+cO!S'va~O!O'ui!R'ui~P!)wO_$^O!]!wO!d$ZO!j0VO!{0TO'W$^O'b$PO'p&oO~O!S0YO~P!?iO!X0ZO!Y0ZO'^$dO'g(jO'o+iO~O!W0[O~P#MSO!TSO!W0[O!u0^O!x0_O~P#MSO!W0[O!s0aO!t0aO!u0^O!x0_O~P#MSO!T&dO~O!T&dO~P!BpO!R'ri!c'ri_'ri'W'ri~P!)wO!{0jO!R'ri!c'ri_'ri'W'ri~O!R&tO!c'qi~Ox$uO!T$vO#V0lO']$bO~O#WraQraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra'pra!cra!Ora!Tranra%Qra!]ra~P#7pO#W$^aQ$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a'p$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#8fO#W$`aQ$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a'p$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#9XO#W$naQ$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na'p$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!BpO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)wO!R&kX'a&kX~PJjO!R,_O'a'ma~O!Q0tO!R&lX!c&lX~P){O!R,bO!c'na~O!R,bO!c'na~P!)wO#m!fa!S!fa~PCfO#m!^a!R!^a!S!^a~P#*XO!T1XO#x^O$P1YO~O!S1^O~On1_O~P!BpO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)wO!O1`O~O],yOk,yO~Ou(SOx(TO'x(XOP$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$.POu(SOx(TOP$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$.rO'p#[O~P!BpO!Q1cO']$bO!R&tX!c&tX~O!R-RO!c'}a~O!R-RO!]!wO!c'}a~O!R-RO!]!wO'p&oO!c'}a~O'a$gi!R$gi!{$gi#m$gi~P!#{O!Q1kO'](eO!O&vX!R&vX~P!$jO!R-ZO!O(Oa~O!R-ZO!O(Oa~P!BpO!]!wO~O!]!wO#c1sO~Oj1vO!]!wO'p&oO~O!R'di'a'di~P!#{O!{1yO!R'di'a'di~P!#{O!c1|O~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)wO!R2QO!T(PX~P!BpO!T&dO%Q2TO~O!T&dO%Q2TO~P!BpO!T$eX$u[X_$eX!R$eX'W$eX~P!!rO$u2XOPgXugXxgX!TgX'wgX'xgX_gX!RgX'WgX~O$u2XO~O]2_O%R2`O'])iO!R'PX!S'PX~O!R.^O!S(Va~OZ2dO~O^2eO~O]2hO~OP2jO!T&dO!o2iO%Q2TO~O_$^O'W$^O~P!BpO!T#zO~P!BpO!R2oO!{2qO!S(SX~O!S2rO~Ox;oO!W2{O!X2tO!Y2tO!r2zO!s2yO!t2yO!x2xO'^$dO'g(jO'o+iO~O!S2wO~P$7ZOP3SO!T.yO!o3RO%Q3QO~OP3SO!T.yO!o3RO%Q3QO'b$PO~O'](|O!R'OX!S'OX~O!R/VO!S(Ta~O]3^O'g3]O~O]3_O~O^3aO~O!c3dO~P){O_3fO~O_3fO~P){O#c3hO%r3iO~PFOO`/mO!S3mO&Q/lO~P`O!]3oO~O!R#Ti!S#Ti~P#*XO!{3qO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#*XO_$^O!{3xO'W$^O~O_$^O!]!wO!{3xO'W$^O~O!X3|O!Y3|O'^$dO'g(jO'o+iO~O_$^O!]!wO!d$ZO!j3}O!{3xO'W$^O'b$PO'p&oO~O!W4OO~P$;xO!W4OO!u4RO!x4SO~P$;xO_$^O!]!wO!j3}O!{3xO'W$^O'p&oO~O!R'rq!c'rq_'rq'W'rq~P!)wO!R&tO!c'qq~O#W$xiQ$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi'p$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$.PO#W$ziQ$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi'p$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$.rO#W$giQ$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi'p$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!BpO!R&ka'a&ka~P!#{O!R&la!c&la~P!)wO!R,bO!c'ni~O#m#Oi!R#Oi!S#Oi~P#*XOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$EiO#[9eO~P$EiOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$GqOj9gO~P$GqOQ#^Oj9gOu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$IyOZ9rO!a9iO#a9iO#b9iO#c9iO~P$IyOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$L_O'w!}O~P$L_OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$NgO'x#OO~P$NgOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P%!oO_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)wOP;vOu(SOx(TO'w(VO'x(XO~OQ#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi'p#Zi!R#Zi!S#Zi~P%%aO!b!yOP'eXu'eXx'eX'w'eX'x'eX!S'eX~OQ'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX'p'eX!R'eX~P%'eO#m#ni!R#ni!S#ni~P#*XO!S4eO~O!R&sa!S&sa~P#*XO!]!wO'p&oO!R&ta!c&ta~O!R-RO!c'}i~O!R-RO!]!wO!c'}i~O'a$gq!R$gq!{$gq#m$gq~P!#{O!O&va!R&va~P!BpO!]4lO~O!R-ZO!O(Oi~P!BpO!R-ZO!O(Oi~O!O4pO~O!]!wO#c4uO~Oj4vO!]!wO'p&oO~O!O4xO~O'a$iq!R$iq!{$iq#m$iq~P!#{O_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)wO!R2QO!T(Pa~O!T&dO%Q4}O~O!T&dO%Q4}O~P!BpO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)wOZ5QO~O]5SO'])iO~O!R.^O!S(Vi~O]5VO~O^5WO~O'g'TO!R&{X!S&{X~O!R2oO!S(Sa~O!S5eO~P$7ZOx;sO'g(jO'o+iO~O!W5hO!X5gO!Y5gO!x0_O'^$dO'g(jO'o+iO~O!s5iO!t5iO~P%0^O!X5gO!Y5gO'^$dO'g(jO'o+iO~O!T.yO~O!T.yO%Q5kO~O!T.yO%Q5kO~P!BpOP5pO!T.yO!o5oO%Q5kO~OZ5uO!R'Oa!S'Oa~O!R/VO!S(Ti~O]5xO~O!c5yO~O!c5zO~O!c5{O~O!c5{O~P){O_5}O~O!]6QO~O!c6RO~O!R'ui!S'ui~P#*XO_$^O'W$^O~P!)wO_$^O!{6WO'W$^O~O_$^O!]!wO!{6WO'W$^O~O!X6]O!Y6]O'^$dO'g(jO'o+iO~O_$^O!]!wO!j6^O!{6WO'W$^O'p&oO~O!d$ZO'b$PO~P%4xO!W6_O~P%4gO!R'ry!c'ry_'ry'W'ry~P!)wO#W$gqQ$gqZ$gq_$gqj$gqv$gq!R$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq'W$gq'f$gq'p$gq!c$gq!O$gq!T$gq!{$gqn$gq%Q$gq!]$gq~P!BpO#W$iqQ$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq'p$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!BpO!R&li!c&li~P!)wO#m#Oq!R#Oq!S#Oq~P#*XOu-tOv-tOx-uOPra'wra'xra!Sra~OQraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra'pra!Rra~P%;OOu(SOx(TOP$^a'w$^a'x$^a!S$^a~OQ$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a'p$^a!R$^a~P%=SOu(SOx(TOP$`a'w$`a'x$`a!S$`a~OQ$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a'p$`a!R$`a~P%?WOQ$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na'p$na!R$na!S$na~P%%aO#m$Yq!R$Yq!S$Yq~P#*XO#m$Zq!R$Zq!S$Zq~P#*XO!S6hO~O#m6iO~P!#{O!]!wO!R&ti!c&ti~O!]!wO'p&oO!R&ti!c&ti~O!R-RO!c'}q~O!O&vi!R&vi~P!BpO!R-ZO!O(Oq~O!O6oO~P!BpO!O6oO~O!R'dy'a'dy~P!#{O!R&ya!T&ya~P!BpO!T$tq_$tq!R$tq'W$tq~P!BpOZ6vO~O!R.^O!S(Vq~O]6yO~O!T&dO%Q6zO~O!T&dO%Q6zO~P!BpO!{6{O!R&{a!S&{a~O!R2oO!S(Si~P#*XO!X7RO!Y7RO'^$dO'g(jO'o+iO~O!W7TO!x4SO~P%GXO!T.yO%Q7WO~O!T.yO%Q7WO~P!BpO]7_O'g7^O~O!R/VO!S(Tq~O!c7aO~O!c7aO~P){O!c7cO~O!c7dO~O!R#Ty!S#Ty~P#*XO_$^O!{7jO'W$^O~O_$^O!]!wO!{7jO'W$^O~O!X7mO!Y7mO'^$dO'g(jO'o+iO~O_$^O!]!wO!j7nO!{7jO'W$^O'p&oO~O#m#ky!R#ky!S#ky~P#*XOQ$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi'p$gi!R$gi!S$gi~P%%aOu(SOx(TO'x(XOP$xi'w$xi!S$xi~OQ$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi'p$xi!R$xi~P%LjOu(SOx(TOP$zi'w$zi'x$zi!S$zi~OQ$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi'p$zi!R$zi~P%NnO#m$Zy!R$Zy!S$Zy~P#*XO#m#Oy!R#Oy!S#Oy~P#*XO!]!wO!R&tq!c&tq~O!R-RO!c'}y~O!O&vq!R&vq~P!BpO!O7tO~P!BpO!R.^O!S(Vy~O!R2oO!S(Sq~O!X8QO!Y8QO'^$dO'g(jO'o+iO~O!T.yO%Q8TO~O!T.yO%Q8TO~P!BpO!c8WO~O_$^O!{8]O'W$^O~O_$^O!]!wO!{8]O'W$^O~OQ$gqZ$gqj$gqv$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq#m$gq'f$gq'p$gq!R$gq!S$gq~P%%aOQ$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq'p$iq!R$iq!S$iq~P%%aO'a$|!Z!R$|!Z!{$|!Z#m$|!Z~P!#{O!R&{q!S&{q~P#*XO_$^O!{8oO'W$^O~O#W$|!ZQ$|!ZZ$|!Z_$|!Zj$|!Zv$|!Z!R$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z'W$|!Z'f$|!Z'p$|!Z!c$|!Z!O$|!Z!T$|!Z!{$|!Zn$|!Z%Q$|!Z!]$|!Z~P!BpOP;uOu(SOx(TO'w(VO'x(XO~O!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P&,_O!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%'eOQ$|!ZZ$|!Zj$|!Zv$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z#m$|!Z'f$|!Z'p$|!Z!R$|!Z!S$|!Z~P%%aO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%;OO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%=SO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%?WO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P&,_O!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%LjO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%NnO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P&,_O!S$gq!W$gq!X$gq!Y$gq!r$gq!s$gq!t$gq!x$gq'^$gq'g$gq'o$gq~P&,_O!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P&,_O!S$|!Z!W$|!Z!X$|!Z!Y$|!Z!r$|!Z!s$|!Z!t$|!Z!x$|!Z'^$|!Z'g$|!Z'o$|!Z~P&,_On'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;dOQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!TSO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O]#qOh$QOj#rOk#qOl#qOq$ROs9uOx#yO!T#zO!_;fO!d#vO#V:OO#t$VO$_9xO$a9{O$d$WO']&{O'b$PO'f#sO~O!R9pO!S$]a~O]#qOh$QOj#rOk#qOl#qOq$ROs9vOx#yO!T#zO!_;gO!d#vO#V:PO#t$VO$_9yO$a9|O$d$WO']&{O'b$PO'f#sO~O#d'jO~P&<WO!S[X!SdX~P;dO!]9dO~O#W9cO~O!]!wO#W9cO~O!{9sO~O#c9iO~O!{:QO!R'uX!S'uX~O!{9sO!R'sX!S'sX~O#W:RO~O'a:TO~P!#{O#W:[O~O#W:]O~O#W:^O~O!]!wO#W:_O~O!]!wO#W:RO~O#m:`O~P#*XO#W:aO~O#W:bO~O#W:cO~O#W:dO~O#W:eO~O#W:fO~O#W:gO~O#W:hO~O!O:iO~O#m:jO~P!#{O#m:kO~P!#{O#m:lO~P!#{O!O:mO~P!BpO!O:mO~O!O:nO~P!BpO!]!wO#c;lO~O!]!wO#c;nO~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Kk(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s7o8SP8SPPP8SP:U8SP8SP:YPP:`P:t?VPPPP?ZPPPP?ZA{PPPBRDdP?ZPFwPPPPHp?ZPPPPPJi?ZPPMjNgPPPPNk!!TP!!]!#^PNg?Z?Z!&n!)i!.[!.[!1kPPP!1r!4h?ZPPPPPPPPPP!7_P!8pPP?Z!9}P?ZP?Z?Z?Z?ZP?Z!;dPP!>]P!AQ!AY!A^!A^P!>YP!Ab!AbP!DVP!DZ?Z?Z!Da!GT8SP8SP8S8SP!HW8S8S!Jf8S!M_8S# g8S8S#!T#$c#$c#$g#$c#$oP#$cP8S#%k8S#'X8S8S-zPPP#(yPP#)c#)cP#)cP#)x#)cPP#*OP#)uP#)u#*b!!X#)u#+P#+V#+Y([#+]([P#+d#+d#+dP([P([P([P([PP([P#+j#+mP#+m([P#+qP#+tP([P([P([P([P([P([([#+z#,U#,[#,b#,p#,v#,|#-W#-^#-m#-s#.R#.X#._#.m#/S#0z#1Y#1`#1f#1l#1r#1|#2S#2Y#2d#2v#2|PPPPPPPP#3SPP#3v#7OPP#8f#8m#8uPP#>a#@t#Fp#Fs#Fv#GR#GUPP#GX#G]#Gz#Hq#Hu#IZPP#I_#Ie#IiP#Il#Ip#Is#Jc#Jy#KO#KR#KU#K[#K_#Kc#KgmhOSj}!n$]%c%f%g%i*o*t/g/jQ$imQ$ppQ%ZyS&V!b+`Q&k!jS(l#z(qQ)g$jQ)t$rQ*`%TQ+f&^S+k&d+mQ+}&lQ-k(sQ/U*aY0Z+o+p+q+r+sS2t.y2vU3|0[0^0aU5g2y2z2{S6]4O4RS7R5h5iQ7m6_R8Q7T$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ(}$SQ)l$lQ*b%WQ*i%`Q,X9tQ.W)aQ.c)mQ/^*gQ2_.^Q3Z/VQ4^9vQ5S2`R8{9upeOSjy}!n$]%Y%c%f%g%i*o*t/g/jR*d%[&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%z&S&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;`;a[!cRU!]!`%x&WQ$clQ$hmS$mp$rv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ%PwQ&h!iQ&j!jS(_#v(cS)f$i$jQ)j$lQ)w$tQ*Z%RQ*_%TS+|&k&lQ-V(`Q.[)gQ.b)mQ.d)nQ.g)rQ/P*[S/T*`*aQ0h+}Q1b-RQ2^.^Q2b.aQ2g.iQ3Y/UQ4i1cQ5R2`Q5U2dQ6u5QR7w6vx#xa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k!Y$fm!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^Q)`$cQ*P$|Q*S$}Q*^%TQ.k)wQ/O*ZU/S*_*`*aQ3T/PS3X/T/UQ5b2sQ5t3YS7P5c5fS8O7Q7SQ8f8PQ8u8g#[;b!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd;c9d9x9{:O:V:Y:]:b:e:ke;d9r9y9|:P:W:Z:^:c:f:lW#}a$P(y;^S$|t%YQ$}uQ%OvR)}$z%P#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vT(O#s(PX)O$S9t9u9vU&Z!b$v+cQ'U!{Q)q$oQ.t*TQ1z-tR5^2o&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a$]#aZ!_!o$a%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,i,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|T!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ&X!bR/|+`Y&R!b&V&^+`+fS(k#z(qS+j&d+mS-d(l(sQ-e(mQ-l(tQ.v*VU0W+k+o+pU0]+q+r+sS0b+t2xQ1u-kQ1w-mQ1x-nS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mQ8g8QQ;h;oR;m;slhOSj}!n$]%c%f%g%i*o*t/g/jQ%k!QS&x!v9cQ)d$gQ*X%PQ*Y%QQ+z&iS,]&}:RS-y)V:_Q.Y)eQ.x*WQ/n*vQ/p*wQ/x+ZQ0`+qQ0f+{S2P-z:gQ2Y.ZS2].]:hQ3r/zQ3u0RQ4U0gQ5P2ZQ6T3tQ6X3zQ6a4VQ7e6RQ7h6YQ8Y7iQ8l8[R8x8n$W#`Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|W(v#{&|1V8qT)Z$a,i$W#_Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|Q'f#`S)Y$a,iR-{)Z&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ%f{Q%g|Q%i!OQ%j!PR/f*rQ&e!iQ)[$cQ+w&hS.Q)`)wS0c+u+vW2S-}.O.P.kS4T0d0eU4|2U2V2WU6s4{5Y5ZQ7v6tR8b7yT+l&d+mS+j&d+mU0W+k+o+pU0]+q+r+sS0b+t2xS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mR8g8QS+l&d+mT2u.y2vS&r!q/dQ-U(_Q-b(kS0V+j2sQ1g-VS1p-c-lU3}0]0b5fQ4h1bS4s1v1xU6^4P4Q7SQ6k4iQ6r4vR7n6`Q!xXS&q!q/dQ)W$[Q)b$eQ)h$kQ,Q&rQ-T(_Q-a(kQ-f(nQ.X)cQ/Q*]S0U+j2sS1f-U-VS1o-b-lQ1r-eQ1t-gQ3V/RW3y0V0]0b5fQ4g1bQ4k1gS4o1p1xQ4t1wQ5r3WW6[3}4P4Q7SS6j4h4iS6n4p:iQ6p4sQ6}5aQ7[5sS7l6^6`Q7r6kS7s6o:mQ7u6rQ7|7OQ8V7]Q8_7nS8a7t:nQ8d7}Q8s8eQ9Q8tQ9X9RQ:u:pQ;T:zQ;U:{Q;V;hR;[;m$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oS!xn!k!j:o#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:u;`$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ$[b!Y$em!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^S$kn!kQ)c$fQ*]%TW/R*^*_*`*aU3W/S/T/UQ5a2sS5s3X3YU7O5b5c5fQ7]5tU7}7P7Q7SS8e8O8PS8t8f8gQ9R8u!j:p#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ:z;_R:{;`$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oY!hRU!]!`%xv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ*j%`!h:q#]#k'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:t&WS&[!b$vR0O+c$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR*i%`$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ'U!{!k:r#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a!h#VZ!_$a%w%}&y'Q'_'`'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_!R9k'd'u+^,i/v/y0w1P1Q1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!d#XZ!_$a%w%}&y'Q'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_}9m'd'u+^,i/v/y0w1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!`#]Z!_$a%w%}&y'Q'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_Q1a-Px;a'd'u+^,i/v/y0w1W1]3s4]4b4c5`6S6b6f6g7z:|Q;i;pQ;j;qR;k;r&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#l`#mR1Y,l&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#g^#nT'n#i'rT#h^#nT'p#i'r&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aT#l`#mQ#o`R'y#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!k;_#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a#RdOSUj}!S!W!n!|#k$]%[%_%`%c%e%f%g%i%m&S&f'w)^*k*o*t+x,m-u.S.|/_/`/a/c/g/j/l1X2i3R3f3h3i5o5}x#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vQ)S$WQ,x(Sd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:kx#wa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;kQ(d#xS(n#z(qQ)T$XQ-g(o#[:w!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd:x9d9x9{:O:V:Y:]:b:e:kd:y9r9y9|:P:W:Z:^:c:f:lQ:};bQ;O;cQ;P;dQ;Q;eQ;R;fR;S;gx#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:klfOSj}!n$]%c%f%g%i*o*t/g/jQ(g#yQ*}%pQ+O%rR1j-Z%O#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vQ*Q$}Q.r*SQ2m.qR5]2nT(p#z(qS(p#z(qT2u.y2vQ)b$eQ-f(nQ.X)cQ/Q*]Q3V/RQ5r3WQ6}5aQ7[5sQ7|7OQ8V7]Q8d7}Q8s8eQ9Q8tR9X9Rp(W#t'O)U-X-o-p0q1h1}4f4w7q:v;W;X;Y!n:U&z'i(^(f+v,[,t-P-^-|.P.o.q0e0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r[:V8p9O9V9Y9Z9]]:W1U4a6c7o7p8zr(Y#t'O)U,}-X-o-p0q1h1}4f4w7q:v;W;X;Y!p:X&z'i(^(f+v,[,t-P-^-|.P.o.q0e0n0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r^:Y8p9O9T9V9Y9Z9]_:Z1U4a6c6d7o7p8zpeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ%VxR*k%`peOSjy}!n$]%Y%c%f%g%i*o*t/g/jR%VxQ*U%OR.n)}qeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ.z*ZS3P/O/PW5j2|2}3O3TU7V5l5m5nU8R7U7X7YQ8h8SR8v8iQ%^yR*e%YR3^/XR7_5uS$mp$rR.d)nQ%czR*o%dR*u%jT/h*t/jR*y%kQ*x%kR/q*yQjOQ!nST$`j!nQ(P#sR,u(PQ!YQR%u!YQ!^RU%{!^%|+UQ%|!_R+U%}Q+a&XR/}+aQ,`'OR0r,`Q,c'QS0u,c0vR0v,dQ+m&dR0X+mS!eR$uU&a!e&b+VQ&b!fR+V&OQ+d&[R0P+dQ&u!sQ,R&sU,V&u,R0mR0m,WQ'r#iR,n'rQ#m`R'x#mQ#cZU'h#c+Q9qQ+Q9_R9q'uQ-S(_W1d-S1e4j6lU1e-T-U-VS4j1f1gR6l4k$k(U#t&z'O'i(^(f)P)Q)U+v,Y,Z,[,t,}-O-P-X-^-o-p-|.P.o.q0e0n0o0p0q1U1h1i1m1}2W2l2n3O4Y4Z4_4`4a4f4m4q4w4y5O5Z5n6c6d6e6m6q7Y7o7p7q8`8p8z8|8}9O9T9U9V9Y9Z9]:v;W;X;Y;Z;];p;q;rQ-[(fU1l-[1n4nQ1n-^R4n1mQ(q#zR-i(qQ(z$OR-r(zQ2R-|R4z2RQ){$xR.m){Q2p.tS5_2p6|R6|5`Q*W%PR.w*WQ2v.yR5d2vQ/W*bS3[/W5vR5v3^Q._)jW2a._2c5T6wQ2c.bQ5T2bR6w5UQ)o$mR.e)oQ/j*tR3l/jWiOSj!nQ%h}Q)X$]Q*n%cQ*p%fQ*q%gQ*s%iQ/e*oS/h*t/jR3k/gQ$_gQ%l!RQ%o!TQ%q!UQ%s!VQ)v$sQ)|$yQ*d%^Q*{%nQ-h(pS/Z*e*hQ/r*zQ/s*}Q/t+OS0S+j2sQ2f.hQ2k.oQ3U/QQ3`/]Q3j/fY3w0U0V0]0b5fQ5X2hQ5[2lQ5q3VQ5w3_[6U3v3y3}4P4Q7SQ6x5VQ7Z5rQ7`5xW7f6V6[6^6`Q7x6yQ7{6}Q8U7[U8X7g7l7nQ8c7|Q8j8VS8k8Z8_Q8r8dQ8w8mQ9P8sQ9S8yQ9W9QR9[9XQ$gmQ&i!jU)e$h$i$jQ+Z&UU+{&j&k&lQ-`(kS.Z)f)gQ/z+]Q0R+jS0g+|+}Q1q-dQ2Z.[Q3t0QS3z0W0]Q4V0hQ4r1uS6Y3{4QQ7i6ZQ8[7kR8n8^S#ua;^R({$PU$Oa$P;^R-q(yQ#taS&z!w)aQ'O!yQ'i#dQ(^#vQ(f#yQ)P$TQ)Q$UQ)U$YQ+v&gQ,Y9wQ,Z9zQ,[9}Q,t'}Q,}(WQ-O(YQ-P(ZQ-X(bQ-^(hQ-o(wQ-p(xd-|)].R.{2T3Q4}5k6z7W8TQ.P)_Q.o*OQ.q*RQ0e+yQ0n:UQ0o:XQ0p:[Q0q,_Q1U9rQ1h-YQ1i-ZQ1m-]Q1}-wQ2W.TQ2l.pQ2n.sQ3O.}Q4Y:aQ4Z:dQ4_9yQ4`9|Q4a:PQ4f1aQ4m1kQ4q1sQ4w1yQ4y2QQ5O2XQ5Z2jQ5n3SQ6c:^Q6d:WQ6e:ZQ6m4lQ6q4uQ7Y5pQ7o:cQ7p:fQ7q6iQ8`:jQ8p9dQ8z:lQ8|9xQ8}9{Q9O:OQ9T:VQ9U:YQ9V:]Q9Y:bQ9Z:eQ9]:kQ:v;^Q;W;iQ;X;jQ;Y;kQ;Z;lQ;];nQ;p;tQ;q;uR;r;vlgOSj}!n$]%c%f%g%i*o*t/g/jS!pU%eQ%n!SQ%t!WQ'V!|Q'v#kS*h%[%_Q*l%`Q*z%mQ+W&SQ+u&fQ,r'wQ.O)^Q/b*kQ0d+xQ1[,mQ1{-uQ2V.SQ2}.|Q3b/_Q3c/`Q3e/aQ3g/cQ3n/lQ4d1XQ5Y2iQ5m3RQ5|3fQ6O3hQ6P3iQ7X5oR7b5}!vZOSUj}!S!n!|$]%[%_%`%c%e%f%g%i%m&S&f)^*k*o*t+x-u.S.|/_/`/a/c/g/j/l2i3R3f3h3i5o5}Q!_RQ!oTQ$akS%w!]%zQ%}!`Q&y!vQ'Q!zQ'W#PQ'X#QQ'Y#RQ'Z#SQ'[#TQ']#UQ'^#VQ'_#WQ'`#XQ'a#YQ'b#ZQ'd#]Q'g#bQ'k#eW'u#k'w,m1XQ)p$nS+R%x+TS+^&W/{Q+g&_Q,O&pQ,^&}Q,d'RQ,g9^Q,i9`Q,w(RQ-x)VQ/v+XQ/y+[Q0i,PQ0s,bQ0w9cQ0x9eQ0y9fQ0z9gQ0{9hQ0|9iQ0}9jQ1O9kQ1P9lQ1Q9mQ1R9nQ1S9oQ1T,hQ1W9sQ1]9pQ2O-zQ2[.]Q3s:QQ3v0TQ4W0jQ4[0tQ4]:RQ4b:TQ4c:_Q5`2qQ6S3qQ6V3xQ6b:`Q6f:gQ6g:hQ7g6WQ7z6{Q8Z7jQ8m8]Q8y8oQ9_!WR:|;aR!aRR&Y!bS&U!b+`S+]&V&^R0Q+fR'P!yR'S!zT!tU$ZS!sU$ZU$xrs*mS&s!r!uQ,T&tQ,W&wQ.l)zS0k,S,UR4X0l`!dR!]!`$u%x&`)x+hh!qUrs!r!u$Z&t&w)z,S,U0lQ/d*mQ/w+YQ3p/oT:s&W)yT!gR$uS!fR$uS%y!]&`S&O!`)xS+S%x+hT+_&W)yT&]!b$vQ#i^R'{#nT'q#i'rR1Z,lT(a#v(cR(i#yQ-})]Q2U.RQ2|.{Q4{2TQ5l3QQ6t4}Q7U5kQ7y6zQ8S7WR8i8TlhOSj}!n$]%c%f%g%i*o*t/g/jQ%]yR*d%YV$yrs*mR.u*TR*c%WQ$qpR)u$rR)k$lT%az%dT%bz%dT/i*t/j",nodeNames:"\u26a0 extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:Mrt,nodeProps:[["closedBy",4,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[Frt],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T)X(rZ$UW]#eOY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j)X*{R$P&j$UW]#eO!^%T!_#o%T#p~%T)P+ZV]#eOY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U)P+wO$P&j]#e)P+zROr+Urs,Ts~+U)P,[U$P&j]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e,sU]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e-[O]#e#e-_PO~,n)X-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k)X.VZ$P&j$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/PZ$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/yR$UW]#eO!^%T!_#o%T#p~%T#m0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x3]0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`3]1g]$UW'o3TOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T5b5lU'x5Y$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T)X6jZ$UW]#eOY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w)P8YV]#eOY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T)P8rROw8Twx8{x~8T)P9SU$P&j]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e9kU]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e:QPO~9f)X:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c)X:xZ$P&j$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m;rZ$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k&i=QR!d&a$UWO!^%T!_#o%T#p~%Tk=bR!cc$UWO!^%T!_#o%T#p~%T7V=tU'^4V#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T%w>rSj%o$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu5^$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%T!{@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%T!{@iR!Q!s$UWO!^%T!_#o%T#p~%T!{@yZ$UWk!sO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%T!{AqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{BiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{CVV$UWk!sO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du!{!0cd$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%T!{!1x_$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%T!{!3OR$UWk!sO!^%T!_#o%T#p~%T!{!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%T!{!3}Y$UWk!sO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%T!{!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%T!{!5`X$UWk!sO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%T!{!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%T!{!6z]$UWk!sO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T$u!7|R!]V$UW#m$fO!^%T!_#o%T#p~%T!q!8^R_!i$UWO!^%T!_#o%T#p~%T5w!8rR'bd!a/n#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v$u!9kT!{$m$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%V!:gT'a!R#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T*a!<YV'p#{$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T*[!<vRv*S$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%Tk!={R!Oc$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$a!>pR$UW'f$XO!^%T!_#o%T#p~%T~!?OO!T~5b!?VT'w5Y$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T6X!?oR!S5}nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']$y'g3SOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[Rrt,Art,Irt,Prt,0,1,2,3,4,5,6,7,8,9,Ert],topRules:{Script:[0,7]},dialects:{jsx:12107,ts:12109},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:l=>Nrt[l]||-1},{term:299,get:l=>Lrt[l]||-1},{term:63,get:l=>Brt[l]||-1}],tokenPrec:12130}),zrt=[lh("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),lh("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),lh("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),lh("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),lh("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),lh("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),lh("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),lh("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),lh("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),lh('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),lh('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Tpe=new pet,Ope=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Dw(l){return(o,a)=>{let c=o.node.getChild("VariableDefinition");return c&&a(c,l),!0}}const Urt=["FunctionDeclaration"],Hrt={FunctionDeclaration:Dw("function"),ClassDeclaration:Dw("class"),ClassExpression:()=>!0,EnumDeclaration:Dw("constant"),TypeAliasDeclaration:Dw("type"),NamespaceDeclaration:Dw("namespace"),VariableDefinition(l,o){l.matchContext(Urt)||o(l,"variable")},TypeDefinition(l,o){o(l,"type")},__proto__:null};function Dpe(l,o){let a=Tpe.get(o);if(a)return a;let c=[],u=!0;function h(d,f){let p=l.sliceString(d.from,d.to);c.push({label:p,type:f})}return o.cursor(Kr.IncludeAnonymous).iterate(d=>{if(u)u=!1;else if(d.name){let f=Hrt[d.name];if(f&&f(d,h)||Ope.has(d.name))return!1}else if(d.to-d.from>8192){for(let f of Dpe(l,d.node))c.push(f);return!1}}),Tpe.set(o,c),c}const kA=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,QU=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function $rt(l){let o=qs(l.state).resolveInner(l.pos,-1);if(QU.indexOf(o.name)>-1)return null;let a="VariableName"==o.name||o.to-o.from<20&&kA.test(l.state.sliceDoc(o.from,o.to));if(!a&&!l.explicit)return null;let c=[];for(let u=o;u;u=u.parent)Ope.has(u.name)&&(c=c.concat(Dpe(l.state.doc,u)));return{options:c,from:a?o.from:l.pos,validFor:kA}}const vg=VE.define({parser:Vrt.configure({props:[ade.add({IfStatement:oU({except:/^\s*({|else\b)/}),TryStatement:oU({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:l=>l.baseIndent,SwitchBody:l=>{let o=l.textAfter,a=/^\s*\}/.test(o),c=/^\s*(case|default)\b/.test(o);return l.baseIndent+(a?0:c?1:2)*l.unit},Block:Vet({closing:"}"}),ArrowFunction:l=>l.baseIndent+l.unit,"TemplateString BlockComment":()=>null,"Statement Property":oU({except:/^{/}),JSXElement(l){let o=/^\s*<\//.test(l.textAfter);return l.lineIndent(l.node.from)+(o?0:l.unit)},JSXEscape(l){let o=/\s*\}/.test(l.textAfter);return l.lineIndent(l.node.from)+(o?0:l.unit)},"JSXOpenTag JSXSelfClosingTag":l=>l.column(l.node.from)+l.unit}),ude.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":function Wet(l){let o=l.firstChild,a=l.lastChild;return o&&o.to<a.from?{from:o.to,to:a.type.isError?l.to:a.from}:null},BlockComment:l=>({from:l.from+2,to:l.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),Qrt=vg.configure({dialect:"ts"}),jrt=vg.configure({dialect:"jsx"}),qrt=vg.configure({dialect:"jsx ts"}),Zrt="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(l=>({label:l,type:"keyword"}));function Xrt(l={}){return new Iet(l.jsx?l.typescript?qrt:jrt:l.typescript?Qrt:vg,[vg.data.of({autocomplete:Jnt(QU,Afe(zrt.concat(Zrt)))}),vg.data.of({autocomplete:$rt}),l.jsx?Krt:[]])}function kpe(l,o,a=l.length){if(!o)return"";let c=o.getChild("JSXIdentifier");return c?l.sliceString(c.from,Math.min(c.to,a)):""}const Yrt="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Krt=Si.inputHandler.of((l,o,a,c)=>{if((Yrt?l.composing:l.compositionStarted)||l.state.readOnly||o!=a||">"!=c&&"/"!=c||!vg.isActiveAt(l.state,o,-1))return!1;let{state:u}=l,h=u.changeByRange(d=>{var f,p,g;let y,{head:m}=d,v=qs(u).resolveInner(m,-1);if("JSXStartTag"==v.name&&(v=v.parent),">"==c&&"JSXFragmentTag"==v.name)return{range:Dt.cursor(m+1),changes:{from:m,insert:"><>"}};if(">"==c&&"JSXIdentifier"==v.name){if("JSXEndTag"!=(null===(p=null===(f=v.parent)||void 0===f?void 0:f.lastChild)||void 0===p?void 0:p.name)&&(y=kpe(u.doc,v.parent,m)))return{range:Dt.cursor(m+1),changes:{from:m,insert:`></${y}>`}}}else if("/"==c&&"JSXFragmentTag"==v.name){let _=v.parent,b=null==_?void 0:_.parent;if(_.from==m-1&&"JSXEndTag"!=(null===(g=b.lastChild)||void 0===g?void 0:g.name)&&(y=kpe(u.doc,null==b?void 0:b.firstChild,m))){let C=`/${y}>`;return{range:Dt.cursor(m+C.length),changes:{from:m,insert:C}}}}return{range:d}});return!h.changes.empty&&(l.dispatch(h,{userEvent:"input.type",scrollIntoView:!0}),!0)}),qU="#e06c75",kw="#abb2bf",MA="#7d8799",ZU="#d19a66",XU="#2c313a",YU="#282c34",EA="#353a42",KU="#528bff",Bpe=Si.theme({"&":{color:kw,backgroundColor:YU},".cm-content":{caretColor:KU},".cm-cursor, .cm-dropCursor":{borderLeftColor:KU},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#3E4451"},".cm-panels":{backgroundColor:"#21252b",color:kw},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutters":{backgroundColor:YU,color:MA,border:"none"},".cm-activeLineGutter":{backgroundColor:XU},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:EA},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:EA,borderBottomColor:EA},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:XU,color:kw}}},{dark:!0}),Vpe=gw.define([{tag:Be.keyword,color:"#c678dd"},{tag:[Be.name,Be.deleted,Be.character,Be.propertyName,Be.macroName],color:qU},{tag:[Be.function(Be.variableName),Be.labelName],color:"#61afef"},{tag:[Be.color,Be.constant(Be.name),Be.standard(Be.name)],color:ZU},{tag:[Be.definition(Be.name),Be.separator],color:kw},{tag:[Be.typeName,Be.className,Be.number,Be.changed,Be.annotation,Be.modifier,Be.self,Be.namespace],color:"#e5c07b"},{tag:[Be.operator,Be.operatorKeyword,Be.url,Be.escape,Be.regexp,Be.link,Be.special(Be.string)],color:"#56b6c2"},{tag:[Be.meta,Be.comment],color:MA},{tag:Be.strong,fontWeight:"bold"},{tag:Be.emphasis,fontStyle:"italic"},{tag:Be.strikethrough,textDecoration:"line-through"},{tag:Be.link,color:MA,textDecoration:"underline"},{tag:Be.heading,fontWeight:"bold",color:qU},{tag:[Be.atom,Be.bool,Be.special(Be.variableName)],color:ZU},{tag:[Be.processingInstruction,Be.string,Be.inserted],color:"#98c379"},{tag:Be.invalid,color:"#ffffff"}]),est=["editorContainer"];let JU=(()=>{class l{constructor(a,c){this.config=a,this.themesSvc=c,this.data=zS.builder(),this.checkLater=Tx.builder().setEnabled(!1),this.autocompleteType="cjs",this.textChanged=new wt,this.maxHeightStr100vh="calc(100vh - 60px - 80px)",this.maxHeightStr=this.maxHeightStr100vh,this.themes=new f0,this.language=new f0,this.tabSize=new f0,this.editor=null}set text(a){this.setText(a)}get myTheme(){return Si.theme({"&":{fontSize:"11pt",maxHeight:this.maxHeightStr},".cm-gutter,.cm-content":{minHeight:"100px"},".cm-scroller":{overflow:"auto"}})}get codemirrorData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.codemirrorData.components.length?this.codemirrorData.components[0]:null}get components(){return this.codemirrorData.components}get isRow(){return this.codemirrorData.classes.sClasses.findIndex((a,c,u)=>"clr-row"==a)>=0}ngOnInit(){}setTabSize(a){this.editor&&this.editor.dispatch({effects:this.tabSize.reconfigure(ll.tabSize.of(a))})}ngOnDestroy(){}createNewCodemirrorState(){let a=[];switch(this.autocompleteType){case"cjs":a=[{label:"class",type:"keyword"},{label:"\u043a\u043b\u0430\u0441\u0441",type:"keyword"},{label:"\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435",type:"constant",info:"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f"},{label:"\u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c",type:"method",info:"\u043c\u0435\u0442\u043e\u0434 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f"},{label:"\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",type:"constant",info:"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f"}];break;case"math":a=["integrate","integral","pow","sin","cos","tg","ctg","arcsin","arccos","arctg","arcctg","ln","exp","diff","differentiate","\u0438\u043d\u0442\u0435\u0433\u0440\u0430\u043b","\u0438\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c","\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u043d\u0430\u044f","\u0440\u0430\u0441\u043a\u0440\u044b\u0442\u044c","\u0443\u043f\u0440\u043e\u0441\u0442\u0438\u0442\u044c","\u0440\u0430\u0437\u043b\u043e\u0436\u0438\u0442\u044c"].map(h=>({label:h,type:"keyword",info:""})).concat([{label:"Pi",type:"constant",info:"\u0447\u0438\u0441\u043b\u043e \u03c0"},{label:"pi",type:"constant",info:"\u0447\u0438\u0441\u043b\u043e \u03c0"},{label:"e",type:"constant",info:"\u0447\u0438\u0441\u043b\u043e e"}])}return ll.create({extensions:[trt,this.language.of(Xrt()),this.tabSize.of(ll.tabSize.of(4)),Si.updateListener.of(h=>{h.docChanged&&this.onTextChanged()}),epe({override:[h=>{let d=h.matchBefore(/[\u0430-\u044f\u0410-\u042fa-zA-Z]+/);return h.explicit||d?{from:d?d.from:h.pos,options:a,validFor:/^[\u0430-\u044f\u0410-\u042fa-zA-Z]*$/}:null}]}),...this.themesSvc.nowIsDay()?[this.myTheme,QE(_de)]:[Bpe,this.myTheme,QE(Vpe)]],doc:this.codemirrorData.text})}ngAfterViewInit(){let a=this.createNewCodemirrorState(),c=new Si({state:a,parent:this.editorContainerRef.nativeElement});this.editor=c,this.config.post(()=>{this.checkLater.setConfig(this.config).setWaitingForSenderId(this.codemirrorData.waitingForSenderId),this.checkLater.checkEnabled()})}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return this.codemirrorData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){return{h100:this.maxHeightStr==this.maxHeightStr100vh}}getColClass(a){let c={"clr-col":!0};return a.component===l&&a.data.classes.sClasses.filter(h=>h.startsWith("clr-col-")).forEach(h=>c[h]=!0),c}onTextChanged(){this.editor&&(this.codemirrorData.text=this.editor.state.doc.toString(),this.textChanged.emit(this.codemirrorData.text))}resizeEditor(){this.editor&&this.editor.dispatch({effects:this.themes.reconfigure(this.myTheme)})}onResize(){this.resizeEditor()}recreate(){this.editor&&this.editor.setState(this.createNewCodemirrorState())}setText(a){if(this.text!=a&&(this.codemirrorData.text=a,this.editor)){this.editor.dispatch({changes:{from:0,to:this.editor.state.doc.length,insert:a}});let c=this.editor.state.doc.line(this.editor.state.doc.lines).from;this.editor.dispatch({selection:{anchor:c}}),this.editor.dispatch({effects:Si.scrollIntoView(c)})}}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Mo))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-codemirror"]],viewQuery:function(a,c){if(1&a&&ai(est,5),2&a){let u;Vt(u=zt())&&(c.editorContainerRef=u.first)}},hostBindings:function(a,c){1&a&&ee("resize",function(h){return c.onResize(h.target)},!1,Lb)},inputs:{data:"data",autocompleteType:"autocompleteType",text:"text",maxHeightStr:"maxHeightStr"},outputs:{textChanged:"textChanged"},decls:2,vars:1,consts:[[3,"ngClass"],["editorContainer",""]],template:function(a,c){1&a&&me(0,"div",0,1),2&a&&F("ngClass",c.getClasses())},directives:[ii],styles:[".h100[_ngcontent-%COMP%]{height:calc(100vh - 140px)}.b[_ngcontent-%COMP%]{display:block}.db[_ngcontent-%COMP%]{display:flex;align-content:stretch;align-items:stretch;position:relative;height:80vh;border:1px solid white}"]}),l})();function tst(l,o){1&l&&(D(0,"h5"),ne(1,"\u0420\u0435\u0448\u0435\u043d\u0438\u0435:"),k())}function nst(l,o){if(1&l&&(D(0,"div",10),D(1,"div",5),me(2,"app-d3-svg",3),k(),k()),2&l){const a=o.$implicit,c=Z();R(2),F("generator",c.generator)("d3Config",a)}}function ist(l,o){if(1&l){const a=gt();D(0,"div",2),D(1,"button",11),ee("click",function(){Le(a);const u=Z();return u.onSelectFormula(u.d3Configs[u.d3Configs.length-1])}),me(2,"clr-icon",12),ne(3," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443\u043b\u0443"),k(),k()}}let rst=(()=>{class l{constructor(a,c,u){this.uiConfig=a,this.themes=c,this.mathSvc=u,this.generator=new FM,this.d3Configs=[],this.d3ConfigFormulaText=t0.builder(),this.solving=!1}get formulaText(){return this.uiConfig.ui.calculatorFormulaText.getStringValue()}set formulaText(a){this.uiConfig.ui.calculatorFormulaText.setStringValue(a),this.onUpdateFormulaTextConfig()}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.onUpdateFormulaTextConfig()}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onMathSolved(a){let c=this.themes.nowIsDay(),u="#0e161b",h=c?"white":"lightgrey",d=c?h:u,f=c?u:h;try{this.d3Configs=[],(new MM).parse(a).forEach(m=>{let v=m.toString(),y=t0.builder().setColorBackground(d).setColorMain(f).setColorText(f).setColorLines(f).setLineWidth(1);y.addParam("\u0442\u0435\u043a\u0441\u0442",v),this.d3Configs.push(y)})}catch(p){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0444\u043e\u0440\u043c\u0443\u043b\u0435: "+a),console.log(p)}}getFormulaTextFormated(){let a=this.formulaText,c=!1,u=!1;for(let h=a.length-1;h>0;--h)switch(a.substring(h,h+1)){case".":if(c){h=0;break}c=!0;break;case";":u=!0,h=0;break;case"\r":case"\n":case"\t":case" ":break;default:h=0}return u||(a+=";"),c||(a+="."),a}getFormulaTextFormattedAndConverted(){let a=this.getFormulaTextFormated(),c=new MM,u=this.formulaText;try{let h=c.parse(a);h&&(u=h.toString())}catch(h){}return u}isFormulaTextValid(){let a=this.getFormulaTextFormated(),c=new MM;try{return!!c.parse(a)}catch(u){return!1}}onSolve(){this.solving=!0,this.mathSvc.mathSolve(this.getFormulaTextFormattedAndConverted()).then(a=>{this.solving=!1,this.onMathSolved(a&&a.success?a.text:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439.")})}onUpdateFormulaTextConfig(){let a=this.themes.nowIsDay(),c="#0e161b",u=a?"white":"lightgrey",h=a?u:c,d=a?c:u,f=t0.builder().setColorBackground(h).setColorMain(d).setColorText(d).setColorLines(d).setLineWidth(1);f.addParam("\u0442\u0435\u043a\u0441\u0442",this.getFormulaTextFormattedAndConverted()),this.d3ConfigFormulaText=f,this.d3Configs=[]}onSelectFormula(a){this.formulaText=a.params.get("\u0442\u0435\u043a\u0441\u0442")}}return l.\u0275fac=function(a){return new(a||l)(L(Xn),L(Mo),L(tg))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-calculator-view"]],inputs:{data:"data"},decls:13,vars:10,consts:[[3,"ngClass"],[3,"maxHeightStr","autocompleteType","text","textChanged"],[1,"no-print"],[3,"generator","d3Config"],[1,"clr-row","no-print"],[1,"clr-col-12"],[1,"btn","btn-primary","btn-block",3,"disabled","click"],[4,"ngIf"],["class","clr-row",4,"ngFor","ngForOf"],["class","no-print",4,"ngIf"],[1,"clr-row"],["aria-label","arrow",1,"btn","btn-link","btn-block",3,"click"],["shape","arrow"]],template:function(a,c){1&a&&(D(0,"div",0),D(1,"h5"),ne(2,"\u0424\u043e\u0440\u043c\u0443\u043b\u0430:"),k(),D(3,"app-dynamic-codemirror",1),ee("textChanged",function(h){return c.formulaText=h}),k(),D(4,"div",2),me(5,"app-d3-svg",3),k(),D(6,"div",4),D(7,"div",5),D(8,"button",6),ee("click",function(){return c.onSolve()}),ne(9,"\u0420\u0435\u0448\u0438\u0442\u044c"),k(),k(),k(),Y(10,tst,2,0,"h5",7),Y(11,nst,3,2,"div",8),Y(12,ist,4,0,"div",9),k()),2&a&&(F("ngClass",c.getClasses()),R(3),F("maxHeightStr","100px")("autocompleteType","math")("text",c.formulaText),R(2),F("generator",c.generator)("d3Config",c.d3ConfigFormulaText),R(3),F("disabled",c.solving||!c.isFormulaTextValid()),R(2),F("ngIf",c.d3Configs.length),R(1),F("ngForOf",c.d3Configs),R(1),F("ngIf",c.d3Configs.length))},directives:[ii,JU,Ule,yn,_i,Ws],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),l})();class e7{constructor(){}static builder(){return new e7}}class t7 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new t7("",null,null,e7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setId(o){return this.id=o,this}setWaitingForSenderid(o){return this.waitingForSenderId=o,this}setComponents(o){return this.components=o,this}}class n7{constructor(){this.fineText=!1,this.pageBreakBefore=!1,this.pageBreakAfter=!1,this.printOnly=!1,this.noPrint=!1,this.sClasses=[]}static builder(){return new n7}setFineText(o){return this.fineText=o,this}setPageBreakBefore(o){return this.pageBreakBefore=o,this}setPageBreakAfter(o){return this.pageBreakAfter=o,this}setPrintOnly(o){return this.printOnly=o,this}setNoPrint(o){return this.noPrint=o,this}addSClass(o){return this.sClasses.push(o),this}setSClasses(o){return this.sClasses=o,this}}class i7 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new i7("",null,null,n7.builder().setFineText(!0))}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setId(o){return this.id=o,this}setWaitingForSenderid(o){return this.waitingForSenderId=o,this}setComponents(o){return this.components=o,this}}let sst=(()=>{class l{constructor(a){this.uiConfig=a,this.codemirrorData=zS.builder(),this.editorData=i7.builder(),this.generator=new FM,this.solving=!1}get formulaText(){return this.uiConfig.ui.compilerSourceText.getStringValue()}set formulaText(a){this.uiConfig.ui.compilerSourceText.setStringValue(a),this.onUpdateSourceTextConfig()}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}ngOnInit(){this.onUpdateSourceTextConfig()}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}isFormulaTextValid(){return!0}onRun(){this.codemirrorData.click("\u0441\u0442\u0430\u0440\u0442")}onUpdateSourceTextConfig(){this.editorData.text=this.formulaText,this.codemirrorData.text=this.formulaText}onSelectFormula(a){this.formulaText=a.params.get("\u0442\u0435\u043a\u0441\u0442")}}return l.\u0275fac=function(a){return new(a||l)(L(Xn))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-compiler-view"]],inputs:{data:"data"},decls:2,vars:1,consts:[[3,"text","textChanged"]],template:function(a,c){1&a&&(D(0,"div"),D(1,"app-dynamic-codemirror",0),ee("textChanged",function(h){return c.formulaText=h}),k(),k()),2&a&&(R(1),F("text",c.formulaText))},directives:[JU],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),l})();class r7{constructor(){}static builder(){return new r7}}class s7 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new s7("",null,null,r7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setId(o){return this.id=o,this}setWaitingForSenderid(o){return this.waitingForSenderId=o,this}setComponents(o){return this.components=o,this}}let ost=(()=>{class l{constructor(a,c,u){this.uiConfig=a,this.themes=c,this.mathSvc=u}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(a){this.uiConfig.ui.calendarText.setStringValue(a)}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}}return l.\u0275fac=function(a){return new(a||l)(L(Xn),L(Mo),L(tg))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-calendar-view"]],inputs:{data:"data"},decls:2,vars:1,consts:[[3,"ngClass"]],template:function(a,c){1&a&&(D(0,"div",0),ne(1," \u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c.\n"),k()),2&a&&F("ngClass",c.getClasses())},directives:[ii],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),l})();class ast{constructor(o,a,c,u,h,d=null){this.name=o,this.description=a,this.object=c,this.fieldName=u,this.enabler=h,this.onChangeHandler=d}get value(){return this.object[this.fieldName]}set value(o){this.object[this.fieldName]!=o&&(this.object[this.fieldName]=o,this.changed())}get enabled(){return!this.enabler||!!this.enabler.value}changed(){!this.onChangeHandler||this.onChangeHandler()}}class AA{static getPasha(o,a=!0){let d=(o%19*19+15)%30,p=d+(o%4*2+o%7*4+6*d+6)%7,g=null;return g=p<=9?new Date(o,2,22+p):new Date(o,3,p-9),a&&g.setDate(g.getDate()+13),g}static getRelativePashaDayDate(o,a,c=!0){let u=AA.getPasha(o,c);return u.setDate(u.getDate()+a),u}static daysDiff(o,a){return Math.round((o.getTime()-a.getTime())/864e5)}}class w0{constructor(o,a){this.rang=o,this.text=a,this.extraRang=0}static builder(){return new w0(0,"")}setRang(o){return this.rang=o,this}setExtraRang(o){return this.extraRang=o,this}setText(o){return this.text=o,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(o=0){let a=Math.max(o,this.rang);return a>0?a:1}\u0431\u0434\u0435\u043d\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(o=0){return 6==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(o)||5==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(o)}\u043f\u043e\u043b\u0438\u0435\u043b\u0435\u0439\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(o=0){return 4==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(o)}\u0441\u043b\u0430\u0432\u043e\u0441\u043b\u043e\u0432\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(o=0){return 3==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(o)}\u0448\u0435\u0441\u0442\u0438\u0440\u0438\u0447\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(o=0){return 2==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(o)}\u0431\u0435\u0437\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u0447\u043d\u043e\u0433\u043e\u0417\u043d\u0430\u043a\u0430\u0421\u043b\u0443\u0436\u0431\u0430(o=0){return 1==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(o)||0==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(o)}\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(o=0){let a="";return this.\u0431\u0434\u0435\u043d\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(o)?a="{\u043a}":this.\u043f\u043e\u043b\u0438\u0435\u043b\u0435\u0439\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(o)?a="{\u0437}":this.\u0441\u043b\u0430\u0432\u043e\u0441\u043b\u043e\u0432\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(o)&&(a="{\u0441}"),a}}let zpe=(()=>{class l{constructor(a){this.cacheSvc=a,this.prazdniki=null,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438="\u0412\u0435\u043b\u0438\u043a\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438",this.\u043d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438="\u041d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438",this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438="\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438",this.\u0434\u043e\u041f\u0430\u0441\u0445\u0438="\u0414\u043e \u041f\u0430\u0441\u0445\u0438",this.\u043f\u043e\u0441\u043b\u0435\u041f\u0430\u0441\u0445\u0438="\u041f\u043e\u0441\u043b\u0435 \u041f\u0430\u0441\u0445\u0438",this.\u0438\u043d\u044b\u0435="\u0418\u043d\u044b\u0435",this.\u0434\u043d\u0438\u041d\u0435\u0434\u0435\u043b\u0438=["","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431","\u0432\u0441","\u0432"]}load(){return new Promise(this.prazdniki?(a,c)=>{a(!0)}:(a,c)=>{let u=this.cacheSvc.getRestPoint("/calendar/prazdniki.txt",null);this.cacheSvc.getTextRestcallUrl(u,h=>{h?(this.prazdniki=JSON.parse(h),a(!0)):c(`Cann't load file: ${u}`)})})}getPrazdnikiPoDate(a,c){let u=null,h=0;for(;h<=8;++h)if(null!=a[h]){u=a[h];break}if(u)switch(h){case 0:break;case 1:case 2:case 3:case 4:case 5:case 6:case 7:c.getDay()!==h%7&&(u=null);break;case 8:1==new Date(c.getFullYear(),1,29).getMonth()||(u=null);break;default:throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0430.")}return u?u.map(d=>w0.builder().setRang(d[0]).setText(d[1])):[]}getPrazdniki(a){return a?a.map(c=>w0.builder().setRang(c[0]).setText(c[1])):[]}getPrazdnikiFor(a,c,u){let h=new Date(a,c,u-13),d=new Date(a,c,u),f=AA.getPasha(a),p=AA.daysDiff(d,f),g=[[100,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u043d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438],[0,this.\u043d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438],[0,this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u0438\u043d\u044b\u0435]].flatMap(m=>{let v=+m[0],b=this.prazdniki[m[1]][h.getMonth()];if(null==b)return[];let C=b[h.getDate()];return null==C?[]:this.getPrazdnikiPoDate(C,d).map(S=>S.setExtraRang(v))}).concat([[100,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u0434\u043e\u041f\u0430\u0441\u0445\u0438],[0,this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u0434\u043e\u041f\u0430\u0441\u0445\u0438]].flatMap(m=>{let v=+m[0];if(p>=0)return[];let b=this.prazdniki[m[1]][-p];return null==b?[]:this.getPrazdniki(b).map(C=>C.setExtraRang(v))})).concat([[100,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u043f\u043e\u0441\u043b\u0435\u041f\u0430\u0441\u0445\u0438],[0,this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u043f\u043e\u0441\u043b\u0435\u041f\u0430\u0441\u0445\u0438]].flatMap(m=>{let v=+m[0];if(p<0)return[];let b=this.prazdniki[m[1]][p];return null==b?[]:this.getPrazdniki(b).map(C=>C.setExtraRang(v))}));return g.sort((m,v)=>v.rang+v.extraRang-m.rang-m.extraRang),g}}return l.\u0275fac=function(a){return new(a||l)(Ae(Df))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class o7{constructor(){}static builder(){return new o7}}class IA extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.prazdniki=[]}static builder(){return new IA("",null,null,o7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setPrazdniki(o){return this.prazdniki=o,this}}class r1{constructor(o,a,c,u,h,d){this.text=o,this.time=a,this.morningService=c,this.requiredService=u,this.selectedClerics=h,this.ispovedClerics=d}static builder(){return new r1("","",!0,!1,"","")}setText(o){return this.text=o,this}setTime(o){return this.time=o,this}setMorningService(o){return this.morningService=o,this}setRequiredService(o){return this.requiredService=o,this}getNormalizedText(){return this.getNormalizedManualText(this.text)}getNormalizedTime(){return this.getNormalizedManualText(this.time)}getNormalizedManualText(o){let a=o;return this.morningService||a.includes("{\u0432}")||(a+="{\u0432}"),this.requiredService&&(a.includes("{\u0442}")||(a+="{\u0442}")),a}setSelectedClerics(o){return this.selectedClerics=o,this}setIspovedClerics(o){return this.ispovedClerics=o,this}}class a7{constructor(){}static builder(){return new a7}}class T0 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.services=[]}static builder(){return new T0("",null,null,a7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setServices(o){return this.services=o,this}}class Mw{constructor(o,a){this.name=o,this.week=a}static builder(){return new Mw("",[!1,!1,!1,!1,!1,!1,!1])}setName(o){return this.name=o,this}setWeek(o){return this.week=o,this}}class l7{constructor(){}static builder(){return new l7}}class PA extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.clerics=[]}static builder(){return new PA("",null,null,l7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setClerics(o){return this.clerics=o,this}}let Upe=(()=>{class l{constructor(a,c,u){this.http=a,this.config=c,this.cacheSvc=u,this.names=[],this.restPoint="/calendar"}getRestPoint(a,c,u=null){return kr.merge(kr.merge(c||this.config.serviceAPIHost,u||this.restPoint),a)}getNames(a,c="calendar",u=null){const h={params:{}};return new Promise((d,f)=>{this.http.get(this.getRestPoint("/names",a,u),h).pipe(rr(Ni.handleError)).subscribe({next:p=>d(p),error:p=>f(p)})})}getSource(a,c){const u={params:{_name:a}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/source",c),u).pipe(rr(Ni.handleError)).subscribe({next:f=>h(f),error:f=>d(f)})})}getTextStr(a,c,u,h){let d=""+u;const f=kr.merge(kr.merge(a,c),d);this.cacheSvc.getText(f,h)}}return l.\u0275fac=function(a){return new(a||l)(Ae(sd),Ae(an),Ae(Df))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class c7{constructor(){}static builder(){return new c7}}class u7 extends Ei{constructor(o,a,c,u){super(o,a,c),this.config=u,this.useDefault=!1,this.object={},this.fieldName="name",this.description="\u0418\u043c\u044f",this.description2="",this.shapes=[],this.readonly=!1,this.command=null}static builder(){return new u7("",null,null,c7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}setUseDefault(o){return this.useDefault=o,this}setObject(o){return this.object=o,this}setFieldName(o){return this.fieldName=o,this}setDescription(o){return this.description=o,this}setDescription2(o){return this.description2=o,this}setShapes(o){return this.shapes=o,this}setReadonly(o){return this.readonly=o,this}setCommand(o){return this.command=o,this}}function lst(l,o){if(1&l){const a=gt();D(0,"button",4),ee("click",function(u){const d=Le(a).$implicit;return Z(2).onCommand(u,d)}),me(1,"clr-icon"),k()}if(2&l){const a=o.$implicit;R(1),et("shape",a)}}function cst(l,o){if(1&l){const a=gt();D(0,"clr-input-container"),D(1,"label"),ne(2),Y(3,lst,2,1,"button",2),k(),D(4,"input",3),ee("ngModelChange",function(u){return Le(a),Z().objectFieldName=u}),k(),k()}if(2&l){const a=Z();R(2),en(a.description),R(1),F("ngForOf",a.shapes),R(1),F("readOnly",a.readonly)("placeholder",a.description2)("name",a.fieldName)("ngModel",a.objectFieldName)}}function ust(l,o){if(1&l){const a=gt();D(0,"button",4),ee("click",function(u){const d=Le(a).$implicit;return Z(2).onCommand(u,d)}),me(1,"clr-icon"),k()}if(2&l){const a=o.$implicit;R(1),et("shape",a)}}function hst(l,o){if(1&l){const a=gt();D(0,"clr-input-container",5),D(1,"label"),ne(2),Y(3,ust,2,1,"button",2),k(),D(4,"input",3),ee("ngModelChange",function(u){return Le(a),Z().objectFieldName=u}),k(),k()}if(2&l){const a=Z();R(2),vi("",a.description," "),R(1),F("ngForOf",a.shapes),R(1),F("readOnly",a.readonly)("placeholder",a.description2)("name",a.fieldName)("ngModel",a.objectFieldName)}}let Hpe=(()=>{class l{constructor(a){this.config=a,this.data=u7.builder(),this.changed=new wt}get textEditorData(){return this.data}get useDefault(){return this.textEditorData.useDefault}set useDefault(a){this.textEditorData.setUseDefault(a)}get description(){return this.textEditorData.description}set description(a){this.textEditorData.setDescription(a)}get description2(){return this.textEditorData.description2?this.textEditorData.description2:this.textEditorData.description}set description2(a){this.textEditorData.setDescription2(a)}get shapes(){return this.textEditorData.shapes}set shapes(a){this.textEditorData.setShapes(a)}get readonly(){return this.textEditorData.readonly}set readonly(a){this.textEditorData.setReadonly(a)}get object(){return this.textEditorData.object}set object(a){this.textEditorData.setObject(a)}get fieldName(){return this.textEditorData.fieldName}set fieldName(a){this.textEditorData.setFieldName(a)}set command(a){this.textEditorData.setCommand(a)}get objectFieldName(){return this.object[this.fieldName]}set objectFieldName(a){this.object[this.fieldName]=a,this.onChanged()}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onCommand(a,c){this.textEditorData.command&&this.textEditorData.command(this.object,this.fieldName,c),a.stopPropagation()}onChanged(){this.changed.emit(this.objectFieldName)}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-text-editor"]],inputs:{data:"data",useDefault:"useDefault",description:"description",description2:"description2",shapes:"shapes",readonly:"readonly",object:"object",fieldName:"fieldName",command:"command"},outputs:{changed:"changed"},decls:2,vars:2,consts:[[4,"ngIf"],["class","",4,"ngIf"],["class","btn btn-link btn-sx",3,"click",4,"ngFor","ngForOf"],["clrInput","",3,"readOnly","placeholder","name","ngModel","ngModelChange"],[1,"btn","btn-link","btn-sx",3,"click"],[1,""]],template:function(a,c){1&a&&(Y(0,cst,5,6,"clr-input-container",0),Y(1,hst,5,6,"clr-input-container",1)),2&a&&(F("ngIf",c.useDefault),R(1),F("ngIf",!c.useDefault))},directives:[yn,Oy,ss,_i,Ws,Sl,Jx,No,Co],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class h7{constructor(){}static builder(){return new h7}}class d7 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.week=[]}static builder(){return new d7("",null,null,h7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setWeek(o){return this.week=o,this}}const $pe=function(l,o){return{btn:!0,"btn-primary":l,darkBtn:o}};function dst(l,o){if(1&l){const a=gt();D(0,"button",1),ee("click",function(u){const d=Le(a).index;return Z().onToggleWeekIndex(u,d)}),me(1,"clr-icon"),ne(2),k()}if(2&l){const a=o.$implicit,c=o.index,u=Z();F("ngClass",ps(3,$pe,a,!a)),R(1),et("shape",a?"check":"times"),R(1),vi(" ",u.dayNames[c],"")}}let fst=(()=>{class l{constructor(){this.data=d7.builder(),this.weekChanged=new wt,this.dayNames=["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"]}get week(){return this.weekData.week}set week(a){this.weekData.week=a}get weekData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){for(;this.week.length<7;)this.week.push(!1)}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onToggleWeekIndex(a,c){a.stopPropagation(),this.week[c]=!this.week[c],this.weekChanged.emit(this.week)}onToggleAllDays(a){a.stopPropagation();let c=this.isAllDays();for(let u=0;u<this.week.length;u++)this.week[u]=!c;this.weekChanged.emit(this.week)}isAllDays(){return this.week.reduce((c,u)=>c&&u,!0)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-scheduler-week"]],inputs:{data:"data",week:"week"},outputs:{weekChanged:"weekChanged"},decls:4,vars:6,consts:[[3,"ngClass"],[3,"ngClass","click"],["shape","lightbulb"],[3,"ngClass","click",4,"ngFor","ngForOf"]],template:function(a,c){1&a&&(D(0,"div",0),D(1,"button",1),ee("click",function(h){return c.onToggleAllDays(h)}),me(2,"clr-icon",2),k(),Y(3,dst,3,6,"button",3),k()),2&a&&(F("ngClass",c.getClasses()),R(1),F("ngClass",ps(3,$pe,c.isAllDays(),!c.isAllDays())),R(2),F("ngForOf",c.week))},directives:[ii,Ws,_i],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),l})();const pst=function(){return["add-text","upload","download","times"]};function gst(l,o){if(1&l){const a=gt();D(0,"div",15),D(1,"div",16),D(2,"app-dynamic-text-editor",17),ee("changed",function(u){return Le(a),Z().onTextChanged(u)}),k(),k(),D(3,"app-dynamic-scheduler-week",18),ee("weekChanged",function(u){return Le(a),Z().onWeekChanged(u)}),k(),k()}if(2&l){const a=o.$implicit,c=Z();R(2),F("object",a)("fieldName","name")("description","\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a")("shapes",bl(6,pst))("command",c.onCommandServiceTogglePtr),R(1),F("week",a.week)}}function mst(l,o){if(1&l){const a=gt();D(0,"button",19),ee("click",function(){return Le(a),Z().onSaveServices()}),me(1,"clr-icon",20),ne(2," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),k()}2&l&&F("clrLoading",Z().submitBtnState)}function vst(l,o){if(1&l&&(D(0,"p"),ne(1),k()),2&l){const a=Z();R(1),vi("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u043c\u044f: ",a.modalDeleteService.name," ?")}}let yst=(()=>{class l{constructor(a,c,u,h){this.uiConfig=a,this.config=c,this.themes=u,this.mathSvc=h,this.autoSave=!1,this.onSave=new wt,this.onClear=new wt,this.submitBtnState=ms.DEFAULT,this.modalClearServicesFlag=!1,this.modalDeleteServicesFlag=!1,this.modalDeleteService=null,this.onCommandServiceTogglePtr=(d,f,p)=>this.onCommandServiceToggle(d,f,p)}get clerics(){return this.clericsData.clerics}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(a){this.uiConfig.ui.calendarText.setStringValue(a)}get clericsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onCommandServiceToggle(a,c,u){if("name"==c)switch(u){case"upload":this.moveUp(a);break;case"download":this.moveDown(a);break;case"times":this.requestDeleteService(a);break;case"add-text":this.addNewAfterService(a)}}onAddNewService(){this.clerics.push(Mw.builder()),this.startAutoSave()}onSaveServices(){this.onSave.emit(this.clericsData.clerics),this.submitBtnState=ms.LOADING,this.config.post(()=>{this.submitBtnState=ms.DEFAULT},2e3)}moveUp(a){let c=this.clerics.indexOf(a);c>0&&(this.clerics[c]=this.clerics[c-1],this.clerics[c-1]=a,this.startAutoSave())}moveDown(a){let c=this.clerics.indexOf(a);c+1<this.clerics.length&&(this.clerics[c]=this.clerics[c+1],this.clerics[c+1]=a,this.startAutoSave())}deleteCleric(a){if(null==a)return;let c=this.clerics.indexOf(a);c>=0&&(this.clerics.splice(c,1),this.startAutoSave())}addNewAfterService(a){let c=this.clerics.indexOf(a);c>=0&&c<this.clerics.length&&(this.clerics.splice(c+1,0,Mw.builder()),this.startAutoSave())}onClearServices(){this.onClear.emit(this.clericsData.clerics),this.startAutoSave()}requestDeleteService(a){this.modalDeleteService=a,this.modalDeleteServicesFlag=!0}startAutoSave(){this.autoSave&&this.onSave.emit(this.clerics)}onTextChanged(a){this.startAutoSave()}onWeekChanged(a){this.startAutoSave()}}return l.\u0275fac=function(a){return new(a||l)(L(Xn),L(an),L(Mo),L(tg))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-scheduler-clerics"]],inputs:{data:"data",autoSave:"autoSave"},outputs:{onSave:"onSave",onClear:"onClear"},decls:31,vars:6,consts:[[3,"ngClass"],["class","clr-row cursor",4,"ngFor","ngForOf"],[1,"top-space"],[1,"btn","btn-primary",3,"click"],["shape","add-text"],["class","btn btn-success",3,"clrLoading","click",4,"ngIf"],[1,"btn","btn-danger",3,"click"],["shape","flame"],[1,"no-print",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[4,"ngIf"],[1,"clr-row","cursor"],[1,"clr-col-12","bottom-space"],[3,"object","fieldName","description","shapes","command","changed"],[3,"week","weekChanged"],[1,"btn","btn-success",3,"clrLoading","click"],["shape","floppy"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,gst,4,7,"div",1),D(2,"div",2),D(3,"button",3),ee("click",function(){return c.onAddNewService()}),me(4,"clr-icon",4),ne(5," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),k(),Y(6,mst,3,1,"button",5),D(7,"button",6),ee("click",function(){return c.modalClearServicesFlag=!0}),me(8,"clr-icon",7),ne(9," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),k(),k(),k(),D(10,"clr-modal",8),ee("clrModalOpenChange",function(h){return c.modalClearServicesFlag=h}),D(11,"h3",9),ne(12,"\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432"),k(),D(13,"div",10),D(14,"p"),ne(15,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0435\u0441\u044c \u0441\u043f\u0438\u0441\u043e\u043a?"),k(),k(),D(16,"div",11),D(17,"button",12),ee("click",function(){return c.onClearServices(),c.modalClearServicesFlag=!1}),ne(18,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),k(),D(19,"button",13),ee("click",function(){return c.modalClearServicesFlag=!1}),ne(20,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),k(),k(),k(),D(21,"clr-modal",8),ee("clrModalOpenChange",function(h){return c.modalDeleteServicesFlag=h}),D(22,"h3",9),ne(23,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u043d\u0438 \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0430"),k(),D(24,"div",10),Y(25,vst,2,1,"p",14),k(),D(26,"div",11),D(27,"button",12),ee("click",function(){return c.deleteCleric(c.modalDeleteService),c.modalDeleteServicesFlag=!1}),ne(28,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),k(),D(29,"button",13),ee("click",function(){return c.modalDeleteServicesFlag=!1}),ne(30,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),k(),k(),k()),2&a&&(F("ngClass",c.getClasses()),R(1),F("ngForOf",c.clerics),R(5),F("ngIf",!c.autoSave),R(4),F("clrModalOpen",c.modalClearServicesFlag),R(11),F("clrModalOpen",c.modalDeleteServicesFlag),R(4),F("ngIf",c.modalDeleteService))},directives:[ii,_i,Hpe,fst,Ws,yn,lN,oN,hf,df],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),l})();class f7{constructor(){}static builder(){return new f7}}class p7 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.rang=1}static builder(){return new p7("",null,null,f7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setRang(o){return this.rang=o,this}}class g7{constructor(){this.printOnly=!1}static builder(){return new g7}setPrintOnly(o){return this.printOnly=o,this}}class m7 extends Ei{constructor(o,a,c,u,h,d){super("",u,h),this.genName=o,this.svgWidth=a,this.svgHeight=c,this.classes=d,this.rang=0}static builder(){return new m7("",512,512,null,null,g7.builder())}setGenName(o){return this.genName=o,this}setSvgRangSignWidth(o){return this.svgWidth=o,this}setSvgRangSignHeight(o){return this.svgHeight=o,this}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}updateClasses(o){return o(this.classes),this}setRang(o){return this.rang=o,this}}function _st(l,o){1&l&&me(0,"img",1),2&l&&F("src","./imsvg/"+(7-Z().rang)+".svg",Rb)}let bst=(()=>{class l{constructor(a){this.config=a,this.data=m7.builder()}get svgData(){return this.data}get rang(){return this.svgData.rang}set rang(a){this.svgData.rang=a}get text(){return this.svgData&&this.svgData.text?this.svgData.text:""}get genName(){return this.svgData&&this.svgData.genName?this.svgData.genName:"Default"}get svgWidth(){return this.svgData&&this.svgData.svgWidth?this.svgData.svgWidth:512}get svgHeight(){return this.svgData&&this.svgData.svgHeight?this.svgData.svgHeight:512}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{"print-only":this.svgData.classes.printOnly}}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-svg-rang-sign"]],inputs:{data:"data",rang:"rang"},decls:1,vars:1,consts:[["width","16px","height","16px",3,"src",4,"ngIf"],["width","16px","height","16px",3,"src"]],template:function(a,c){1&a&&Y(0,_st,1,1,"img",0),2&a&&F("ngIf",c.rang>1)},directives:[yn],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();const xst=function(l,o){return{btn:!0,"btn-primary":l,darkBtn:o}};function Cst(l,o){if(1&l){const a=gt();D(0,"button",2),ee("click",function(u){const d=Le(a).$implicit;return Z().onSelectRang(u,d)}),me(1,"app-dynamic-svg-rang-sign",3),k()}if(2&l){const a=o.$implicit,c=Z();F("ngClass",ps(2,xst,c.isSelectedRang(a),!c.isSelectedRang(a))),R(1),F("rang",a.rang)}}class yg{constructor(o){this.rang=o}static builder(){return new yg(0)}setRang(o){return this.rang=o,this}}let Qpe=(()=>{class l{constructor(){this.data=p7.builder(),this.rangChanged=new wt,this.rangs=[yg.builder().setRang(6),yg.builder().setRang(5),yg.builder().setRang(4),yg.builder().setRang(3),yg.builder().setRang(2),yg.builder().setRang(1)],this.currentRang=this.rangs[0]}set rang(a){let c=this.rangs.find(u=>u.rang==a);this.currentRang=c||null}get rangsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}isSelectedRang(a){return this.currentRang===a}onSelectRang(a,c){a.stopPropagation(),this.currentRang=c,this.rangChanged.emit(c.rang)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-scheduler-rangs"]],inputs:{data:"data",rang:"rang"},outputs:{rangChanged:"rangChanged"},decls:2,vars:2,consts:[[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"rang"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,Cst,2,5,"button",1),k()),2&a&&(F("ngClass",c.getClasses()),R(1),F("ngForOf",c.rangs))},directives:[ii,_i,bst],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),l})();class v7{constructor(){}static builder(){return new v7}}class y7 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.clerics=[]}static builder(){return new y7("",null,null,v7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setClerics(o){return this.clerics=o,this}}const jpe=function(l,o){return{btn:!0,"btn-primary":l,darkBtn:o}};function Sst(l,o){if(1&l){const a=gt();D(0,"button",1),ee("click",function(u){const d=Le(a).$implicit;return Z().onToggleClericIndex(u,d)}),ne(1),k()}if(2&l){const a=o.$implicit,c=Z();F("ngClass",ps(2,jpe,c.isClericSelected(a),!c.isClericSelected(a))),R(1),en(a.name)}}let wst=(()=>{class l{constructor(){this.data=y7.builder(),this.info="\u0421\u043b\u0443\u0436\u0438\u0442",this.clericsChanged=new wt}get clerics(){return this.selClericsData.clerics}set clerics(a){this.selClericsData.clerics=a}get selClericsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}set text(a){this.data&&(this.data.text=a)}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onToggleClericIndex(a,c){a.stopPropagation();let u=this.text.split(","),h=u.filter(f=>f==c.name).length>0,d=u.filter(f=>f!=c.name).join(",");h||(d&&(d+=","),d+=c.name),this.selClericsData.text=d,this.clericsChanged.emit(this.selClericsData.text)}isClericSelected(a){return this.text.split(",").filter(c=>c==a.name).length>0}onToggleAllClerics(a){a.stopPropagation(),this.text=this.text?"":this.clerics.map(c=>c.name).join(","),this.clericsChanged.emit(this.selClericsData.text)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-scheduler-select-clerics"]],inputs:{data:"data",info:"info",clerics:"clerics",text:"text"},outputs:{clericsChanged:"clericsChanged"},decls:7,vars:7,consts:[[3,"ngClass"],[3,"ngClass","click"],["shape","lightbulb"],[3,"ngClass","click",4,"ngFor","ngForOf"]],template:function(a,c){1&a&&(D(0,"div",0),D(1,"h6"),D(2,"b"),ne(3),k(),k(),D(4,"button",1),ee("click",function(h){return c.onToggleAllClerics(h)}),me(5,"clr-icon",2),k(),Y(6,Sst,2,5,"button",3),k()),2&a&&(F("ngClass",c.getClasses()),R(3),en(c.info),R(1),F("ngClass",ps(4,jpe,!!c.text,!c.text)),R(2),F("ngForOf",c.clerics))},directives:[ii,Ws,_i],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),l})();function Tst(l,o){if(1&l){const a=gt();D(0,"app-dynamic-scheduler-rangs",16),ee("rangChanged",function(u){return Le(a),Z().onSelectRang(u)}),k()}2&l&&F("rang",Z().currentRang)}function Ost(l,o){if(1&l){const a=gt();D(0,"app-dynamic-scheduler-select-clerics",21),ee("clericsChanged",function(u){Le(a);const h=Z().$implicit;return Z().onClericsChanges(u,h)}),k()}if(2&l){const a=Z().$implicit,c=Z();F("text",a.selectedClerics)("clerics",c.clerics)}}const Dst=function(l,o){return{"clr-col-8":l,"clr-col-12":o}},qpe=function(){return["add-text","upload","download","times"]},kst=function(l,o){return{"clr-col-4":l,"clr-col-12":o}},Zpe=function(l,o){return[l,o]};function Mst(l,o){if(1&l){const a=gt();D(0,"div",17),D(1,"div",0),D(2,"app-dynamic-text-editor",18),ee("changed",function(u){return Le(a),Z().onTextChanged(u)}),k(),k(),D(3,"div",0),D(4,"app-dynamic-text-editor",18),ee("changed",function(u){return Le(a),Z().onTextChanged(u)}),k(),k(),D(5,"div",19),Y(6,Ost,1,2,"app-dynamic-scheduler-select-clerics",20),k(),k()}if(2&l){const a=o.$implicit,c=Z();R(1),F("ngClass",ps(13,Dst,!c.isVertical(),c.isVertical())),R(1),F("object",a)("fieldName","text")("description","\u0421\u043b\u0443\u0436\u0431\u0430")("shapes",bl(16,qpe))("command",c.onCommandServiceTogglePtr),R(1),F("ngClass",ps(17,kst,!c.isVertical(),c.isVertical())),R(1),F("object",a)("fieldName","time")("description","\u0412\u0440\u0435\u043c\u044f")("shapes",ps(20,Zpe,a.morningService?"sun":"moon",a.requiredService?"bell":"check"))("command",c.onCommandServiceTogglePtr),R(2),F("ngIf",c.clerics)}}function Est(l,o){if(1&l){const a=gt();D(0,"app-dynamic-scheduler-select-clerics",21),ee("clericsChanged",function(u){Le(a);const h=Z().$implicit;return Z().onClericsChanges(u,h)}),k()}if(2&l){const a=Z().$implicit,c=Z();F("text",a.selectedClerics)("clerics",c.clerics)}}const Xpe=function(){return{"clr-col-12":!0}};function Ast(l,o){if(1&l){const a=gt();D(0,"div",22),D(1,"div",0),D(2,"app-dynamic-text-editor",18),ee("changed",function(u){return Le(a),Z().onTextChanged(u)}),k(),k(),D(3,"div",0),D(4,"app-dynamic-text-editor",18),ee("changed",function(u){return Le(a),Z().onTextChanged(u)}),k(),k(),D(5,"div",19),Y(6,Est,1,2,"app-dynamic-scheduler-select-clerics",20),k(),k()}if(2&l){const a=o.$implicit,c=Z();R(1),F("ngClass",bl(13,Xpe)),R(1),F("object",a)("fieldName","text")("description","\u0421\u043b\u0443\u0436\u0431\u0430")("shapes",bl(14,qpe))("command",c.onCommandServiceTogglePtr),R(1),F("ngClass",bl(15,Xpe)),R(1),F("object",a)("fieldName","time")("description","\u0412\u0440\u0435\u043c\u044f")("shapes",ps(16,Zpe,a.morningService?"sun":"moon",a.requiredService?"bell":"success-standard"))("command",c.onCommandServiceTogglePtr),R(2),F("ngIf",c.clerics)}}function Ist(l,o){if(1&l){const a=gt();D(0,"button",23),ee("click",function(){return Le(a),Z().onSaveServices()}),me(1,"clr-icon",24),ne(2," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),k()}2&l&&F("clrLoading",Z().submitBtnState)}function Pst(l,o){if(1&l){const a=gt();D(0,"button",25),ee("click",function(){return Le(a),Z().modalClearServicesFlag=!0}),me(1,"clr-icon",26),ne(2," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),k()}}function Rst(l,o){if(1&l&&(D(0,"div",27),D(1,"div",28),ne(2),k(),D(3,"div",29),ne(4),k(),k()),2&l){const a=Z();R(2),en(a.modalDeleteService.text),R(2),en(a.modalDeleteService.time)}}let Fst=(()=>{class l{constructor(a,c,u,h){this.uiConfig=a,this.config=c,this.themes=u,this.mathSvc=h,this.data=T0.builder(),this.clerics=null,this.vertical=!1,this.singleRang=!1,this.autoSave=!1,this.clearBtn=!0,this.onSave=new wt,this.onClear=new wt,this.onReset=new wt,this.submitBtnState=ms.DEFAULT,this.currentRang=1,this.modalClearServicesFlag=!1,this.modalDeleteServicesFlag=!1,this.modalDeleteService=null,this.onCommandServiceTogglePtr=(d,f,p)=>this.onCommandServiceToggle(d,f,p)}get services(){let a=this.currentRang-1;return null==this.servicesData.services[a]&&(this.servicesData.services[a]=[]),this.servicesData.services[a]}set services(a){this.servicesData.services[this.currentRang-1]=a}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(a){this.uiConfig.ui.calendarText.setStringValue(a)}get servicesData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}isVertical(){return this.vertical}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onCommandServiceToggle(a,c,u){if("time"==c)switch(u){case"moon":case"sun":a.morningService=!a.morningService;break;case"bell":case"check":a.requiredService=!a.requiredService}else if("text"==c)switch(u){case"upload":this.moveUp(a);break;case"download":this.moveDown(a);break;case"times":this.requestDeleteService(a);break;case"add-text":this.addNewAfterService(a)}this.onTextChanged("")}onSelectRang(a){this.currentRang=a}onAddNewService(){this.services.push(r1.builder()),this.onTextChanged("")}onSaveServices(){this.onSave.emit(this.servicesData.services),this.submitBtnState=ms.LOADING,this.config.post(()=>{this.submitBtnState=ms.DEFAULT},2e3)}moveUp(a){let c=this.services.indexOf(a);c>0&&(this.services[c]=this.services[c-1],this.services[c-1]=a)}moveDown(a){let c=this.services.indexOf(a);c+1<this.services.length&&(this.services[c]=this.services[c+1],this.services[c+1]=a)}deleteService(a){if(null==a)return;let c=this.services.indexOf(a);c>=0&&this.services.splice(c,1),this.onTextChanged("")}addNewAfterService(a){let c=this.services.indexOf(a);c>=0&&c<this.services.length&&this.services.splice(c+1,0,r1.builder())}onResetServices(){this.onReset.emit(this.servicesData.services)}onClearServices(){this.onClear.emit(this.servicesData.services)}requestDeleteService(a){this.modalDeleteService=a,this.modalDeleteServicesFlag=!0}onClericsChanges(a,c){c.setSelectedClerics(a),this.onTextChanged("")}onTextChanged(a){this.autoSave&&this.onSaveServices()}}return l.\u0275fac=function(a){return new(a||l)(L(Xn),L(an),L(Mo),L(tg))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-scheduler-services"]],inputs:{data:"data",clerics:"clerics",vertical:"vertical",singleRang:"singleRang",autoSave:"autoSave",clearBtn:"clearBtn",services:"services"},outputs:{onSave:"onSave",onClear:"onClear",onReset:"onReset"},decls:35,vars:9,consts:[[3,"ngClass"],[3,"rang","rangChanged",4,"ngIf"],["class","clr-row cursor clr-hidden-xs-down",4,"ngFor","ngForOf"],["class","clr-row cursor clr-hidden-sm-up",4,"ngFor","ngForOf"],[1,"top-space"],[1,"btn","btn-primary",3,"click"],["shape","add-text"],["class","btn btn-success",3,"clrLoading","click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"no-print",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["class","clr-row",4,"ngIf"],[3,"rang","rangChanged"],[1,"clr-row","cursor","clr-hidden-xs-down"],[3,"object","fieldName","description","shapes","command","changed"],[1,"clr-col-12","top-space"],[3,"text","clerics","clericsChanged",4,"ngIf"],[3,"text","clerics","clericsChanged"],[1,"clr-row","cursor","clr-hidden-sm-up"],[1,"btn","btn-success",3,"clrLoading","click"],["shape","floppy"],[1,"btn","btn-danger",3,"click"],["shape","flame"],[1,"clr-row"],[1,"clr-col-8"],[1,"clr-col-4"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,Tst,1,1,"app-dynamic-scheduler-rangs",1),Y(2,Mst,7,23,"div",2),Y(3,Ast,7,19,"div",3),D(4,"div",4),D(5,"button",5),ee("click",function(){return c.onAddNewService()}),me(6,"clr-icon",6),ne(7," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),k(),Y(8,Ist,3,1,"button",7),Y(9,Pst,3,0,"button",8),k(),k(),D(10,"clr-modal",9),ee("clrModalOpenChange",function(h){return c.modalClearServicesFlag=h}),D(11,"h3",10),ne(12,"\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0441\u043b\u0443\u0436\u0431"),k(),D(13,"div",11),D(14,"p"),ne(15,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0441\u043b\u0443\u0436\u0431\u044b \u0432\u0441\u0435\u0445 \u0437\u043d\u0430\u043a\u043e\u0432?"),k(),k(),D(16,"div",12),D(17,"button",13),ee("click",function(){return c.onResetServices(),c.modalClearServicesFlag=!1}),ne(18,"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"),k(),D(19,"button",13),ee("click",function(){return c.onClearServices(),c.modalClearServicesFlag=!1}),ne(20,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),k(),D(21,"button",14),ee("click",function(){return c.modalClearServicesFlag=!1}),ne(22,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),k(),k(),k(),D(23,"clr-modal",9),ee("clrModalOpenChange",function(h){return c.modalDeleteServicesFlag=h}),D(24,"h3",10),ne(25,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u043b\u0443\u0436\u0431\u044b"),k(),D(26,"div",11),D(27,"p"),ne(28,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043b\u0443\u0436\u0431\u0443?"),k(),Y(29,Rst,5,2,"div",15),k(),D(30,"div",12),D(31,"button",13),ee("click",function(){return c.deleteService(c.modalDeleteService),c.modalDeleteServicesFlag=!1}),ne(32,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),k(),D(33,"button",14),ee("click",function(){return c.modalDeleteServicesFlag=!1}),ne(34,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),k(),k(),k()),2&a&&(F("ngClass",c.getClasses()),R(1),F("ngIf",!c.singleRang),R(1),F("ngForOf",c.services),R(1),F("ngForOf",c.services),R(5),F("ngIf",!c.autoSave),R(1),F("ngIf",c.clearBtn),R(1),F("clrModalOpen",c.modalClearServicesFlag),R(13),F("clrModalOpen",c.modalDeleteServicesFlag),R(6),F("ngIf",c.modalDeleteService))},directives:[ii,yn,Qpe,_i,Hpe,wst,Ws,lN,oN,hf,df],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),l})();class Ew{constructor(o,a,c,u){this.open=o,this.text=a,this.color=c,this.tag=u}setOpen(o){return this.open=o,this}setText(o){return this.text=o,this}setColor(o){return this.color=o,this}setTag(o){return this.tag=o,this}static builder(){return new Ew(!1,"","",null)}}let Kpe=(()=>{class l{constructor(a){this.uiConfig=a,this.calendarScheduler=[],this.calendarIntervals=""}saveMonth(a,c,u){let h=[],d=f=>{let p="";return"blue"==f?p="B":"green"==f?p="G":"red"==f&&(p="R"),p};for(let f=0;f<1;f++){let p=a[f];for(let g=0;g<p.length;g++){let m=p[g];if(m.text){let v=d(m.color);h[32+g]=v}}}for(let f=1;f<a.length;f++){let p=a[f];for(let g=0;g<p.length;g++){let m=p[g];if(m.text){let v=d(m.color);h[+m.text]=v}}}this.calendarScheduler[c]||(this.calendarScheduler[c]=[]),this.calendarScheduler[c][u]=h,this.forceSave()}getMonthsDaysCount(a,c){return new Date(a,(c+1)%12,0).getDate()}createMonth(a,c){let u=_=>{let b="";return _?"R"==_?b="red":"G"==_?b="green":"B"==_&&(b="blue"):b="",b},h=[],d=this.getMonthsDaysCount(c,a),f=this.calendarScheduler[c],p=f?f[a]:[];p||(p=[]);let g=[],v=7;h.push(["\u041f","\u0412","\u0421","\u0427","\u041f","\u0421","\u0412"].map((_,b)=>Ew.builder().setText(_).setColor((_=>{let b=p[_],C="";return b&&(C=u(b)),C})(32+b))));let y=1;{let b=new Date(c,a,1).getDay();0==b&&(b+=7);for(let C=1;C<b;C++)g.push(Ew.builder());y=b-1,v=Math.ceil((d+y)/7)+2}for(let _=1;_<=d;_+=7)for(let b=0;b<7;b++)if(_+b<=d){let x=new Date(c,a,_+b).getDay();0==x&&(x+=7);let S=p[_+b];S=u(S),g.push(Ew.builder().setText(""+(_+b)).setColor(S)),7==g.length&&(h.push(g),g=[])}return g.length&&h.push(g),h}dateLessOrEqual(a,c,u,h,d,f){return a<h||!(a>h)&&(c<d||!(c>d)&&u<f)}isInInterval(a,c,u){let h=c+1,d=this.calendarIntervals.split("\n"),f=!1;return d.forEach(p=>{try{let g=p.split("\t");if(g.length>=3){let m=g[1].split(/[\\/\.\-]/),v=g[2].split(/[\\/\.\-]/);if(this.dateLessOrEqual(+m[2],+m[1],+m[0],+v[2],+v[1],+v[0])){let y=this.dateLessOrEqual(+m[2],+m[1],+m[0],a,h,u),_=this.dateLessOrEqual(a,h,u,+m[2],+m[1],+m[0]),b=this.dateLessOrEqual(a,h,u,+v[2],+v[1],+v[0]),C=this.dateLessOrEqual(+v[2],+v[1],+v[0],a,h,u);(y||!y&&!_)&&(b||!b&&!C)&&(f=!0)}}}catch(g){}}),f}isLiturgiaFound(a,c,u){if(!this.isInInterval(a,c,u))return!0;let h=this.calendarScheduler[a];if(!h)return!0;let d=h?h[c]:[];if(!d)return!0;let f=d[u];return"B"==f||"G"==f}forceSave(){}}return l.\u0275fac=function(a){return new(a||l)(Ae(Xn))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();function Nst(l,o){if(1&l&&(D(0,"div",4),me(1,"app-svg-js-image",3),k()),2&l){const a=Z();R(1),F("data",a.svgDateData)}}const Jpe=function(l,o){return{"clr-col-4":l,"clr-col-6":o}};let Lst=(()=>{class l{constructor(a,c,u,h,d){this.uiConfig=a,this.config=c,this.themes=u,this.mathSvc=h,this.calendarSvc=d,this.svgMonthData=ou.builder().setGenName("this").setType(114),this.svgYearData=ou.builder().setGenName("this").setType(114),this.svgDateData=ou.builder().setGenName("this").setType(114),this.change=new wt,this.dateChangedEnabled=!0,this.showDates=!1,this.useUniqueDate=!1,this.uniqueDateString="",this.oldUniqueDateString=null}get calendarText(){return this.uiConfig.ui.calendarCurrentDate.getStringValue()}set calendarText(a){this.uiConfig.ui.calendarCurrentDate.setStringValue(a)}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}get sCurrentDate(){let a=this.useUniqueDate?this.uniqueDateString:this.calendarText;return a!==this.oldUniqueDateString&&(this.oldUniqueDateString=a,this.config.post(()=>{this.ngOnInitDirect()},10)),a}set sCurrentDate(a){this.useUniqueDate?this.uniqueDateString=a:this.calendarText=a,this.oldUniqueDateString=a}get sCurrentDateValidString(){let a=this.sCurrentDate;if(!a){let c=new Date;a=`${c.getDate()}.${c.getMonth()+1}.${c.getFullYear()}`}return a}get currentDate(){let u=+this.sCurrentDateValidString.split(/[\\/\.\-]/)[0],h=this.calendarSvc.getMonthsDaysCount(this.currentYear,this.currentMonthIndex);return u>h&&(u=h),u}set currentDate(a){let c=this.sCurrentDateValidString.split(/[\\/\.\-]/),u=this.calendarSvc.getMonthsDaysCount(this.currentYear,this.currentMonthIndex);this.sCurrentDate=`${a<=u?a:u}.${c[1]}.${c[2]}`,this.changed()}get currentMonthIndex(){return+this.sCurrentDateValidString.split(/[\\/\.\-]/)[1]-1}set currentMonthIndex(a){let c=this.sCurrentDateValidString.split(/[\\/\.\-]/),u=+c[0],h=this.calendarSvc.getMonthsDaysCount(this.currentYear,a);u=u<=h?u:h,this.sCurrentDate=`${u}.${a+1}.${c[2]}`,this.changed()}validateYear(a){let c=+a,u=(new Date).getFullYear();return Number.isNaN(c)&&(c=u),(+c+10<u||+c-10>u)&&(c=u-10),+c}get currentYear(){let a=this.sCurrentDateValidString.split(/[\\/\.\-]/);return+this.validateYear(+a[2])}set currentYear(a){let c=this.sCurrentDateValidString.split(/[\\/\.\-]/),u=+c[0];a=this.validateYear(a);let h=this.calendarSvc.getMonthsDaysCount(a,this.currentMonthIndex);u=u<=h?u:h,this.sCurrentDate=`${u}.${c[1]}.${a}`,this.changed()}ngOnInit(){this.ngOnInitDirect()}ngOnInitDirect(){let a=["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"].map((p,g)=>Wp.builder().setName(p).setTag(g));this.svgMonthData=ou.builder().setGenerator((new vM).setTheme(this.themes.nowIsDay()?Bs.Light3:Bs.Dark3).setCommands(a,a[this.currentMonthIndex]).setOnCommandHandler(p=>{this.currentMonthIndex=p.tag}).setAutoClickOnChange(!0).setShadowEnabled(!1)).setGenName("this").setType(114);let c=[],u=this.currentYear;for(let p=-15;p<=15;p++)c.push(u+p);let d=15,f=c.map((p,g)=>(p==u&&(d=g),Wp.builder().setName(""+p).setTag(p)));this.svgYearData=ou.builder().setGenerator((new vM).setTheme(this.themes.nowIsDay()?Bs.Light3:Bs.Dark3).setCommands(f,f[15]).setOnCommandHandler(p=>{this.currentYear=p.tag}).setAutoClickOnChange(!0).setShadowEnabled(!1)).setGenName("this").setType(114),this.reloadDates()}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}reloadDates(){if(!this.showDates)return;let a=this.calendarSvc.getMonthsDaysCount(this.currentYear,this.currentMonthIndex),c=[];for(let u=1;u<=a;u++)c.push(Wp.builder().setName(""+u).setTag(u));this.svgDateData=ou.builder().setGenerator((new vM).setTheme(this.themes.nowIsDay()?Bs.Light3:Bs.Dark3).setCommands(c,c[this.currentDate-1]).setOnCommandHandler((u,h)=>{this.dateChangedEnabled=!1,this.currentDate=u.tag,this.dateChangedEnabled=!0}).setAutoClickOnChange(!0).setShadowEnabled(!1)).setGenName("this").setType(114)}sendChanged(){this.change.emit(this.sCurrentDateValidString)}changed(){this.dateChangedEnabled&&this.reloadDates(),this.sendChanged()}}return l.\u0275fac=function(a){return new(a||l)(L(Xn),L(an),L(Mo),L(tg),L(Kpe))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-scheduler-calendar"]],inputs:{data:"data",showDates:"showDates",useUniqueDate:"useUniqueDate",uniqueDateString:"uniqueDateString"},outputs:{change:"change"},decls:6,vars:11,consts:[[1,"clr-row"],["class","clr-col-4",4,"ngIf"],[3,"ngClass"],[3,"data"],[1,"clr-col-4"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,Nst,2,1,"div",1),D(2,"div",2),me(3,"app-svg-js-image",3),k(),D(4,"div",2),me(5,"app-svg-js-image",3),k(),k()),2&a&&(R(1),F("ngIf",c.showDates),R(1),F("ngClass",ps(5,Jpe,c.showDates,!c.showDates)),R(1),F("data",c.svgMonthData),R(1),F("ngClass",ps(8,Jpe,c.showDates,!c.showDates)),R(1),F("data",c.svgYearData))},directives:[yn,mc,ii],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.inline[_ngcontent-%COMP%]{display:inline-block}"]}),l})();function Bst(l,o){1&l&&me(0,"img",6),2&l&&F("src","./imsvg/"+(7-Z().$implicit.rang)+".svg",Rb)}function Vst(l,o){if(1&l){const a=gt();D(0,"div",2),ee("click",function(){const h=Le(a).$implicit;return Z().onSelectPrazdnik(h)}),D(1,"div",3),D(2,"span",4),ne(3,"\xa0"),Y(4,Bst,1,1,"img",5),ne(5,"\xa0"),k(),ne(6),k(),k()}if(2&l){const a=o.$implicit;R(4),F("ngIf",a.rang>1),R(2),en(a.text)}}let zst=(()=>{class l{constructor(a,c,u){this.uiConfig=a,this.themes=c,this.mathSvc=u,this.onSelected=new wt}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(a){this.uiConfig.ui.calendarText.setStringValue(a)}get prazdnkikiData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onSelectPrazdnik(a){this.onSelected.emit(a)}}return l.\u0275fac=function(a){return new(a||l)(L(Xn),L(Mo),L(tg))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-scheduler-prazdniki"]],inputs:{data:"data"},outputs:{onSelected:"onSelected"},decls:2,vars:2,consts:[[3,"ngClass"],["class","clr-row cursor",3,"click",4,"ngFor","ngForOf"],[1,"clr-row","cursor",3,"click"],[1,"clr-col-12"],[1,"label","label-info"],["width","16px","height","16px",3,"src",4,"ngIf"],["width","16px","height","16px",3,"src"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,Vst,7,2,"div",1),k()),2&a&&(F("ngClass",c.getClasses()),R(1),F("ngForOf",c.prazdnkikiData.prazdniki))},directives:[ii,_i,yn],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),l})();function Ust(l,o){if(1&l){const a=gt();D(0,"clr-radio-wrapper"),D(1,"input",35),ee("ngModelChange",function(u){return Le(a),Z().currentSettingsName=u}),k(),D(2,"label"),ne(3),k(),k()}if(2&l){const a=o.$implicit,c=Z();R(1),F("name","settings")("value",a.name)("ngModel",c.currentSettingsName),R(2),en(a.name)}}function Hst(l,o){if(1&l){const a=gt();D(0,"button",36),ee("click",function(u){return Le(a),Z().onDeleteCurrentSettings(u)}),ne(1,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c "),k()}}function $st(l,o){if(1&l){const a=gt();D(0,"clr-accordion-content"),D(1,"app-dynamic-scheduler-clerics",37),ee("onSave",function(u){return Le(a),Z().onSaveClerics(u)})("onClear",function(u){return Le(a),Z().onClearClerics(u)}),k(),k()}if(2&l){const a=Z();R(1),F("data",a.clerics)("autoSave",!0)}}function Wst(l,o){if(1&l){const a=gt();D(0,"clr-accordion-content"),D(1,"app-dynamic-scheduler-services",38),ee("onSave",function(u){return Le(a),Z().onSaveServices(u)})("onClear",function(u){return Le(a),Z().onClearServices(u,!0)})("onReset",function(u){return Le(a),Z().onClearServices(u,!1)}),k(),k()}if(2&l){const a=Z();R(1),F("data",a.services)("autoSave",!0)}}function Gst(l,o){if(1&l){const a=gt();D(0,"div",44),D(1,"div",45),D(2,"form",46),D(3,"div",47),D(4,"textarea",76),ee("ngModelChange",function(u){return Le(a).$implicit.text=u}),k(),k(),D(5,"span",49),ne(6),k(),k(),k(),k()}if(2&l){const a=o.$implicit;R(4),F("ngModel",a.text),R(2),en(a.info)}}function Qst(l,o){if(1&l){const a=gt();D(0,"div",44),D(1,"div",45),D(2,"form",46),D(3,"div",47),D(4,"textarea",77),ee("ngModelChange",function(u){return Le(a).$implicit.text=u}),k(),k(),D(5,"span",49),ne(6),k(),k(),k(),k()}if(2&l){const a=o.$implicit;R(4),F("ngModel",a.text),R(2),en(a.info)}}function jst(l,o){if(1&l){const a=gt();D(0,"div",44),D(1,"div",45),D(2,"form",46),D(3,"div",47),D(4,"textarea",78),ee("ngModelChange",function(u){return Le(a).$implicit.text=u}),k(),k(),D(5,"span",49),ne(6),k(),k(),k(),k()}if(2&l){const a=o.$implicit;R(4),F("ngModel",a.text),R(2),en(a.info)}}function qst(l,o){if(1&l){const a=gt();D(0,"clr-accordion-content"),D(1,"div",39),D(2,"div",40),D(3,"div",41),D(4,"span"),D(5,"app-dynamic-scheduler-calendar",42),ee("change",function(u){return Le(a),Z().onCalendarChanged(u)}),k(),k(),k(),k(),D(6,"div",43),D(7,"div",44),D(8,"div",45),D(9,"form",46),D(10,"div",47),D(11,"textarea",48),ee("ngModelChange",function(u){return Le(a),Z().textDay.text=u}),k(),k(),D(12,"span",49),ne(13),k(),k(),k(),k(),k(),D(14,"div",50),D(15,"div",44),D(16,"div",45),D(17,"form",46),D(18,"div",47),D(19,"textarea",51),ee("ngModelChange",function(u){return Le(a),Z().textHoliday.text=u}),k(),k(),D(20,"span",49),ne(21),k(),k(),k(),k(),k(),D(22,"div",45),D(23,"app-dynamic-scheduler-services",52),ee("onSave",function(u){return Le(a),Z().onSaveDayServices(u)})("onClear",function(u){return Le(a),Z().onClearDayServices(u)}),k(),k(),k(),D(24,"div",53),D(25,"div",45),D(26,"div",41),D(27,"span"),D(28,"app-dynamic-scheduler-calendar",42),ee("change",function(u){return Le(a),Z().onCalendarChanged(u)}),k(),k(),k(),k(),D(29,"div",40),D(30,"div",44),D(31,"div",45),D(32,"form",46),D(33,"div",47),D(34,"textarea",54),ee("ngModelChange",function(u){return Le(a),Z().textDay.text=u}),k(),k(),D(35,"span",49),ne(36),k(),k(),k(),k(),k(),D(37,"div",40),D(38,"div",44),D(39,"div",45),D(40,"form",46),D(41,"div",47),D(42,"textarea",55),ee("ngModelChange",function(u){return Le(a),Z().textHoliday.text=u}),k(),k(),D(43,"span",49),ne(44),k(),k(),k(),k(),k(),D(45,"div",45),D(46,"app-dynamic-scheduler-services",56),ee("onSave",function(u){return Le(a),Z().onSaveDayServices(u)})("onClear",function(u){return Le(a),Z().onClearDayServices(u)}),k(),k(),k(),D(47,"div",57),D(48,"div",45),D(49,"div",41),D(50,"span"),D(51,"app-dynamic-scheduler-calendar",42),ee("change",function(u){return Le(a),Z().onCalendarChanged(u)}),k(),k(),k(),k(),D(52,"div",45),D(53,"div",44),D(54,"div",45),D(55,"form",46),D(56,"div",47),D(57,"textarea",58),ee("ngModelChange",function(u){return Le(a),Z().textDay.text=u}),k(),k(),D(58,"span",49),ne(59),k(),k(),k(),k(),k(),D(60,"div",45),D(61,"div",44),D(62,"div",45),D(63,"form",46),D(64,"div",47),D(65,"textarea",59),ee("ngModelChange",function(u){return Le(a),Z().textHoliday.text=u}),k(),k(),D(66,"span",49),ne(67),k(),k(),k(),k(),k(),D(68,"div",45),D(69,"app-dynamic-scheduler-services",56),ee("onSave",function(u){return Le(a),Z().onSaveDayServices(u)})("onClear",function(u){return Le(a),Z().onClearDayServices(u)}),k(),k(),D(70,"div",60),D(71,"app-dynamic-scheduler-rangs",61),ee("rangChanged",function(u){return Le(a),Z().onSelectDayRang(u)}),k(),k(),D(72,"div",45),D(73,"app-dynamic-scheduler-prazdniki",62),ee("onSelected",function(u){return Le(a),Z().onSelectPrazdnik(u)}),k(),k(),k(),D(74,"div",63),D(75,"div",64),D(76,"div",44),D(77,"div",45),D(78,"div",7),D(79,"app-dynamic-scheduler-rangs",61),ee("rangChanged",function(u){return Le(a),Z().onSelectDayRang(u)}),k(),k(),D(80,"div",65),D(81,"app-dynamic-scheduler-prazdniki",62),ee("onSelected",function(u){return Le(a),Z().onSelectPrazdnik(u)}),k(),k(),k(),k(),Y(82,Gst,7,2,"div",66),D(83,"div",67),D(84,"div",45),D(85,"button",68),ee("click",function(){return Le(a),Z().modalClearSchedulerFlag=!0}),ne(86,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),k(),k(),k(),k(),D(87,"div",69),D(88,"div",44),D(89,"div",45),D(90,"div",7),D(91,"app-dynamic-scheduler-rangs",61),ee("rangChanged",function(u){return Le(a),Z().onSelectDayRang(u)}),k(),k(),D(92,"div",70),D(93,"app-dynamic-scheduler-prazdniki",62),ee("onSelected",function(u){return Le(a),Z().onSelectPrazdnik(u)}),k(),k(),k(),k(),Y(94,Qst,7,2,"div",66),D(95,"div",67),D(96,"div",45),D(97,"button",71),ee("click",function(){return Le(a),Z().modalClearSchedulerFlag=!0}),ne(98,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),k(),k(),k(),k(),D(99,"div",72),Y(100,jst,7,2,"div",66),D(101,"div",67),D(102,"div",45),D(103,"button",71),ee("click",function(){return Le(a),Z().modalClearSchedulerFlag=!0}),ne(104,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),k(),k(),k(),k(),D(105,"div",73),me(106,"app-svg-js-image",74),k(),D(107,"div",75),me(108,"app-svg-js-image",74),k(),k(),k()}if(2&l){const a=Z();R(5),F("showDates",!0)("uniqueDateString",a.currentDate)("useUniqueDate",!0),R(6),F("ngModel",a.textDay.text),R(2),en(a.textDay.info),R(6),F("ngModel",a.textHoliday.text),R(2),en(a.textHoliday.info),R(2),F("data",a.dayServices)("singleRang",!0)("clerics",a.clerics.clerics)("autoSave",!0)("clearBtn",!1),R(5),F("showDates",!0)("uniqueDateString",a.currentDate)("useUniqueDate",!0),R(6),F("ngModel",a.textDay.text),R(2),en(a.textDay.info),R(6),F("ngModel",a.textHoliday.text),R(2),en(a.textHoliday.info),R(2),F("data",a.dayServices)("singleRang",!0)("vertical",!0)("clerics",a.clerics.clerics)("autoSave",!0)("clearBtn",!1),R(5),F("showDates",!0)("uniqueDateString",a.currentDate)("useUniqueDate",!0),R(6),F("ngModel",a.textDay.text),R(2),en(a.textDay.info),R(6),F("ngModel",a.textHoliday.text),R(2),en(a.textHoliday.info),R(2),F("data",a.dayServices)("singleRang",!0)("vertical",!0)("clerics",a.clerics.clerics)("autoSave",!0)("clearBtn",!1),R(2),F("rang",a.dayRang),R(2),F("data",a.prazdnikiData),R(6),F("rang",a.dayRang),R(2),F("data",a.prazdnikiData),R(1),F("ngForOf",a.editors),R(9),F("rang",a.dayRang),R(2),F("data",a.prazdnikiData),R(1),F("ngForOf",a.editors),R(6),F("ngForOf",a.editors),R(6),F("svgWidth",512)("svgHeight",512)("scene","/scenes/scheduler.scene.txt")("genName","Js")("type",512)("schedulerText",a.createScheduler())("logoText","\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435")("startPageIndex",0)("showFooter",!0),R(2),F("svgWidth",512)("svgHeight",512)("scene","/scenes/scheduler.scene.txt")("genName","Js")("type",512)("schedulerText",a.createScheduler())("logoText","\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435")("startPageIndex",0)("showFooter",!0)}}function Zst(l,o){if(1&l){const a=gt();D(0,"div"),D(1,"app-svg-js-image",19),ee("pagesCount",function(u){return Le(a),Z().setPagesCount(u)})("svg",function(u){const d=Le(a).$implicit;return Z().saveSvg(u,d)}),k(),k()}if(2&l){const a=o.$implicit,c=Z();R(1),F("scene","/scenes/scheduler.scene.txt")("genName","Js")("type",1)("schedulerText",c.createScheduler(!0))("logoText",c.fullSchedulerInfoFlag?"\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435")("startPageIndex",a)("showFooter",!1)}}function Xst(l,o){if(1&l){const a=gt();D(0,"button",34),ee("click",function(){return Le(a),Z().onSaveCurrentSettings()}),ne(1,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),k()}}const Yst=function(){return{alert:!0,"alert-warning":!1,"alert-success":!0,"top-space":!1}};class _g{constructor(o,a,c){this.info=a,this.onChange=c,this.sText=""}static builder(){return new _g("","",null)}changed(){this.onChange&&this.onChange()}get text(){return this.sText}set text(o){this.setText(o)}setText(o,a=!0){return this.sText!=o&&(this.sText=o,a&&this.changed()),this}setInfo(o){return this.info=o,this}setOnChange(o){return this.onChange=o,this}}class RA{constructor(o,a,c,u,h,d,f){this.\u0440\u0430\u043d\u0433=o,this.\u0434\u0435\u043d\u044c=a,this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a=c,this.\u0441\u043b\u0443\u0436\u0431\u0430=u,this.\u0432\u0440\u0435\u043c\u044f=h,this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438=d,this.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438=f}static \u043d\u043e\u0432\u044b\u0439(){return new RA(1,"","","","",[],"")}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(o){return this.\u0440\u0430\u043d\u0433=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(o){return this.\u0434\u0435\u043d\u044c=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(o){return this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(o){return this.\u0441\u043b\u0443\u0436\u0431\u0430=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f(o){return this.\u0432\u0440\u0435\u043c\u044f=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438(o){return this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432(o){return this.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438=o,this}}class ege{constructor(o,a){this.config=o,this.onUpdate=a,this.id=0,this.calling=0}nextId(){return++this.id,this}changed(){return this.calling&&this.requestForUpdate(),this}requestForUpdate(){this.nextId();let o=this.id;if(!this.calling)return++this.calling,this.config.post(()=>{o==this.id&&this.onUpdate?(this.onUpdate(),--this.calling):(--this.calling,this.requestForUpdate())},3e3),this}}let Kst=(()=>{class l{constructor(a,c,u,h,d,f,p){this.uiConfig=a,this.config=c,this.themes=u,this.mathSvc=h,this.ks=d,this.calendarSettingsSvc=f,this.calendarPrazdnikiSvc=p,this.extraPages=[],this.days=[],this.clerics=PA.builder(),this.services=T0.builder(),this.dayServices=T0.builder(),this.dayRang=1,this.fullSchedulerInfoFlag=!0,this.textDay=_g.builder().setText("1{\u0437}").setInfo("\u0414\u0435\u043d\u044c").setOnChange(()=>this.onTextChanged()),this.textHoliday=_g.builder().setText("\u0421\u0412\u0422. \u041f\u0415\u0422\u0420\u0410, \u041c\u0418\u0422\u0420. \u041a\u0418\u0415\u0412\u0421\u041a\u041e\u0413\u041e,{\u0437}\n\u041c\u041e\u0421\u041a\u041e\u0412\u0421\u041a\u041e\u0413\u041e \u0418 \u0412\u0421\u0415\u042f \u0420\u0423\u0421\u0418,{\u0437}\n\u0427\u0423\u0414\u041e\u0422\u0412\u041e\u0420\u0426\u0410{\u0437}").setInfo("\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a").setOnChange(()=>this.onTextChanged()),this.textService=_g.builder().setText("\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u0437}\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f{\u0437}\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421").setInfo("\u0421\u043b\u0443\u0436\u0431\u0430").setOnChange(()=>this.onTextChanged()),this.textTime=_g.builder().setText("8.40{\u0437}\n{1}\n17.00").setInfo("\u0412\u0440\u0435\u043c\u044f").setOnChange(()=>this.onTextChanged()),this.textHeader=_g.builder().setText("\u0420\u0410\u0421\u041f\u0418\u0421\u0410\u041d\u0418\u0415 \u0411\u041e\u0413\u041e\u0421\u041b\u0423\u0416\u0415\u041d\u0418\u0419{\u043a}\n\u042f \u041d \u0412 \u0410 \u0420 \u042c{\u043a}").setInfo("\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a").setOnChange(()=>this.onTextChanged()),this.textFooter=_g.builder().setText("{1}\n\u0414\u043e\u0440\u043e\u0433\u0438\u0435 \u0431\u0440\u0430\u0442\u044c\u044f \u0438 \u0441\u0435\u0441\u0442\u0440\u044b!\n\u0422\u0410\u0418\u041d\u0421\u0422\u0412\u041e \u0418\u0421\u041f\u041e\u0412\u0415\u0414\u0418\n\u0441\u043e\u0432\u0435\u0440\u0448\u0430\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u0448\u0435\u043c \u0445\u0440\u0430\u043c\u0435 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u0435\u0447\u0435\u0440\u043d\u0435\u0433\u043e \u0431\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u043d\u0438\u044f\n\u0438\u043b\u0438 \u043f\u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0441\u043e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u043c \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u043c.\n\u0423\u0437\u043d\u0430\u0442\u044c, \u043a\u0442\u043e \u0441\u043b\u0443\u0436\u0438\u0442, \u043c\u043e\u0436\u043d\u043e \u0437\u0430 \u0441\u0432\u0435\u0447\u043d\u044b\u043c \u044f\u0449\u0438\u043a\u043e\u043c \u0438\u043b\u0438 \u043f\u043e\n\u0442\u0435\u043b. +7 (495) 322-223").setInfo("\u041f\u043e\u0434\u0432\u0430\u043b").setOnChange(()=>this.onTextChanged()),this.currentDate="01.02.2022",this.prazdnikiData=IA.builder(),this.editors=[this.textHeader,this.textFooter],this.requestForGeneratingScheduler=!1,this.generatingScheduler=!1,this.schedulerPagesCount=0,this.shortScheduler="01.01.2022\r\n==\r\n{1}\r\n==\r\n{1}",this.fullScheduler="01.01.2022\r\n==\r\n{1}\r\n==\r\n{1}",this.updater=null,this.dateUpdater=null,this.modalClearSchedulerFlag=!1,this.modalSaveSettingsFlag=!1,this.modalDeleteSettingsFlag=!1,this.modalAddSettingsFlag=!1,this.settings=[],this.pCurrentSettingsName=new ast("\u0418\u043c\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a","\u0438\u043c\u044f",this,"currentSettingsName",null),this.svgs=null,this.onTextChangedEnabled=!0;let g=new Date;this.currentDate=g.getDate()+"."+(g.getMonth()+1)+"."+g.getFullYear(),this.updater=new ege(this.config,()=>this.generateAllSchedulers()),this.dateUpdater=new ege(this.config,()=>this.modalClearSchedulerFlag=!0)}get currentSettingsName(){return this.uiConfig.ui.schedulerCurrentSettingsName.getStringValue()}set currentSettingsName(a){this.uiConfig.ui.schedulerCurrentSettingsName.setStringValue(a),this.setCurrentSettings(a)}get formulaText(){return this.uiConfig.ui.schedulerSourceText.getStringValue()}set formulaText(a){this.uiConfig.ui.schedulerSourceText.setStringValue(a)}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}currentDayOfMonth(){return+this.currentDate.split(".")[0]}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.onLoadSettingsDefault()}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}setPagesCount(a){this.extraPages=[];for(let c=1;c<a;c++)this.extraPages.push(c);this.schedulerPagesCount=a}onCalendarChanged(a){if(this.currentDate==a)return;let c=this.currentDate.split("."),u=a.split(".");this.currentDate=a,this.config.post(()=>{this.startEditDate(),this.requestClearScheduler(c[1]!=u[1]||c[2]!=u[2])},10)}onTextChanged(a=!1){if(!this.onTextChangedEnabled)return;let c=this.days[this.currentDayOfMonth()-1];c&&(c.\u0440\u0430\u043d\u0433=this.dayRang,c.\u0434\u0435\u043d\u044c=this.textDay.text,c.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a=this.textHoliday.text,c.\u0441\u043b\u0443\u0436\u0431\u0430=this.textService.text,c.\u0432\u0440\u0435\u043c\u044f=this.textTime.text,this.onDayServicesSync()),a?this.updater&&this.updater.onUpdate():this.updater&&this.updater.requestForUpdate()}createScheduler(a=!1){return a?this.fullScheduler:this.shortScheduler}generateAllSchedulers(){this.generatingScheduler?this.requestForGeneratingScheduler=!0:(this.generatingScheduler=!0,this.shortScheduler=this.generateSchedulers(),this.fullScheduler=this.generateSchedulers(!0),this.uiConfig.ui.schedulerText.setStringValue(this.fullScheduler),this.svgs=[],this.schedulerPagesCount=0)}convertAllClerics(a){let c=["\u043a","\u0441","\u0437","\u0444","\u043f","\u043c","\u043b","\u0440"];return a.split("\n").map(u=>u.trim()).map(u=>{let h=u.split(",").map(f=>this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(f,"")),d=0;return h.length&&this.clerics.clerics.forEach((f,p)=>{f.name==h[0]&&(d=p)}),h.length>1&&h.length==this.clerics.clerics.length?"\u0412\u0421\u0415{\u043a}":this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(u,"")+"{"+c[(1+d)%c.length]+"}"}).join("\r\n")}removeUnneededServices(a,c=""){let u=(c||a).split("\n");return a.split("\n").map(h=>h.trim()).filter((h,d)=>!!this.fullSchedulerInfoFlag||!u[d].includes("{\u0442}")).join("\r\n")}generateSchedulers(a=!1,c=!0){let u=this.currentDate;return u+="\r\n=====================\r\n",u+=this.textHeader.text,u+="\r\n=====================\r\n",a?u+=this.days.map(h=>c&&!h.\u0441\u043b\u0443\u0436\u0431\u0430?"":h.\u0440\u0430\u043d\u0433+"\r\n---------------------\r\n"+h.\u0434\u0435\u043d\u044c+"\r\n---------------------\r\n"+h.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a.toUpperCase()+"\r\n---------------------\r\n"+this.removeUnneededServices(h.\u0441\u043b\u0443\u0436\u0431\u0430)+"\r\n---------------------\r\n"+this.removeUnneededServices(h.\u0432\u0440\u0435\u043c\u044f)+"\r\n---------------------\r\n"+this.removeUnneededServices(this.convertAllClerics(h.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438),h.\u0432\u0440\u0435\u043c\u044f)+"\r\n=====================\r\n").reduce((h,d)=>h+d,""):(u+=this.dayRang,u+="\r\n---------------------\r\n",u+=this.textDay.text,u+="\r\n---------------------\r\n",u+=this.textHoliday.text,u+="\r\n---------------------\r\n",u+=this.textService.text,u+="\r\n---------------------\r\n",u+=this.textTime.text,u+="\r\n---------------------\r\n",u+=this.convertAllClerics(this.getDayClerics()),u+="\r\n=====================\r\n"),u+=this.textFooter.text,u}requestClearScheduler(a=!0){a?this.dateUpdater&&this.dateUpdater.requestForUpdate():this.dateUpdater&&this.dateUpdater.changed()}onClearScheduler(){this.calendarPrazdnikiSvc.load().then(a=>{this.onClearSchedulerRaw()})}breakLines(a,c){let h=a.split(" "),d="",f=0;for(let p=0;p<h.length;++p){f>=39&&(d+="\r\n",f=0);let g=h[p];g.length+f+(f>0?1:0)>39?0==f?(d+=c,d+=g,d+="\r\n",f=0):(d+="\r\n"+c,d+=g,f=g.length):(f>0?(d+=" ",f+=1):d+=c,d+=g,f+=g.length)}return d}\u0443\u0431\u0440\u0430\u0442\u044c\u0412\u0441\u0435\u041c\u0430\u0440\u043a\u0435\u0440\u044b(a){let c=/\{[a-z\u0430-\u044fA-Z\u0410-\u042f0-9]\}/g;return a.split("\r\n").map(u=>u.includes("\u0442")?u:u.replace(c,"")).map(u=>u.trim()).join("\r\n")}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(a,c){let u=/\{[\u043a\u041a\u0441\u0421\u0437\u0417\u0444\u0424\u043f\u041f\u043c\u041c\u043b\u041b\u0440\u0420]\}/g;return a.split("\r\n").map(h=>h.includes("\u0442")?h:h.replace(u,"")).map(h=>h+(h.includes("\u0442")?"":c)).join("\r\n")}getClericsForDayOfWeek(a){return this.clerics.clerics.filter(u=>u.week[a]).map(u=>u.name).join(",")}getRangServices(a){let c=this.services.services[a-1];return null==c&&(c=[]),c}getServiceColor(a,c){return a.requiredService?"{\u043f}":c}onClearSchedulerRaw(){let a=this.currentDate.split("."),u=+a[1],h=+a[2];this.days=[];for(let f=1;f<=31;f++){let p=new Date;if(p.setDate(1),p.setFullYear(h),p.setMonth(u-1,f),p.getMonth()+1!=u)break;let g=p.getDay(),v=f+"\r\n"+["\u0412\u0421","\u041f\u041d","\u0412\u0422","\u0421\u0420","\u0427\u0422","\u041f\u0422","\u0421\u0411"][g],y=this.calendarPrazdnikiSvc.getPrazdnikiFor(h,u-1,f),_=y.length?y[0]:w0.builder().setRang(1).setText("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0430"),b=0==g?6:0,C=_.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(b),x=this.breakLines(_.text,C),S=this.getRangServices(_.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(b)),w=this.getClericsForDayOfWeek(g?g-1:g+6),O=new Date;O.setDate(1),O.setFullYear(h),O.setMonth(u-1,f+1);let T=O.getDay(),M=this.calendarPrazdnikiSvc.getPrazdnikiFor(h,O.getMonth(),O.getDate()),I=0==T?6:0,E=(M.length?M[0]:w0.builder().setRang(1).setText("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0430")).\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(I),P=this.getRangServices(_.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(I)),B=S.filter(j=>j.morningService).map(j=>j.getNormalizedText()+this.getServiceColor(j,C)).map(j=>j||"{1}").concat(P.filter(j=>!j.morningService).map(j=>j.getNormalizedText()+this.getServiceColor(j,E)).map(j=>j||"{1}")).join("\r\n"),V=S.filter(j=>j.morningService).map(j=>j.getNormalizedTime()+this.getServiceColor(j,C)).map(j=>j||"{1}").concat(P.filter(j=>!j.morningService).map(j=>j.getNormalizedTime()+this.getServiceColor(j,E)).map(j=>j||"{1}")).join("\r\n");v=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(v,C);let Q=V.split("\n").map(j=>this.\u0443\u0431\u0440\u0430\u0442\u044c\u0412\u0441\u0435\u041c\u0430\u0440\u043a\u0435\u0440\u044b(j).trim()).map(j=>j?w:"").join("\r\n");this.days.push(RA.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(_.rang).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(v).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(x).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(B).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f(V).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438(y).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432(Q))}this.textHeader.setText(`\u0420\u0410\u0421\u041f\u0418\u0421\u0410\u041d\u0418\u0415 \u0411\u041e\u0413\u041e\u0421\u041b\u0423\u0416\u0415\u041d\u0418\u0419{\u043a}\n${["\u042f \u041d \u0412 \u0410 \u0420 \u042c","\u0424 \u0415 \u0412 \u0420 \u0410 \u041b \u042c","\u041c \u0410 \u0420 \u0422","\u0410 \u041f \u0420 \u0415 \u041b \u042c","\u041c \u0410 \u0419","\u0418 \u042e \u041d \u042c","\u0418 \u042e \u041b \u042c","\u0410 \u0412 \u0413 \u0423 \u0421 \u0422","\u0421 \u0415 \u041d \u0422 \u042f \u0411 \u0420 \u042c","\u041e \u041a \u0422 \u042f \u0411 \u0420 \u042c","\u041d \u041e \u042f \u0411 \u0420 \u042c","\u0414 \u0415 \u041a \u0410 \u0411 \u0420 \u042c"][u-1]}{\u043a}`,!1),this.config.post(()=>this.startEditDate(!0))}parserScheduler(a){this.svgs=[];let c=a.split(/==+/).map(u=>u.trim());this.currentDate=c[0],this.textHeader.setText(c[1],!1),this.textFooter.setText(c[c.length-1],!1),this.days=[];for(let u=2;u+1<c.length;++u){let d=c[u].split(/--+/),f=p=>p<d.length?d[p].trim():"";this.days.push(RA.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(+f(0)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(f(1)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(f(2)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(f(3)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f(f(4)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432(f(5)))}this.startEditDate()}startEditDate(a=!1){let c=this.days[this.currentDayOfMonth()-1];this.dayRang=c.\u0440\u0430\u043d\u0433,this.textDay.setText(c?c.\u0434\u0435\u043d\u044c:"",!1),this.textHoliday.setText(c?c.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a:"",!1),this.textService.setText(c?c.\u0441\u043b\u0443\u0436\u0431\u0430:"",!1),this.textTime.setText(c?c.\u0432\u0440\u0435\u043c\u044f:"",!1);let u=this.currentDate.split("."),h=+u[0],d=+u[1],f=+u[2];this.calendarPrazdnikiSvc.load().then(p=>{let g=this.calendarPrazdnikiSvc.getPrazdnikiFor(f,d-1,h);this.prazdnikiData=IA.builder().setPrazdniki(g)}),this.onDayServicesSync(),this.onTextChanged(a)}onDayServicesSync(){let a=this.days[this.currentDayOfMonth()-1],c=a.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438.split("\n").map(f=>this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(f,"")).map(f=>f.trim()).map(f=>"\u0412\u0421\u0415"!=f?f:this.clerics.clerics.map(p=>p.name).join(",")),u=a.\u0432\u0440\u0435\u043c\u044f.split("\n").map(f=>f.trim());this.dayServices.services=[a.\u0441\u043b\u0443\u0436\u0431\u0430.split("\n").map(f=>f.trim()).map((f,p)=>r1.builder().setText(f).setTime((f=>f<u.length?u[f]:"")(p)).setMorningService(!f.includes("{\u0432}")).setRequiredService(f.includes("{\u0442}")).setSelectedClerics((f=>f<c.length?c[f]:"")(p)))]}onPrint(){window.print()}setCurrentSettings(a){let c=this.settings.find(u=>u.name==a);!c||this.setCurrentSettingsDirect(c)}setCurrentSettingsDirect(a){this.parserScheduler(a.text)}getAllCurrentSettings(){let a={};return a.text=this.generateSchedulers(!0,!1),a}settingsFromString(a){try{return JSON.parse(a)}catch(c){}return[]}onSaveCurrentSettings(a=!0){let c=this.getAllCurrentSettings();c.name=this.pCurrentSettingsName.value;let u=!1;for(let h=0;h<this.settings.length;h++)this.settings[h].name==c.name&&(this.settings[h]=c,u=!0);!u&&a&&this.settings.push(c),this.uiConfig.ui.schedulerAllVariants.setStringValue(JSON.stringify(this.settings)),this.modalSaveSettingsFlag=!1}onLoadSettingsDefault(){this.config.post(()=>{this.onLoadSettingsDefaultRaw()})}onLoadSettingsDefaultRaw(){this.settings=this.settingsFromString(this.uiConfig.ui.schedulerAllVariants.getStringValue());let a="",c=!1;this.settings.forEach(u=>{u.name==this.currentSettingsName&&(c=!0),!a&&u.name&&(a=u.name)}),!c&&a&&(this.currentSettingsName=a),this.onLoadClericsOrDefault(),this.settings&&0!=this.settings.length?this.setCurrentSettings(this.currentSettingsName):this.onClearScheduler(),this.onLoadServicesOrDefault()}onLoadEmptyServices(){this.services=T0.builder().setServices([]),this.onSaveServices(this.services.services)}onLoadServicesOrDefault(a=!1){let c=this.uiConfig.ui.schedulerServices.getStringValue();(a||!c)&&(c="\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415|17.00|\u0432\n\u0412\u043e\u0434\u043e\u0441\u0432\u044f\u0442\u043d\u044b\u0439 \u043c\u043e\u043b\u0435\u0431\u0435\u043d.|8.00|\u0443\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|8.40|\u0443\n\u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n    "),this.services=T0.builder().setServices(this.parserServices(c)),this.onSaveServices(this.services.services)}onLoadClericsOrDefault(a=!1){let c=this.uiConfig.ui.schedulerClerics.getStringValue();(a||!c)&&(c="\u043e. \u0418\u043c\u044f\u0420\u0435\u043a|false|true|false|true|false|true|true"),this.clerics=PA.builder().setClerics(this.parserClerics(c))}onDeleteCurrentSettings(a){this.modalDeleteSettingsFlag=!0}onDeleteCurrentSettingsDirect(a){let c=this.pCurrentSettingsName.value;for(let u=0;u<this.settings.length;u++)if(this.settings[u].name==c){this.settings.splice(u,1);break}this.uiConfig.ui.schedulerAllVariants.setStringValue(JSON.stringify(this.settings)),this.currentSettingsName="",this.onLoadSettingsDefault(),this.modalDeleteSettingsFlag=!1}onAddAllSettingsDirect(a){this.calendarSettingsSvc.getNames("","scheduler","/scheduler").then(c=>{let u=c.names;if(this.settings=[],null!=u&&u.length>0&&u[0].names.length>0){let h=d=>{d<u.length?this.calendarSettingsSvc.getSource(u[d].names[0],"").then(f=>{if(f){let p={};p.text=f,p.name=u[d].name,this.settings.push(p)}h(d+1)}):(this.onSaveCurrentSettings(!1),this.onLoadSettingsDefault(),this.modalAddSettingsFlag=!1)};h(0)}else this.modalAddSettingsFlag=!1})}onSave(a){this.modalSaveSettingsFlag=!0}onExport(a){let c=this.getAllCurrentSettings().text;const u=(new Date).toISOString().split("T")[0];if(this.config.isPlatformAndroid())this.ks.addTempFile("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f.txt",c).then(d=>{wf.startDownload(d.fileName,`\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f.${u}.txt`)});else{const d=new TextEncoder,f=new Blob([d.encode(c)],{type:"octet/stream"});wf.saveData(f,`\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f.${u}.txt`)}}onImport(a){0!==a.target.files.length&&this.onImportFile(a.target.files[0])}onImportFile(a){if(!a)return;const c=new FileReader;c.onload=u=>{try{if(!c.result)throw new Error("FileReader is null.");let h=c.result.toString();this.parserScheduler(h)}catch(h){this.config.addAlert(Or.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0444\u0430\u0439\u043b: "+h,"OK",30))}},c.readAsText(a)}onSaveSvg(a=1){null==this.svgs||this.svgs.filter(c=>!!c).length==this.extraPages.length+1||a<=3&&this.config.post(()=>this.onSaveSvg(a+1),1e3)}saveSvg(a,c){if(null!=this.svgs){for(;c+1>this.svgs.length;)this.svgs.push("");this.svgs[c]=a,this.svgs.filter(u=>!!u).length>=this.schedulerPagesCount&&(this.generatingScheduler=!1,this.requestForGeneratingScheduler&&(this.requestForGeneratingScheduler=!1,this.generateAllSchedulers()))}}removeDayTask(a,c){return a.split("\n").map(h=>h.trim()).filter(h=>c==h.includes("{\u0432}")).join("\r\n")}updateRangServices(a,c){this.textService.text=this.replaceServices(this.textService.text,!0,a,c,h=>h.text),this.textTime.text=this.replaceServices(this.textTime.text,!0,a,c,h=>h.time);let u=this.currentDayOfMonth()-1;if(u>0){let h=this.days[u-1];h.\u0441\u043b\u0443\u0436\u0431\u0430=this.replaceServices(h.\u0441\u043b\u0443\u0436\u0431\u0430,!1,a,c,d=>d.text),h.\u0432\u0440\u0435\u043c\u044f=this.replaceServices(h.\u0432\u0440\u0435\u043c\u044f,!1,a,c,d=>d.time)}}onSelectPrazdnik(a){let c=this.currentDate.split("."),u=+c[0],h=+c[1],d=+c[2],f=new Date;f.setDate(1),f.setFullYear(d),f.setMonth(h-1,u);let g=0==f.getDay()?6:0,m=a.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(g),v=this.breakLines(a.text,m);this.textHoliday.setText(v),this.textDay.text=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(this.textDay.text,m),this.dayRang=a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(g),this.updateRangServices(a,g),this.onTextChanged()}parserServices(a){return a.split(/==+/).map(h=>h.trim()).filter(h=>!!h).map(h=>h.split("\n").map(d=>d.trim()).filter(d=>!!d).map(d=>{let f=d.split("|");return r1.builder().setText(f[0]).setTime(f[1]).setMorningService(!f[2].includes("\u0432")).setRequiredService(f[2].includes("\u0442"))}))}parserClerics(a){return a.split(/==+/).map(u=>u.trim()).filter(u=>!!u).map(u=>{let h=u.split("|"),d=Mw.builder();h.length>0&&d.setName(h[0]);for(let f=1;f<h.length;++f)d.week[f-1]="true"==h[f];return d})}onSaveServices(a){let c=a.map(u=>u.map(h=>`${h.text}|${h.time}|${(h.requiredService?"\u0442":"")+(h.morningService?"\u0443":"\u0432")}`).join("\r\n")).join("==");c||(c="=="),this.uiConfig.ui.schedulerServices.setStringValue(c)}onClearServices(a,c){c?this.onLoadEmptyServices():this.onLoadServicesOrDefault(!0)}onSaveClerics(a){let c=a.map(u=>u.name+"|"+u.week.join("|")).join("==");this.uiConfig.ui.schedulerClerics.setStringValue(c)}onClearClerics(a){this.onLoadClericsOrDefault(!0)}onSelectDayRang(a){this.dayRang=a;let c=w0.builder().setRang(this.dayRang),u=c.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(),h=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(this.textHoliday.text,u);this.textHoliday.setText(h),this.textDay.text=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(this.textDay.text,u),this.updateRangServices(c,0),this.onTextChanged()}replaceServices(a,c,u,h,d){let f=u.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(h),p=this.removeDayTask(a,c),m=this.services.services[u.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(h)-1].filter(y=>y.morningService==c).map(y=>d(y)+(y.requiredService?"{\u043f}{\u0442}":f)+(c?"":"{\u0432}")).map(y=>y||"{1}").join("\r\n"),v=c?m:p;return(c?p:m)&&(v&&(v+="\r\n"),v+=c?p:m),v}onSaveDayServices(a){let c=this.days[this.currentDayOfMonth()-1];c&&(this.onTextChangedEnabled=!1,this.textService.text=c.\u0441\u043b\u0443\u0436\u0431\u0430=this.dayServices.services[0].map(u=>u.getNormalizedText()).join("\r\n"),this.textTime.text=c.\u0432\u0440\u0435\u043c\u044f=this.dayServices.services[0].map(u=>u.getNormalizedTime()).join("\r\n"),c.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438=this.getDayClerics(),this.updater&&this.updater.requestForUpdate(),this.onTextChangedEnabled=!0)}getDayClerics(){return this.dayServices.services[0].map(a=>a.selectedClerics).join("\r\n")}onClearDayServices(a){this.config.post(()=>{this.onDayServicesSync()})}onSchedulerTypeToggle(){this.fullSchedulerInfoFlag=!this.fullSchedulerInfoFlag,this.config.post(()=>this.generateAllSchedulers())}}return l.\u0275fac=function(a){return new(a||l)(L(Xn),L(an),L(Mo),L(tg),L(Xp),L(Upe),L(zpe))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-scheduler-view"]],inputs:{data:"data"},decls:96,vars:26,consts:[[1,"no-print"],["role","alert",3,"ngClass"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],[1,"alert-icon"],[1,"alert-text"],[1,"bottom-space"],["clrForm",""],["clrInline",""],[4,"ngFor","ngForOf"],[1,"clr-row","top-space"],[1,"clr-col-3"],["type","button","aria-label","done",1,"btn","btn-icon","btn-success-outline","btn-block",3,"click"],[1,"btn","btn-success-outline","btn-block"],["type","file","placeholder","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c","accept",".txt",1,"button-input",3,"change"],["type","button","class","btn btn-icon btn-danger-outline btn-block","aria-label","warning",3,"click",4,"ngIf"],[4,"clrIfExpanded"],[1,"btn","btn-block","bottom-space","no-print",3,"click"],[3,"scene","genName","type","schedulerText","logoText","startPageIndex","showFooter","pagesCount","svg"],[1,"no-print",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"hidden"],["clrInput","",3,"placeholder","name","ngModel","ngModelChange"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-warning"],["shape","warning-standard"],["type","button",1,"btn","btn-warning",3,"click"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-success"],["shape","check"],["type","button",1,"btn","btn-success",3,"click"],["type","radio","clrRadio","",3,"name","value","ngModel","ngModelChange"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-danger-outline","btn-block",3,"click"],[3,"data","autoSave","onSave","onClear"],[3,"data","autoSave","onSave","onClear","onReset"],[1,"clr-row","bottom-space","no-print","clr-hidden-md-down"],[1,"clr-col-6"],[1,"inline-block","top-space"],[3,"showDates","uniqueDateString","useUniqueDate","change"],[1,"clr-col-1"],[1,"clr-row"],[1,"clr-col-12"],[1,"clr-form"],[1,"clr-control-container"],["clrTextarea","","name","day","required","",1,"heightDay",3,"ngModel","ngModelChange"],[1,"clr-subtext"],[1,"clr-col-5"],["clrTextarea","","name","holiday","required","",1,"heightHoliday",3,"ngModel","ngModelChange"],[3,"data","singleRang","clerics","autoSave","clearBtn","onSave","onClear"],[1,"clr-row","bottom-space","no-print","clr-hidden-lg-up","clr-hidden-sm-down"],["clrTextarea","","name","day","required","",1,"heightDay2",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightHoliday2",3,"ngModel","ngModelChange"],[3,"data","singleRang","vertical","clerics","autoSave","clearBtn","onSave","onClear"],[1,"clr-row","bottom-space","no-print","clr-hidden-md-up"],["clrTextarea","","name","day","required","",1,"heightDay3",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightHoliday3",3,"ngModel","ngModelChange"],[1,"clr-col-12","top-space"],[3,"rang","rangChanged"],[3,"data","onSelected"],[1,"clr-row","no-print"],[1,"clr-col-6","bottom-space","clr-hidden-md-down"],[1,"heightTAw"],["class","clr-row",4,"ngFor","ngForOf"],[1,"clr-row","bottom-top-space"],[1,"btn","btn-block","btn-danger-outline","heightTAw",3,"click"],[1,"clr-col-6","bottom-space","clr-hidden-lg-up","clr-hidden-sm-down"],[1,"heightTA2w"],[1,"btn","btn-block","btn-danger-outline",3,"click"],[1,"clr-col-12","bottom-space","clr-hidden-md-up"],[1,"clr-col-6","clr-hidden-sm-down"],[3,"svgWidth","svgHeight","scene","genName","type","schedulerText","logoText","startPageIndex","showFooter"],[1,"clr-col-12","clr-hidden-md-up"],["clrTextarea","","name","holiday","required","",1,"heightTA",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightTA2",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightTA3",3,"ngModel","ngModelChange"]],template:function(a,c){1&a&&(D(0,"div",0),D(1,"div",1),D(2,"div",2),D(3,"div",3),D(4,"div",4),me(5,"clr-icon",5),k(),D(6,"span",6),ne(7),k(),k(),k(),k(),D(8,"div",7),D(9,"form",8),D(10,"clr-radio-container",9),Y(11,Ust,4,4,"clr-radio-wrapper",10),k(),k(),D(12,"div",11),D(13,"div",12),D(14,"button",13),ee("click",function(h){return c.onSave(h)}),ne(15,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c "),k(),k(),D(16,"div",12),D(17,"button",13),ee("click",function(h){return c.onExport(h)}),ne(18,"\u042d\u043a\u0441\u043f\u043e\u0440\u0442 "),k(),k(),D(19,"div",12),D(20,"label",14),D(21,"input",15),ee("change",function(h){return c.onImport(h)}),k(),ne(22," \u0418\u043c\u043f\u043e\u0440\u0442 "),k(),k(),D(23,"div",12),Y(24,Hst,2,0,"button",16),k(),k(),k(),k(),D(25,"clr-accordion",0),D(26,"clr-accordion-panel"),D(27,"clr-accordion-title"),ne(28,"\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438"),k(),Y(29,$st,2,2,"clr-accordion-content",17),k(),D(30,"clr-accordion-panel"),D(31,"clr-accordion-title"),ne(32,"\u0421\u043b\u0443\u0436\u0431\u044b"),k(),Y(33,Wst,2,2,"clr-accordion-content",17),k(),D(34,"clr-accordion-panel"),D(35,"clr-accordion-title"),ne(36,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),k(),Y(37,qst,109,65,"clr-accordion-content",17),k(),k(),D(38,"div"),D(39,"button",18),ee("click",function(){return c.onSchedulerTypeToggle()}),ne(40),k(),D(41,"app-svg-js-image",19),ee("pagesCount",function(h){return c.setPagesCount(h)})("svg",function(h){return c.saveSvg(h,0)}),k(),Y(42,Zst,2,7,"div",10),k(),D(43,"clr-modal",20),ee("clrModalOpenChange",function(h){return c.modalClearSchedulerFlag=h}),D(44,"h3",21),ne(45,"\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f"),k(),D(46,"div",22),D(47,"p"),ne(48,"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446 \u0438\u043b\u0438 \u0433\u043e\u0434 \u0431\u044b\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b \u0438\u043b\u0438 \u043f\u043e\u0441\u0442\u0443\u043f\u0438\u043b \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043e\u0447\u0438\u0441\u0442\u043a\u0443."),me(49,"br"),me(50,"br"),ne(51," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435?"),k(),k(),D(52,"div",23),D(53,"button",24),ee("click",function(){return c.onClearScheduler(),c.modalClearSchedulerFlag=!1}),ne(54,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),k(),D(55,"button",25),ee("click",function(){return c.modalClearSchedulerFlag=!1}),ne(56,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),k(),k(),k(),D(57,"clr-modal",20),ee("clrModalOpenChange",function(h){return c.modalSaveSettingsFlag=h}),D(58,"h3",21),ne(59,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),k(),D(60,"div",22),D(61,"form"),D(62,"clr-input-container",26),D(63,"label"),ne(64),k(),D(65,"input",27),ee("ngModelChange",function(h){return c.pCurrentSettingsName.value=h}),k(),k(),k(),k(),D(66,"div",23),Y(67,Xst,2,0,"button",28),D(68,"button",25),ee("click",function(){return c.modalSaveSettingsFlag=!1}),ne(69,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),k(),k(),k(),D(70,"clr-modal",20),ee("clrModalOpenChange",function(h){return c.modalDeleteSettingsFlag=h}),D(71,"h3",21),ne(72,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a"),k(),D(73,"div",22),D(74,"p"),D(75,"button",29),me(76,"clr-icon",30),k(),ne(77),k(),k(),D(78,"div",23),D(79,"button",25),ee("click",function(){return c.modalDeleteSettingsFlag=!1}),ne(80,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),k(),D(81,"button",31),ee("click",function(h){return c.onDeleteCurrentSettingsDirect(h)}),ne(82,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),k(),k(),k(),D(83,"clr-modal",20),ee("clrModalOpenChange",function(h){return c.modalAddSettingsFlag=h}),D(84,"h3",21),ne(85,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a"),k(),D(86,"div",22),D(87,"p"),D(88,"button",32),me(89,"clr-icon",33),k(),ne(90," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e?"),k(),k(),D(91,"div",23),D(92,"button",34),ee("click",function(h){return c.onAddAllSettingsDirect(h)}),ne(93,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),k(),D(94,"button",25),ee("click",function(){return c.modalAddSettingsFlag=!1}),ne(95,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),k(),k(),k()),2&a&&(R(1),F("ngClass",bl(25,Yst)),R(4),et("shape",c.settings.length?"check-circle":"help-info"),R(2),vi("\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b: ",c.settings.length?"":"\u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442",""),R(4),F("ngForOf",c.settings),R(13),F("ngIf",c.settings.length),R(16),vi(" ",c.fullSchedulerInfoFlag?"\u041f\u043e\u043b\u043d\u043e\u0435 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"," "),R(1),F("scene","/scenes/scheduler.scene.txt")("genName","Js")("type",1)("schedulerText",c.createScheduler(!0))("logoText",c.fullSchedulerInfoFlag?"\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435")("startPageIndex",0)("showFooter",!1),R(1),F("ngForOf",c.extraPages),R(1),F("clrModalOpen",c.modalClearSchedulerFlag),R(14),F("clrModalOpen",c.modalSaveSettingsFlag),R(5),F("hidden",!c.pCurrentSettingsName.enabled),R(2),en(c.pCurrentSettingsName.name),R(1),pT("placeholder",c.pCurrentSettingsName.description),F("name","tparamsCurrentSettingsName")("ngModel",c.pCurrentSettingsName.value),R(2),F("ngIf",c.pCurrentSettingsName.value),R(3),F("clrModalOpen",c.modalDeleteSettingsFlag),R(7),vi(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c '",c.pCurrentSettingsName.value,"'?"),R(6),F("clrModalOpen",c.modalAddSettingsFlag))},directives:[ii,Ws,tD,hy,cy,ef,AO,AJ,_i,wN,Rx,Sl,LO,No,Co,ss,yn,dC,Fy,Cm,pC,hC,QN,fN,fC,yst,Fst,Lst,TN,cm,Qpe,zst,mc,hf,df,Oy,Jx],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.my-button[_ngcontent-%COMP%]{border-color:#4aaed9;background-color:#4aaed9;color:#000}.width100[_ngcontent-%COMP%]{width:100%}.height100[_ngcontent-%COMP%]{height:100%!important}.height114px[_ngcontent-%COMP%]{height:114px}.height400[_ngcontent-%COMP%]{width:500px;height:200px}.heightDay[_ngcontent-%COMP%]{width:7vw;height:10em}.heightDay2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightDay3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightHoliday[_ngcontent-%COMP%]{width:37.3vw;height:10em}.heightHoliday2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightHoliday3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightService[_ngcontent-%COMP%]{width:30vw;height:10em}.heightService2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightService3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightTime[_ngcontent-%COMP%]{width:14.3vw;height:10em}.heightTime2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightTime3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightTA[_ngcontent-%COMP%]{width:45vw;height:10em}.heightTAw[_ngcontent-%COMP%]{width:45vw!important}.heightTA2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightTA2w[_ngcontent-%COMP%]{width:42vw}.heightTA3[_ngcontent-%COMP%]{width:78vw;height:100px}@media print{.pagebreak[_ngcontent-%COMP%]{page-break-after:always}}.button-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}"]}),l})();class _7{constructor(){}static builder(){return new _7}}class b7 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new b7("",null,null,_7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setId(o){return this.id=o,this}setWaitingForSenderid(o){return this.waitingForSenderId=o,this}setComponents(o){return this.components=o,this}}class x7{constructor(o,a){this.meta=o,this.parsed=a}static builder(){return new x7(null,null)}setMeta(o){return this.meta=o,this}setParsed(o){return this.parsed=o,this}}class Aw{constructor(o="",a=null){this.type=o,this.onEventHandler=a}setOnEventHandler(o){return this.onEventHandler=o,this}run(o){return this.onEventHandler&&this.onEventHandler(this,o),this}}class FA{constructor(o,a,c=0,u=null){this.\u0441\u0442\u0440\u043e\u043a\u0438=o,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438=a,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a=c,this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430=u,this.\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440\u0421\u0442\u043e\u043b\u0431\u0446\u043e\u0432=wa.builder(),this.\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440\u0421\u0442\u0440\u043e\u043a=wa.builder()}static builder(){return new FA([],0)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0438(o){return this.\u0441\u0442\u0440\u043e\u043a\u0438=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438(o){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438=o,this}\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a(o=1){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a+=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430(o){return this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430=o,this}}class C7 extends Jle{constructor(o=null){super(o),this.errors=[],this.libraryRef="biblia",this.libraryType="prod",this.libraryInfo=null,this.bookName="",this.bookNameNewLangs=[],this.bookChapterNewName="",this.bookLoadBooksEnabledNewName=!0,this.bookPageText="",this.bookRef="",this.bookInfo=null,this.bookLanguages=[],this.books=[],this.lineIndexes=[],this.bookContent=[],this.bookChapter=null,this.converter=new o6,this.onLibraryLoadEvent=new Aw("onLibraryLoad"),this.onPageLoadEvent=new Aw("onPageLoad"),this.onBookInfoLoadEvent=new Aw("onBookInfoLoad"),this.onRouteEvent=new Aw("onRoute"),this.onNewTitleEvent=new Aw("onNewTitle"),this.config=null,this.uiConfig=null,this.memorialSvc=null,this.audioSvc=null,this.linesTransformer=null,this.removableSubscriptions=[]}onDestroy(){this.removableSubscriptions.forEach(o=>{o.unsubscribe()}),this.removableSubscriptions=[]}addSubscription(o){o&&this.removableSubscriptions.push(o)}setLineTransformer(o){return this.linesTransformer=o,this}setConfig(o){var a;this.config=o;let c=null===(a=this.config)||void 0===a?void 0:a.getApplication();return c&&c.libraryType&&c.libraryRef&&(this.libraryType=c.libraryType,this.libraryRef=c.libraryRef),this}setUIConfig(o){return this.uiConfig=o,this}setMemorial(o){return this.memorialSvc=o,this}setAudio(o){return this.audioSvc=o,this}addError(o){return this.errors.push(o),this}clear(o=!1,a=!1,c=[],u=!0,h=!1){return this.errors=[],this.books=[],this.lineIndexes=[],o&&(this.bookContent=[]),a&&(u&&(this.bookInfo=null),this.bookLanguages=c),h&&(this.bookChapter=null),this}loadLibraryInfo(){return this.send(null,Qle.builder().setLibraryType(this.libraryType).setLibraryRef(this.libraryRef)),this}tryLoadLibraryInfo(){null==this.libraryInfo?this.loadLibraryInfo():this.onLibraryLoadEvent.run(this.libraryInfo)}loadBookByName(o,a=[],c="",u=!0){this.bookName=o,this.bookNameNewLangs=a,this.bookChapterNewName=c,this.bookChapterNewName&&(this.bookChapter=null),this.bookLoadBooksEnabledNewName=u,this.retryLoadBookByName()}loadBookByPageText(o,a=!0,c="\u0420\u0443\u0441\u0441\u043a\u0438\u0439"){return this.bookPageText=o,this.clear(!0,!0,[c],a),this.retryLoadBookByName(),this}getBookSettingsNamePath(o){if(!this.libraryInfo)return null;let a=this.libraryInfo.settings.find(c=>c.name===o);return a||(a=this.libraryInfo.settings.find(c=>{var u;return null===(u=c.value2)||void 0===u?void 0:u.find(h=>h===o)})),a}getBookContentNamePath(o){if(!this.libraryInfo)return null;let a=this.libraryInfo.content.find(c=>c.name===o);if(a||(a=this.libraryInfo.content.find(c=>{var u;return null===(u=c.path2)||void 0===u?void 0:u.find(h=>h===o)})),!a){let c=R_.builder().parse(o);if(null!=c&&c.length&&c[0].length){let u=c[0][0];u.type==Fl.Link&&(a=this.getBookContentNamePath(u.name))}}return a}retryLoadBookByName(){if(this.libraryInfo)if(this.bookPageText)this.onPagesResponse(BV.builder().setPages([this.bookPageText])),this.bookPageText="";else{let o=this.getBookContentNamePath(this.bookName);o?this.loadBookByRef(o.path,this.bookNameNewLangs,this.bookLoadBooksEnabledNewName):this.addError(`\u041a\u043d\u0438\u0433\u0430 "${this.bookName}" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430.`)}else this.loadLibraryInfo()}loadBookByRef(o,a=[],c=!0){return this.bookRef=o,this.clear(!0,!0,a),this.loadBookInfo(null,c),this}isLanguageEnabled(o){return null!=this.bookLanguages.find(a=>a==o)}loadBookInfo(o=null,a=!0){return this.send(null,jle.builder().setLibraryType(this.libraryType).setBookRef(o||this.bookRef).setLoadBooksEnabled(a)),this}isPrevEnabled(){let o=!1;if(!this.bookChapter)return!1;if(this.bookContent.length){let a=this.bookContent[0];a.parsed&&a.parsed.content&&a.parsed.content.length>1&&(o=a.parsed.content[0].name!=this.bookChapter.name)}return o}isNextEnabled(){let o=!1;if(!this.bookChapter)return!1;if(this.bookContent.length){let a=this.bookContent[0];a.parsed&&a.parsed.content&&a.parsed.content.length>1&&(o=a.parsed.content[a.parsed.content.length-1].name!=this.bookChapter.name)}return o}loadNextPage(){if(!this.isNextEnabled())return;let o="";if(this.bookContent.length){let a=this.bookContent[0];if(a.parsed&&a.parsed.content&&a.parsed.content.length>1){let c=a.parsed.content.findIndex(u=>u.name==this.bookChapter.name);c>=0&&c+1<a.parsed.content.length&&(o=a.parsed.content[c+1].name)}}o&&this.loadPage(o)}loadPrevPage(){if(!this.isPrevEnabled())return;let o="";if(this.bookContent.length){let a=this.bookContent[0];if(a.parsed&&a.parsed.content&&a.parsed.content.length>1){let c=a.parsed.content.findIndex(u=>u.name==this.bookChapter.name);c>=1&&(o=a.parsed.content[c-1].name)}}o&&this.loadPage(o)}loadPage(o){let a=this.bookContent[0].parsed.content.find(c=>c.name===o);return a&&a!=this.bookChapter&&(this.bookName=this.getNormalBookName(),this.bookChapter=a,this.clear(),this.loadCurrentPages()),this}loadCurrentPages(){let o=Zle.builder();return this.runAll(this.bookContent,(a,c)=>{let u=a.parsed.settings.find(f=>"\u044f\u0437\u044b\u043a"===f.name.toLowerCase());if(u&&(this.isLanguageEnabled(u.value)||(u=null)),!u)return void c(!0);let h=this.getBookChapterNewName(),d=a.parsed.content.find(f=>h==f.name);this.bookChapterNewName="",null==d&&(d=a.parsed.content.find(f=>!this.bookChapter||this.bookChapter.name==f.name)),d&&(o.addBookPage(LV.builder().setBookPage(a.meta.bookRef).setBookPath(a.meta.path).setBookPage(d.path)),this.bookChapter||(this.bookChapter=d)),c(!0)},a=>{a&&this.send(null,o)}),this}post(o,a){switch(a.type){case Kle.TYPE:this.onLibraryInfoResponse(a);break;case Yle.TYPE:this.onBookInfoResponse(a);break;case Xle.TYPE:this.onBookResponse(a);break;case BV.TYPE:this.onPagesResponse(a);break;default:throw new Error(`Unknown message type: ${a.type}.`)}return this}onLibraryInfoResponse(o){try{this.libraryInfo=bookParserStatic.parse(o.metaContent,RS.builder())}catch(a){return this.addError(`\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438: ${o.libraryRef}: ${a}`)}return this.bookName||this.bookPageText?this.retryLoadBookByName():this.onLibraryLoadEvent.run(this.libraryInfo),this}onBookInfoResponse(o){try{this.bookInfo=bookParserStatic.parse(o.metaContent,RS.builder())}catch(a){return this.addError(`\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043a\u043d\u0438\u0433\u0438: ${o.bookRef}: ${a}`)}return o.loadBooksEnabled&&this.reloadBooks(),this.onBookInfoLoadEvent.run(this.bookInfo),this}reloadBooks(){this.clear(!0);let o=qle.builder().setLibraryType(this.libraryType).setBookRef(this.bookRef);this.bookLanguages.length&&this.bookInfo&&(this.bookLanguages=this.bookLanguages.filter(a=>null!=this.bookInfo.content.find(c=>c.name==a))),!this.bookLanguages.length&&this.bookInfo&&(this.bookLanguages=this.bookInfo.content.map(a=>a.name),this.bookLanguages.length>2&&(this.bookLanguages=this.bookLanguages.slice(0,2))),this.bookInfo&&this.bookLanguages.forEach(a=>{let c=this.bookInfo.content.find(u=>u.name===a);c&&o.addLanguage(c.path)}),this.send(null,o)}onBookResponse(o){return this.runAll(o.metaBooks,(a,c)=>{this.loadBook(a,c)},a=>{a&&this.loadCurrentPages()}),this}loadBook(o,a=null){try{var c=bookParserStatic.parse(o.content,{builder:RS.builder()});this.bookContent.push(x7.builder().setMeta(o).setParsed(c)),a&&a(!0)}catch(u){return this.addError(`\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043a\u043d\u0438\u0433\u0438: ${this.bookRef}: ${u}`)}return this}onPagesResponse(o){o.pages.forEach(a=>{this.loadBookPageText(a)}),this.onPageLoadEvent.run(null)}getStdSrc(){return"\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '';\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c(\u0442\u0435\u043a\u0441\u0442) {\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0422\u0435\u043a\u0441\u0442(\u0442\u0435\u043a\u0441\u0442);\n      }\n    }.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043e\u0434 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0432\u044b\u0432\u0435\u0441\u0442\u0438(_\u043a\u043e\u0434) {\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c '/*' + _\u043a\u043e\u0434 + '*/';\n      }\n    }.\u0432\u044b\u0432\u0435\u0441\u0442\u0438;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0432\u044b\u0432\u0435\u0441\u0442\u0438 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0432\u044b\u0432\u0435\u0441\u0442\u0438(\u0442\u0435\u043a\u0441\u0442) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442(\u0442\u0435\u043a\u0441\u0442);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0432\u044b\u0432\u0435\u0441\u0442\u0438;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0433\u0430\u043b\u043e\u0447\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0433\u0430\u043b\u043e\u0447\u043a\u0430(_\u0442\u0435\u043a\u0441\u0442, _\u0433\u0430\u043b\u043e\u0447\u043a\u0430, _\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a) {\n        id = \u043d\u043e\u0432\u0430\u044f\u0413\u0430\u043b\u043e\u0447\u043a\u0430(_\u0442\u0435\u043a\u0441\u0442,_\u0433\u0430\u043b\u043e\u0447\u043a\u0430,_\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0433\u0430\u043b\u043e\u0447\u043a\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043d\u043e\u043f\u043a\u0430(\u0442\u0435\u043a\u0441\u0442, \u0442\u0438\u043f, \u0441\u0441\u044b\u043b\u043a\u0430, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, \u0431\u043b\u043e\u043a) {\n        id = \u043d\u043e\u0432\u0430\u044f\u041a\u043d\u043e\u043f\u043a\u0430(\u0442\u0435\u043a\u0441\u0442,\u0442\u0438\u043f,\u0441\u0441\u044b\u043b\u043a\u0430,\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a,\u0431\u043b\u043e\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043d\u043e\u043f\u043a\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0441\u043f\u0438\u0441\u043e\u043a = \u043a\u043b\u0430\u0441\u0441 {\n      \u0441\u043f\u0438\u0441\u043e\u043a(\u0441\u0442\u0440\u043e\u043a\u0438,\u043d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0421\u043f\u0438\u0441\u043e\u043a(\u0441\u0442\u0440\u043e\u043a\u0438,\u043d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0441\u043f\u0438\u0441\u043e\u043a;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a = \u043a\u043b\u0430\u0441\u0441 {\n      \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a(\u0442\u043e\u043b\u044c\u043a\u043e\u0427\u0442\u0435\u043d\u0438\u0435, \u0438\u043c\u044f\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430, \u043d\u043e\u043c\u0435\u0440\u0421\u043b\u0430\u0432\u044b, \u043e\u0417\u0434\u0440\u0430\u0432\u0438\u0438, _id, _targetId) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a(\u0442\u043e\u043b\u044c\u043a\u043e\u0427\u0442\u0435\u043d\u0438\u0435, \u0438\u043c\u044f\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430, \u043d\u043e\u043c\u0435\u0440\u0421\u043b\u0430\u0432\u044b, \u043e\u0417\u0434\u0440\u0430\u0432\u0438\u0438, _id, _targetId);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u0438\u0433\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043d\u0438\u0433\u0430(\u0442\u0435\u043a\u0441\u0442\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b) {\n        id = \u043d\u043e\u0432\u0430\u044f\u041a\u043d\u0438\u0433\u0430(\u0442\u0435\u043a\u0441\u0442\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043d\u0438\u0433\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438(_\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438, _\u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a, _\u043a\u043b\u0430\u0441\u0441\u041b\u044d\u0439\u0431\u043b\u0430, _\u043d\u0435\u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a) {\n        id = \u043d\u043e\u0432\u044b\u0435\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438(_\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438, _\u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a,  _\u043a\u043b\u0430\u0441\u0441\u041b\u044d\u0439\u0431\u043b\u0430, _\u043d\u0435\u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.svg = \u043a\u043b\u0430\u0441\u0441 {\n      svg(_\u043b\u043e\u0433\u043e, _\u0448\u0438\u0440\u0438\u043d\u0430, _\u0432\u044b\u0441\u043e\u0442\u0430, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438) {\n        id = \u043d\u043e\u0432\u044b\u0439Svg(_\u043b\u043e\u0433\u043e, _\u0448\u0438\u0440\u0438\u043d\u0430, _\u0432\u044b\u0441\u043e\u0442\u0430, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.svg;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043c\u0435\u043d\u044e = \u043a\u043b\u0430\u0441\u0441 {\n      \u043c\u0435\u043d\u044e(_\u043f\u0443\u043d\u043a\u0442\u044b, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438) {\n        id = \u043d\u043e\u0432\u043e\u0435\u041c\u0435\u043d\u044e(_\u043f\u0443\u043d\u043a\u0442\u044b, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043c\u0435\u043d\u044e;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.div = \u043a\u043b\u0430\u0441\u0441 {\n      div(_\u043a\u043b\u0430\u0441\u0441\u044b, _\u0442\u0435\u043a\u0441\u0442, _\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c) {\n        id = \u043d\u043e\u0432\u044b\u0439Div(_\u043a\u043b\u0430\u0441\u0441\u044b, _\u0442\u0435\u043a\u0441\u0442, _\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.div;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0430\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0430\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440() {\n        id = \u043d\u043e\u0432\u044b\u0439\u0410\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440();\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0430\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0430\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d = \u043a\u043b\u0430\u0441\u0441 {\n      \u0430\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d(\u043f\u0443\u043d\u043a\u0442\u044b) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0410\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d(\u043f\u0443\u043d\u043a\u0442\u044b);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0430\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u043e\u0435\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435;\n    "}convertBookPageText(o,a,c){let h=(new QM).parseAndJoin(o),d=this.getStdSrc()+h+" \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",f=new u6,p=_=>{_.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0432\u0435\u0440\u0441\u0438\u044f",f.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.config?this.config.environment.version:"\u0412\u0435\u0440\u0441\u0438\u044f 2.0+")),f.addMethod(_,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0421\u043f\u0438\u0441\u043e\u043a\u041a\u043d\u0438\u0433\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438",(b,C)=>{let x=b.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432");return this.libraryInfo&&x.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.libraryInfo.content.map(S=>{let w=b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u0430\u0440\u0442\u0430");w.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(S.name));let O=this.libraryInfo.settings.find(T=>T.name==S.name);return w.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0438\u043c\u044f",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(O?O.value:"")),w.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430",b.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((O&&O.value2?O.value2:[]).map(T=>b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(T)))),w})),x}),f.addMethod(_,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0443\u044e\u041a\u043d\u0438\u0433\u0443",(b,C)=>{let x=this.uiConfig?this.uiConfig.ui.currentBook.getStringValue():"";return b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(x)}),f.addMethod(_,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0443\u044e\u0412\u0435\u0440\u0441\u0438\u044e",(b,C)=>{var S=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C[1]);let w=this.uiConfig?this.uiConfig.ui.visitedBooksHelp.getStringValue():"";if(this.uiConfig)switch(S.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()){case"\u043a\u043d\u0438\u0433\u0438":w=this.uiConfig.ui.visitedBooksHelp.getStringValue();break;case"\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a":w=this.uiConfig.ui.visitedMemorialHelp.getStringValue();break;case"\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440":w=this.uiConfig.ui.visitedCalculatorHelp.getStringValue();break;case"\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c":w=this.uiConfig.ui.visitedCalendarHelp.getStringValue();break;case"\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440":w=this.uiConfig.ui.visitedCompilerHelp.getStringValue();break;case"\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":w=this.uiConfig.ui.visitedSchedulerHelp.getStringValue()}return b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(w)}),f.addMethod(_,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0443\u044e\u0412\u0435\u0440\u0441\u0438\u044e",(b,C)=>{var S=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C[1]),O=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C[2]);if(this.uiConfig)switch(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()){case"\u043a\u043d\u0438\u0433\u0438":this.uiConfig.ui.visitedBooksHelp.setStringValue(S.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a":this.uiConfig.ui.visitedMemorialHelp.setStringValue(S.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440":this.uiConfig.ui.visitedCalculatorHelp.setStringValue(S.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c":this.uiConfig.ui.visitedCalendarHelp.setStringValue(S.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440":this.uiConfig.ui.visitedCompilerHelp.setStringValue(S.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":this.uiConfig.ui.visitedSchedulerHelp.setStringValue(S.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}return C[0]}),f.addMethod(_,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u041a\u043d\u0438\u0433\u0438",(b,C)=>{var x,w=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C[1]);return this.onNewTitleEvent.run(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),null===(x=this.config)||void 0===x||x.messageBus.sendMessage(ry.builder().setType("MemorialNewTitle").setText(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTarget("MemorialMainWindow")),C[0]}),f.addMethod(_,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0443\u044e\u041a\u0430\u0444\u0438\u0437\u043c\u0443",(b,C)=>{let S=this.uiConfig?this.uiConfig.ui.currentOffset.getNumberValue():0;S<0&&(S=this.uiConfig?this.uiConfig.ui.currentPersonOffset.getNumberValue():0);let w=Xn.getKafizmNumberBy(17,S);return b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(w)}),f.addMethod(_,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0443\u044e\u041a\u0430\u0444\u0438\u0437\u043c\u0443",(b,C)=>{var S=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C[1]);return this.uiConfig&&this.uiConfig.ui.currentOffset.setNumberValue(Xn.getOffsetByKafizmNumber(17,S.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e())),S}),f.addMethod(_,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0439\u041f\u0441\u0430\u043b\u043e\u043c",(b,C)=>{var x;let S=this.uiConfig?this.uiConfig.ui.memorialChapterRequested.getNumberValue():0;return null===(x=this.uiConfig)||void 0===x||x.ui.memorialChapterRequested.setNumberValue(-1),b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(S)}),f.addMethod(_,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0438\u0439\u041f\u0441\u0430\u043b\u043e\u043c",(b,C)=>{let x=this.uiConfig?this.uiConfig.ui.currentMemorialPsalom.getNumberValue():0;return b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(x)}),f.addMethod(_,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0438\u0439\u041f\u0441\u0430\u043b\u043e\u043c",(b,C)=>{var S=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C[1]);return this.uiConfig&&this.uiConfig.ui.currentMemorialPsalom.setNumberValue(S.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),S}),f.addMethod(_,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041c\u043e\u043b\u0438\u0442\u0432",(b,C)=>{let x=!this.uiConfig||this.uiConfig.ui.showMolitvy.getBooleanValue();return b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(x)}),f.addMethod(_,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041c\u043e\u043b\u0438\u0442\u0432",(b,C)=>{var S=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C[1]);return this.uiConfig&&this.uiConfig.ui.currentMemorialPsalom.setBooleanValue(S.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),S}),f.addMethod(_,"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c",(b,C)=>{let x=!this.uiConfig||this.uiConfig.ui.memorialPsaltir.getBooleanValue();return b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(x)}),f.addMethod(_,"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041e\u0431\u043b\u043e\u0436\u043a\u0443",(b,C)=>{let x=!this.uiConfig||this.uiConfig.ui.showFacePage.getBooleanValue();return b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(x)}),f.addMethod(_,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438",(b,C)=>{let x=b.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([]);if(this.memorialSvc){let S=this.memorialSvc.getMemorials();S&&S.items.forEach(w=>{var O;let T=b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u0430\u0440\u0442\u0430");null===(O=T.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===O||O.set("\u0438\u043c\u044f",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(w.name)),x.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().push(T)})}return x}),f.addMethod(_,"\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c\u0421\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u0438",(b,C)=>{var x,S,O=C[2],T=C[3],M=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C[1]),A=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O),I=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T);return I.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()||null===(x=this.audioSvc)||void 0===x||x.stop(),null===(S=this.audioSvc)||void 0===S||S.startCheckUI(E=>{},M.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),A.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),I.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)}),f.addMethod(_,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439",(b,C)=>{var x,S,O=C[2],T=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C[1]),M=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O);return null===(x=this.config)||void 0===x||x.messageBus.removeAllTargetHandlers(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this.addSubscription(null===(S=this.config)||void 0===S?void 0:S.messageBus.addTargetHandler(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),A=>{var I;null===(I=this.config)||void 0===I||I.post(()=>{let E=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));p(E),E.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0446\u0435\u043b\u0435\u0432\u043e\u0439\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",M);let P=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),B=P.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();B&&(B.set("\u0446\u0435\u043b\u044c",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(A.target)),B.set("\u0442\u0435\u043a\u0441\u0442",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(A.text)),B.set("\u0442\u0438\u043f",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(A.type)),B.set("\u043f\u043e\u0434\u0442\u0438\u043f",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(A.subType))),E.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",P),f.run("\n              \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0446\u0435\u043b\u0435\u0432\u043e\u0439\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435);\n              \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n            ",g,E,v).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})})),b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)}),f.addMethod(_,"\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c\u0426\u0435\u043b\u0435\u0432\u043e\u0435\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",(b,C)=>{var x,w=C[2],O=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C[1]),T=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w);return null===(x=this.config)||void 0===x||x.messageBus.sendMessage(ry.builder().setTarget(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setText(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())),T}),f.addBookmarksEnvironment(_,this.uiConfig)},g=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),m=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));p(m);let v=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));return f.addMethod(v,"\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0422\u0435\u043a\u0441\u0442",(_,b)=>{var x=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),S=this.convertBookPageText(x.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),a,c);return _.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(S)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442",(_,b)=>_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1])),f.addMethod(v,"\u043d\u043e\u0432\u0430\u044f\u0413\u0430\u043b\u043e\u0447\u043a\u0430",(_,b)=>{var x=b[2],S=b[3],w=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),O=x?_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x):null,T=S?_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S):null;let M=_s.builder().setClasses(o6.getLastClass("")).setText(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),A=d6.builder().setText(M.text).setOnClick(()=>{let E=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),P=_.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");p(E),E.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",A.tag.data),E.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0433\u0430\u043b\u043e\u0447\u043a\u0430",P),f.addMethod(P,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0441\u0442",(V,Q)=>{var N=V.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(Q[1]);return A.text=N.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),null}),f.addMethod(P,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0430\u043b\u043e\u0447\u043a\u0443",(V,Q)=>{var N=V.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(Q[1]);return A.classes.setCheck(N.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),null}),f.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0433\u0430\u043b\u043e\u0447\u043a\u0430);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",g,E,v).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()});A.classes.setCheck(!!O&&O.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),A.setTag(a0.builder().setData(T));let I=c();return a.set(I,M.setComponent(new Vn(LZe,A))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${I}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u0430\u044f\u041a\u043d\u043e\u043f\u043a\u0430",(_,b)=>{var x=b[2],S=b[3],w=b[4],O=b[5],T=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),M=x?_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x):null,A=S?_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S):null,I=w?_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w):null,E=O?_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O):null;let P=!1;A&&A.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().split(/[ \r\n\t]+/).forEach(j=>{"outline"===j&&(P=!0)});let B=_s.builder().setClasses(o6.getLastClass(M?M.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():"")).setText(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),V=jM.builder().setText(B.text).setOnClick(()=>{let j=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));p(j);let N=_.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");j.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",V.tag.data),j.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043a\u043d\u043e\u043f\u043a\u0430",N),f.addMethod(N,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0441\u0442",(z,$)=>{var G=z.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439($[1]);return V.text=G.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),null}),f.addMethod(N,"\u043f\u0435\u0440\u0435\u0445\u043e\u0434",(z,$)=>{var G=z.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439($[1]);return this.onRouteEvent.run(G?G.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():""),null}),f.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043a\u043d\u043e\u043f\u043a\u0430);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",g,j,v).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()});V.setTag(a0.builder().setData(I)),V.classes.setBlock(!E||E.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setType(M?M.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():"primary").setOutline(P);let Q=c();return a.set(Q,B.setComponent(new Vn(ice,V))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${Q}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u0421\u043f\u0438\u0441\u043e\u043a",(_,b)=>{var x=b[2],S=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),w=x?_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x):null;let O=_s.builder(),T=p6.builder().setItems(S?S.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(A=>this.makeFragmentComponents(A.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())):[]);T.classes.setOrdered(!!w&&w.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e());let M=c();return a.set(M,O.setComponent(new Vn(HZe,T))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${M}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a",(_,b)=>{var x=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),w=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[2]),T=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[3]),A=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[4]),E=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[5]),B=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[6]);let V=_s.builder(),Q=m6.builder();Q.setReadonly(x.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setText(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setId(E.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTargetId(B.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),Q.classes.setSlava1Zdrav(1==T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava1Upok(1==T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&!A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava2Zdrav(2==T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava2Upok(2==T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&!A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava3Zdrav(3==T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava3Upok(3==T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&!A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e());let j=c();return a.set(j,V.setComponent(new Vn(fce,Q))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${j}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u0430\u044f\u041a\u043d\u0438\u0433\u0430",(_,b)=>{var x=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]);let S=_s.builder(),w=c();return a.set(w,S.setComponent(new Vn(pu,Rl.builder().setText(x.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setHideUI(!0).setParallel(!0).setLinebreaks(!0).setLink(Pl.builder().setTextIsPage(!0).setBookName("Mem").setChapter("1").setStartLine(1).setEndLine(1e3).setOnRoute(O=>{}))))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${w}}`)}),f.addMethod(v,"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043d\u0438\u0433\u0443",(_,b)=>{var C,S=b[2],w=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),O=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S);let T=O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();T=T.substring(1,T.length-1);let M=a.get(T),A=null===(C=null==M?void 0:M.component)||void 0===C?void 0:C.data;return A&&A.setText(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),A?O:_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("")}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0435\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",(_,b)=>{var x=b[2],S=b[3],w=b[4],O=b[5],T=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),M=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x),A=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(w),I=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(S),E=O?_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O):null;I&&I.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(I=null);let P=_s.builder(),B=c(),V=au.builder().setItems(T.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(Q=>Q).map(Q=>ta.builder().setText(_.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(Q.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u043a\u0441\u0442")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(_.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(Q.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setSelected(_.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(Q.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()==M.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())));return I&&V.classes.setLabelNormal(I.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),A&&V.classes.setNoPrint(A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),V.setTag(a0.builder().setData(E)),V.setOnClick(Q=>{let j=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));p(j);let N=_.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");j.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",V.tag.data),j.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",N),j.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0442\u0435\u0433",_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Q.tag)),f.addMethod(N,"\u0432\u044b\u0431\u0440\u0430\u0442\u044c",(z,$)=>{var G=z.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439($[1]);return V.items.forEach(W=>W.setSelected(W.tag==G.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())),null}),f.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",g,j,v).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),a.set(B,P.setComponent(new Vn(XM,V))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${B}}`)}),f.addMethod(v,"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",(_,b)=>{var C,x=b[1],S=b[2],w=b[3],O=b[4],T=b[5],M=b[6],A=x?_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x):null,I=S?_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S):null,E=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(w),P=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(O),B=T?_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T):null,V=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(M);A&&A.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(A=null),I&&I.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(I=null),E&&E.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(E=null),P&&P.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(P=null),B&&B.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(B=null);let Q=V.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();Q=Q.substring(1,Q.length-1);let j=a.get(Q),N=null===(C=null==j?void 0:j.component)||void 0===C?void 0:C.data;return N&&(A?N.setItems(A.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(U=>U).map(U=>ta.builder().setText(_.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(U.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u043a\u0441\u0442")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(_.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(U.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setSelected(_.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(U.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()==(null==I?void 0:I.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())))):N.items.forEach(U=>U.setSelected(U.tag==(null==I?void 0:I.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())))),E&&N.classes.setLabelNormal(E.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),P&&N.classes.setNoPrint(P.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),B&&N.setTag(a0.builder().setData(B)),N?V:_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("")}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439Svg",(_,b)=>{var x=b[2],S=b[3],w=b[4],O=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),T=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x),M=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S),A=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w);let I=_s.builder(),E=c();return a.set(E,I.setComponent(new Vn(yYe,B6.builder().setText("").setGenName(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setSvgWidth(T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).setSvgHeight(M.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).updateClasses(P=>P.setPrintOnly(A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()))))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${E}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u043e\u0435\u041c\u0435\u043d\u044e",(_,b)=>{var x=b[2],S=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),w=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x);let O=_s.builder(),T=c(),M=Kp.builder().setText("").setWhiteBack(!0);return M.menuState.setGenName("MenuDay2").setPrintOnly(w.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),S.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(A=>A).forEach(A=>{M.addCommand(Ca.builder().setName(A.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(A.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))}),a.set(T,O.setComponent(new Vn(HM,M))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${T}}`)}),f.addMethod(v,"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u041c\u0435\u043d\u044e",(_,b)=>{var C,S=b[2],w=b[3],O=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),T=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S);let A=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();A=A.substring(1,A.length-1);let I=a.get(A),E=null===(C=null==I?void 0:I.component)||void 0===C?void 0:C.data;if(E){let P=$p.builder().setGenName("MenuDay2").setPrintOnly(T.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e());O.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(B=>B).forEach(B=>{P.addCommand(Ca.builder().setName(B.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(B.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))}),E.setMenuState(P)}return _.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${A}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439Div",(_,b)=>{var x=b[2],S=b[3],w=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),O=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x),T=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S);let M=O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),A=[],I="";M.startsWith("{")&&M.endsWith("}")&&(A=M.split(",").filter(V=>{let Q=!1;return V.startsWith("{")&&V.endsWith("}")&&(Q=!0),Q}).map(V=>V.substring(1,V.length-1)));let E=_s.builder(),P=c(),B=[];return A.forEach(V=>{let Q=a.get(V);Q&&(I||(I=V),B.push(Q))}),a.set(P,E.setComponent(new Vn(V6,KM.builder().setText(A.length?"":M).setId(I).setComponents(B.map(V=>V.component).filter(V=>!!V).map(V=>V)).setWaitingForSenderid(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).update(V=>{w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().split(/[ \r\n\t]+/).forEach(j=>{switch(j.toLowerCase()){case"\u0440\u0430\u0441\u0442\u044f\u0433\u0438\u0432\u0430\u0442\u044c":V.setFineText(!0);break;case"\u0440\u0430\u0437\u0440\u044b\u0432\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b\u0434\u043e":V.setPageBreakBefore(!0);break;case"\u0440\u0430\u0437\u0440\u044b\u0432\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b\u043f\u043e\u0441\u043b\u0435":V.setPageBreakAfter(!0);break;case"\u0442\u043e\u043b\u044c\u043a\u043e\u043f\u0440\u0438\u043f\u0435\u0447\u0430\u0442\u0438":V.setPrintOnly(!0);break;case"\u043d\u0435\u043f\u0440\u0438\u043f\u0435\u0447\u0430\u0442\u0438":V.setNoPrint(!0);break;default:V.addSClass(j)}})})))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${P}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u0410\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440",(_,b)=>{let C=_s.builder(),x=c();return a.set(x,C.setComponent(new Vn(DYe,H6.builder().setText("").update(S=>{})))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${x}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u0410\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d",(_,b)=>{var x=_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]);let S=G6.builder().setText("").update(T=>{});x.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(T=>T).forEach(T=>{var M,A,I,E;let P=null===(A=null===(M=T.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===M?void 0:M.get("\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"))||void 0===A?void 0:A.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),B=null===(E=null===(I=T.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===I?void 0:I.get("\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442"))||void 0===E?void 0:E.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();B&&(B=B.startsWith("{")?B.substring(1):B,B=B.endsWith("}")?B.substring(0,B.length-1):B);let V=a.get(B||"");V&&S.addItem(W6.builder().setTitle(P||"\u041f\u0443\u043d\u043a\u0442\u0438\u043a").setComponent(V.component))});let w=_s.builder(),O=c();return a.set(O,w.setComponent(new Vn(AYe,S))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${O}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440",(_,b)=>{_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]);let S=j6.builder().setText("").update(T=>{}),w=_s.builder(),O=c();return a.set(O,w.setComponent(new Vn(rst,S))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${O}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c",(_,b)=>{_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]);let S=s7.builder().setText("").update(T=>{}),w=_s.builder(),O=c();return a.set(O,w.setComponent(new Vn(ost,S))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${O}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440",(_,b)=>{_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]);let S=t7.builder().setText("").update(T=>{}),w=_s.builder(),O=c();return a.set(O,w.setComponent(new Vn(sst,S))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${O}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u043e\u0435\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",(_,b)=>{_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]);let S=b7.builder().setText("").update(T=>{}),w=_s.builder(),O=c();return a.set(O,w.setComponent(new Vn(Kst,S))),_.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${O}}`)}),f.run(d,g,m,v).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}makeFragmentComponents(o){let a=this.converter.parseFragments(new Map,h=>h,o),c=[NS.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430(!1).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0438\u043f(FS.\u0422\u0435\u043a\u0441\u0442)],u=I_.builder().setText(o);return u.config.setLineIndex(0).setBook(FA.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0438(c)),new Vn(GM,u)}loadBookPageText(o,a=null){if(!o)return void(a&&a(!1));let c=0,h=new Map,d=FA.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0438([]);this.convertBookPageText(o,h,()=>""+c++).split("\n").forEach((p,g)=>{let m=this.transformLine(p),v=this.converter.parseFragments(h,_=>{let b="";if(this.libraryInfo){let C=this.libraryInfo.content.find(x=>{var S;return null===(S=x.path2)||void 0===S?void 0:S.find(w=>w==_)});C&&(b=C.name)}return b},m.trim(),(!this.uiConfig||this.uiConfig.ui.coloredTranslations.getBooleanValue())&&this.books.length%2?"redDark":"red"),y=I_.builder().setText(m.trim());y.config.setBook(d).setBookSvc(this),d.\u0441\u0442\u0440\u043e\u043a\u0438.push(NS.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b(v).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442(new Vn(GM,y)))}),this.books.push(d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438(this.books.length)),this.generateLineIndexes(),a&&a(!0)}isZeroLineFound(o){return 0==o[0].fragments.length||1==o[0].\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.length&&null!=o[0].\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.find(a=>!!a.classes.redDark||!!a.classes.red)}generateLineIndexes(){this.lineIndexes=[];let o=this.books.map(h=>h.\u0441\u0442\u0440\u043e\u043a\u0438.length+(this.isZeroLineFound(h.\u0441\u0442\u0440\u043e\u043a\u0438)?0:1)).reduce((h,d)=>Math.max(h,d)),a=!1;this.books.forEach(h=>{let d=!1;this.isZeroLineFound(h.\u0441\u0442\u0440\u043e\u043a\u0438)&&(d=a=!0);let f=()=>NS.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442(new Vn(GM,I_.builder())),p=h.\u0441\u0442\u0440\u043e\u043a\u0438.map(g=>0==g.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.length).reduce((g,m)=>g&&m,!0);for(h.\u0441\u0442\u0440\u043e\u043a\u0438.length<o&&!d&&(h.\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a(),h.\u0441\u0442\u0440\u043e\u043a\u0438.unshift(f()));h.\u0441\u0442\u0440\u043e\u043a\u0438.length<o;)p&&h.\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a(),h.\u0441\u0442\u0440\u043e\u043a\u0438.push(f())});let c=this.getNormalBookName(),u=c.indexOf("VZ")>=0||c.indexOf("NZ")>=0;this.books.forEach((h,d)=>{for(h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438(d),h.\u0441\u0442\u0440\u043e\u043a\u0438.forEach((f,p)=>{f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430(u),f.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442&&f.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442.data.constructor===I_&&f.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442.data.config.setLineIndex(p)});this.lineIndexes.length<h.\u0441\u0442\u0440\u043e\u043a\u0438.length;)this.lineIndexes.push(this.lineIndexes.length)})}toggleLanguage(o){return this.isLanguageEnabled(o)?this.bookLanguages=this.bookLanguages.filter(a=>a!=o):this.bookInfo&&null!=this.bookInfo.content.find(a=>a.name==o)&&this.bookLanguages.push(o),!this.bookLanguages.length&&this.bookInfo&&this.bookInfo.content&&this.bookLanguages.push(this.bookInfo.content[0].name),this}getShortBookName(o=null){if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let a=o||this.bookName,c=this.getBookContentNamePath(a),u=a;if(c){if(!c.path2||!c.path2.length)throw new Error(`\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u0438\u043c\u044f \u0434\u043b\u044f \u043a\u043d\u0438\u0433\u0438 "${a}" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.`);u=c.path2[0]}return u}getNormalBookName(){if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let o=this.getBookContentNamePath(this.bookName),a=this.bookName;return o&&(a=o.name),a}getBookChapterNewName(){let o=this.bookChapterNewName,a=R_.builder().parse(this.bookName);if(null!=a&&a.length&&a[0].length){let c=a[0][0];c.type==Fl.Link&&(o=""+c.startChapter)}return o}getBookTitleName(){if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let o=this.getBookSettingsNamePath(this.bookName),a=this.bookName;return o&&(a=o.value),a}getChapterTitleName(){var o,a;if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let c=this.bookChapter?this.bookChapter.name:"1",u=null===(a=null===(o=this.bookContent[0])||void 0===o?void 0:o.parsed)||void 0===a?void 0:a.settings.find(d=>d.name===c),h="";if(u){h=u.value;let d=".txt";h.endsWith(d)&&(h=h.substring(0,h.length-d.length)),+h==+c&&(h="")}return h}getNormalBookNameByBookPath(o){var a;let c=null===(a=this.libraryInfo)||void 0===a?void 0:a.content.find(u=>o.startsWith(u.path));return c?c.name:null}transformLine(o){return this.linesTransformer?this.linesTransformer.transform(o):o}}class S7{constructor(){}static builder(){return new S7}}class w7 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.bookName="",this.bookTitle="",this.bookChapter="",this.bookLanguages=[],this.printEventsEmitter=new wt,this.printerHandler=null,this.showSettings=!0}static builder(){return new w7("",null,null,S7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setBookName(o){return this.bookName=o,this}setBookTitle(o){return this.bookTitle=o,this}setBookChapter(o){return this.bookChapter=o,this}setBookLanguages(o){return this.bookLanguages=o,this}setEpubPrinterHandler(o){return this.printerHandler=o,this}setShowSettings(o){return this.showSettings=o,this}}const Jst=["booksViewTables"];function eot(l,o){1&l&&me(0,"app-dynamic-errors",18),2&l&&F("data",Z(2).bookTitleData)}const tot=function(l,o){return{btn:!0,"btn-primary":l,"btn-primary-outline":o,"btn-block":!0}};function not(l,o){if(1&l){const a=gt();D(0,"clr-accordion-panel",24),ee("clrAccordionPanelOpenChange",function(u){return Le(a),Z(2).showSettings=u}),D(1,"clr-accordion-title"),ne(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),k(),D(3,"clr-accordion-content"),me(4,"app-dynamic-settings"),D(5,"div",25),D(6,"div",26),D(7,"div",27),D(8,"button",28),ee("click",function(){return Le(a),Z(2).printBook()}),me(9,"clr-icon",29),ne(10," \u041f\u0435\u0447\u0430\u0442\u044c PDF "),k(),k(),D(11,"div",27),D(12,"button",30),ee("click",function(){return Le(a),Z(2).printBookEpub()}),me(13,"clr-icon",31),ne(14," \u041f\u0435\u0447\u0430\u0442\u044c EPUB "),k(),k(),k(),k(),k(),k()}if(2&l){const a=Z(2);F("clrAccordionPanelOpen",a.showSettings),R(12),F("ngClass",ps(2,tot,!a.modalPrintEpubFlag,a.modalPrintEpubFlag))}}function iot(l,o){if(1&l){const a=gt();D(0,"clr-accordion-panel",24),ee("clrAccordionPanelOpenChange",function(u){return Le(a),Z(2).showLanguages=u}),D(1,"clr-accordion-title"),ne(2,"\u042f\u0437\u044b\u043a\u0438 \u0438 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b"),k(),D(3,"clr-accordion-content"),me(4,"app-dynamic-content-toolbar",18),k(),k()}if(2&l){const a=Z(2);F("clrAccordionPanelOpen",a.showLanguages),R(4),F("data",a.toolbarLangData)}}function rot(l,o){if(1&l){const a=gt();D(0,"clr-accordion-panel",24),ee("clrAccordionPanelOpenChange",function(u){return Le(a),Z(2).showChapters=u}),D(1,"clr-accordion-title"),ne(2,"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435"),k(),D(3,"clr-accordion-content"),me(4,"app-dynamic-content-toolbar",18),k(),k()}if(2&l){const a=Z(2);F("clrAccordionPanelOpen",a.showChapters),R(4),F("data",a.toolbarData)}}function sot(l,o){if(1&l&&(D(0,"div",3),me(1,"app-dynamic-errors",18),Y(2,eot,1,1,"app-dynamic-errors",21),D(3,"clr-accordion",22),Y(4,not,15,5,"clr-accordion-panel",23),Y(5,iot,5,2,"clr-accordion-panel",23),Y(6,rot,5,2,"clr-accordion-panel",23),k(),k()),2&l){const a=Z();F("ngClass",a.getMainDivClasses()),R(1),F("data",a.errorsData),R(1),F("ngIf",a.toolbarLangData),R(2),F("ngIf",a.showSettings),R(1),F("ngIf",a.showLanguages),R(1),F("ngIf",a.showChapters&&!a.staticView)}}function oot(l,o){if(1&l){const a=gt();D(0,"button",30),ee("click",function(){return Le(a),Z(2).onPrev()}),ne(1,"<<"),k()}2&l&&F("ngClass",Z(2).getChapterButtonClass())}function aot(l,o){if(1&l){const a=gt();D(0,"button",30),ee("click",function(){return Le(a),Z(2).scrollToText()}),ne(1),k()}if(2&l){const a=Z(2);F("ngClass",a.getChapterButtonClass()),R(1),en(a.getCurrentChapterName())}}function lot(l,o){if(1&l){const a=gt();D(0,"button",30),ee("click",function(){return Le(a),Z(2).onNext()}),ne(1,">>"),k()}2&l&&F("ngClass",Z(2).getChapterButtonClass())}const cot=function(l){return{"clr-row":!0,"fade-in-3":!0,"bottom-top-space":!0,"no-print":l}};function uot(l,o){if(1&l&&(D(0,"div",3),D(1,"div",32),Y(2,oot,2,1,"button",33),k(),D(3,"div",27),Y(4,aot,2,2,"button",33),k(),D(5,"div",32),Y(6,lot,2,1,"button",33),k(),k()),2&l){const a=Z();F("ngClass",eo(4,cot,!!a.changesDetectorBookDataText.oldRawValue)),R(2),F("ngIf",a.bookSvc.isPrevEnabled()),R(2),F("ngIf",a.bookSvc.lineIndexes.length),R(2),F("ngIf",a.bookSvc.isNextEnabled())}}function hot(l,o){1&l&&(D(0,"div",36),D(1,"div",37),me(2,"app-dynamic-spinner"),k(),k())}function dot(l,o){if(1&l&&(D(0,"span",3),ne(1),k()),2&l){const a=o.$implicit;F("ngClass",a.classes),R(1),en(a.text)}}function fot(l,o){if(1&l&&(D(0,"div",3),Y(1,dot,2,2,"span",39),k()),2&l){const a=o.$implicit,c=o.index,u=Z(3);F("ngClass",u.getColumnClass(a,c,u.bookSvc.books.length)),R(1),F("ngForOf",u.getBookFragments(c,a,-1))}}function pot(l,o){if(1&l&&(D(0,"div",38),Y(1,fot,2,2,"div",39),k()),2&l){const a=Z(2);R(1),F("ngForOf",a.bookSvc.books)}}function got(l,o){if(1&l){const a=gt();D(0,"div",3),D(1,"span",30),ee("click",function(){Le(a);const u=Z().$implicit;return Z(2).selectLine(u)}),me(2,"app-add-component",40),k(),k()}if(2&l){const a=o.$implicit,c=o.index,u=Z().$implicit,h=Z(2);F("ngClass",h.getColumnClass(a,c,h.bookSvc.books.length)),R(1),F("ngClass",h.getLineSelectionClass(a,u)),R(1),F("component",h.getComponent(a,u))}}function mot(l,o){if(1&l&&(D(0,"div",38),Y(1,got,3,3,"div",39),k()),2&l){const a=Z(2);R(1),F("ngForOf",a.bookSvc.books)}}function vot(l,o){if(1&l&&(D(0,"div"),Y(1,hot,3,0,"div",6),Y(2,pot,2,1,"div",34),Y(3,mot,2,1,"div",35),k()),2&l){const a=Z();R(1),F("ngIf",!a.bookSvc.lineIndexes.length),R(1),F("ngIf",!a.hideUI),R(1),F("ngForOf",a.getBookIndexes(a.bookSvc.lineIndexes))}}function yot(l,o){1&l&&(D(0,"div",37),me(1,"app-dynamic-spinner"),k())}function _ot(l,o){if(1&l&&(D(0,"span",3),ne(1),k()),2&l){const a=o.$implicit;F("ngClass",a.classes),R(1),en(a.text)}}function bot(l,o){if(1&l&&(D(0,"div",43),Y(1,_ot,2,2,"span",39),k()),2&l){const a=o.$implicit,c=o.index,u=Z(2);F("ngClass",u.getColumnClass(a,c,u.bookSvc.books.length))("hidden",u.hideUI),R(1),F("ngForOf",u.getBookFragments(c,a,-1))}}function xot(l,o){1&l&&(D(0,"span",46),ne(1,"."),k())}function Cot(l,o){if(1&l){const a=gt();D(0,"span",30),ee("click",function(){const h=Le(a).$implicit;return Z(3).selectLine(h)}),D(1,"span"),me(2,"app-add-component",40),k(),Y(3,xot,2,0,"span",45),k()}if(2&l){const a=o.$implicit,c=Z().$implicit,u=Z(2);F("ngClass",u.getLineSelectionClass(c,a)),R(2),F("component",u.getComponent(c,a)),R(1),F("ngIf",u.isSpaceAppended(c,a))}}function Sot(l,o){if(1&l&&(D(0,"div",3),Y(1,Cot,4,3,"span",44),k()),2&l){const a=o.$implicit,c=o.index,u=Z(2);F("ngClass",u.getColumnClass(a,c,u.bookSvc.books.length)),R(1),F("ngForOf",u.getBookIndexes(u.bookSvc.lineIndexes))}}function wot(l,o){if(1&l&&(D(0,"div",36),Y(1,yot,2,0,"div",41),Y(2,bot,2,3,"div",42),Y(3,Sot,2,2,"div",39),k()),2&l){const a=Z();R(1),F("ngIf",!a.bookSvc.lineIndexes.length),R(1),F("ngForOf",a.bookSvc.books),R(1),F("ngForOf",a.bookSvc.books)}}function Tot(l,o){1&l&&(D(0,"div",49),me(1,"app-dynamic-spinner"),k())}function Oot(l,o){if(1&l&&(D(0,"span",3),ne(1),k()),2&l){const a=o.$implicit;F("ngClass",a.classes),R(1),en(a.text)}}function Dot(l,o){if(1&l&&(D(0,"div",3),D(1,"div",50),Y(2,Oot,2,2,"span",39),k(),k()),2&l){const a=o.$implicit,c=o.index,u=Z(3);F("ngClass",u.getRowClass(a,c,u.bookSvc.books.length)),R(2),F("ngForOf",u.getBookFragments(c,a,-1))}}function kot(l,o){if(1&l&&(D(0,"div",49),Y(1,Dot,3,2,"div",39),k()),2&l){const a=Z(2);R(1),F("ngForOf",a.bookSvc.books)}}function Mot(l,o){if(1&l){const a=gt();D(0,"div",3),D(1,"div",50),D(2,"span",30),ee("click",function(){Le(a);const u=Z().$implicit;return Z(2).selectLine(u)}),me(3,"app-add-component",40),k(),k(),k()}if(2&l){const a=o.$implicit,c=o.index,u=Z().$implicit,h=Z(2);F("ngClass",h.getRowClass(a,c,h.bookSvc.books.length)),R(2),F("ngClass",h.getLineSelectionClass(a,u)),R(1),F("component",h.getComponent(a,u))}}function Eot(l,o){if(1&l&&(D(0,"div",49),Y(1,Mot,4,3,"div",39),k()),2&l){const a=Z(2);R(1),F("ngForOf",a.bookSvc.books)}}function Aot(l,o){if(1&l&&(D(0,"div"),Y(1,Tot,2,0,"div",47),Y(2,kot,2,1,"div",47),Y(3,Eot,2,1,"div",48),k()),2&l){const a=Z();R(1),F("ngIf",!a.bookSvc.lineIndexes.length),R(1),F("ngIf",!a.hideUI),R(1),F("ngForOf",a.getBookIndexes(a.bookSvc.lineIndexes))}}function Iot(l,o){1&l&&(D(0,"div",37),me(1,"app-dynamic-spinner"),k())}function Pot(l,o){1&l&&(D(0,"span",46),ne(1,"."),k())}function Rot(l,o){if(1&l&&(D(0,"span",3),ne(1),k()),2&l){const a=o.$implicit;F("ngClass",a.classes),R(1),en(a.text)}}function Fot(l,o){if(1&l&&(D(0,"span",3),Y(1,Pot,2,0,"span",45),Y(2,Rot,2,2,"span",39),k()),2&l){const a=o.$implicit,c=o.index,u=Z(3);F("ngClass",u.getRowClass(a,c,u.bookSvc.books.length,!1)),R(1),F("ngIf",c>0),R(1),F("ngForOf",u.getBookFragments(c,a,-1))}}function Not(l,o){if(1&l&&(D(0,"div",50),Y(1,Fot,3,3,"span",39),k()),2&l){const a=Z(2);R(1),F("ngForOf",a.bookSvc.books)}}function Lot(l,o){1&l&&(D(0,"span",46),ne(1,"."),k())}function Bot(l,o){if(1&l){const a=gt();D(0,"span",3),D(1,"span",30),ee("click",function(){Le(a);const u=Z().$implicit;return Z(2).selectLine(u)}),Y(2,Lot,2,0,"span",45),me(3,"app-add-component",40),k(),k()}if(2&l){const a=o.$implicit,c=o.index,u=Z().$implicit,h=Z(2);F("ngClass",h.getRowClass(a,c,h.bookSvc.books.length,!1)),R(1),F("ngClass",h.getLineSelectionClass(a,u)),R(1),F("ngIf",c>0||h.isLineIndexed(a,u)),R(1),F("component",h.getComponent(a,u))}}function Vot(l,o){if(1&l&&(D(0,"span"),Y(1,Bot,4,4,"span",39),k()),2&l){const a=Z(2);R(1),F("ngForOf",a.bookSvc.books)}}function zot(l,o){if(1&l&&(D(0,"div",51),Y(1,Iot,2,0,"div",41),Y(2,Not,2,1,"div",52),D(3,"div",50),Y(4,Vot,2,1,"span",53),k(),k()),2&l){const a=Z();R(1),F("ngIf",!a.bookSvc.lineIndexes.length),R(1),F("ngIf",!a.hideUI),R(2),F("ngForOf",a.getBookIndexes(a.bookSvc.lineIndexes))}}function Uot(l,o){if(1&l){const a=gt();D(0,"button",30),ee("click",function(){return Le(a),Z(2).onPrev()}),ne(1,"<<"),k()}2&l&&F("ngClass",Z(2).getChapterButtonClass())}function Hot(l,o){if(1&l){const a=gt();D(0,"button",30),ee("click",function(){return Le(a),Z(2).scrollToText()}),ne(1),k()}if(2&l){const a=Z(2);F("ngClass",a.getChapterButtonClass()),R(1),en(a.getCurrentChapterName())}}function $ot(l,o){if(1&l){const a=gt();D(0,"button",30),ee("click",function(){return Le(a),Z(2).onNext()}),ne(1,">>"),k()}2&l&&F("ngClass",Z(2).getChapterButtonClass())}const Wot=function(l){return{"clr-row":!0,"fade-in-3":!0,"top-space":!0,"no-print":l}};function Got(l,o){if(1&l&&(D(0,"div",3),D(1,"div",32),Y(2,Uot,2,1,"button",33),k(),D(3,"div",27),Y(4,Hot,2,2,"button",33),k(),D(5,"div",32),Y(6,$ot,2,1,"button",33),k(),k()),2&l){const a=Z();F("ngClass",eo(4,Wot,!!a.changesDetectorBookDataText.oldRawValue)),R(2),F("ngIf",a.bookSvc.isPrevEnabled()),R(2),F("ngIf",a.bookSvc.lineIndexes.length),R(2),F("ngIf",a.bookSvc.isNextEnabled())}}function Qot(l,o){if(1&l){const a=gt();D(0,"div",27),D(1,"button",55),ee("click",function(){return Le(a),Z(2).printBookEpub()}),me(2,"clr-icon",58),ne(3,"\u041f\u0435\u0447\u0430\u0442\u044c EPUB"),k(),k()}}const jot=function(l,o){return{"clr-col-6":l,"clr-col-12":o}};function qot(l,o){if(1&l){const a=gt();D(0,"div",54),D(1,"div",3),D(2,"button",55),ee("click",function(){return Le(a),Z().printBook()}),me(3,"clr-icon",56),ne(4,"\u041f\u0435\u0447\u0430\u0442\u044c PDF"),k(),k(),Y(5,Qot,4,0,"div",57),k()}if(2&l){const a=Z();R(1),F("ngClass",ps(2,jot,a.bookData.enableEpub,!a.bookData.enableEpub)),R(4),F("ngIf",a.bookData.enableEpub)}}function Zot(l,o){if(1&l){const a=gt();D(0,"button",15),ee("click",function(){return Le(a),Z().modalPrintEpubFlag=!1}),me(1,"clr-icon",59),ne(2," \u041e\u0442\u043c\u0435\u043d\u0430"),k()}}function Xot(l,o){if(1&l){const a=gt();D(0,"button",14),ee("click",function(){return Le(a),Z().onStartPrintEpub()}),me(1,"clr-icon",56),ne(2," \u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c"),k()}}class NA{constructor(o){this.transformers=o}static builder(){return new NA([])}addTransformer(o){return this.transformers.push(o),this}transform(o){let a=o;return this.transformers.forEach(c=>a=c.transform(a)),a}}class LA{static builder(){return new LA}transform(o){let a="";for(let c=0;c<o.length;c++){let u=o.charAt(c);a+="["==u?"{\u043a}"+u:"]"==u?u+"{/\u043a}":u}return a}}class BA{constructor(o=200){this.maxStringLength=o}static builder(){return new BA}getIndexCount(o,a){let c=0,u=0;for(;u<o.length;){let h=o.indexOf(a,u);h<0?u=o.length:(++c,u=h+a.length)}return c}transform(o){let a=o.indexOf(":"),c=o;if(a>=0&&a<=this.maxStringLength&&a+1==o.length){let u=o.substring(0,a+1),h=u.toLowerCase();[{str:".",count:0},{str:"/",count:0}].map(d=>this.getIndexCount(h,d.str)<=d.count).reduce((d,f)=>f&&d,!0)&&[{str:"\u0442\u0440\u043e\u043f\u0430\u0440",count:1},{str:"\u043a\u043e\u043d\u0434\u0430\u043a",count:1},{str:"\u0433\u043b\u0430\u0441",count:1}].map(d=>this.getIndexCount(h,d.str)>=d.count).reduce((d,f)=>f||d,!1)&&(u.startsWith("*")&&(u=u.substring(1)),c=`{\u043a}${u}{/\u043a}${o.substring(a+1)}`)}return c}}class T7{constructor(o){this.search=o,this.includeWords=[],this.excludeWords=[]}static builder(){return new T7("")}setup(){let o=this.search.split(/\s+/);this.includeWords=[],this.excludeWords=[];for(let a=0;a<o.length;++a)if("\u041d\u0415"==o[a]){if(a+1<o.length){let c=o[++a].trim();c&&this.excludeWords.push(c.toLowerCase())}}else o[a].trim()&&this.includeWords.push(o[a].trim().toLowerCase())}setSearch(o){return this.search=o,this.setup(),this}startsWith(o,a,c){let u="";return c.forEach(h=>{o.startsWith(h,a)&&u.length<h.length&&(u=h)}),u}transform(o){if(0==this.includeWords.length)return o;let a=o.toLowerCase(),c="",u=-1,h=d=>{let f=0;if(u>=0){let p=o.substring(u,d);c+=p,f=p.length,u=-1}return f};for(let d=0;d<o.length;){let f=this.startsWith(a,d,this.includeWords);if(f){let p=d;h(d),c+=`{\u043a}${o.substring(p,p+f.length)}{/\u043a}`,d+=f.length}else u<0&&(u=d),++d}return h(o.length),c}}let pu=(()=>{class l{constructor(a,c,u,h,d,f,p){this.config=a,this.uiConfig=c,this.cacheService=u,this.bookmarksSvc=h,this.memorialSvc=d,this.themeSvc=f,this.audioSvc=p,this.ready=!1,this.bookTitleData=rh.builder(),this.errorsData=rh.builder(),this.stgShowSettings=o0.builder(),this.stgLanguages=o0.builder(),this.stgChapters=o0.builder(),this.allSettings=LM.builder().add(this.stgShowSettings).add(this.stgLanguages).add(this.stgChapters),this.changesDetectorSendReadyMessage=Gs.builder(),this.changesDetectorBookDataText=Gs.builder(),this.changesDetectorFacePage=Gs.builder(),this.changesDetectorErrors=Gs.builder(),this.changesDetectorNewTitle=Gs.builder(),this.changesDetectorRequestedPrintLogName=Gs.builder(),this.changesDetectorLanguages=Gs.builder(),this.changesDetectorChapters=Gs.builder(),this.changesDetectorChapters2=Gs.builder(),this.changesDetectorChapters3=Gs.builder(),this.fineTextDetector=wa.builder(),this.getColumnClassDetector=wa.builder(),this.getBookIndexesDetector=wa.builder(),this.getChapterButtonClassDetector=wa.builder(),this.getMainDivClassesDetector=wa.builder(),this.menuLinksOld=null,this.menuLinks=null,this.dToolbarLangData=au.builder().setItems([]).setOnClick(g=>{g.setSelected(!g.selected),this.bookSvc.toggleLanguage(g.tag).reloadBooks(),this.saveChapter()}),this.dToolbarData=au.builder().setItems([]).setOnClick(g=>{if(this.toolbarData.items.forEach(m=>m.setSelected(m===g)),"\u0412\u0441\u0435"==g.text){let m=this.bookSvc.getShortBookName(null),v=this.bookSvc.bookContent.length?this.bookSvc.bookContent[0]:null;if(v){let _=v.parsed.content.map(b=>`${m}.${b.name}:1-1000!/*\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.div('\u0440\u0430\u0437\u0440\u044b\u0432\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b\u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438', '', '');*/`).join("\r\n");this.changesDetectorBookDataText.checkAndUpdate(_),this.bookSvc.loadBookByPageText(_,!1,"")}}else this.changesDetectorBookDataText.checkAndUpdate(""),this.bookSvc.bookContent.length?this.bookSvc.loadPage(g.text):this.config.post(()=>{this.uiConfig.ui.currentChapter.setStringValue(g.text),this.bookSvc.clear(void 0,void 0,void 0,void 0,!0),this.reload()});this.saveChapter()}),this.startLineSelection=-1,this.endLineSelection=-1,this.modalAddBookmarkFlag=!1,this.modalPrintEpubFlag=!1,this.printEpubData=w7.builder(),this.printEpubDataEventsSubscription=null,this.printing=!1,this.requestedPrintLogName="",this.printLogName="\u041a\u043d\u0438\u0433\u0438",this.workerSvc=Ta.builder(),this.bookServerSvc=new UV((g,m)=>{this.config.post(()=>{this.bookSvc.post(g,m)})}),this.bookSvc=new C7((g,m)=>{this.config.post(()=>{this.workerSvc.enabled()?this.workerSvc.sendMessage(m):this.bookServerSvc.post(g,m)})}),this.handleMemorialNewTitleTargetSubscriptioin=null}get showSettings(){return this.stgShowSettings.enabled}set showSettings(a){this.stgShowSettings.setEnabled(a)}get showLanguages(){return this.stgLanguages.enabled}set showLanguages(a){this.stgLanguages.setEnabled(a)}get showChapters(){return this.stgChapters.enabled}set showChapters(a){this.stgChapters.setEnabled(a)}get toolbarLangData(){return this.syncToolbarData(),this.dToolbarLangData}get toolbarData(){return this.syncToolbarData(),this.dToolbarData}get staticView(){return this.bookData.link&&(this.bookData.link.textIsPage||this.bookData.link.chapter&&(this.bookData.link.startLine>0||this.bookData.link.endLine>0))}get hideUI(){return this.bookData.hideUI}get showPrintButtons(){return this.bookData.showPrintButtons}getMenuLinks(){return this.menuLinks||(this.menuLinks=this.bookData.menuLinks,null!=this.menuLinks||(this.menuLinks=[],["\u043c\u0435\u043d\u044e","\u043a\u043d\u0438\u0433\u0430","\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438","\u0441\u043f\u0440\u0430\u0432\u043a\u0430"].forEach(a=>{switch(a){case"\u043c\u0435\u043d\u044e":this.menuLinks.push(qn.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("cog").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("")},0)}).setIsActive(()=>!1));break;case"\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a":this.menuLinks.push(qn.builder().setLink("#").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("users").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("")},0)}).setIsActive(()=>!1));break;case"\u043a\u043d\u0438\u0433\u0430":this.menuLinks.push(qn.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0430").setShape("book").setIsActive(()=>!0));break;case"\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438":this.menuLinks.push(qn.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("bookmark").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438")},0)}).setIsActive(()=>!1));break;case"\u0441\u043f\u0440\u0430\u0432\u043a\u0430":this.menuLinks.push(qn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP")},0)}).setIsActive(()=>{var c;let u=null===(c=this.bookSvc.bookInfo)||void 0===c?void 0:c.settings.find(h=>"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"==h.name.toLowerCase());return!!u&&"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"==u.value}))}}))),this.menuLinks}saveChapter(){var a,c;if(this.bookSvc.bookChapter){this.uiConfig.ui.currentChapter.setStringValue(this.bookSvc.bookChapter.name),this.uiConfig.ui.currentLanguages.setStringValue(this.bookSvc.bookLanguages.join("|"));let u=null===(a=this.bookSvc.bookInfo)||void 0===a?void 0:a.settings.find(f=>"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"==f.name.toLowerCase()),h=null===(c=this.bookSvc.libraryInfo)||void 0===c?void 0:c.content.find(f=>f.name==this.bookSvc.bookName),d=h?h.path2[0]+". "+this.bookSvc.bookChapter.name:"";this.uiConfig.ui.currentBookName.setStringValue(u?u.value:""),this.uiConfig.ui.currentBookLink.setStringValue(d)}}get parallel(){return null!=this.bookData.parallel?this.bookData.parallel:this.uiConfig.ui.parallel.getAndVerifyBooleanValue()}get lineBreaks(){return null!=this.bookData.linebreaks?this.bookData.linebreaks:this.uiConfig.ui.lineBreaks.getAndVerifyBooleanValue()}get bookData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){this.bookData.printerHandler.setHandler(a=>this.onPrintEpub(a)),this.bookSvc.onNewTitleEvent.setOnEventHandler((a,c)=>this.requestedPrintLogName=""+c),this.bookData.handleMemorialNewTitleTarget&&(this.handleMemorialNewTitleTargetSubscriptioin&&this.handleMemorialNewTitleTargetSubscriptioin.unsubscribe(),this.handleMemorialNewTitleTargetSubscriptioin=this.config.messageBus.addTargetHandler(this.bookData.handleMemorialNewTitleTarget,a=>{"MemorialNewTitle"===a.type&&this.config.post(()=>{this.requestedPrintLogName=""+a.text})}))}ngOnDestroy(){this.handleMemorialNewTitleTargetSubscriptioin&&(this.handleMemorialNewTitleTargetSubscriptioin.unsubscribe(),this.handleMemorialNewTitleTargetSubscriptioin=null),this.bookSvc.onNewTitleEvent.setOnEventHandler(null),this.bookSvc.onPageLoadEvent.setOnEventHandler(null),this.workerSvc.unsubscribe(),this.staticView||this.config.post(()=>{this.menuLinksOld&&this.menuLinksOld.unsubscribe()},0),this.bookSvc.onDestroy()}ngAfterViewInit(){this.changesDetectorSendReadyMessage.checkAndUpdate(!1),this.memorialSvc.isReady().then(a=>{a.success?this.memorialSvc.getMemorials()?this.onMyInit():this.memorialSvc.reloadMemorials(()=>{this.onMyInit()}):this.onMyInit()},a=>{this.onMyInit()})}onMyInit(){this.clearSelection(),(!this.staticView||this.bookData.forceMenu)&&this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.getMenuLinks())},0),this.bookTitleData.setActions([bc.builder().setText("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setOnClick(()=>{this.showSettings=!this.showSettings}),bc.builder().setText("\u0413\u043b\u0430\u0432\u044b").setEnabled(!this.staticView).setOnClick(()=>{this.showChapters=!this.showChapters}),bc.builder().setText("\u042f\u0437\u044b\u043a\u0438").setOnClick(()=>{this.showLanguages=!this.showLanguages})]),this.workerSvc.enabled()?this.workerSvc.setOnMessage(a=>{this.config.post(()=>{this.bookSvc.post(null,a)})}):this.bookServerSvc.setCacheService(new zV(new hO)),this.bookSvc.setLineTransformer(this.bookData.search?NA.builder().addTransformer(LA.builder()).addTransformer(BA.builder()).addTransformer(T7.builder().setSearch(this.bookData.search)):NA.builder().addTransformer(LA.builder()).addTransformer(BA.builder())),this.bookSvc.onPageLoadEvent.setOnEventHandler(a=>{this.config.post(()=>this.scrollToText(),100)}),this.bookSvc.onRouteEvent.setOnEventHandler((a,c)=>{this.config.post(()=>this.bookData.link.route(c),100)}),this.bookSvc.setUIConfig(this.uiConfig).setConfig(this.config).setMemorial(this.memorialSvc).setAudio(this.audioSvc),this.changesDetectorFacePage.checkAndUpdate(this.uiConfig.ui.showFacePage.getBooleanValue()),this.reload(),this.ready=!0}reload(){let a=this.bookData.link.languages&&this.bookData.link.languages.length>0?this.bookData.link.languages:this.uiConfig.ui.currentLanguages.getStringValue().split("|").filter(c=>!!c);this.bookData.link.textIsPage?(this.changesDetectorBookDataText.checkAndUpdate(this.bookData.text),this.bookSvc.loadBookByPageText(this.bookData.text)):this.bookSvc.loadBookByName(this.bookData.text,a,this.staticView?this.bookData.link.chapter:this.uiConfig.ui.currentChapter.getStringValue())}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return this.bookData.link.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){return{}}showMenu(){this.bookData&&this.bookData.link&&this.bookData.link.route&&this.bookData.link.route("")}getColumnClass(a,c,u){let h=this.getColumnClassRaw(c,u);return a.\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440\u0421\u0442\u043e\u043b\u0431\u0446\u043e\u0432.checkAndGetValue(h)}getColumnClassRaw(a,c){var u,h,d,f;let p=12,g=p/c,m=0;for(let y=0;y<=a;y++)m=y%2?Math.floor(g):Math.ceil(g),m>p&&(m=p),p-=m;let v={};return v["clr-col-"+m]=!0,v["bg-3"]=a%2&&this.uiConfig.ui.coloredTranslations.getBooleanValue(),v.altText=a%2,v.cs=null===(h=null===(u=this.bookSvc.bookContent[a])||void 0===u?void 0:u.parsed)||void 0===h?void 0:h.getCs(),v.cs2=null===(f=null===(d=this.bookSvc.bookContent[a])||void 0===d?void 0:d.parsed)||void 0===f?void 0:f.getCs2(),v["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,v["fade-in-3"]=!0,v}getRowClass(a,c,u,h=!0){let d=this.getRowClassRaw(c,u,h);return a.\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440\u0421\u0442\u0440\u043e\u043a.checkAndGetValue(d)}getRowClassRaw(a,c,u=!0){var h,d,f,p;let g=12,m=g/c,v=0;for(let _=0;_<=a;_++)v=_%2?Math.floor(m):Math.ceil(m),v>g&&(v=g),g-=v;let y={};return y["clr-row"]=u,y["bg-3"]=a%2&&this.uiConfig.ui.coloredTranslations.getBooleanValue(),y.altText=a%2,y.cs=null===(d=null===(h=this.bookSvc.bookContent[a])||void 0===h?void 0:h.parsed)||void 0===d?void 0:d.getCs(),y.cs2=null===(p=null===(f=this.bookSvc.bookContent[a])||void 0===f?void 0:f.parsed)||void 0===p?void 0:p.getCs2(),y["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,y["fade-in-3"]=!0,y}translateLanguageName(a){let c=a.replace(/\u0426\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439/gi,"\u0426\u0421");return c=c.replace(/\u0413\u0440\u0430\u0436\u0434\u0430\u043d\u0441\u043a\u0438\u0439/gi,"\u0413\u0440"),c=c.replace(/\u0420\u0443\u0441\u0441\u043a\u0438\u0439/gi,"\u0420\u0443\u0441"),c}syncToolbarData(){var a,c;if(this.bookData.link.textIsPage&&this.changesDetectorBookDataText.checkAndUpdate(this.bookData.text))return void this.config.post(()=>{this.bookSvc.loadBookByPageText(this.bookData.text)});if(this.ready&&this.changesDetectorFacePage.checkAndUpdate(this.uiConfig.ui.showFacePage.getBooleanValue()))return void this.config.post(()=>{this.bookSvc.clear(!0,!0,[],!0,!0),this.reload()});let u=this.changesDetectorErrors.checkAndUpdate(this.bookSvc.errors),h=!1,d="";if(this.bookSvc.bookInfo){if(this.requestedPrintLogName)d=this.requestedPrintLogName;else{d=this.bookSvc.getBookTitleName();let g=this.bookSvc.getChapterTitleName();d&&g&&(d+=": "+g)}h=this.changesDetectorNewTitle.checkAndUpdate(d)}else h=this.changesDetectorNewTitle.checkAndUpdate("")||this.changesDetectorRequestedPrintLogName.checkAndUpdate(this.requestedPrintLogName),h&&(d=this.requestedPrintLogName?this.requestedPrintLogName:this.config.getApplication().name);let f=this.changesDetectorLanguages.checkAndUpdate(null===(a=this.bookSvc.bookInfo)||void 0===a?void 0:a.content),p=this.changesDetectorChapters.checkAndUpdate(this.bookSvc.bookContent)||this.changesDetectorChapters2.checkAndUpdate(this.bookSvc.bookContent.length)||this.changesDetectorChapters3.checkAndUpdate(null===(c=this.bookSvc.bookChapter)||void 0===c?void 0:c.name);(u||h||f||p)&&this.config.post(()=>{u&&this.syncErrors(),h&&this.syncBookTitleData(d,d?[d]:[]),f&&this.syncLanguages(),p&&this.syncChapters()})}syncErrors(){this.errorsData.setErrors(this.bookSvc.errors)}syncBookTitleData(a,c){this.printLogName=a,this.bookTitleData.errors[0]!=a&&(this.bookTitleData.setErrors(c),this.bookTitleData.classes.setAlertClass("alert-success").setAlertShape(""))}syncLanguages(){var a;this.dToolbarLangData.items.length!=(null===(a=this.bookSvc.bookInfo)||void 0===a?void 0:a.content.length)&&this.dToolbarLangData.setItems([]),this.bookSvc.bookInfo&&this.bookSvc.bookInfo.content.forEach((c,u)=>{u+1>this.dToolbarLangData.items.length?this.dToolbarLangData.items.push(ta.builder().setText(this.translateLanguageName(c.name)).setTag(c.name).setSelected(this.bookSvc.isLanguageEnabled(c.name))):this.dToolbarLangData.items[u].setText(this.translateLanguageName(c.name)).setTag(c.name).setSelected(this.bookSvc.isLanguageEnabled(c.name))})}syncChapters(){let a=this.bookSvc.bookContent.length?this.bookSvc.bookContent[0]:null;if(a){let c=1,u=a.parsed.content;c+u.length!=this.dToolbarData.items.length&&(this.dToolbarData.items=[]),0==this.dToolbarData.items.length?this.dToolbarData.items.push(ta.builder().setText("\u0412\u0441\u0435").setTag("\u0412\u0441\u0435")):this.dToolbarData.items[0].setText("\u0412\u0441\u0435").setSelected(!1),u.forEach((h,d)=>{var f;d+1+c>this.dToolbarData.items.length?this.dToolbarData.items.push(ta.builder().setText(h.name).setSelected(!1)):this.dToolbarData.items[d+c].setText(h.name).setSelected((null===(f=this.bookSvc.bookChapter)||void 0===f?void 0:f.name)===h.name)}),null==this.dToolbarData.items.find(h=>h.selected)&&this.dToolbarData.items.length&&this.dToolbarData.items[0+c].setSelected(!0)}}getBookFragments(a,c,u){var h,d;if(!c.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430){let p=null===(d=null===(h=this.bookSvc.bookContent[a])||void 0===h?void 0:h.parsed)||void 0===d?void 0:d.settings.find(v=>"\u044f\u0437\u044b\u043a"===v.name.toLowerCase()),g=p?p.value:"";g=g||(this.bookSvc.bookLanguages.length?this.bookSvc.bookLanguages[0]:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"),g.endsWith("-UCS8")&&(g=g.substring(0,g.length-5));let m=this.uiConfig.ui.coloredTranslations.getBooleanValue();c.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430([_s.builder().setText(g).setClasses({red:!(m&&a%2),redDark:m&&!!(a%2)})])}return u<0?c.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430:c.\u0441\u0442\u0440\u043e\u043a\u0438[u].fragments}isSpaceAppended(a,c){return a.\u0441\u0442\u0440\u043e\u043a\u0438[c].fragments.length>0&&c+1!=this.bookSvc.lineIndexes.length}isLineIndexed(a,c){return c>0&&a.\u0441\u0442\u0440\u043e\u043a\u0438[c].fragments.length>0&&a.\u0441\u0442\u0440\u043e\u043a\u0438[c].\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430}clearSelection(){return this.startLineSelection=this.endLineSelection=-1,this}onPrev(){this.clearSelection(),this.bookSvc.loadPrevPage(),this.saveChapter()}onNext(){this.clearSelection(),this.bookSvc.loadNextPage(),this.saveChapter()}getCurrentChapterName(){return this.bookSvc.bookChapter?this.bookSvc.bookChapter.name:"\u041c\u0435\u043d\u044e"}scrollToText(){this.staticView||(this.booksViewTables.nativeElement.scrollIntoView(!0),this.saveChapter()),this.changesDetectorSendReadyMessage.checkAndUpdate(!0)&&this.config.messageBus.putMessage(ry.builder().setSender(this.bookData.id).setTarget(this.bookData.targetId))}getChapterButtonClass(){let a=this.getChapterButtonClassRaw();return this.getChapterButtonClassDetector.checkAndGetValue(a)}getChapterButtonClassRaw(){let a={btn:!0,"btn-block":!0,"btn-link":!0,greenBtn:!0};return a["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,a}isLineSelected(a,c=!1,u=!0){let h=this.bookSvc.getShortBookName(),d=R_.builder(),f=c&&this.bookmarksSvc.getBookmarks().map(g=>{let m=d.parse(g);if(m&&m.length&&m[0].length){let v=m[0][0];if(v.type===Fl.Link)return v}return null}).filter(g=>null!=g).filter(g=>g.name===h).filter(g=>{var m;return(null===(m=this.bookSvc.bookChapter)||void 0===m?void 0:m.name)==""+g.startChapter}).filter(g=>(g.startLine<0||g.startLine<=a)&&(g.endLine<0||a<=g.endLine)).length>0,p=this.startLineSelection>=0&&this.startLineSelection==a||this.startLineSelection>=0&&this.startLineSelection<=a&&this.endLineSelection>=0&&a<=this.endLineSelection;return!this.staticView&&(f&&!p||u&&p)}isSelectionEnabled(){return!this.staticView&&"\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"!=this.bookSvc.bookName}getLineSelectionClass(a,c){let h=this.getLineSelectionClassRaw(c);return a.\u0441\u0442\u0440\u043e\u043a\u0438[c].\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440.checkAndGetValue(h)}getLineSelectionClassRaw(a){let c=this.isSelectionEnabled();return{"bg-4":c&&this.isLineSelected(a,!1,!0),"bg-5":c&&this.isLineSelected(a,!0,!1),cursor:c&&!this.staticView}}getComponent(a,c){return a.\u0441\u0442\u0440\u043e\u043a\u0438[c].\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442}getBookIndexes(a){let c=0;!this.bookData.link.logical&&this.bookSvc.books.length&&(c=Math.max(0,1-this.bookSvc.books[0].\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a));let u=this.bookData.link.startLine>=0?this.bookData.link.startLine:0,h=this.bookData.link.endLine>=0?this.bookData.link.endLine:this.bookData.link.startLine>=0?this.bookData.link.startLine:1e3;return this.getBookIndexesDetector.checkChanged(a,c,u,h).getCurValue(()=>0==u&&1e3==h?a:a.filter(d=>u<=d+c&&d+c<=h))}selectLine(a){if(this.hideUI||!this.isSelectionEnabled())return this;if(this.startLineSelection<0)this.startLineSelection=a,this.endLineSelection=-1;else if(this.startLineSelection==a)this.endLineSelection=a,this.modalAddBookmarkFlag=!0;else if(this.endLineSelection<0){this.endLineSelection=a;let c=Math.min(this.startLineSelection,this.endLineSelection);this.endLineSelection=Math.max(this.startLineSelection,this.endLineSelection),this.startLineSelection=c}else this.isLineSelected(a,!1,!0)?this.modalAddBookmarkFlag=!0:(this.startLineSelection=-1,this.endLineSelection=-1);return this}onAddBookmark(){var a;if(this.startLineSelection>0){let c=this.bookSvc.getShortBookName();this.bookmarksSvc.addBookmark(c,null===(a=this.bookSvc.bookChapter)||void 0===a?void 0:a.name,this.startLineSelection,this.endLineSelection),this.startLineSelection=this.endLineSelection=-1}return this.modalAddBookmarkFlag=!1,this}onNotAddBookmark(){this.startLineSelection=this.endLineSelection=-1,this.modalAddBookmarkFlag=!1}getAllTextClass(){return this.syncToolbarData(),this.fineTextDetector.checkChanged(this.uiConfig.ui.fineText.getBooleanValue()).getCurValue(()=>this.getAllTextClassRaw())}getAllTextClassRaw(){return{ftext:this.uiConfig.ui.fineText.getBooleanValue()}}printBook(){let a=this.bookSvc.getBookTitleName(),c=this.bookSvc.getChapterTitleName();a&&c&&(a+=": "+c),this.themeSvc.printWindow(a)||window.print()}printBookEpub(){var a;let c=this.bookSvc.bookName;c&&(this.printEpubData.setBookName(c).setBookTitle(this.bookTitleData.errors.length?this.bookTitleData.errors[0]:this.bookSvc.bookName).setBookChapter(this.bookSvc.bookChapter?this.bookSvc.bookChapter.name:"").setBookLanguages(this.bookSvc.bookLanguages).setEpubPrinterHandler(this.bookData.printerHandler).setShowSettings(!this.bookData.autoPrint),null===(a=this.printEpubDataEventsSubscription)||void 0===a||a.unsubscribe(),this.printEpubDataEventsSubscription=this.printEpubData.printEventsEmitter.subscribe({next:u=>{"stop"==u?(this.onStopPrintEpub(),this.printing=!1):(u="print")&&(this.printing=!0)}}),this.modalPrintEpubFlag=!0,this.bookData.autoPrint&&this.config.post(()=>{this.onStartPrintEpub()},500))}onStartPrintEpub(){this.printEpubData.printEventsEmitter.emit("print")}onStopPrintEpub(){this.modalPrintEpubFlag=!1}onPrintEpub(a){var c;let u=this.bookSvc.bookName.indexOf("VZ")>=0||this.bookSvc.bookName.indexOf("NZ")>=0,h=this.bookSvc.getChapterTitleName();!h&&this.bookSvc.bookChapter&&(h=null===(c=this.bookSvc.bookChapter)||void 0===c?void 0:c.name);let d="\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c VZ_KU"==this.bookSvc.bookName?"\u041f\u0441\u0430\u043b\u043e\u043c":"\u0413\u043b\u0430\u0432\u0430";h||(h=this.config.getApplication().name,d="");let f=()=>A_.builder().setName(this.bookTitleData.errors.length?this.bookTitleData.errors[0]:this.bookSvc.bookName).setBookNames(this.bookSvc.bookLanguages).setPsalomName(d).setAllBooksChapters([]).setAllBooks([[]]).setEmptyFirstLines([[0]]).setShowLineIndexes(u),p=f(),g=()=>{if(p.allBooks.length>1||p.allBooks[0].length>0){let v=p.allBooks.map((y,_)=>y.map((b,C)=>b.length>p.emptyFirstLines[_][C]).reduce((b,C,x,S)=>b||C,!1)).reduce((y,_,b,C)=>y||_,!1);!v&&0===a.requestsPack.length&&(v=this.bookSvc.getBookTitleName()!=p.name,p.setShowMiddleContent(!1)),v&&a.addRequest(p)}p=f()},m=(v,y,_)=>{let b="",C=!0,x=0,S=null,w=(O,T=!1)=>{if(S&&S.length>0){let M=v().allBooks.length-1,A=v().allBooks[M];for(;_+1>A.length;)A.push([]);let I=A[_];if(I&&I.push(...S),0==_)for(;M+1>v().allBooksChapters.length;)v().allBooksChapters.push(`${h}`);S=null,T&&g()}};y.\u0441\u0442\u0440\u043e\u043a\u0438.forEach((O,T)=>{let M=!0,I=!1,E=(B=!1,V=!1)=>{I||(M&&(null==S&&(S=[]),(C&&T-x==0||!b)&&++v().emptyFirstLines[v().emptyFirstLines.length-1][_],S.push(b)),M=!0,b="",C=!0,B&&(w(0,V),x=T),I=!0)},P=B=>{I=!1,b+=B.text,C=C&&(!B.text||(B=>!(!(null==B?void 0:B.red)&&!(null==B?void 0:B.redDark)))(B.classes));let V=Q=>{var j,N,U;if(Q.component===l){let z=Q.data;E(!0,!0),z.printerHandler.print(a)}else if(Q.component===e6){let z=Q.data;(null===(j=z.config.link)||void 0===j?void 0:j.link)&&(b+=`${z.config.link.link.name}.${z.config.link.link.startChapter}:${z.config.link.link.startLine}-${z.config.link.link.endLine}`.replace("-1000","+"),C=!1),(null===(U=null===(N=z.config.link)||void 0===N?void 0:N.link)||void 0===U?void 0:U.opened)&&(E(!0,!0),z.printerHandler.print(a))}else if(Q.component===GM){let z=Q.data;if(z.config.book){E(!0,!0);let $=A_.builder().setName(this.bookTitleData.errors.length?this.bookTitleData.errors[0]:this.bookSvc.bookName).setPsalomName("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c VZ_KU"==this.bookSvc.bookName?"\u041f\u0441\u0430\u043b\u043e\u043c":"\u0413\u043b\u0430\u0432\u0430").setBookNames(this.bookSvc.bookLanguages).setAllBooksChapters([`${h}`]).setAllBooks([[]]).setEmptyFirstLines([[0]]).setShowLineIndexes(!0);m(()=>$,z.config.book,0)}}else if(Q.component===fce){let z=Q.data;E(!0,!0),z.printerHandler.print(a)}else if(Q.component===V6){let z=Q.data;z.components.length&&z.components.forEach($=>V($))}};B.component&&V(B.component)};I=!1,O.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.forEach(B=>{P(B)}),E()}),w()};this.bookSvc.books.forEach((v,y)=>{m(()=>p,v,y)}),g()}getMainDivClasses(){return this.getMainDivClassesDetector.checkAndGetValue({"fade-in-3":!0,"no-print":!!this.changesDetectorBookDataText.oldRawValue})}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(Df),L(P_),L(E_),L(Mo),L(F_))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-library-book"]],viewQuery:function(a,c){if(1&a&&ai(Jst,5),2&a){let u;Vt(u=zt())&&(c.booksViewTables=u.first)}},inputs:{data:"data"},decls:34,vars:16,consts:[[3,"click"],[3,"enabled","name"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["booksViewTables",""],[4,"ngIf"],["class","clr-row mainText",4,"ngIf"],["class","mainText fade-in-3 clr-row",4,"ngIf"],["class","clr-row no-print top-space fade-in-3",4,"ngIf"],[1,"s0",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["shape","add-text"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["shape","times"],[1,"bottom-space"],[3,"data"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],[3,"data",4,"ngIf"],[1,"no-print"],["class","fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange",4,"ngIf"],[1,"fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange"],[1,"bottom-top-space"],[1,"clr-row"],[1,"clr-col-6"],[1,"btn","btn-primary","btn-block",3,"click"],["shape","printer",1,"is-solid"],[3,"ngClass","click"],["shape","book",1,"is-solid"],[1,"clr-col-3","no-print"],[3,"ngClass","click",4,"ngIf"],["class","clr-row mainText fade-in-3",4,"ngIf"],["class","clr-row mainText fade-in-3",4,"ngFor","ngForOf"],[1,"clr-row","mainText"],[1,"clr-col-12","fade-in-3"],[1,"clr-row","mainText","fade-in-3"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"component"],["class","clr-col-12 fade-in-3",4,"ngIf"],[3,"ngClass","hidden",4,"ngFor","ngForOf"],[3,"ngClass","hidden"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","hidden",4,"ngIf"],[1,"hidden"],["class","mainText fade-in-3",4,"ngIf"],["class","mainText fade-in-3",4,"ngFor","ngForOf"],[1,"mainText","fade-in-3"],[1,"clr-col-12"],[1,"mainText","fade-in-3","clr-row"],["class","clr-col-12",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"clr-row","no-print","top-space","fade-in-3"],["type","button",1,"btn","btn-link","btn-block",3,"click"],["shape","printer"],["class","clr-col-6",4,"ngIf"],["shape","book"],["shape","ban"]],template:function(a,c){1&a&&(D(0,"div",0),ee("click",function(h){return h.stopPropagation()}),me(1,"app-print-logo",1),Y(2,sot,7,6,"div",2),Y(3,uot,7,6,"div",2),D(4,"div",3,4),Y(6,vot,4,3,"div",5),Y(7,wot,4,3,"div",6),Y(8,Aot,4,3,"div",5),Y(9,zot,5,3,"div",7),Y(10,Got,7,6,"div",2),Y(11,qot,6,5,"div",8),k(),D(12,"clr-modal",9),ee("clrModalOpenChange",function(h){return c.modalAddBookmarkFlag=h}),D(13,"h3",10),ne(14,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),k(),D(15,"div",11),me(16,"clr-icon",12),ne(17," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438? "),k(),D(18,"div",13),D(19,"button",14),ee("click",function(){return c.onAddBookmark()}),me(20,"clr-icon",12),ne(21,"\u0414\u0430"),k(),D(22,"button",15),ee("click",function(){return c.onNotAddBookmark()}),me(23,"clr-icon",16),ne(24,"\u041d\u0435\u0442"),k(),k(),k(),D(25,"clr-modal",9),ee("clrModalOpenChange",function(h){return c.modalPrintEpubFlag=h}),D(26,"h3",10),ne(27,"\u041f\u0435\u0447\u0430\u0442\u044c EPUB"),k(),D(28,"div",11),D(29,"div",17),me(30,"app-dynamic-print-epub",18),k(),k(),D(31,"div",13),Y(32,Zot,3,0,"button",19),Y(33,Xot,3,0,"button",20),k(),k(),k()),2&a&&(R(1),F("enabled",c.bookData.facePage)("name",c.printLogName),R(1),F("ngIf",!c.hideUI),R(1),F("ngIf",!c.staticView),R(1),F("ngClass",c.getAllTextClass()),R(2),F("ngIf",c.parallel&&c.lineBreaks),R(1),F("ngIf",c.parallel&&!c.lineBreaks),R(1),F("ngIf",!c.parallel&&c.lineBreaks),R(1),F("ngIf",!c.parallel&&!c.lineBreaks),R(1),F("ngIf",!c.staticView),R(1),F("ngIf",c.showPrintButtons),R(1),F("clrModalOpen",c.modalAddBookmarkFlag),R(13),F("clrModalOpen",c.modalPrintEpubFlag),R(5),F("data",c.printEpubData),R(2),F("ngIf",!c.printing),R(1),F("ngIf",!c.printing))},styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();function Yot(l,o){1&l&&me(0,"app-add-component",5),2&l&&F("component",Z(2).containerData.component)}const Kot=function(){return{"content-container":!0}},Jot=function(){return{"content-area":!0}};function eat(l,o){if(1&l&&(D(0,"div",2),D(1,"div",3),D(2,"div",3),Y(3,Yot,1,1,"app-add-component",4),k(),k(),k()),2&l){const a=Z();R(1),F("ngClass",bl(3,Kot)),R(1),F("ngClass",bl(4,Jot)),R(1),F("ngIf",a.containerData.component)}}function tat(l,o){1&l&&me(0,"app-add-component",5),2&l&&F("component",Z(2).containerData.component)}function nat(l,o){if(1&l&&(D(0,"div",6),Y(1,tat,1,1,"app-add-component",4),k()),2&l){const a=Z();R(1),F("ngIf",a.containerData.component)}}let Vl=(()=>{class l{constructor(a){this.config=a}get containerData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-container"]],inputs:{data:"data"},decls:2,vars:2,consts:[["class","main-container",4,"ngIf"],["class","myContainer",4,"ngIf"],[1,"main-container"],[3,"ngClass"],[3,"component",4,"ngIf"],[3,"component"],[1,"myContainer"]],template:function(a,c){1&a&&(Y(0,eat,4,5,"div",0),Y(1,nat,2,1,"div",1)),2&a&&(F("ngIf",c.containerData&&!1),R(1),F("ngIf",c.containerData))},directives:[yn,ii,_c],styles:[".myContainer[_ngcontent-%COMP%]{padding:1em}"]}),l})();class O7{constructor(){}static builder(){return new O7}}class lo extends Ei{constructor(o,a,c,u,h){super(o,a,c),this.classes=u,this.component=h}static builder(){return new lo("",null,null,O7.builder(),null)}setComponent(o){return this.component=o,this}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}}function iat(l,o){if(1&l&&(D(0,"div"),me(1,"app-add-component",2),k()),2&l){const a=o.$implicit;R(1),F("component",a)}}let rat=(()=>{class l{constructor(a,c){this.config=a,this.uiConfig=c,this.components=[new Vn(ice,jM.builder().setText("\u0422\u0435\u043a\u0441\u0442 \u041a\u043d\u043e\u043f\u043a\u0438").setOnClick(u=>{if(u.text="\u0422\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u043b\u0435 \u043d\u0430\u0436\u0430\u0442\u0438\u044f: "+u.tag.data++,u.classes.outline){let h=["primary","success","danger"],d=h.indexOf(u.classes.type);d=(d+1)%h.length,u.classes.type=h[d]}u.classes.outline=!u.classes.outline}).setTag(new a0(0))),new Vn(V6,KM.builder().setText("\u0422\u0435\u043a\u0441\u0442 \u0434\u043b\u044f div."))]}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}reset(){this.uiConfig.ui.currentBook.getStringValue()&&this.uiConfig.ui.currentBook.setStringValue(""),this.components=[new Vn(Wle,PS.builder().setOnClick(a=>{this.routeTo(a.trim())}))]}routeTo(a){a!=this.uiConfig.ui.currentBook.getStringValue()&&this.uiConfig.ui.currentBook.setStringValue(a),this.components=[new Vn(Vl,lo.builder().setComponent(new Vn(pu,Rl.builder().setText(a).setLink(Pl.builder().setOnRoute(c=>{c?this.routeTo(c.trim()):this.reset()})))))]}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-component"]],decls:2,vars:1,consts:[[1,"ftext","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,iat,2,1,"div",1),k()),2&a&&(R(1),F("ngForOf",c.components))},directives:[_i,_c],styles:[""]}),l})();class D7{constructor(o,a){this.name=o,this.items=a,this.pageName=""}}class k7{constructor(o,a){this.name=o,this.items=a,this.activeNumberPage=""}}var Go=(()=>(function(l){l[l.Replace=0]="Replace",l[l.Add=1]="Add",l[l.Intersect=2]="Intersect",l[l.Remove=3]="Remove"}(Go||(Go={})),Go))();class sat{constructor(){this.searchDataItems=[]}clear(){this.searchDataItems=[]}mergeSearchInfos(o,a,c){let u=[];switch(c){case Go.Intersect:o.forEach(h=>{let d=a.find(f=>f.line==h.line);d&&(u.push(h),h.column!=d.column&&u.push(d))});break;case Go.Add:u.push(...o),u.push(...a);break;case Go.Remove:o.forEach(h=>{null==a.find(f=>f.line==h.line)&&u.push(h)});break;case Go.Replace:u=a}return u.sort((h,d)=>h.line-d.line),u}mergeSearchDatas(o,a,c){let u=[],h=()=>{o.forEach(d=>{let f=a.find(p=>d.name==p.name);if(null!=f){let p=this.mergeSearchInfos(d.items,f.items,c);p.length&&u.push(new D7(d.name,p))}})};switch(c){case Go.Intersect:h();break;case Go.Add:h(),a.forEach(d=>{null==o.find(p=>d.name==p.name)&&u.push(d)}),o.forEach(d=>{null==a.find(p=>d.name==p.name)&&u.push(d)});break;case Go.Remove:o.forEach(d=>{let f=a.find(p=>d.name==p.name);if(null!=f){let p=this.mergeSearchInfos(d.items,f.items,c);p.length&&u.push(new D7(d.name,p))}else u.push(d)});break;case Go.Replace:u=a}return u}mergeSearchData(o,a=Go.Replace){let c=[],u=()=>{this.searchDataItems.forEach(h=>{let d=o.find(f=>f.name==h.name);if(d){let f=this.mergeSearchDatas(h.items,d.items,a);f.length&&c.push(new k7(d.name,f))}})};0==this.searchDataItems.length?c=o:a==Go.Intersect?u():a==Go.Add?(u(),this.searchDataItems.forEach(h=>{o.find(f=>f.name==h.name)||c.push(h)}),o.forEach(h=>{this.searchDataItems.find(f=>f.name==h.name)||c.push(h)})):a==Go.Remove&&this.searchDataItems.forEach(h=>{let d=o.find(f=>f.name==h.name);if(d){let f=this.mergeSearchDatas(h.items,d.items,a);f.length&&c.push(new k7(d.name,f))}else c.push(h)}),this.searchDataItems=c}}class oat{constructor(o,a){this.searcher=o,this.config=a,this.langProps=[],this.results=new sat,this.maxElemenetsOnPageCount=10,this.searchedPages=[],this.currentPage=-1,this.searchObject={search:""},this.search="",this.searchIndex=0,this.searchRemainsCount=0}onSearch(o,a,c){if(this.searchedPages=[],this.results.clear(),this.search=this.searchObject.search,this.search){++this.searchIndex;let h=this.searchIndex,d=this.search.split(" ");this.searchRemainsCount+=d.length+1;let f=Go.Intersect,p=0,g=()=>{if(--this.searchRemainsCount,this.searchIndex!=h)return this.searchRemainsCount-=d.length-p,void c(!1);if(p>0&&0==this.results.searchDataItems.length&&(this.searchRemainsCount-=d.length-p,p=d.length),p>=d.length)return void(c&&c(!0));let m=d[p++];if("\u041d\u0415"==m){if(f=Go.Remove,--this.searchRemainsCount,p>=d.length)return;m=d[p++]}else f=Go.Intersect;this.searcher.search(m,a,(v,y)=>{this.config.post(()=>{this.searchIndex==h&&this.onSearchDataResult(v,y,f,null),g()})},this.langProps)};g()}}getBook(o){let a=o.split("/");return a.length>=1&&a.splice(a.length-1,1),a.join("/")}getChapter(o){let a="\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",c=o.split("/");return c.length>=1&&(a=c[c.length-1]),a}getNamedSearchItem(o,a){let c=this.getBook(o),u=a.find(f=>f.name===c);null==u&&(u=new k7(c,[]),u.activeNumberPage="1",a.push(u));let h=this.getChapter(o),d=u.items.find(f=>f.name==h);return null==d&&(d=new D7(h,[]),d.pageName=""+Math.ceil((u.items.length+1)/this.maxElemenetsOnPageCount),u.items.push(d)),d}onSearchDataResult(o,a,c,u){let h=[];o&&o.forEach(d=>{this.getNamedSearchItem(d.key,h).items.push(...d.value)}),this.results.mergeSearchData(h,c),u&&u(null!=o)}}class M7{constructor(){}static builder(){return new M7}}class VA extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.object={},this.fieldName="name",this.description="\u0418\u043c\u044f",this.sDescription2="",this.shape="",this.readonly=!1}set description2(o){this.sDescription2=o}get description2(){return this.sDescription2?this.sDescription2:this.description}static builder(){return new VA("",null,null,M7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}setObject(o){return this.object=o,this}setFieldName(o){return this.fieldName=o,this}setDescription(o){return this.description=o,this}setDescription2(o){return this.description2=o,this}setShape(o){return this.shape=o,this}setReadonly(o){return this.readonly=o,this}}class E7{constructor(o){this.spinnerInline=o}static builder(){return new E7(!0)}}class A7 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u}static builder(){return new A7("",null,null,E7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}}let tge=(()=>{class l{constructor(a,c){this.http=a,this.config=c,this.restPoint="/kafizmy"}getRestPoint(a,c){return kr.merge(kr.merge(c||this.config.serviceAPIHost,this.restPoint),a)}handleError(a,c){return Ni.handleError(a,c)}search(a,c,u,h){const d={params:{query:a,paths:c.join("|")}};this.http.get(this.getRestPoint("/search",null),d).pipe(rr(this.handleError)).subscribe({next:f=>{u(f,null)},error:f=>{u(null,""+f)}})}}return l.\u0275fac=function(a){return new(a||l)(Ae(sd),Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),nge=(()=>{class l{constructor(a,c){this.searchRestSvc=a,this.config=c,this.searchSvc=null,this.searchingCount=0,this.config.isRestServerType()&&(this.searchSvc=this.searchRestSvc)}isSearching(){return this.searchingCount>0}search(a,c,u,h){this.config.post(this.searchSvc?()=>{++this.searchingCount,this.searchSvc&&this.searchSvc.search(a,c,(d,f)=>{u&&u(d,f),--this.searchingCount},h)}:()=>{++this.searchingCount,this.config.post(()=>{u&&u(null,null),--this.searchingCount})})}}return l.\u0275fac=function(a){return new(a||l)(Ae(tge),Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),aat=(()=>{class l{constructor(){this.data=VA.builder()}onCommand(a){this.data.click(!0),a.stopPropagation()}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-form-input-editor"]],inputs:{data:"data"},decls:6,vars:6,consts:[[1,"cursor",3,"click"],[3,"click"],["clrInput","",3,"readOnly","placeholder","name","ngModel","ngModelChange"]],template:function(a,c){1&a&&(D(0,"clr-input-container"),D(1,"label",0),ee("click",function(h){return c.onCommand(h)}),ne(2),D(3,"span"),D(4,"clr-icon",1),ee("click",function(h){return c.onCommand(h)}),k(),k(),k(),D(5,"input",2),ee("ngModelChange",function(h){return c.data.object[c.data.fieldName]=h}),k(),k()),2&a&&(R(2),vi("",c.data.description," "),R(2),et("shape",c.data.shape),R(1),F("readOnly",c.data.readonly)("placeholder",c.data.description2)("name",c.data.fieldName)("ngModel",c.data.object[c.data.fieldName]))},directives:[Oy,ss,Ws,Sl,Jx,No,Co],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}"]}),l})();const lat=["bookmarksView"],cat=function(l,o){return{btn:!0,"btn-block":!0,"btn-success-outline":l,"btn-success":o}};function uat(l,o){if(1&l){const a=gt();D(0,"div",14),D(1,"button",15),ee("click",function(){return Le(a),Z().toggleSearch()}),ne(2),k(),k()}if(2&l){const a=Z();R(1),F("ngClass",ps(2,cat,!a.searchMode,a.searchMode)),R(1),en(a.searchMode?"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438":"\u041f\u043e\u0438\u0441\u043a")}}const hat=function(l,o){return{btn:!0,"btn-block":!0,"btn-primary-outline":l,"btn-primary":o}};function dat(l,o){if(1&l){const a=gt();D(0,"button",15),ee("click",function(){return Le(a),Z(2).onNewSearch()}),ne(1,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),k()}if(2&l){const a=Z(2);F("ngClass",ps(1,hat,!a.isBookmarksExists(),a.isBookmarksExists()))}}function fat(l,o){if(1&l){const a=gt();D(0,"button",3),ee("click",function(){return Le(a),Z(2).modalDeleteAllBookmarksFlag=!0}),ne(1,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435"),k()}}const ige=function(l,o){return{"clr-col-4":l,"clr-col-6":o}};function pat(l,o){if(1&l&&(D(0,"div",2),Y(1,dat,2,4,"button",16),Y(2,fat,2,0,"button",17),k()),2&l){const a=Z();F("ngClass",ps(3,ige,a.searchEnabled&&a.bookmarksEnabled,!(a.searchEnabled&&a.bookmarksEnabled))),R(1),F("ngIf",a.searchMode),R(1),F("ngIf",!a.searchMode)}}function gat(l,o){if(1&l&&(D(0,"div",19),me(1,"app-dynamic-spinner",20),k()),2&l){const a=Z(2);R(1),F("data",a.searchingSpinnerData)}}function mat(l,o){if(1&l&&(D(0,"div"),me(1,"app-dynamic-content-toolbar",20),k()),2&l){const a=Z(3);R(1),F("data",a.toolbarBooksHeaders)}}function vat(l,o){if(1&l&&(D(0,"div"),D(1,"div"),me(2,"app-dynamic-content-toolbar",20),k(),D(3,"div"),me(4,"app-dynamic-content-toolbar",20),k(),k()),2&l){const a=Z(3);R(2),F("data",a.currentHeaders()),R(2),F("data",a.currentPages())}}function yat(l,o){1&l&&me(0,"app-dynamic-library-book",20),2&l&&F("data",Z().$implicit.libData)}function _at(l,o){if(1&l&&(D(0,"div",null,24),me(2,"app-dynamic-errors",20),Y(3,yat,1,1,"app-dynamic-library-book",25),k()),2&l){const a=o.$implicit;R(2),F("data",a.errorsData),R(1),F("ngIf",a.libDataShow)}}function bat(l,o){if(1&l&&(D(0,"div"),D(1,"div"),D(2,"form",21),me(3,"app-dynamic-form-input-editor",20),k(),D(4,"form",22),me(5,"app-dynamic-form-input-editor",20),k(),k(),Y(6,mat,2,1,"div",5),Y(7,vat,5,2,"div",5),Y(8,_at,4,2,"div",23),D(9,"div"),D(10,"div"),me(11,"app-dynamic-content-toolbar",20),k(),k(),k()),2&l){const a=Z(2);R(3),F("data",a.dataSearchEditorData),R(2),F("data",a.dataSearchEditorData),R(1),F("ngIf",!a.isBookmarksExists()),R(1),F("ngIf",a.isBookmarksExists()),R(1),F("ngForOf",a.bookmarks),R(3),F("data",a.currentPages())}}function xat(l,o){if(1&l&&(D(0,"div"),Y(1,gat,2,1,"div",18),Y(2,bat,12,6,"div",5),k()),2&l){const a=Z();R(1),F("ngIf",a.isSearching),R(1),F("ngIf",!a.isSearching)}}function Cat(l,o){1&l&&me(0,"app-dynamic-library-book",20),2&l&&F("data",Z().$implicit.libData)}function Sat(l,o){if(1&l&&(D(0,"div",null,24),me(2,"app-dynamic-errors",20),Y(3,Cat,1,1,"app-dynamic-library-book",25),k()),2&l){const a=o.$implicit;R(2),F("data",a.errorsData),R(1),F("ngIf",a.libDataShow)}}function wat(l,o){if(1&l&&(D(0,"div"),Y(1,Sat,4,2,"div",23),k()),2&l){const a=Z();R(1),F("ngForOf",a.bookmarks)}}class zA{constructor(o,a){this.errorsData=rh.builder(),this.libData=Rl.builder(),this.libDataShow=!1,this.\u043f\u0430\u043c\u044f\u0442\u044c=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.errorsData.setErrors(o).setActions(a)}static builder(){return new zA([],[])}setMessages(o){return this.errorsData.setErrors(o),this}addMessage(o){return this.errorsData.errors.push(o),this}setActions(o){return this.errorsData.setActions(o),this}addAction(o){return this.errorsData.actions.push(o),this}toggleLinkShow(){return this.libDataShow=!this.libDataShow,this}setLink(o,a,c=!0,u=!0){let d=fragmentsParserStatic.parse(o,{builder:new t6})[0][0];if(d.type!=Fl.Link&&c)throw new Error(`\u041d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441\u0441\u044b\u043b\u043a\u043e\u0439: ${o}`);let f=d;return this.libData.setText(o.replace("-1000","+")).setSearch(a).setLink(Pl.builder().setBookName(f.name).setShortName(!0).setChapter(""+f.startChapter).setStartLine(f.startLine).setEndLine(f.endLine).setLanguages(f.langugages).setLogical(u)),this}}class I7{constructor(o,a,c,u){this.items=o,this.pageItems=a,this.pageSize=u,this.iPageIndex=0}static builder(){return new I7([],[],0,10)}get pageIndex(){return this.iPageIndex}set pageIndex(o){this.iPageIndex=o,this.updatePage()}updatePage(){let a=Math.min(this.pageIndex*this.pageSize+this.pageSize,this.items.length);return this.pageItems=this.items.slice(this.pageIndex*this.pageSize,a),this}setItems(o){return this.items=o,this.recalculate(),this.updatePage()}setPageIndex(o){if(o<0||o+1>=this.pagesCount)throw new Error(`\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441 \u0441\u0442\u0440\u0430\u043d\u0438\u0446: ${o}; \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c => [0,${this.pagesCount-1}].`);return this.pageIndex=o,this}setPageSize(o){if(o!=this.pageSize)return this.pageSize=o,this.recalculate(!0)}recalculate(o=!1){let a=this.pagesCount;return this.pageNumber>a&&(this.pageNumber=a),o?this.updatePage():this}prevPage(){return this.pageIndex>0&&(this.pageIndex=this.pageIndex-1),this}get pagesCount(){return Math.ceil(this.items.length/this.pageSize)}get pageNumber(){return this.pageIndex+1}set pageNumber(o){if(o<1||o>this.pagesCount)throw new Error(`\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446: ${o}; \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c => [1,${this.pagesCount}].`);this.pageIndex=o-1}nextPage(){return this.pageIndex+1<this.pagesCount&&(this.pageIndex=this.pageIndex+1),this}}class P7{constructor(o,a){this.name=o,this.bookmarks=a}static builder(){return new P7("",I7.builder())}setName(o){return this.name=o,this}setBookmarks(o){return this.bookmarks=o,this}}let rge=(()=>{class l extends Yp{constructor(a,c,u,h,d,f){super(a,c,u),this.bookmarksSvc=h,this.searcher=d,this.audioSvc=f,this.bookmarksEnabled=!0,this.searchEnabled=!0,this.searchMode=!1,this.searcherHelper=null,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.jsSvc=new u6,this.bookmarksDatas=[],this.bookmarksSearchDatasAll=[],this.bookmarksSearchDatas=null,this.searchingSpinnerData=A7.builder().setText("\u041f\u043e\u0438\u0441\u043a..."),this.tryLoadRemainsBookInfoCount=0,this.toolbarBooksHeaders=au.builder().setItems([]).setOnClick(p=>{p.setSelected(!p.selected)}).updateClasses(p=>{p.setLabelNormal("label-info")}),this.toolbarSearchHeaders=au.builder().setItems([]).setOnClick(p=>{let g=this.bookmarksSearchDatasAll.find(m=>m.name==p.tag);g&&(this.bookmarksSearchDatas=g,this.config.post(()=>{this.scrollToBookmarks()}))}),this.toolbarPages=au.builder().setItems([]).setOnClick(p=>{this.bookmarksSearchDatas&&(this.bookmarksSearchDatas.bookmarks.pageNumber=+p.tag,this.config.post(()=>{this.loadRemainsBookInfoActiveGroup(),this.scrollToBookmarks()}))}).updateClasses(p=>{p.setLabelNormal("label-info")}),this.modalDeleteAllBookmarksFlag=!1,this.modalDeleteBookmark="",this.modalDeleteBookmarkFlag=!1,this.component=new Vn(pu,Rl.builder().setText("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP").setLink(Pl.builder().setTextIsPage(!0).setOnRoute(p=>{}))),this.dataSearchEditorData=VA.builder(),this.workerSvc=Ta.builder(),this.bookServerSvc=new UV((p,g)=>{this.config.post(()=>{this.bookSvc.post(p,g)})}),this.bookSvc=new C7((p,g)=>{this.config.post(()=>{this.workerSvc.enabled()?this.workerSvc.sendMessage(g):this.bookServerSvc.post(p,g)})}),this.bookSvc.setConfig(this.config).setUIConfig(this.uiConfig),this.bookmarksEnabled="books"==this.config.getApplication().id,this.searchEnabled=this.config.isRestServerType(),this.searcherHelper=new oat(this.searcher,a),this.dataSearchEditorData.setObject(this.searcherHelper.searchObject).setDescription("\u041f\u043e\u0438\u0441\u043a").setDescription2("\u0441\u043b\u043e\u0432\u043e \u0432\u0442\u043e\u0440\u043e\u0435 [\u041d\u0415] \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435").setFieldName("search").setShape("search").setReadonly(!1).setOnClick(()=>{var p;null===(p=this.searcherHelper)||void 0===p||p.onSearch("search",this.getSearchBookPaths(),g=>{this.syncSearchDatas(!0),this.dataSearchEditorData.setReadonly(!0)})}),this.jsSvc.addBookmarksEnvironment(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.uiConfig),this.jsSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u0443",(p,g)=>{var v=p.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g[1]);if(this.bookmarks){let y=this.bookmarks.find(_=>_.errorsData.errors[0]==v.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());null!=y&&y.toggleLinkShow()}return null}),this.jsSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u04432",(p,g)=>{var v=p.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g[1]);if(this.bookmarks){let y=this.bookmarks.find(_=>_.errorsData.errors[0]==v.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());null!=y&&y.toggleLinkShow()}return null}),this.jsSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c\u0423\u0434\u0430\u043b\u0438\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443",(p,g)=>{var v=p.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g[1]);return this.modalDeleteBookmark=v.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),this.modalDeleteBookmarkFlag=!0,null}),this.addMenuLink(qn.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("books"==this.config.getApplication().id?"cog":"users").setOnClick(()=>{this.boomarksData.click(null)}).setIsActive(()=>!1)),this.addMenuLink(qn.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book").setOnClick(()=>{this.boomarksData.click("")}).setIsActive(()=>!1)),this.addMenuLink(qn.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("books"==this.config.getApplication().id?"bookmark":"search").setIsActive(()=>!0)),this.addMenuLink(qn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.boomarksData.click("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP")}).setIsActive(()=>!1))}get bookmarkData(){return this.data}get boomarksData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get bookmarks(){var a;return this.sync(),this.searchMode?null===(a=this.bookmarksSearchDatas)||void 0===a?void 0:a.bookmarks.pageItems:this.bookmarksDatas}get isSearching(){return this.searcher.isSearching()}ngOnInit(){super.ngOnInit(),this.bookmarkData&&(this.searchMode=this.bookmarkData.startSearch)}ngOnDestroy(){super.ngOnDestroy(),this.workerSvc.unsubscribe()}ngAfterViewInit(){super.ngAfterViewInit(),this.audioSvc.stop(),this.config.post(()=>{this.searchMode=this.bookmarkData.startSearch}),this.workerSvc.enabled()?this.workerSvc.setOnMessage(a=>{this.config.post(()=>{this.bookSvc.post(null,a)})}):this.bookServerSvc.setCacheService(new zV(new hO)),this.bookSvc.onLibraryLoadEvent.setOnEventHandler(()=>{this.tryLoadRemainsBookInfo(),this.loadBooksHeaders()}),this.bookSvc.onBookInfoLoadEvent.setOnEventHandler((a,c)=>{this.config.post(()=>{this.loadRemainsBookInfo2()})}),this.config.post(()=>{this.bookSvc.tryLoadLibraryInfo()})}getBookNameByPath(a){let c=a.split("/");return this.bookSvc.getNormalBookNameByBookPath(c[c.length-1])}loadRemainsBookInfo2(){var a;if(!this.bookmarksSearchDatas)return;let u=this.bookmarksSearchDatas.bookmarks.pageItems.find(h=>h.errorsData.errors[0].indexOf("|")>=0&&!!this.getBookNameByPath(h.errorsData.errors[0]));if(null!=u){let d=u.errorsData.errors[0].split("|");if(d.length>1){let f=d[0],p=d[1],g=this.getBookNameByPath(f);if(g){let m=this.bookSvc.getShortBookName(g),v=null===(a=this.bookSvc.bookInfo)||void 0===a?void 0:a.content.find(b=>f.endsWith(b.path)),_=`${m}${p}{${v?v.name:""}}`;u.setLink(_,this.searcherHelper?this.searcherHelper.search:"",!0,!1),u.\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(_)),u.errorsData.errors[0]=`${_}`}}this.tryLoadRemainsBookInfo()}}tryLoadRemainsBookInfo(){this.tryLoadRemainsBookInfoCount>0||(++this.tryLoadRemainsBookInfoCount,this.config.post(()=>{this.loadRemainsBookInfo(),--this.tryLoadRemainsBookInfoCount}))}loadRemainsBookInfo(){let a=this.bookmarksSearchDatasAll.map(c=>{let u=this.getBookNameByPath(c.name);return{d:c,name:u?this.bookSvc.getShortBookName(u):null}}).filter(c=>!!c.name&&"\u0421\u043f\u0440"!=c.name).map(c=>c);!this.bookmarksSearchDatasAll||this.toolbarSearchHeaders.items.length==a.length||(this.toolbarSearchHeaders.setItems(a.map(c=>ta.builder().setText(c.name).setTag(c.d.name))).setOnClick(c=>{let u=this.bookmarksSearchDatasAll.find(h=>h.name==c.tag);u&&(this.bookmarksSearchDatas=u,this.loadRemainsBookInfoActiveGroup())}),this.bookmarksSearchDatas||this.config.post(()=>{this.toolbarSearchHeaders.click(this.toolbarSearchHeaders.items[0])}))}loadRemainsBookInfoActiveGroup(){this.bookmarksSearchDatas&&this.bookmarksSearchDatas.bookmarks.pageItems.forEach(c=>{if(null!=c){let d=c.errorsData.errors[0].split("|")[0],f=this.getBookNameByPath(d);f&&this.bookSvc.loadBookByName(f,[],"",!1)}})}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}syncBookmarks(){let a=this.bookmarksSvc.getBookmarks(),c=!1,u=this.getStdBookmarks();return c=this.bookmarksDatas.length!=a.length+u.length||null!=a.find((d,f)=>d!=this.bookmarksDatas[f+u.length].errorsData.errors[0]),c&&a.unshift(...u),c&&(this.bookmarksDatas=[],a.forEach((h,d)=>{let f=h.replace("-1000","+"),p=`\n\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n  \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '';\n  \u0442\u0438\u043f = 0;\n  \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0442\u0438\u043f) {\n    \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '${f}';\n    \u0442\u0438\u043f = _\u0442\u0438\u043f;\n  }\n  \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c() {\n    \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430: "' + \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 + '": ' + \u0442\u0438\u043f);\n    \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 0) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u0432\u0435\u0440\u0445(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 1) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u043d\u0438\u0437(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 2) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c\u0423\u0434\u0430\u043b\u0438\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 3) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u0443(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 4) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u04432(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u0443(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    }\n  }\n};\n\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          `,g=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),v=(this.jsSvc.run(p,g,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),zA.builder());v.errorsData.setOnClick(y=>{this.boomarksData.click(y)}),v.setLink(h,"").setMessages([f]).setActions(d<u.length?[bc.builder().setText("\u0412\u0438\u0434").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(3).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",g,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})]:[bc.builder().setText("X").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(2).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",g,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),bc.builder().setText("\u041d\u0438\u0436\u0435").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(1).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",g,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),bc.builder().setText("\u0412\u044b\u0448\u0435").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(0).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",g,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),bc.builder().setText("\u0412\u0438\u0434").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(3).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",g,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})]),v.errorsData.classes.setAlertClass("warning").setAlertShape("").setNoPrint(!0),this.bookmarksDatas.push(v)})),c&&this.component.data.setText(a.map(d=>d+` /*\n\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441{\n  \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '';\n  \u0432\u0432\u0435\u0440\u0445 = false;\n  \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0432\u0432\u0435\u0440\u0445){\n    \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '${d}';\n    \u0432\u0432\u0435\u0440\u0445 = _\u0432\u0432\u0435\u0440\u0445;\n  }\n  \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043a\u043d\u043e\u043f\u043a\u0430){\n    \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c(\n      '\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430: "' + \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 + '": ' + (\u0432\u0432\u0435\u0440\u0445?'\u0432\u0432\u0435\u0440\u0445':'\u0432\u043d\u0438\u0437'));\n    \u0435\u0441\u043b\u0438 (\u0432\u0432\u0435\u0440\u0445) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u0432\u0435\u0440\u0445(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u043d\u0438\u0437(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    }\n  }\n};\n\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430('\u2191','link','',\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(true), false);\n\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430('\u2193','link','',\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(false), false);\n*/`).join("\r\n")),this}saveBookmarks(a){return this.bookmarksSvc.setBookmarks(a),this}deleteAllBookmarks(){return this.bookmarksSvc.setBookmarks([]),this}toggleBookmarksView(){let a=this.isAllBookmarksVisible();return this.bookmarks&&this.bookmarks.forEach(c=>{c.libDataShow==a&&c.toggleLinkShow()}),this}isAllBookmarksVisible(){this.sync();let a=this.bookmarks;return!!a&&a.map(u=>u.libDataShow).reduce((u,h)=>u&&h,!0)}isBookmarksExists(){this.sync();let a=this.bookmarks;return!!a&&a.length>0}onDeleteAllBookmarks(){this.deleteAllBookmarks(),this.modalDeleteAllBookmarksFlag=!1}onDeleteBookmark(a){return this.bookmarksSvc.deleteBookmark(a),this.modalDeleteBookmarkFlag=!1,this}getDaysFromYear(){var a=new Date,c=new Date(a.getFullYear(),0,0),u=a.getTime()-c.getTime()+60*(c.getTimezoneOffset()-a.getTimezoneOffset())*1e3,h=864e5,d=Math.floor(u/h);if(d<14&&a.getFullYear()>2022){var f=new Date(a.getFullYear()-1,0,0),p=new Date(a.getFullYear()-1,11,31),g=p.getTime()-f.getTime()+60*(f.getTimezoneOffset()-p.getTimezoneOffset())*1e3;d+=Math.floor(g/h)}return d-13}getStdBookmarks(){let a=this.getDaysFromYear();return[`\u041c\u04412022.${a}:1-1000`,`\u0411\u04432022.${a}:1-1000`]}toggleSearch(){return this.searchMode=!this.searchMode,this}getChapter(a){let c=a.indexOf(".");return+a.substring(0,c>=0?c:void 0).replace(/_/g,"")}getLines(a){let c=[],u=a.map(h=>h.items.map(d=>d.line)).flatMap(h=>h);return u.sort((h,d)=>h-d),u.forEach(h=>{c.indexOf(h)<0&&c.push(h)}),c}getLinesSingle(a){let c=[],u=a.items.map(h=>h.line);return u.sort((h,d)=>h-d),u.forEach(h=>{c.indexOf(h)<0&&c.push(h)}),c}createBookmarksFor(a,c){let u=[],h=this.getChapter(c.name);return(c.items.length?this.getLinesSingle(c):[1]).forEach(f=>{u.push(this.createBookmarksForSingle(`${a}|.${h}:${f}`))}),u}createBookmarksForSingle(a){let c=zA.builder(),u=c.\u043f\u0430\u043c\u044f\u0442\u044c;return u.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a)),this.jsSvc.run("\n\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n  \u0442\u0438\u043f = 0;\n  \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0442\u0438\u043f) {\n    \u0442\u0438\u043f = _\u0442\u0438\u043f;\n  }\n  \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c() {\n    \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430: \"' + \u043f\u0430\u043c\u044f\u0442\u044c.\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 + '\": ' + \u0442\u0438\u043f);\n    \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 0) {\n      \u0442\u0438\u043f = 0;\n    } \u0438\u043d\u0430\u0447\u0435 {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u04432(\u043f\u0430\u043c\u044f\u0442\u044c.\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    }\n  }\n};\n\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",u,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),c.errorsData.setOnClick(f=>{this.boomarksData.click(f)}).updateClasses(f=>{f.setAlertClass("info").setAlertShape("bookmark")}),c.setLink(a,this.searcherHelper?this.searcherHelper.search:"",!1,!1).setMessages([a]).setActions([bc.builder().setText("\u0412\u0438\u0434").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(4).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",u,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})]),c}syncSearchDatas(a){var c;!a||(this.bookmarksSearchDatasAll=[],null===(c=this.searcherHelper)||void 0===c||c.results.searchDataItems.forEach(u=>{let h=u.items.flatMap(f=>this.createBookmarksFor(u.name,f)),d=P7.builder();d.bookmarks.setItems(h),d.setName(u.name),this.bookmarksSearchDatasAll.push(d)}),this.bookmarksSearchDatasAll.length>0&&this.config.post(()=>{this.bookSvc.tryLoadLibraryInfo()}))}currentPages(){if(this.bookmarksSearchDatas){let a=this.bookmarksSearchDatas.bookmarks.pagesCount;this.toolbarPages.items.length!=a&&this.toolbarPages.setItems([...Array(a).keys()].map(c=>c+1).map(c=>ta.builder().setTag(""+c).setText(""+c))),this.toolbarPages.items.forEach(c=>c.setSelected(c.tag==""+this.bookmarksSearchDatas.bookmarks.pageNumber))}else 0!=this.toolbarPages.items.length&&this.toolbarPages.setItems([]);return this.toolbarPages}currentHeaders(){return this.bookmarksSearchDatas&&this.toolbarSearchHeaders.items.forEach(a=>{var c;a.setSelected(a.tag==(null===(c=this.bookmarksSearchDatas)||void 0===c?void 0:c.name))}),this.toolbarSearchHeaders}scrollToBookmarks(){return this.bookmarksView.nativeElement.scrollIntoView(!0),this}onNewSearch(){return this.dataSearchEditorData.setReadonly(!1),this.bookmarksSearchDatasAll=[],this.bookmarksSearchDatas=null,this.toolbarSearchHeaders.setItems([]),this}sync(){this.searchMode?this.syncSearchDatas(!1):this.syncBookmarks()}loadBooksHeaders(){!this.bookSvc.libraryInfo||this.toolbarBooksHeaders.items.length>0||this.toolbarBooksHeaders.setItems(this.bookSvc.libraryInfo.content.map(a=>a.path2?{name:a.path2[0],path:a.path}:null).filter(a=>!!a&&"\u0421\u043f\u0440"!=a.name).map(a=>a).map(a=>ta.builder().setText(a.name).setTag(a.path)))}getSearchBookPaths(){return this.toolbarBooksHeaders.items.filter(c=>c.selected).map(c=>c.tag)}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(nh),L(P_),L(nge),L(F_))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-bookmarks"]],viewQuery:function(a,c){if(1&a&&ai(lat,5),2&a){let u;Vt(u=zt())&&(c.bookmarksView=u.first)}},inputs:{data:"data"},features:[pn],decls:34,vars:12,consts:[[1,"clr-row","no-print"],["class","clr-col-4",4,"ngIf"],[3,"ngClass"],[1,"btn","btn-block","btn-primary-outline",3,"click"],[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["shape","flame",1,"is-solid"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["shape","ban"],[1,"clr-col-4"],[3,"ngClass","click"],[3,"ngClass","click",4,"ngIf"],["class","btn btn-block btn-primary-outline",3,"click",4,"ngIf"],["class","bottom-top-space",4,"ngIf"],[1,"bottom-top-space"],[3,"data"],["clrForm","","clrLayout","horizontal",1,"clr-hidden-xs-down"],["clrForm","","clrLayout","vertical",1,"clr-hidden-sm-up"],[4,"ngFor","ngForOf"],["bookmarksView",""],[3,"data",4,"ngIf"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,uat,3,5,"div",1),D(2,"div",2),D(3,"button",3),ee("click",function(){return c.toggleBookmarksView()}),ne(4),k(),k(),Y(5,pat,3,6,"div",4),k(),Y(6,xat,3,2,"div",5),Y(7,wat,2,1,"div",5),D(8,"clr-modal",6),ee("clrModalOpenChange",function(h){return c.modalDeleteAllBookmarksFlag=h}),D(9,"h3",7),ne(10,"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438"),k(),D(11,"div",8),me(12,"clr-icon",9),ne(13," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438? "),k(),D(14,"div",10),D(15,"button",11),ee("click",function(){return c.onDeleteAllBookmarks()}),me(16,"clr-icon",9),ne(17,"\u0414\u0430"),k(),D(18,"button",12),ee("click",function(){return c.modalDeleteAllBookmarksFlag=!1}),me(19,"clr-icon",13),ne(20,"\u041d\u0435\u0442"),k(),k(),k(),D(21,"clr-modal",6),ee("clrModalOpenChange",function(h){return c.modalDeleteBookmarkFlag=h}),D(22,"h3",7),ne(23,"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430"),k(),D(24,"div",8),me(25,"clr-icon",9),ne(26),k(),D(27,"div",10),D(28,"button",11),ee("click",function(){return c.onDeleteBookmark(c.modalDeleteBookmark)}),me(29,"clr-icon",9),ne(30,"\u0414\u0430"),k(),D(31,"button",12),ee("click",function(){return c.modalDeleteBookmarkFlag=!1}),me(32,"clr-icon",13),ne(33,"\u041d\u0435\u0442"),k(),k(),k()),2&a&&(R(1),F("ngIf",c.searchEnabled&&c.bookmarksEnabled),R(1),F("ngClass",ps(9,ige,c.searchEnabled&&c.bookmarksEnabled,!(c.searchEnabled&&c.bookmarksEnabled))),R(2),vi("",c.isAllBookmarksVisible()?"\u0421\u043a\u0440\u044b\u0442\u044c":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"," \u0432\u0441\u0435"),R(1),F("ngIf",c.isBookmarksExists()||c.searchMode),R(1),F("ngIf",c.searchMode),R(1),F("ngIf",!c.searchMode),R(1),F("clrModalOpen",c.modalDeleteAllBookmarksFlag),R(13),F("clrModalOpen",c.modalDeleteBookmarkFlag),R(5),vi(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0443 '",c.modalDeleteBookmark,"'? "))},directives:[yn,ii,P6,hy,cy,ef,AO,LNe,aat,XM,_i,YM,pu,hf,df,Ws],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class R7{constructor(){}static builder(){return new R7}}class s1 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.startSearch=!1}static builder(){return new s1("",null,null,R7.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}setStartSearch(o){return this.startSearch=o,this}}function Tat(l,o){if(1&l&&(D(0,"div"),me(1,"app-add-component",2),k()),2&l){const a=o.$implicit;R(1),F("component",a)}}let Oat=(()=>{class l extends Yp{constructor(a,c,u,h){super(a,c,u),this.router=h,this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.addMenuLink(qn.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("cog").setOnClick(()=>{this.config.post(()=>{this.reset()},0)}).setIsActive(()=>this.isComponentType(PS,null))).addMenuLink(qn.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book").setOnClick(()=>{this.routeTo("")}).setIsActive(()=>this.isComponentType(lo,Rl))).addMenuLink(qn.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("bookmark").setOnClick(()=>{this.routeToBookmarks()}).setIsActive(()=>this.isComponentType(lo,s1))).addMenuLink(qn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp()}).setIsActive(()=>this.isComponent(this.helpBookName)))}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(a=>{this.config.post(()=>this.ngAfterViewInitRaw())})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)return pageRequestedDoc="",void this.routeToHelp("3");this.uiConfig.ui.visitedBooksHelp.getStringValue()===this.config.environment.version?this.uiConfig.ui.currentBook.getStringValue()?this.config.post(()=>{this.routeTo(this.uiConfig.ui.currentBook.getStringValue())}):this.config.post(()=>{this.reset()}):this.config.post(()=>{this.routeToHelp()})}reset(){this.components=[new Vn(Wle,PS.builder().setOnClick(a=>{this.routeTo(a.trim())}))],this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.menuLinks)},0)}isComponent(a,c=""){var u;if(this.components.length<=0)return!1;let h=this.components[0].data,d=h instanceof lo?h:null,f=null===(u=null==d?void 0:d.component)||void 0===u?void 0:u.data;return(null==f?void 0:f.text)==a&&((null==f?void 0:f.link.chapter)==c||!c)||""==a&&!!(null==f?void 0:f.text)}routeToHelp(a="1"){this.isComponent(this.helpBookName,a)&&"1"===a?this.routeTo(""):this.routeTo(this.helpBookName,a,0)}routeTo(a,c="",u=-1){let h=a,d=c,f=u;if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==h)return void this.routeToHelp("3");if("books_help"==h||h==this.helpBookName&&""==d&&f<0)return void this.routeToHelp();if("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"==h)return void this.routeToBookmarks();if(h||(h=this.uiConfig.ui.currentBook.getStringValue()),!h||["UP","DOWN","AROUND","CENTER"].map(g=>h.endsWith(g)).reduce((g,m)=>g||m,!1))return;h!=this.uiConfig.ui.currentBook.getStringValue()&&h!=this.helpBookName&&this.uiConfig.ui.currentBook.setStringValue(h);let p=!1;h==this.helpBookName&&("3"!=d&&(d="1"),f=0,p=!0),this.components=[new Vn(Vl,lo.builder().setComponent(new Vn(pu,Rl.builder().setText(h).setMenu(this.menuLinks).setForceMenu(!0).setHideUI(p).setFacePage(!0).setShowPrintButtons(!0).setLink(Pl.builder().setChapter(d).setStartLine(f).setEndLine(f>=0?1e3:-1).setOnRoute(g=>{g?this.routeTo(g.trim()):this.reset()})))))]}routeToBookmarks(){this.components=[new Vn(Vl,lo.builder().setComponent(new Vn(rge,s1.builder().setText("bookmark").setOnClick(a=>{let c="string"==typeof a?a:null,u=c||this.uiConfig.ui.currentBook.getStringValue();u&&null!=c?this.routeTo(u):this.reset()}))))]}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(nh),L(Ps))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-books"]],features:[pn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,Tat,2,1,"div",1),k()),2&a&&(R(1),F("ngForOf",c.components))},directives:[_i,_c],styles:[""]}),l})();function Dat(l,o){if(1&l&&(D(0,"div"),me(1,"app-add-component",3),k()),2&l){const a=o.$implicit;R(1),F("component",a)}}let kat=(()=>{class l extends Yp{constructor(a,c,u,h){super(a,c,u),this.memDataSvc=h,this.appBookName="\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a APP_MMR",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.errorsData=rh.builder(),this.addMenuLink(qn.builder().setLink("#").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438").setShape("users").setOnClick(()=>{this.reset("2")}).setIsActive(()=>this.isComponent(this.appBookName,"2"))).addMenuLink(qn.builder().setLink("#").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438").setShape("book").setOnClick(()=>{this.reset("1")}).setIsActive(()=>this.isComponent(this.appBookName,"1"))),this.config.isRestServerType()&&this.addMenuLink(qn.builder().setLink("#").setName("\u041f\u043e\u0438\u0441\u043a").setShape("search").setOnClick(()=>{this.routeToBookmarks()}).setIsActive(()=>this.isComponentType(lo,s1))),this.addMenuLink(qn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp()}).setIsActive(()=>this.isComponent(this.helpBookName)))}isComponent(a,c=""){var u;if(this.components.length<=0)return!1;let d=null===(u=this.components[0].data.component)||void 0===u?void 0:u.data;return(null==d?void 0:d.text)==a&&(!c||(null==d?void 0:d.link.chapter)==c)}ngAfterViewInit(){this.memDataSvc.setup(a=>{if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed("4");else if(this.uiConfig.ui.visitedMemorialHelp.getStringValue()!==this.config.environment.version)this.routeToHelpDelayed();else{let c=this.uiConfig.ui.memorialBook.getStringValue(),u=this.uiConfig.ui.memorialChapter.getStringValue(),h=this.uiConfig.ui.memorialLine.getNumberValue();c?this.routeTo(c,u,h):this.resetDelayed()}}),super.ngAfterViewInit()}resetDelayed(a="2"){this.config.post(()=>{this.reset(a)})}reset(a="2"){this.routeTo(this.appBookName,a,1)}routeToHelpDelayed(a="2"){this.config.post(()=>{this.routeToHelp(a)})}routeToHelp(a="2"){this.isComponent(this.helpBookName,a)&&"2"===a?this.reset():this.routeTo(this.helpBookName,a,1)}routeToDelayed(a,c="",u=-1){this.config.post(()=>{this.routeTo(a,c,u)})}routeTo(a,c="",u=-1){let h=a;if(h){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==h)return void this.routeToHelpDelayed("4");if("books_help"==h||h==this.helpBookName&&""==c&&u<=0)return void this.routeToHelpDelayed();""==c&&(c="1"),u<0&&(u=1),this.uiConfig.ui.memorialBook.setStringValue(h),this.uiConfig.ui.memorialChapter.setStringValue(c),this.uiConfig.ui.memorialLine.setNumberValue(u),this.setComponentsDelayed([new Vn(Vl,lo.builder().setComponent(new Vn(pu,Rl.builder().setText(h).setMenu(this.menuLinks).setHideUI(!0).setShowPrintButtons(!0).setHandleMemorialNewTitle("MemorialMainWindow").setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Pl.builder().setBookName(h).setChapter(c).setStartLine(u).setEndLine(1e3).setOnRoute(d=>{d?this.routeToDelayed(d.trim()):this.resetDelayed()})))))])}}routeToBookmarks(){this.components=[new Vn(Vl,lo.builder().setComponent(new Vn(rge,s1.builder().setText("bookmark").setStartSearch(!0).setOnClick(a=>{if(this.config.post(()=>{this.applyMenuAppRoutes(!0)}),"\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==a)this.routeToHelp("4");else if(a){let c=R_.builder().parse(a),u=c[0]?c[0][0]:null;u&&(null==u?void 0:u.type)==Fl.Link?(this.uiConfig.ui.memorialChapterRequested.setNumberValue(u.startChapter),this.resetDelayed("1")):this.routeToHelpDelayed()}else this.resetDelayed(null==a?"2":"1")}))))]}setComponentsDelayed(a){this.config.post(()=>{this.components=a})}clearErrors(){this.errorsData.setErrors([])}setErrors(a){this.errorsData.setErrors(a).updateClasses(c=>c.setAlertClass("alert-danger"))}onNewMemorial(){this.clearErrors(),this.newMemorial("\u0430\u0432\u0442\u043e\u0440\u044b")}onDeleteAllMemorials(){var a,c,u;this.clearErrors(),(null===(a=this.memDataSvc.memorials)||void 0===a?void 0:a.items.length)&&(null===(c=this.memDataSvc.memorials)||void 0===c||c.deleteMemorial(null===(u=this.memDataSvc.memorials)||void 0===u?void 0:u.items[0]))}newMemorial(a){var c;null===(c=this.memDataSvc.memorials)||void 0===c||c.newMemorial(a,u=>{u.success?this.memDataSvc.getMemorials().reloadMemorials(h=>{h&&this.memDataSvc.getPersons().reloadPersons()}):this.setErrors([u.error])})}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(nh),L(w6))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-memorial"]],features:[pn],decls:3,vars:2,consts:[[1,"ftext-no","fade-in-3-no"],[3,"data"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,c){1&a&&(D(0,"div",0),me(1,"app-dynamic-errors",1),Y(2,Dat,2,1,"div",2),k()),2&a&&(R(1),F("data",c.errorsData),R(1),F("ngForOf",c.components))},directives:[YM,_i,_c],styles:[""]}),l})();const c1=1e3,zl=1001,Ao=1003,co=1006,k0=1009,M0=1014,xg=1015,Rw=1016,h1=1020,uh=1023,E0=1026,d1=1027,A0=3e3,ws=3001,Ff="srgb",I0="srgb-linear";class m1{addEventListener(o,a){void 0===this._listeners&&(this._listeners={});const c=this._listeners;void 0===c[o]&&(c[o]=[]),-1===c[o].indexOf(a)&&c[o].push(a)}hasEventListener(o,a){if(void 0===this._listeners)return!1;const c=this._listeners;return void 0!==c[o]&&-1!==c[o].indexOf(a)}removeEventListener(o,a){if(void 0===this._listeners)return;const u=this._listeners[o];if(void 0!==u){const h=u.indexOf(a);-1!==h&&u.splice(h,1)}}dispatchEvent(o){if(void 0===this._listeners)return;const c=this._listeners[o.type];if(void 0!==c){o.target=this;const u=c.slice(0);for(let h=0,d=u.length;h<d;h++)u[h].call(this,o);o.target=null}}}const Ea=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],P0=Math.PI/180,Fw=180/Math.PI;function kc(){const l=4294967295*Math.random()|0,o=4294967295*Math.random()|0,a=4294967295*Math.random()|0,c=4294967295*Math.random()|0;return(Ea[255&l]+Ea[l>>8&255]+Ea[l>>16&255]+Ea[l>>24&255]+"-"+Ea[255&o]+Ea[o>>8&255]+"-"+Ea[o>>16&15|64]+Ea[o>>24&255]+"-"+Ea[63&a|128]+Ea[a>>8&255]+"-"+Ea[a>>16&255]+Ea[a>>24&255]+Ea[255&c]+Ea[c>>8&255]+Ea[c>>16&255]+Ea[c>>24&255]).toLowerCase()}function Zs(l,o,a){return Math.max(o,Math.min(a,l))}function Nw(l,o,a){return(1-a)*l+a*o}function Y7(l){return 0==(l&l-1)&&0!==l}function qA(l){return Math.pow(2,Math.floor(Math.log(l)/Math.LN2))}class dt{constructor(o=0,a=0){dt.prototype.isVector2=!0,this.x=o,this.y=a}get width(){return this.x}set width(o){this.x=o}get height(){return this.y}set height(o){this.y=o}set(o,a){return this.x=o,this.y=a,this}setScalar(o){return this.x=o,this.y=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}setComponent(o,a){switch(o){case 0:this.x=a;break;case 1:this.y=a;break;default:throw new Error("index is out of range: "+o)}return this}getComponent(o){switch(o){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+o)}}clone(){return new this.constructor(this.x,this.y)}copy(o){return this.x=o.x,this.y=o.y,this}add(o,a){return void 0!==a?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(o,a)):(this.x+=o.x,this.y+=o.y,this)}addScalar(o){return this.x+=o,this.y+=o,this}addVectors(o,a){return this.x=o.x+a.x,this.y=o.y+a.y,this}addScaledVector(o,a){return this.x+=o.x*a,this.y+=o.y*a,this}sub(o,a){return void 0!==a?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(o,a)):(this.x-=o.x,this.y-=o.y,this)}subScalar(o){return this.x-=o,this.y-=o,this}subVectors(o,a){return this.x=o.x-a.x,this.y=o.y-a.y,this}multiply(o){return this.x*=o.x,this.y*=o.y,this}multiplyScalar(o){return this.x*=o,this.y*=o,this}divide(o){return this.x/=o.x,this.y/=o.y,this}divideScalar(o){return this.multiplyScalar(1/o)}applyMatrix3(o){const a=this.x,c=this.y,u=o.elements;return this.x=u[0]*a+u[3]*c+u[6],this.y=u[1]*a+u[4]*c+u[7],this}min(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this}max(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this}clamp(o,a){return this.x=Math.max(o.x,Math.min(a.x,this.x)),this.y=Math.max(o.y,Math.min(a.y,this.y)),this}clampScalar(o,a){return this.x=Math.max(o,Math.min(a,this.x)),this.y=Math.max(o,Math.min(a,this.y)),this}clampLength(o,a){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(o,Math.min(a,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(o){return this.x*o.x+this.y*o.y}cross(o){return this.x*o.y-this.y*o.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(o){return Math.sqrt(this.distanceToSquared(o))}distanceToSquared(o){const a=this.x-o.x,c=this.y-o.y;return a*a+c*c}manhattanDistanceTo(o){return Math.abs(this.x-o.x)+Math.abs(this.y-o.y)}setLength(o){return this.normalize().multiplyScalar(o)}lerp(o,a){return this.x+=(o.x-this.x)*a,this.y+=(o.y-this.y)*a,this}lerpVectors(o,a,c){return this.x=o.x+(a.x-o.x)*c,this.y=o.y+(a.y-o.y)*c,this}equals(o){return o.x===this.x&&o.y===this.y}fromArray(o,a=0){return this.x=o[a],this.y=o[a+1],this}toArray(o=[],a=0){return o[a]=this.x,o[a+1]=this.y,o}fromBufferAttribute(o,a,c){return void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=o.getX(a),this.y=o.getY(a),this}rotateAround(o,a){const c=Math.cos(a),u=Math.sin(a),h=this.x-o.x,d=this.y-o.y;return this.x=h*c-d*u+o.x,this.y=h*u+d*c+o.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ul{constructor(){Ul.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(o,a,c,u,h,d,f,p,g){const m=this.elements;return m[0]=o,m[1]=u,m[2]=f,m[3]=a,m[4]=h,m[5]=p,m[6]=c,m[7]=d,m[8]=g,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(o){const a=this.elements,c=o.elements;return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],this}extractBasis(o,a,c){return o.setFromMatrix3Column(this,0),a.setFromMatrix3Column(this,1),c.setFromMatrix3Column(this,2),this}setFromMatrix4(o){const a=o.elements;return this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]),this}multiply(o){return this.multiplyMatrices(this,o)}premultiply(o){return this.multiplyMatrices(o,this)}multiplyMatrices(o,a){const c=o.elements,u=a.elements,h=this.elements,d=c[0],f=c[3],p=c[6],g=c[1],m=c[4],v=c[7],y=c[2],_=c[5],b=c[8],C=u[0],x=u[3],S=u[6],w=u[1],O=u[4],T=u[7],M=u[2],A=u[5],I=u[8];return h[0]=d*C+f*w+p*M,h[3]=d*x+f*O+p*A,h[6]=d*S+f*T+p*I,h[1]=g*C+m*w+v*M,h[4]=g*x+m*O+v*A,h[7]=g*S+m*T+v*I,h[2]=y*C+_*w+b*M,h[5]=y*x+_*O+b*A,h[8]=y*S+_*T+b*I,this}multiplyScalar(o){const a=this.elements;return a[0]*=o,a[3]*=o,a[6]*=o,a[1]*=o,a[4]*=o,a[7]*=o,a[2]*=o,a[5]*=o,a[8]*=o,this}determinant(){const o=this.elements,a=o[0],c=o[1],u=o[2],h=o[3],d=o[4],f=o[5],p=o[6],g=o[7],m=o[8];return a*d*m-a*f*g-c*h*m+c*f*p+u*h*g-u*d*p}invert(){const o=this.elements,a=o[0],c=o[1],u=o[2],h=o[3],d=o[4],f=o[5],p=o[6],g=o[7],m=o[8],v=m*d-f*g,y=f*p-m*h,_=g*h-d*p,b=a*v+c*y+u*_;if(0===b)return this.set(0,0,0,0,0,0,0,0,0);const C=1/b;return o[0]=v*C,o[1]=(u*g-m*c)*C,o[2]=(f*c-u*d)*C,o[3]=y*C,o[4]=(m*a-u*p)*C,o[5]=(u*h-f*a)*C,o[6]=_*C,o[7]=(c*p-g*a)*C,o[8]=(d*a-c*h)*C,this}transpose(){let o;const a=this.elements;return o=a[1],a[1]=a[3],a[3]=o,o=a[2],a[2]=a[6],a[6]=o,o=a[5],a[5]=a[7],a[7]=o,this}getNormalMatrix(o){return this.setFromMatrix4(o).invert().transpose()}transposeIntoArray(o){const a=this.elements;return o[0]=a[0],o[1]=a[3],o[2]=a[6],o[3]=a[1],o[4]=a[4],o[5]=a[7],o[6]=a[2],o[7]=a[5],o[8]=a[8],this}setUvTransform(o,a,c,u,h,d,f){const p=Math.cos(h),g=Math.sin(h);return this.set(c*p,c*g,-c*(p*d+g*f)+d+o,-u*g,u*p,-u*(-g*d+p*f)+f+a,0,0,1),this}scale(o,a){const c=this.elements;return c[0]*=o,c[3]*=o,c[6]*=o,c[1]*=a,c[4]*=a,c[7]*=a,this}rotate(o){const a=Math.cos(o),c=Math.sin(o),u=this.elements,h=u[0],d=u[3],f=u[6],p=u[1],g=u[4],m=u[7];return u[0]=a*h+c*p,u[3]=a*d+c*g,u[6]=a*f+c*m,u[1]=-c*h+a*p,u[4]=-c*d+a*g,u[7]=-c*f+a*m,this}translate(o,a){const c=this.elements;return c[0]+=o*c[2],c[3]+=o*c[5],c[6]+=o*c[8],c[1]+=a*c[2],c[4]+=a*c[5],c[7]+=a*c[8],this}equals(o){const a=this.elements,c=o.elements;for(let u=0;u<9;u++)if(a[u]!==c[u])return!1;return!0}fromArray(o,a=0){for(let c=0;c<9;c++)this.elements[c]=o[c+a];return this}toArray(o=[],a=0){const c=this.elements;return o[a]=c[0],o[a+1]=c[1],o[a+2]=c[2],o[a+3]=c[3],o[a+4]=c[4],o[a+5]=c[5],o[a+6]=c[6],o[a+7]=c[7],o[a+8]=c[8],o}clone(){return(new this.constructor).fromArray(this.elements)}}function $ge(l){for(let o=l.length-1;o>=0;--o)if(l[o]>65535)return!0;return!1}function Lw(l){return document.createElementNS("http://www.w3.org/1999/xhtml",l)}function R0(l){return l<.04045?.0773993808*l:Math.pow(.9478672986*l+.0521327014,2.4)}function ZA(l){return l<.0031308?12.92*l:1.055*Math.pow(l,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const K7={[Ff]:{[I0]:R0},[I0]:{[Ff]:ZA}},hh={legacyMode:!0,get workingColorSpace(){return I0},set workingColorSpace(l){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(l,o,a){if(this.legacyMode||o===a||!o||!a)return l;if(K7[o]&&void 0!==K7[o][a]){const c=K7[o][a];return l.r=c(l.r),l.g=c(l.g),l.b=c(l.b),l}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(l,o){return this.convert(l,this.workingColorSpace,o)},toWorkingColorSpace:function(l,o){return this.convert(l,o,this.workingColorSpace)}},Wge={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Io={r:0,g:0,b:0},dh={h:0,s:0,l:0},XA={h:0,s:0,l:0};function J7(l,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?l+6*(o-l)*a:a<.5?o:a<2/3?l+6*(o-l)*(2/3-a):l}function YA(l,o){return o.r=l.r,o.g=l.g,o.b=l.b,o}let y1,sn=(()=>{class l{constructor(a,c,u){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===c&&void 0===u?this.set(a):this.setRGB(a,c,u)}set(a){return a&&a.isColor?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a),this}setScalar(a){return this.r=a,this.g=a,this.b=a,this}setHex(a,c=Ff){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,hh.toWorkingColorSpace(this,c),this}setRGB(a,c,u,h=I0){return this.r=a,this.g=c,this.b=u,hh.toWorkingColorSpace(this,h),this}setHSL(a,c,u,h=I0){if(a=function X7(l,o){return(l%o+o)%o}(a,1),c=Zs(c,0,1),u=Zs(u,0,1),0===c)this.r=this.g=this.b=u;else{const d=u<=.5?u*(1+c):u+c-u*c,f=2*u-d;this.r=J7(f,d,a+1/3),this.g=J7(f,d,a),this.b=J7(f,d,a-1/3)}return hh.toWorkingColorSpace(this,h),this}setStyle(a,c=Ff){function u(d){void 0!==d&&parseFloat(d)<1&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}let h;if(h=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(a)){let d;const p=h[2];switch(h[1]){case"rgb":case"rgba":if(d=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,hh.toWorkingColorSpace(this,c),u(d[4]),this;if(d=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,hh.toWorkingColorSpace(this,c),u(d[4]),this;break;case"hsl":case"hsla":if(d=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p)){const g=parseFloat(d[1])/360,m=parseInt(d[2],10)/100,v=parseInt(d[3],10)/100;return u(d[4]),this.setHSL(g,m,v,c)}}}else if(h=/^\#([A-Fa-f\d]+)$/.exec(a)){const d=h[1],f=d.length;if(3===f)return this.r=parseInt(d.charAt(0)+d.charAt(0),16)/255,this.g=parseInt(d.charAt(1)+d.charAt(1),16)/255,this.b=parseInt(d.charAt(2)+d.charAt(2),16)/255,hh.toWorkingColorSpace(this,c),this;if(6===f)return this.r=parseInt(d.charAt(0)+d.charAt(1),16)/255,this.g=parseInt(d.charAt(2)+d.charAt(3),16)/255,this.b=parseInt(d.charAt(4)+d.charAt(5),16)/255,hh.toWorkingColorSpace(this,c),this}return a&&a.length>0?this.setColorName(a,c):this}setColorName(a,c=Ff){const u=Wge[a.toLowerCase()];return void 0!==u?this.setHex(u,c):console.warn("THREE.Color: Unknown color "+a),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(a){return this.r=a.r,this.g=a.g,this.b=a.b,this}copySRGBToLinear(a){return this.r=R0(a.r),this.g=R0(a.g),this.b=R0(a.b),this}copyLinearToSRGB(a){return this.r=ZA(a.r),this.g=ZA(a.g),this.b=ZA(a.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(a=Ff){return hh.fromWorkingColorSpace(YA(this,Io),a),Zs(255*Io.r,0,255)<<16^Zs(255*Io.g,0,255)<<8^Zs(255*Io.b,0,255)<<0}getHexString(a=Ff){return("000000"+this.getHex(a).toString(16)).slice(-6)}getHSL(a,c=I0){hh.fromWorkingColorSpace(YA(this,Io),c);const u=Io.r,h=Io.g,d=Io.b,f=Math.max(u,h,d),p=Math.min(u,h,d);let g,m;const v=(p+f)/2;if(p===f)g=0,m=0;else{const y=f-p;switch(m=v<=.5?y/(f+p):y/(2-f-p),f){case u:g=(h-d)/y+(h<d?6:0);break;case h:g=(d-u)/y+2;break;case d:g=(u-h)/y+4}g/=6}return a.h=g,a.s=m,a.l=v,a}getRGB(a,c=I0){return hh.fromWorkingColorSpace(YA(this,Io),c),a.r=Io.r,a.g=Io.g,a.b=Io.b,a}getStyle(a=Ff){return hh.fromWorkingColorSpace(YA(this,Io),a),a!==Ff?`color(${a} ${Io.r} ${Io.g} ${Io.b})`:`rgb(${255*Io.r|0},${255*Io.g|0},${255*Io.b|0})`}offsetHSL(a,c,u){return this.getHSL(dh),dh.h+=a,dh.s+=c,dh.l+=u,this.setHSL(dh.h,dh.s,dh.l),this}add(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this}addColors(a,c){return this.r=a.r+c.r,this.g=a.g+c.g,this.b=a.b+c.b,this}addScalar(a){return this.r+=a,this.g+=a,this.b+=a,this}sub(a){return this.r=Math.max(0,this.r-a.r),this.g=Math.max(0,this.g-a.g),this.b=Math.max(0,this.b-a.b),this}multiply(a){return this.r*=a.r,this.g*=a.g,this.b*=a.b,this}multiplyScalar(a){return this.r*=a,this.g*=a,this.b*=a,this}lerp(a,c){return this.r+=(a.r-this.r)*c,this.g+=(a.g-this.g)*c,this.b+=(a.b-this.b)*c,this}lerpColors(a,c,u){return this.r=a.r+(c.r-a.r)*u,this.g=a.g+(c.g-a.g)*u,this.b=a.b+(c.b-a.b)*u,this}lerpHSL(a,c){this.getHSL(dh),a.getHSL(XA);const u=Nw(dh.h,XA.h,c),h=Nw(dh.s,XA.s,c),d=Nw(dh.l,XA.l,c);return this.setHSL(u,h,d),this}equals(a){return a.r===this.r&&a.g===this.g&&a.b===this.b}fromArray(a,c=0){return this.r=a[c],this.g=a[c+1],this.b=a[c+2],this}toArray(a=[],c=0){return a[c]=this.r,a[c+1]=this.g,a[c+2]=this.b,a}fromBufferAttribute(a,c){return this.r=a.getX(c),this.g=a.getY(c),this.b=a.getZ(c),!0===a.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return l.NAMES=Wge,l})();class Gge{static getDataURL(o){if(/^data:/i.test(o.src)||"undefined"==typeof HTMLCanvasElement)return o.src;let a;if(o instanceof HTMLCanvasElement)a=o;else{void 0===y1&&(y1=Lw("canvas")),y1.width=o.width,y1.height=o.height;const c=y1.getContext("2d");o instanceof ImageData?c.putImageData(o,0,0):c.drawImage(o,0,0,o.width,o.height),a=y1}return a.width>2048||a.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",o),a.toDataURL("image/jpeg",.6)):a.toDataURL("image/png")}static sRGBToLinear(o){if("undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&o instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&o instanceof ImageBitmap){const a=Lw("canvas");a.width=o.width,a.height=o.height;const c=a.getContext("2d");c.drawImage(o,0,0,o.width,o.height);const u=c.getImageData(0,0,o.width,o.height),h=u.data;for(let d=0;d<h.length;d++)h[d]=255*R0(h[d]/255);return c.putImageData(u,0,0),a}if(o.data){const a=o.data.slice(0);for(let c=0;c<a.length;c++)a[c]=a instanceof Uint8Array||a instanceof Uint8ClampedArray?Math.floor(255*R0(a[c]/255)):R0(a[c]);return{data:a,width:o.width,height:o.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),o}}class _1{constructor(o=null){this.isSource=!0,this.uuid=kc(),this.data=o,this.version=0}set needsUpdate(o){!0===o&&this.version++}toJSON(o){const a=void 0===o||"string"==typeof o;if(!a&&void 0!==o.images[this.uuid])return o.images[this.uuid];const c={uuid:this.uuid,url:""},u=this.data;if(null!==u){let h;if(Array.isArray(u)){h=[];for(let d=0,f=u.length;d<f;d++)h.push(eH(u[d].isDataTexture?u[d].image:u[d]))}else h=eH(u);c.url=h}return a||(o.images[this.uuid]=c),c}}function eH(l){return"undefined"!=typeof HTMLImageElement&&l instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&l instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&l instanceof ImageBitmap?Gge.getDataURL(l):l.data?{data:Array.from(l.data),width:l.width,height:l.height,type:l.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let zlt=0,wd=(()=>{class l extends m1{constructor(a=l.DEFAULT_IMAGE,c=l.DEFAULT_MAPPING,u=zl,h=zl,d=co,f=1008,p=uh,g=k0,m=1,v=A0){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:zlt++}),this.uuid=kc(),this.name="",this.source=new _1(a),this.mipmaps=[],this.mapping=c,this.wrapS=u,this.wrapT=h,this.magFilter=d,this.minFilter=f,this.anisotropy=m,this.format=p,this.internalFormat=null,this.type=g,this.offset=new dt(0,0),this.repeat=new dt(1,1),this.center=new dt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ul,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=v,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(a){this.source.data=a}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(a){return this.name=a.name,this.source=a.source,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.internalFormat=a.internalFormat,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.center.copy(a.center),this.rotation=a.rotation,this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrix.copy(a.matrix),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this.userData=JSON.parse(JSON.stringify(a.userData)),this.needsUpdate=!0,this}toJSON(a){const c=void 0===a||"string"==typeof a;if(!c&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];const u={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(a).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(u.userData=this.userData),c||(a.textures[this.uuid]=u),u}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(a){if(300!==this.mapping)return a;if(a.applyMatrix3(this.matrix),a.x<0||a.x>1)switch(this.wrapS){case c1:a.x=a.x-Math.floor(a.x);break;case zl:a.x=a.x<0?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(a.y<0||a.y>1)switch(this.wrapT){case c1:a.y=a.y-Math.floor(a.y);break;case zl:a.y=a.y<0?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}return this.flipY&&(a.y=1-a.y),a}set needsUpdate(a){!0===a&&(this.version++,this.source.needsUpdate=!0)}}return l.DEFAULT_IMAGE=null,l.DEFAULT_MAPPING=300,l})();class er{constructor(o=0,a=0,c=0,u=1){er.prototype.isVector4=!0,this.x=o,this.y=a,this.z=c,this.w=u}get width(){return this.z}set width(o){this.z=o}get height(){return this.w}set height(o){this.w=o}set(o,a,c,u){return this.x=o,this.y=a,this.z=c,this.w=u,this}setScalar(o){return this.x=o,this.y=o,this.z=o,this.w=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}setZ(o){return this.z=o,this}setW(o){return this.w=o,this}setComponent(o,a){switch(o){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;case 3:this.w=a;break;default:throw new Error("index is out of range: "+o)}return this}getComponent(o){switch(o){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+o)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(o){return this.x=o.x,this.y=o.y,this.z=o.z,this.w=void 0!==o.w?o.w:1,this}add(o,a){return void 0!==a?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(o,a)):(this.x+=o.x,this.y+=o.y,this.z+=o.z,this.w+=o.w,this)}addScalar(o){return this.x+=o,this.y+=o,this.z+=o,this.w+=o,this}addVectors(o,a){return this.x=o.x+a.x,this.y=o.y+a.y,this.z=o.z+a.z,this.w=o.w+a.w,this}addScaledVector(o,a){return this.x+=o.x*a,this.y+=o.y*a,this.z+=o.z*a,this.w+=o.w*a,this}sub(o,a){return void 0!==a?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(o,a)):(this.x-=o.x,this.y-=o.y,this.z-=o.z,this.w-=o.w,this)}subScalar(o){return this.x-=o,this.y-=o,this.z-=o,this.w-=o,this}subVectors(o,a){return this.x=o.x-a.x,this.y=o.y-a.y,this.z=o.z-a.z,this.w=o.w-a.w,this}multiply(o){return this.x*=o.x,this.y*=o.y,this.z*=o.z,this.w*=o.w,this}multiplyScalar(o){return this.x*=o,this.y*=o,this.z*=o,this.w*=o,this}applyMatrix4(o){const a=this.x,c=this.y,u=this.z,h=this.w,d=o.elements;return this.x=d[0]*a+d[4]*c+d[8]*u+d[12]*h,this.y=d[1]*a+d[5]*c+d[9]*u+d[13]*h,this.z=d[2]*a+d[6]*c+d[10]*u+d[14]*h,this.w=d[3]*a+d[7]*c+d[11]*u+d[15]*h,this}divideScalar(o){return this.multiplyScalar(1/o)}setAxisAngleFromQuaternion(o){this.w=2*Math.acos(o.w);const a=Math.sqrt(1-o.w*o.w);return a<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=o.x/a,this.y=o.y/a,this.z=o.z/a),this}setAxisAngleFromRotationMatrix(o){let a,c,u,h;const p=o.elements,g=p[0],m=p[4],v=p[8],y=p[1],_=p[5],b=p[9],C=p[2],x=p[6],S=p[10];if(Math.abs(m-y)<.01&&Math.abs(v-C)<.01&&Math.abs(b-x)<.01){if(Math.abs(m+y)<.1&&Math.abs(v+C)<.1&&Math.abs(b+x)<.1&&Math.abs(g+_+S-3)<.1)return this.set(1,0,0,0),this;a=Math.PI;const O=(g+1)/2,T=(_+1)/2,M=(S+1)/2,A=(m+y)/4,I=(v+C)/4,E=(b+x)/4;return O>T&&O>M?O<.01?(c=0,u=.707106781,h=.707106781):(c=Math.sqrt(O),u=A/c,h=I/c):T>M?T<.01?(c=.707106781,u=0,h=.707106781):(u=Math.sqrt(T),c=A/u,h=E/u):M<.01?(c=.707106781,u=.707106781,h=0):(h=Math.sqrt(M),c=I/h,u=E/h),this.set(c,u,h,a),this}let w=Math.sqrt((x-b)*(x-b)+(v-C)*(v-C)+(y-m)*(y-m));return Math.abs(w)<.001&&(w=1),this.x=(x-b)/w,this.y=(v-C)/w,this.z=(y-m)/w,this.w=Math.acos((g+_+S-1)/2),this}min(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this.z=Math.min(this.z,o.z),this.w=Math.min(this.w,o.w),this}max(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this.z=Math.max(this.z,o.z),this.w=Math.max(this.w,o.w),this}clamp(o,a){return this.x=Math.max(o.x,Math.min(a.x,this.x)),this.y=Math.max(o.y,Math.min(a.y,this.y)),this.z=Math.max(o.z,Math.min(a.z,this.z)),this.w=Math.max(o.w,Math.min(a.w,this.w)),this}clampScalar(o,a){return this.x=Math.max(o,Math.min(a,this.x)),this.y=Math.max(o,Math.min(a,this.y)),this.z=Math.max(o,Math.min(a,this.z)),this.w=Math.max(o,Math.min(a,this.w)),this}clampLength(o,a){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(o,Math.min(a,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(o){return this.x*o.x+this.y*o.y+this.z*o.z+this.w*o.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(o){return this.normalize().multiplyScalar(o)}lerp(o,a){return this.x+=(o.x-this.x)*a,this.y+=(o.y-this.y)*a,this.z+=(o.z-this.z)*a,this.w+=(o.w-this.w)*a,this}lerpVectors(o,a,c){return this.x=o.x+(a.x-o.x)*c,this.y=o.y+(a.y-o.y)*c,this.z=o.z+(a.z-o.z)*c,this.w=o.w+(a.w-o.w)*c,this}equals(o){return o.x===this.x&&o.y===this.y&&o.z===this.z&&o.w===this.w}fromArray(o,a=0){return this.x=o[a],this.y=o[a+1],this.z=o[a+2],this.w=o[a+3],this}toArray(o=[],a=0){return o[a]=this.x,o[a+1]=this.y,o[a+2]=this.z,o[a+3]=this.w,o}fromBufferAttribute(o,a,c){return void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=o.getX(a),this.y=o.getY(a),this.z=o.getZ(a),this.w=o.getW(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class dl extends m1{constructor(o,a,c={}){super(),this.isWebGLRenderTarget=!0,this.width=o,this.height=a,this.depth=1,this.scissor=new er(0,0,o,a),this.scissorTest=!1,this.viewport=new er(0,0,o,a),this.texture=new wd({width:o,height:a,depth:1},c.mapping,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==c.generateMipmaps&&c.generateMipmaps,this.texture.internalFormat=void 0!==c.internalFormat?c.internalFormat:null,this.texture.minFilter=void 0!==c.minFilter?c.minFilter:co,this.depthBuffer=void 0===c.depthBuffer||c.depthBuffer,this.stencilBuffer=void 0!==c.stencilBuffer&&c.stencilBuffer,this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null,this.samples=void 0!==c.samples?c.samples:0}setSize(o,a,c=1){(this.width!==o||this.height!==a||this.depth!==c)&&(this.width=o,this.height=a,this.depth=c,this.texture.image.width=o,this.texture.image.height=a,this.texture.image.depth=c,this.dispose()),this.viewport.set(0,0,o,a),this.scissor.set(0,0,o,a)}clone(){return(new this.constructor).copy(this)}copy(o){this.width=o.width,this.height=o.height,this.depth=o.depth,this.viewport.copy(o.viewport),this.texture=o.texture.clone(),this.texture.isRenderTargetTexture=!0;const a=Object.assign({},o.texture.image);return this.texture.source=new _1(a),this.depthBuffer=o.depthBuffer,this.stencilBuffer=o.stencilBuffer,null!==o.depthTexture&&(this.depthTexture=o.depthTexture.clone()),this.samples=o.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class tH extends wd{constructor(o=null,a=1,c=1,u=1){super(null),this.isDataArrayTexture=!0,this.image={data:o,width:a,height:c,depth:u},this.magFilter=Ao,this.minFilter=Ao,this.wrapR=zl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Qge extends wd{constructor(o=null,a=1,c=1,u=1){super(null),this.isData3DTexture=!0,this.image={data:o,width:a,height:c,depth:u},this.magFilter=Ao,this.minFilter=Ao,this.wrapR=zl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Mc{constructor(o=0,a=0,c=0,u=1){this.isQuaternion=!0,this._x=o,this._y=a,this._z=c,this._w=u}static slerp(o,a,c,u){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),c.slerpQuaternions(o,a,u)}static slerpFlat(o,a,c,u,h,d,f){let p=c[u+0],g=c[u+1],m=c[u+2],v=c[u+3];const y=h[d+0],_=h[d+1],b=h[d+2],C=h[d+3];if(0===f)return o[a+0]=p,o[a+1]=g,o[a+2]=m,void(o[a+3]=v);if(1===f)return o[a+0]=y,o[a+1]=_,o[a+2]=b,void(o[a+3]=C);if(v!==C||p!==y||g!==_||m!==b){let x=1-f;const S=p*y+g*_+m*b+v*C,w=S>=0?1:-1,O=1-S*S;if(O>Number.EPSILON){const M=Math.sqrt(O),A=Math.atan2(M,S*w);x=Math.sin(x*A)/M,f=Math.sin(f*A)/M}const T=f*w;if(p=p*x+y*T,g=g*x+_*T,m=m*x+b*T,v=v*x+C*T,x===1-f){const M=1/Math.sqrt(p*p+g*g+m*m+v*v);p*=M,g*=M,m*=M,v*=M}}o[a]=p,o[a+1]=g,o[a+2]=m,o[a+3]=v}static multiplyQuaternionsFlat(o,a,c,u,h,d){const f=c[u],p=c[u+1],g=c[u+2],m=c[u+3],v=h[d],y=h[d+1],_=h[d+2],b=h[d+3];return o[a]=f*b+m*v+p*_-g*y,o[a+1]=p*b+m*y+g*v-f*_,o[a+2]=g*b+m*_+f*y-p*v,o[a+3]=m*b-f*v-p*y-g*_,o}get x(){return this._x}set x(o){this._x=o,this._onChangeCallback()}get y(){return this._y}set y(o){this._y=o,this._onChangeCallback()}get z(){return this._z}set z(o){this._z=o,this._onChangeCallback()}get w(){return this._w}set w(o){this._w=o,this._onChangeCallback()}set(o,a,c,u){return this._x=o,this._y=a,this._z=c,this._w=u,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(o){return this._x=o.x,this._y=o.y,this._z=o.z,this._w=o.w,this._onChangeCallback(),this}setFromEuler(o,a){if(!o||!o.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const c=o._x,u=o._y,h=o._z,d=o._order,f=Math.cos,p=Math.sin,g=f(c/2),m=f(u/2),v=f(h/2),y=p(c/2),_=p(u/2),b=p(h/2);switch(d){case"XYZ":this._x=y*m*v+g*_*b,this._y=g*_*v-y*m*b,this._z=g*m*b+y*_*v,this._w=g*m*v-y*_*b;break;case"YXZ":this._x=y*m*v+g*_*b,this._y=g*_*v-y*m*b,this._z=g*m*b-y*_*v,this._w=g*m*v+y*_*b;break;case"ZXY":this._x=y*m*v-g*_*b,this._y=g*_*v+y*m*b,this._z=g*m*b+y*_*v,this._w=g*m*v-y*_*b;break;case"ZYX":this._x=y*m*v-g*_*b,this._y=g*_*v+y*m*b,this._z=g*m*b-y*_*v,this._w=g*m*v+y*_*b;break;case"YZX":this._x=y*m*v+g*_*b,this._y=g*_*v+y*m*b,this._z=g*m*b-y*_*v,this._w=g*m*v-y*_*b;break;case"XZY":this._x=y*m*v-g*_*b,this._y=g*_*v-y*m*b,this._z=g*m*b+y*_*v,this._w=g*m*v+y*_*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return!1!==a&&this._onChangeCallback(),this}setFromAxisAngle(o,a){const c=a/2,u=Math.sin(c);return this._x=o.x*u,this._y=o.y*u,this._z=o.z*u,this._w=Math.cos(c),this._onChangeCallback(),this}setFromRotationMatrix(o){const a=o.elements,c=a[0],u=a[4],h=a[8],d=a[1],f=a[5],p=a[9],g=a[2],m=a[6],v=a[10],y=c+f+v;if(y>0){const _=.5/Math.sqrt(y+1);this._w=.25/_,this._x=(m-p)*_,this._y=(h-g)*_,this._z=(d-u)*_}else if(c>f&&c>v){const _=2*Math.sqrt(1+c-f-v);this._w=(m-p)/_,this._x=.25*_,this._y=(u+d)/_,this._z=(h+g)/_}else if(f>v){const _=2*Math.sqrt(1+f-c-v);this._w=(h-g)/_,this._x=(u+d)/_,this._y=.25*_,this._z=(p+m)/_}else{const _=2*Math.sqrt(1+v-c-f);this._w=(d-u)/_,this._x=(h+g)/_,this._y=(p+m)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(o,a){let c=o.dot(a)+1;return c<Number.EPSILON?(c=0,Math.abs(o.x)>Math.abs(o.z)?(this._x=-o.y,this._y=o.x,this._z=0,this._w=c):(this._x=0,this._y=-o.z,this._z=o.y,this._w=c)):(this._x=o.y*a.z-o.z*a.y,this._y=o.z*a.x-o.x*a.z,this._z=o.x*a.y-o.y*a.x,this._w=c),this.normalize()}angleTo(o){return 2*Math.acos(Math.abs(Zs(this.dot(o),-1,1)))}rotateTowards(o,a){const c=this.angleTo(o);if(0===c)return this;const u=Math.min(1,a/c);return this.slerp(o,u),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(o){return this._x*o._x+this._y*o._y+this._z*o._z+this._w*o._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let o=this.length();return 0===o?(this._x=0,this._y=0,this._z=0,this._w=1):(o=1/o,this._x=this._x*o,this._y=this._y*o,this._z=this._z*o,this._w=this._w*o),this._onChangeCallback(),this}multiply(o,a){return void 0!==a?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(o,a)):this.multiplyQuaternions(this,o)}premultiply(o){return this.multiplyQuaternions(o,this)}multiplyQuaternions(o,a){const c=o._x,u=o._y,h=o._z,d=o._w,f=a._x,p=a._y,g=a._z,m=a._w;return this._x=c*m+d*f+u*g-h*p,this._y=u*m+d*p+h*f-c*g,this._z=h*m+d*g+c*p-u*f,this._w=d*m-c*f-u*p-h*g,this._onChangeCallback(),this}slerp(o,a){if(0===a)return this;if(1===a)return this.copy(o);const c=this._x,u=this._y,h=this._z,d=this._w;let f=d*o._w+c*o._x+u*o._y+h*o._z;if(f<0?(this._w=-o._w,this._x=-o._x,this._y=-o._y,this._z=-o._z,f=-f):this.copy(o),f>=1)return this._w=d,this._x=c,this._y=u,this._z=h,this;const p=1-f*f;if(p<=Number.EPSILON){const _=1-a;return this._w=_*d+a*this._w,this._x=_*c+a*this._x,this._y=_*u+a*this._y,this._z=_*h+a*this._z,this.normalize(),this._onChangeCallback(),this}const g=Math.sqrt(p),m=Math.atan2(g,f),v=Math.sin((1-a)*m)/g,y=Math.sin(a*m)/g;return this._w=d*v+this._w*y,this._x=c*v+this._x*y,this._y=u*v+this._y*y,this._z=h*v+this._z*y,this._onChangeCallback(),this}slerpQuaternions(o,a,c){return this.copy(o).slerp(a,c)}random(){const o=Math.random(),a=Math.sqrt(1-o),c=Math.sqrt(o),u=2*Math.PI*Math.random(),h=2*Math.PI*Math.random();return this.set(a*Math.cos(u),c*Math.sin(h),c*Math.cos(h),a*Math.sin(u))}equals(o){return o._x===this._x&&o._y===this._y&&o._z===this._z&&o._w===this._w}fromArray(o,a=0){return this._x=o[a],this._y=o[a+1],this._z=o[a+2],this._w=o[a+3],this._onChangeCallback(),this}toArray(o=[],a=0){return o[a]=this._x,o[a+1]=this._y,o[a+2]=this._z,o[a+3]=this._w,o}fromBufferAttribute(o,a){return this._x=o.getX(a),this._y=o.getY(a),this._z=o.getZ(a),this._w=o.getW(a),this}_onChange(o){return this._onChangeCallback=o,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class te{constructor(o=0,a=0,c=0){te.prototype.isVector3=!0,this.x=o,this.y=a,this.z=c}set(o,a,c){return void 0===c&&(c=this.z),this.x=o,this.y=a,this.z=c,this}setScalar(o){return this.x=o,this.y=o,this.z=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}setZ(o){return this.z=o,this}setComponent(o,a){switch(o){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;default:throw new Error("index is out of range: "+o)}return this}getComponent(o){switch(o){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+o)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(o){return this.x=o.x,this.y=o.y,this.z=o.z,this}add(o,a){return void 0!==a?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(o,a)):(this.x+=o.x,this.y+=o.y,this.z+=o.z,this)}addScalar(o){return this.x+=o,this.y+=o,this.z+=o,this}addVectors(o,a){return this.x=o.x+a.x,this.y=o.y+a.y,this.z=o.z+a.z,this}addScaledVector(o,a){return this.x+=o.x*a,this.y+=o.y*a,this.z+=o.z*a,this}sub(o,a){return void 0!==a?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(o,a)):(this.x-=o.x,this.y-=o.y,this.z-=o.z,this)}subScalar(o){return this.x-=o,this.y-=o,this.z-=o,this}subVectors(o,a){return this.x=o.x-a.x,this.y=o.y-a.y,this.z=o.z-a.z,this}multiply(o,a){return void 0!==a?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(o,a)):(this.x*=o.x,this.y*=o.y,this.z*=o.z,this)}multiplyScalar(o){return this.x*=o,this.y*=o,this.z*=o,this}multiplyVectors(o,a){return this.x=o.x*a.x,this.y=o.y*a.y,this.z=o.z*a.z,this}applyEuler(o){return o&&o.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(jge.setFromEuler(o))}applyAxisAngle(o,a){return this.applyQuaternion(jge.setFromAxisAngle(o,a))}applyMatrix3(o){const a=this.x,c=this.y,u=this.z,h=o.elements;return this.x=h[0]*a+h[3]*c+h[6]*u,this.y=h[1]*a+h[4]*c+h[7]*u,this.z=h[2]*a+h[5]*c+h[8]*u,this}applyNormalMatrix(o){return this.applyMatrix3(o).normalize()}applyMatrix4(o){const a=this.x,c=this.y,u=this.z,h=o.elements,d=1/(h[3]*a+h[7]*c+h[11]*u+h[15]);return this.x=(h[0]*a+h[4]*c+h[8]*u+h[12])*d,this.y=(h[1]*a+h[5]*c+h[9]*u+h[13])*d,this.z=(h[2]*a+h[6]*c+h[10]*u+h[14])*d,this}applyQuaternion(o){const a=this.x,c=this.y,u=this.z,h=o.x,d=o.y,f=o.z,p=o.w,g=p*a+d*u-f*c,m=p*c+f*a-h*u,v=p*u+h*c-d*a,y=-h*a-d*c-f*u;return this.x=g*p+y*-h+m*-f-v*-d,this.y=m*p+y*-d+v*-h-g*-f,this.z=v*p+y*-f+g*-d-m*-h,this}project(o){return this.applyMatrix4(o.matrixWorldInverse).applyMatrix4(o.projectionMatrix)}unproject(o){return this.applyMatrix4(o.projectionMatrixInverse).applyMatrix4(o.matrixWorld)}transformDirection(o){const a=this.x,c=this.y,u=this.z,h=o.elements;return this.x=h[0]*a+h[4]*c+h[8]*u,this.y=h[1]*a+h[5]*c+h[9]*u,this.z=h[2]*a+h[6]*c+h[10]*u,this.normalize()}divide(o){return this.x/=o.x,this.y/=o.y,this.z/=o.z,this}divideScalar(o){return this.multiplyScalar(1/o)}min(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this.z=Math.min(this.z,o.z),this}max(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this.z=Math.max(this.z,o.z),this}clamp(o,a){return this.x=Math.max(o.x,Math.min(a.x,this.x)),this.y=Math.max(o.y,Math.min(a.y,this.y)),this.z=Math.max(o.z,Math.min(a.z,this.z)),this}clampScalar(o,a){return this.x=Math.max(o,Math.min(a,this.x)),this.y=Math.max(o,Math.min(a,this.y)),this.z=Math.max(o,Math.min(a,this.z)),this}clampLength(o,a){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(o,Math.min(a,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(o){return this.x*o.x+this.y*o.y+this.z*o.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(o){return this.normalize().multiplyScalar(o)}lerp(o,a){return this.x+=(o.x-this.x)*a,this.y+=(o.y-this.y)*a,this.z+=(o.z-this.z)*a,this}lerpVectors(o,a,c){return this.x=o.x+(a.x-o.x)*c,this.y=o.y+(a.y-o.y)*c,this.z=o.z+(a.z-o.z)*c,this}cross(o,a){return void 0!==a?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(o,a)):this.crossVectors(this,o)}crossVectors(o,a){const c=o.x,u=o.y,h=o.z,d=a.x,f=a.y,p=a.z;return this.x=u*p-h*f,this.y=h*d-c*p,this.z=c*f-u*d,this}projectOnVector(o){const a=o.lengthSq();if(0===a)return this.set(0,0,0);const c=o.dot(this)/a;return this.copy(o).multiplyScalar(c)}projectOnPlane(o){return nH.copy(this).projectOnVector(o),this.sub(nH)}reflect(o){return this.sub(nH.copy(o).multiplyScalar(2*this.dot(o)))}angleTo(o){const a=Math.sqrt(this.lengthSq()*o.lengthSq());if(0===a)return Math.PI/2;const c=this.dot(o)/a;return Math.acos(Zs(c,-1,1))}distanceTo(o){return Math.sqrt(this.distanceToSquared(o))}distanceToSquared(o){const a=this.x-o.x,c=this.y-o.y,u=this.z-o.z;return a*a+c*c+u*u}manhattanDistanceTo(o){return Math.abs(this.x-o.x)+Math.abs(this.y-o.y)+Math.abs(this.z-o.z)}setFromSpherical(o){return this.setFromSphericalCoords(o.radius,o.phi,o.theta)}setFromSphericalCoords(o,a,c){const u=Math.sin(a)*o;return this.x=u*Math.sin(c),this.y=Math.cos(a)*o,this.z=u*Math.cos(c),this}setFromCylindrical(o){return this.setFromCylindricalCoords(o.radius,o.theta,o.y)}setFromCylindricalCoords(o,a,c){return this.x=o*Math.sin(a),this.y=c,this.z=o*Math.cos(a),this}setFromMatrixPosition(o){const a=o.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this}setFromMatrixScale(o){const a=this.setFromMatrixColumn(o,0).length(),c=this.setFromMatrixColumn(o,1).length(),u=this.setFromMatrixColumn(o,2).length();return this.x=a,this.y=c,this.z=u,this}setFromMatrixColumn(o,a){return this.fromArray(o.elements,4*a)}setFromMatrix3Column(o,a){return this.fromArray(o.elements,3*a)}setFromEuler(o){return this.x=o._x,this.y=o._y,this.z=o._z,this}equals(o){return o.x===this.x&&o.y===this.y&&o.z===this.z}fromArray(o,a=0){return this.x=o[a],this.y=o[a+1],this.z=o[a+2],this}toArray(o=[],a=0){return o[a]=this.x,o[a+1]=this.y,o[a+2]=this.z,o}fromBufferAttribute(o,a,c){return void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=o.getX(a),this.y=o.getY(a),this.z=o.getZ(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const o=2*(Math.random()-.5),a=Math.random()*Math.PI*2,c=Math.sqrt(1-o**2);return this.x=c*Math.cos(a),this.y=c*Math.sin(a),this.z=o,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const nH=new te,jge=new Mc;class b1{constructor(o=new te(1/0,1/0,1/0),a=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=o,this.max=a}set(o,a){return this.min.copy(o),this.max.copy(a),this}setFromArray(o){let a=1/0,c=1/0,u=1/0,h=-1/0,d=-1/0,f=-1/0;for(let p=0,g=o.length;p<g;p+=3){const m=o[p],v=o[p+1],y=o[p+2];m<a&&(a=m),v<c&&(c=v),y<u&&(u=y),m>h&&(h=m),v>d&&(d=v),y>f&&(f=y)}return this.min.set(a,c,u),this.max.set(h,d,f),this}setFromBufferAttribute(o){let a=1/0,c=1/0,u=1/0,h=-1/0,d=-1/0,f=-1/0;for(let p=0,g=o.count;p<g;p++){const m=o.getX(p),v=o.getY(p),y=o.getZ(p);m<a&&(a=m),v<c&&(c=v),y<u&&(u=y),m>h&&(h=m),v>d&&(d=v),y>f&&(f=y)}return this.min.set(a,c,u),this.max.set(h,d,f),this}setFromPoints(o){this.makeEmpty();for(let a=0,c=o.length;a<c;a++)this.expandByPoint(o[a]);return this}setFromCenterAndSize(o,a){const c=F0.copy(a).multiplyScalar(.5);return this.min.copy(o).sub(c),this.max.copy(o).add(c),this}setFromObject(o,a=!1){return this.makeEmpty(),this.expandByObject(o,a)}clone(){return(new this.constructor).copy(this)}copy(o){return this.min.copy(o.min),this.max.copy(o.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(o){return this.isEmpty()?o.set(0,0,0):o.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(o){return this.isEmpty()?o.set(0,0,0):o.subVectors(this.max,this.min)}expandByPoint(o){return this.min.min(o),this.max.max(o),this}expandByVector(o){return this.min.sub(o),this.max.add(o),this}expandByScalar(o){return this.min.addScalar(-o),this.max.addScalar(o),this}expandByObject(o,a=!1){o.updateWorldMatrix(!1,!1);const c=o.geometry;if(void 0!==c)if(a&&null!=c.attributes&&void 0!==c.attributes.position){const h=c.attributes.position;for(let d=0,f=h.count;d<f;d++)F0.fromBufferAttribute(h,d).applyMatrix4(o.matrixWorld),this.expandByPoint(F0)}else null===c.boundingBox&&c.computeBoundingBox(),iH.copy(c.boundingBox),iH.applyMatrix4(o.matrixWorld),this.union(iH);const u=o.children;for(let h=0,d=u.length;h<d;h++)this.expandByObject(u[h],a);return this}containsPoint(o){return!(o.x<this.min.x||o.x>this.max.x||o.y<this.min.y||o.y>this.max.y||o.z<this.min.z||o.z>this.max.z)}containsBox(o){return this.min.x<=o.min.x&&o.max.x<=this.max.x&&this.min.y<=o.min.y&&o.max.y<=this.max.y&&this.min.z<=o.min.z&&o.max.z<=this.max.z}getParameter(o,a){return a.set((o.x-this.min.x)/(this.max.x-this.min.x),(o.y-this.min.y)/(this.max.y-this.min.y),(o.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(o){return!(o.max.x<this.min.x||o.min.x>this.max.x||o.max.y<this.min.y||o.min.y>this.max.y||o.max.z<this.min.z||o.min.z>this.max.z)}intersectsSphere(o){return this.clampPoint(o.center,F0),F0.distanceToSquared(o.center)<=o.radius*o.radius}intersectsPlane(o){let a,c;return o.normal.x>0?(a=o.normal.x*this.min.x,c=o.normal.x*this.max.x):(a=o.normal.x*this.max.x,c=o.normal.x*this.min.x),o.normal.y>0?(a+=o.normal.y*this.min.y,c+=o.normal.y*this.max.y):(a+=o.normal.y*this.max.y,c+=o.normal.y*this.min.y),o.normal.z>0?(a+=o.normal.z*this.min.z,c+=o.normal.z*this.max.z):(a+=o.normal.z*this.max.z,c+=o.normal.z*this.min.z),a<=-o.constant&&c>=-o.constant}intersectsTriangle(o){if(this.isEmpty())return!1;this.getCenter(Bw),KA.subVectors(this.max,Bw),x1.subVectors(o.a,Bw),C1.subVectors(o.b,Bw),S1.subVectors(o.c,Bw),Cg.subVectors(C1,x1),Sg.subVectors(S1,C1),N0.subVectors(x1,S1);let a=[0,-Cg.z,Cg.y,0,-Sg.z,Sg.y,0,-N0.z,N0.y,Cg.z,0,-Cg.x,Sg.z,0,-Sg.x,N0.z,0,-N0.x,-Cg.y,Cg.x,0,-Sg.y,Sg.x,0,-N0.y,N0.x,0];return!(!rH(a,x1,C1,S1,KA)||(a=[1,0,0,0,1,0,0,0,1],!rH(a,x1,C1,S1,KA)))&&(JA.crossVectors(Cg,Sg),a=[JA.x,JA.y,JA.z],rH(a,x1,C1,S1,KA))}clampPoint(o,a){return a.copy(o).clamp(this.min,this.max)}distanceToPoint(o){return F0.copy(o).clamp(this.min,this.max).sub(o).length()}getBoundingSphere(o){return this.getCenter(o.center),o.radius=.5*this.getSize(F0).length(),o}intersect(o){return this.min.max(o.min),this.max.min(o.max),this.isEmpty()&&this.makeEmpty(),this}union(o){return this.min.min(o.min),this.max.max(o.max),this}applyMatrix4(o){return this.isEmpty()||(Nf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(o),Nf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(o),Nf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(o),Nf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(o),Nf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(o),Nf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(o),Nf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(o),Nf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(o),this.setFromPoints(Nf)),this}translate(o){return this.min.add(o),this.max.add(o),this}equals(o){return o.min.equals(this.min)&&o.max.equals(this.max)}}const Nf=[new te,new te,new te,new te,new te,new te,new te,new te],F0=new te,iH=new b1,x1=new te,C1=new te,S1=new te,Cg=new te,Sg=new te,N0=new te,Bw=new te,KA=new te,JA=new te,L0=new te;function rH(l,o,a,c,u){for(let h=0,d=l.length-3;h<=d;h+=3){L0.fromArray(l,h);const f=u.x*Math.abs(L0.x)+u.y*Math.abs(L0.y)+u.z*Math.abs(L0.z),p=o.dot(L0),g=a.dot(L0),m=c.dot(L0);if(Math.max(-Math.max(p,g,m),Math.min(p,g,m))>f)return!1}return!0}const Ult=new b1,qge=new te,eI=new te,sH=new te;class w1{constructor(o=new te,a=-1){this.center=o,this.radius=a}set(o,a){return this.center.copy(o),this.radius=a,this}setFromPoints(o,a){const c=this.center;void 0!==a?c.copy(a):Ult.setFromPoints(o).getCenter(c);let u=0;for(let h=0,d=o.length;h<d;h++)u=Math.max(u,c.distanceToSquared(o[h]));return this.radius=Math.sqrt(u),this}copy(o){return this.center.copy(o.center),this.radius=o.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(o){return o.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(o){return o.distanceTo(this.center)-this.radius}intersectsSphere(o){const a=this.radius+o.radius;return o.center.distanceToSquared(this.center)<=a*a}intersectsBox(o){return o.intersectsSphere(this)}intersectsPlane(o){return Math.abs(o.distanceToPoint(this.center))<=this.radius}clampPoint(o,a){const c=this.center.distanceToSquared(o);return a.copy(o),c>this.radius*this.radius&&(a.sub(this.center).normalize(),a.multiplyScalar(this.radius).add(this.center)),a}getBoundingBox(o){return this.isEmpty()?(o.makeEmpty(),o):(o.set(this.center,this.center),o.expandByScalar(this.radius),o)}applyMatrix4(o){return this.center.applyMatrix4(o),this.radius=this.radius*o.getMaxScaleOnAxis(),this}translate(o){return this.center.add(o),this}expandByPoint(o){sH.subVectors(o,this.center);const a=sH.lengthSq();if(a>this.radius*this.radius){const c=Math.sqrt(a),u=.5*(c-this.radius);this.center.add(sH.multiplyScalar(u/c)),this.radius+=u}return this}union(o){return!0===this.center.equals(o.center)?eI.set(0,0,1).multiplyScalar(o.radius):eI.subVectors(o.center,this.center).normalize().multiplyScalar(o.radius),this.expandByPoint(qge.copy(o.center).add(eI)),this.expandByPoint(qge.copy(o.center).sub(eI)),this}equals(o){return o.center.equals(this.center)&&o.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Lf=new te,oH=new te,tI=new te,wg=new te,aH=new te,nI=new te,lH=new te;class iI{constructor(o=new te,a=new te(0,0,-1)){this.origin=o,this.direction=a}set(o,a){return this.origin.copy(o),this.direction.copy(a),this}copy(o){return this.origin.copy(o.origin),this.direction.copy(o.direction),this}at(o,a){return a.copy(this.direction).multiplyScalar(o).add(this.origin)}lookAt(o){return this.direction.copy(o).sub(this.origin).normalize(),this}recast(o){return this.origin.copy(this.at(o,Lf)),this}closestPointToPoint(o,a){a.subVectors(o,this.origin);const c=a.dot(this.direction);return c<0?a.copy(this.origin):a.copy(this.direction).multiplyScalar(c).add(this.origin)}distanceToPoint(o){return Math.sqrt(this.distanceSqToPoint(o))}distanceSqToPoint(o){const a=Lf.subVectors(o,this.origin).dot(this.direction);return a<0?this.origin.distanceToSquared(o):(Lf.copy(this.direction).multiplyScalar(a).add(this.origin),Lf.distanceToSquared(o))}distanceSqToSegment(o,a,c,u){oH.copy(o).add(a).multiplyScalar(.5),tI.copy(a).sub(o).normalize(),wg.copy(this.origin).sub(oH);const h=.5*o.distanceTo(a),d=-this.direction.dot(tI),f=wg.dot(this.direction),p=-wg.dot(tI),g=wg.lengthSq(),m=Math.abs(1-d*d);let v,y,_,b;if(m>0)if(v=d*p-f,y=d*f-p,b=h*m,v>=0)if(y>=-b)if(y<=b){const C=1/m;v*=C,y*=C,_=v*(v+d*y+2*f)+y*(d*v+y+2*p)+g}else y=h,v=Math.max(0,-(d*y+f)),_=-v*v+y*(y+2*p)+g;else y=-h,v=Math.max(0,-(d*y+f)),_=-v*v+y*(y+2*p)+g;else y<=-b?(v=Math.max(0,-(-d*h+f)),y=v>0?-h:Math.min(Math.max(-h,-p),h),_=-v*v+y*(y+2*p)+g):y<=b?(v=0,y=Math.min(Math.max(-h,-p),h),_=y*(y+2*p)+g):(v=Math.max(0,-(d*h+f)),y=v>0?h:Math.min(Math.max(-h,-p),h),_=-v*v+y*(y+2*p)+g);else y=d>0?-h:h,v=Math.max(0,-(d*y+f)),_=-v*v+y*(y+2*p)+g;return c&&c.copy(this.direction).multiplyScalar(v).add(this.origin),u&&u.copy(tI).multiplyScalar(y).add(oH),_}intersectSphere(o,a){Lf.subVectors(o.center,this.origin);const c=Lf.dot(this.direction),u=Lf.dot(Lf)-c*c,h=o.radius*o.radius;if(u>h)return null;const d=Math.sqrt(h-u),f=c-d,p=c+d;return f<0&&p<0?null:this.at(f<0?p:f,a)}intersectsSphere(o){return this.distanceSqToPoint(o.center)<=o.radius*o.radius}distanceToPlane(o){const a=o.normal.dot(this.direction);if(0===a)return 0===o.distanceToPoint(this.origin)?0:null;const c=-(this.origin.dot(o.normal)+o.constant)/a;return c>=0?c:null}intersectPlane(o,a){const c=this.distanceToPlane(o);return null===c?null:this.at(c,a)}intersectsPlane(o){const a=o.distanceToPoint(this.origin);return 0===a||o.normal.dot(this.direction)*a<0}intersectBox(o,a){let c,u,h,d,f,p;const g=1/this.direction.x,m=1/this.direction.y,v=1/this.direction.z,y=this.origin;return g>=0?(c=(o.min.x-y.x)*g,u=(o.max.x-y.x)*g):(c=(o.max.x-y.x)*g,u=(o.min.x-y.x)*g),m>=0?(h=(o.min.y-y.y)*m,d=(o.max.y-y.y)*m):(h=(o.max.y-y.y)*m,d=(o.min.y-y.y)*m),c>d||h>u||((h>c||c!=c)&&(c=h),(d<u||u!=u)&&(u=d),v>=0?(f=(o.min.z-y.z)*v,p=(o.max.z-y.z)*v):(f=(o.max.z-y.z)*v,p=(o.min.z-y.z)*v),c>p||f>u)||((f>c||c!=c)&&(c=f),(p<u||u!=u)&&(u=p),u<0)?null:this.at(c>=0?c:u,a)}intersectsBox(o){return null!==this.intersectBox(o,Lf)}intersectTriangle(o,a,c,u,h){aH.subVectors(a,o),nI.subVectors(c,o),lH.crossVectors(aH,nI);let f,d=this.direction.dot(lH);if(d>0){if(u)return null;f=1}else{if(!(d<0))return null;f=-1,d=-d}wg.subVectors(this.origin,o);const p=f*this.direction.dot(nI.crossVectors(wg,nI));if(p<0)return null;const g=f*this.direction.dot(aH.cross(wg));if(g<0||p+g>d)return null;const m=-f*wg.dot(lH);return m<0?null:this.at(m/d,h)}applyMatrix4(o){return this.origin.applyMatrix4(o),this.direction.transformDirection(o),this}equals(o){return o.origin.equals(this.origin)&&o.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ci{constructor(){ci.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(o,a,c,u,h,d,f,p,g,m,v,y,_,b,C,x){const S=this.elements;return S[0]=o,S[4]=a,S[8]=c,S[12]=u,S[1]=h,S[5]=d,S[9]=f,S[13]=p,S[2]=g,S[6]=m,S[10]=v,S[14]=y,S[3]=_,S[7]=b,S[11]=C,S[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ci).fromArray(this.elements)}copy(o){const a=this.elements,c=o.elements;return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],this}copyPosition(o){const a=this.elements,c=o.elements;return a[12]=c[12],a[13]=c[13],a[14]=c[14],this}setFromMatrix3(o){const a=o.elements;return this.set(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0,0,0,0,1),this}extractBasis(o,a,c){return o.setFromMatrixColumn(this,0),a.setFromMatrixColumn(this,1),c.setFromMatrixColumn(this,2),this}makeBasis(o,a,c){return this.set(o.x,a.x,c.x,0,o.y,a.y,c.y,0,o.z,a.z,c.z,0,0,0,0,1),this}extractRotation(o){const a=this.elements,c=o.elements,u=1/T1.setFromMatrixColumn(o,0).length(),h=1/T1.setFromMatrixColumn(o,1).length(),d=1/T1.setFromMatrixColumn(o,2).length();return a[0]=c[0]*u,a[1]=c[1]*u,a[2]=c[2]*u,a[3]=0,a[4]=c[4]*h,a[5]=c[5]*h,a[6]=c[6]*h,a[7]=0,a[8]=c[8]*d,a[9]=c[9]*d,a[10]=c[10]*d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromEuler(o){o&&o.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const a=this.elements,c=o.x,u=o.y,h=o.z,d=Math.cos(c),f=Math.sin(c),p=Math.cos(u),g=Math.sin(u),m=Math.cos(h),v=Math.sin(h);if("XYZ"===o.order){const y=d*m,_=d*v,b=f*m,C=f*v;a[0]=p*m,a[4]=-p*v,a[8]=g,a[1]=_+b*g,a[5]=y-C*g,a[9]=-f*p,a[2]=C-y*g,a[6]=b+_*g,a[10]=d*p}else if("YXZ"===o.order){const y=p*m,_=p*v,b=g*m,C=g*v;a[0]=y+C*f,a[4]=b*f-_,a[8]=d*g,a[1]=d*v,a[5]=d*m,a[9]=-f,a[2]=_*f-b,a[6]=C+y*f,a[10]=d*p}else if("ZXY"===o.order){const y=p*m,_=p*v,b=g*m,C=g*v;a[0]=y-C*f,a[4]=-d*v,a[8]=b+_*f,a[1]=_+b*f,a[5]=d*m,a[9]=C-y*f,a[2]=-d*g,a[6]=f,a[10]=d*p}else if("ZYX"===o.order){const y=d*m,_=d*v,b=f*m,C=f*v;a[0]=p*m,a[4]=b*g-_,a[8]=y*g+C,a[1]=p*v,a[5]=C*g+y,a[9]=_*g-b,a[2]=-g,a[6]=f*p,a[10]=d*p}else if("YZX"===o.order){const y=d*p,_=d*g,b=f*p,C=f*g;a[0]=p*m,a[4]=C-y*v,a[8]=b*v+_,a[1]=v,a[5]=d*m,a[9]=-f*m,a[2]=-g*m,a[6]=_*v+b,a[10]=y-C*v}else if("XZY"===o.order){const y=d*p,_=d*g,b=f*p,C=f*g;a[0]=p*m,a[4]=-v,a[8]=g*m,a[1]=y*v+C,a[5]=d*m,a[9]=_*v-b,a[2]=b*v-_,a[6]=f*m,a[10]=C*v+y}return a[3]=0,a[7]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromQuaternion(o){return this.compose(Hlt,o,$lt)}lookAt(o,a,c){const u=this.elements;return Ec.subVectors(o,a),0===Ec.lengthSq()&&(Ec.z=1),Ec.normalize(),Tg.crossVectors(c,Ec),0===Tg.lengthSq()&&(1===Math.abs(c.z)?Ec.x+=1e-4:Ec.z+=1e-4,Ec.normalize(),Tg.crossVectors(c,Ec)),Tg.normalize(),rI.crossVectors(Ec,Tg),u[0]=Tg.x,u[4]=rI.x,u[8]=Ec.x,u[1]=Tg.y,u[5]=rI.y,u[9]=Ec.y,u[2]=Tg.z,u[6]=rI.z,u[10]=Ec.z,this}multiply(o,a){return void 0!==a?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(o,a)):this.multiplyMatrices(this,o)}premultiply(o){return this.multiplyMatrices(o,this)}multiplyMatrices(o,a){const c=o.elements,u=a.elements,h=this.elements,d=c[0],f=c[4],p=c[8],g=c[12],m=c[1],v=c[5],y=c[9],_=c[13],b=c[2],C=c[6],x=c[10],S=c[14],w=c[3],O=c[7],T=c[11],M=c[15],A=u[0],I=u[4],E=u[8],P=u[12],B=u[1],V=u[5],Q=u[9],j=u[13],N=u[2],U=u[6],z=u[10],$=u[14],H=u[3],G=u[7],W=u[11],X=u[15];return h[0]=d*A+f*B+p*N+g*H,h[4]=d*I+f*V+p*U+g*G,h[8]=d*E+f*Q+p*z+g*W,h[12]=d*P+f*j+p*$+g*X,h[1]=m*A+v*B+y*N+_*H,h[5]=m*I+v*V+y*U+_*G,h[9]=m*E+v*Q+y*z+_*W,h[13]=m*P+v*j+y*$+_*X,h[2]=b*A+C*B+x*N+S*H,h[6]=b*I+C*V+x*U+S*G,h[10]=b*E+C*Q+x*z+S*W,h[14]=b*P+C*j+x*$+S*X,h[3]=w*A+O*B+T*N+M*H,h[7]=w*I+O*V+T*U+M*G,h[11]=w*E+O*Q+T*z+M*W,h[15]=w*P+O*j+T*$+M*X,this}multiplyScalar(o){const a=this.elements;return a[0]*=o,a[4]*=o,a[8]*=o,a[12]*=o,a[1]*=o,a[5]*=o,a[9]*=o,a[13]*=o,a[2]*=o,a[6]*=o,a[10]*=o,a[14]*=o,a[3]*=o,a[7]*=o,a[11]*=o,a[15]*=o,this}determinant(){const o=this.elements,a=o[0],c=o[4],u=o[8],h=o[12],d=o[1],f=o[5],p=o[9],g=o[13],m=o[2],v=o[6],y=o[10],_=o[14];return o[3]*(+h*p*v-u*g*v-h*f*y+c*g*y+u*f*_-c*p*_)+o[7]*(+a*p*_-a*g*y+h*d*y-u*d*_+u*g*m-h*p*m)+o[11]*(+a*g*v-a*f*_-h*d*v+c*d*_+h*f*m-c*g*m)+o[15]*(-u*f*m-a*p*v+a*f*y+u*d*v-c*d*y+c*p*m)}transpose(){const o=this.elements;let a;return a=o[1],o[1]=o[4],o[4]=a,a=o[2],o[2]=o[8],o[8]=a,a=o[6],o[6]=o[9],o[9]=a,a=o[3],o[3]=o[12],o[12]=a,a=o[7],o[7]=o[13],o[13]=a,a=o[11],o[11]=o[14],o[14]=a,this}setPosition(o,a,c){const u=this.elements;return o.isVector3?(u[12]=o.x,u[13]=o.y,u[14]=o.z):(u[12]=o,u[13]=a,u[14]=c),this}invert(){const o=this.elements,a=o[0],c=o[1],u=o[2],h=o[3],d=o[4],f=o[5],p=o[6],g=o[7],m=o[8],v=o[9],y=o[10],_=o[11],b=o[12],C=o[13],x=o[14],S=o[15],w=v*x*g-C*y*g+C*p*_-f*x*_-v*p*S+f*y*S,O=b*y*g-m*x*g-b*p*_+d*x*_+m*p*S-d*y*S,T=m*C*g-b*v*g+b*f*_-d*C*_-m*f*S+d*v*S,M=b*v*p-m*C*p-b*f*y+d*C*y+m*f*x-d*v*x,A=a*w+c*O+u*T+h*M;if(0===A)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/A;return o[0]=w*I,o[1]=(C*y*h-v*x*h-C*u*_+c*x*_+v*u*S-c*y*S)*I,o[2]=(f*x*h-C*p*h+C*u*g-c*x*g-f*u*S+c*p*S)*I,o[3]=(v*p*h-f*y*h-v*u*g+c*y*g+f*u*_-c*p*_)*I,o[4]=O*I,o[5]=(m*x*h-b*y*h+b*u*_-a*x*_-m*u*S+a*y*S)*I,o[6]=(b*p*h-d*x*h-b*u*g+a*x*g+d*u*S-a*p*S)*I,o[7]=(d*y*h-m*p*h+m*u*g-a*y*g-d*u*_+a*p*_)*I,o[8]=T*I,o[9]=(b*v*h-m*C*h-b*c*_+a*C*_+m*c*S-a*v*S)*I,o[10]=(d*C*h-b*f*h+b*c*g-a*C*g-d*c*S+a*f*S)*I,o[11]=(m*f*h-d*v*h-m*c*g+a*v*g+d*c*_-a*f*_)*I,o[12]=M*I,o[13]=(m*C*u-b*v*u+b*c*y-a*C*y-m*c*x+a*v*x)*I,o[14]=(b*f*u-d*C*u-b*c*p+a*C*p+d*c*x-a*f*x)*I,o[15]=(d*v*u-m*f*u+m*c*p-a*v*p-d*c*y+a*f*y)*I,this}scale(o){const a=this.elements,c=o.x,u=o.y,h=o.z;return a[0]*=c,a[4]*=u,a[8]*=h,a[1]*=c,a[5]*=u,a[9]*=h,a[2]*=c,a[6]*=u,a[10]*=h,a[3]*=c,a[7]*=u,a[11]*=h,this}getMaxScaleOnAxis(){const o=this.elements;return Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1]+o[2]*o[2],o[4]*o[4]+o[5]*o[5]+o[6]*o[6],o[8]*o[8]+o[9]*o[9]+o[10]*o[10]))}makeTranslation(o,a,c){return this.set(1,0,0,o,0,1,0,a,0,0,1,c,0,0,0,1),this}makeRotationX(o){const a=Math.cos(o),c=Math.sin(o);return this.set(1,0,0,0,0,a,-c,0,0,c,a,0,0,0,0,1),this}makeRotationY(o){const a=Math.cos(o),c=Math.sin(o);return this.set(a,0,c,0,0,1,0,0,-c,0,a,0,0,0,0,1),this}makeRotationZ(o){const a=Math.cos(o),c=Math.sin(o);return this.set(a,-c,0,0,c,a,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(o,a){const c=Math.cos(a),u=Math.sin(a),h=1-c,d=o.x,f=o.y,p=o.z,g=h*d,m=h*f;return this.set(g*d+c,g*f-u*p,g*p+u*f,0,g*f+u*p,m*f+c,m*p-u*d,0,g*p-u*f,m*p+u*d,h*p*p+c,0,0,0,0,1),this}makeScale(o,a,c){return this.set(o,0,0,0,0,a,0,0,0,0,c,0,0,0,0,1),this}makeShear(o,a,c,u,h,d){return this.set(1,c,h,0,o,1,d,0,a,u,1,0,0,0,0,1),this}compose(o,a,c){const u=this.elements,h=a._x,d=a._y,f=a._z,p=a._w,g=h+h,m=d+d,v=f+f,y=h*g,_=h*m,b=h*v,C=d*m,x=d*v,S=f*v,w=p*g,O=p*m,T=p*v,M=c.x,A=c.y,I=c.z;return u[0]=(1-(C+S))*M,u[1]=(_+T)*M,u[2]=(b-O)*M,u[3]=0,u[4]=(_-T)*A,u[5]=(1-(y+S))*A,u[6]=(x+w)*A,u[7]=0,u[8]=(b+O)*I,u[9]=(x-w)*I,u[10]=(1-(y+C))*I,u[11]=0,u[12]=o.x,u[13]=o.y,u[14]=o.z,u[15]=1,this}decompose(o,a,c){const u=this.elements;let h=T1.set(u[0],u[1],u[2]).length();const d=T1.set(u[4],u[5],u[6]).length(),f=T1.set(u[8],u[9],u[10]).length();this.determinant()<0&&(h=-h),o.x=u[12],o.y=u[13],o.z=u[14],fh.copy(this);const g=1/h,m=1/d,v=1/f;return fh.elements[0]*=g,fh.elements[1]*=g,fh.elements[2]*=g,fh.elements[4]*=m,fh.elements[5]*=m,fh.elements[6]*=m,fh.elements[8]*=v,fh.elements[9]*=v,fh.elements[10]*=v,a.setFromRotationMatrix(fh),c.x=h,c.y=d,c.z=f,this}makePerspective(o,a,c,u,h,d){void 0===d&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const f=this.elements,g=2*h/(c-u),m=(a+o)/(a-o),v=(c+u)/(c-u),y=-(d+h)/(d-h),_=-2*d*h/(d-h);return f[0]=2*h/(a-o),f[4]=0,f[8]=m,f[12]=0,f[1]=0,f[5]=g,f[9]=v,f[13]=0,f[2]=0,f[6]=0,f[10]=y,f[14]=_,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(o,a,c,u,h,d){const f=this.elements,p=1/(a-o),g=1/(c-u),m=1/(d-h),v=(a+o)*p,y=(c+u)*g,_=(d+h)*m;return f[0]=2*p,f[4]=0,f[8]=0,f[12]=-v,f[1]=0,f[5]=2*g,f[9]=0,f[13]=-y,f[2]=0,f[6]=0,f[10]=-2*m,f[14]=-_,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(o){const a=this.elements,c=o.elements;for(let u=0;u<16;u++)if(a[u]!==c[u])return!1;return!0}fromArray(o,a=0){for(let c=0;c<16;c++)this.elements[c]=o[c+a];return this}toArray(o=[],a=0){const c=this.elements;return o[a]=c[0],o[a+1]=c[1],o[a+2]=c[2],o[a+3]=c[3],o[a+4]=c[4],o[a+5]=c[5],o[a+6]=c[6],o[a+7]=c[7],o[a+8]=c[8],o[a+9]=c[9],o[a+10]=c[10],o[a+11]=c[11],o[a+12]=c[12],o[a+13]=c[13],o[a+14]=c[14],o[a+15]=c[15],o}}const T1=new te,fh=new ci,Hlt=new te(0,0,0),$lt=new te(1,1,1),Tg=new te,rI=new te,Ec=new te,Zge=new ci,Xge=new Mc;let Wlt=(()=>{class l{constructor(a=0,c=0,u=0,h=l.DefaultOrder){this.isEuler=!0,this._x=a,this._y=c,this._z=u,this._order=h}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get order(){return this._order}set order(a){this._order=a,this._onChangeCallback()}set(a,c,u,h=this._order){return this._x=a,this._y=c,this._z=u,this._order=h,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this._onChangeCallback(),this}setFromRotationMatrix(a,c=this._order,u=!0){const h=a.elements,d=h[0],f=h[4],p=h[8],g=h[1],m=h[5],v=h[9],y=h[2],_=h[6],b=h[10];switch(c){case"XYZ":this._y=Math.asin(Zs(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-v,b),this._z=Math.atan2(-f,d)):(this._x=Math.atan2(_,m),this._z=0);break;case"YXZ":this._x=Math.asin(-Zs(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(p,b),this._z=Math.atan2(g,m)):(this._y=Math.atan2(-y,d),this._z=0);break;case"ZXY":this._x=Math.asin(Zs(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-y,b),this._z=Math.atan2(-f,m)):(this._y=0,this._z=Math.atan2(g,d));break;case"ZYX":this._y=Math.asin(-Zs(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(_,b),this._z=Math.atan2(g,d)):(this._x=0,this._z=Math.atan2(-f,m));break;case"YZX":this._z=Math.asin(Zs(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-v,m),this._y=Math.atan2(-y,d)):(this._x=0,this._y=Math.atan2(p,b));break;case"XZY":this._z=Math.asin(-Zs(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(_,m),this._y=Math.atan2(p,d)):(this._x=Math.atan2(-v,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+c)}return this._order=c,!0===u&&this._onChangeCallback(),this}setFromQuaternion(a,c,u){return Zge.makeRotationFromQuaternion(a),this.setFromRotationMatrix(Zge,c,u)}setFromVector3(a,c=this._order){return this.set(a.x,a.y,a.z,c)}reorder(a){return Xge.setFromEuler(this),this.setFromQuaternion(Xge,a)}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order}fromArray(a){return this._x=a[0],this._y=a[1],this._z=a[2],void 0!==a[3]&&(this._order=a[3]),this._onChangeCallback(),this}toArray(a=[],c=0){return a[c]=this._x,a[c+1]=this._y,a[c+2]=this._z,a[c+3]=this._order,a}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return l.DefaultOrder="XYZ",l.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],l})();class cH{constructor(){this.mask=1}set(o){this.mask=(1<<o|0)>>>0}enable(o){this.mask|=1<<o|0}enableAll(){this.mask=-1}toggle(o){this.mask^=1<<o|0}disable(o){this.mask&=~(1<<o|0)}disableAll(){this.mask=0}test(o){return 0!=(this.mask&o.mask)}isEnabled(o){return 0!=(this.mask&(1<<o|0))}}let Glt=0;const Yge=new te,O1=new Mc,Bf=new ci,sI=new te,Vw=new te,Qlt=new te,jlt=new Mc,Kge=new te(1,0,0),Jge=new te(0,1,0),eme=new te(0,0,1),qlt={type:"added"},tme={type:"removed"};let Ac=(()=>{class l extends m1{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Glt++}),this.uuid=kc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=l.DefaultUp.clone();const a=new te,c=new Wlt,u=new Mc,h=new te(1,1,1);c._onChange(function d(){u.setFromEuler(c,!1)}),u._onChange(function f(){c.setFromQuaternion(u,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:c},quaternion:{configurable:!0,enumerable:!0,value:u},scale:{configurable:!0,enumerable:!0,value:h},modelViewMatrix:{value:new ci},normalMatrix:{value:new Ul}}),this.matrix=new ci,this.matrixWorld=new ci,this.matrixAutoUpdate=l.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new cH,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(a){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(a),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(a){return this.quaternion.premultiply(a),this}setRotationFromAxisAngle(a,c){this.quaternion.setFromAxisAngle(a,c)}setRotationFromEuler(a){this.quaternion.setFromEuler(a,!0)}setRotationFromMatrix(a){this.quaternion.setFromRotationMatrix(a)}setRotationFromQuaternion(a){this.quaternion.copy(a)}rotateOnAxis(a,c){return O1.setFromAxisAngle(a,c),this.quaternion.multiply(O1),this}rotateOnWorldAxis(a,c){return O1.setFromAxisAngle(a,c),this.quaternion.premultiply(O1),this}rotateX(a){return this.rotateOnAxis(Kge,a)}rotateY(a){return this.rotateOnAxis(Jge,a)}rotateZ(a){return this.rotateOnAxis(eme,a)}translateOnAxis(a,c){return Yge.copy(a).applyQuaternion(this.quaternion),this.position.add(Yge.multiplyScalar(c)),this}translateX(a){return this.translateOnAxis(Kge,a)}translateY(a){return this.translateOnAxis(Jge,a)}translateZ(a){return this.translateOnAxis(eme,a)}localToWorld(a){return a.applyMatrix4(this.matrixWorld)}worldToLocal(a){return a.applyMatrix4(Bf.copy(this.matrixWorld).invert())}lookAt(a,c,u){a.isVector3?sI.copy(a):sI.set(a,c,u);const h=this.parent;this.updateWorldMatrix(!0,!1),Vw.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Bf.lookAt(Vw,sI,this.up):Bf.lookAt(sI,Vw,this.up),this.quaternion.setFromRotationMatrix(Bf),h&&(Bf.extractRotation(h.matrixWorld),O1.setFromRotationMatrix(Bf),this.quaternion.premultiply(O1.invert()))}add(a){if(arguments.length>1){for(let c=0;c<arguments.length;c++)this.add(arguments[c]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(qlt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)}remove(a){if(arguments.length>1){for(let u=0;u<arguments.length;u++)this.remove(arguments[u]);return this}const c=this.children.indexOf(a);return-1!==c&&(a.parent=null,this.children.splice(c,1),a.dispatchEvent(tme)),this}removeFromParent(){const a=this.parent;return null!==a&&a.remove(this),this}clear(){for(let a=0;a<this.children.length;a++){const c=this.children[a];c.parent=null,c.dispatchEvent(tme)}return this.children.length=0,this}attach(a){return this.updateWorldMatrix(!0,!1),Bf.copy(this.matrixWorld).invert(),null!==a.parent&&(a.parent.updateWorldMatrix(!0,!1),Bf.multiply(a.parent.matrixWorld)),a.applyMatrix4(Bf),this.add(a),a.updateWorldMatrix(!1,!0),this}getObjectById(a){return this.getObjectByProperty("id",a)}getObjectByName(a){return this.getObjectByProperty("name",a)}getObjectByProperty(a,c){if(this[a]===c)return this;for(let u=0,h=this.children.length;u<h;u++){const f=this.children[u].getObjectByProperty(a,c);if(void 0!==f)return f}}getWorldPosition(a){return this.updateWorldMatrix(!0,!1),a.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vw,a,Qlt),a}getWorldScale(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vw,jlt,a),a}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const c=this.matrixWorld.elements;return a.set(c[8],c[9],c[10]).normalize()}raycast(){}traverse(a){a(this);const c=this.children;for(let u=0,h=c.length;u<h;u++)c[u].traverse(a)}traverseVisible(a){if(!1===this.visible)return;a(this);const c=this.children;for(let u=0,h=c.length;u<h;u++)c[u].traverseVisible(a)}traverseAncestors(a){const c=this.parent;null!==c&&(a(c),c.traverseAncestors(a))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);const c=this.children;for(let u=0,h=c.length;u<h;u++)c[u].updateMatrixWorld(a)}updateWorldMatrix(a,c){const u=this.parent;if(!0===a&&null!==u&&u.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===c){const h=this.children;for(let d=0,f=h.length;d<f;d++)h[d].updateWorldMatrix(!1,!0)}}toJSON(a){const c=void 0===a||"string"==typeof a,u={};c&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},u.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const h={};function d(p,g){return void 0===p[g.uuid]&&(p[g.uuid]=g.toJSON(a)),g.uuid}if(h.uuid=this.uuid,h.type=this.type,""!==this.name&&(h.name=this.name),!0===this.castShadow&&(h.castShadow=!0),!0===this.receiveShadow&&(h.receiveShadow=!0),!1===this.visible&&(h.visible=!1),!1===this.frustumCulled&&(h.frustumCulled=!1),0!==this.renderOrder&&(h.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(h.userData=this.userData),h.layers=this.layers.mask,h.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(h.matrixAutoUpdate=!1),this.isInstancedMesh&&(h.type="InstancedMesh",h.count=this.count,h.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(h.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?h.background=this.background.toJSON():this.background.isTexture&&(h.background=this.background.toJSON(a).uuid)),this.environment&&this.environment.isTexture&&(h.environment=this.environment.toJSON(a).uuid);else if(this.isMesh||this.isLine||this.isPoints){h.geometry=d(a.geometries,this.geometry);const p=this.geometry.parameters;if(void 0!==p&&void 0!==p.shapes){const g=p.shapes;if(Array.isArray(g))for(let m=0,v=g.length;m<v;m++)d(a.shapes,g[m]);else d(a.shapes,g)}}if(this.isSkinnedMesh&&(h.bindMode=this.bindMode,h.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(d(a.skeletons,this.skeleton),h.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const p=[];for(let g=0,m=this.material.length;g<m;g++)p.push(d(a.materials,this.material[g]));h.material=p}else h.material=d(a.materials,this.material);if(this.children.length>0){h.children=[];for(let p=0;p<this.children.length;p++)h.children.push(this.children[p].toJSON(a).object)}if(this.animations.length>0){h.animations=[];for(let p=0;p<this.animations.length;p++)h.animations.push(d(a.animations,this.animations[p]))}if(c){const p=f(a.geometries),g=f(a.materials),m=f(a.textures),v=f(a.images),y=f(a.shapes),_=f(a.skeletons),b=f(a.animations),C=f(a.nodes);p.length>0&&(u.geometries=p),g.length>0&&(u.materials=g),m.length>0&&(u.textures=m),v.length>0&&(u.images=v),y.length>0&&(u.shapes=y),_.length>0&&(u.skeletons=_),b.length>0&&(u.animations=b),C.length>0&&(u.nodes=C)}return u.object=h,u;function f(p){const g=[];for(const m in p){const v=p[m];delete v.metadata,g.push(v)}return g}}clone(a){return(new this.constructor).copy(this,a)}copy(a,c=!0){if(this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.rotation.order=a.rotation.order,this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===c)for(let u=0;u<a.children.length;u++)this.add(a.children[u].clone());return this}}return l.DefaultUp=new te(0,1,0),l.DefaultMatrixAutoUpdate=!0,l})();const ph=new te,Vf=new te,uH=new te,zf=new te,D1=new te,k1=new te,nme=new te,hH=new te,dH=new te,fH=new te;class gh{constructor(o=new te,a=new te,c=new te){this.a=o,this.b=a,this.c=c}static getNormal(o,a,c,u){u.subVectors(c,a),ph.subVectors(o,a),u.cross(ph);const h=u.lengthSq();return h>0?u.multiplyScalar(1/Math.sqrt(h)):u.set(0,0,0)}static getBarycoord(o,a,c,u,h){ph.subVectors(u,a),Vf.subVectors(c,a),uH.subVectors(o,a);const d=ph.dot(ph),f=ph.dot(Vf),p=ph.dot(uH),g=Vf.dot(Vf),m=Vf.dot(uH),v=d*g-f*f;if(0===v)return h.set(-2,-1,-1);const y=1/v,_=(g*p-f*m)*y,b=(d*m-f*p)*y;return h.set(1-_-b,b,_)}static containsPoint(o,a,c,u){return this.getBarycoord(o,a,c,u,zf),zf.x>=0&&zf.y>=0&&zf.x+zf.y<=1}static getUV(o,a,c,u,h,d,f,p){return this.getBarycoord(o,a,c,u,zf),p.set(0,0),p.addScaledVector(h,zf.x),p.addScaledVector(d,zf.y),p.addScaledVector(f,zf.z),p}static isFrontFacing(o,a,c,u){return ph.subVectors(c,a),Vf.subVectors(o,a),ph.cross(Vf).dot(u)<0}set(o,a,c){return this.a.copy(o),this.b.copy(a),this.c.copy(c),this}setFromPointsAndIndices(o,a,c,u){return this.a.copy(o[a]),this.b.copy(o[c]),this.c.copy(o[u]),this}setFromAttributeAndIndices(o,a,c,u){return this.a.fromBufferAttribute(o,a),this.b.fromBufferAttribute(o,c),this.c.fromBufferAttribute(o,u),this}clone(){return(new this.constructor).copy(this)}copy(o){return this.a.copy(o.a),this.b.copy(o.b),this.c.copy(o.c),this}getArea(){return ph.subVectors(this.c,this.b),Vf.subVectors(this.a,this.b),.5*ph.cross(Vf).length()}getMidpoint(o){return o.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(o){return gh.getNormal(this.a,this.b,this.c,o)}getPlane(o){return o.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(o,a){return gh.getBarycoord(o,this.a,this.b,this.c,a)}getUV(o,a,c,u,h){return gh.getUV(o,this.a,this.b,this.c,a,c,u,h)}containsPoint(o){return gh.containsPoint(o,this.a,this.b,this.c)}isFrontFacing(o){return gh.isFrontFacing(this.a,this.b,this.c,o)}intersectsBox(o){return o.intersectsTriangle(this)}closestPointToPoint(o,a){const c=this.a,u=this.b,h=this.c;let d,f;D1.subVectors(u,c),k1.subVectors(h,c),hH.subVectors(o,c);const p=D1.dot(hH),g=k1.dot(hH);if(p<=0&&g<=0)return a.copy(c);dH.subVectors(o,u);const m=D1.dot(dH),v=k1.dot(dH);if(m>=0&&v<=m)return a.copy(u);const y=p*v-m*g;if(y<=0&&p>=0&&m<=0)return d=p/(p-m),a.copy(c).addScaledVector(D1,d);fH.subVectors(o,h);const _=D1.dot(fH),b=k1.dot(fH);if(b>=0&&_<=b)return a.copy(h);const C=_*g-p*b;if(C<=0&&g>=0&&b<=0)return f=g/(g-b),a.copy(c).addScaledVector(k1,f);const x=m*b-_*v;if(x<=0&&v-m>=0&&_-b>=0)return nme.subVectors(h,u),f=(v-m)/(v-m+(_-b)),a.copy(u).addScaledVector(nme,f);const S=1/(x+C+y);return d=C*S,f=y*S,a.copy(c).addScaledVector(D1,d).addScaledVector(k1,f)}equals(o){return o.a.equals(this.a)&&o.b.equals(this.b)&&o.c.equals(this.c)}}let Zlt=0;class B0 extends m1{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Zlt++}),this.uuid=kc(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(o){this._alphaTest>0!=o>0&&this.version++,this._alphaTest=o}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(o){if(void 0!==o)for(const a in o){const c=o[a];if(void 0===c){console.warn("THREE.Material: '"+a+"' parameter is undefined.");continue}if("shading"===a){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===c;continue}const u=this[a];void 0!==u?u&&u.isColor?u.set(c):u&&u.isVector3&&c&&c.isVector3?u.copy(c):this[a]=c:console.warn("THREE."+this.type+": '"+a+"' is not a property of this material.")}}toJSON(o){const a=void 0===o||"string"==typeof o;a&&(o={textures:{},images:{}});const c={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function u(h){const d=[];for(const f in h){const p=h[f];delete p.metadata,d.push(p)}return d}if(c.uuid=this.uuid,c.type=this.type,""!==this.name&&(c.name=this.name),this.color&&this.color.isColor&&(c.color=this.color.getHex()),void 0!==this.roughness&&(c.roughness=this.roughness),void 0!==this.metalness&&(c.metalness=this.metalness),void 0!==this.sheen&&(c.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(c.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(c.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(c.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(c.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(c.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(c.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(c.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(c.shininess=this.shininess),void 0!==this.clearcoat&&(c.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(c.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(c.clearcoatMap=this.clearcoatMap.toJSON(o).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(c.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(o).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(c.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(o).uuid,c.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(c.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(c.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(c.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(c.iridescenceMap=this.iridescenceMap.toJSON(o).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(c.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(o).uuid),this.map&&this.map.isTexture&&(c.map=this.map.toJSON(o).uuid),this.matcap&&this.matcap.isTexture&&(c.matcap=this.matcap.toJSON(o).uuid),this.alphaMap&&this.alphaMap.isTexture&&(c.alphaMap=this.alphaMap.toJSON(o).uuid),this.lightMap&&this.lightMap.isTexture&&(c.lightMap=this.lightMap.toJSON(o).uuid,c.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(c.aoMap=this.aoMap.toJSON(o).uuid,c.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(c.bumpMap=this.bumpMap.toJSON(o).uuid,c.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(c.normalMap=this.normalMap.toJSON(o).uuid,c.normalMapType=this.normalMapType,c.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(c.displacementMap=this.displacementMap.toJSON(o).uuid,c.displacementScale=this.displacementScale,c.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(c.roughnessMap=this.roughnessMap.toJSON(o).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(c.metalnessMap=this.metalnessMap.toJSON(o).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(c.emissiveMap=this.emissiveMap.toJSON(o).uuid),this.specularMap&&this.specularMap.isTexture&&(c.specularMap=this.specularMap.toJSON(o).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(c.specularIntensityMap=this.specularIntensityMap.toJSON(o).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(c.specularColorMap=this.specularColorMap.toJSON(o).uuid),this.envMap&&this.envMap.isTexture&&(c.envMap=this.envMap.toJSON(o).uuid,void 0!==this.combine&&(c.combine=this.combine)),void 0!==this.envMapIntensity&&(c.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(c.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(c.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(c.gradientMap=this.gradientMap.toJSON(o).uuid),void 0!==this.transmission&&(c.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(c.transmissionMap=this.transmissionMap.toJSON(o).uuid),void 0!==this.thickness&&(c.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(c.thicknessMap=this.thicknessMap.toJSON(o).uuid),void 0!==this.attenuationDistance&&(c.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(c.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(c.size=this.size),null!==this.shadowSide&&(c.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(c.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(c.blending=this.blending),0!==this.side&&(c.side=this.side),this.vertexColors&&(c.vertexColors=!0),this.opacity<1&&(c.opacity=this.opacity),!0===this.transparent&&(c.transparent=this.transparent),c.depthFunc=this.depthFunc,c.depthTest=this.depthTest,c.depthWrite=this.depthWrite,c.colorWrite=this.colorWrite,c.stencilWrite=this.stencilWrite,c.stencilWriteMask=this.stencilWriteMask,c.stencilFunc=this.stencilFunc,c.stencilRef=this.stencilRef,c.stencilFuncMask=this.stencilFuncMask,c.stencilFail=this.stencilFail,c.stencilZFail=this.stencilZFail,c.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(c.rotation=this.rotation),!0===this.polygonOffset&&(c.polygonOffset=!0),0!==this.polygonOffsetFactor&&(c.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(c.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(c.linewidth=this.linewidth),void 0!==this.dashSize&&(c.dashSize=this.dashSize),void 0!==this.gapSize&&(c.gapSize=this.gapSize),void 0!==this.scale&&(c.scale=this.scale),!0===this.dithering&&(c.dithering=!0),this.alphaTest>0&&(c.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(c.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(c.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(c.wireframe=this.wireframe),this.wireframeLinewidth>1&&(c.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(c.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(c.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(c.flatShading=this.flatShading),!1===this.visible&&(c.visible=!1),!1===this.toneMapped&&(c.toneMapped=!1),!1===this.fog&&(c.fog=!1),"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData),a){const h=u(o.textures),d=u(o.images);h.length>0&&(c.textures=h),d.length>0&&(c.images=d)}return c}clone(){return(new this.constructor).copy(this)}copy(o){this.name=o.name,this.blending=o.blending,this.side=o.side,this.vertexColors=o.vertexColors,this.opacity=o.opacity,this.transparent=o.transparent,this.blendSrc=o.blendSrc,this.blendDst=o.blendDst,this.blendEquation=o.blendEquation,this.blendSrcAlpha=o.blendSrcAlpha,this.blendDstAlpha=o.blendDstAlpha,this.blendEquationAlpha=o.blendEquationAlpha,this.depthFunc=o.depthFunc,this.depthTest=o.depthTest,this.depthWrite=o.depthWrite,this.stencilWriteMask=o.stencilWriteMask,this.stencilFunc=o.stencilFunc,this.stencilRef=o.stencilRef,this.stencilFuncMask=o.stencilFuncMask,this.stencilFail=o.stencilFail,this.stencilZFail=o.stencilZFail,this.stencilZPass=o.stencilZPass,this.stencilWrite=o.stencilWrite;const a=o.clippingPlanes;let c=null;if(null!==a){const u=a.length;c=new Array(u);for(let h=0;h!==u;++h)c[h]=a[h].clone()}return this.clippingPlanes=c,this.clipIntersection=o.clipIntersection,this.clipShadows=o.clipShadows,this.shadowSide=o.shadowSide,this.colorWrite=o.colorWrite,this.precision=o.precision,this.polygonOffset=o.polygonOffset,this.polygonOffsetFactor=o.polygonOffsetFactor,this.polygonOffsetUnits=o.polygonOffsetUnits,this.dithering=o.dithering,this.alphaTest=o.alphaTest,this.alphaToCoverage=o.alphaToCoverage,this.premultipliedAlpha=o.premultipliedAlpha,this.visible=o.visible,this.toneMapped=o.toneMapped,this.userData=JSON.parse(JSON.stringify(o.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(o){!0===o&&this.version++}}class Xs extends B0{constructor(o){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new sn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.fog=o.fog,this}}const uo=new te,oI=new dt;class Ts{constructor(o,a,c){if(Array.isArray(o))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=o,this.itemSize=a,this.count=void 0!==o?o.length/a:0,this.normalized=!0===c,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(o){!0===o&&this.version++}setUsage(o){return this.usage=o,this}copy(o){return this.name=o.name,this.array=new o.array.constructor(o.array),this.itemSize=o.itemSize,this.count=o.count,this.normalized=o.normalized,this.usage=o.usage,this}copyAt(o,a,c){o*=this.itemSize,c*=a.itemSize;for(let u=0,h=this.itemSize;u<h;u++)this.array[o+u]=a.array[c+u];return this}copyArray(o){return this.array.set(o),this}copyColorsArray(o){const a=this.array;let c=0;for(let u=0,h=o.length;u<h;u++){let d=o[u];void 0===d&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",u),d=new sn),a[c++]=d.r,a[c++]=d.g,a[c++]=d.b}return this}copyVector2sArray(o){const a=this.array;let c=0;for(let u=0,h=o.length;u<h;u++){let d=o[u];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",u),d=new dt),a[c++]=d.x,a[c++]=d.y}return this}copyVector3sArray(o){const a=this.array;let c=0;for(let u=0,h=o.length;u<h;u++){let d=o[u];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",u),d=new te),a[c++]=d.x,a[c++]=d.y,a[c++]=d.z}return this}copyVector4sArray(o){const a=this.array;let c=0;for(let u=0,h=o.length;u<h;u++){let d=o[u];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",u),d=new er),a[c++]=d.x,a[c++]=d.y,a[c++]=d.z,a[c++]=d.w}return this}applyMatrix3(o){if(2===this.itemSize)for(let a=0,c=this.count;a<c;a++)oI.fromBufferAttribute(this,a),oI.applyMatrix3(o),this.setXY(a,oI.x,oI.y);else if(3===this.itemSize)for(let a=0,c=this.count;a<c;a++)uo.fromBufferAttribute(this,a),uo.applyMatrix3(o),this.setXYZ(a,uo.x,uo.y,uo.z);return this}applyMatrix4(o){for(let a=0,c=this.count;a<c;a++)uo.fromBufferAttribute(this,a),uo.applyMatrix4(o),this.setXYZ(a,uo.x,uo.y,uo.z);return this}applyNormalMatrix(o){for(let a=0,c=this.count;a<c;a++)uo.fromBufferAttribute(this,a),uo.applyNormalMatrix(o),this.setXYZ(a,uo.x,uo.y,uo.z);return this}transformDirection(o){for(let a=0,c=this.count;a<c;a++)uo.fromBufferAttribute(this,a),uo.transformDirection(o),this.setXYZ(a,uo.x,uo.y,uo.z);return this}set(o,a=0){return this.array.set(o,a),this}getX(o){return this.array[o*this.itemSize]}setX(o,a){return this.array[o*this.itemSize]=a,this}getY(o){return this.array[o*this.itemSize+1]}setY(o,a){return this.array[o*this.itemSize+1]=a,this}getZ(o){return this.array[o*this.itemSize+2]}setZ(o,a){return this.array[o*this.itemSize+2]=a,this}getW(o){return this.array[o*this.itemSize+3]}setW(o,a){return this.array[o*this.itemSize+3]=a,this}setXY(o,a,c){return this.array[0+(o*=this.itemSize)]=a,this.array[o+1]=c,this}setXYZ(o,a,c,u){return this.array[0+(o*=this.itemSize)]=a,this.array[o+1]=c,this.array[o+2]=u,this}setXYZW(o,a,c,u,h){return this.array[0+(o*=this.itemSize)]=a,this.array[o+1]=c,this.array[o+2]=u,this.array[o+3]=h,this}onUpload(o){return this.onUploadCallback=o,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const o={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(o.name=this.name),35044!==this.usage&&(o.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(o.updateRange=this.updateRange),o}}class ime extends Ts{constructor(o,a,c){super(new Uint16Array(o),a,c)}}class rme extends Ts{constructor(o,a,c){super(new Uint32Array(o),a,c)}}class Dn extends Ts{constructor(o,a,c){super(new Float32Array(o),a,c)}}let Xlt=0;const gu=new ci,pH=new Ac,M1=new te,Ic=new b1,zw=new b1,Qo=new te;class Ai extends m1{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Xlt++}),this.uuid=kc(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(o){return this.index=Array.isArray(o)?new($ge(o)?rme:ime)(o,1):o,this}getAttribute(o){return this.attributes[o]}setAttribute(o,a){return this.attributes[o]=a,this}deleteAttribute(o){return delete this.attributes[o],this}hasAttribute(o){return void 0!==this.attributes[o]}addGroup(o,a,c=0){this.groups.push({start:o,count:a,materialIndex:c})}clearGroups(){this.groups=[]}setDrawRange(o,a){this.drawRange.start=o,this.drawRange.count=a}applyMatrix4(o){const a=this.attributes.position;void 0!==a&&(a.applyMatrix4(o),a.needsUpdate=!0);const c=this.attributes.normal;if(void 0!==c){const h=(new Ul).getNormalMatrix(o);c.applyNormalMatrix(h),c.needsUpdate=!0}const u=this.attributes.tangent;return void 0!==u&&(u.transformDirection(o),u.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(o){return gu.makeRotationFromQuaternion(o),this.applyMatrix4(gu),this}rotateX(o){return gu.makeRotationX(o),this.applyMatrix4(gu),this}rotateY(o){return gu.makeRotationY(o),this.applyMatrix4(gu),this}rotateZ(o){return gu.makeRotationZ(o),this.applyMatrix4(gu),this}translate(o,a,c){return gu.makeTranslation(o,a,c),this.applyMatrix4(gu),this}scale(o,a,c){return gu.makeScale(o,a,c),this.applyMatrix4(gu),this}lookAt(o){return pH.lookAt(o),pH.updateMatrix(),this.applyMatrix4(pH.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(M1).negate(),this.translate(M1.x,M1.y,M1.z),this}setFromPoints(o){const a=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];a.push(h.x,h.y,h.z||0)}return this.setAttribute("position",new Dn(a,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new b1);const o=this.attributes.position,a=this.morphAttributes.position;if(o&&o.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));if(void 0!==o){if(this.boundingBox.setFromBufferAttribute(o),a)for(let c=0,u=a.length;c<u;c++)Ic.setFromBufferAttribute(a[c]),this.morphTargetsRelative?(Qo.addVectors(this.boundingBox.min,Ic.min),this.boundingBox.expandByPoint(Qo),Qo.addVectors(this.boundingBox.max,Ic.max),this.boundingBox.expandByPoint(Qo)):(this.boundingBox.expandByPoint(Ic.min),this.boundingBox.expandByPoint(Ic.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new w1);const o=this.attributes.position,a=this.morphAttributes.position;if(o&&o.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new te,1/0);if(o){const c=this.boundingSphere.center;if(Ic.setFromBufferAttribute(o),a)for(let h=0,d=a.length;h<d;h++)zw.setFromBufferAttribute(a[h]),this.morphTargetsRelative?(Qo.addVectors(Ic.min,zw.min),Ic.expandByPoint(Qo),Qo.addVectors(Ic.max,zw.max),Ic.expandByPoint(Qo)):(Ic.expandByPoint(zw.min),Ic.expandByPoint(zw.max));Ic.getCenter(c);let u=0;for(let h=0,d=o.count;h<d;h++)Qo.fromBufferAttribute(o,h),u=Math.max(u,c.distanceToSquared(Qo));if(a)for(let h=0,d=a.length;h<d;h++){const f=a[h],p=this.morphTargetsRelative;for(let g=0,m=f.count;g<m;g++)Qo.fromBufferAttribute(f,g),p&&(M1.fromBufferAttribute(o,g),Qo.add(M1)),u=Math.max(u,c.distanceToSquared(Qo))}this.boundingSphere.radius=Math.sqrt(u),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const o=this.index,a=this.attributes;if(null===o||void 0===a.position||void 0===a.normal||void 0===a.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const c=o.array,u=a.position.array,h=a.normal.array,d=a.uv.array,f=u.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ts(new Float32Array(4*f),4));const p=this.getAttribute("tangent").array,g=[],m=[];for(let B=0;B<f;B++)g[B]=new te,m[B]=new te;const v=new te,y=new te,_=new te,b=new dt,C=new dt,x=new dt,S=new te,w=new te;function O(B,V,Q){v.fromArray(u,3*B),y.fromArray(u,3*V),_.fromArray(u,3*Q),b.fromArray(d,2*B),C.fromArray(d,2*V),x.fromArray(d,2*Q),y.sub(v),_.sub(v),C.sub(b),x.sub(b);const j=1/(C.x*x.y-x.x*C.y);!isFinite(j)||(S.copy(y).multiplyScalar(x.y).addScaledVector(_,-C.y).multiplyScalar(j),w.copy(_).multiplyScalar(C.x).addScaledVector(y,-x.x).multiplyScalar(j),g[B].add(S),g[V].add(S),g[Q].add(S),m[B].add(w),m[V].add(w),m[Q].add(w))}let T=this.groups;0===T.length&&(T=[{start:0,count:c.length}]);for(let B=0,V=T.length;B<V;++B){const Q=T[B],j=Q.start;for(let U=j,z=j+Q.count;U<z;U+=3)O(c[U+0],c[U+1],c[U+2])}const M=new te,A=new te,I=new te,E=new te;function P(B){I.fromArray(h,3*B),E.copy(I);const V=g[B];M.copy(V),M.sub(I.multiplyScalar(I.dot(V))).normalize(),A.crossVectors(E,V);const j=A.dot(m[B])<0?-1:1;p[4*B]=M.x,p[4*B+1]=M.y,p[4*B+2]=M.z,p[4*B+3]=j}for(let B=0,V=T.length;B<V;++B){const Q=T[B],j=Q.start;for(let U=j,z=j+Q.count;U<z;U+=3)P(c[U+0]),P(c[U+1]),P(c[U+2])}}computeVertexNormals(){const o=this.index,a=this.getAttribute("position");if(void 0!==a){let c=this.getAttribute("normal");if(void 0===c)c=new Ts(new Float32Array(3*a.count),3),this.setAttribute("normal",c);else for(let y=0,_=c.count;y<_;y++)c.setXYZ(y,0,0,0);const u=new te,h=new te,d=new te,f=new te,p=new te,g=new te,m=new te,v=new te;if(o)for(let y=0,_=o.count;y<_;y+=3){const b=o.getX(y+0),C=o.getX(y+1),x=o.getX(y+2);u.fromBufferAttribute(a,b),h.fromBufferAttribute(a,C),d.fromBufferAttribute(a,x),m.subVectors(d,h),v.subVectors(u,h),m.cross(v),f.fromBufferAttribute(c,b),p.fromBufferAttribute(c,C),g.fromBufferAttribute(c,x),f.add(m),p.add(m),g.add(m),c.setXYZ(b,f.x,f.y,f.z),c.setXYZ(C,p.x,p.y,p.z),c.setXYZ(x,g.x,g.y,g.z)}else for(let y=0,_=a.count;y<_;y+=3)u.fromBufferAttribute(a,y+0),h.fromBufferAttribute(a,y+1),d.fromBufferAttribute(a,y+2),m.subVectors(d,h),v.subVectors(u,h),m.cross(v),c.setXYZ(y+0,m.x,m.y,m.z),c.setXYZ(y+1,m.x,m.y,m.z),c.setXYZ(y+2,m.x,m.y,m.z);this.normalizeNormals(),c.needsUpdate=!0}}merge(o,a){if(!o||!o.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",o);void 0===a&&(a=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const c=this.attributes;for(const u in c){if(void 0===o.attributes[u])continue;const d=c[u].array,f=o.attributes[u],p=f.array,g=f.itemSize*a,m=Math.min(p.length,d.length-g);for(let v=0,y=g;v<m;v++,y++)d[y]=p[v]}return this}normalizeNormals(){const o=this.attributes.normal;for(let a=0,c=o.count;a<c;a++)Qo.fromBufferAttribute(o,a),Qo.normalize(),o.setXYZ(a,Qo.x,Qo.y,Qo.z)}toNonIndexed(){function o(f,p){const g=f.array,m=f.itemSize,v=f.normalized,y=new g.constructor(p.length*m);let _=0,b=0;for(let C=0,x=p.length;C<x;C++){_=f.isInterleavedBufferAttribute?p[C]*f.data.stride+f.offset:p[C]*m;for(let S=0;S<m;S++)y[b++]=g[_++]}return new Ts(y,m,v)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const a=new Ai,c=this.index.array,u=this.attributes;for(const f in u){const g=o(u[f],c);a.setAttribute(f,g)}const h=this.morphAttributes;for(const f in h){const p=[],g=h[f];for(let m=0,v=g.length;m<v;m++){const _=o(g[m],c);p.push(_)}a.morphAttributes[f]=p}a.morphTargetsRelative=this.morphTargetsRelative;const d=this.groups;for(let f=0,p=d.length;f<p;f++){const g=d[f];a.addGroup(g.start,g.count,g.materialIndex)}return a}toJSON(){const o={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),Object.keys(this.userData).length>0&&(o.userData=this.userData),void 0!==this.parameters){const p=this.parameters;for(const g in p)void 0!==p[g]&&(o[g]=p[g]);return o}o.data={attributes:{}};const a=this.index;null!==a&&(o.data.index={type:a.array.constructor.name,array:Array.prototype.slice.call(a.array)});const c=this.attributes;for(const p in c)o.data.attributes[p]=c[p].toJSON(o.data);const u={};let h=!1;for(const p in this.morphAttributes){const g=this.morphAttributes[p],m=[];for(let v=0,y=g.length;v<y;v++)m.push(g[v].toJSON(o.data));m.length>0&&(u[p]=m,h=!0)}h&&(o.data.morphAttributes=u,o.data.morphTargetsRelative=this.morphTargetsRelative);const d=this.groups;d.length>0&&(o.data.groups=JSON.parse(JSON.stringify(d)));const f=this.boundingSphere;return null!==f&&(o.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),o}clone(){return(new this.constructor).copy(this)}copy(o){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const a={};this.name=o.name;const c=o.index;null!==c&&this.setIndex(c.clone(a));const u=o.attributes;for(const g in u)this.setAttribute(g,u[g].clone(a));const h=o.morphAttributes;for(const g in h){const m=[],v=h[g];for(let y=0,_=v.length;y<_;y++)m.push(v[y].clone(a));this.morphAttributes[g]=m}this.morphTargetsRelative=o.morphTargetsRelative;const d=o.groups;for(let g=0,m=d.length;g<m;g++){const v=d[g];this.addGroup(v.start,v.count,v.materialIndex)}const f=o.boundingBox;null!==f&&(this.boundingBox=f.clone());const p=o.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=o.drawRange.start,this.drawRange.count=o.drawRange.count,this.userData=o.userData,void 0!==o.parameters&&(this.parameters=Object.assign({},o.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const sme=new ci,E1=new iI,gH=new w1,Og=new te,Dg=new te,kg=new te,mH=new te,vH=new te,yH=new te,aI=new te,lI=new te,cI=new te,uI=new dt,hI=new dt,dI=new dt,_H=new te,fI=new te;class Ki extends Ac{constructor(o=new Ai,a=new Xs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=o,this.material=a,this.updateMorphTargets()}copy(o,a){return super.copy(o,a),void 0!==o.morphTargetInfluences&&(this.morphTargetInfluences=o.morphTargetInfluences.slice()),void 0!==o.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},o.morphTargetDictionary)),this.material=o.material,this.geometry=o.geometry,this}updateMorphTargets(){const a=this.geometry.morphAttributes,c=Object.keys(a);if(c.length>0){const u=a[c[0]];if(void 0!==u){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,d=u.length;h<d;h++){const f=u[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=h}}}}raycast(o,a){const c=this.geometry,u=this.material,h=this.matrixWorld;if(void 0===u||(null===c.boundingSphere&&c.computeBoundingSphere(),gH.copy(c.boundingSphere),gH.applyMatrix4(h),!1===o.ray.intersectsSphere(gH))||(sme.copy(h).invert(),E1.copy(o.ray).applyMatrix4(sme),null!==c.boundingBox&&!1===E1.intersectsBox(c.boundingBox)))return;let d;const f=c.index,p=c.attributes.position,g=c.morphAttributes.position,m=c.morphTargetsRelative,v=c.attributes.uv,y=c.attributes.uv2,_=c.groups,b=c.drawRange;if(null!==f)if(Array.isArray(u))for(let C=0,x=_.length;C<x;C++){const S=_[C],w=u[S.materialIndex];for(let M=Math.max(S.start,b.start),A=Math.min(f.count,Math.min(S.start+S.count,b.start+b.count));M<A;M+=3){const I=f.getX(M),E=f.getX(M+1),P=f.getX(M+2);d=pI(this,w,o,E1,p,g,m,v,y,I,E,P),d&&(d.faceIndex=Math.floor(M/3),d.face.materialIndex=S.materialIndex,a.push(d))}}else for(let S=Math.max(0,b.start),w=Math.min(f.count,b.start+b.count);S<w;S+=3){const O=f.getX(S),T=f.getX(S+1),M=f.getX(S+2);d=pI(this,u,o,E1,p,g,m,v,y,O,T,M),d&&(d.faceIndex=Math.floor(S/3),a.push(d))}else if(void 0!==p)if(Array.isArray(u))for(let C=0,x=_.length;C<x;C++){const S=_[C],w=u[S.materialIndex];for(let M=Math.max(S.start,b.start),A=Math.min(p.count,Math.min(S.start+S.count,b.start+b.count));M<A;M+=3)d=pI(this,w,o,E1,p,g,m,v,y,M,M+1,M+2),d&&(d.faceIndex=Math.floor(M/3),d.face.materialIndex=S.materialIndex,a.push(d))}else for(let S=Math.max(0,b.start),w=Math.min(p.count,b.start+b.count);S<w;S+=3)d=pI(this,u,o,E1,p,g,m,v,y,S,S+1,S+2),d&&(d.faceIndex=Math.floor(S/3),a.push(d))}}function pI(l,o,a,c,u,h,d,f,p,g,m,v){Og.fromBufferAttribute(u,g),Dg.fromBufferAttribute(u,m),kg.fromBufferAttribute(u,v);const y=l.morphTargetInfluences;if(h&&y){aI.set(0,0,0),lI.set(0,0,0),cI.set(0,0,0);for(let b=0,C=h.length;b<C;b++){const x=y[b],S=h[b];0!==x&&(mH.fromBufferAttribute(S,g),vH.fromBufferAttribute(S,m),yH.fromBufferAttribute(S,v),d?(aI.addScaledVector(mH,x),lI.addScaledVector(vH,x),cI.addScaledVector(yH,x)):(aI.addScaledVector(mH.sub(Og),x),lI.addScaledVector(vH.sub(Dg),x),cI.addScaledVector(yH.sub(kg),x)))}Og.add(aI),Dg.add(lI),kg.add(cI)}l.isSkinnedMesh&&(l.boneTransform(g,Og),l.boneTransform(m,Dg),l.boneTransform(v,kg));const _=function Ylt(l,o,a,c,u,h,d,f){let p;if(p=1===o.side?c.intersectTriangle(d,h,u,!0,f):c.intersectTriangle(u,h,d,2!==o.side,f),null===p)return null;fI.copy(f),fI.applyMatrix4(l.matrixWorld);const g=a.ray.origin.distanceTo(fI);return g<a.near||g>a.far?null:{distance:g,point:fI.clone(),object:l}}(l,o,a,c,Og,Dg,kg,_H);if(_){f&&(uI.fromBufferAttribute(f,g),hI.fromBufferAttribute(f,m),dI.fromBufferAttribute(f,v),_.uv=gh.getUV(_H,Og,Dg,kg,uI,hI,dI,new dt)),p&&(uI.fromBufferAttribute(p,g),hI.fromBufferAttribute(p,m),dI.fromBufferAttribute(p,v),_.uv2=gh.getUV(_H,Og,Dg,kg,uI,hI,dI,new dt));const b={a:g,b:m,c:v,normal:new te,materialIndex:0};gh.getNormal(Og,Dg,kg,b.normal),_.face=b}return _}class Uf extends Ai{constructor(o=1,a=1,c=1,u=1,h=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:o,height:a,depth:c,widthSegments:u,heightSegments:h,depthSegments:d};const f=this;u=Math.floor(u),h=Math.floor(h),d=Math.floor(d);const p=[],g=[],m=[],v=[];let y=0,_=0;function b(C,x,S,w,O,T,M,A,I,E,P){const B=T/I,V=M/E,Q=T/2,j=M/2,N=A/2,U=I+1,z=E+1;let $=0,H=0;const G=new te;for(let W=0;W<z;W++){const X=W*V-j;for(let K=0;K<U;K++)G[C]=(K*B-Q)*w,G[x]=X*O,G[S]=N,g.push(G.x,G.y,G.z),G[C]=0,G[x]=0,G[S]=A>0?1:-1,m.push(G.x,G.y,G.z),v.push(K/I),v.push(1-W/E),$+=1}for(let W=0;W<E;W++)for(let X=0;X<I;X++){const ae=y+X+U*(W+1),se=y+(X+1)+U*(W+1),Ce=y+(X+1)+U*W;p.push(y+X+U*W,ae,Ce),p.push(ae,se,Ce),H+=6}f.addGroup(_,H,P),_+=H,y+=$}b("z","y","x",-1,-1,c,a,o,d,h,0),b("z","y","x",1,-1,c,a,-o,d,h,1),b("x","z","y",1,1,o,c,a,u,d,2),b("x","z","y",1,-1,o,c,-a,u,d,3),b("x","y","z",1,-1,o,a,c,u,h,4),b("x","y","z",-1,-1,o,a,-c,u,h,5),this.setIndex(p),this.setAttribute("position",new Dn(g,3)),this.setAttribute("normal",new Dn(m,3)),this.setAttribute("uv",new Dn(v,2))}static fromJSON(o){return new Uf(o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments)}}function A1(l){const o={};for(const a in l){o[a]={};for(const c in l[a]){const u=l[a][c];o[a][c]=u&&(u.isColor||u.isMatrix3||u.isMatrix4||u.isVector2||u.isVector3||u.isVector4||u.isTexture||u.isQuaternion)?u.clone():Array.isArray(u)?u.slice():u}}return o}function Aa(l){const o={};for(let a=0;a<l.length;a++){const c=A1(l[a]);for(const u in c)o[u]=c[u]}return o}const gI={clone:A1,merge:Aa};class Ia extends B0{constructor(o){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==o&&(void 0!==o.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(o))}copy(o){return super.copy(o),this.fragmentShader=o.fragmentShader,this.vertexShader=o.vertexShader,this.uniforms=A1(o.uniforms),this.defines=Object.assign({},o.defines),this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.fog=o.fog,this.lights=o.lights,this.clipping=o.clipping,this.extensions=Object.assign({},o.extensions),this.glslVersion=o.glslVersion,this}toJSON(o){const a=super.toJSON(o);a.glslVersion=this.glslVersion,a.uniforms={};for(const u in this.uniforms){const d=this.uniforms[u].value;a.uniforms[u]=d&&d.isTexture?{type:"t",value:d.toJSON(o).uuid}:d&&d.isColor?{type:"c",value:d.getHex()}:d&&d.isVector2?{type:"v2",value:d.toArray()}:d&&d.isVector3?{type:"v3",value:d.toArray()}:d&&d.isVector4?{type:"v4",value:d.toArray()}:d&&d.isMatrix3?{type:"m3",value:d.toArray()}:d&&d.isMatrix4?{type:"m4",value:d.toArray()}:{value:d}}Object.keys(this.defines).length>0&&(a.defines=this.defines),a.vertexShader=this.vertexShader,a.fragmentShader=this.fragmentShader;const c={};for(const u in this.extensions)!0===this.extensions[u]&&(c[u]=!0);return Object.keys(c).length>0&&(a.extensions=c),a}}class bH extends Ac{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ci,this.projectionMatrix=new ci,this.projectionMatrixInverse=new ci}copy(o,a){return super.copy(o,a),this.matrixWorldInverse.copy(o.matrixWorldInverse),this.projectionMatrix.copy(o.projectionMatrix),this.projectionMatrixInverse.copy(o.projectionMatrixInverse),this}getWorldDirection(o){this.updateWorldMatrix(!0,!1);const a=this.matrixWorld.elements;return o.set(-a[8],-a[9],-a[10]).normalize()}updateMatrixWorld(o){super.updateMatrixWorld(o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(o,a){super.updateWorldMatrix(o,a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class ho extends bH{constructor(o=50,a=1,c=.1,u=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=o,this.zoom=1,this.near=c,this.far=u,this.focus=10,this.aspect=a,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(o,a){return super.copy(o,a),this.fov=o.fov,this.zoom=o.zoom,this.near=o.near,this.far=o.far,this.focus=o.focus,this.aspect=o.aspect,this.view=null===o.view?null:Object.assign({},o.view),this.filmGauge=o.filmGauge,this.filmOffset=o.filmOffset,this}setFocalLength(o){const a=.5*this.getFilmHeight()/o;this.fov=2*Fw*Math.atan(a),this.updateProjectionMatrix()}getFocalLength(){const o=Math.tan(.5*P0*this.fov);return.5*this.getFilmHeight()/o}getEffectiveFOV(){return 2*Fw*Math.atan(Math.tan(.5*P0*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(o,a,c,u,h,d){this.aspect=o/a,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=a,this.view.offsetX=c,this.view.offsetY=u,this.view.width=h,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const o=this.near;let a=o*Math.tan(.5*P0*this.fov)/this.zoom,c=2*a,u=this.aspect*c,h=-.5*u;const d=this.view;if(null!==this.view&&this.view.enabled){const p=d.fullWidth,g=d.fullHeight;h+=d.offsetX*u/p,a-=d.offsetY*c/g,u*=d.width/p,c*=d.height/g}const f=this.filmOffset;0!==f&&(h+=o*f/this.getFilmWidth()),this.projectionMatrix.makePerspective(h,h+u,a,a-c,o,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(o){const a=super.toJSON(o);return a.object.fov=this.fov,a.object.zoom=this.zoom,a.object.near=this.near,a.object.far=this.far,a.object.focus=this.focus,a.object.aspect=this.aspect,null!==this.view&&(a.object.view=Object.assign({},this.view)),a.object.filmGauge=this.filmGauge,a.object.filmOffset=this.filmOffset,a}}class ect extends Ac{constructor(o,a,c){if(super(),this.type="CubeCamera",!0!==c.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=c;const u=new ho(90,1,o,a);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new te(1,0,0)),this.add(u);const h=new ho(90,1,o,a);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new te(-1,0,0)),this.add(h);const d=new ho(90,1,o,a);d.layers=this.layers,d.up.set(0,0,1),d.lookAt(new te(0,1,0)),this.add(d);const f=new ho(90,1,o,a);f.layers=this.layers,f.up.set(0,0,-1),f.lookAt(new te(0,-1,0)),this.add(f);const p=new ho(90,1,o,a);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new te(0,0,1)),this.add(p);const g=new ho(90,1,o,a);g.layers=this.layers,g.up.set(0,-1,0),g.lookAt(new te(0,0,-1)),this.add(g)}update(o,a){null===this.parent&&this.updateMatrixWorld();const c=this.renderTarget,[u,h,d,f,p,g]=this.children,m=o.getRenderTarget(),v=o.toneMapping,y=o.xr.enabled;o.toneMapping=0,o.xr.enabled=!1;const _=c.texture.generateMipmaps;c.texture.generateMipmaps=!1,o.setRenderTarget(c,0),o.render(a,u),o.setRenderTarget(c,1),o.render(a,h),o.setRenderTarget(c,2),o.render(a,d),o.setRenderTarget(c,3),o.render(a,f),o.setRenderTarget(c,4),o.render(a,p),c.texture.generateMipmaps=_,o.setRenderTarget(c,5),o.render(a,g),o.setRenderTarget(m),o.toneMapping=v,o.xr.enabled=y,c.texture.needsPMREMUpdate=!0}}class mI extends wd{constructor(o,a,c,u,h,d,f,p,g,m){super(o=void 0!==o?o:[],a=void 0!==a?a:301,c,u,h,d,f,p,g,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(o){this.image=o}}class tct extends dl{constructor(o,a={}){super(o,o,a),this.isWebGLCubeRenderTarget=!0;const c={width:o,height:o,depth:1};this.texture=new mI([c,c,c,c,c,c],a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,this.texture.minFilter=void 0!==a.minFilter?a.minFilter:co}fromEquirectangularTexture(o,a){this.texture.type=a.type,this.texture.encoding=a.encoding,this.texture.generateMipmaps=a.generateMipmaps,this.texture.minFilter=a.minFilter,this.texture.magFilter=a.magFilter;const c_uniforms={tEquirect:{value:null}},c_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",c_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",u=new Uf(5,5,5),h=new Ia({name:"CubemapFromEquirect",uniforms:A1(c_uniforms),vertexShader:c_vertexShader,fragmentShader:c_fragmentShader,side:1,blending:0});h.uniforms.tEquirect.value=a;const d=new Ki(u,h),f=a.minFilter;return 1008===a.minFilter&&(a.minFilter=co),new ect(1,10,this).update(o,d),a.minFilter=f,d.geometry.dispose(),d.material.dispose(),this}clear(o,a,c,u){const h=o.getRenderTarget();for(let d=0;d<6;d++)o.setRenderTarget(this,d),o.clear(a,c,u);o.setRenderTarget(h)}}const xH=new te,nct=new te,ict=new Ul;class V0{constructor(o=new te(1,0,0),a=0){this.isPlane=!0,this.normal=o,this.constant=a}set(o,a){return this.normal.copy(o),this.constant=a,this}setComponents(o,a,c,u){return this.normal.set(o,a,c),this.constant=u,this}setFromNormalAndCoplanarPoint(o,a){return this.normal.copy(o),this.constant=-a.dot(this.normal),this}setFromCoplanarPoints(o,a,c){const u=xH.subVectors(c,a).cross(nct.subVectors(o,a)).normalize();return this.setFromNormalAndCoplanarPoint(u,o),this}copy(o){return this.normal.copy(o.normal),this.constant=o.constant,this}normalize(){const o=1/this.normal.length();return this.normal.multiplyScalar(o),this.constant*=o,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(o){return this.normal.dot(o)+this.constant}distanceToSphere(o){return this.distanceToPoint(o.center)-o.radius}projectPoint(o,a){return a.copy(this.normal).multiplyScalar(-this.distanceToPoint(o)).add(o)}intersectLine(o,a){const c=o.delta(xH),u=this.normal.dot(c);if(0===u)return 0===this.distanceToPoint(o.start)?a.copy(o.start):null;const h=-(o.start.dot(this.normal)+this.constant)/u;return h<0||h>1?null:a.copy(c).multiplyScalar(h).add(o.start)}intersectsLine(o){const a=this.distanceToPoint(o.start),c=this.distanceToPoint(o.end);return a<0&&c>0||c<0&&a>0}intersectsBox(o){return o.intersectsPlane(this)}intersectsSphere(o){return o.intersectsPlane(this)}coplanarPoint(o){return o.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(o,a){const c=a||ict.getNormalMatrix(o),u=this.coplanarPoint(xH).applyMatrix4(o),h=this.normal.applyMatrix3(c).normalize();return this.constant=-u.dot(h),this}translate(o){return this.constant-=o.dot(this.normal),this}equals(o){return o.normal.equals(this.normal)&&o.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const R1=new w1,vI=new te;class CH{constructor(o=new V0,a=new V0,c=new V0,u=new V0,h=new V0,d=new V0){this.planes=[o,a,c,u,h,d]}set(o,a,c,u,h,d){const f=this.planes;return f[0].copy(o),f[1].copy(a),f[2].copy(c),f[3].copy(u),f[4].copy(h),f[5].copy(d),this}copy(o){const a=this.planes;for(let c=0;c<6;c++)a[c].copy(o.planes[c]);return this}setFromProjectionMatrix(o){const a=this.planes,c=o.elements,u=c[0],h=c[1],d=c[2],f=c[3],p=c[4],g=c[5],m=c[6],v=c[7],y=c[8],_=c[9],b=c[10],C=c[11],x=c[12],S=c[13],w=c[14],O=c[15];return a[0].setComponents(f-u,v-p,C-y,O-x).normalize(),a[1].setComponents(f+u,v+p,C+y,O+x).normalize(),a[2].setComponents(f+h,v+g,C+_,O+S).normalize(),a[3].setComponents(f-h,v-g,C-_,O-S).normalize(),a[4].setComponents(f-d,v-m,C-b,O-w).normalize(),a[5].setComponents(f+d,v+m,C+b,O+w).normalize(),this}intersectsObject(o){const a=o.geometry;return null===a.boundingSphere&&a.computeBoundingSphere(),R1.copy(a.boundingSphere).applyMatrix4(o.matrixWorld),this.intersectsSphere(R1)}intersectsSprite(o){return R1.center.set(0,0,0),R1.radius=.7071067811865476,R1.applyMatrix4(o.matrixWorld),this.intersectsSphere(R1)}intersectsSphere(o){const a=this.planes,c=o.center,u=-o.radius;for(let h=0;h<6;h++)if(a[h].distanceToPoint(c)<u)return!1;return!0}intersectsBox(o){const a=this.planes;for(let c=0;c<6;c++){const u=a[c];if(vI.x=u.normal.x>0?o.max.x:o.min.x,vI.y=u.normal.y>0?o.max.y:o.min.y,vI.z=u.normal.z>0?o.max.z:o.min.z,u.distanceToPoint(vI)<0)return!1}return!0}containsPoint(o){const a=this.planes;for(let c=0;c<6;c++)if(a[c].distanceToPoint(o)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function ome(){let l=null,o=!1,a=null,c=null;function u(h,d){a(h,d),c=l.requestAnimationFrame(u)}return{start:function(){!0!==o&&null!==a&&(c=l.requestAnimationFrame(u),o=!0)},stop:function(){l.cancelAnimationFrame(c),o=!1},setAnimationLoop:function(h){a=h},setContext:function(h){l=h}}}function rct(l,o){const a=o.isWebGL2,c=new WeakMap;return{get:function d(g){return g.isInterleavedBufferAttribute&&(g=g.data),c.get(g)},remove:function f(g){g.isInterleavedBufferAttribute&&(g=g.data);const m=c.get(g);m&&(l.deleteBuffer(m.buffer),c.delete(g))},update:function p(g,m){if(g.isGLBufferAttribute){const y=c.get(g);return void((!y||y.version<g.version)&&c.set(g,{buffer:g.buffer,type:g.type,bytesPerElement:g.elementSize,version:g.version}))}g.isInterleavedBufferAttribute&&(g=g.data);const v=c.get(g);void 0===v?c.set(g,function u(g,m){const v=g.array,y=g.usage,_=l.createBuffer();let b;if(l.bindBuffer(m,_),l.bufferData(m,v,y),g.onUploadCallback(),v instanceof Float32Array)b=5126;else if(v instanceof Uint16Array)if(g.isFloat16BufferAttribute){if(!a)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");b=5131}else b=5123;else if(v instanceof Int16Array)b=5122;else if(v instanceof Uint32Array)b=5125;else if(v instanceof Int32Array)b=5124;else if(v instanceof Int8Array)b=5120;else if(v instanceof Uint8Array)b=5121;else{if(!(v instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+v);b=5121}return{buffer:_,type:b,bytesPerElement:v.BYTES_PER_ELEMENT,version:g.version}}(g,m)):v.version<g.version&&(function h(g,m,v){const y=m.array,_=m.updateRange;l.bindBuffer(v,g),-1===_.count?l.bufferSubData(v,0,y):(a?l.bufferSubData(v,_.offset*y.BYTES_PER_ELEMENT,y,_.offset,_.count):l.bufferSubData(v,_.offset*y.BYTES_PER_ELEMENT,y.subarray(_.offset,_.offset+_.count)),_.count=-1)}(v.buffer,g,m),v.version=g.version)}}}class F1 extends Ai{constructor(o=1,a=1,c=1,u=1){super(),this.type="PlaneGeometry",this.parameters={width:o,height:a,widthSegments:c,heightSegments:u};const h=o/2,d=a/2,f=Math.floor(c),p=Math.floor(u),g=f+1,m=p+1,v=o/f,y=a/p,_=[],b=[],C=[],x=[];for(let S=0;S<m;S++){const w=S*y-d;for(let O=0;O<g;O++)b.push(O*v-h,-w,0),C.push(0,0,1),x.push(O/f),x.push(1-S/p)}for(let S=0;S<p;S++)for(let w=0;w<f;w++){const T=w+g*(S+1),M=w+1+g*(S+1),A=w+1+g*S;_.push(w+g*S,T,A),_.push(T,M,A)}this.setIndex(_),this.setAttribute("position",new Dn(b,3)),this.setAttribute("normal",new Dn(C,3)),this.setAttribute("uv",new Dn(x,2))}static fromJSON(o){return new F1(o.width,o.height,o.widthSegments,o.heightSegments)}}const Zi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709 = mat3(\n    3.2404542, -0.9692660,  0.0556434,\n   -1.5371385,  1.8760108, -0.2040259,\n   -0.4985314,  0.0415560,  1.0572252\n);\nvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n   vec3 sqrtF0 = sqrt( fresnel0 );\n   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n}\nvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n}\nfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n}\nvec3 evalSensitivity( float OPD, vec3 shift ) {\n   float phase = 2.0 * PI * OPD * 1.0e-9;\n   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );\n   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );\n   xyz /= 1.0685e-7;\n   vec3 srgb = XYZ_TO_REC709 * xyz;\n   return srgb;\n}\nvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n   vec3 I;\n   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n   float cosTheta2Sq = 1.0 - sinTheta2Sq;\n   if ( cosTheta2Sq < 0.0 ) {\n       return vec3( 1.0 );\n   }\n   float cosTheta2 = sqrt( cosTheta2Sq );\n   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n   float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n   float R21 = R12;\n   float T121 = 1.0 - R12;\n   float phi12 = 0.0;\n   if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n   float phi21 = PI - phi12;\n   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n   vec3 phi23 = vec3( 0.0 );\n   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;\n   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;\n   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;\n   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n   vec3 phi = vec3( phi21 ) + phi23;\n   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n   vec3 r123 = sqrt( R123 );\n   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n   vec3 C0 = R12 + Rs;\n   I = C0;\n   vec3 Cm = Rs - T121;\n   for ( int m = 1; m <= 2; ++m ) {\n       Cm *= r123;\n       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n       I += Cm * Sm;\n   }\n   return max( I, vec3( 0.0 ) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\nif ( material.iridescenceThickness == 0.0 ) {\n\tmaterial.iridescence = 0.0;\n} else {\n\tmaterial.iridescence = saturate( material.iridescence );\n}\nif ( material.iridescence > 0.0 ) {\n\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},rn={common:{diffuse:{value:new sn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ul},uv2Transform:{value:new Ul},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new dt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new sn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new sn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ul}},sprite:{diffuse:{value:new sn(16777215)},opacity:{value:1},center:{value:new dt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ul}}},Td={basic:{uniforms:Aa([rn.common,rn.specularmap,rn.envmap,rn.aomap,rn.lightmap,rn.fog]),vertexShader:Zi.meshbasic_vert,fragmentShader:Zi.meshbasic_frag},lambert:{uniforms:Aa([rn.common,rn.specularmap,rn.envmap,rn.aomap,rn.lightmap,rn.emissivemap,rn.fog,rn.lights,{emissive:{value:new sn(0)}}]),vertexShader:Zi.meshlambert_vert,fragmentShader:Zi.meshlambert_frag},phong:{uniforms:Aa([rn.common,rn.specularmap,rn.envmap,rn.aomap,rn.lightmap,rn.emissivemap,rn.bumpmap,rn.normalmap,rn.displacementmap,rn.fog,rn.lights,{emissive:{value:new sn(0)},specular:{value:new sn(1118481)},shininess:{value:30}}]),vertexShader:Zi.meshphong_vert,fragmentShader:Zi.meshphong_frag},standard:{uniforms:Aa([rn.common,rn.envmap,rn.aomap,rn.lightmap,rn.emissivemap,rn.bumpmap,rn.normalmap,rn.displacementmap,rn.roughnessmap,rn.metalnessmap,rn.fog,rn.lights,{emissive:{value:new sn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Zi.meshphysical_vert,fragmentShader:Zi.meshphysical_frag},toon:{uniforms:Aa([rn.common,rn.aomap,rn.lightmap,rn.emissivemap,rn.bumpmap,rn.normalmap,rn.displacementmap,rn.gradientmap,rn.fog,rn.lights,{emissive:{value:new sn(0)}}]),vertexShader:Zi.meshtoon_vert,fragmentShader:Zi.meshtoon_frag},matcap:{uniforms:Aa([rn.common,rn.bumpmap,rn.normalmap,rn.displacementmap,rn.fog,{matcap:{value:null}}]),vertexShader:Zi.meshmatcap_vert,fragmentShader:Zi.meshmatcap_frag},points:{uniforms:Aa([rn.points,rn.fog]),vertexShader:Zi.points_vert,fragmentShader:Zi.points_frag},dashed:{uniforms:Aa([rn.common,rn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Zi.linedashed_vert,fragmentShader:Zi.linedashed_frag},depth:{uniforms:Aa([rn.common,rn.displacementmap]),vertexShader:Zi.depth_vert,fragmentShader:Zi.depth_frag},normal:{uniforms:Aa([rn.common,rn.bumpmap,rn.normalmap,rn.displacementmap,{opacity:{value:1}}]),vertexShader:Zi.meshnormal_vert,fragmentShader:Zi.meshnormal_frag},sprite:{uniforms:Aa([rn.sprite,rn.fog]),vertexShader:Zi.sprite_vert,fragmentShader:Zi.sprite_frag},background:{uniforms:{uvTransform:{value:new Ul},t2D:{value:null}},vertexShader:Zi.background_vert,fragmentShader:Zi.background_frag},cube:{uniforms:Aa([rn.envmap,{opacity:{value:1}}]),vertexShader:Zi.cube_vert,fragmentShader:Zi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Zi.equirect_vert,fragmentShader:Zi.equirect_frag},distanceRGBA:{uniforms:Aa([rn.common,rn.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Zi.distanceRGBA_vert,fragmentShader:Zi.distanceRGBA_frag},shadow:{uniforms:Aa([rn.lights,rn.fog,{color:{value:new sn(0)},opacity:{value:1}}]),vertexShader:Zi.shadow_vert,fragmentShader:Zi.shadow_frag}};function nht(l,o,a,c,u,h){const d=new sn(0);let p,g,f=!0===u?0:1,m=null,v=0,y=null;function b(C,x){a.buffers.color.setClear(C.r,C.g,C.b,x,h)}return{getClearColor:function(){return d},setClearColor:function(C,x=1){d.set(C),f=x,b(d,f)},getClearAlpha:function(){return f},setClearAlpha:function(C){f=C,b(d,f)},render:function _(C,x){let S=!1,w=!0===x.isScene?x.background:null;w&&w.isTexture&&(w=o.get(w));const O=l.xr,T=O.getSession&&O.getSession();T&&"additive"===T.environmentBlendMode&&(w=null),null===w?b(d,f):w&&w.isColor&&(b(w,1),S=!0),(l.autoClear||S)&&l.clear(l.autoClearColor,l.autoClearDepth,l.autoClearStencil),w&&(w.isCubeTexture||306===w.mapping)?(void 0===g&&(g=new Ki(new Uf(1,1,1),new Ia({name:"BackgroundCubeMaterial",uniforms:A1(Td.cube.uniforms),vertexShader:Td.cube.vertexShader,fragmentShader:Td.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(M,A,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),c.update(g)),g.material.uniforms.envMap.value=w,g.material.uniforms.flipEnvMap.value=w.isCubeTexture&&!1===w.isRenderTargetTexture?-1:1,(m!==w||v!==w.version||y!==l.toneMapping)&&(g.material.needsUpdate=!0,m=w,v=w.version,y=l.toneMapping),g.layers.enableAll(),C.unshift(g,g.geometry,g.material,0,0,null)):w&&w.isTexture&&(void 0===p&&(p=new Ki(new F1(2,2),new Ia({name:"BackgroundMaterial",uniforms:A1(Td.background.uniforms),vertexShader:Td.background.vertexShader,fragmentShader:Td.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),c.update(p)),p.material.uniforms.t2D.value=w,!0===w.matrixAutoUpdate&&w.updateMatrix(),p.material.uniforms.uvTransform.value.copy(w.matrix),(m!==w||v!==w.version||y!==l.toneMapping)&&(p.material.needsUpdate=!0,m=w,v=w.version,y=l.toneMapping),p.layers.enableAll(),C.unshift(p,p.geometry,p.material,0,0,null))}}}function iht(l,o,a,c){const u=l.getParameter(34921),h=c.isWebGL2?null:o.get("OES_vertex_array_object"),d=c.isWebGL2||null!==h,f={},p=x(null);let g=p,m=!1;function _(N){return c.isWebGL2?l.bindVertexArray(N):h.bindVertexArrayOES(N)}function b(N){return c.isWebGL2?l.deleteVertexArray(N):h.deleteVertexArrayOES(N)}function x(N){const U=[],z=[],$=[];for(let H=0;H<u;H++)U[H]=0,z[H]=0,$[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:z,attributeDivisors:$,object:N,attributes:{},index:null}}function O(){const N=g.newAttributes;for(let U=0,z=N.length;U<z;U++)N[U]=0}function T(N){M(N,0)}function M(N,U){const $=g.enabledAttributes,H=g.attributeDivisors;g.newAttributes[N]=1,0===$[N]&&(l.enableVertexAttribArray(N),$[N]=1),H[N]!==U&&((c.isWebGL2?l:o.get("ANGLE_instanced_arrays"))[c.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](N,U),H[N]=U)}function A(){const N=g.newAttributes,U=g.enabledAttributes;for(let z=0,$=U.length;z<$;z++)U[z]!==N[z]&&(l.disableVertexAttribArray(z),U[z]=0)}function I(N,U,z,$,H,G){!0!==c.isWebGL2||5124!==z&&5125!==z?l.vertexAttribPointer(N,U,z,$,H,G):l.vertexAttribIPointer(N,U,z,H,G)}function Q(){j(),m=!0,g!==p&&(g=p,_(g.object))}function j(){p.geometry=null,p.program=null,p.wireframe=!1}return{setup:function v(N,U,z,$,H){let G=!1;if(d){const W=function C(N,U,z){const $=!0===z.wireframe;let H=f[N.id];void 0===H&&(H={},f[N.id]=H);let G=H[U.id];void 0===G&&(G={},H[U.id]=G);let W=G[$];return void 0===W&&(W=x(function y(){return c.isWebGL2?l.createVertexArray():h.createVertexArrayOES()}()),G[$]=W),W}($,z,U);g!==W&&(g=W,_(g.object)),G=function S(N,U,z,$){const H=g.attributes,G=U.attributes;let W=0;const X=z.getAttributes();for(const K in X)if(X[K].location>=0){const se=H[K];let Ce=G[K];if(void 0===Ce&&("instanceMatrix"===K&&N.instanceMatrix&&(Ce=N.instanceMatrix),"instanceColor"===K&&N.instanceColor&&(Ce=N.instanceColor)),void 0===se||se.attribute!==Ce||Ce&&se.data!==Ce.data)return!0;W++}return g.attributesNum!==W||g.index!==$}(N,$,z,H),G&&function w(N,U,z,$){const H={},G=U.attributes;let W=0;const X=z.getAttributes();for(const K in X)if(X[K].location>=0){let se=G[K];void 0===se&&("instanceMatrix"===K&&N.instanceMatrix&&(se=N.instanceMatrix),"instanceColor"===K&&N.instanceColor&&(se=N.instanceColor));const Ce={};Ce.attribute=se,se&&se.data&&(Ce.data=se.data),H[K]=Ce,W++}g.attributes=H,g.attributesNum=W,g.index=$}(N,$,z,H)}else{const W=!0===U.wireframe;(g.geometry!==$.id||g.program!==z.id||g.wireframe!==W)&&(g.geometry=$.id,g.program=z.id,g.wireframe=W,G=!0)}null!==H&&a.update(H,34963),(G||m)&&(m=!1,function E(N,U,z,$){if(!1===c.isWebGL2&&(N.isInstancedMesh||$.isInstancedBufferGeometry)&&null===o.get("ANGLE_instanced_arrays"))return;O();const H=$.attributes,G=z.getAttributes(),W=U.defaultAttributeValues;for(const X in G){const K=G[X];if(K.location>=0){let ae=H[X];if(void 0===ae&&("instanceMatrix"===X&&N.instanceMatrix&&(ae=N.instanceMatrix),"instanceColor"===X&&N.instanceColor&&(ae=N.instanceColor)),void 0!==ae){const se=ae.normalized,Ce=ae.itemSize,ve=a.get(ae);if(void 0===ve)continue;const Oe=ve.buffer,$e=ve.type,Me=ve.bytesPerElement;if(ae.isInterleavedBufferAttribute){const Ie=ae.data,Xe=Ie.stride,ue=ae.offset;if(Ie.isInstancedInterleavedBuffer){for(let Re=0;Re<K.locationSize;Re++)M(K.location+Re,Ie.meshPerAttribute);!0!==N.isInstancedMesh&&void 0===$._maxInstanceCount&&($._maxInstanceCount=Ie.meshPerAttribute*Ie.count)}else for(let Re=0;Re<K.locationSize;Re++)T(K.location+Re);l.bindBuffer(34962,Oe);for(let Re=0;Re<K.locationSize;Re++)I(K.location+Re,Ce/K.locationSize,$e,se,Xe*Me,(ue+Ce/K.locationSize*Re)*Me)}else{if(ae.isInstancedBufferAttribute){for(let Ie=0;Ie<K.locationSize;Ie++)M(K.location+Ie,ae.meshPerAttribute);!0!==N.isInstancedMesh&&void 0===$._maxInstanceCount&&($._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let Ie=0;Ie<K.locationSize;Ie++)T(K.location+Ie);l.bindBuffer(34962,Oe);for(let Ie=0;Ie<K.locationSize;Ie++)I(K.location+Ie,Ce/K.locationSize,$e,se,Ce*Me,Ce/K.locationSize*Ie*Me)}}else if(void 0!==W){const se=W[X];if(void 0!==se)switch(se.length){case 2:l.vertexAttrib2fv(K.location,se);break;case 3:l.vertexAttrib3fv(K.location,se);break;case 4:l.vertexAttrib4fv(K.location,se);break;default:l.vertexAttrib1fv(K.location,se)}}}}A()}(N,U,z,$),null!==H&&l.bindBuffer(34963,a.get(H).buffer))},reset:Q,resetDefaultState:j,dispose:function P(){Q();for(const N in f){const U=f[N];for(const z in U){const $=U[z];for(const H in $)b($[H].object),delete $[H];delete U[z]}delete f[N]}},releaseStatesOfGeometry:function B(N){if(void 0===f[N.id])return;const U=f[N.id];for(const z in U){const $=U[z];for(const H in $)b($[H].object),delete $[H];delete U[z]}delete f[N.id]},releaseStatesOfProgram:function V(N){for(const U in f){const z=f[U];if(void 0===z[N.id])continue;const $=z[N.id];for(const H in $)b($[H].object),delete $[H];delete z[N.id]}},initAttributes:O,enableAttribute:T,disableUnusedAttributes:A}}function rht(l,o,a,c){const u=c.isWebGL2;let h;this.setMode=function d(g){h=g},this.render=function f(g,m){l.drawArrays(h,g,m),a.update(m,h,1)},this.renderInstances=function p(g,m,v){if(0===v)return;let y,_;if(u)y=l,_="drawArraysInstanced";else if(y=o.get("ANGLE_instanced_arrays"),_="drawArraysInstancedANGLE",null===y)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");y[_](h,g,m,v),a.update(m,h,v)}}function sht(l,o,a){let c;function h(I){if("highp"===I){if(l.getShaderPrecisionFormat(35633,36338).precision>0&&l.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";I="mediump"}return"mediump"===I&&l.getShaderPrecisionFormat(35633,36337).precision>0&&l.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const d="undefined"!=typeof WebGL2RenderingContext&&l instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&l instanceof WebGL2ComputeRenderingContext;let f=void 0!==a.precision?a.precision:"highp";const p=h(f);p!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",p,"instead."),f=p);const g=d||o.has("WEBGL_draw_buffers"),m=!0===a.logarithmicDepthBuffer,v=l.getParameter(34930),y=l.getParameter(35660),_=l.getParameter(3379),b=l.getParameter(34076),C=l.getParameter(34921),x=l.getParameter(36347),S=l.getParameter(36348),w=l.getParameter(36349),O=y>0,T=d||o.has("OES_texture_float");return{isWebGL2:d,drawBuffers:g,getMaxAnisotropy:function u(){if(void 0!==c)return c;if(!0===o.has("EXT_texture_filter_anisotropic")){const I=o.get("EXT_texture_filter_anisotropic");c=l.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else c=0;return c},getMaxPrecision:h,precision:f,logarithmicDepthBuffer:m,maxTextures:v,maxVertexTextures:y,maxTextureSize:_,maxCubemapSize:b,maxAttributes:C,maxVertexUniforms:x,maxVaryings:S,maxFragmentUniforms:w,vertexTextures:O,floatFragmentTextures:T,floatVertexTextures:O&&T,maxSamples:d?l.getParameter(36183):0}}function oht(l){const o=this;let a=null,c=0,u=!1,h=!1;const d=new V0,f=new Ul,p={value:null,needsUpdate:!1};function g(){p.value!==a&&(p.value=a,p.needsUpdate=c>0),o.numPlanes=c,o.numIntersection=0}function m(v,y,_,b){const C=null!==v?v.length:0;let x=null;if(0!==C){if(x=p.value,!0!==b||null===x){const S=_+4*C,w=y.matrixWorldInverse;f.getNormalMatrix(w),(null===x||x.length<S)&&(x=new Float32Array(S));for(let O=0,T=_;O!==C;++O,T+=4)d.copy(v[O]).applyMatrix4(w,f),d.normal.toArray(x,T),x[T+3]=d.constant}p.value=x,p.needsUpdate=!0}return o.numPlanes=C,o.numIntersection=0,x}this.uniform=p,this.numPlanes=0,this.numIntersection=0,this.init=function(v,y,_){const b=0!==v.length||y||0!==c||u;return u=y,a=m(v,_,0),c=v.length,b},this.beginShadows=function(){h=!0,m(null)},this.endShadows=function(){h=!1,g()},this.setState=function(v,y,_){const b=v.clippingPlanes,C=v.clipIntersection,x=v.clipShadows,S=l.get(v);if(!u||null===b||0===b.length||h&&!x)h?m(null):g();else{const w=h?0:c,O=4*w;let T=S.clippingState||null;p.value=T,T=m(b,y,O,_);for(let M=0;M!==O;++M)T[M]=a[M];S.clippingState=T,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=w}}}function aht(l){let o=new WeakMap;function a(d,f){return 303===f?d.mapping=301:304===f&&(d.mapping=302),d}function u(d){const f=d.target;f.removeEventListener("dispose",u);const p=o.get(f);void 0!==p&&(o.delete(f),p.dispose())}return{get:function c(d){if(d&&d.isTexture&&!1===d.isRenderTargetTexture){const f=d.mapping;if(303===f||304===f){if(o.has(d))return a(o.get(d).texture,d.mapping);{const p=d.image;if(p&&p.height>0){const g=new tct(p.height/2);return g.fromEquirectangularTexture(l,d),o.set(d,g),d.addEventListener("dispose",u),a(g.texture,d.mapping)}return null}}}return d},dispose:function h(){o=new WeakMap}}}Td.physical={uniforms:Aa([Td.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new dt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new sn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new dt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new sn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new sn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Zi.meshphysical_vert,fragmentShader:Zi.meshphysical_frag};class Uw extends bH{constructor(o=-1,a=1,c=1,u=-1,h=.1,d=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=o,this.right=a,this.top=c,this.bottom=u,this.near=h,this.far=d,this.updateProjectionMatrix()}copy(o,a){return super.copy(o,a),this.left=o.left,this.right=o.right,this.top=o.top,this.bottom=o.bottom,this.near=o.near,this.far=o.far,this.zoom=o.zoom,this.view=null===o.view?null:Object.assign({},o.view),this}setViewOffset(o,a,c,u,h,d){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=a,this.view.offsetX=c,this.view.offsetY=u,this.view.width=h,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const o=(this.right-this.left)/(2*this.zoom),a=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,u=(this.top+this.bottom)/2;let h=c-o,d=c+o,f=u+a,p=u-a;if(null!==this.view&&this.view.enabled){const g=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=g*this.view.offsetX,d=h+g*this.view.width,f-=m*this.view.offsetY,p=f-m*this.view.height}this.projectionMatrix.makeOrthographic(h,d,f,p,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(o){const a=super.toJSON(o);return a.object.zoom=this.zoom,a.object.left=this.left,a.object.right=this.right,a.object.top=this.top,a.object.bottom=this.bottom,a.object.near=this.near,a.object.far=this.far,null!==this.view&&(a.object.view=Object.assign({},this.view)),a}}const ame=[.125,.215,.35,.446,.526,.582],SH=new Uw,lme=new sn;let wH=null;const U0=(1+Math.sqrt(5))/2,L1=1/U0,cme=[new te(1,1,1),new te(-1,1,1),new te(1,1,-1),new te(-1,1,-1),new te(0,U0,L1),new te(0,U0,-L1),new te(L1,0,U0),new te(-L1,0,U0),new te(U0,L1,0),new te(-U0,L1,0)];class ume{constructor(o){this._renderer=o,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(o,a=0,c=.1,u=100){wH=this._renderer.getRenderTarget(),this._setSize(256);const h=this._allocateTargets();return h.depthBuffer=!0,this._sceneToCubeUV(o,c,u,h),a>0&&this._blur(h,0,0,a),this._applyPMREM(h),this._cleanup(h),h}fromEquirectangular(o,a=null){return this._fromTexture(o,a)}fromCubemap(o,a=null){return this._fromTexture(o,a)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=fme(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=dme(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(o){this._lodMax=Math.floor(Math.log2(o)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let o=0;o<this._lodPlanes.length;o++)this._lodPlanes[o].dispose()}_cleanup(o){this._renderer.setRenderTarget(wH),o.scissorTest=!1,yI(o,0,0,o.width,o.height)}_fromTexture(o,a){this._setSize(301===o.mapping||302===o.mapping?0===o.image.length?16:o.image[0].width||o.image[0].image.width:o.image.width/4),wH=this._renderer.getRenderTarget();const c=a||this._allocateTargets();return this._textureToCubeUV(o,c),this._applyPMREM(c),this._cleanup(c),c}_allocateTargets(){const o=3*Math.max(this._cubeSize,112),a=4*this._cubeSize,c={magFilter:co,minFilter:co,generateMipmaps:!1,type:Rw,format:uh,encoding:A0,depthBuffer:!1},u=hme(o,a,c);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==o){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=hme(o,a,c);const{_lodMax:h}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function lht(l){const o=[],a=[],c=[];let u=l;const h=l-4+1+ame.length;for(let d=0;d<h;d++){const f=Math.pow(2,u);a.push(f);let p=1/f;d>l-4?p=ame[d-l+4-1]:0===d&&(p=0),c.push(p);const g=1/(f-2),m=-g,v=1+g,y=[m,m,v,m,v,v,m,m,v,v,m,v],_=6,b=6,C=3,x=2,S=1,w=new Float32Array(C*b*_),O=new Float32Array(x*b*_),T=new Float32Array(S*b*_);for(let A=0;A<_;A++){const I=A%3*2/3-1,E=A>2?0:-1;w.set([I,E,0,I+2/3,E,0,I+2/3,E+1,0,I,E,0,I+2/3,E+1,0,I,E+1,0],C*b*A),O.set(y,x*b*A),T.set([A,A,A,A,A,A],S*b*A)}const M=new Ai;M.setAttribute("position",new Ts(w,C)),M.setAttribute("uv",new Ts(O,x)),M.setAttribute("faceIndex",new Ts(T,S)),o.push(M),u>4&&u--}return{lodPlanes:o,sizeLods:a,sigmas:c}}(h)),this._blurMaterial=function cht(l,o,a){const c=new Float32Array(20),u=new te(0,1,0);return new Ia({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/o,CUBEUV_TEXEL_HEIGHT:1/a,CUBEUV_MAX_MIP:`${l}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:c},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:u}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(h,o,a)}return u}_compileMaterial(o){const a=new Ki(this._lodPlanes[0],o);this._renderer.compile(a,SH)}_sceneToCubeUV(o,a,c,u){const f=new ho(90,1,a,c),p=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],m=this._renderer,v=m.autoClear,y=m.toneMapping;m.getClearColor(lme),m.toneMapping=0,m.autoClear=!1;const _=new Xs({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),b=new Ki(new Uf,_);let C=!1;const x=o.background;x?x.isColor&&(_.color.copy(x),o.background=null,C=!0):(_.color.copy(lme),C=!0);for(let S=0;S<6;S++){const w=S%3;0===w?(f.up.set(0,p[S],0),f.lookAt(g[S],0,0)):1===w?(f.up.set(0,0,p[S]),f.lookAt(0,g[S],0)):(f.up.set(0,p[S],0),f.lookAt(0,0,g[S]));const O=this._cubeSize;yI(u,w*O,S>2?O:0,O,O),m.setRenderTarget(u),C&&m.render(b,f),m.render(o,f)}b.geometry.dispose(),b.material.dispose(),m.toneMapping=y,m.autoClear=v,o.background=x}_textureToCubeUV(o,a){const c=this._renderer,u=301===o.mapping||302===o.mapping;u?(null===this._cubemapMaterial&&(this._cubemapMaterial=fme()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===o.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=dme());const h=u?this._cubemapMaterial:this._equirectMaterial,d=new Ki(this._lodPlanes[0],h);h.uniforms.envMap.value=o;const p=this._cubeSize;yI(a,0,0,3*p,2*p),c.setRenderTarget(a),c.render(d,SH)}_applyPMREM(o){const a=this._renderer,c=a.autoClear;a.autoClear=!1;for(let u=1;u<this._lodPlanes.length;u++){const h=Math.sqrt(this._sigmas[u]*this._sigmas[u]-this._sigmas[u-1]*this._sigmas[u-1]);this._blur(o,u-1,u,h,cme[(u-1)%cme.length])}a.autoClear=c}_blur(o,a,c,u,h){const d=this._pingPongRenderTarget;this._halfBlur(o,d,a,c,u,"latitudinal",h),this._halfBlur(d,o,c,c,u,"longitudinal",h)}_halfBlur(o,a,c,u,h,d,f){const p=this._renderer,g=this._blurMaterial;"latitudinal"!==d&&"longitudinal"!==d&&console.error("blur direction must be either latitudinal or longitudinal!");const v=new Ki(this._lodPlanes[u],g),y=g.uniforms,_=this._sizeLods[c]-1,b=isFinite(h)?Math.PI/(2*_):2*Math.PI/39,C=h/b,x=isFinite(h)?1+Math.floor(3*C):20;x>20&&console.warn(`sigmaRadians, ${h}, is too large and will clip, as it requested ${x} samples when the maximum is set to 20`);const S=[];let w=0;for(let I=0;I<20;++I){const E=I/C,P=Math.exp(-E*E/2);S.push(P),0===I?w+=P:I<x&&(w+=2*P)}for(let I=0;I<S.length;I++)S[I]=S[I]/w;y.envMap.value=o.texture,y.samples.value=x,y.weights.value=S,y.latitudinal.value="latitudinal"===d,f&&(y.poleAxis.value=f);const{_lodMax:O}=this;y.dTheta.value=b,y.mipInt.value=O-c;const T=this._sizeLods[u];yI(a,3*T*(u>O-4?u-O+4:0),4*(this._cubeSize-T),3*T,2*T),p.setRenderTarget(a),p.render(v,SH)}}function hme(l,o,a){const c=new dl(l,o,a);return c.texture.mapping=306,c.texture.name="PMREM.cubeUv",c.scissorTest=!0,c}function yI(l,o,a,c,u){l.viewport.set(o,a,c,u),l.scissor.set(o,a,c,u)}function dme(){return new Ia({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function fme(){return new Ia({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function uht(l){let o=new WeakMap,a=null;function h(f){const p=f.target;p.removeEventListener("dispose",h);const g=o.get(p);void 0!==g&&(o.delete(p),g.dispose())}return{get:function c(f){if(f&&f.isTexture){const p=f.mapping,g=303===p||304===p,m=301===p||302===p;if(g||m){if(f.isRenderTargetTexture&&!0===f.needsPMREMUpdate){f.needsPMREMUpdate=!1;let v=o.get(f);return null===a&&(a=new ume(l)),v=g?a.fromEquirectangular(f,v):a.fromCubemap(f,v),o.set(f,v),v.texture}if(o.has(f))return o.get(f).texture;{const v=f.image;if(g&&v&&v.height>0||m&&v&&function u(f){let p=0;for(let m=0;m<6;m++)void 0!==f[m]&&p++;return 6===p}(v)){null===a&&(a=new ume(l));const y=g?a.fromEquirectangular(f):a.fromCubemap(f);return o.set(f,y),f.addEventListener("dispose",h),y.texture}return null}}}return f},dispose:function d(){o=new WeakMap,null!==a&&(a.dispose(),a=null)}}}function hht(l){const o={};function a(c){if(void 0!==o[c])return o[c];let u;switch(c){case"WEBGL_depth_texture":u=l.getExtension("WEBGL_depth_texture")||l.getExtension("MOZ_WEBGL_depth_texture")||l.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":u=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":u=l.getExtension("WEBGL_compressed_texture_s3tc")||l.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":u=l.getExtension("WEBGL_compressed_texture_pvrtc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:u=l.getExtension(c)}return o[c]=u,u}return{has:function(c){return null!==a(c)},init:function(c){c.isWebGL2?a("EXT_color_buffer_float"):(a("WEBGL_depth_texture"),a("OES_texture_float"),a("OES_texture_half_float"),a("OES_texture_half_float_linear"),a("OES_standard_derivatives"),a("OES_element_index_uint"),a("OES_vertex_array_object"),a("ANGLE_instanced_arrays")),a("OES_texture_float_linear"),a("EXT_color_buffer_half_float"),a("WEBGL_multisampled_render_to_texture")},get:function(c){const u=a(c);return null===u&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported."),u}}}function dht(l,o,a,c){const u={},h=new WeakMap;function d(v){const y=v.target;null!==y.index&&o.remove(y.index);for(const b in y.attributes)o.remove(y.attributes[b]);y.removeEventListener("dispose",d),delete u[y.id];const _=h.get(y);_&&(o.remove(_),h.delete(y)),c.releaseStatesOfGeometry(y),!0===y.isInstancedBufferGeometry&&delete y._maxInstanceCount,a.memory.geometries--}function g(v){const y=[],_=v.index,b=v.attributes.position;let C=0;if(null!==_){const w=_.array;C=_.version;for(let O=0,T=w.length;O<T;O+=3){const M=w[O+0],A=w[O+1],I=w[O+2];y.push(M,A,A,I,I,M)}}else{C=b.version;for(let O=0,T=b.array.length/3-1;O<T;O+=3){const M=O+0,A=O+1,I=O+2;y.push(M,A,A,I,I,M)}}const x=new($ge(y)?rme:ime)(y,1);x.version=C;const S=h.get(v);S&&o.remove(S),h.set(v,x)}return{get:function f(v,y){return!0===u[y.id]||(y.addEventListener("dispose",d),u[y.id]=!0,a.memory.geometries++),y},update:function p(v){const y=v.attributes;for(const b in y)o.update(y[b],34962);const _=v.morphAttributes;for(const b in _){const C=_[b];for(let x=0,S=C.length;x<S;x++)o.update(C[x],34962)}},getWireframeAttribute:function m(v){const y=h.get(v);if(y){const _=v.index;null!==_&&y.version<_.version&&g(v)}else g(v);return h.get(v)}}}function fht(l,o,a,c){const u=c.isWebGL2;let h,f,p;this.setMode=function d(y){h=y},this.setIndex=function g(y){f=y.type,p=y.bytesPerElement},this.render=function m(y,_){l.drawElements(h,_,f,y*p),a.update(_,h,1)},this.renderInstances=function v(y,_,b){if(0===b)return;let C,x;if(u)C=l,x="drawElementsInstanced";else if(C=o.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",null===C)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");C[x](h,_,f,y*p,b),a.update(_,h,b)}}function pht(l){const a={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:a,programs:null,autoReset:!0,reset:function u(){a.frame++,a.calls=0,a.triangles=0,a.points=0,a.lines=0},update:function c(h,d,f){switch(a.calls++,d){case 4:a.triangles+=f*(h/3);break;case 1:a.lines+=f*(h/2);break;case 3:a.lines+=f*(h-1);break;case 2:a.lines+=f*h;break;case 0:a.points+=f*h;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d)}}}}function ght(l,o){return l[0]-o[0]}function mht(l,o){return Math.abs(o[1])-Math.abs(l[1])}function OH(l,o){let a=1;const c=o.isInterleavedBufferAttribute?o.data.array:o.array;c instanceof Int8Array?a=127:c instanceof Uint8Array?a=255:c instanceof Uint16Array?a=65535:c instanceof Int16Array?a=32767:c instanceof Int32Array?a=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",c),l.divideScalar(a)}function vht(l,o,a){const c={},u=new Float32Array(8),h=new WeakMap,d=new er,f=[];for(let g=0;g<8;g++)f[g]=[g,0];return{update:function p(g,m,v,y){const _=g.morphTargetInfluences;if(!0===o.isWebGL2){const b=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,C=void 0!==b?b.length:0;let x=h.get(m);if(void 0===x||x.count!==C){let U=function(){j.dispose(),h.delete(m),m.removeEventListener("dispose",U)};void 0!==x&&x.texture.dispose();const O=void 0!==m.morphAttributes.position,T=void 0!==m.morphAttributes.normal,M=void 0!==m.morphAttributes.color,A=m.morphAttributes.position||[],I=m.morphAttributes.normal||[],E=m.morphAttributes.color||[];let P=0;!0===O&&(P=1),!0===T&&(P=2),!0===M&&(P=3);let B=m.attributes.position.count*P,V=1;B>o.maxTextureSize&&(V=Math.ceil(B/o.maxTextureSize),B=o.maxTextureSize);const Q=new Float32Array(B*V*4*C),j=new tH(Q,B,V,C);j.type=xg,j.needsUpdate=!0;const N=4*P;for(let z=0;z<C;z++){const $=A[z],H=I[z],G=E[z],W=B*V*4*z;for(let X=0;X<$.count;X++){const K=X*N;!0===O&&(d.fromBufferAttribute($,X),!0===$.normalized&&OH(d,$),Q[W+K+0]=d.x,Q[W+K+1]=d.y,Q[W+K+2]=d.z,Q[W+K+3]=0),!0===T&&(d.fromBufferAttribute(H,X),!0===H.normalized&&OH(d,H),Q[W+K+4]=d.x,Q[W+K+5]=d.y,Q[W+K+6]=d.z,Q[W+K+7]=0),!0===M&&(d.fromBufferAttribute(G,X),!0===G.normalized&&OH(d,G),Q[W+K+8]=d.x,Q[W+K+9]=d.y,Q[W+K+10]=d.z,Q[W+K+11]=4===G.itemSize?d.w:1)}}x={count:C,texture:j,size:new dt(B,V)},h.set(m,x),m.addEventListener("dispose",U)}let S=0;for(let O=0;O<_.length;O++)S+=_[O];const w=m.morphTargetsRelative?1:1-S;y.getUniforms().setValue(l,"morphTargetBaseInfluence",w),y.getUniforms().setValue(l,"morphTargetInfluences",_),y.getUniforms().setValue(l,"morphTargetsTexture",x.texture,a),y.getUniforms().setValue(l,"morphTargetsTextureSize",x.size)}else{const b=void 0===_?0:_.length;let C=c[m.id];if(void 0===C||C.length!==b){C=[];for(let T=0;T<b;T++)C[T]=[T,0];c[m.id]=C}for(let T=0;T<b;T++){const M=C[T];M[0]=T,M[1]=_[T]}C.sort(mht);for(let T=0;T<8;T++)T<b&&C[T][1]?(f[T][0]=C[T][0],f[T][1]=C[T][1]):(f[T][0]=Number.MAX_SAFE_INTEGER,f[T][1]=0);f.sort(ght);const x=m.morphAttributes.position,S=m.morphAttributes.normal;let w=0;for(let T=0;T<8;T++){const M=f[T],A=M[0],I=M[1];A!==Number.MAX_SAFE_INTEGER&&I?(x&&m.getAttribute("morphTarget"+T)!==x[A]&&m.setAttribute("morphTarget"+T,x[A]),S&&m.getAttribute("morphNormal"+T)!==S[A]&&m.setAttribute("morphNormal"+T,S[A]),u[T]=I,w+=I):(x&&!0===m.hasAttribute("morphTarget"+T)&&m.deleteAttribute("morphTarget"+T),S&&!0===m.hasAttribute("morphNormal"+T)&&m.deleteAttribute("morphNormal"+T),u[T]=0)}const O=m.morphTargetsRelative?1:1-w;y.getUniforms().setValue(l,"morphTargetBaseInfluence",O),y.getUniforms().setValue(l,"morphTargetInfluences",u)}}}}function yht(l,o,a,c){let u=new WeakMap;function f(p){const g=p.target;g.removeEventListener("dispose",f),a.remove(g.instanceMatrix),null!==g.instanceColor&&a.remove(g.instanceColor)}return{update:function h(p){const g=c.render.frame,v=o.get(p,p.geometry);return u.get(v)!==g&&(o.update(v),u.set(v,g)),p.isInstancedMesh&&(!1===p.hasEventListener("dispose",f)&&p.addEventListener("dispose",f),a.update(p.instanceMatrix,34962),null!==p.instanceColor&&a.update(p.instanceColor,34962)),v},dispose:function d(){u=new WeakMap}}}const pme=new wd,gme=new tH,mme=new Qge,vme=new mI,yme=[],_me=[],bme=new Float32Array(16),xme=new Float32Array(9),Cme=new Float32Array(4);function B1(l,o,a){const c=l[0];if(c<=0||c>0)return l;const u=o*a;let h=yme[u];if(void 0===h&&(h=new Float32Array(u),yme[u]=h),0!==o){c.toArray(h,0);for(let d=1,f=0;d!==o;++d)f+=a,l[d].toArray(h,f)}return h}function fl(l,o){if(l.length!==o.length)return!1;for(let a=0,c=l.length;a<c;a++)if(l[a]!==o[a])return!1;return!0}function pl(l,o){for(let a=0,c=o.length;a<c;a++)l[a]=o[a]}function _I(l,o){let a=_me[o];void 0===a&&(a=new Int32Array(o),_me[o]=a);for(let c=0;c!==o;++c)a[c]=l.allocateTextureUnit();return a}function _ht(l,o){const a=this.cache;a[0]!==o&&(l.uniform1f(this.addr,o),a[0]=o)}function bht(l,o){const a=this.cache;if(void 0!==o.x)(a[0]!==o.x||a[1]!==o.y)&&(l.uniform2f(this.addr,o.x,o.y),a[0]=o.x,a[1]=o.y);else{if(fl(a,o))return;l.uniform2fv(this.addr,o),pl(a,o)}}function xht(l,o){const a=this.cache;if(void 0!==o.x)(a[0]!==o.x||a[1]!==o.y||a[2]!==o.z)&&(l.uniform3f(this.addr,o.x,o.y,o.z),a[0]=o.x,a[1]=o.y,a[2]=o.z);else if(void 0!==o.r)(a[0]!==o.r||a[1]!==o.g||a[2]!==o.b)&&(l.uniform3f(this.addr,o.r,o.g,o.b),a[0]=o.r,a[1]=o.g,a[2]=o.b);else{if(fl(a,o))return;l.uniform3fv(this.addr,o),pl(a,o)}}function Cht(l,o){const a=this.cache;if(void 0!==o.x)(a[0]!==o.x||a[1]!==o.y||a[2]!==o.z||a[3]!==o.w)&&(l.uniform4f(this.addr,o.x,o.y,o.z,o.w),a[0]=o.x,a[1]=o.y,a[2]=o.z,a[3]=o.w);else{if(fl(a,o))return;l.uniform4fv(this.addr,o),pl(a,o)}}function Sht(l,o){const a=this.cache,c=o.elements;if(void 0===c){if(fl(a,o))return;l.uniformMatrix2fv(this.addr,!1,o),pl(a,o)}else{if(fl(a,c))return;Cme.set(c),l.uniformMatrix2fv(this.addr,!1,Cme),pl(a,c)}}function wht(l,o){const a=this.cache,c=o.elements;if(void 0===c){if(fl(a,o))return;l.uniformMatrix3fv(this.addr,!1,o),pl(a,o)}else{if(fl(a,c))return;xme.set(c),l.uniformMatrix3fv(this.addr,!1,xme),pl(a,c)}}function Tht(l,o){const a=this.cache,c=o.elements;if(void 0===c){if(fl(a,o))return;l.uniformMatrix4fv(this.addr,!1,o),pl(a,o)}else{if(fl(a,c))return;bme.set(c),l.uniformMatrix4fv(this.addr,!1,bme),pl(a,c)}}function Oht(l,o){const a=this.cache;a[0]!==o&&(l.uniform1i(this.addr,o),a[0]=o)}function Dht(l,o){const a=this.cache;fl(a,o)||(l.uniform2iv(this.addr,o),pl(a,o))}function kht(l,o){const a=this.cache;fl(a,o)||(l.uniform3iv(this.addr,o),pl(a,o))}function Mht(l,o){const a=this.cache;fl(a,o)||(l.uniform4iv(this.addr,o),pl(a,o))}function Eht(l,o){const a=this.cache;a[0]!==o&&(l.uniform1ui(this.addr,o),a[0]=o)}function Aht(l,o){const a=this.cache;fl(a,o)||(l.uniform2uiv(this.addr,o),pl(a,o))}function Iht(l,o){const a=this.cache;fl(a,o)||(l.uniform3uiv(this.addr,o),pl(a,o))}function Pht(l,o){const a=this.cache;fl(a,o)||(l.uniform4uiv(this.addr,o),pl(a,o))}function Rht(l,o,a){const c=this.cache,u=a.allocateTextureUnit();c[0]!==u&&(l.uniform1i(this.addr,u),c[0]=u),a.setTexture2D(o||pme,u)}function Fht(l,o,a){const c=this.cache,u=a.allocateTextureUnit();c[0]!==u&&(l.uniform1i(this.addr,u),c[0]=u),a.setTexture3D(o||mme,u)}function Nht(l,o,a){const c=this.cache,u=a.allocateTextureUnit();c[0]!==u&&(l.uniform1i(this.addr,u),c[0]=u),a.setTextureCube(o||vme,u)}function Lht(l,o,a){const c=this.cache,u=a.allocateTextureUnit();c[0]!==u&&(l.uniform1i(this.addr,u),c[0]=u),a.setTexture2DArray(o||gme,u)}function Vht(l,o){l.uniform1fv(this.addr,o)}function zht(l,o){const a=B1(o,this.size,2);l.uniform2fv(this.addr,a)}function Uht(l,o){const a=B1(o,this.size,3);l.uniform3fv(this.addr,a)}function Hht(l,o){const a=B1(o,this.size,4);l.uniform4fv(this.addr,a)}function $ht(l,o){const a=B1(o,this.size,4);l.uniformMatrix2fv(this.addr,!1,a)}function Wht(l,o){const a=B1(o,this.size,9);l.uniformMatrix3fv(this.addr,!1,a)}function Ght(l,o){const a=B1(o,this.size,16);l.uniformMatrix4fv(this.addr,!1,a)}function Qht(l,o){l.uniform1iv(this.addr,o)}function jht(l,o){l.uniform2iv(this.addr,o)}function qht(l,o){l.uniform3iv(this.addr,o)}function Zht(l,o){l.uniform4iv(this.addr,o)}function Xht(l,o){l.uniform1uiv(this.addr,o)}function Yht(l,o){l.uniform2uiv(this.addr,o)}function Kht(l,o){l.uniform3uiv(this.addr,o)}function Jht(l,o){l.uniform4uiv(this.addr,o)}function edt(l,o,a){const c=o.length,u=_I(a,c);l.uniform1iv(this.addr,u);for(let h=0;h!==c;++h)a.setTexture2D(o[h]||pme,u[h])}function tdt(l,o,a){const c=o.length,u=_I(a,c);l.uniform1iv(this.addr,u);for(let h=0;h!==c;++h)a.setTexture3D(o[h]||mme,u[h])}function ndt(l,o,a){const c=o.length,u=_I(a,c);l.uniform1iv(this.addr,u);for(let h=0;h!==c;++h)a.setTextureCube(o[h]||vme,u[h])}function idt(l,o,a){const c=o.length,u=_I(a,c);l.uniform1iv(this.addr,u);for(let h=0;h!==c;++h)a.setTexture2DArray(o[h]||gme,u[h])}class sdt{constructor(o,a,c){this.id=o,this.addr=c,this.cache=[],this.setValue=function Bht(l){switch(l){case 5126:return _ht;case 35664:return bht;case 35665:return xht;case 35666:return Cht;case 35674:return Sht;case 35675:return wht;case 35676:return Tht;case 5124:case 35670:return Oht;case 35667:case 35671:return Dht;case 35668:case 35672:return kht;case 35669:case 35673:return Mht;case 5125:return Eht;case 36294:return Aht;case 36295:return Iht;case 36296:return Pht;case 35678:case 36198:case 36298:case 36306:case 35682:return Rht;case 35679:case 36299:case 36307:return Fht;case 35680:case 36300:case 36308:case 36293:return Nht;case 36289:case 36303:case 36311:case 36292:return Lht}}(a.type)}}class odt{constructor(o,a,c){this.id=o,this.addr=c,this.cache=[],this.size=a.size,this.setValue=function rdt(l){switch(l){case 5126:return Vht;case 35664:return zht;case 35665:return Uht;case 35666:return Hht;case 35674:return $ht;case 35675:return Wht;case 35676:return Ght;case 5124:case 35670:return Qht;case 35667:case 35671:return jht;case 35668:case 35672:return qht;case 35669:case 35673:return Zht;case 5125:return Xht;case 36294:return Yht;case 36295:return Kht;case 36296:return Jht;case 35678:case 36198:case 36298:case 36306:case 35682:return edt;case 35679:case 36299:case 36307:return tdt;case 35680:case 36300:case 36308:case 36293:return ndt;case 36289:case 36303:case 36311:case 36292:return idt}}(a.type)}}class adt{constructor(o){this.id=o,this.seq=[],this.map={}}setValue(o,a,c){const u=this.seq;for(let h=0,d=u.length;h!==d;++h){const f=u[h];f.setValue(o,a[f.id],c)}}}const DH=/(\w+)(\])?(\[|\.)?/g;function Sme(l,o){l.seq.push(o),l.map[o.id]=o}function ldt(l,o,a){const c=l.name,u=c.length;for(DH.lastIndex=0;;){const h=DH.exec(c),d=DH.lastIndex;let f=h[1];const g=h[3];if("]"===h[2]&&(f|=0),void 0===g||"["===g&&d+2===u){Sme(a,void 0===g?new sdt(f,l,o):new odt(f,l,o));break}{let v=a.map[f];void 0===v&&(v=new adt(f),Sme(a,v)),a=v}}}class bI{constructor(o,a){this.seq=[],this.map={};const c=o.getProgramParameter(a,35718);for(let u=0;u<c;++u){const h=o.getActiveUniform(a,u);ldt(h,o.getUniformLocation(a,h.name),this)}}setValue(o,a,c,u){const h=this.map[a];void 0!==h&&h.setValue(o,c,u)}setOptional(o,a,c){const u=a[c];void 0!==u&&this.setValue(o,c,u)}static upload(o,a,c,u){for(let h=0,d=a.length;h!==d;++h){const f=a[h],p=c[f.id];!1!==p.needsUpdate&&f.setValue(o,p.value,u)}}static seqWithValue(o,a){const c=[];for(let u=0,h=o.length;u!==h;++u){const d=o[u];d.id in a&&c.push(d)}return c}}function wme(l,o,a){const c=l.createShader(o);return l.shaderSource(c,a),l.compileShader(c),c}let cdt=0;function Tme(l,o,a){const c=l.getShaderParameter(o,35713),u=l.getShaderInfoLog(o).trim();if(c&&""===u)return"";const h=/ERROR: 0:(\d+)/.exec(u);if(h){const d=parseInt(h[1]);return a.toUpperCase()+"\n\n"+u+"\n\n"+function udt(l,o){const a=l.split("\n"),c=[],u=Math.max(o-6,0),h=Math.min(o+6,a.length);for(let d=u;d<h;d++){const f=d+1;c.push(`${f===o?">":" "} ${f}: ${a[d]}`)}return c.join("\n")}(l.getShaderSource(o),d)}return u}function ddt(l,o){const a=function hdt(l){switch(l){case A0:return["Linear","( value )"];case ws:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",l),["Linear","( value )"]}}(o);return"vec4 "+l+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function fdt(l,o){let a;switch(o){case 1:a="Linear";break;case 2:a="Reinhard";break;case 3:a="OptimizedCineon";break;case 4:a="ACESFilmic";break;case 5:a="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",o),a="Linear"}return"vec3 "+l+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function Hw(l){return""!==l}function Ome(l,o){return l.replace(/NUM_DIR_LIGHTS/g,o.numDirLights).replace(/NUM_SPOT_LIGHTS/g,o.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,o.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,o.numPointLights).replace(/NUM_HEMI_LIGHTS/g,o.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,o.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,o.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,o.numPointLightShadows)}function Dme(l,o){return l.replace(/NUM_CLIPPING_PLANES/g,o.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,o.numClippingPlanes-o.numClipIntersection)}const vdt=/^[ \t]*#include +<([\w\d./]+)>/gm;function kH(l){return l.replace(vdt,ydt)}function ydt(l,o){const a=Zi[o];if(void 0===a)throw new Error("Can not resolve #include <"+o+">");return kH(a)}const _dt=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,bdt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function kme(l){return l.replace(bdt,Mme).replace(_dt,xdt)}function xdt(l,o,a,c){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Mme(0,o,a,c)}function Mme(l,o,a,c){let u="";for(let h=parseInt(o);h<parseInt(a);h++)u+=c.replace(/\[\s*i\s*\]/g,"[ "+h+" ]").replace(/UNROLLED_LOOP_INDEX/g,h);return u}function Eme(l){let o="precision "+l.precision+" float;\nprecision "+l.precision+" int;";return"highp"===l.precision?o+="\n#define HIGH_PRECISION":"mediump"===l.precision?o+="\n#define MEDIUM_PRECISION":"lowp"===l.precision&&(o+="\n#define LOW_PRECISION"),o}function Ddt(l,o,a,c){const u=l.getContext(),h=a.defines;let d=a.vertexShader,f=a.fragmentShader;const p=function Cdt(l){let o="SHADOWMAP_TYPE_BASIC";return 1===l.shadowMapType?o="SHADOWMAP_TYPE_PCF":2===l.shadowMapType?o="SHADOWMAP_TYPE_PCF_SOFT":3===l.shadowMapType&&(o="SHADOWMAP_TYPE_VSM"),o}(a),g=function Sdt(l){let o="ENVMAP_TYPE_CUBE";if(l.envMap)switch(l.envMapMode){case 301:case 302:o="ENVMAP_TYPE_CUBE";break;case 306:o="ENVMAP_TYPE_CUBE_UV"}return o}(a),m=function wdt(l){let o="ENVMAP_MODE_REFLECTION";return l.envMap&&302===l.envMapMode&&(o="ENVMAP_MODE_REFRACTION"),o}(a),v=function Tdt(l){let o="ENVMAP_BLENDING_NONE";if(l.envMap)switch(l.combine){case 0:o="ENVMAP_BLENDING_MULTIPLY";break;case 1:o="ENVMAP_BLENDING_MIX";break;case 2:o="ENVMAP_BLENDING_ADD"}return o}(a),y=function Odt(l){const o=l.envMapCubeUVHeight;if(null===o)return null;const a=Math.log2(o)-2,c=1/o;return{texelWidth:1/(3*Math.max(Math.pow(2,a),112)),texelHeight:c,maxMip:a}}(a),_=a.isWebGL2?"":function pdt(l){return[l.extensionDerivatives||l.envMapCubeUVHeight||l.bumpMap||l.tangentSpaceNormalMap||l.clearcoatNormalMap||l.flatShading||"physical"===l.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(l.extensionFragDepth||l.logarithmicDepthBuffer)&&l.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",l.extensionDrawBuffers&&l.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(l.extensionShaderTextureLOD||l.envMap||l.transmission)&&l.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Hw).join("\n")}(a),b=function gdt(l){const o=[];for(const a in l){const c=l[a];!1!==c&&o.push("#define "+a+" "+c)}return o.join("\n")}(h),C=u.createProgram();let x,S,w=a.glslVersion?"#version "+a.glslVersion+"\n":"";a.isRawShaderMaterial?(x=[b].filter(Hw).join("\n"),x.length>0&&(x+="\n"),S=[_,b].filter(Hw).join("\n"),S.length>0&&(S+="\n")):(x=[Eme(a),"#define SHADER_NAME "+a.shaderName,b,a.instancing?"#define USE_INSTANCING":"",a.instancingColor?"#define USE_INSTANCING_COLOR":"",a.supportsVertexTextures?"#define VERTEX_TEXTURES":"",a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+m:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",a.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.morphColors&&a.isWebGL2?"#define USE_MORPHCOLORS":"",a.morphTargetsCount>0&&a.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",a.morphTargetsCount>0&&a.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+a.morphTextureStride:"",a.morphTargetsCount>0&&a.isWebGL2?"#define MORPHTARGETS_COUNT "+a.morphTargetsCount:"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+p:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Hw).join("\n"),S=[_,Eme(a),"#define SHADER_NAME "+a.shaderName,b,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+g:"",a.envMap?"#define "+m:"",a.envMap?"#define "+v:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoat?"#define USE_CLEARCOAT":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.iridescence?"#define USE_IRIDESCENCE":"",a.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",a.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.alphaTest?"#define USE_ALPHATEST":"",a.sheen?"#define USE_SHEEN":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors||a.instancingColor?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+p:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==a.toneMapping?"#define TONE_MAPPING":"",0!==a.toneMapping?Zi.tonemapping_pars_fragment:"",0!==a.toneMapping?fdt("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.opaque?"#define OPAQUE":"",Zi.encodings_pars_fragment,ddt("linearToOutputTexel",a.outputEncoding),a.useDepthPacking?"#define DEPTH_PACKING "+a.depthPacking:"","\n"].filter(Hw).join("\n")),d=kH(d),d=Ome(d,a),d=Dme(d,a),f=kH(f),f=Ome(f,a),f=Dme(f,a),d=kme(d),f=kme(f),a.isWebGL2&&!0!==a.isRawShaderMaterial&&(w="#version 300 es\n",x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+x,S=["#define varying in","300 es"===a.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===a.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+S);const T=w+S+f,M=wme(u,35633,w+x+d),A=wme(u,35632,T);if(u.attachShader(C,M),u.attachShader(C,A),void 0!==a.index0AttributeName?u.bindAttribLocation(C,0,a.index0AttributeName):!0===a.morphTargets&&u.bindAttribLocation(C,0,"position"),u.linkProgram(C),l.debug.checkShaderErrors){const P=u.getProgramInfoLog(C).trim(),B=u.getShaderInfoLog(M).trim(),V=u.getShaderInfoLog(A).trim();let Q=!0,j=!0;if(!1===u.getProgramParameter(C,35714)){Q=!1;const N=Tme(u,M,"vertex"),U=Tme(u,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+u.getError()+" - VALIDATE_STATUS "+u.getProgramParameter(C,35715)+"\n\nProgram Info Log: "+P+"\n"+N+"\n"+U)}else""!==P?console.warn("THREE.WebGLProgram: Program Info Log:",P):(""===B||""===V)&&(j=!1);j&&(this.diagnostics={runnable:Q,programLog:P,vertexShader:{log:B,prefix:x},fragmentShader:{log:V,prefix:S}})}let I,E;return u.deleteShader(M),u.deleteShader(A),this.getUniforms=function(){return void 0===I&&(I=new bI(u,C)),I},this.getAttributes=function(){return void 0===E&&(E=function mdt(l,o){const a={},c=l.getProgramParameter(o,35721);for(let u=0;u<c;u++){const h=l.getActiveAttrib(o,u),d=h.name;let f=1;35674===h.type&&(f=2),35675===h.type&&(f=3),35676===h.type&&(f=4),a[d]={type:h.type,location:l.getAttribLocation(o,d),locationSize:f}}return a}(u,C)),E},this.destroy=function(){c.releaseStatesOfProgram(this),u.deleteProgram(C),this.program=void 0},this.name=a.shaderName,this.id=cdt++,this.cacheKey=o,this.usedTimes=1,this.program=C,this.vertexShader=M,this.fragmentShader=A,this}let kdt=0;class Mdt{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(o){const c=o.fragmentShader,u=this._getShaderStage(o.vertexShader),h=this._getShaderStage(c),d=this._getShaderCacheForMaterial(o);return!1===d.has(u)&&(d.add(u),u.usedTimes++),!1===d.has(h)&&(d.add(h),h.usedTimes++),this}remove(o){const a=this.materialCache.get(o);for(const c of a)c.usedTimes--,0===c.usedTimes&&this.shaderCache.delete(c.code);return this.materialCache.delete(o),this}getVertexShaderID(o){return this._getShaderStage(o.vertexShader).id}getFragmentShaderID(o){return this._getShaderStage(o.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(o){const a=this.materialCache;return!1===a.has(o)&&a.set(o,new Set),a.get(o)}_getShaderStage(o){const a=this.shaderCache;if(!1===a.has(o)){const c=new Edt(o);a.set(o,c)}return a.get(o)}}class Edt{constructor(o){this.id=kdt++,this.code=o,this.usedTimes=0}}function Adt(l,o,a,c,u,h,d){const f=new cH,p=new Mdt,g=[],m=u.isWebGL2,v=u.logarithmicDepthBuffer,y=u.vertexTextures;let _=u.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function C(E,P,B,V,Q){const j=V.fog,N=Q.geometry,z=(E.isMeshStandardMaterial?a:o).get(E.envMap||(E.isMeshStandardMaterial?V.environment:null)),$=z&&306===z.mapping?z.image.height:null,H=b[E.type];null!==E.precision&&(_=u.getMaxPrecision(E.precision),_!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",_,"instead."));const G=N.morphAttributes.position||N.morphAttributes.normal||N.morphAttributes.color,W=void 0!==G?G.length:0;let K,ae,se,Ce,X=0;if(void 0!==N.morphAttributes.position&&(X=1),void 0!==N.morphAttributes.normal&&(X=2),void 0!==N.morphAttributes.color&&(X=3),H){const Xe=Td[H];K=Xe.vertexShader,ae=Xe.fragmentShader}else K=E.vertexShader,ae=E.fragmentShader,p.update(E),se=p.getVertexShaderID(E),Ce=p.getFragmentShaderID(E);const ve=l.getRenderTarget(),$e=E.clearcoat>0,Me=E.iridescence>0;return{isWebGL2:m,shaderID:H,shaderName:E.type,vertexShader:K,fragmentShader:ae,defines:E.defines,customVertexShaderID:se,customFragmentShaderID:Ce,isRawShaderMaterial:!0===E.isRawShaderMaterial,glslVersion:E.glslVersion,precision:_,instancing:!0===Q.isInstancedMesh,instancingColor:!0===Q.isInstancedMesh&&null!==Q.instanceColor,supportsVertexTextures:y,outputEncoding:null===ve?l.outputEncoding:!0===ve.isXRRenderTarget?ve.texture.encoding:A0,map:!!E.map,matcap:!!E.matcap,envMap:!!z,envMapMode:z&&z.mapping,envMapCubeUVHeight:$,lightMap:!!E.lightMap,aoMap:!!E.aoMap,emissiveMap:!!E.emissiveMap,bumpMap:!!E.bumpMap,normalMap:!!E.normalMap,objectSpaceNormalMap:1===E.normalMapType,tangentSpaceNormalMap:0===E.normalMapType,decodeVideoTexture:!!E.map&&!0===E.map.isVideoTexture&&E.map.encoding===ws,clearcoat:$e,clearcoatMap:$e&&!!E.clearcoatMap,clearcoatRoughnessMap:$e&&!!E.clearcoatRoughnessMap,clearcoatNormalMap:$e&&!!E.clearcoatNormalMap,iridescence:Me,iridescenceMap:Me&&!!E.iridescenceMap,iridescenceThicknessMap:Me&&!!E.iridescenceThicknessMap,displacementMap:!!E.displacementMap,roughnessMap:!!E.roughnessMap,metalnessMap:!!E.metalnessMap,specularMap:!!E.specularMap,specularIntensityMap:!!E.specularIntensityMap,specularColorMap:!!E.specularColorMap,opaque:!1===E.transparent&&1===E.blending,alphaMap:!!E.alphaMap,alphaTest:E.alphaTest>0,gradientMap:!!E.gradientMap,sheen:E.sheen>0,sheenColorMap:!!E.sheenColorMap,sheenRoughnessMap:!!E.sheenRoughnessMap,transmission:E.transmission>0,transmissionMap:!!E.transmissionMap,thicknessMap:!!E.thicknessMap,combine:E.combine,vertexTangents:!!E.normalMap&&!!N.attributes.tangent,vertexColors:E.vertexColors,vertexAlphas:!0===E.vertexColors&&!!N.attributes.color&&4===N.attributes.color.itemSize,vertexUvs:!!(E.map||E.bumpMap||E.normalMap||E.specularMap||E.alphaMap||E.emissiveMap||E.roughnessMap||E.metalnessMap||E.clearcoatMap||E.clearcoatRoughnessMap||E.clearcoatNormalMap||E.iridescenceMap||E.iridescenceThicknessMap||E.displacementMap||E.transmissionMap||E.thicknessMap||E.specularIntensityMap||E.specularColorMap||E.sheenColorMap||E.sheenRoughnessMap),uvsVertexOnly:!(E.map||E.bumpMap||E.normalMap||E.specularMap||E.alphaMap||E.emissiveMap||E.roughnessMap||E.metalnessMap||E.clearcoatNormalMap||E.iridescenceMap||E.iridescenceThicknessMap||E.transmission>0||E.transmissionMap||E.thicknessMap||E.specularIntensityMap||E.specularColorMap||E.sheen>0||E.sheenColorMap||E.sheenRoughnessMap||!E.displacementMap),fog:!!j,useFog:!0===E.fog,fogExp2:j&&j.isFogExp2,flatShading:!!E.flatShading,sizeAttenuation:E.sizeAttenuation,logarithmicDepthBuffer:v,skinning:!0===Q.isSkinnedMesh,morphTargets:void 0!==N.morphAttributes.position,morphNormals:void 0!==N.morphAttributes.normal,morphColors:void 0!==N.morphAttributes.color,morphTargetsCount:W,morphTextureStride:X,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numClippingPlanes:d.numPlanes,numClipIntersection:d.numIntersection,dithering:E.dithering,shadowMapEnabled:l.shadowMap.enabled&&B.length>0,shadowMapType:l.shadowMap.type,toneMapping:E.toneMapped?l.toneMapping:0,physicallyCorrectLights:l.physicallyCorrectLights,premultipliedAlpha:E.premultipliedAlpha,doubleSided:2===E.side,flipSided:1===E.side,useDepthPacking:!!E.depthPacking,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionDerivatives:E.extensions&&E.extensions.derivatives,extensionFragDepth:E.extensions&&E.extensions.fragDepth,extensionDrawBuffers:E.extensions&&E.extensions.drawBuffers,extensionShaderTextureLOD:E.extensions&&E.extensions.shaderTextureLOD,rendererExtensionFragDepth:m||c.has("EXT_frag_depth"),rendererExtensionDrawBuffers:m||c.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:m||c.has("EXT_shader_texture_lod"),customProgramCacheKey:E.customProgramCacheKey()}},getProgramCacheKey:function x(E){const P=[];if(E.shaderID?P.push(E.shaderID):(P.push(E.customVertexShaderID),P.push(E.customFragmentShaderID)),void 0!==E.defines)for(const B in E.defines)P.push(B),P.push(E.defines[B]);return!1===E.isRawShaderMaterial&&(function S(E,P){E.push(P.precision),E.push(P.outputEncoding),E.push(P.envMapMode),E.push(P.envMapCubeUVHeight),E.push(P.combine),E.push(P.vertexUvs),E.push(P.fogExp2),E.push(P.sizeAttenuation),E.push(P.morphTargetsCount),E.push(P.morphAttributeCount),E.push(P.numDirLights),E.push(P.numPointLights),E.push(P.numSpotLights),E.push(P.numHemiLights),E.push(P.numRectAreaLights),E.push(P.numDirLightShadows),E.push(P.numPointLightShadows),E.push(P.numSpotLightShadows),E.push(P.shadowMapType),E.push(P.toneMapping),E.push(P.numClippingPlanes),E.push(P.numClipIntersection),E.push(P.depthPacking)}(P,E),function w(E,P){f.disableAll(),P.isWebGL2&&f.enable(0),P.supportsVertexTextures&&f.enable(1),P.instancing&&f.enable(2),P.instancingColor&&f.enable(3),P.map&&f.enable(4),P.matcap&&f.enable(5),P.envMap&&f.enable(6),P.lightMap&&f.enable(7),P.aoMap&&f.enable(8),P.emissiveMap&&f.enable(9),P.bumpMap&&f.enable(10),P.normalMap&&f.enable(11),P.objectSpaceNormalMap&&f.enable(12),P.tangentSpaceNormalMap&&f.enable(13),P.clearcoat&&f.enable(14),P.clearcoatMap&&f.enable(15),P.clearcoatRoughnessMap&&f.enable(16),P.clearcoatNormalMap&&f.enable(17),P.iridescence&&f.enable(18),P.iridescenceMap&&f.enable(19),P.iridescenceThicknessMap&&f.enable(20),P.displacementMap&&f.enable(21),P.specularMap&&f.enable(22),P.roughnessMap&&f.enable(23),P.metalnessMap&&f.enable(24),P.gradientMap&&f.enable(25),P.alphaMap&&f.enable(26),P.alphaTest&&f.enable(27),P.vertexColors&&f.enable(28),P.vertexAlphas&&f.enable(29),P.vertexUvs&&f.enable(30),P.vertexTangents&&f.enable(31),P.uvsVertexOnly&&f.enable(32),P.fog&&f.enable(33),E.push(f.mask),f.disableAll(),P.useFog&&f.enable(0),P.flatShading&&f.enable(1),P.logarithmicDepthBuffer&&f.enable(2),P.skinning&&f.enable(3),P.morphTargets&&f.enable(4),P.morphNormals&&f.enable(5),P.morphColors&&f.enable(6),P.premultipliedAlpha&&f.enable(7),P.shadowMapEnabled&&f.enable(8),P.physicallyCorrectLights&&f.enable(9),P.doubleSided&&f.enable(10),P.flipSided&&f.enable(11),P.useDepthPacking&&f.enable(12),P.dithering&&f.enable(13),P.specularIntensityMap&&f.enable(14),P.specularColorMap&&f.enable(15),P.transmission&&f.enable(16),P.transmissionMap&&f.enable(17),P.thicknessMap&&f.enable(18),P.sheen&&f.enable(19),P.sheenColorMap&&f.enable(20),P.sheenRoughnessMap&&f.enable(21),P.decodeVideoTexture&&f.enable(22),P.opaque&&f.enable(23),E.push(f.mask)}(P,E),P.push(l.outputEncoding)),P.push(E.customProgramCacheKey),P.join()},getUniforms:function O(E){const P=b[E.type];let B;return B=P?gI.clone(Td[P].uniforms):E.uniforms,B},acquireProgram:function T(E,P){let B;for(let V=0,Q=g.length;V<Q;V++){const j=g[V];if(j.cacheKey===P){B=j,++B.usedTimes;break}}return void 0===B&&(B=new Ddt(l,P,E,h),g.push(B)),B},releaseProgram:function M(E){if(0==--E.usedTimes){const P=g.indexOf(E);g[P]=g[g.length-1],g.pop(),E.destroy()}},releaseShaderCache:function A(E){p.remove(E)},programs:g,dispose:function I(){p.dispose()}}}function Idt(){let l=new WeakMap;return{get:function o(h){let d=l.get(h);return void 0===d&&(d={},l.set(h,d)),d},remove:function a(h){l.delete(h)},update:function c(h,d,f){l.get(h)[d]=f},dispose:function u(){l=new WeakMap}}}function Pdt(l,o){return l.groupOrder!==o.groupOrder?l.groupOrder-o.groupOrder:l.renderOrder!==o.renderOrder?l.renderOrder-o.renderOrder:l.material.id!==o.material.id?l.material.id-o.material.id:l.z!==o.z?l.z-o.z:l.id-o.id}function Ame(l,o){return l.groupOrder!==o.groupOrder?l.groupOrder-o.groupOrder:l.renderOrder!==o.renderOrder?l.renderOrder-o.renderOrder:l.z!==o.z?o.z-l.z:l.id-o.id}function Ime(){const l=[];let o=0;const a=[],c=[],u=[];function d(v,y,_,b,C,x){let S=l[o];return void 0===S?(S={id:v.id,object:v,geometry:y,material:_,groupOrder:b,renderOrder:v.renderOrder,z:C,group:x},l[o]=S):(S.id=v.id,S.object=v,S.geometry=y,S.material=_,S.groupOrder=b,S.renderOrder=v.renderOrder,S.z=C,S.group=x),o++,S}return{opaque:a,transmissive:c,transparent:u,init:function h(){o=0,a.length=0,c.length=0,u.length=0},push:function f(v,y,_,b,C,x){const S=d(v,y,_,b,C,x);_.transmission>0?c.push(S):!0===_.transparent?u.push(S):a.push(S)},unshift:function p(v,y,_,b,C,x){const S=d(v,y,_,b,C,x);_.transmission>0?c.unshift(S):!0===_.transparent?u.unshift(S):a.unshift(S)},finish:function m(){for(let v=o,y=l.length;v<y;v++){const _=l[v];if(null===_.id)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}},sort:function g(v,y){a.length>1&&a.sort(v||Pdt),c.length>1&&c.sort(y||Ame),u.length>1&&u.sort(y||Ame)}}}function Rdt(){let l=new WeakMap;return{get:function o(c,u){let h;return!1===l.has(c)?(h=new Ime,l.set(c,[h])):u>=l.get(c).length?(h=new Ime,l.get(c).push(h)):h=l.get(c)[u],h},dispose:function a(){l=new WeakMap}}}function Fdt(){const l={};return{get:function(o){if(void 0!==l[o.id])return l[o.id];let a;switch(o.type){case"DirectionalLight":a={direction:new te,color:new sn};break;case"SpotLight":a={position:new te,direction:new te,color:new sn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":a={position:new te,color:new sn,distance:0,decay:0};break;case"HemisphereLight":a={direction:new te,skyColor:new sn,groundColor:new sn};break;case"RectAreaLight":a={color:new sn,position:new te,halfWidth:new te,halfHeight:new te}}return l[o.id]=a,a}}}let Ldt=0;function Bdt(l,o){return(o.castShadow?1:0)-(l.castShadow?1:0)}function Vdt(l,o){const a=new Fdt,c=function Ndt(){const l={};return{get:function(o){if(void 0!==l[o.id])return l[o.id];let a;switch(o.type){case"DirectionalLight":case"SpotLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt};break;case"PointLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt,shadowCameraNear:1,shadowCameraFar:1e3}}return l[o.id]=a,a}}}(),u={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let m=0;m<9;m++)u.probe.push(new te);const h=new te,d=new ci,f=new ci;return{setup:function p(m,v){let y=0,_=0,b=0;for(let P=0;P<9;P++)u.probe[P].set(0,0,0);let C=0,x=0,S=0,w=0,O=0,T=0,M=0,A=0;m.sort(Bdt);const I=!0!==v?Math.PI:1;for(let P=0,B=m.length;P<B;P++){const V=m[P],Q=V.color,j=V.intensity,N=V.distance,U=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)y+=Q.r*j*I,_+=Q.g*j*I,b+=Q.b*j*I;else if(V.isLightProbe)for(let z=0;z<9;z++)u.probe[z].addScaledVector(V.sh.coefficients[z],j);else if(V.isDirectionalLight){const z=a.get(V);if(z.color.copy(V.color).multiplyScalar(V.intensity*I),V.castShadow){const $=V.shadow,H=c.get(V);H.shadowBias=$.bias,H.shadowNormalBias=$.normalBias,H.shadowRadius=$.radius,H.shadowMapSize=$.mapSize,u.directionalShadow[C]=H,u.directionalShadowMap[C]=U,u.directionalShadowMatrix[C]=V.shadow.matrix,T++}u.directional[C]=z,C++}else if(V.isSpotLight){const z=a.get(V);if(z.position.setFromMatrixPosition(V.matrixWorld),z.color.copy(Q).multiplyScalar(j*I),z.distance=N,z.coneCos=Math.cos(V.angle),z.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),z.decay=V.decay,V.castShadow){const $=V.shadow,H=c.get(V);H.shadowBias=$.bias,H.shadowNormalBias=$.normalBias,H.shadowRadius=$.radius,H.shadowMapSize=$.mapSize,u.spotShadow[S]=H,u.spotShadowMap[S]=U,u.spotShadowMatrix[S]=V.shadow.matrix,A++}u.spot[S]=z,S++}else if(V.isRectAreaLight){const z=a.get(V);z.color.copy(Q).multiplyScalar(j),z.halfWidth.set(.5*V.width,0,0),z.halfHeight.set(0,.5*V.height,0),u.rectArea[w]=z,w++}else if(V.isPointLight){const z=a.get(V);if(z.color.copy(V.color).multiplyScalar(V.intensity*I),z.distance=V.distance,z.decay=V.decay,V.castShadow){const $=V.shadow,H=c.get(V);H.shadowBias=$.bias,H.shadowNormalBias=$.normalBias,H.shadowRadius=$.radius,H.shadowMapSize=$.mapSize,H.shadowCameraNear=$.camera.near,H.shadowCameraFar=$.camera.far,u.pointShadow[x]=H,u.pointShadowMap[x]=U,u.pointShadowMatrix[x]=V.shadow.matrix,M++}u.point[x]=z,x++}else if(V.isHemisphereLight){const z=a.get(V);z.skyColor.copy(V.color).multiplyScalar(j*I),z.groundColor.copy(V.groundColor).multiplyScalar(j*I),u.hemi[O]=z,O++}}w>0&&(o.isWebGL2||!0===l.has("OES_texture_float_linear")?(u.rectAreaLTC1=rn.LTC_FLOAT_1,u.rectAreaLTC2=rn.LTC_FLOAT_2):!0===l.has("OES_texture_half_float_linear")?(u.rectAreaLTC1=rn.LTC_HALF_1,u.rectAreaLTC2=rn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),u.ambient[0]=y,u.ambient[1]=_,u.ambient[2]=b;const E=u.hash;(E.directionalLength!==C||E.pointLength!==x||E.spotLength!==S||E.rectAreaLength!==w||E.hemiLength!==O||E.numDirectionalShadows!==T||E.numPointShadows!==M||E.numSpotShadows!==A)&&(u.directional.length=C,u.spot.length=S,u.rectArea.length=w,u.point.length=x,u.hemi.length=O,u.directionalShadow.length=T,u.directionalShadowMap.length=T,u.pointShadow.length=M,u.pointShadowMap.length=M,u.spotShadow.length=A,u.spotShadowMap.length=A,u.directionalShadowMatrix.length=T,u.pointShadowMatrix.length=M,u.spotShadowMatrix.length=A,E.directionalLength=C,E.pointLength=x,E.spotLength=S,E.rectAreaLength=w,E.hemiLength=O,E.numDirectionalShadows=T,E.numPointShadows=M,E.numSpotShadows=A,u.version=Ldt++)},setupView:function g(m,v){let y=0,_=0,b=0,C=0,x=0;const S=v.matrixWorldInverse;for(let w=0,O=m.length;w<O;w++){const T=m[w];if(T.isDirectionalLight){const M=u.directional[y];M.direction.setFromMatrixPosition(T.matrixWorld),h.setFromMatrixPosition(T.target.matrixWorld),M.direction.sub(h),M.direction.transformDirection(S),y++}else if(T.isSpotLight){const M=u.spot[b];M.position.setFromMatrixPosition(T.matrixWorld),M.position.applyMatrix4(S),M.direction.setFromMatrixPosition(T.matrixWorld),h.setFromMatrixPosition(T.target.matrixWorld),M.direction.sub(h),M.direction.transformDirection(S),b++}else if(T.isRectAreaLight){const M=u.rectArea[C];M.position.setFromMatrixPosition(T.matrixWorld),M.position.applyMatrix4(S),f.identity(),d.copy(T.matrixWorld),d.premultiply(S),f.extractRotation(d),M.halfWidth.set(.5*T.width,0,0),M.halfHeight.set(0,.5*T.height,0),M.halfWidth.applyMatrix4(f),M.halfHeight.applyMatrix4(f),C++}else if(T.isPointLight){const M=u.point[_];M.position.setFromMatrixPosition(T.matrixWorld),M.position.applyMatrix4(S),_++}else if(T.isHemisphereLight){const M=u.hemi[x];M.direction.setFromMatrixPosition(T.matrixWorld),M.direction.transformDirection(S),x++}}},state:u}}function Pme(l,o){const a=new Vdt(l,o),c=[],u=[];return{init:function h(){c.length=0,u.length=0},state:{lightsArray:c,shadowsArray:u,lights:a},setupLights:function p(v){a.setup(c,v)},setupLightsView:function g(v){a.setupView(c,v)},pushLight:function d(v){c.push(v)},pushShadow:function f(v){u.push(v)}}}function zdt(l,o){let a=new WeakMap;return{get:function c(h,d=0){let f;return!1===a.has(h)?(f=new Pme(l,o),a.set(h,[f])):d>=a.get(h).length?(f=new Pme(l,o),a.get(h).push(f)):f=a.get(h)[d],f},dispose:function u(){a=new WeakMap}}}class MH extends B0{constructor(o){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(o)}copy(o){return super.copy(o),this.depthPacking=o.depthPacking,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this}}class Rme extends B0{constructor(o){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new te,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(o)}copy(o){return super.copy(o),this.referencePosition.copy(o.referencePosition),this.nearDistance=o.nearDistance,this.farDistance=o.farDistance,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this}}function $dt(l,o,a){let c=new CH;const u=new dt,h=new dt,d=new er,f=new MH({depthPacking:3201}),p=new Rme,g={},m=a.maxTextureSize,v={0:1,1:0,2:2},y=new Ia({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new dt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const b=new Ai;b.setAttribute("position",new Ts(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new Ki(b,y),x=this;function S(T,M){const A=o.update(C);y.defines.VSM_SAMPLES!==T.blurSamples&&(y.defines.VSM_SAMPLES=T.blurSamples,_.defines.VSM_SAMPLES=T.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),null===T.mapPass&&(T.mapPass=new dl(u.x,u.y)),y.uniforms.shadow_pass.value=T.map.texture,y.uniforms.resolution.value=T.mapSize,y.uniforms.radius.value=T.radius,l.setRenderTarget(T.mapPass),l.clear(),l.renderBufferDirect(M,null,A,y,C,null),_.uniforms.shadow_pass.value=T.mapPass.texture,_.uniforms.resolution.value=T.mapSize,_.uniforms.radius.value=T.radius,l.setRenderTarget(T.map),l.clear(),l.renderBufferDirect(M,null,A,_,C,null)}function w(T,M,A,I,E,P){let B=null;const V=!0===A.isPointLight?T.customDistanceMaterial:T.customDepthMaterial;if(B=void 0!==V?V:!0===A.isPointLight?p:f,l.localClippingEnabled&&!0===M.clipShadows&&Array.isArray(M.clippingPlanes)&&0!==M.clippingPlanes.length||M.displacementMap&&0!==M.displacementScale||M.alphaMap&&M.alphaTest>0){const Q=B.uuid,j=M.uuid;let N=g[Q];void 0===N&&(N={},g[Q]=N);let U=N[j];void 0===U&&(U=B.clone(),N[j]=U),B=U}return B.visible=M.visible,B.wireframe=M.wireframe,B.side=3===P?null!==M.shadowSide?M.shadowSide:M.side:null!==M.shadowSide?M.shadowSide:v[M.side],B.alphaMap=M.alphaMap,B.alphaTest=M.alphaTest,B.clipShadows=M.clipShadows,B.clippingPlanes=M.clippingPlanes,B.clipIntersection=M.clipIntersection,B.displacementMap=M.displacementMap,B.displacementScale=M.displacementScale,B.displacementBias=M.displacementBias,B.wireframeLinewidth=M.wireframeLinewidth,B.linewidth=M.linewidth,!0===A.isPointLight&&!0===B.isMeshDistanceMaterial&&(B.referencePosition.setFromMatrixPosition(A.matrixWorld),B.nearDistance=I,B.farDistance=E),B}function O(T,M,A,I,E){if(!1===T.visible)return;if(T.layers.test(M.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&3===E)&&(!T.frustumCulled||c.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,T.matrixWorld);const V=o.update(T),Q=T.material;if(Array.isArray(Q)){const j=V.groups;for(let N=0,U=j.length;N<U;N++){const z=j[N],$=Q[z.materialIndex];if($&&$.visible){const H=w(T,$,I,A.near,A.far,E);l.renderBufferDirect(A,null,V,H,T,z)}}}else if(Q.visible){const j=w(T,Q,I,A.near,A.far,E);l.renderBufferDirect(A,null,V,j,T,null)}}const B=T.children;for(let V=0,Q=B.length;V<Q;V++)O(B[V],M,A,I,E)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(T,M,A){if(!1===x.enabled||!1===x.autoUpdate&&!1===x.needsUpdate||0===T.length)return;const I=l.getRenderTarget(),E=l.getActiveCubeFace(),P=l.getActiveMipmapLevel(),B=l.state;B.setBlending(0),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);for(let V=0,Q=T.length;V<Q;V++){const j=T[V],N=j.shadow;if(void 0===N){console.warn("THREE.WebGLShadowMap:",j,"has no shadow.");continue}if(!1===N.autoUpdate&&!1===N.needsUpdate)continue;u.copy(N.mapSize);const U=N.getFrameExtents();u.multiply(U),h.copy(N.mapSize),(u.x>m||u.y>m)&&(u.x>m&&(h.x=Math.floor(m/U.x),u.x=h.x*U.x,N.mapSize.x=h.x),u.y>m&&(h.y=Math.floor(m/U.y),u.y=h.y*U.y,N.mapSize.y=h.y)),null===N.map&&(N.map=new dl(u.x,u.y,3!==this.type?{minFilter:Ao,magFilter:Ao}:{}),N.map.texture.name=j.name+".shadowMap",N.camera.updateProjectionMatrix()),l.setRenderTarget(N.map),l.clear();const z=N.getViewportCount();for(let $=0;$<z;$++){const H=N.getViewport($);d.set(h.x*H.x,h.y*H.y,h.x*H.z,h.y*H.w),B.viewport(d),N.updateMatrices(j,$),c=N.getFrustum(),O(M,A,N.camera,j,this.type)}!0!==N.isPointLightShadow&&3===this.type&&S(N,A),N.needsUpdate=!1}x.needsUpdate=!1,l.setRenderTarget(I,E,P)}}function Wdt(l,o,a){const c=a.isWebGL2,f=new function u(){let Ee=!1;const nn=new er;let Kt=null;const oi=new er(0,0,0,0);return{setMask:function(In){Kt!==In&&!Ee&&(l.colorMask(In,In,In,In),Kt=In)},setLocked:function(In){Ee=In},setClear:function(In,pi,Xt,gi,Mr){!0===Mr&&(In*=gi,pi*=gi,Xt*=gi),nn.set(In,pi,Xt,gi),!1===oi.equals(nn)&&(l.clearColor(In,pi,Xt,gi),oi.copy(nn))},reset:function(){Ee=!1,Kt=null,oi.set(-1,0,0,0)}}},p=new function h(){let Ee=!1,nn=null,Kt=null,oi=null;return{setTest:function(In){In?Ce(2929):ve(2929)},setMask:function(In){nn!==In&&!Ee&&(l.depthMask(In),nn=In)},setFunc:function(In){if(Kt!==In){if(In)switch(In){case 0:l.depthFunc(512);break;case 1:l.depthFunc(519);break;case 2:l.depthFunc(513);break;case 3:default:l.depthFunc(515);break;case 4:l.depthFunc(514);break;case 5:l.depthFunc(518);break;case 6:l.depthFunc(516);break;case 7:l.depthFunc(517)}else l.depthFunc(515);Kt=In}},setLocked:function(In){Ee=In},setClear:function(In){oi!==In&&(l.clearDepth(In),oi=In)},reset:function(){Ee=!1,nn=null,Kt=null,oi=null}}},g=new function d(){let Ee=!1,nn=null,Kt=null,oi=null,In=null,pi=null,Xt=null,gi=null,Mr=null;return{setTest:function(Er){Ee||(Er?Ce(2960):ve(2960))},setMask:function(Er){nn!==Er&&!Ee&&(l.stencilMask(Er),nn=Er)},setFunc:function(Er,ml,Rd){(Kt!==Er||oi!==ml||In!==Rd)&&(l.stencilFunc(Er,ml,Rd),Kt=Er,oi=ml,In=Rd)},setOp:function(Er,ml,Rd){(pi!==Er||Xt!==ml||gi!==Rd)&&(l.stencilOp(Er,ml,Rd),pi=Er,Xt=ml,gi=Rd)},setLocked:function(Er){Ee=Er},setClear:function(Er){Mr!==Er&&(l.clearStencil(Er),Mr=Er)},reset:function(){Ee=!1,nn=null,Kt=null,oi=null,In=null,pi=null,Xt=null,gi=null,Mr=null}}};let m={},v={},y=new WeakMap,_=[],b=null,C=!1,x=null,S=null,w=null,O=null,T=null,M=null,A=null,I=!1,E=null,P=null,B=null,V=null,Q=null;const j=l.getParameter(35661);let N=!1,U=0;const z=l.getParameter(7938);-1!==z.indexOf("WebGL")?(U=parseFloat(/^WebGL (\d)/.exec(z)[1]),N=U>=1):-1!==z.indexOf("OpenGL ES")&&(U=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),N=U>=2);let $=null,H={};const G=l.getParameter(3088),W=l.getParameter(2978),X=(new er).fromArray(G),K=(new er).fromArray(W);function ae(Ee,nn,Kt){const oi=new Uint8Array(4),In=l.createTexture();l.bindTexture(Ee,In),l.texParameteri(Ee,10241,9728),l.texParameteri(Ee,10240,9728);for(let pi=0;pi<Kt;pi++)l.texImage2D(nn+pi,0,6408,1,1,0,6408,5121,oi);return In}const se={};function Ce(Ee){!0!==m[Ee]&&(l.enable(Ee),m[Ee]=!0)}function ve(Ee){!1!==m[Ee]&&(l.disable(Ee),m[Ee]=!1)}se[3553]=ae(3553,3553,1),se[34067]=ae(34067,34069,6),f.setClear(0,0,0,1),p.setClear(1),g.setClear(0),Ce(2929),p.setFunc(3),Ye(!1),nt(1),Ce(2884),ue(0);const Ie={100:32774,101:32778,102:32779};if(c)Ie[103]=32775,Ie[104]=32776;else{const Ee=o.get("EXT_blend_minmax");null!==Ee&&(Ie[103]=Ee.MIN_EXT,Ie[104]=Ee.MAX_EXT)}const Xe={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function ue(Ee,nn,Kt,oi,In,pi,Xt,gi){if(0!==Ee){if(!1===C&&(Ce(3042),C=!0),5===Ee)In=In||nn,pi=pi||Kt,Xt=Xt||oi,(nn!==S||In!==T)&&(l.blendEquationSeparate(Ie[nn],Ie[In]),S=nn,T=In),(Kt!==w||oi!==O||pi!==M||Xt!==A)&&(l.blendFuncSeparate(Xe[Kt],Xe[oi],Xe[pi],Xe[Xt]),w=Kt,O=oi,M=pi,A=Xt),x=Ee,I=null;else if(Ee!==x||gi!==I){if((100!==S||100!==T)&&(l.blendEquation(32774),S=100,T=100),gi)switch(Ee){case 1:l.blendFuncSeparate(1,771,1,771);break;case 2:l.blendFunc(1,1);break;case 3:l.blendFuncSeparate(0,769,0,1);break;case 4:l.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ee)}else switch(Ee){case 1:l.blendFuncSeparate(770,771,1,771);break;case 2:l.blendFunc(770,1);break;case 3:l.blendFuncSeparate(0,769,0,1);break;case 4:l.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ee)}w=null,O=null,M=null,A=null,x=Ee,I=gi}}else!0===C&&(ve(3042),C=!1)}function Ye(Ee){E!==Ee&&(l.frontFace(Ee?2304:2305),E=Ee)}function nt(Ee){0!==Ee?(Ce(2884),Ee!==P&&l.cullFace(1===Ee?1029:2===Ee?1028:1032)):ve(2884),P=Ee}function we(Ee,nn,Kt){Ee?(Ce(32823),(V!==nn||Q!==Kt)&&(l.polygonOffset(nn,Kt),V=nn,Q=Kt)):ve(32823)}function Bt(Ee){void 0===Ee&&(Ee=33984+j-1),$!==Ee&&(l.activeTexture(Ee),$=Ee)}return{buffers:{color:f,depth:p,stencil:g},enable:Ce,disable:ve,bindFramebuffer:function Oe(Ee,nn){return v[Ee]!==nn&&(l.bindFramebuffer(Ee,nn),v[Ee]=nn,c&&(36009===Ee&&(v[36160]=nn),36160===Ee&&(v[36009]=nn)),!0)},drawBuffers:function $e(Ee,nn){let Kt=_,oi=!1;if(Ee)if(Kt=y.get(nn),void 0===Kt&&(Kt=[],y.set(nn,Kt)),Ee.isWebGLMultipleRenderTargets){const In=Ee.texture;if(Kt.length!==In.length||36064!==Kt[0]){for(let pi=0,Xt=In.length;pi<Xt;pi++)Kt[pi]=36064+pi;Kt.length=In.length,oi=!0}}else 36064!==Kt[0]&&(Kt[0]=36064,oi=!0);else 1029!==Kt[0]&&(Kt[0]=1029,oi=!0);oi&&(a.isWebGL2?l.drawBuffers(Kt):o.get("WEBGL_draw_buffers").drawBuffersWEBGL(Kt))},useProgram:function Me(Ee){return b!==Ee&&(l.useProgram(Ee),b=Ee,!0)},setBlending:ue,setMaterial:function Re(Ee,nn){2===Ee.side?ve(2884):Ce(2884);let Kt=1===Ee.side;nn&&(Kt=!Kt),Ye(Kt),1===Ee.blending&&!1===Ee.transparent?ue(0):ue(Ee.blending,Ee.blendEquation,Ee.blendSrc,Ee.blendDst,Ee.blendEquationAlpha,Ee.blendSrcAlpha,Ee.blendDstAlpha,Ee.premultipliedAlpha),p.setFunc(Ee.depthFunc),p.setTest(Ee.depthTest),p.setMask(Ee.depthWrite),f.setMask(Ee.colorWrite);const oi=Ee.stencilWrite;g.setTest(oi),oi&&(g.setMask(Ee.stencilWriteMask),g.setFunc(Ee.stencilFunc,Ee.stencilRef,Ee.stencilFuncMask),g.setOp(Ee.stencilFail,Ee.stencilZFail,Ee.stencilZPass)),we(Ee.polygonOffset,Ee.polygonOffsetFactor,Ee.polygonOffsetUnits),!0===Ee.alphaToCoverage?Ce(32926):ve(32926)},setFlipSided:Ye,setCullFace:nt,setLineWidth:function Qe(Ee){Ee!==B&&(N&&l.lineWidth(Ee),B=Ee)},setPolygonOffset:we,setScissorTest:function We(Ee){Ee?Ce(3089):ve(3089)},activeTexture:Bt,bindTexture:function bn(Ee,nn){null===$&&Bt();let Kt=H[$];void 0===Kt&&(Kt={type:void 0,texture:void 0},H[$]=Kt),(Kt.type!==Ee||Kt.texture!==nn)&&(l.bindTexture(Ee,nn||se[Ee]),Kt.type=Ee,Kt.texture=nn)},unbindTexture:function Ln(){const Ee=H[$];void 0!==Ee&&void 0!==Ee.type&&(l.bindTexture(Ee.type,null),Ee.type=void 0,Ee.texture=void 0)},compressedTexImage2D:function he(){try{l.compressedTexImage2D.apply(l,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},texImage2D:function Rt(){try{l.texImage2D.apply(l,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},texImage3D:function je(){try{l.texImage3D.apply(l,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},texStorage2D:function Ut(){try{l.texStorage2D.apply(l,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},texStorage3D:function It(){try{l.texStorage3D.apply(l,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},texSubImage2D:function re(){try{l.texSubImage2D.apply(l,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},texSubImage3D:function rt(){try{l.texSubImage3D.apply(l,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},compressedTexSubImage2D:function _t(){try{l.compressedTexSubImage2D.apply(l,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},scissor:function Zt(Ee){!1===X.equals(Ee)&&(l.scissor(Ee.x,Ee.y,Ee.z,Ee.w),X.copy(Ee))},viewport:function Wt(Ee){!1===K.equals(Ee)&&(l.viewport(Ee.x,Ee.y,Ee.z,Ee.w),K.copy(Ee))},reset:function mn(){l.disable(3042),l.disable(2884),l.disable(2929),l.disable(32823),l.disable(3089),l.disable(2960),l.disable(32926),l.blendEquation(32774),l.blendFunc(1,0),l.blendFuncSeparate(1,0,1,0),l.colorMask(!0,!0,!0,!0),l.clearColor(0,0,0,0),l.depthMask(!0),l.depthFunc(513),l.clearDepth(1),l.stencilMask(4294967295),l.stencilFunc(519,0,4294967295),l.stencilOp(7680,7680,7680),l.clearStencil(0),l.cullFace(1029),l.frontFace(2305),l.polygonOffset(0,0),l.activeTexture(33984),l.bindFramebuffer(36160,null),!0===c&&(l.bindFramebuffer(36009,null),l.bindFramebuffer(36008,null)),l.useProgram(null),l.lineWidth(1),l.scissor(0,0,l.canvas.width,l.canvas.height),l.viewport(0,0,l.canvas.width,l.canvas.height),m={},$=null,H={},v={},y=new WeakMap,_=[],b=null,C=!1,x=null,S=null,w=null,O=null,T=null,M=null,A=null,I=!1,E=null,P=null,B=null,V=null,Q=null,X.set(0,0,l.canvas.width,l.canvas.height),K.set(0,0,l.canvas.width,l.canvas.height),f.reset(),p.reset(),g.reset()}}}function Gdt(l,o,a,c,u,h,d){const f=u.isWebGL2,p=u.maxTextures,g=u.maxCubemapSize,m=u.maxTextureSize,v=u.maxSamples,y=o.has("WEBGL_multisampled_render_to_texture")?o.get("WEBGL_multisampled_render_to_texture"):null,_=/OculusBrowser/g.test(navigator.userAgent),b=new WeakMap;let C;const x=new WeakMap;let S=!1;try{S="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(he){}function w(he,re){return S?new OffscreenCanvas(he,re):Lw("canvas")}function O(he,re,rt,_t){let Ut=1;if((he.width>_t||he.height>_t)&&(Ut=_t/Math.max(he.width,he.height)),Ut<1||!0===re){if("undefined"!=typeof HTMLImageElement&&he instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&he instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&he instanceof ImageBitmap){const It=re?qA:Math.floor,Rt=It(Ut*he.width),je=It(Ut*he.height);void 0===C&&(C=w(Rt,je));const Zt=rt?w(Rt,je):C;return Zt.width=Rt,Zt.height=je,Zt.getContext("2d").drawImage(he,0,0,Rt,je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+he.width+"x"+he.height+") to ("+Rt+"x"+je+")."),Zt}return"data"in he&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+he.width+"x"+he.height+")."),he}return he}function T(he){return Y7(he.width)&&Y7(he.height)}function A(he,re){return he.generateMipmaps&&re&&he.minFilter!==Ao&&he.minFilter!==co}function I(he){l.generateMipmap(he)}function E(he,re,rt,_t,Ut=!1){if(!1===f)return re;if(null!==he){if(void 0!==l[he])return l[he];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+he+"'")}let It=re;return 6403===re&&(5126===rt&&(It=33326),5131===rt&&(It=33325),5121===rt&&(It=33321)),33319===re&&(5126===rt&&(It=33328),5131===rt&&(It=33327),5121===rt&&(It=33323)),6408===re&&(5126===rt&&(It=34836),5131===rt&&(It=34842),5121===rt&&(It=_t===ws&&!1===Ut?35907:32856),32819===rt&&(It=32854),32820===rt&&(It=32855)),(33325===It||33326===It||33327===It||33328===It||34842===It||34836===It)&&o.get("EXT_color_buffer_float"),It}function P(he,re,rt){return!0===A(he,rt)||he.isFramebufferTexture&&he.minFilter!==Ao&&he.minFilter!==co?Math.log2(Math.max(re.width,re.height))+1:void 0!==he.mipmaps&&he.mipmaps.length>0?he.mipmaps.length:he.isCompressedTexture&&Array.isArray(he.image)?re.mipmaps.length:1}function B(he){return he===Ao||1004===he||1005===he?9728:9729}function V(he){const re=he.target;re.removeEventListener("dispose",V),function j(he){const re=c.get(he);if(void 0===re.__webglInit)return;const rt=he.source,_t=x.get(rt);if(_t){const Ut=_t[re.__cacheKey];Ut.usedTimes--,0===Ut.usedTimes&&N(he),0===Object.keys(_t).length&&x.delete(rt)}c.remove(he)}(re),re.isVideoTexture&&b.delete(re)}function Q(he){const re=he.target;re.removeEventListener("dispose",Q),function U(he){const re=he.texture,rt=c.get(he),_t=c.get(re);if(void 0!==_t.__webglTexture&&(l.deleteTexture(_t.__webglTexture),d.memory.textures--),he.depthTexture&&he.depthTexture.dispose(),he.isWebGLCubeRenderTarget)for(let Ut=0;Ut<6;Ut++)l.deleteFramebuffer(rt.__webglFramebuffer[Ut]),rt.__webglDepthbuffer&&l.deleteRenderbuffer(rt.__webglDepthbuffer[Ut]);else{if(l.deleteFramebuffer(rt.__webglFramebuffer),rt.__webglDepthbuffer&&l.deleteRenderbuffer(rt.__webglDepthbuffer),rt.__webglMultisampledFramebuffer&&l.deleteFramebuffer(rt.__webglMultisampledFramebuffer),rt.__webglColorRenderbuffer)for(let Ut=0;Ut<rt.__webglColorRenderbuffer.length;Ut++)rt.__webglColorRenderbuffer[Ut]&&l.deleteRenderbuffer(rt.__webglColorRenderbuffer[Ut]);rt.__webglDepthRenderbuffer&&l.deleteRenderbuffer(rt.__webglDepthRenderbuffer)}if(he.isWebGLMultipleRenderTargets)for(let Ut=0,It=re.length;Ut<It;Ut++){const Rt=c.get(re[Ut]);Rt.__webglTexture&&(l.deleteTexture(Rt.__webglTexture),d.memory.textures--),c.remove(re[Ut])}c.remove(re),c.remove(he)}(re)}function N(he){const re=c.get(he);l.deleteTexture(re.__webglTexture),delete x.get(he.source)[re.__cacheKey],d.memory.textures--}let z=0;function W(he,re){const rt=c.get(he);if(he.isVideoTexture&&function bn(he){const re=d.render.frame;b.get(he)!==re&&(b.set(he,re),he.update())}(he),!1===he.isRenderTargetTexture&&he.version>0&&rt.__version!==he.version){const _t=he.image;if(null===_t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==_t.complete)return void $e(rt,he,re);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}a.activeTexture(33984+re),a.bindTexture(3553,rt.__webglTexture)}const se={[c1]:10497,[zl]:33071,1002:33648},Ce={[Ao]:9728,1004:9984,1005:9986,[co]:9729,1007:9985,1008:9987};function ve(he,re,rt){if(rt?(l.texParameteri(he,10242,se[re.wrapS]),l.texParameteri(he,10243,se[re.wrapT]),(32879===he||35866===he)&&l.texParameteri(he,32882,se[re.wrapR]),l.texParameteri(he,10240,Ce[re.magFilter]),l.texParameteri(he,10241,Ce[re.minFilter])):(l.texParameteri(he,10242,33071),l.texParameteri(he,10243,33071),(32879===he||35866===he)&&l.texParameteri(he,32882,33071),(re.wrapS!==zl||re.wrapT!==zl)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),l.texParameteri(he,10240,B(re.magFilter)),l.texParameteri(he,10241,B(re.minFilter)),re.minFilter!==Ao&&re.minFilter!==co&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===o.has("EXT_texture_filter_anisotropic")){const _t=o.get("EXT_texture_filter_anisotropic");if(re.type===xg&&!1===o.has("OES_texture_float_linear")||!1===f&&re.type===Rw&&!1===o.has("OES_texture_half_float_linear"))return;(re.anisotropy>1||c.get(re).__currentAnisotropy)&&(l.texParameterf(he,_t.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(re.anisotropy,u.getMaxAnisotropy())),c.get(re).__currentAnisotropy=re.anisotropy)}}function Oe(he,re){let rt=!1;void 0===he.__webglInit&&(he.__webglInit=!0,re.addEventListener("dispose",V));const _t=re.source;let Ut=x.get(_t);void 0===Ut&&(Ut={},x.set(_t,Ut));const It=function G(he){const re=[];return re.push(he.wrapS),re.push(he.wrapT),re.push(he.magFilter),re.push(he.minFilter),re.push(he.anisotropy),re.push(he.internalFormat),re.push(he.format),re.push(he.type),re.push(he.generateMipmaps),re.push(he.premultiplyAlpha),re.push(he.flipY),re.push(he.unpackAlignment),re.push(he.encoding),re.join()}(re);if(It!==he.__cacheKey){void 0===Ut[It]&&(Ut[It]={texture:l.createTexture(),usedTimes:0},d.memory.textures++,rt=!0),Ut[It].usedTimes++;const Rt=Ut[he.__cacheKey];void 0!==Rt&&(Ut[he.__cacheKey].usedTimes--,0===Rt.usedTimes&&N(re)),he.__cacheKey=It,he.__webglTexture=Ut[It].texture}return rt}function $e(he,re,rt){let _t=3553;re.isDataArrayTexture&&(_t=35866),re.isData3DTexture&&(_t=32879);const Ut=Oe(he,re),It=re.source;if(a.activeTexture(33984+rt),a.bindTexture(_t,he.__webglTexture),It.version!==It.__currentVersion||!0===Ut){l.pixelStorei(37440,re.flipY),l.pixelStorei(37441,re.premultiplyAlpha),l.pixelStorei(3317,re.unpackAlignment),l.pixelStorei(37443,0);const Rt=function M(he){return!f&&(he.wrapS!==zl||he.wrapT!==zl||he.minFilter!==Ao&&he.minFilter!==co)}(re)&&!1===T(re.image);let je=O(re.image,Rt,!1,m);je=Ln(re,je);const Zt=T(je)||f,Wt=h.convert(re.format,re.encoding);let nn,mn=h.convert(re.type),Ee=E(re.internalFormat,Wt,mn,re.encoding,re.isVideoTexture);ve(_t,re,Zt);const Kt=re.mipmaps,oi=f&&!0!==re.isVideoTexture,In=void 0===It.__currentVersion||!0===Ut,pi=P(re,je,Zt);if(re.isDepthTexture)Ee=6402,f?Ee=re.type===xg?36012:re.type===M0?33190:re.type===h1?35056:33189:re.type===xg&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),re.format===E0&&6402===Ee&&1012!==re.type&&re.type!==M0&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),re.type=M0,mn=h.convert(re.type)),re.format===d1&&6402===Ee&&(Ee=34041,re.type!==h1&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),re.type=h1,mn=h.convert(re.type))),In&&(oi?a.texStorage2D(3553,1,Ee,je.width,je.height):a.texImage2D(3553,0,Ee,je.width,je.height,0,Wt,mn,null));else if(re.isDataTexture)if(Kt.length>0&&Zt){oi&&In&&a.texStorage2D(3553,pi,Ee,Kt[0].width,Kt[0].height);for(let Xt=0,gi=Kt.length;Xt<gi;Xt++)nn=Kt[Xt],oi?a.texSubImage2D(3553,Xt,0,0,nn.width,nn.height,Wt,mn,nn.data):a.texImage2D(3553,Xt,Ee,nn.width,nn.height,0,Wt,mn,nn.data);re.generateMipmaps=!1}else oi?(In&&a.texStorage2D(3553,pi,Ee,je.width,je.height),a.texSubImage2D(3553,0,0,0,je.width,je.height,Wt,mn,je.data)):a.texImage2D(3553,0,Ee,je.width,je.height,0,Wt,mn,je.data);else if(re.isCompressedTexture){oi&&In&&a.texStorage2D(3553,pi,Ee,Kt[0].width,Kt[0].height);for(let Xt=0,gi=Kt.length;Xt<gi;Xt++)nn=Kt[Xt],re.format!==uh?null!==Wt?oi?a.compressedTexSubImage2D(3553,Xt,0,0,nn.width,nn.height,Wt,nn.data):a.compressedTexImage2D(3553,Xt,Ee,nn.width,nn.height,0,nn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oi?a.texSubImage2D(3553,Xt,0,0,nn.width,nn.height,Wt,mn,nn.data):a.texImage2D(3553,Xt,Ee,nn.width,nn.height,0,Wt,mn,nn.data)}else if(re.isDataArrayTexture)oi?(In&&a.texStorage3D(35866,pi,Ee,je.width,je.height,je.depth),a.texSubImage3D(35866,0,0,0,0,je.width,je.height,je.depth,Wt,mn,je.data)):a.texImage3D(35866,0,Ee,je.width,je.height,je.depth,0,Wt,mn,je.data);else if(re.isData3DTexture)oi?(In&&a.texStorage3D(32879,pi,Ee,je.width,je.height,je.depth),a.texSubImage3D(32879,0,0,0,0,je.width,je.height,je.depth,Wt,mn,je.data)):a.texImage3D(32879,0,Ee,je.width,je.height,je.depth,0,Wt,mn,je.data);else if(re.isFramebufferTexture){if(In)if(oi)a.texStorage2D(3553,pi,Ee,je.width,je.height);else{let Xt=je.width,gi=je.height;for(let Mr=0;Mr<pi;Mr++)a.texImage2D(3553,Mr,Ee,Xt,gi,0,Wt,mn,null),Xt>>=1,gi>>=1}}else if(Kt.length>0&&Zt){oi&&In&&a.texStorage2D(3553,pi,Ee,Kt[0].width,Kt[0].height);for(let Xt=0,gi=Kt.length;Xt<gi;Xt++)nn=Kt[Xt],oi?a.texSubImage2D(3553,Xt,0,0,Wt,mn,nn):a.texImage2D(3553,Xt,Ee,Wt,mn,nn);re.generateMipmaps=!1}else oi?(In&&a.texStorage2D(3553,pi,Ee,je.width,je.height),a.texSubImage2D(3553,0,0,0,Wt,mn,je)):a.texImage2D(3553,0,Ee,Wt,mn,je);A(re,Zt)&&I(_t),It.__currentVersion=It.version,re.onUpdate&&re.onUpdate(re)}he.__version=re.version}function Ie(he,re,rt,_t,Ut){const It=h.convert(rt.format,rt.encoding),Rt=h.convert(rt.type),je=E(rt.internalFormat,It,Rt,rt.encoding);c.get(re).__hasExternalTextures||(32879===Ut||35866===Ut?a.texImage3D(Ut,0,je,re.width,re.height,re.depth,0,It,Rt,null):a.texImage2D(Ut,0,je,re.width,re.height,0,It,Rt,null)),a.bindFramebuffer(36160,he),Bt(re)?y.framebufferTexture2DMultisampleEXT(36160,_t,Ut,c.get(rt).__webglTexture,0,We(re)):l.framebufferTexture2D(36160,_t,Ut,c.get(rt).__webglTexture,0),a.bindFramebuffer(36160,null)}function Xe(he,re,rt){if(l.bindRenderbuffer(36161,he),re.depthBuffer&&!re.stencilBuffer){let _t=33189;if(rt||Bt(re)){const Ut=re.depthTexture;Ut&&Ut.isDepthTexture&&(Ut.type===xg?_t=36012:Ut.type===M0&&(_t=33190));const It=We(re);Bt(re)?y.renderbufferStorageMultisampleEXT(36161,It,_t,re.width,re.height):l.renderbufferStorageMultisample(36161,It,_t,re.width,re.height)}else l.renderbufferStorage(36161,_t,re.width,re.height);l.framebufferRenderbuffer(36160,36096,36161,he)}else if(re.depthBuffer&&re.stencilBuffer){const _t=We(re);rt&&!1===Bt(re)?l.renderbufferStorageMultisample(36161,_t,35056,re.width,re.height):Bt(re)?y.renderbufferStorageMultisampleEXT(36161,_t,35056,re.width,re.height):l.renderbufferStorage(36161,34041,re.width,re.height),l.framebufferRenderbuffer(36160,33306,36161,he)}else{const _t=!0===re.isWebGLMultipleRenderTargets?re.texture:[re.texture];for(let Ut=0;Ut<_t.length;Ut++){const It=_t[Ut],Rt=h.convert(It.format,It.encoding),je=h.convert(It.type),Zt=E(It.internalFormat,Rt,je,It.encoding),Wt=We(re);rt&&!1===Bt(re)?l.renderbufferStorageMultisample(36161,Wt,Zt,re.width,re.height):Bt(re)?y.renderbufferStorageMultisampleEXT(36161,Wt,Zt,re.width,re.height):l.renderbufferStorage(36161,Zt,re.width,re.height)}}l.bindRenderbuffer(36161,null)}function Re(he){const re=c.get(he),rt=!0===he.isWebGLCubeRenderTarget;if(he.depthTexture&&!re.__autoAllocateDepthBuffer){if(rt)throw new Error("target.depthTexture not supported in Cube render targets");!function ue(he,re){if(re&&re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(a.bindFramebuffer(36160,he),!re.depthTexture||!re.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!c.get(re.depthTexture).__webglTexture||re.depthTexture.image.width!==re.width||re.depthTexture.image.height!==re.height)&&(re.depthTexture.image.width=re.width,re.depthTexture.image.height=re.height,re.depthTexture.needsUpdate=!0),W(re.depthTexture,0);const _t=c.get(re.depthTexture).__webglTexture,Ut=We(re);if(re.depthTexture.format===E0)Bt(re)?y.framebufferTexture2DMultisampleEXT(36160,36096,3553,_t,0,Ut):l.framebufferTexture2D(36160,36096,3553,_t,0);else{if(re.depthTexture.format!==d1)throw new Error("Unknown depthTexture format");Bt(re)?y.framebufferTexture2DMultisampleEXT(36160,33306,3553,_t,0,Ut):l.framebufferTexture2D(36160,33306,3553,_t,0)}}(re.__webglFramebuffer,he)}else if(rt){re.__webglDepthbuffer=[];for(let _t=0;_t<6;_t++)a.bindFramebuffer(36160,re.__webglFramebuffer[_t]),re.__webglDepthbuffer[_t]=l.createRenderbuffer(),Xe(re.__webglDepthbuffer[_t],he,!1)}else a.bindFramebuffer(36160,re.__webglFramebuffer),re.__webglDepthbuffer=l.createRenderbuffer(),Xe(re.__webglDepthbuffer,he,!1);a.bindFramebuffer(36160,null)}function We(he){return Math.min(v,he.samples)}function Bt(he){const re=c.get(he);return f&&he.samples>0&&!0===o.has("WEBGL_multisampled_render_to_texture")&&!1!==re.__useRenderToTexture}function Ln(he,re){const rt=he.encoding,_t=he.format,Ut=he.type;return!0===he.isCompressedTexture||!0===he.isVideoTexture||1035===he.format||rt!==A0&&(rt===ws?!1===f?!0===o.has("EXT_sRGB")&&_t===uh?(he.format=1035,he.minFilter=co,he.generateMipmaps=!1):re=Gge.sRGBToLinear(re):(_t!==uh||Ut!==k0)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",rt)),re}this.allocateTextureUnit=function H(){const he=z;return he>=p&&console.warn("THREE.WebGLTextures: Trying to use "+he+" texture units while this GPU supports only "+p),z+=1,he},this.resetTextureUnits=function $(){z=0},this.setTexture2D=W,this.setTexture2DArray=function X(he,re){const rt=c.get(he);he.version>0&&rt.__version!==he.version?$e(rt,he,re):(a.activeTexture(33984+re),a.bindTexture(35866,rt.__webglTexture))},this.setTexture3D=function K(he,re){const rt=c.get(he);he.version>0&&rt.__version!==he.version?$e(rt,he,re):(a.activeTexture(33984+re),a.bindTexture(32879,rt.__webglTexture))},this.setTextureCube=function ae(he,re){const rt=c.get(he);he.version>0&&rt.__version!==he.version?function Me(he,re,rt){if(6!==re.image.length)return;const _t=Oe(he,re),Ut=re.source;if(a.activeTexture(33984+rt),a.bindTexture(34067,he.__webglTexture),Ut.version!==Ut.__currentVersion||!0===_t){l.pixelStorei(37440,re.flipY),l.pixelStorei(37441,re.premultiplyAlpha),l.pixelStorei(3317,re.unpackAlignment),l.pixelStorei(37443,0);const It=re.isCompressedTexture||re.image[0].isCompressedTexture,Rt=re.image[0]&&re.image[0].isDataTexture,je=[];for(let Xt=0;Xt<6;Xt++)je[Xt]=It||Rt?Rt?re.image[Xt].image:re.image[Xt]:O(re.image[Xt],!1,!0,g),je[Xt]=Ln(re,je[Xt]);const Zt=je[0],Wt=T(Zt)||f,mn=h.convert(re.format,re.encoding),Ee=h.convert(re.type),nn=E(re.internalFormat,mn,Ee,re.encoding),Kt=f&&!0!==re.isVideoTexture,oi=void 0===Ut.__currentVersion||!0===_t;let pi,In=P(re,Zt,Wt);if(ve(34067,re,Wt),It){Kt&&oi&&a.texStorage2D(34067,In,nn,Zt.width,Zt.height);for(let Xt=0;Xt<6;Xt++){pi=je[Xt].mipmaps;for(let gi=0;gi<pi.length;gi++){const Mr=pi[gi];re.format!==uh?null!==mn?Kt?a.compressedTexSubImage2D(34069+Xt,gi,0,0,Mr.width,Mr.height,mn,Mr.data):a.compressedTexImage2D(34069+Xt,gi,nn,Mr.width,Mr.height,0,Mr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Kt?a.texSubImage2D(34069+Xt,gi,0,0,Mr.width,Mr.height,mn,Ee,Mr.data):a.texImage2D(34069+Xt,gi,nn,Mr.width,Mr.height,0,mn,Ee,Mr.data)}}}else{pi=re.mipmaps,Kt&&oi&&(pi.length>0&&In++,a.texStorage2D(34067,In,nn,je[0].width,je[0].height));for(let Xt=0;Xt<6;Xt++)if(Rt){Kt?a.texSubImage2D(34069+Xt,0,0,0,je[Xt].width,je[Xt].height,mn,Ee,je[Xt].data):a.texImage2D(34069+Xt,0,nn,je[Xt].width,je[Xt].height,0,mn,Ee,je[Xt].data);for(let gi=0;gi<pi.length;gi++){const Er=pi[gi].image[Xt].image;Kt?a.texSubImage2D(34069+Xt,gi+1,0,0,Er.width,Er.height,mn,Ee,Er.data):a.texImage2D(34069+Xt,gi+1,nn,Er.width,Er.height,0,mn,Ee,Er.data)}}else{Kt?a.texSubImage2D(34069+Xt,0,0,0,mn,Ee,je[Xt]):a.texImage2D(34069+Xt,0,nn,mn,Ee,je[Xt]);for(let gi=0;gi<pi.length;gi++){const Mr=pi[gi];Kt?a.texSubImage2D(34069+Xt,gi+1,0,0,mn,Ee,Mr.image[Xt]):a.texImage2D(34069+Xt,gi+1,nn,mn,Ee,Mr.image[Xt])}}}A(re,Wt)&&I(34067),Ut.__currentVersion=Ut.version,re.onUpdate&&re.onUpdate(re)}he.__version=re.version}(rt,he,re):(a.activeTexture(33984+re),a.bindTexture(34067,rt.__webglTexture))},this.rebindTextures=function Ye(he,re,rt){const _t=c.get(he);void 0!==re&&Ie(_t.__webglFramebuffer,he,he.texture,36064,3553),void 0!==rt&&Re(he)},this.setupRenderTarget=function nt(he){const re=he.texture,rt=c.get(he),_t=c.get(re);he.addEventListener("dispose",Q),!0!==he.isWebGLMultipleRenderTargets&&(void 0===_t.__webglTexture&&(_t.__webglTexture=l.createTexture()),_t.__version=re.version,d.memory.textures++);const Ut=!0===he.isWebGLCubeRenderTarget,It=!0===he.isWebGLMultipleRenderTargets,Rt=T(he)||f;if(Ut){rt.__webglFramebuffer=[];for(let je=0;je<6;je++)rt.__webglFramebuffer[je]=l.createFramebuffer()}else{if(rt.__webglFramebuffer=l.createFramebuffer(),It)if(u.drawBuffers){const je=he.texture;for(let Zt=0,Wt=je.length;Zt<Wt;Zt++){const mn=c.get(je[Zt]);void 0===mn.__webglTexture&&(mn.__webglTexture=l.createTexture(),d.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(f&&he.samples>0&&!1===Bt(he)){const je=It?re:[re];rt.__webglMultisampledFramebuffer=l.createFramebuffer(),rt.__webglColorRenderbuffer=[],a.bindFramebuffer(36160,rt.__webglMultisampledFramebuffer);for(let Zt=0;Zt<je.length;Zt++){const Wt=je[Zt];rt.__webglColorRenderbuffer[Zt]=l.createRenderbuffer(),l.bindRenderbuffer(36161,rt.__webglColorRenderbuffer[Zt]);const mn=h.convert(Wt.format,Wt.encoding),Ee=h.convert(Wt.type),nn=E(Wt.internalFormat,mn,Ee,Wt.encoding),Kt=We(he);l.renderbufferStorageMultisample(36161,Kt,nn,he.width,he.height),l.framebufferRenderbuffer(36160,36064+Zt,36161,rt.__webglColorRenderbuffer[Zt])}l.bindRenderbuffer(36161,null),he.depthBuffer&&(rt.__webglDepthRenderbuffer=l.createRenderbuffer(),Xe(rt.__webglDepthRenderbuffer,he,!0)),a.bindFramebuffer(36160,null)}}if(Ut){a.bindTexture(34067,_t.__webglTexture),ve(34067,re,Rt);for(let je=0;je<6;je++)Ie(rt.__webglFramebuffer[je],he,re,36064,34069+je);A(re,Rt)&&I(34067),a.unbindTexture()}else if(It){const je=he.texture;for(let Zt=0,Wt=je.length;Zt<Wt;Zt++){const mn=je[Zt],Ee=c.get(mn);a.bindTexture(3553,Ee.__webglTexture),ve(3553,mn,Rt),Ie(rt.__webglFramebuffer,he,mn,36064+Zt,3553),A(mn,Rt)&&I(3553)}a.unbindTexture()}else{let je=3553;(he.isWebGL3DRenderTarget||he.isWebGLArrayRenderTarget)&&(f?je=he.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),a.bindTexture(je,_t.__webglTexture),ve(je,re,Rt),Ie(rt.__webglFramebuffer,he,re,36064,je),A(re,Rt)&&I(je),a.unbindTexture()}he.depthBuffer&&Re(he)},this.updateRenderTargetMipmap=function Qe(he){const re=T(he)||f,rt=!0===he.isWebGLMultipleRenderTargets?he.texture:[he.texture];for(let _t=0,Ut=rt.length;_t<Ut;_t++){const It=rt[_t];if(A(It,re)){const Rt=he.isWebGLCubeRenderTarget?34067:3553,je=c.get(It).__webglTexture;a.bindTexture(Rt,je),I(Rt),a.unbindTexture()}}},this.updateMultisampleRenderTarget=function we(he){if(f&&he.samples>0&&!1===Bt(he)){const re=he.isWebGLMultipleRenderTargets?he.texture:[he.texture],rt=he.width,_t=he.height;let Ut=16384;const It=[],Rt=he.stencilBuffer?33306:36096,je=c.get(he),Zt=!0===he.isWebGLMultipleRenderTargets;if(Zt)for(let Wt=0;Wt<re.length;Wt++)a.bindFramebuffer(36160,je.__webglMultisampledFramebuffer),l.framebufferRenderbuffer(36160,36064+Wt,36161,null),a.bindFramebuffer(36160,je.__webglFramebuffer),l.framebufferTexture2D(36009,36064+Wt,3553,null,0);a.bindFramebuffer(36008,je.__webglMultisampledFramebuffer),a.bindFramebuffer(36009,je.__webglFramebuffer);for(let Wt=0;Wt<re.length;Wt++){It.push(36064+Wt),he.depthBuffer&&It.push(Rt);const mn=void 0!==je.__ignoreDepthValues&&je.__ignoreDepthValues;if(!1===mn&&(he.depthBuffer&&(Ut|=256),he.stencilBuffer&&(Ut|=1024)),Zt&&l.framebufferRenderbuffer(36008,36064,36161,je.__webglColorRenderbuffer[Wt]),!0===mn&&(l.invalidateFramebuffer(36008,[Rt]),l.invalidateFramebuffer(36009,[Rt])),Zt){const Ee=c.get(re[Wt]).__webglTexture;l.framebufferTexture2D(36009,36064,3553,Ee,0)}l.blitFramebuffer(0,0,rt,_t,0,0,rt,_t,Ut,9728),_&&l.invalidateFramebuffer(36008,It)}if(a.bindFramebuffer(36008,null),a.bindFramebuffer(36009,null),Zt)for(let Wt=0;Wt<re.length;Wt++){a.bindFramebuffer(36160,je.__webglMultisampledFramebuffer),l.framebufferRenderbuffer(36160,36064+Wt,36161,je.__webglColorRenderbuffer[Wt]);const mn=c.get(re[Wt]).__webglTexture;a.bindFramebuffer(36160,je.__webglFramebuffer),l.framebufferTexture2D(36009,36064+Wt,3553,mn,0)}a.bindFramebuffer(36009,je.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Re,this.setupFrameBufferTexture=Ie,this.useMultisampledRTT=Bt}function Qdt(l,o,a){const c=a.isWebGL2;return{convert:function u(h,d=null){let f;if(h===k0)return 5121;if(1017===h)return 32819;if(1018===h)return 32820;if(1010===h)return 5120;if(1011===h)return 5122;if(1012===h)return 5123;if(1013===h)return 5124;if(h===M0)return 5125;if(h===xg)return 5126;if(h===Rw)return c?5131:(f=o.get("OES_texture_half_float"),null!==f?f.HALF_FLOAT_OES:null);if(1021===h)return 6406;if(h===uh)return 6408;if(1024===h)return 6409;if(1025===h)return 6410;if(h===E0)return 6402;if(h===d1)return 34041;if(1028===h)return 6403;if(1022===h)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===h)return f=o.get("EXT_sRGB"),null!==f?f.SRGB_ALPHA_EXT:null;if(1029===h)return 36244;if(1030===h)return 33319;if(1031===h)return 33320;if(1033===h)return 36249;if(33776===h||33777===h||33778===h||33779===h)if(d===ws){if(f=o.get("WEBGL_compressed_texture_s3tc_srgb"),null===f)return null;if(33776===h)return f.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===h)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===h)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===h)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(f=o.get("WEBGL_compressed_texture_s3tc"),null===f)return null;if(33776===h)return f.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===h)return f.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===h)return f.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===h)return f.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===h||35841===h||35842===h||35843===h){if(f=o.get("WEBGL_compressed_texture_pvrtc"),null===f)return null;if(35840===h)return f.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===h)return f.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===h)return f.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===h)return f.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===h)return f=o.get("WEBGL_compressed_texture_etc1"),null!==f?f.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===h||37496===h){if(f=o.get("WEBGL_compressed_texture_etc"),null===f)return null;if(37492===h)return d===ws?f.COMPRESSED_SRGB8_ETC2:f.COMPRESSED_RGB8_ETC2;if(37496===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:f.COMPRESSED_RGBA8_ETC2_EAC}if(37808===h||37809===h||37810===h||37811===h||37812===h||37813===h||37814===h||37815===h||37816===h||37817===h||37818===h||37819===h||37820===h||37821===h){if(f=o.get("WEBGL_compressed_texture_astc"),null===f)return null;if(37808===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:f.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:f.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:f.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:f.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:f.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:f.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:f.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:f.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:f.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:f.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:f.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:f.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:f.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===h)return d===ws?f.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:f.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===h){if(f=o.get("EXT_texture_compression_bptc"),null===f)return null;if(36492===h)return d===ws?f.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:f.COMPRESSED_RGBA_BPTC_UNORM_EXT}return h===h1?c?34042:(f=o.get("WEBGL_depth_texture"),null!==f?f.UNSIGNED_INT_24_8_WEBGL:null):void 0!==l[h]?l[h]:null}}}class jdt extends ho{constructor(o=[]){super(),this.isArrayCamera=!0,this.cameras=o}}class V1 extends Ac{constructor(){super(),this.isGroup=!0,this.type="Group"}}const qdt={type:"move"};class EH{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new V1,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new V1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new V1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(o){return null!==this._targetRay&&this._targetRay.dispatchEvent(o),null!==this._grip&&this._grip.dispatchEvent(o),null!==this._hand&&this._hand.dispatchEvent(o),this}disconnect(o){return this.dispatchEvent({type:"disconnected",data:o}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(o,a,c){let u=null,h=null,d=null;const f=this._targetRay,p=this._grip,g=this._hand;if(o&&"visible-blurred"!==a.session.visibilityState){if(g&&o.hand){d=!0;for(const C of o.hand.values()){const x=a.getJointPose(C,c);if(void 0===g.joints[C.jointName]){const w=new V1;w.matrixAutoUpdate=!1,w.visible=!1,g.joints[C.jointName]=w,g.add(w)}const S=g.joints[C.jointName];null!==x&&(S.matrix.fromArray(x.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.jointRadius=x.radius),S.visible=null!==x}const y=g.joints["index-finger-tip"].position.distanceTo(g.joints["thumb-tip"].position),_=.02,b=.005;g.inputState.pinching&&y>_+b?(g.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:o.handedness,target:this})):!g.inputState.pinching&&y<=_-b&&(g.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:o.handedness,target:this}))}else null!==p&&o.gripSpace&&(h=a.getPose(o.gripSpace,c),null!==h&&(p.matrix.fromArray(h.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),h.linearVelocity?(p.hasLinearVelocity=!0,p.linearVelocity.copy(h.linearVelocity)):p.hasLinearVelocity=!1,h.angularVelocity?(p.hasAngularVelocity=!0,p.angularVelocity.copy(h.angularVelocity)):p.hasAngularVelocity=!1));null!==f&&(u=a.getPose(o.targetRaySpace,c),null===u&&null!==h&&(u=h),null!==u&&(f.matrix.fromArray(u.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),u.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(u.linearVelocity)):f.hasLinearVelocity=!1,u.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(u.angularVelocity)):f.hasAngularVelocity=!1,this.dispatchEvent(qdt)))}return null!==f&&(f.visible=null!==u),null!==p&&(p.visible=null!==h),null!==g&&(g.visible=null!==d),this}}class Zdt extends wd{constructor(o,a,c,u,h,d,f,p,g,m){if((m=void 0!==m?m:E0)!==E0&&m!==d1)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&m===E0&&(c=M0),void 0===c&&m===d1&&(c=h1),super(null,u,h,d,f,p,m,c,g),this.isDepthTexture=!0,this.image={width:o,height:a},this.magFilter=void 0!==f?f:Ao,this.minFilter=void 0!==p?p:Ao,this.flipY=!1,this.generateMipmaps=!1}}class Xdt extends m1{constructor(o,a){super();const c=this;let u=null,h=1,d=null,f="local-floor",p=null,g=null,m=null,v=null,y=null,_=null;const b=a.getContextAttributes();let C=null,x=null;const S=[],w=[],O=new ho;O.layers.enable(1),O.viewport=new er;const T=new ho;T.layers.enable(2),T.viewport=new er;const M=[O,T],A=new jdt;A.layers.enable(1),A.layers.enable(2);let I=null,E=null;function P(G){const W=w.indexOf(G.inputSource);if(-1===W)return;const X=S[W];void 0!==X&&X.dispatchEvent({type:G.type,data:G.inputSource})}function B(){u.removeEventListener("select",P),u.removeEventListener("selectstart",P),u.removeEventListener("selectend",P),u.removeEventListener("squeeze",P),u.removeEventListener("squeezestart",P),u.removeEventListener("squeezeend",P),u.removeEventListener("end",B),u.removeEventListener("inputsourceschange",V);for(let G=0;G<S.length;G++){const W=w[G];null!==W&&(w[G]=null,S[G].disconnect(W))}I=null,E=null,o.setRenderTarget(C),y=null,v=null,m=null,u=null,x=null,H.stop(),c.isPresenting=!1,c.dispatchEvent({type:"sessionend"})}function V(G){for(let W=0;W<G.removed.length;W++){const X=G.removed[W],K=w.indexOf(X);K>=0&&(w[K]=null,S[K].dispatchEvent({type:"disconnected",data:X}))}for(let W=0;W<G.added.length;W++){const X=G.added[W];let K=w.indexOf(X);if(-1===K){for(let se=0;se<S.length;se++){if(se>=w.length){w.push(X),K=se;break}if(null===w[se]){w[se]=X,K=se;break}}if(-1===K)break}const ae=S[K];ae&&ae.dispatchEvent({type:"connected",data:X})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let W=S[G];return void 0===W&&(W=new EH,S[G]=W),W.getTargetRaySpace()},this.getControllerGrip=function(G){let W=S[G];return void 0===W&&(W=new EH,S[G]=W),W.getGripSpace()},this.getHand=function(G){let W=S[G];return void 0===W&&(W=new EH,S[G]=W),W.getHandSpace()},this.setFramebufferScaleFactor=function(G){h=G,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){f=G,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||d},this.setReferenceSpace=function(G){p=G},this.getBaseLayer=function(){return null!==v?v:y},this.getBinding=function(){return m},this.getFrame=function(){return _},this.getSession=function(){return u},this.setSession=function(){var G=SK(function*(W){if(u=W,null!==u){if(C=o.getRenderTarget(),u.addEventListener("select",P),u.addEventListener("selectstart",P),u.addEventListener("selectend",P),u.addEventListener("squeeze",P),u.addEventListener("squeezestart",P),u.addEventListener("squeezeend",P),u.addEventListener("end",B),u.addEventListener("inputsourceschange",V),!0!==b.xrCompatible&&(yield a.makeXRCompatible()),void 0===u.renderState.layers||!1===o.capabilities.isWebGL2)y=new XRWebGLLayer(u,a,{antialias:void 0!==u.renderState.layers||b.antialias,alpha:b.alpha,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:h}),u.updateRenderState({baseLayer:y}),x=new dl(y.framebufferWidth,y.framebufferHeight,{format:uh,type:k0,encoding:o.outputEncoding});else{let X=null,K=null,ae=null;b.depth&&(ae=b.stencil?35056:33190,X=b.stencil?d1:E0,K=b.stencil?h1:M0);const se={colorFormat:32856,depthFormat:ae,scaleFactor:h};m=new XRWebGLBinding(u,a),v=m.createProjectionLayer(se),u.updateRenderState({layers:[v]}),x=new dl(v.textureWidth,v.textureHeight,{format:uh,type:k0,depthTexture:new Zdt(v.textureWidth,v.textureHeight,K,void 0,void 0,void 0,void 0,void 0,void 0,X),stencilBuffer:b.stencil,encoding:o.outputEncoding,samples:b.antialias?4:0}),o.properties.get(x).__ignoreDepthValues=v.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(1),p=null,d=yield u.requestReferenceSpace(f),H.setContext(u),H.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"})}});return function(W){return G.apply(this,arguments)}}();const Q=new te,j=new te;function U(G,W){null===W?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices(W.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.updateCamera=function(G){if(null===u)return;A.near=T.near=O.near=G.near,A.far=T.far=O.far=G.far,(I!==A.near||E!==A.far)&&(u.updateRenderState({depthNear:A.near,depthFar:A.far}),I=A.near,E=A.far);const W=G.parent,X=A.cameras;U(A,W);for(let ae=0;ae<X.length;ae++)U(X[ae],W);A.matrixWorld.decompose(A.position,A.quaternion,A.scale),G.position.copy(A.position),G.quaternion.copy(A.quaternion),G.scale.copy(A.scale),G.matrix.copy(A.matrix),G.matrixWorld.copy(A.matrixWorld);const K=G.children;for(let ae=0,se=K.length;ae<se;ae++)K[ae].updateMatrixWorld(!0);2===X.length?function N(G,W,X){Q.setFromMatrixPosition(W.matrixWorld),j.setFromMatrixPosition(X.matrixWorld);const K=Q.distanceTo(j),ae=W.projectionMatrix.elements,se=X.projectionMatrix.elements,Ce=ae[14]/(ae[10]-1),ve=ae[14]/(ae[10]+1),Oe=(ae[9]+1)/ae[5],$e=(ae[9]-1)/ae[5],Me=(ae[8]-1)/ae[0],Ie=(se[8]+1)/se[0],Xe=Ce*Me,ue=Ce*Ie,Re=K/(-Me+Ie),Ye=Re*-Me;W.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(Ye),G.translateZ(Re),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert();const nt=Ce+Re,Qe=ve+Re;G.projectionMatrix.makePerspective(Xe-Ye,ue+(K-Ye),Oe*ve/Qe*nt,$e*ve/Qe*nt,nt,Qe)}(A,O,T):A.projectionMatrix.copy(O.projectionMatrix)},this.getCamera=function(){return A},this.getFoveation=function(){return null!==v?v.fixedFoveation:null!==y?y.fixedFoveation:void 0},this.setFoveation=function(G){null!==v&&(v.fixedFoveation=G),null!==y&&void 0!==y.fixedFoveation&&(y.fixedFoveation=G)};let z=null;const H=new ome;H.setAnimationLoop(function $(G,W){if(g=W.getViewerPose(p||d),_=W,null!==g){const X=g.views;null!==y&&(o.setRenderTargetFramebuffer(x,y.framebuffer),o.setRenderTarget(x));let K=!1;X.length!==A.cameras.length&&(A.cameras.length=0,K=!0);for(let ae=0;ae<X.length;ae++){const se=X[ae];let Ce=null;if(null!==y)Ce=y.getViewport(se);else{const Oe=m.getViewSubImage(v,se);Ce=Oe.viewport,0===ae&&(o.setRenderTargetTextures(x,Oe.colorTexture,v.ignoreDepthValues?void 0:Oe.depthStencilTexture),o.setRenderTarget(x))}let ve=M[ae];void 0===ve&&(ve=new ho,ve.layers.enable(ae),ve.viewport=new er,M[ae]=ve),ve.matrix.fromArray(se.transform.matrix),ve.projectionMatrix.fromArray(se.projectionMatrix),ve.viewport.set(Ce.x,Ce.y,Ce.width,Ce.height),0===ae&&A.matrix.copy(ve.matrix),!0===K&&A.cameras.push(ve)}}for(let X=0;X<S.length;X++){const K=w[X],ae=S[X];null!==K&&void 0!==ae&&ae.update(K,W,p||d)}z&&z(G,W),_=null}),this.setAnimationLoop=function(G){z=G},this.dispose=function(){}}}function Ydt(l,o){function u(C,x){C.opacity.value=x.opacity,x.color&&C.diffuse.value.copy(x.color),x.emissive&&C.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(C.map.value=x.map),x.alphaMap&&(C.alphaMap.value=x.alphaMap),x.bumpMap&&(C.bumpMap.value=x.bumpMap,C.bumpScale.value=x.bumpScale,1===x.side&&(C.bumpScale.value*=-1)),x.displacementMap&&(C.displacementMap.value=x.displacementMap,C.displacementScale.value=x.displacementScale,C.displacementBias.value=x.displacementBias),x.emissiveMap&&(C.emissiveMap.value=x.emissiveMap),x.normalMap&&(C.normalMap.value=x.normalMap,C.normalScale.value.copy(x.normalScale),1===x.side&&C.normalScale.value.negate()),x.specularMap&&(C.specularMap.value=x.specularMap),x.alphaTest>0&&(C.alphaTest.value=x.alphaTest);const S=o.get(x).envMap;if(S&&(C.envMap.value=S,C.flipEnvMap.value=S.isCubeTexture&&!1===S.isRenderTargetTexture?-1:1,C.reflectivity.value=x.reflectivity,C.ior.value=x.ior,C.refractionRatio.value=x.refractionRatio),x.lightMap){C.lightMap.value=x.lightMap;const T=!0!==l.physicallyCorrectLights?Math.PI:1;C.lightMapIntensity.value=x.lightMapIntensity*T}let w,O;x.aoMap&&(C.aoMap.value=x.aoMap,C.aoMapIntensity.value=x.aoMapIntensity),x.map?w=x.map:x.specularMap?w=x.specularMap:x.displacementMap?w=x.displacementMap:x.normalMap?w=x.normalMap:x.bumpMap?w=x.bumpMap:x.roughnessMap?w=x.roughnessMap:x.metalnessMap?w=x.metalnessMap:x.alphaMap?w=x.alphaMap:x.emissiveMap?w=x.emissiveMap:x.clearcoatMap?w=x.clearcoatMap:x.clearcoatNormalMap?w=x.clearcoatNormalMap:x.clearcoatRoughnessMap?w=x.clearcoatRoughnessMap:x.iridescenceMap?w=x.iridescenceMap:x.iridescenceThicknessMap?w=x.iridescenceThicknessMap:x.specularIntensityMap?w=x.specularIntensityMap:x.specularColorMap?w=x.specularColorMap:x.transmissionMap?w=x.transmissionMap:x.thicknessMap?w=x.thicknessMap:x.sheenColorMap?w=x.sheenColorMap:x.sheenRoughnessMap&&(w=x.sheenRoughnessMap),void 0!==w&&(w.isWebGLRenderTarget&&(w=w.texture),!0===w.matrixAutoUpdate&&w.updateMatrix(),C.uvTransform.value.copy(w.matrix)),x.aoMap?O=x.aoMap:x.lightMap&&(O=x.lightMap),void 0!==O&&(O.isWebGLRenderTarget&&(O=O.texture),!0===O.matrixAutoUpdate&&O.updateMatrix(),C.uv2Transform.value.copy(O.matrix))}return{refreshFogUniforms:function a(C,x){C.fogColor.value.copy(x.color),x.isFog?(C.fogNear.value=x.near,C.fogFar.value=x.far):x.isFogExp2&&(C.fogDensity.value=x.density)},refreshMaterialUniforms:function c(C,x,S,w,O){x.isMeshBasicMaterial||x.isMeshLambertMaterial?u(C,x):x.isMeshToonMaterial?(u(C,x),function m(C,x){x.gradientMap&&(C.gradientMap.value=x.gradientMap)}(C,x)):x.isMeshPhongMaterial?(u(C,x),function g(C,x){C.specular.value.copy(x.specular),C.shininess.value=Math.max(x.shininess,1e-4)}(C,x)):x.isMeshStandardMaterial?(u(C,x),function v(C,x){C.roughness.value=x.roughness,C.metalness.value=x.metalness,x.roughnessMap&&(C.roughnessMap.value=x.roughnessMap),x.metalnessMap&&(C.metalnessMap.value=x.metalnessMap),o.get(x).envMap&&(C.envMapIntensity.value=x.envMapIntensity)}(C,x),x.isMeshPhysicalMaterial&&function y(C,x,S){C.ior.value=x.ior,x.sheen>0&&(C.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),C.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(C.sheenColorMap.value=x.sheenColorMap),x.sheenRoughnessMap&&(C.sheenRoughnessMap.value=x.sheenRoughnessMap)),x.clearcoat>0&&(C.clearcoat.value=x.clearcoat,C.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(C.clearcoatMap.value=x.clearcoatMap),x.clearcoatRoughnessMap&&(C.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap),x.clearcoatNormalMap&&(C.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),C.clearcoatNormalMap.value=x.clearcoatNormalMap,1===x.side&&C.clearcoatNormalScale.value.negate())),x.iridescence>0&&(C.iridescence.value=x.iridescence,C.iridescenceIOR.value=x.iridescenceIOR,C.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],C.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(C.iridescenceMap.value=x.iridescenceMap),x.iridescenceThicknessMap&&(C.iridescenceThicknessMap.value=x.iridescenceThicknessMap)),x.transmission>0&&(C.transmission.value=x.transmission,C.transmissionSamplerMap.value=S.texture,C.transmissionSamplerSize.value.set(S.width,S.height),x.transmissionMap&&(C.transmissionMap.value=x.transmissionMap),C.thickness.value=x.thickness,x.thicknessMap&&(C.thicknessMap.value=x.thicknessMap),C.attenuationDistance.value=x.attenuationDistance,C.attenuationColor.value.copy(x.attenuationColor)),C.specularIntensity.value=x.specularIntensity,C.specularColor.value.copy(x.specularColor),x.specularIntensityMap&&(C.specularIntensityMap.value=x.specularIntensityMap),x.specularColorMap&&(C.specularColorMap.value=x.specularColorMap)}(C,x,O)):x.isMeshMatcapMaterial?(u(C,x),function _(C,x){x.matcap&&(C.matcap.value=x.matcap)}(C,x)):x.isMeshDepthMaterial?u(C,x):x.isMeshDistanceMaterial?(u(C,x),function b(C,x){C.referencePosition.value.copy(x.referencePosition),C.nearDistance.value=x.nearDistance,C.farDistance.value=x.farDistance}(C,x)):x.isMeshNormalMaterial?u(C,x):x.isLineBasicMaterial?(function h(C,x){C.diffuse.value.copy(x.color),C.opacity.value=x.opacity}(C,x),x.isLineDashedMaterial&&function d(C,x){C.dashSize.value=x.dashSize,C.totalSize.value=x.dashSize+x.gapSize,C.scale.value=x.scale}(C,x)):x.isPointsMaterial?function f(C,x,S,w){let O;C.diffuse.value.copy(x.color),C.opacity.value=x.opacity,C.size.value=x.size*S,C.scale.value=.5*w,x.map&&(C.map.value=x.map),x.alphaMap&&(C.alphaMap.value=x.alphaMap),x.alphaTest>0&&(C.alphaTest.value=x.alphaTest),x.map?O=x.map:x.alphaMap&&(O=x.alphaMap),void 0!==O&&(!0===O.matrixAutoUpdate&&O.updateMatrix(),C.uvTransform.value.copy(O.matrix))}(C,x,S,w):x.isSpriteMaterial?function p(C,x){let S;C.diffuse.value.copy(x.color),C.opacity.value=x.opacity,C.rotation.value=x.rotation,x.map&&(C.map.value=x.map),x.alphaMap&&(C.alphaMap.value=x.alphaMap),x.alphaTest>0&&(C.alphaTest.value=x.alphaTest),x.map?S=x.map:x.alphaMap&&(S=x.alphaMap),void 0!==S&&(!0===S.matrixAutoUpdate&&S.updateMatrix(),C.uvTransform.value.copy(S.matrix))}(C,x):x.isShadowMaterial?(C.color.value.copy(x.color),C.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}}}function Fme(l={}){this.isWebGLRenderer=!0;const o=void 0!==l.canvas?l.canvas:function Kdt(){const l=Lw("canvas");return l.style.display="block",l}(),a=void 0!==l.context?l.context:null,c=void 0===l.depth||l.depth,u=void 0===l.stencil||l.stencil,h=void 0!==l.antialias&&l.antialias,d=void 0===l.premultipliedAlpha||l.premultipliedAlpha,f=void 0!==l.preserveDrawingBuffer&&l.preserveDrawingBuffer,p=void 0!==l.powerPreference?l.powerPreference:"default",g=void 0!==l.failIfMajorPerformanceCaveat&&l.failIfMajorPerformanceCaveat;let m;m=null!==a?a.getContextAttributes().alpha:void 0!==l.alpha&&l.alpha;let v=null,y=null;const _=[],b=[];this.domElement=o,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=A0,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const C=this;let x=!1,S=0,w=0,O=null,T=-1,M=null;const A=new er,I=new er;let E=null,P=o.width,B=o.height,V=1,Q=null,j=null;const N=new er(0,0,P,B),U=new er(0,0,P,B);let z=!1;const $=new CH;let H=!1,G=!1,W=null;const X=new ci,K=new dt,ae=new te,se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ce(){return null===O?V:1}let $e,Me,Ie,Xe,ue,Re,Ye,nt,Qe,we,We,Bt,bn,Ln,he,re,rt,_t,Ut,It,Rt,je,Zt,ve=a;function Oe(de,tt){for(let pt=0;pt<de.length;pt++){const kt=o.getContext(de[pt],tt);if(null!==kt)return kt}return null}try{const de={alpha:!0,depth:c,stencil:u,antialias:h,premultipliedAlpha:d,preserveDrawingBuffer:f,powerPreference:p,failIfMajorPerformanceCaveat:g};if("setAttribute"in o&&o.setAttribute("data-engine","three.js r142"),o.addEventListener("webglcontextlost",Ee,!1),o.addEventListener("webglcontextrestored",nn,!1),o.addEventListener("webglcontextcreationerror",Kt,!1),null===ve){const tt=["webgl2","webgl","experimental-webgl"];if(!0===C.isWebGL1Renderer&&tt.shift(),ve=Oe(tt,de),null===ve)throw Oe(tt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(de){throw console.error("THREE.WebGLRenderer: "+de.message),de}function Wt(){$e=new hht(ve),Me=new sht(ve,$e,l),$e.init(Me),je=new Qdt(ve,$e,Me),Ie=new Wdt(ve,$e,Me),Xe=new pht,ue=new Idt,Re=new Gdt(ve,$e,Ie,ue,Me,je,Xe),Ye=new aht(C),nt=new uht(C),Qe=new rct(ve,Me),Zt=new iht(ve,$e,Qe,Me),we=new dht(ve,Qe,Xe,Zt),We=new yht(ve,we,Qe,Xe),Ut=new vht(ve,Me,Re),re=new oht(ue),Bt=new Adt(C,Ye,nt,$e,Me,Zt,re),bn=new Ydt(C,ue),Ln=new Rdt,he=new zdt($e,Me),_t=new nht(C,Ye,Ie,We,m,d),rt=new $dt(C,We,Me),It=new rht(ve,$e,Xe,Me),Rt=new fht(ve,$e,Xe,Me),Xe.programs=Bt.programs,C.capabilities=Me,C.extensions=$e,C.properties=ue,C.renderLists=Ln,C.shadowMap=rt,C.state=Ie,C.info=Xe}Wt();const mn=new Xdt(C,ve);function Ee(de){de.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function nn(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const de=Xe.autoReset,tt=rt.enabled,pt=rt.autoUpdate,lt=rt.needsUpdate,kt=rt.type;Wt(),Xe.autoReset=de,rt.enabled=tt,rt.autoUpdate=pt,rt.needsUpdate=lt,rt.type=kt}function Kt(de){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",de.statusMessage)}function oi(de){const tt=de.target;tt.removeEventListener("dispose",oi),function In(de){(function pi(de){const tt=ue.get(de).programs;void 0!==tt&&(tt.forEach(function(pt){Bt.releaseProgram(pt)}),de.isShaderMaterial&&Bt.releaseShaderCache(de))})(de),ue.remove(de)}(tt)}this.xr=mn,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const de=$e.get("WEBGL_lose_context");de&&de.loseContext()},this.forceContextRestore=function(){const de=$e.get("WEBGL_lose_context");de&&de.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(de){void 0!==de&&(V=de,this.setSize(P,B,!1))},this.getSize=function(de){return de.set(P,B)},this.setSize=function(de,tt,pt){mn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(P=de,B=tt,o.width=Math.floor(de*V),o.height=Math.floor(tt*V),!1!==pt&&(o.style.width=de+"px",o.style.height=tt+"px"),this.setViewport(0,0,de,tt))},this.getDrawingBufferSize=function(de){return de.set(P*V,B*V).floor()},this.setDrawingBufferSize=function(de,tt,pt){P=de,B=tt,V=pt,o.width=Math.floor(de*pt),o.height=Math.floor(tt*pt),this.setViewport(0,0,de,tt)},this.getCurrentViewport=function(de){return de.copy(A)},this.getViewport=function(de){return de.copy(N)},this.setViewport=function(de,tt,pt,lt){de.isVector4?N.set(de.x,de.y,de.z,de.w):N.set(de,tt,pt,lt),Ie.viewport(A.copy(N).multiplyScalar(V).floor())},this.getScissor=function(de){return de.copy(U)},this.setScissor=function(de,tt,pt,lt){de.isVector4?U.set(de.x,de.y,de.z,de.w):U.set(de,tt,pt,lt),Ie.scissor(I.copy(U).multiplyScalar(V).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(de){Ie.setScissorTest(z=de)},this.setOpaqueSort=function(de){Q=de},this.setTransparentSort=function(de){j=de},this.getClearColor=function(de){return de.copy(_t.getClearColor())},this.setClearColor=function(){_t.setClearColor.apply(_t,arguments)},this.getClearAlpha=function(){return _t.getClearAlpha()},this.setClearAlpha=function(){_t.setClearAlpha.apply(_t,arguments)},this.clear=function(de=!0,tt=!0,pt=!0){let lt=0;de&&(lt|=16384),tt&&(lt|=256),pt&&(lt|=1024),ve.clear(lt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){o.removeEventListener("webglcontextlost",Ee,!1),o.removeEventListener("webglcontextrestored",nn,!1),o.removeEventListener("webglcontextcreationerror",Kt,!1),Ln.dispose(),he.dispose(),ue.dispose(),Ye.dispose(),nt.dispose(),We.dispose(),Zt.dispose(),Bt.dispose(),mn.dispose(),mn.removeEventListener("sessionstart",Mr),mn.removeEventListener("sessionend",Er),W&&(W.dispose(),W=null),ml.stop()},this.renderBufferDirect=function(de,tt,pt,lt,kt,ui){null===tt&&(tt=se);const Ii=kt.isMesh&&kt.matrixWorld.determinant()<0,ji=function $1t(de,tt,pt,lt,kt){!0!==tt.isScene&&(tt=se),Re.resetTextureUnits();const ui=tt.fog,ji=null===O?C.outputEncoding:!0===O.isXRRenderTarget?O.texture.encoding:A0,Ui=(lt.isMeshStandardMaterial?nt:Ye).get(lt.envMap||(lt.isMeshStandardMaterial?tt.environment:null)),Ar=!0===lt.vertexColors&&!!pt.attributes.color&&4===pt.attributes.color.itemSize,ar=!!lt.normalMap&&!!pt.attributes.tangent,dr=!!pt.morphAttributes.position,Us=!!pt.morphAttributes.normal,nv=!!pt.morphAttributes.color,ab=lt.toneMapped?C.toneMapping:0,lb=pt.morphAttributes.position||pt.morphAttributes.normal||pt.morphAttributes.color,Fd=void 0!==lb?lb.length:0,Cr=ue.get(lt),cb=y.state.lights;!0!==H||!0!==G&&de===M||re.setState(lt,de,de===M&&lt.id===T);let po=!1;lt.version===Cr.__version?(Cr.needsLights&&Cr.lightsStateVersion!==cb.state.version||Cr.outputEncoding!==ji||kt.isInstancedMesh&&!1===Cr.instancing||!kt.isInstancedMesh&&!0===Cr.instancing||kt.isSkinnedMesh&&!1===Cr.skinning||!kt.isSkinnedMesh&&!0===Cr.skinning||Cr.envMap!==Ui||!0===lt.fog&&Cr.fog!==ui||void 0!==Cr.numClippingPlanes&&(Cr.numClippingPlanes!==re.numPlanes||Cr.numIntersection!==re.numIntersection)||Cr.vertexAlphas!==Ar||Cr.vertexTangents!==ar||Cr.morphTargets!==dr||Cr.morphNormals!==Us||Cr.morphColors!==nv||Cr.toneMapping!==ab||!0===Me.isWebGL2&&Cr.morphTargetsCount!==Fd)&&(po=!0):(po=!0,Cr.__version=lt.version);let Nd=Cr.currentProgram;!0===po&&(Nd=p$(lt,tt,kt));let Ug=!1,b2=!1,g$=!1;const vl=Nd.getUniforms(),x2=Cr.uniforms;if(Ie.useProgram(Nd.program)&&(Ug=!0,b2=!0,g$=!0),lt.id!==T&&(T=lt.id,b2=!0),Ug||M!==de){if(vl.setValue(ve,"projectionMatrix",de.projectionMatrix),Me.logarithmicDepthBuffer&&vl.setValue(ve,"logDepthBufFC",2/(Math.log(de.far+1)/Math.LN2)),M!==de&&(M=de,b2=!0,g$=!0),lt.isShaderMaterial||lt.isMeshPhongMaterial||lt.isMeshToonMaterial||lt.isMeshStandardMaterial||lt.envMap){const Ld=vl.map.cameraPosition;void 0!==Ld&&Ld.setValue(ve,ae.setFromMatrixPosition(de.matrixWorld))}(lt.isMeshPhongMaterial||lt.isMeshToonMaterial||lt.isMeshLambertMaterial||lt.isMeshBasicMaterial||lt.isMeshStandardMaterial||lt.isShaderMaterial)&&vl.setValue(ve,"isOrthographic",!0===de.isOrthographicCamera),(lt.isMeshPhongMaterial||lt.isMeshToonMaterial||lt.isMeshLambertMaterial||lt.isMeshBasicMaterial||lt.isMeshStandardMaterial||lt.isShaderMaterial||lt.isShadowMaterial||kt.isSkinnedMesh)&&vl.setValue(ve,"viewMatrix",de.matrixWorldInverse)}if(kt.isSkinnedMesh){vl.setOptional(ve,kt,"bindMatrix"),vl.setOptional(ve,kt,"bindMatrixInverse");const Ld=kt.skeleton;Ld&&(Me.floatVertexTextures?(null===Ld.boneTexture&&Ld.computeBoneTexture(),vl.setValue(ve,"boneTexture",Ld.boneTexture,Re),vl.setValue(ve,"boneTextureSize",Ld.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const m$=pt.morphAttributes;return(void 0!==m$.position||void 0!==m$.normal||void 0!==m$.color&&!0===Me.isWebGL2)&&Ut.update(kt,pt,lt,Nd),(b2||Cr.receiveShadow!==kt.receiveShadow)&&(Cr.receiveShadow=kt.receiveShadow,vl.setValue(ve,"receiveShadow",kt.receiveShadow)),b2&&(vl.setValue(ve,"toneMappingExposure",C.toneMappingExposure),Cr.needsLights&&function W1t(de,tt){de.ambientLightColor.needsUpdate=tt,de.lightProbe.needsUpdate=tt,de.directionalLights.needsUpdate=tt,de.directionalLightShadows.needsUpdate=tt,de.pointLights.needsUpdate=tt,de.pointLightShadows.needsUpdate=tt,de.spotLights.needsUpdate=tt,de.spotLightShadows.needsUpdate=tt,de.rectAreaLights.needsUpdate=tt,de.hemisphereLights.needsUpdate=tt}(x2,g$),ui&&!0===lt.fog&&bn.refreshFogUniforms(x2,ui),bn.refreshMaterialUniforms(x2,lt,V,B,W),bI.upload(ve,Cr.uniformsList,x2,Re)),lt.isShaderMaterial&&!0===lt.uniformsNeedUpdate&&(bI.upload(ve,Cr.uniformsList,x2,Re),lt.uniformsNeedUpdate=!1),lt.isSpriteMaterial&&vl.setValue(ve,"center",kt.center),vl.setValue(ve,"modelViewMatrix",kt.modelViewMatrix),vl.setValue(ve,"normalMatrix",kt.normalMatrix),vl.setValue(ve,"modelMatrix",kt.matrixWorld),Nd}(de,tt,pt,lt,kt);Ie.setMaterial(lt,Ii);let Ui=pt.index;const Ar=pt.attributes.position;if(null===Ui){if(void 0===Ar||0===Ar.count)return}else if(0===Ui.count)return;let ar=1;!0===lt.wireframe&&(Ui=we.getWireframeAttribute(pt),ar=2),Zt.setup(kt,lt,ji,pt,Ui);let dr,Us=It;null!==Ui&&(dr=Qe.get(Ui),Us=Rt,Us.setIndex(dr));const nv=null!==Ui?Ui.count:Ar.count,ab=pt.drawRange.start*ar,lb=pt.drawRange.count*ar,Fd=null!==ui?ui.start*ar:0,Cr=null!==ui?ui.count*ar:1/0,cb=Math.max(ab,Fd),po=Math.min(nv,ab+lb,Fd+Cr)-1,Nd=Math.max(0,po-cb+1);if(0!==Nd){if(kt.isMesh)!0===lt.wireframe?(Ie.setLineWidth(lt.wireframeLinewidth*Ce()),Us.setMode(1)):Us.setMode(4);else if(kt.isLine){let Ug=lt.linewidth;void 0===Ug&&(Ug=1),Ie.setLineWidth(Ug*Ce()),Us.setMode(kt.isLineSegments?1:kt.isLineLoop?2:3)}else kt.isPoints?Us.setMode(0):kt.isSprite&&Us.setMode(4);if(kt.isInstancedMesh)Us.renderInstances(cb,Nd,kt.count);else if(pt.isInstancedBufferGeometry){const Ug=Math.min(pt.instanceCount,pt._maxInstanceCount);Us.renderInstances(cb,Nd,Ug)}else Us.render(cb,Nd)}},this.compile=function(de,tt){y=he.get(de),y.init(),b.push(y),de.traverseVisible(function(pt){pt.isLight&&pt.layers.test(tt.layers)&&(y.pushLight(pt),pt.castShadow&&y.pushShadow(pt))}),y.setupLights(C.physicallyCorrectLights),de.traverse(function(pt){const lt=pt.material;if(lt)if(Array.isArray(lt))for(let kt=0;kt<lt.length;kt++)p$(lt[kt],de,pt);else p$(lt,de,pt)}),b.pop(),y=null};let Xt=null;function Mr(){ml.stop()}function Er(){ml.start()}const ml=new ome;function Rd(de,tt,pt,lt){if(!1===de.visible)return;if(de.layers.test(tt.layers))if(de.isGroup)pt=de.renderOrder;else if(de.isLOD)!0===de.autoUpdate&&de.update(tt);else if(de.isLight)y.pushLight(de),de.castShadow&&y.pushShadow(de);else if(de.isSprite){if(!de.frustumCulled||$.intersectsSprite(de)){lt&&ae.setFromMatrixPosition(de.matrixWorld).applyMatrix4(X);const Ii=We.update(de),ji=de.material;ji.visible&&v.push(de,Ii,ji,pt,ae.z,null)}}else if((de.isMesh||de.isLine||de.isPoints)&&(de.isSkinnedMesh&&de.skeleton.frame!==Xe.render.frame&&(de.skeleton.update(),de.skeleton.frame=Xe.render.frame),!de.frustumCulled||$.intersectsObject(de))){lt&&ae.setFromMatrixPosition(de.matrixWorld).applyMatrix4(X);const Ii=We.update(de),ji=de.material;if(Array.isArray(ji)){const Ui=Ii.groups;for(let Ar=0,ar=Ui.length;Ar<ar;Ar++){const dr=Ui[Ar],Us=ji[dr.materialIndex];Us&&Us.visible&&v.push(de,Ii,Us,pt,ae.z,dr)}}else ji.visible&&v.push(de,Ii,ji,pt,ae.z,null)}const ui=de.children;for(let Ii=0,ji=ui.length;Ii<ji;Ii++)Rd(ui[Ii],tt,pt,lt)}function F_e(de,tt,pt,lt){const kt=de.opaque,ui=de.transmissive,Ii=de.transparent;y.setupLightsView(pt),ui.length>0&&function U1t(de,tt,pt){const lt=Me.isWebGL2;null===W&&(W=new dl(1,1,{generateMipmaps:!0,type:$e.has("EXT_color_buffer_half_float")?Rw:k0,minFilter:1008,samples:lt&&!0===h?4:0})),C.getDrawingBufferSize(K),lt?W.setSize(K.x,K.y):W.setSize(qA(K.x),qA(K.y));const kt=C.getRenderTarget();C.setRenderTarget(W),C.clear();const ui=C.toneMapping;C.toneMapping=0,$3(de,tt,pt),C.toneMapping=ui,Re.updateMultisampleRenderTarget(W),Re.updateRenderTargetMipmap(W),C.setRenderTarget(kt)}(kt,tt,pt),lt&&Ie.viewport(A.copy(lt)),kt.length>0&&$3(kt,tt,pt),ui.length>0&&$3(ui,tt,pt),Ii.length>0&&$3(Ii,tt,pt),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function $3(de,tt,pt){const lt=!0===tt.isScene?tt.overrideMaterial:null;for(let kt=0,ui=de.length;kt<ui;kt++){const Ii=de[kt],ji=Ii.object,Ui=Ii.geometry,Ar=null===lt?Ii.material:lt,ar=Ii.group;ji.layers.test(pt.layers)&&H1t(ji,tt,pt,Ui,Ar,ar)}}function H1t(de,tt,pt,lt,kt,ui){de.onBeforeRender(C,tt,pt,lt,kt,ui),de.modelViewMatrix.multiplyMatrices(pt.matrixWorldInverse,de.matrixWorld),de.normalMatrix.getNormalMatrix(de.modelViewMatrix),kt.onBeforeRender(C,tt,pt,lt,de,ui),!0===kt.transparent&&2===kt.side?(kt.side=1,kt.needsUpdate=!0,C.renderBufferDirect(pt,tt,lt,kt,de,ui),kt.side=0,kt.needsUpdate=!0,C.renderBufferDirect(pt,tt,lt,kt,de,ui),kt.side=2):C.renderBufferDirect(pt,tt,lt,kt,de,ui),de.onAfterRender(C,tt,pt,lt,kt,ui)}function p$(de,tt,pt){!0!==tt.isScene&&(tt=se);const lt=ue.get(de),kt=y.state.lights,Ii=kt.state.version,ji=Bt.getParameters(de,kt.state,y.state.shadowsArray,tt,pt),Ui=Bt.getProgramCacheKey(ji);let Ar=lt.programs;lt.environment=de.isMeshStandardMaterial?tt.environment:null,lt.fog=tt.fog,lt.envMap=(de.isMeshStandardMaterial?nt:Ye).get(de.envMap||lt.environment),void 0===Ar&&(de.addEventListener("dispose",oi),Ar=new Map,lt.programs=Ar);let ar=Ar.get(Ui);if(void 0!==ar){if(lt.currentProgram===ar&&lt.lightsStateVersion===Ii)return N_e(de,ji),ar}else ji.uniforms=Bt.getUniforms(de),de.onBuild(pt,ji,C),de.onBeforeCompile(ji,C),ar=Bt.acquireProgram(ji,Ui),Ar.set(Ui,ar),lt.uniforms=ji.uniforms;const dr=lt.uniforms;(!de.isShaderMaterial&&!de.isRawShaderMaterial||!0===de.clipping)&&(dr.clippingPlanes=re.uniform),N_e(de,ji),lt.needsLights=function G1t(de){return de.isMeshLambertMaterial||de.isMeshToonMaterial||de.isMeshPhongMaterial||de.isMeshStandardMaterial||de.isShadowMaterial||de.isShaderMaterial&&!0===de.lights}(de),lt.lightsStateVersion=Ii,lt.needsLights&&(dr.ambientLightColor.value=kt.state.ambient,dr.lightProbe.value=kt.state.probe,dr.directionalLights.value=kt.state.directional,dr.directionalLightShadows.value=kt.state.directionalShadow,dr.spotLights.value=kt.state.spot,dr.spotLightShadows.value=kt.state.spotShadow,dr.rectAreaLights.value=kt.state.rectArea,dr.ltc_1.value=kt.state.rectAreaLTC1,dr.ltc_2.value=kt.state.rectAreaLTC2,dr.pointLights.value=kt.state.point,dr.pointLightShadows.value=kt.state.pointShadow,dr.hemisphereLights.value=kt.state.hemi,dr.directionalShadowMap.value=kt.state.directionalShadowMap,dr.directionalShadowMatrix.value=kt.state.directionalShadowMatrix,dr.spotShadowMap.value=kt.state.spotShadowMap,dr.spotShadowMatrix.value=kt.state.spotShadowMatrix,dr.pointShadowMap.value=kt.state.pointShadowMap,dr.pointShadowMatrix.value=kt.state.pointShadowMatrix);const Us=ar.getUniforms(),nv=bI.seqWithValue(Us.seq,dr);return lt.currentProgram=ar,lt.uniformsList=nv,ar}function N_e(de,tt){const pt=ue.get(de);pt.outputEncoding=tt.outputEncoding,pt.instancing=tt.instancing,pt.skinning=tt.skinning,pt.morphTargets=tt.morphTargets,pt.morphNormals=tt.morphNormals,pt.morphColors=tt.morphColors,pt.morphTargetsCount=tt.morphTargetsCount,pt.numClippingPlanes=tt.numClippingPlanes,pt.numIntersection=tt.numClipIntersection,pt.vertexAlphas=tt.vertexAlphas,pt.vertexTangents=tt.vertexTangents,pt.toneMapping=tt.toneMapping}ml.setAnimationLoop(function gi(de){Xt&&Xt(de)}),"undefined"!=typeof self&&ml.setContext(self),this.setAnimationLoop=function(de){Xt=de,mn.setAnimationLoop(de),null===de?ml.stop():ml.start()},mn.addEventListener("sessionstart",Mr),mn.addEventListener("sessionend",Er),this.render=function(de,tt){if(void 0===tt||!0===tt.isCamera){if(!0!==x){if(!0===de.autoUpdate&&de.updateMatrixWorld(),null===tt.parent&&tt.updateMatrixWorld(),!0===mn.enabled&&!0===mn.isPresenting&&(!0===mn.cameraAutoUpdate&&mn.updateCamera(tt),tt=mn.getCamera()),!0===de.isScene&&de.onBeforeRender(C,de,tt,O),y=he.get(de,b.length),y.init(),b.push(y),X.multiplyMatrices(tt.projectionMatrix,tt.matrixWorldInverse),$.setFromProjectionMatrix(X),G=this.localClippingEnabled,H=re.init(this.clippingPlanes,G,tt),v=Ln.get(de,_.length),v.init(),_.push(v),Rd(de,tt,0,C.sortObjects),v.finish(),!0===C.sortObjects&&v.sort(Q,j),!0===H&&re.beginShadows(),rt.render(y.state.shadowsArray,de,tt),!0===H&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),_t.render(v,de),y.setupLights(C.physicallyCorrectLights),tt.isArrayCamera){const lt=tt.cameras;for(let kt=0,ui=lt.length;kt<ui;kt++){const Ii=lt[kt];F_e(v,de,Ii,Ii.viewport)}}else F_e(v,de,tt);null!==O&&(Re.updateMultisampleRenderTarget(O),Re.updateRenderTargetMipmap(O)),!0===de.isScene&&de.onAfterRender(C,de,tt),Zt.resetDefaultState(),T=-1,M=null,b.pop(),y=b.length>0?b[b.length-1]:null,_.pop(),v=_.length>0?_[_.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return O},this.setRenderTargetTextures=function(de,tt,pt){ue.get(de.texture).__webglTexture=tt,ue.get(de.depthTexture).__webglTexture=pt;const lt=ue.get(de);lt.__hasExternalTextures=!0,lt.__hasExternalTextures&&(lt.__autoAllocateDepthBuffer=void 0===pt,lt.__autoAllocateDepthBuffer||!0===$e.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),lt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(de,tt){const pt=ue.get(de);pt.__webglFramebuffer=tt,pt.__useDefaultFramebuffer=void 0===tt},this.setRenderTarget=function(de,tt=0,pt=0){O=de,S=tt,w=pt;let lt=!0;if(de){const Ui=ue.get(de);void 0!==Ui.__useDefaultFramebuffer?(Ie.bindFramebuffer(36160,null),lt=!1):void 0===Ui.__webglFramebuffer?Re.setupRenderTarget(de):Ui.__hasExternalTextures&&Re.rebindTextures(de,ue.get(de.texture).__webglTexture,ue.get(de.depthTexture).__webglTexture)}let kt=null,ui=!1,Ii=!1;if(de){const Ui=de.texture;(Ui.isData3DTexture||Ui.isDataArrayTexture)&&(Ii=!0);const Ar=ue.get(de).__webglFramebuffer;de.isWebGLCubeRenderTarget?(kt=Ar[tt],ui=!0):kt=Me.isWebGL2&&de.samples>0&&!1===Re.useMultisampledRTT(de)?ue.get(de).__webglMultisampledFramebuffer:Ar,A.copy(de.viewport),I.copy(de.scissor),E=de.scissorTest}else A.copy(N).multiplyScalar(V).floor(),I.copy(U).multiplyScalar(V).floor(),E=z;if(Ie.bindFramebuffer(36160,kt)&&Me.drawBuffers&&lt&&Ie.drawBuffers(de,kt),Ie.viewport(A),Ie.scissor(I),Ie.setScissorTest(E),ui){const Ui=ue.get(de.texture);ve.framebufferTexture2D(36160,36064,34069+tt,Ui.__webglTexture,pt)}else if(Ii){const Ui=ue.get(de.texture);ve.framebufferTextureLayer(36160,36064,Ui.__webglTexture,pt||0,tt||0)}T=-1},this.readRenderTargetPixels=function(de,tt,pt,lt,kt,ui,Ii){if(!de||!de.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ji=ue.get(de).__webglFramebuffer;if(de.isWebGLCubeRenderTarget&&void 0!==Ii&&(ji=ji[Ii]),ji){Ie.bindFramebuffer(36160,ji);try{const Ui=de.texture,Ar=Ui.format,ar=Ui.type;if(Ar!==uh&&je.convert(Ar)!==ve.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const dr=ar===Rw&&($e.has("EXT_color_buffer_half_float")||Me.isWebGL2&&$e.has("EXT_color_buffer_float"));if(!(ar===k0||je.convert(ar)===ve.getParameter(35738)||ar===xg&&(Me.isWebGL2||$e.has("OES_texture_float")||$e.has("WEBGL_color_buffer_float"))||dr))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");tt>=0&&tt<=de.width-lt&&pt>=0&&pt<=de.height-kt&&ve.readPixels(tt,pt,lt,kt,je.convert(Ar),je.convert(ar),ui)}finally{const Ui=null!==O?ue.get(O).__webglFramebuffer:null;Ie.bindFramebuffer(36160,Ui)}}},this.copyFramebufferToTexture=function(de,tt,pt=0){const lt=Math.pow(2,-pt),kt=Math.floor(tt.image.width*lt),ui=Math.floor(tt.image.height*lt);Re.setTexture2D(tt,0),ve.copyTexSubImage2D(3553,pt,0,0,de.x,de.y,kt,ui),Ie.unbindTexture()},this.copyTextureToTexture=function(de,tt,pt,lt=0){const kt=tt.image.width,ui=tt.image.height,Ii=je.convert(pt.format),ji=je.convert(pt.type);Re.setTexture2D(pt,0),ve.pixelStorei(37440,pt.flipY),ve.pixelStorei(37441,pt.premultiplyAlpha),ve.pixelStorei(3317,pt.unpackAlignment),tt.isDataTexture?ve.texSubImage2D(3553,lt,de.x,de.y,kt,ui,Ii,ji,tt.image.data):tt.isCompressedTexture?ve.compressedTexSubImage2D(3553,lt,de.x,de.y,tt.mipmaps[0].width,tt.mipmaps[0].height,Ii,tt.mipmaps[0].data):ve.texSubImage2D(3553,lt,de.x,de.y,Ii,ji,tt.image),0===lt&&pt.generateMipmaps&&ve.generateMipmap(3553),Ie.unbindTexture()},this.copyTextureToTexture3D=function(de,tt,pt,lt,kt=0){if(C.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const ui=de.max.x-de.min.x+1,Ii=de.max.y-de.min.y+1,ji=de.max.z-de.min.z+1,Ui=je.convert(lt.format),Ar=je.convert(lt.type);let ar;if(lt.isData3DTexture)Re.setTexture3D(lt,0),ar=32879;else{if(!lt.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Re.setTexture2DArray(lt,0),ar=35866}ve.pixelStorei(37440,lt.flipY),ve.pixelStorei(37441,lt.premultiplyAlpha),ve.pixelStorei(3317,lt.unpackAlignment);const dr=ve.getParameter(3314),Us=ve.getParameter(32878),nv=ve.getParameter(3316),ab=ve.getParameter(3315),lb=ve.getParameter(32877),Fd=pt.isCompressedTexture?pt.mipmaps[0]:pt.image;ve.pixelStorei(3314,Fd.width),ve.pixelStorei(32878,Fd.height),ve.pixelStorei(3316,de.min.x),ve.pixelStorei(3315,de.min.y),ve.pixelStorei(32877,de.min.z),pt.isDataTexture||pt.isData3DTexture?ve.texSubImage3D(ar,kt,tt.x,tt.y,tt.z,ui,Ii,ji,Ui,Ar,Fd.data):pt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ve.compressedTexSubImage3D(ar,kt,tt.x,tt.y,tt.z,ui,Ii,ji,Ui,Fd.data)):ve.texSubImage3D(ar,kt,tt.x,tt.y,tt.z,ui,Ii,ji,Ui,Ar,Fd),ve.pixelStorei(3314,dr),ve.pixelStorei(32878,Us),ve.pixelStorei(3316,nv),ve.pixelStorei(3315,ab),ve.pixelStorei(32877,lb),0===kt&&lt.generateMipmaps&&ve.generateMipmap(ar),Ie.unbindTexture()},this.initTexture=function(de){de.isCubeTexture?Re.setTextureCube(de,0):de.isData3DTexture?Re.setTexture3D(de,0):de.isDataArrayTexture?Re.setTexture2DArray(de,0):Re.setTexture2D(de,0),Ie.unbindTexture()},this.resetState=function(){S=0,w=0,O=null,Ie.reset(),Zt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class Jdt extends Fme{}).prototype.isWebGL1Renderer=!0;class $w extends Ac{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(o,a){return super.copy(o,a),null!==o.background&&(this.background=o.background.clone()),null!==o.environment&&(this.environment=o.environment.clone()),null!==o.fog&&(this.fog=o.fog.clone()),null!==o.overrideMaterial&&(this.overrideMaterial=o.overrideMaterial.clone()),this.autoUpdate=o.autoUpdate,this.matrixAutoUpdate=o.matrixAutoUpdate,this}toJSON(o){const a=super.toJSON(o);return null!==this.fog&&(a.object.fog=this.fog.toJSON()),a}}class G1 extends wd{constructor(o=null,a=1,c=1,u,h,d,f,p,g=Ao,m=Ao,v,y){super(null,d,f,p,g,m,u,h,v,y),this.isDataTexture=!0,this.image={data:o,width:a,height:c},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class s0e extends wd{constructor(o,a,c,u,h,d,f,p,g){super(o,a,c,u,h,d,f,p,g),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Od{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(o,a){const c=this.getUtoTmapping(o);return this.getPoint(c,a)}getPoints(o=5){const a=[];for(let c=0;c<=o;c++)a.push(this.getPoint(c/o));return a}getSpacedPoints(o=5){const a=[];for(let c=0;c<=o;c++)a.push(this.getPointAt(c/o));return a}getLength(){const o=this.getLengths();return o[o.length-1]}getLengths(o=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===o+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const a=[];let c,u=this.getPoint(0),h=0;a.push(0);for(let d=1;d<=o;d++)c=this.getPoint(d/o),h+=c.distanceTo(u),a.push(h),u=c;return this.cacheArcLengths=a,a}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(o,a){const c=this.getLengths();let u=0;const h=c.length;let d;d=a||o*c[h-1];let g,f=0,p=h-1;for(;f<=p;)if(u=Math.floor(f+(p-f)/2),g=c[u]-d,g<0)f=u+1;else{if(!(g>0)){p=u;break}p=u-1}if(u=p,c[u]===d)return u/(h-1);const m=c[u];return(u+(d-m)/(c[u+1]-m))/(h-1)}getTangent(o,a){let u=o-1e-4,h=o+1e-4;u<0&&(u=0),h>1&&(h=1);const d=this.getPoint(u),f=this.getPoint(h),p=a||(d.isVector2?new dt:new te);return p.copy(f).sub(d).normalize(),p}getTangentAt(o,a){const c=this.getUtoTmapping(o);return this.getTangent(c,a)}computeFrenetFrames(o,a){const c=new te,u=[],h=[],d=[],f=new te,p=new ci;for(let _=0;_<=o;_++)u[_]=this.getTangentAt(_/o,new te);h[0]=new te,d[0]=new te;let g=Number.MAX_VALUE;const m=Math.abs(u[0].x),v=Math.abs(u[0].y),y=Math.abs(u[0].z);m<=g&&(g=m,c.set(1,0,0)),v<=g&&(g=v,c.set(0,1,0)),y<=g&&c.set(0,0,1),f.crossVectors(u[0],c).normalize(),h[0].crossVectors(u[0],f),d[0].crossVectors(u[0],h[0]);for(let _=1;_<=o;_++){if(h[_]=h[_-1].clone(),d[_]=d[_-1].clone(),f.crossVectors(u[_-1],u[_]),f.length()>Number.EPSILON){f.normalize();const b=Math.acos(Zs(u[_-1].dot(u[_]),-1,1));h[_].applyMatrix4(p.makeRotationAxis(f,b))}d[_].crossVectors(u[_],h[_])}if(!0===a){let _=Math.acos(Zs(h[0].dot(h[o]),-1,1));_/=o,u[0].dot(f.crossVectors(h[0],h[o]))>0&&(_=-_);for(let b=1;b<=o;b++)h[b].applyMatrix4(p.makeRotationAxis(u[b],_*b)),d[b].crossVectors(u[b],h[b])}return{tangents:u,normals:h,binormals:d}}clone(){return(new this.constructor).copy(this)}copy(o){return this.arcLengthDivisions=o.arcLengthDivisions,this}toJSON(){const o={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return o.arcLengthDivisions=this.arcLengthDivisions,o.type=this.type,o}fromJSON(o){return this.arcLengthDivisions=o.arcLengthDivisions,this}}class LH extends Od{constructor(o=0,a=0,c=1,u=1,h=0,d=2*Math.PI,f=!1,p=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=o,this.aY=a,this.xRadius=c,this.yRadius=u,this.aStartAngle=h,this.aEndAngle=d,this.aClockwise=f,this.aRotation=p}getPoint(o,a){const c=a||new dt,u=2*Math.PI;let h=this.aEndAngle-this.aStartAngle;const d=Math.abs(h)<Number.EPSILON;for(;h<0;)h+=u;for(;h>u;)h-=u;h<Number.EPSILON&&(h=d?0:u),!0===this.aClockwise&&!d&&(h===u?h=-u:h-=u);const f=this.aStartAngle+o*h;let p=this.aX+this.xRadius*Math.cos(f),g=this.aY+this.yRadius*Math.sin(f);if(0!==this.aRotation){const m=Math.cos(this.aRotation),v=Math.sin(this.aRotation),y=p-this.aX,_=g-this.aY;p=y*m-_*v+this.aX,g=y*v+_*m+this.aY}return c.set(p,g)}copy(o){return super.copy(o),this.aX=o.aX,this.aY=o.aY,this.xRadius=o.xRadius,this.yRadius=o.yRadius,this.aStartAngle=o.aStartAngle,this.aEndAngle=o.aEndAngle,this.aClockwise=o.aClockwise,this.aRotation=o.aRotation,this}toJSON(){const o=super.toJSON();return o.aX=this.aX,o.aY=this.aY,o.xRadius=this.xRadius,o.yRadius=this.yRadius,o.aStartAngle=this.aStartAngle,o.aEndAngle=this.aEndAngle,o.aClockwise=this.aClockwise,o.aRotation=this.aRotation,o}fromJSON(o){return super.fromJSON(o),this.aX=o.aX,this.aY=o.aY,this.xRadius=o.xRadius,this.yRadius=o.yRadius,this.aStartAngle=o.aStartAngle,this.aEndAngle=o.aEndAngle,this.aClockwise=o.aClockwise,this.aRotation=o.aRotation,this}}function BH(){let l=0,o=0,a=0,c=0;function u(h,d,f,p){l=h,o=f,a=-3*h+3*d-2*f-p,c=2*h-2*d+f+p}return{initCatmullRom:function(h,d,f,p,g){u(d,f,g*(f-h),g*(p-d))},initNonuniformCatmullRom:function(h,d,f,p,g,m,v){let y=(d-h)/g-(f-h)/(g+m)+(f-d)/m,_=(f-d)/m-(p-d)/(m+v)+(p-f)/v;y*=m,_*=m,u(d,f,y,_)},calc:function(h){const d=h*h;return l+o*h+a*d+c*(d*h)}}}const EI=new te,VH=new BH,zH=new BH,UH=new BH;class o0e extends Od{constructor(o=[],a=!1,c="centripetal",u=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=o,this.closed=a,this.curveType=c,this.tension=u}getPoint(o,a=new te){const c=a,u=this.points,h=u.length,d=(h-(this.closed?0:1))*o;let g,m,f=Math.floor(d),p=d-f;this.closed?f+=f>0?0:(Math.floor(Math.abs(f)/h)+1)*h:0===p&&f===h-1&&(f=h-2,p=1),this.closed||f>0?g=u[(f-1)%h]:(EI.subVectors(u[0],u[1]).add(u[0]),g=EI);const v=u[f%h],y=u[(f+1)%h];if(this.closed||f+2<h?m=u[(f+2)%h]:(EI.subVectors(u[h-1],u[h-2]).add(u[h-1]),m=EI),"centripetal"===this.curveType||"chordal"===this.curveType){const _="chordal"===this.curveType?.5:.25;let b=Math.pow(g.distanceToSquared(v),_),C=Math.pow(v.distanceToSquared(y),_),x=Math.pow(y.distanceToSquared(m),_);C<1e-4&&(C=1),b<1e-4&&(b=C),x<1e-4&&(x=C),VH.initNonuniformCatmullRom(g.x,v.x,y.x,m.x,b,C,x),zH.initNonuniformCatmullRom(g.y,v.y,y.y,m.y,b,C,x),UH.initNonuniformCatmullRom(g.z,v.z,y.z,m.z,b,C,x)}else"catmullrom"===this.curveType&&(VH.initCatmullRom(g.x,v.x,y.x,m.x,this.tension),zH.initCatmullRom(g.y,v.y,y.y,m.y,this.tension),UH.initCatmullRom(g.z,v.z,y.z,m.z,this.tension));return c.set(VH.calc(p),zH.calc(p),UH.calc(p)),c}copy(o){super.copy(o),this.points=[];for(let a=0,c=o.points.length;a<c;a++)this.points.push(o.points[a].clone());return this.closed=o.closed,this.curveType=o.curveType,this.tension=o.tension,this}toJSON(){const o=super.toJSON();o.points=[];for(let a=0,c=this.points.length;a<c;a++)o.points.push(this.points[a].toArray());return o.closed=this.closed,o.curveType=this.curveType,o.tension=this.tension,o}fromJSON(o){super.fromJSON(o),this.points=[];for(let a=0,c=o.points.length;a<c;a++){const u=o.points[a];this.points.push((new te).fromArray(u))}return this.closed=o.closed,this.curveType=o.curveType,this.tension=o.tension,this}}function a0e(l,o,a,c,u){const h=.5*(c-o),d=.5*(u-a),f=l*l;return(2*a-2*c+h+d)*(l*f)+(-3*a+3*c-2*h-d)*f+h*l+a}function Zw(l,o,a,c){return function uft(l,o){const a=1-l;return a*a*o}(l,o)+function hft(l,o){return 2*(1-l)*l*o}(l,a)+function dft(l,o){return l*l*o}(l,c)}function Xw(l,o,a,c,u){return function fft(l,o){const a=1-l;return a*a*a*o}(l,o)+function pft(l,o){const a=1-l;return 3*a*a*l*o}(l,a)+function gft(l,o){return 3*(1-l)*l*l*o}(l,c)+function mft(l,o){return l*l*l*o}(l,u)}class l0e extends Od{constructor(o=new dt,a=new dt,c=new dt,u=new dt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=o,this.v1=a,this.v2=c,this.v3=u}getPoint(o,a=new dt){const c=a,u=this.v0,h=this.v1,d=this.v2,f=this.v3;return c.set(Xw(o,u.x,h.x,d.x,f.x),Xw(o,u.y,h.y,d.y,f.y)),c}copy(o){return super.copy(o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this.v3.copy(o.v3),this}toJSON(){const o=super.toJSON();return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o.v3=this.v3.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this.v3.fromArray(o.v3),this}}class HH extends Od{constructor(o=new dt,a=new dt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=o,this.v2=a}getPoint(o,a=new dt){const c=a;return 1===o?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(o).add(this.v1)),c}getPointAt(o,a){return this.getPoint(o,a)}getTangent(o,a){const c=a||new dt;return c.copy(this.v2).sub(this.v1).normalize(),c}copy(o){return super.copy(o),this.v1.copy(o.v1),this.v2.copy(o.v2),this}toJSON(){const o=super.toJSON();return o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this}}class c0e extends Od{constructor(o=new dt,a=new dt,c=new dt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=o,this.v1=a,this.v2=c}getPoint(o,a=new dt){const c=a,u=this.v0,h=this.v1,d=this.v2;return c.set(Zw(o,u.x,h.x,d.x),Zw(o,u.y,h.y,d.y)),c}copy(o){return super.copy(o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this}toJSON(){const o=super.toJSON();return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this}}class h0e extends Od{constructor(o=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=o}getPoint(o,a=new dt){const c=a,u=this.points,h=(u.length-1)*o,d=Math.floor(h),f=h-d,p=u[0===d?d:d-1],g=u[d],m=u[d>u.length-2?u.length-1:d+1],v=u[d>u.length-3?u.length-1:d+2];return c.set(a0e(f,p.x,g.x,m.x,v.x),a0e(f,p.y,g.y,m.y,v.y)),c}copy(o){super.copy(o),this.points=[];for(let a=0,c=o.points.length;a<c;a++)this.points.push(o.points[a].clone());return this}toJSON(){const o=super.toJSON();o.points=[];for(let a=0,c=this.points.length;a<c;a++)o.points.push(this.points[a].toArray());return o}fromJSON(o){super.fromJSON(o),this.points=[];for(let a=0,c=o.points.length;a<c;a++){const u=o.points[a];this.points.push((new dt).fromArray(u))}return this}}var $H=Object.freeze({__proto__:null,ArcCurve:class cft extends LH{constructor(o,a,c,u,h,d){super(o,a,c,c,u,h,d),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:o0e,CubicBezierCurve:l0e,CubicBezierCurve3:class vft extends Od{constructor(o=new te,a=new te,c=new te,u=new te){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=o,this.v1=a,this.v2=c,this.v3=u}getPoint(o,a=new te){const c=a,u=this.v0,h=this.v1,d=this.v2,f=this.v3;return c.set(Xw(o,u.x,h.x,d.x,f.x),Xw(o,u.y,h.y,d.y,f.y),Xw(o,u.z,h.z,d.z,f.z)),c}copy(o){return super.copy(o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this.v3.copy(o.v3),this}toJSON(){const o=super.toJSON();return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o.v3=this.v3.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this.v3.fromArray(o.v3),this}},EllipseCurve:LH,LineCurve:HH,LineCurve3:class yft extends Od{constructor(o=new te,a=new te){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=o,this.v2=a}getPoint(o,a=new te){const c=a;return 1===o?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(o).add(this.v1)),c}getPointAt(o,a){return this.getPoint(o,a)}copy(o){return super.copy(o),this.v1.copy(o.v1),this.v2.copy(o.v2),this}toJSON(){const o=super.toJSON();return o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this}},QuadraticBezierCurve:c0e,QuadraticBezierCurve3:class u0e extends Od{constructor(o=new te,a=new te,c=new te){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=o,this.v1=a,this.v2=c}getPoint(o,a=new te){const c=a,u=this.v0,h=this.v1,d=this.v2;return c.set(Zw(o,u.x,h.x,d.x),Zw(o,u.y,h.y,d.y),Zw(o,u.z,h.z,d.z)),c}copy(o){return super.copy(o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this}toJSON(){const o=super.toJSON();return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this}},SplineCurve:h0e});class _ft extends Od{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(o){this.curves.push(o)}closePath(){const o=this.curves[0].getPoint(0),a=this.curves[this.curves.length-1].getPoint(1);o.equals(a)||this.curves.push(new HH(a,o))}getPoint(o,a){const c=o*this.getLength(),u=this.getCurveLengths();let h=0;for(;h<u.length;){if(u[h]>=c){const d=u[h]-c,f=this.curves[h],p=f.getLength();return f.getPointAt(0===p?0:1-d/p,a)}h++}return null}getLength(){const o=this.getCurveLengths();return o[o.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const o=[];let a=0;for(let c=0,u=this.curves.length;c<u;c++)a+=this.curves[c].getLength(),o.push(a);return this.cacheLengths=o,o}getSpacedPoints(o=40){const a=[];for(let c=0;c<=o;c++)a.push(this.getPoint(c/o));return this.autoClose&&a.push(a[0]),a}getPoints(o=12){const a=[];let c;for(let u=0,h=this.curves;u<h.length;u++){const d=h[u],p=d.getPoints(d.isEllipseCurve?2*o:d.isLineCurve||d.isLineCurve3?1:d.isSplineCurve?o*d.points.length:o);for(let g=0;g<p.length;g++){const m=p[g];c&&c.equals(m)||(a.push(m),c=m)}}return this.autoClose&&a.length>1&&!a[a.length-1].equals(a[0])&&a.push(a[0]),a}copy(o){super.copy(o),this.curves=[];for(let a=0,c=o.curves.length;a<c;a++)this.curves.push(o.curves[a].clone());return this.autoClose=o.autoClose,this}toJSON(){const o=super.toJSON();o.autoClose=this.autoClose,o.curves=[];for(let a=0,c=this.curves.length;a<c;a++)o.curves.push(this.curves[a].toJSON());return o}fromJSON(o){super.fromJSON(o),this.autoClose=o.autoClose,this.curves=[];for(let a=0,c=o.curves.length;a<c;a++){const u=o.curves[a];this.curves.push((new $H[u.type]).fromJSON(u))}return this}}class H0 extends _ft{constructor(o){super(),this.type="Path",this.currentPoint=new dt,o&&this.setFromPoints(o)}setFromPoints(o){this.moveTo(o[0].x,o[0].y);for(let a=1,c=o.length;a<c;a++)this.lineTo(o[a].x,o[a].y);return this}moveTo(o,a){return this.currentPoint.set(o,a),this}lineTo(o,a){const c=new HH(this.currentPoint.clone(),new dt(o,a));return this.curves.push(c),this.currentPoint.set(o,a),this}quadraticCurveTo(o,a,c,u){const h=new c0e(this.currentPoint.clone(),new dt(o,a),new dt(c,u));return this.curves.push(h),this.currentPoint.set(c,u),this}bezierCurveTo(o,a,c,u,h,d){const f=new l0e(this.currentPoint.clone(),new dt(o,a),new dt(c,u),new dt(h,d));return this.curves.push(f),this.currentPoint.set(h,d),this}splineThru(o){const a=[this.currentPoint.clone()].concat(o),c=new h0e(a);return this.curves.push(c),this.currentPoint.copy(o[o.length-1]),this}arc(o,a,c,u,h,d){return this.absarc(o+this.currentPoint.x,a+this.currentPoint.y,c,u,h,d),this}absarc(o,a,c,u,h,d){return this.absellipse(o,a,c,c,u,h,d),this}ellipse(o,a,c,u,h,d,f,p){return this.absellipse(o+this.currentPoint.x,a+this.currentPoint.y,c,u,h,d,f,p),this}absellipse(o,a,c,u,h,d,f,p){const g=new LH(o,a,c,u,h,d,f,p);if(this.curves.length>0){const v=g.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(g);const m=g.getPoint(1);return this.currentPoint.copy(m),this}copy(o){return super.copy(o),this.currentPoint.copy(o.currentPoint),this}toJSON(){const o=super.toJSON();return o.currentPoint=this.currentPoint.toArray(),o}fromJSON(o){return super.fromJSON(o),this.currentPoint.fromArray(o.currentPoint),this}}class Mg extends Ai{constructor(o=[],a=[],c=1,u=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:o,indices:a,radius:c,detail:u};const h=[],d=[];function p(w,O,T,M){const A=M+1,I=[];for(let E=0;E<=A;E++){I[E]=[];const P=w.clone().lerp(T,E/A),B=O.clone().lerp(T,E/A),V=A-E;for(let Q=0;Q<=V;Q++)I[E][Q]=0===Q&&E===A?P:P.clone().lerp(B,Q/V)}for(let E=0;E<A;E++)for(let P=0;P<2*(A-E)-1;P++){const B=Math.floor(P/2);P%2==0?(y(I[E][B+1]),y(I[E+1][B]),y(I[E][B])):(y(I[E][B+1]),y(I[E+1][B+1]),y(I[E+1][B]))}}function y(w){h.push(w.x,w.y,w.z)}function _(w,O){const T=3*w;O.x=o[T+0],O.y=o[T+1],O.z=o[T+2]}function C(w,O,T,M){M<0&&1===w.x&&(d[O]=w.x-1),0===T.x&&0===T.z&&(d[O]=M/2/Math.PI+.5)}function x(w){return Math.atan2(w.z,-w.x)}function S(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}(function f(w){const O=new te,T=new te,M=new te;for(let A=0;A<a.length;A+=3)_(a[A+0],O),_(a[A+1],T),_(a[A+2],M),p(O,T,M,w)})(u),function g(w){const O=new te;for(let T=0;T<h.length;T+=3)O.x=h[T+0],O.y=h[T+1],O.z=h[T+2],O.normalize().multiplyScalar(w),h[T+0]=O.x,h[T+1]=O.y,h[T+2]=O.z}(c),function m(){const w=new te;for(let O=0;O<h.length;O+=3){w.x=h[O+0],w.y=h[O+1],w.z=h[O+2];const T=x(w)/2/Math.PI+.5,M=S(w)/Math.PI+.5;d.push(T,1-M)}(function b(){const w=new te,O=new te,T=new te,M=new te,A=new dt,I=new dt,E=new dt;for(let P=0,B=0;P<h.length;P+=9,B+=6){w.set(h[P+0],h[P+1],h[P+2]),O.set(h[P+3],h[P+4],h[P+5]),T.set(h[P+6],h[P+7],h[P+8]),A.set(d[B+0],d[B+1]),I.set(d[B+2],d[B+3]),E.set(d[B+4],d[B+5]),M.copy(w).add(O).add(T).divideScalar(3);const V=x(M);C(A,B+0,w,V),C(I,B+2,O,V),C(E,B+4,T,V)}})(),function v(){for(let w=0;w<d.length;w+=6){const O=d[w+0],T=d[w+2],M=d[w+4],A=Math.max(O,T,M),I=Math.min(O,T,M);A>.9&&I<.1&&(O<.2&&(d[w+0]+=1),T<.2&&(d[w+2]+=1),M<.2&&(d[w+4]+=1))}}()}(),this.setAttribute("position",new Dn(h,3)),this.setAttribute("normal",new Dn(h.slice(),3)),this.setAttribute("uv",new Dn(d,2)),0===u?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(o){return new Mg(o.vertices,o.indices,o.radius,o.details)}}class Hf extends H0{constructor(o){super(o),this.uuid=kc(),this.type="Shape",this.holes=[]}getPointsHoles(o){const a=[];for(let c=0,u=this.holes.length;c<u;c++)a[c]=this.holes[c].getPoints(o);return a}extractPoints(o){return{shape:this.getPoints(o),holes:this.getPointsHoles(o)}}copy(o){super.copy(o),this.holes=[];for(let a=0,c=o.holes.length;a<c;a++)this.holes.push(o.holes[a].clone());return this}toJSON(){const o=super.toJSON();o.uuid=this.uuid,o.holes=[];for(let a=0,c=this.holes.length;a<c;a++)o.holes.push(this.holes[a].toJSON());return o}fromJSON(o){super.fromJSON(o),this.uuid=o.uuid,this.holes=[];for(let a=0,c=o.holes.length;a<c;a++){const u=o.holes[a];this.holes.push((new H0).fromJSON(u))}return this}}function d0e(l,o,a,c,u){let h,d;if(u===function Lft(l,o,a,c){let u=0;for(let h=o,d=a-c;h<a;h+=c)u+=(l[d]-l[h])*(l[h+1]+l[d+1]),d=h;return u}(l,o,a,c)>0)for(h=o;h<a;h+=c)d=g0e(h,l[h],l[h+1],d);else for(h=a-c;h>=o;h-=c)d=g0e(h,l[h],l[h+1],d);return d&&BI(d,d.next)&&(e2(d),d=d.next),d}function Eg(l,o){if(!l)return l;o||(o=l);let c,a=l;do{if(c=!1,a.steiner||!BI(a,a.next)&&0!==Os(a.prev,a,a.next))a=a.next;else{if(e2(a),a=o=a.prev,a===a.next)break;c=!0}}while(c||a!==o);return o}function Kw(l,o,a,c,u,h,d){if(!l)return;!d&&h&&function Aft(l,o,a,c){let u=l;do{null===u.z&&(u.z=GH(u.x,u.y,o,a,c)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next}while(u!==l);u.prevZ.nextZ=null,u.prevZ=null,function Ift(l){let o,a,c,u,h,d,f,p,g=1;do{for(a=l,l=null,h=null,d=0;a;){for(d++,c=a,f=0,o=0;o<g&&(f++,c=c.nextZ,c);o++);for(p=g;f>0||p>0&&c;)0!==f&&(0===p||!c||a.z<=c.z)?(u=a,a=a.nextZ,f--):(u=c,c=c.nextZ,p--),h?h.nextZ=u:l=u,u.prevZ=h,h=u;a=c}h.nextZ=null,g*=2}while(d>1)}(u)}(l,c,u,h);let p,g,f=l;for(;l.prev!==l.next;)if(p=l.prev,g=l.next,h?Sft(l,c,u,h):Cft(l))o.push(p.i/a),o.push(l.i/a),o.push(g.i/a),e2(l),l=g.next,f=g.next;else if((l=g)===f){d?1===d?Kw(l=wft(Eg(l),o,a),o,a,c,u,h,2):2===d&&Tft(l,o,a,c,u,h):Kw(Eg(l),o,a,c,u,h,1);break}}function Cft(l){const o=l.prev,a=l,c=l.next;if(Os(o,a,c)>=0)return!1;let u=l.next.next;for(;u!==l.prev;){if(j1(o.x,o.y,a.x,a.y,c.x,c.y,u.x,u.y)&&Os(u.prev,u,u.next)>=0)return!1;u=u.next}return!0}function Sft(l,o,a,c){const u=l.prev,h=l,d=l.next;if(Os(u,h,d)>=0)return!1;const g=u.x>h.x?u.x>d.x?u.x:d.x:h.x>d.x?h.x:d.x,m=u.y>h.y?u.y>d.y?u.y:d.y:h.y>d.y?h.y:d.y,v=GH(u.x<h.x?u.x<d.x?u.x:d.x:h.x<d.x?h.x:d.x,u.y<h.y?u.y<d.y?u.y:d.y:h.y<d.y?h.y:d.y,o,a,c),y=GH(g,m,o,a,c);let _=l.prevZ,b=l.nextZ;for(;_&&_.z>=v&&b&&b.z<=y;){if(_!==l.prev&&_!==l.next&&j1(u.x,u.y,h.x,h.y,d.x,d.y,_.x,_.y)&&Os(_.prev,_,_.next)>=0||(_=_.prevZ,b!==l.prev&&b!==l.next&&j1(u.x,u.y,h.x,h.y,d.x,d.y,b.x,b.y)&&Os(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;_&&_.z>=v;){if(_!==l.prev&&_!==l.next&&j1(u.x,u.y,h.x,h.y,d.x,d.y,_.x,_.y)&&Os(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=y;){if(b!==l.prev&&b!==l.next&&j1(u.x,u.y,h.x,h.y,d.x,d.y,b.x,b.y)&&Os(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function wft(l,o,a){let c=l;do{const u=c.prev,h=c.next.next;!BI(u,h)&&f0e(u,c,c.next,h)&&Jw(u,h)&&Jw(h,u)&&(o.push(u.i/a),o.push(c.i/a),o.push(h.i/a),e2(c),e2(c.next),c=l=h),c=c.next}while(c!==l);return Eg(c)}function Tft(l,o,a,c,u,h){let d=l;do{let f=d.next.next;for(;f!==d.prev;){if(d.i!==f.i&&Rft(d,f)){let p=p0e(d,f);return d=Eg(d,d.next),p=Eg(p,p.next),Kw(d,o,a,c,u,h),void Kw(p,o,a,c,u,h)}f=f.next}d=d.next}while(d!==l)}function Dft(l,o){return l.x-o.x}function kft(l,o){if(o=function Mft(l,o){let a=o;const c=l.x,u=l.y;let d,h=-1/0;do{if(u<=a.y&&u>=a.next.y&&a.next.y!==a.y){const y=a.x+(u-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(y<=c&&y>h){if(h=y,y===c){if(u===a.y)return a;if(u===a.next.y)return a.next}d=a.x<a.next.x?a:a.next}}a=a.next}while(a!==o);if(!d)return null;if(c===h)return d;const f=d,p=d.x,g=d.y;let v,m=1/0;a=d;do{c>=a.x&&a.x>=p&&c!==a.x&&j1(u<g?c:h,u,p,g,u<g?h:c,u,a.x,a.y)&&(v=Math.abs(u-a.y)/(c-a.x),Jw(a,l)&&(v<m||v===m&&(a.x>d.x||a.x===d.x&&Eft(d,a)))&&(d=a,m=v)),a=a.next}while(a!==f);return d}(l,o),o){const a=p0e(o,l);Eg(o,o.next),Eg(a,a.next)}}function Eft(l,o){return Os(l.prev,l,o.prev)<0&&Os(o.next,l,l.next)<0}function GH(l,o,a,c,u){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-a)*u)|l<<8))|l<<4))|l<<2))|l<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-c)*u)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function Pft(l){let o=l,a=l;do{(o.x<a.x||o.x===a.x&&o.y<a.y)&&(a=o),o=o.next}while(o!==l);return a}function j1(l,o,a,c,u,h,d,f){return(u-d)*(o-f)-(l-d)*(h-f)>=0&&(l-d)*(c-f)-(a-d)*(o-f)>=0&&(a-d)*(h-f)-(u-d)*(c-f)>=0}function Rft(l,o){return l.next.i!==o.i&&l.prev.i!==o.i&&!function Fft(l,o){let a=l;do{if(a.i!==l.i&&a.next.i!==l.i&&a.i!==o.i&&a.next.i!==o.i&&f0e(a,a.next,l,o))return!0;a=a.next}while(a!==l);return!1}(l,o)&&(Jw(l,o)&&Jw(o,l)&&function Nft(l,o){let a=l,c=!1;const u=(l.x+o.x)/2,h=(l.y+o.y)/2;do{a.y>h!=a.next.y>h&&a.next.y!==a.y&&u<(a.next.x-a.x)*(h-a.y)/(a.next.y-a.y)+a.x&&(c=!c),a=a.next}while(a!==l);return c}(l,o)&&(Os(l.prev,l,o.prev)||Os(l,o.prev,o))||BI(l,o)&&Os(l.prev,l,l.next)>0&&Os(o.prev,o,o.next)>0)}function Os(l,o,a){return(o.y-l.y)*(a.x-o.x)-(o.x-l.x)*(a.y-o.y)}function BI(l,o){return l.x===o.x&&l.y===o.y}function f0e(l,o,a,c){const u=zI(Os(l,o,a)),h=zI(Os(l,o,c)),d=zI(Os(a,c,l)),f=zI(Os(a,c,o));return!!(u!==h&&d!==f||0===u&&VI(l,a,o)||0===h&&VI(l,c,o)||0===d&&VI(a,l,c)||0===f&&VI(a,o,c))}function VI(l,o,a){return o.x<=Math.max(l.x,a.x)&&o.x>=Math.min(l.x,a.x)&&o.y<=Math.max(l.y,a.y)&&o.y>=Math.min(l.y,a.y)}function zI(l){return l>0?1:l<0?-1:0}function Jw(l,o){return Os(l.prev,l,l.next)<0?Os(l,o,l.next)>=0&&Os(l,l.prev,o)>=0:Os(l,o,l.prev)<0||Os(l,l.next,o)<0}function p0e(l,o){const a=new QH(l.i,l.x,l.y),c=new QH(o.i,o.x,o.y),u=l.next,h=o.prev;return l.next=o,o.prev=l,a.next=u,u.prev=a,c.next=a,a.prev=c,h.next=c,c.prev=h,c}function g0e(l,o,a,c){const u=new QH(l,o,a);return c?(u.next=c.next,u.prev=c,c.next.prev=u,c.next=u):(u.prev=u,u.next=u),u}function e2(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function QH(l,o,a){this.i=l,this.x=o,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class $f{static area(o){const a=o.length;let c=0;for(let u=a-1,h=0;h<a;u=h++)c+=o[u].x*o[h].y-o[h].x*o[u].y;return.5*c}static isClockWise(o){return $f.area(o)<0}static triangulateShape(o,a){const c=[],u=[],h=[];m0e(o),v0e(c,o);let d=o.length;a.forEach(m0e);for(let p=0;p<a.length;p++)u.push(d),d+=a[p].length,v0e(c,a[p]);const f=function(l,o,a=2){const c=o&&o.length,u=c?o[0]*a:l.length;let h=d0e(l,0,u,a,!0);const d=[];if(!h||h.next===h.prev)return d;let f,p,g,m,v,y,_;if(c&&(h=function Oft(l,o,a,c){const u=[];let h,d,f,p,g;for(h=0,d=o.length;h<d;h++)f=o[h]*c,p=h<d-1?o[h+1]*c:l.length,g=d0e(l,f,p,c,!1),g===g.next&&(g.steiner=!0),u.push(Pft(g));for(u.sort(Dft),h=0;h<u.length;h++)kft(u[h],a),a=Eg(a,a.next);return a}(l,o,h,a)),l.length>80*a){f=g=l[0],p=m=l[1];for(let b=a;b<u;b+=a)v=l[b],y=l[b+1],v<f&&(f=v),y<p&&(p=y),v>g&&(g=v),y>m&&(m=y);_=Math.max(g-f,m-p),_=0!==_?1/_:0}return Kw(h,d,a,f,p,_),d}(c,u);for(let p=0;p<f.length;p+=3)h.push(f.slice(p,p+3));return h}}function m0e(l){const o=l.length;o>2&&l[o-1].equals(l[0])&&l.pop()}function v0e(l,o){for(let a=0;a<o.length;a++)l.push(o[a].x),l.push(o[a].y)}class q1 extends Ai{constructor(o=new Hf([new dt(.5,.5),new dt(-.5,.5),new dt(-.5,-.5),new dt(.5,-.5)]),a={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:o,options:a},o=Array.isArray(o)?o:[o];const c=this,u=[],h=[];for(let f=0,p=o.length;f<p;f++)d(o[f]);function d(f){const p=[],g=void 0!==a.curveSegments?a.curveSegments:12,m=void 0!==a.steps?a.steps:1;let v=void 0!==a.depth?a.depth:1,y=void 0===a.bevelEnabled||a.bevelEnabled,_=void 0!==a.bevelThickness?a.bevelThickness:.2,b=void 0!==a.bevelSize?a.bevelSize:_-.1,C=void 0!==a.bevelOffset?a.bevelOffset:0,x=void 0!==a.bevelSegments?a.bevelSegments:3;const S=a.extrudePath,w=void 0!==a.UVGenerator?a.UVGenerator:Bft;void 0!==a.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),v=a.amount);let O,M,A,I,E,T=!1;S&&(O=S.getSpacedPoints(m),T=!0,y=!1,M=S.computeFrenetFrames(m,!1),A=new te,I=new te,E=new te),y||(x=0,_=0,b=0,C=0);const P=f.extractPoints(g);let B=P.shape;const V=P.holes;if(!$f.isClockWise(B)){B=B.reverse();for(let ue=0,Re=V.length;ue<Re;ue++){const Ye=V[ue];$f.isClockWise(Ye)&&(V[ue]=Ye.reverse())}}const j=$f.triangulateShape(B,V),N=B;for(let ue=0,Re=V.length;ue<Re;ue++)B=B.concat(V[ue]);function U(ue,Re,Ye){return Re||console.error("THREE.ExtrudeGeometry: vec does not exist"),Re.clone().multiplyScalar(Ye).add(ue)}const z=B.length,$=j.length;function H(ue,Re,Ye){let nt,Qe,we;const We=ue.x-Re.x,Bt=ue.y-Re.y,bn=Ye.x-ue.x,Ln=Ye.y-ue.y,he=We*We+Bt*Bt;if(Math.abs(We*Ln-Bt*bn)>Number.EPSILON){const rt=Math.sqrt(he),_t=Math.sqrt(bn*bn+Ln*Ln),Ut=Re.x-Bt/rt,It=Re.y+We/rt,Zt=((Ye.x-Ln/_t-Ut)*Ln-(Ye.y+bn/_t-It)*bn)/(We*Ln-Bt*bn);nt=Ut+We*Zt-ue.x,Qe=It+Bt*Zt-ue.y;const Wt=nt*nt+Qe*Qe;if(Wt<=2)return new dt(nt,Qe);we=Math.sqrt(Wt/2)}else{let rt=!1;We>Number.EPSILON?bn>Number.EPSILON&&(rt=!0):We<-Number.EPSILON?bn<-Number.EPSILON&&(rt=!0):Math.sign(Bt)===Math.sign(Ln)&&(rt=!0),rt?(nt=-Bt,Qe=We,we=Math.sqrt(he)):(nt=We,Qe=Bt,we=Math.sqrt(he/2))}return new dt(nt/we,Qe/we)}const G=[];for(let ue=0,Re=N.length,Ye=Re-1,nt=ue+1;ue<Re;ue++,Ye++,nt++)Ye===Re&&(Ye=0),nt===Re&&(nt=0),G[ue]=H(N[ue],N[Ye],N[nt]);const W=[];let X,K=G.concat();for(let ue=0,Re=V.length;ue<Re;ue++){const Ye=V[ue];X=[];for(let nt=0,Qe=Ye.length,we=Qe-1,We=nt+1;nt<Qe;nt++,we++,We++)we===Qe&&(we=0),We===Qe&&(We=0),X[nt]=H(Ye[nt],Ye[we],Ye[We]);W.push(X),K=K.concat(X)}for(let ue=0;ue<x;ue++){const Re=ue/x,Ye=_*Math.cos(Re*Math.PI/2),nt=b*Math.sin(Re*Math.PI/2)+C;for(let Qe=0,we=N.length;Qe<we;Qe++){const We=U(N[Qe],G[Qe],nt);Oe(We.x,We.y,-Ye)}for(let Qe=0,we=V.length;Qe<we;Qe++){const We=V[Qe];X=W[Qe];for(let Bt=0,bn=We.length;Bt<bn;Bt++){const Ln=U(We[Bt],X[Bt],nt);Oe(Ln.x,Ln.y,-Ye)}}}const ae=b+C;for(let ue=0;ue<z;ue++){const Re=y?U(B[ue],K[ue],ae):B[ue];T?(I.copy(M.normals[0]).multiplyScalar(Re.x),A.copy(M.binormals[0]).multiplyScalar(Re.y),E.copy(O[0]).add(I).add(A),Oe(E.x,E.y,E.z)):Oe(Re.x,Re.y,0)}for(let ue=1;ue<=m;ue++)for(let Re=0;Re<z;Re++){const Ye=y?U(B[Re],K[Re],ae):B[Re];T?(I.copy(M.normals[ue]).multiplyScalar(Ye.x),A.copy(M.binormals[ue]).multiplyScalar(Ye.y),E.copy(O[ue]).add(I).add(A),Oe(E.x,E.y,E.z)):Oe(Ye.x,Ye.y,v/m*ue)}for(let ue=x-1;ue>=0;ue--){const Re=ue/x,Ye=_*Math.cos(Re*Math.PI/2),nt=b*Math.sin(Re*Math.PI/2)+C;for(let Qe=0,we=N.length;Qe<we;Qe++){const We=U(N[Qe],G[Qe],nt);Oe(We.x,We.y,v+Ye)}for(let Qe=0,we=V.length;Qe<we;Qe++){const We=V[Qe];X=W[Qe];for(let Bt=0,bn=We.length;Bt<bn;Bt++){const Ln=U(We[Bt],X[Bt],nt);T?Oe(Ln.x,Ln.y+O[m-1].y,O[m-1].x+Ye):Oe(Ln.x,Ln.y,v+Ye)}}}function ve(ue,Re){let Ye=ue.length;for(;--Ye>=0;){const nt=Ye;let Qe=Ye-1;Qe<0&&(Qe=ue.length-1);for(let we=0,We=m+2*x;we<We;we++){const Bt=z*we,bn=z*(we+1);Me(Re+nt+Bt,Re+Qe+Bt,Re+Qe+bn,Re+nt+bn)}}}function Oe(ue,Re,Ye){p.push(ue),p.push(Re),p.push(Ye)}function $e(ue,Re,Ye){Ie(ue),Ie(Re),Ie(Ye);const nt=u.length/3,Qe=w.generateTopUV(c,u,nt-3,nt-2,nt-1);Xe(Qe[0]),Xe(Qe[1]),Xe(Qe[2])}function Me(ue,Re,Ye,nt){Ie(ue),Ie(Re),Ie(nt),Ie(Re),Ie(Ye),Ie(nt);const Qe=u.length/3,we=w.generateSideWallUV(c,u,Qe-6,Qe-3,Qe-2,Qe-1);Xe(we[0]),Xe(we[1]),Xe(we[3]),Xe(we[1]),Xe(we[2]),Xe(we[3])}function Ie(ue){u.push(p[3*ue+0]),u.push(p[3*ue+1]),u.push(p[3*ue+2])}function Xe(ue){h.push(ue.x),h.push(ue.y)}(function se(){const ue=u.length/3;if(y){let Re=0,Ye=z*Re;for(let nt=0;nt<$;nt++){const Qe=j[nt];$e(Qe[2]+Ye,Qe[1]+Ye,Qe[0]+Ye)}Re=m+2*x,Ye=z*Re;for(let nt=0;nt<$;nt++){const Qe=j[nt];$e(Qe[0]+Ye,Qe[1]+Ye,Qe[2]+Ye)}}else{for(let Re=0;Re<$;Re++){const Ye=j[Re];$e(Ye[2],Ye[1],Ye[0])}for(let Re=0;Re<$;Re++){const Ye=j[Re];$e(Ye[0]+z*m,Ye[1]+z*m,Ye[2]+z*m)}}c.addGroup(ue,u.length/3-ue,0)})(),function Ce(){const ue=u.length/3;let Re=0;ve(N,Re),Re+=N.length;for(let Ye=0,nt=V.length;Ye<nt;Ye++){const Qe=V[Ye];ve(Qe,Re),Re+=Qe.length}c.addGroup(ue,u.length/3-ue,1)}()}this.setAttribute("position",new Dn(u,3)),this.setAttribute("uv",new Dn(h,2)),this.computeVertexNormals()}toJSON(){const o=super.toJSON();return function Vft(l,o,a){if(a.shapes=[],Array.isArray(l))for(let c=0,u=l.length;c<u;c++)a.shapes.push(l[c].uuid);else a.shapes.push(l.uuid);return a.options=Object.assign({},o),void 0!==o.extrudePath&&(a.options.extrudePath=o.extrudePath.toJSON()),a}(this.parameters.shapes,this.parameters.options,o)}static fromJSON(o,a){const c=[];for(let h=0,d=o.shapes.length;h<d;h++)c.push(a[o.shapes[h]]);const u=o.options.extrudePath;return void 0!==u&&(o.options.extrudePath=(new $H[u.type]).fromJSON(u)),new q1(c,o.options)}}const Bft={generateTopUV:function(l,o,a,c,u){const f=o[3*c],p=o[3*c+1],g=o[3*u],m=o[3*u+1];return[new dt(o[3*a],o[3*a+1]),new dt(f,p),new dt(g,m)]},generateSideWallUV:function(l,o,a,c,u,h){const d=o[3*a],f=o[3*a+1],p=o[3*a+2],g=o[3*c],m=o[3*c+1],v=o[3*c+2],y=o[3*u],_=o[3*u+1],b=o[3*u+2],C=o[3*h],x=o[3*h+1],S=o[3*h+2];return Math.abs(f-m)<Math.abs(d-g)?[new dt(d,1-p),new dt(g,1-v),new dt(y,1-b),new dt(C,1-S)]:[new dt(f,1-p),new dt(m,1-v),new dt(_,1-b),new dt(x,1-S)]}};class t2 extends Mg{constructor(o=1,a=0){const c=(1+Math.sqrt(5))/2;super([-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o,a),this.type="IcosahedronGeometry",this.parameters={radius:o,detail:a}}static fromJSON(o){return new t2(o.radius,o.detail)}}class Z1 extends Ai{constructor(o=1,a=32,c=16,u=0,h=2*Math.PI,d=0,f=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:o,widthSegments:a,heightSegments:c,phiStart:u,phiLength:h,thetaStart:d,thetaLength:f},a=Math.max(3,Math.floor(a)),c=Math.max(2,Math.floor(c));const p=Math.min(d+f,Math.PI);let g=0;const m=[],v=new te,y=new te,_=[],b=[],C=[],x=[];for(let S=0;S<=c;S++){const w=[],O=S/c;let T=0;0==S&&0==d?T=.5/a:S==c&&p==Math.PI&&(T=-.5/a);for(let M=0;M<=a;M++){const A=M/a;v.x=-o*Math.cos(u+A*h)*Math.sin(d+O*f),v.y=o*Math.cos(d+O*f),v.z=o*Math.sin(u+A*h)*Math.sin(d+O*f),b.push(v.x,v.y,v.z),y.copy(v).normalize(),C.push(y.x,y.y,y.z),x.push(A+T,1-O),w.push(g++)}m.push(w)}for(let S=0;S<c;S++)for(let w=0;w<a;w++){const O=m[S][w+1],T=m[S][w],M=m[S+1][w],A=m[S+1][w+1];(0!==S||d>0)&&_.push(O,T,A),(S!==c-1||p<Math.PI)&&_.push(T,M,A)}this.setIndex(_),this.setAttribute("position",new Dn(b,3)),this.setAttribute("normal",new Dn(C,3)),this.setAttribute("uv",new Dn(x,2))}static fromJSON(o){return new Z1(o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength)}}class b0e extends B0{constructor(o){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new sn(16777215),this.specular=new sn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new sn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.specular.copy(o.specular),this.shininess=o.shininess,this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.flatShading=o.flatShading,this.fog=o.fog,this}}class x0e extends B0{constructor(o){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new sn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new sn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.map=o.map,this.gradientMap=o.gradientMap,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.alphaMap=o.alphaMap,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.fog=o.fog,this}}const ds={arraySlice:function(l,o,a){return ds.isTypedArray(l)?new l.constructor(l.subarray(o,void 0!==a?a:l.length)):l.slice(o,a)},convertArray:function(l,o,a){return!l||!a&&l.constructor===o?l:"number"==typeof o.BYTES_PER_ELEMENT?new o(l):Array.prototype.slice.call(l)},isTypedArray:function(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)},getKeyframeOrder:function(l){const a=l.length,c=new Array(a);for(let u=0;u!==a;++u)c[u]=u;return c.sort(function o(u,h){return l[u]-l[h]}),c},sortedArray:function(l,o,a){const c=l.length,u=new l.constructor(c);for(let h=0,d=0;d!==c;++h){const f=a[h]*o;for(let p=0;p!==o;++p)u[d++]=l[f+p]}return u},flattenJSON:function(l,o,a,c){let u=1,h=l[0];for(;void 0!==h&&void 0===h[c];)h=l[u++];if(void 0===h)return;let d=h[c];if(void 0!==d)if(Array.isArray(d))do{d=h[c],void 0!==d&&(o.push(h.time),a.push.apply(a,d)),h=l[u++]}while(void 0!==h);else if(void 0!==d.toArray)do{d=h[c],void 0!==d&&(o.push(h.time),d.toArray(a,a.length)),h=l[u++]}while(void 0!==h);else do{d=h[c],void 0!==d&&(o.push(h.time),a.push(d)),h=l[u++]}while(void 0!==h)},subclip:function(l,o,a,c,u=30){const h=l.clone();h.name=o;const d=[];for(let p=0;p<h.tracks.length;++p){const g=h.tracks[p],m=g.getValueSize(),v=[],y=[];for(let _=0;_<g.times.length;++_){const b=g.times[_]*u;if(!(b<a||b>=c)){v.push(g.times[_]);for(let C=0;C<m;++C)y.push(g.values[_*m+C])}}0!==v.length&&(g.times=ds.convertArray(v,g.times.constructor),g.values=ds.convertArray(y,g.values.constructor),d.push(g))}h.tracks=d;let f=1/0;for(let p=0;p<h.tracks.length;++p)f>h.tracks[p].times[0]&&(f=h.tracks[p].times[0]);for(let p=0;p<h.tracks.length;++p)h.tracks[p].shift(-1*f);return h.resetDuration(),h},makeClipAdditive:function(l,o=0,a=l,c=30){c<=0&&(c=30);const u=a.tracks.length,h=o/c;for(let d=0;d<u;++d){const f=a.tracks[d],p=f.ValueTypeName;if("bool"===p||"string"===p)continue;const g=l.tracks.find(function(S){return S.name===f.name&&S.ValueTypeName===p});if(void 0===g)continue;let m=0;const v=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);let y=0;const _=g.getValueSize();g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=_/3);const b=f.times.length-1;let C;if(h<=f.times[0])C=ds.arraySlice(f.values,m,v-m);else if(h>=f.times[b]){const S=b*v+m;C=ds.arraySlice(f.values,S,S+v-m)}else{const S=f.createInterpolant(),w=m,O=v-m;S.evaluate(h),C=ds.arraySlice(S.resultBuffer,w,O)}"quaternion"===p&&(new Mc).fromArray(C).normalize().conjugate().toArray(C);const x=g.times.length;for(let S=0;S<x;++S){const w=S*_+y;if("quaternion"===p)Mc.multiplyQuaternionsFlat(g.values,w,C,0,g.values,w);else{const O=_-2*y;for(let T=0;T<O;++T)g.values[w+T]-=C[T]}}}return l.blendMode=2501,l}};class jI{constructor(o,a,c,u){this.parameterPositions=o,this._cachedIndex=0,this.resultBuffer=void 0!==u?u:new a.constructor(c),this.sampleValues=a,this.valueSize=c,this.settings=null,this.DefaultSettings_={}}evaluate(o){const a=this.parameterPositions;let c=this._cachedIndex,u=a[c],h=a[c-1];e:{t:{let d;n:{i:if(!(o<u)){for(let f=c+2;;){if(void 0===u){if(o<h)break i;return c=a.length,this._cachedIndex=c,this.copySampleValue_(c-1)}if(c===f)break;if(h=u,u=a[++c],o<u)break t}d=a.length;break n}if(o>=h)break e;{const f=a[1];o<f&&(c=2,h=f);for(let p=c-2;;){if(void 0===h)return this._cachedIndex=0,this.copySampleValue_(0);if(c===p)break;if(u=h,h=a[--c-1],o>=h)break t}d=c,c=0}}for(;c<d;){const f=c+d>>>1;o<a[f]?d=f:c=f+1}if(u=a[c],h=a[c-1],void 0===h)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===u)return c=a.length,this._cachedIndex=c,this.copySampleValue_(c-1)}this._cachedIndex=c,this.intervalChanged_(c,h,u)}return this.interpolate_(c,h,o,u)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(o){const a=this.resultBuffer,c=this.sampleValues,u=this.valueSize,h=o*u;for(let d=0;d!==u;++d)a[d]=c[h+d];return a}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Xft extends jI{constructor(o,a,c,u){super(o,a,c,u),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(o,a,c){const u=this.parameterPositions;let h=o-2,d=o+1,f=u[h],p=u[d];if(void 0===f)switch(this.getSettings_().endingStart){case 2401:h=o,f=2*a-c;break;case 2402:h=u.length-2,f=a+u[h]-u[h+1];break;default:h=o,f=c}if(void 0===p)switch(this.getSettings_().endingEnd){case 2401:d=o,p=2*c-a;break;case 2402:d=1,p=c+u[1]-u[0];break;default:d=o-1,p=a}const g=.5*(c-a),m=this.valueSize;this._weightPrev=g/(a-f),this._weightNext=g/(p-c),this._offsetPrev=h*m,this._offsetNext=d*m}interpolate_(o,a,c,u){const h=this.resultBuffer,d=this.sampleValues,f=this.valueSize,p=o*f,g=p-f,m=this._offsetPrev,v=this._offsetNext,y=this._weightPrev,_=this._weightNext,b=(c-a)/(u-a),C=b*b,x=C*b,S=-y*x+2*y*C-y*b,w=(1+y)*x+(-1.5-2*y)*C+(-.5+y)*b+1,O=(-1-_)*x+(1.5+_)*C+.5*b,T=_*x-_*C;for(let M=0;M!==f;++M)h[M]=S*d[m+M]+w*d[g+M]+O*d[p+M]+T*d[v+M];return h}}class C0e extends jI{constructor(o,a,c,u){super(o,a,c,u)}interpolate_(o,a,c,u){const h=this.resultBuffer,d=this.sampleValues,f=this.valueSize,p=o*f,g=p-f,m=(c-a)/(u-a),v=1-m;for(let y=0;y!==f;++y)h[y]=d[g+y]*v+d[p+y]*m;return h}}class Yft extends jI{constructor(o,a,c,u){super(o,a,c,u)}interpolate_(o){return this.copySampleValue_(o-1)}}class Dd{constructor(o,a,c,u){if(void 0===o)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===a||0===a.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+o);this.name=o,this.times=ds.convertArray(a,this.TimeBufferType),this.values=ds.convertArray(c,this.ValueBufferType),this.setInterpolation(u||this.DefaultInterpolation)}static toJSON(o){const a=o.constructor;let c;if(a.toJSON!==this.toJSON)c=a.toJSON(o);else{c={name:o.name,times:ds.convertArray(o.times,Array),values:ds.convertArray(o.values,Array)};const u=o.getInterpolation();u!==o.DefaultInterpolation&&(c.interpolation=u)}return c.type=o.ValueTypeName,c}InterpolantFactoryMethodDiscrete(o){return new Yft(this.times,this.values,this.getValueSize(),o)}InterpolantFactoryMethodLinear(o){return new C0e(this.times,this.values,this.getValueSize(),o)}InterpolantFactoryMethodSmooth(o){return new Xft(this.times,this.values,this.getValueSize(),o)}setInterpolation(o){let a;switch(o){case 2300:a=this.InterpolantFactoryMethodDiscrete;break;case 2301:a=this.InterpolantFactoryMethodLinear;break;case 2302:a=this.InterpolantFactoryMethodSmooth}if(void 0===a){const c="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(o===this.DefaultInterpolation)throw new Error(c);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",c),this}return this.createInterpolant=a,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(o){if(0!==o){const a=this.times;for(let c=0,u=a.length;c!==u;++c)a[c]+=o}return this}scale(o){if(1!==o){const a=this.times;for(let c=0,u=a.length;c!==u;++c)a[c]*=o}return this}trim(o,a){const c=this.times,u=c.length;let h=0,d=u-1;for(;h!==u&&c[h]<o;)++h;for(;-1!==d&&c[d]>a;)--d;if(++d,0!==h||d!==u){h>=d&&(d=Math.max(d,1),h=d-1);const f=this.getValueSize();this.times=ds.arraySlice(c,h,d),this.values=ds.arraySlice(this.values,h*f,d*f)}return this}validate(){let o=!0;const a=this.getValueSize();a-Math.floor(a)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),o=!1);const c=this.times,u=this.values,h=c.length;0===h&&(console.error("THREE.KeyframeTrack: Track is empty.",this),o=!1);let d=null;for(let f=0;f!==h;f++){const p=c[f];if("number"==typeof p&&isNaN(p)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,p),o=!1;break}if(null!==d&&d>p){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,p,d),o=!1;break}d=p}if(void 0!==u&&ds.isTypedArray(u))for(let f=0,p=u.length;f!==p;++f){const g=u[f];if(isNaN(g)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,g),o=!1;break}}return o}optimize(){const o=ds.arraySlice(this.times),a=ds.arraySlice(this.values),c=this.getValueSize(),u=2302===this.getInterpolation(),h=o.length-1;let d=1;for(let f=1;f<h;++f){let p=!1;const g=o[f];if(g!==o[f+1]&&(1!==f||g!==o[0]))if(u)p=!0;else{const v=f*c,y=v-c,_=v+c;for(let b=0;b!==c;++b){const C=a[v+b];if(C!==a[y+b]||C!==a[_+b]){p=!0;break}}}if(p){if(f!==d){o[d]=o[f];const v=f*c,y=d*c;for(let _=0;_!==c;++_)a[y+_]=a[v+_]}++d}}if(h>0){o[d]=o[h];for(let f=h*c,p=d*c,g=0;g!==c;++g)a[p+g]=a[f+g];++d}return d!==o.length?(this.times=ds.arraySlice(o,0,d),this.values=ds.arraySlice(a,0,d*c)):(this.times=o,this.values=a),this}clone(){const o=ds.arraySlice(this.times,0),a=ds.arraySlice(this.values,0),u=new(0,this.constructor)(this.name,o,a);return u.createInterpolant=this.createInterpolant,u}}Dd.prototype.TimeBufferType=Float32Array,Dd.prototype.ValueBufferType=Float32Array,Dd.prototype.DefaultInterpolation=2301;class X1 extends Dd{}X1.prototype.ValueTypeName="bool",X1.prototype.ValueBufferType=Array,X1.prototype.DefaultInterpolation=2300,X1.prototype.InterpolantFactoryMethodLinear=void 0,X1.prototype.InterpolantFactoryMethodSmooth=void 0;(class S0e extends Dd{}).prototype.ValueTypeName="color";(class qI extends Dd{}).prototype.ValueTypeName="number";class Kft extends jI{constructor(o,a,c,u){super(o,a,c,u)}interpolate_(o,a,c,u){const h=this.resultBuffer,d=this.sampleValues,f=this.valueSize,p=(c-a)/(u-a);let g=o*f;for(let m=g+f;g!==m;g+=4)Mc.slerpFlat(h,0,d,g-f,d,g,p);return h}}class i2 extends Dd{InterpolantFactoryMethodLinear(o){return new Kft(this.times,this.values,this.getValueSize(),o)}}i2.prototype.ValueTypeName="quaternion",i2.prototype.DefaultInterpolation=2301,i2.prototype.InterpolantFactoryMethodSmooth=void 0;class Y1 extends Dd{}Y1.prototype.ValueTypeName="string",Y1.prototype.ValueBufferType=Array,Y1.prototype.DefaultInterpolation=2300,Y1.prototype.InterpolantFactoryMethodLinear=void 0,Y1.prototype.InterpolantFactoryMethodSmooth=void 0;(class ZI extends Dd{}).prototype.ValueTypeName="vector";const K1={enabled:!1,files:{},add:function(l,o){!1!==this.enabled&&(this.files[l]=o)},get:function(l){if(!1!==this.enabled)return this.files[l]},remove:function(l){delete this.files[l]},clear:function(){this.files={}}};const tpt=new class w0e{constructor(o,a,c){const u=this;let p,h=!1,d=0,f=0;const g=[];this.onStart=void 0,this.onLoad=o,this.onProgress=a,this.onError=c,this.itemStart=function(m){f++,!1===h&&void 0!==u.onStart&&u.onStart(m,d,f),h=!0},this.itemEnd=function(m){d++,void 0!==u.onProgress&&u.onProgress(m,d,f),d===f&&(h=!1,void 0!==u.onLoad&&u.onLoad())},this.itemError=function(m){void 0!==u.onError&&u.onError(m)},this.resolveURL=function(m){return p?p(m):m},this.setURLModifier=function(m){return p=m,this},this.addHandler=function(m,v){return g.push(m,v),this},this.removeHandler=function(m){const v=g.indexOf(m);return-1!==v&&g.splice(v,2),this},this.getHandler=function(m){for(let v=0,y=g.length;v<y;v+=2){const _=g[v],b=g[v+1];if(_.global&&(_.lastIndex=0),_.test(m))return b}return null}}};class T0e{constructor(o){this.manager=void 0!==o?o:tpt,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(o,a){const c=this;return new Promise(function(u,h){c.load(o,u,a,h)})}parse(){}setCrossOrigin(o){return this.crossOrigin=o,this}setWithCredentials(o){return this.withCredentials=o,this}setPath(o){return this.path=o,this}setResourcePath(o){return this.resourcePath=o,this}setRequestHeader(o){return this.requestHeader=o,this}}const Wf={};class Gf extends T0e{constructor(o){super(o)}load(o,a,c,u){void 0===o&&(o=""),void 0!==this.path&&(o=this.path+o),o=this.manager.resolveURL(o);const h=K1.get(o);if(void 0!==h)return this.manager.itemStart(o),setTimeout(()=>{a&&a(h),this.manager.itemEnd(o)},0),h;if(void 0!==Wf[o])return void Wf[o].push({onLoad:a,onProgress:c,onError:u});Wf[o]=[],Wf[o].push({onLoad:a,onProgress:c,onError:u});const d=new Request(o,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),f=this.mimeType,p=this.responseType;fetch(d).then(g=>{if(200===g.status||0===g.status){if(0===g.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===g.body||void 0===g.body.getReader)return g;const m=Wf[o],v=g.body.getReader(),y=g.headers.get("Content-Length"),_=y?parseInt(y):0,b=0!==_;let C=0;const x=new ReadableStream({start(S){!function w(){v.read().then(({done:O,value:T})=>{if(O)S.close();else{C+=T.byteLength;const M=new ProgressEvent("progress",{lengthComputable:b,loaded:C,total:_});for(let A=0,I=m.length;A<I;A++){const E=m[A];E.onProgress&&E.onProgress(M)}S.enqueue(T),w()}})}()}});return new Response(x)}throw Error(`fetch for "${g.url}" responded with ${g.status}: ${g.statusText}`)}).then(g=>{switch(p){case"arraybuffer":return g.arrayBuffer();case"blob":return g.blob();case"document":return g.text().then(m=>(new DOMParser).parseFromString(m,f));case"json":return g.json();default:if(void 0===f)return g.text();{const v=/charset="?([^;"\s]*)"?/i.exec(f),y=v&&v[1]?v[1].toLowerCase():void 0,_=new TextDecoder(y);return g.arrayBuffer().then(b=>_.decode(b))}}}).then(g=>{K1.add(o,g);const m=Wf[o];delete Wf[o];for(let v=0,y=m.length;v<y;v++){const _=m[v];_.onLoad&&_.onLoad(g)}}).catch(g=>{const m=Wf[o];if(void 0===m)throw this.manager.itemError(o),g;delete Wf[o];for(let v=0,y=m.length;v<y;v++){const _=m[v];_.onError&&_.onError(g)}this.manager.itemError(o)}).finally(()=>{this.manager.itemEnd(o)}),this.manager.itemStart(o)}setResponseType(o){return this.responseType=o,this}setMimeType(o){return this.mimeType=o,this}}class jH extends Ac{constructor(o,a=1){super(),this.isLight=!0,this.type="Light",this.color=new sn(o),this.intensity=a}dispose(){}copy(o,a){return super.copy(o,a),this.color.copy(o.color),this.intensity=o.intensity,this}toJSON(o){const a=super.toJSON(o);return a.object.color=this.color.getHex(),a.object.intensity=this.intensity,void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(a.object.distance=this.distance),void 0!==this.angle&&(a.object.angle=this.angle),void 0!==this.decay&&(a.object.decay=this.decay),void 0!==this.penumbra&&(a.object.penumbra=this.penumbra),void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON()),a}}const O0e=new ci,D0e=new te,k0e=new te;class M0e{constructor(o){this.camera=o,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new dt(512,512),this.map=null,this.mapPass=null,this.matrix=new ci,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new CH,this._frameExtents=new dt(1,1),this._viewportCount=1,this._viewports=[new er(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(o){const a=this.camera,c=this.matrix;D0e.setFromMatrixPosition(o.matrixWorld),a.position.copy(D0e),k0e.setFromMatrixPosition(o.target.matrixWorld),a.lookAt(k0e),a.updateMatrixWorld(),O0e.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(O0e),c.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),c.multiply(a.projectionMatrix),c.multiply(a.matrixWorldInverse)}getViewport(o){return this._viewports[o]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(o){return this.camera=o.camera.clone(),this.bias=o.bias,this.radius=o.radius,this.mapSize.copy(o.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const o={};return 0!==this.bias&&(o.bias=this.bias),0!==this.normalBias&&(o.normalBias=this.normalBias),1!==this.radius&&(o.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(o.mapSize=this.mapSize.toArray()),o.camera=this.camera.toJSON(!1).object,delete o.camera.matrix,o}}const E0e=new ci,r2=new te,qH=new te;class spt extends M0e{constructor(){super(new ho(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new dt(4,2),this._viewportCount=6,this._viewports=[new er(2,1,1,1),new er(0,1,1,1),new er(3,1,1,1),new er(1,1,1,1),new er(3,0,1,1),new er(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}updateMatrices(o,a=0){const c=this.camera,u=this.matrix,h=o.distance||c.far;h!==c.far&&(c.far=h,c.updateProjectionMatrix()),r2.setFromMatrixPosition(o.matrixWorld),c.position.copy(r2),qH.copy(c.position),qH.add(this._cubeDirections[a]),c.up.copy(this._cubeUps[a]),c.lookAt(qH),c.updateMatrixWorld(),u.makeTranslation(-r2.x,-r2.y,-r2.z),E0e.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),this._frustum.setFromProjectionMatrix(E0e)}}class A0e extends jH{constructor(o,a,c=0,u=1){super(o,a),this.isPointLight=!0,this.type="PointLight",this.distance=c,this.decay=u,this.shadow=new spt}get power(){return 4*this.intensity*Math.PI}set power(o){this.intensity=o/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(o,a){return super.copy(o,a),this.distance=o.distance,this.decay=o.decay,this.shadow=o.shadow.clone(),this}}class opt extends M0e{constructor(){super(new Uw(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class I0e extends jH{constructor(o,a){super(o,a),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ac.DefaultUp),this.updateMatrix(),this.target=new Ac,this.shadow=new opt}dispose(){this.shadow.dispose()}copy(o){return super.copy(o),this.target=o.target.clone(),this.shadow=o.shadow.clone(),this}}class KI extends jH{constructor(o,a){super(o,a),this.isAmbientLight=!0,this.type="AmbientLight"}}class V0e{constructor(o=!0){this.autoStart=o,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=z0e(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let o=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const a=z0e();o=(a-this.oldTime)/1e3,this.oldTime=a,this.elapsedTime+=o}return o}}function z0e(){return("undefined"==typeof performance?Date:performance).now()}const XH="\\[\\]\\.:\\/",mpt=new RegExp("["+XH+"]","g"),YH="[^"+XH+"]",vpt="[^"+XH.replace("\\.","")+"]",Cpt=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",YH)+/(WCOD+)?/.source.replace("WCOD",vpt)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",YH)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",YH)+"$"),Spt=["material","materials","bones"];class wpt{constructor(o,a,c){const u=c||Jr.parseTrackName(a);this._targetGroup=o,this._bindings=o.subscribe_(a,u)}getValue(o,a){this.bind();const u=this._bindings[this._targetGroup.nCachedObjects_];void 0!==u&&u.getValue(o,a)}setValue(o,a){const c=this._bindings;for(let u=this._targetGroup.nCachedObjects_,h=c.length;u!==h;++u)c[u].setValue(o,a)}bind(){const o=this._bindings;for(let a=this._targetGroup.nCachedObjects_,c=o.length;a!==c;++a)o[a].bind()}unbind(){const o=this._bindings;for(let a=this._targetGroup.nCachedObjects_,c=o.length;a!==c;++a)o[a].unbind()}}let Jr=(()=>{class l{constructor(a,c,u){this.path=c,this.parsedPath=u||l.parseTrackName(c),this.node=l.findNode(a,this.parsedPath.nodeName)||a,this.rootNode=a,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(a,c,u){return a&&a.isAnimationObjectGroup?new l.Composite(a,c,u):new l(a,c,u)}static sanitizeNodeName(a){return a.replace(/\s/g,"_").replace(mpt,"")}static parseTrackName(a){const c=Cpt.exec(a);if(null===c)throw new Error("PropertyBinding: Cannot parse trackName: "+a);const u={nodeName:c[2],objectName:c[3],objectIndex:c[4],propertyName:c[5],propertyIndex:c[6]},h=u.nodeName&&u.nodeName.lastIndexOf(".");if(void 0!==h&&-1!==h){const d=u.nodeName.substring(h+1);-1!==Spt.indexOf(d)&&(u.nodeName=u.nodeName.substring(0,h),u.objectName=d)}if(null===u.propertyName||0===u.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+a);return u}static findNode(a,c){if(void 0===c||""===c||"."===c||-1===c||c===a.name||c===a.uuid)return a;if(a.skeleton){const u=a.skeleton.getBoneByName(c);if(void 0!==u)return u}if(a.children){const u=function(d){for(let f=0;f<d.length;f++){const p=d[f];if(p.name===c||p.uuid===c)return p;const g=u(p.children);if(g)return g}return null},h=u(a.children);if(h)return h}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(a,c){a[c]=this.targetObject[this.propertyName]}_getValue_array(a,c){const u=this.resolvedProperty;for(let h=0,d=u.length;h!==d;++h)a[c++]=u[h]}_getValue_arrayElement(a,c){a[c]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(a,c){this.resolvedProperty.toArray(a,c)}_setValue_direct(a,c){this.targetObject[this.propertyName]=a[c]}_setValue_direct_setNeedsUpdate(a,c){this.targetObject[this.propertyName]=a[c],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(a,c){this.targetObject[this.propertyName]=a[c],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(a,c){const u=this.resolvedProperty;for(let h=0,d=u.length;h!==d;++h)u[h]=a[c++]}_setValue_array_setNeedsUpdate(a,c){const u=this.resolvedProperty;for(let h=0,d=u.length;h!==d;++h)u[h]=a[c++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(a,c){const u=this.resolvedProperty;for(let h=0,d=u.length;h!==d;++h)u[h]=a[c++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(a,c){this.resolvedProperty[this.propertyIndex]=a[c]}_setValue_arrayElement_setNeedsUpdate(a,c){this.resolvedProperty[this.propertyIndex]=a[c],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(a,c){this.resolvedProperty[this.propertyIndex]=a[c],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(a,c){this.resolvedProperty.fromArray(a,c)}_setValue_fromArray_setNeedsUpdate(a,c){this.resolvedProperty.fromArray(a,c),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(a,c){this.resolvedProperty.fromArray(a,c),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(a,c){this.bind(),this.getValue(a,c)}_setValue_unbound(a,c){this.bind(),this.setValue(a,c)}bind(){let a=this.node;const c=this.parsedPath,u=c.objectName,h=c.propertyName;let d=c.propertyIndex;if(a||(a=l.findNode(this.rootNode,c.nodeName)||this.rootNode,this.node=a),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!a)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(u){let m=c.objectIndex;switch(u){case"materials":if(!a.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!a.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);a=a.material.materials;break;case"bones":if(!a.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);a=a.skeleton.bones;for(let v=0;v<a.length;v++)if(a[v].name===m){m=v;break}break;default:if(void 0===a[u])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);a=a[u]}if(void 0!==m){if(void 0===a[m])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,a);a=a[m]}}const f=a[h];if(void 0===f)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+c.nodeName+"."+h+" but it wasn't found.",a);let p=this.Versioning.None;this.targetObject=a,void 0!==a.needsUpdate?p=this.Versioning.NeedsUpdate:void 0!==a.matrixWorldNeedsUpdate&&(p=this.Versioning.MatrixWorldNeedsUpdate);let g=this.BindingType.Direct;if(void 0!==d){if("morphTargetInfluences"===h){if(!a.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!a.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==a.morphTargetDictionary[d]&&(d=a.morphTargetDictionary[d])}g=this.BindingType.ArrayElement,this.resolvedProperty=f,this.propertyIndex=d}else void 0!==f.fromArray&&void 0!==f.toArray?(g=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(g=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=h;this.getValue=this.GetterByBindingType[g],this.setValue=this.SetterByBindingTypeAndVersioning[g][p]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return l.Composite=wpt,l})();Jr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Jr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Jr.prototype.GetterByBindingType=[Jr.prototype._getValue_direct,Jr.prototype._getValue_array,Jr.prototype._getValue_arrayElement,Jr.prototype._getValue_toArray],Jr.prototype.SetterByBindingTypeAndVersioning=[[Jr.prototype._setValue_direct,Jr.prototype._setValue_direct_setNeedsUpdate,Jr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Jr.prototype._setValue_array,Jr.prototype._setValue_array_setNeedsUpdate,Jr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Jr.prototype._setValue_arrayElement,Jr.prototype._setValue_arrayElement_setNeedsUpdate,Jr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Jr.prototype._setValue_fromArray,Jr.prototype._setValue_fromArray_setNeedsUpdate,Jr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Dpt{constructor(o,a,c=0,u=1/0){this.ray=new iI(o,a),this.near=c,this.far=u,this.camera=null,this.layers=new cH,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(o,a){this.ray.set(o,a)}setFromCamera(o,a){a.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(a.matrixWorld),this.ray.direction.set(o.x,o.y,.5).unproject(a).sub(this.ray.origin).normalize(),this.camera=a):a.isOrthographicCamera?(this.ray.origin.set(o.x,o.y,(a.near+a.far)/(a.near-a.far)).unproject(a),this.ray.direction.set(0,0,-1).transformDirection(a.matrixWorld),this.camera=a):console.error("THREE.Raycaster: Unsupported camera type: "+a.type)}intersectObject(o,a=!0,c=[]){return KH(o,this,c,a),c.sort(W0e),c}intersectObjects(o,a=!0,c=[]){for(let u=0,h=o.length;u<h;u++)KH(o[u],this,c,a);return c.sort(W0e),c}}function W0e(l,o){return l.distance-o.distance}function KH(l,o,a,c){if(l.layers.test(o.layers)&&l.raycast(o,a),!0===c){const u=l.children;for(let h=0,d=u.length;h<d;h++)KH(u[h],o,a,!0)}}class Mpt{constructor(){this.type="ShapePath",this.color=new sn,this.subPaths=[],this.currentPath=null}moveTo(o,a){return this.currentPath=new H0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(o,a),this}lineTo(o,a){return this.currentPath.lineTo(o,a),this}quadraticCurveTo(o,a,c,u){return this.currentPath.quadraticCurveTo(o,a,c,u),this}bezierCurveTo(o,a,c,u,h,d){return this.currentPath.bezierCurveTo(o,a,c,u,h,d),this}splineThru(o){return this.currentPath.splineThru(o),this}toShapes(o,a){function c(w){const O=[];for(let T=0,M=w.length;T<M;T++){const A=w[T],I=new Hf;I.curves=A.curves,O.push(I)}return O}function u(w,O){const T=O.length;let M=!1;for(let A=T-1,I=0;I<T;A=I++){let E=O[A],P=O[I],B=P.x-E.x,V=P.y-E.y;if(Math.abs(V)>Number.EPSILON){if(V<0&&(E=O[I],B=-B,P=O[A],V=-V),w.y<E.y||w.y>P.y)continue;if(w.y===E.y){if(w.x===E.x)return!0}else{const Q=V*(w.x-E.x)-B*(w.y-E.y);if(0===Q)return!0;if(Q<0)continue;M=!M}}else{if(w.y!==E.y)continue;if(P.x<=w.x&&w.x<=E.x||E.x<=w.x&&w.x<=P.x)return!0}}return M}const h=$f.isClockWise,d=this.subPaths;if(0===d.length)return[];if(!0===a)return c(d);let f,p,g;const m=[];if(1===d.length)return p=d[0],g=new Hf,g.curves=p.curves,m.push(g),m;let v=!h(d[0].getPoints());v=o?!v:v;const y=[],_=[];let x,S,b=[],C=0;_[C]=void 0,b[C]=[];for(let w=0,O=d.length;w<O;w++)p=d[w],x=p.getPoints(),f=h(x),f=o?!f:f,f?(!v&&_[C]&&C++,_[C]={s:new Hf,p:x},_[C].s.curves=p.curves,v&&C++,b[C]=[]):b[C].push({h:p,p:x[0]});if(!_[0])return c(d);if(_.length>1){let w=!1,O=0;for(let T=0,M=_.length;T<M;T++)y[T]=[];for(let T=0,M=_.length;T<M;T++){const A=b[T];for(let I=0;I<A.length;I++){const E=A[I];let P=!0;for(let B=0;B<_.length;B++)u(E.p,_[B].p)&&(T!==B&&O++,P?(P=!1,y[B].push(E)):w=!0);P&&y[T].push(E)}}O>0&&!1===w&&(b=y)}for(let w=0,O=_.length;w<O;w++){g=_[w].s,m.push(g),S=b[w];for(let T=0,M=S.length;T<M;T++)g.holes.push(S[T].h)}return m}}function Fpt(){const l=new ArrayBuffer(4),o=new Float32Array(l),a=new Uint32Array(l),c=new Uint32Array(512),u=new Uint32Array(512);for(let p=0;p<256;++p){const g=p-127;g<-27?(c[p]=0,c[256|p]=32768,u[p]=24,u[256|p]=24):g<-14?(c[p]=1024>>-g-14,c[256|p]=1024>>-g-14|32768,u[p]=-g-1,u[256|p]=-g-1):g<=15?(c[p]=g+15<<10,c[256|p]=g+15<<10|32768,u[p]=13,u[256|p]=13):g<128?(c[p]=31744,c[256|p]=64512,u[p]=24,u[256|p]=24):(c[p]=31744,c[256|p]=64512,u[p]=13,u[256|p]=13)}const h=new Uint32Array(2048),d=new Uint32Array(64),f=new Uint32Array(64);for(let p=1;p<1024;++p){let g=p<<13,m=0;for(;0==(8388608&g);)g<<=1,m-=8388608;g&=-8388609,m+=947912704,h[p]=g|m}for(let p=1024;p<2048;++p)h[p]=939524096+(p-1024<<13);for(let p=1;p<31;++p)d[p]=p<<23;d[31]=1199570944,d[32]=2147483648;for(let p=33;p<63;++p)d[p]=2147483648+(p-32<<23);d[63]=3347054592;for(let p=1;p<64;++p)32!==p&&(f[p]=1024);return{floatView:o,uint32View:a,baseTable:c,shiftTable:u,mantissaTable:h,exponentTable:d,offsetTable:f}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"142"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="142");class s2{constructor(){this.iWidthPixelIncrement=0,this.iHeightPixelIncrement=0,this.iXPixelIncrement=0,this.iYPixelIncrement=0,this.iCanvasWidth=0,this.iCanvasHeight=0,this.iPercentage=!1,this.bLight=!0,this.actionHandler=()=>{},this.params=new Map,this.appLogoTextProvider=()=>"",this.appParamProvider=()=>({})}get canvasWidth(){let o=window.innerWidth+this.iWidthPixelIncrement;return this.iCanvasWidth>0?this.iCanvasWidth*(this.iPercentage?o/100:1):o}get canvasHeight(){let o=window.innerHeight+this.iHeightPixelIncrement;return this.iCanvasHeight>0?this.iCanvasHeight*(this.iPercentage?o/100:1):o}get canvasPercentage(){return this.iPercentage}incrementX(o){return o+this.iXPixelIncrement}incrementY(o){return o+this.iYPixelIncrement}isLight(){return this.bLight}setWidthPixelIncrement(o){return this.iWidthPixelIncrement=o,this}setHeightPixelIncrement(o){return this.iHeightPixelIncrement=o,this}setXPixelIncrement(o){return this.iXPixelIncrement=o,this}setYPixelIncrement(o){return this.iYPixelIncrement=o,this}setCanvasWidth(o){return this.iCanvasWidth=o,this}setCanvasHeight(o){return this.iCanvasHeight=o,this}setPercentage(o){return this.iPercentage=o,this}setLight(o){return this.bLight=o,this}setActionHandler(o){return this.actionHandler=o,this}setParam(o,a){return this.params.set(o,a),this}getParam(o){return this.params.get(o)}setAppLogoTextProvider(o){return this.appLogoTextProvider=o,this}setAppParamProvider(o){return this.appParamProvider=o,this}runAction(o){return this.actionHandler&&this.actionHandler(o),this}init(o){}render(){}onResize(){}onMouseMove(o){}onMouseClick(o){}dispose(){}}class Bpt extends s2{constructor(){super(...arguments),this.renderer=null,this.camera=null,this.scene=null,this.light=null,this.cube=null,this.frameId=null}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}init(o){this.renderer=o;let a=this.canvasWidth,c=this.canvasHeight;this.renderer.setSize(a,c),this.renderer.setClearColor(255,1),this.scene=new $w,this.camera=new ho(75,a/c,.1,1e3),this.camera.position.z=5,this.scene.add(this.camera),this.light=new KI(4210752),this.light.position.z=10,this.scene.add(this.light);const u=new Uf(1,1,1),h=new Xs({color:65280,wireframe:!1,transparent:!0});this.cube=new Ki(u,h),this.scene.add(this.cube)}onMouseMove(o){}onResize(){const o=this.canvasWidth,a=this.canvasHeight;this.camera.aspect=o/a,this.camera.updateProjectionMatrix(),this.renderer.setSize(o,a)}render(){this.frameId=requestAnimationFrame(()=>{this.render()}),this.cube&&(this.cube.rotation.x+=.01,this.cube.rotation.y+=.01),this.renderer.render(this.scene,this.camera)}}class Vpt extends s2{constructor(){super(...arguments),this.renderer=null,this.camera=null,this.scene=null,this.cube=null,this.mouseX=0,this.mouseY=0,this.frameId=null}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}init(o){this.renderer=o,this.camera=new ho(20,this.canvasWidth/this.canvasHeight,1,1e4),this.camera.position.z=1800,this.scene=new $w,this.scene.background=new sn(16777215);const a=new I0e(16777215);a.position.set(0,0,1),this.scene.add(a);const c=document.createElement("canvas");c.width=128,c.height=128;const h=c.getContext("2d"),d=h.createRadialGradient(c.width/2,c.height/2,0,c.width/2,c.height/2,c.width/2);d.addColorStop(.1,"rgba(210,210,210,1)"),d.addColorStop(1,"rgba(255,255,255,1)"),h.fillStyle=d,h.fillRect(0,0,c.width,c.height);const f=new s0e(c),p=new Xs({map:f}),g=new F1(300,300,1,1);let m;m=new Ki(g,p),m.position.y=-250,m.rotation.x=-Math.PI/2,this.scene.add(m),m=new Ki(g,p),m.position.y=-250,m.position.x=-400,m.rotation.x=-Math.PI/2,this.scene.add(m),m=new Ki(g,p),m.position.y=-250,m.position.x=400,m.rotation.x=-Math.PI/2,this.scene.add(m);const v=200,y=new t2(v,1),_=y.attributes.position.count;y.setAttribute("color",new Ts(new Float32Array(3*_),3));const b=y.clone(),C=y.clone(),x=new sn,S=y.attributes.position,w=b.attributes.position,O=C.attributes.position,T=y.attributes.color,M=b.attributes.color,A=C.attributes.color;for(let j=0;j<_;j++)x.setHSL((S.getY(j)/v+1)/2,1,.5),T.setXYZ(j,x.r,x.g,x.b),x.setHSL(0,(w.getY(j)/v+1)/2,.5),M.setXYZ(j,x.r,x.g,x.b),x.setRGB(1,.8-(O.getY(j)/v+1)/2,0),A.setXYZ(j,x.r,x.g,x.b);const I=new b0e({color:16777215,flatShading:!0,vertexColors:!0,shininess:0}),E=new Xs({color:0,wireframe:!0,transparent:!0});let P=new Ki(y,I),B=new Ki(y,E);P.add(B),P.position.x=-400,P.rotation.x=-1.87,this.scene.add(P),P=new Ki(b,I),B=new Ki(b,E),P.add(B),P.position.x=400,this.scene.add(P),P=new Ki(C,I),B=new Ki(C,E),P.add(B),this.scene.add(P),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.canvasWidth,this.canvasHeight),this.renderer.setClearColor(255,1)}onMouseMove(o){let c=this.canvasHeight/2;this.mouseX=o.clientX-this.canvasWidth/2,this.mouseY=o.clientY-c}onResize(){const o=this.canvasWidth,a=this.canvasHeight;this.camera.aspect=o/a,this.camera.updateProjectionMatrix(),this.renderer.setSize(o,a)}render(){this.frameId=requestAnimationFrame(()=>{this.render()}),this.camera&&(this.camera.position.x+=.05*(this.mouseX-this.camera.position.x),this.camera.position.y+=.05*(-this.mouseY-this.camera.position.y),this.camera.lookAt(this.scene.position)),this.renderer.render(this.scene,this.camera)}}const a3={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class o2{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const zpt=new Uw(-1,1,1,-1,0,1),t9=new Ai;t9.setAttribute("position",new Dn([-1,3,0,-1,-1,0,3,-1,0],3)),t9.setAttribute("uv",new Dn([0,2,0,0,2,0],2));class nve{constructor(o){this._mesh=new Ki(t9,o)}dispose(){this._mesh.geometry.dispose()}render(o){o.render(this._mesh,zpt)}get material(){return this._mesh.material}set material(o){this._mesh.material=o}}class n9 extends o2{constructor(o,a){super(),this.textureID=void 0!==a?a:"tDiffuse",o instanceof Ia?(this.uniforms=o.uniforms,this.material=o):o&&(this.uniforms=gI.clone(o.uniforms),this.material=new Ia({defines:Object.assign({},o.defines),uniforms:this.uniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader})),this.fsQuad=new nve(this.material)}render(o,a,c){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=c.texture),this.fsQuad.material=this.material,this.renderToScreen?(o.setRenderTarget(null),this.fsQuad.render(o)):(o.setRenderTarget(a),this.clear&&o.clear(o.autoClearColor,o.autoClearDepth,o.autoClearStencil),this.fsQuad.render(o))}}class ive extends o2{constructor(o,a){super(),this.scene=o,this.camera=a,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(o,a,c){const u=o.getContext(),h=o.state;let d,f;h.buffers.color.setMask(!1),h.buffers.depth.setMask(!1),h.buffers.color.setLocked(!0),h.buffers.depth.setLocked(!0),this.inverse?(d=0,f=1):(d=1,f=0),h.buffers.stencil.setTest(!0),h.buffers.stencil.setOp(u.REPLACE,u.REPLACE,u.REPLACE),h.buffers.stencil.setFunc(u.ALWAYS,d,4294967295),h.buffers.stencil.setClear(f),h.buffers.stencil.setLocked(!0),o.setRenderTarget(c),this.clear&&o.clear(),o.render(this.scene,this.camera),o.setRenderTarget(a),this.clear&&o.clear(),o.render(this.scene,this.camera),h.buffers.color.setLocked(!1),h.buffers.depth.setLocked(!1),h.buffers.stencil.setLocked(!1),h.buffers.stencil.setFunc(u.EQUAL,1,4294967295),h.buffers.stencil.setOp(u.KEEP,u.KEEP,u.KEEP),h.buffers.stencil.setLocked(!0)}}class Upt extends o2{constructor(){super(),this.needsSwap=!1}render(o){o.state.buffers.stencil.setLocked(!1),o.state.buffers.stencil.setTest(!1)}}class Hpt{constructor(o,a){if(this.renderer=o,void 0===a){const c=o.getSize(new dt);this._pixelRatio=o.getPixelRatio(),this._width=c.width,this._height=c.height,(a=new dl(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=a.width,this._height=a.height;this.renderTarget1=a,this.renderTarget2=a.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===a3&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===n9&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new n9(a3),this.clock=new V0e}swapBuffers(){const o=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=o}addPass(o){this.passes.push(o),o.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(o,a){this.passes.splice(a,0,o),o.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(o){const a=this.passes.indexOf(o);-1!==a&&this.passes.splice(a,1)}isLastEnabledPass(o){for(let a=o+1;a<this.passes.length;a++)if(this.passes[a].enabled)return!1;return!0}render(o){void 0===o&&(o=this.clock.getDelta());const a=this.renderer.getRenderTarget();let c=!1;for(let u=0,h=this.passes.length;u<h;u++){const d=this.passes[u];if(!1!==d.enabled){if(d.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(u),d.render(this.renderer,this.writeBuffer,this.readBuffer,o,c),d.needsSwap){if(c){const f=this.renderer.getContext(),p=this.renderer.state.buffers.stencil;p.setFunc(f.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,o),p.setFunc(f.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==ive&&(d instanceof ive?c=!0:d instanceof Upt&&(c=!1))}}this.renderer.setRenderTarget(a)}reset(o){if(void 0===o){const a=this.renderer.getSize(new dt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=a.width,this._height=a.height,(o=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=o,this.renderTarget2=o.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(o,a){this._width=o,this._height=a;const c=this._width*this._pixelRatio,u=this._height*this._pixelRatio;this.renderTarget1.setSize(c,u),this.renderTarget2.setSize(c,u);for(let h=0;h<this.passes.length;h++)this.passes[h].setSize(c,u)}setPixelRatio(o){this._pixelRatio=o,this.setSize(this._width,this._height)}}new Uw(-1,1,1,-1,0,1);const i9=new Ai;i9.setAttribute("position",new Dn([-1,3,0,-1,-1,0,3,-1,0],3)),i9.setAttribute("uv",new Dn([0,2,0,0,2,0],2));class Wpt extends o2{constructor(o,a,c,u,h){super(),this.scene=o,this.camera=a,this.overrideMaterial=c,this.clearColor=u,this.clearAlpha=void 0!==h?h:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new sn}render(o,a,c){const u=o.autoClear;let h,d;o.autoClear=!1,void 0!==this.overrideMaterial&&(d=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(o.getClearColor(this._oldClearColor),h=o.getClearAlpha(),o.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&o.clearDepth(),o.setRenderTarget(this.renderToScreen?null:c),this.clear&&o.clear(o.autoClearColor,o.autoClearDepth,o.autoClearStencil),o.render(this.scene,this.camera),this.clearColor&&o.setClearColor(this._oldClearColor,h),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=d),o.autoClear=u}}class Ig extends o2{constructor(o,a,c,u){super(),this.renderScene=a,this.renderCamera=c,this.selectedObjects=void 0!==u?u:[],this.visibleEdgeColor=new sn(1,1,1),this.hiddenEdgeColor=new sn(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==o?new dt(o.x,o.y):new dt(256,256);const h=Math.round(this.resolution.x/this.downSampleRatio),d=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new dl(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new MH,this.depthMaterial.side=2,this.depthMaterial.depthPacking=3201,this.depthMaterial.blending=0,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=2,this.prepareMaskMaterial.fragmentShader=function m(v,y){return v.replace(/DEPTH_TO_VIEW_Z/g,(y.isPerspectiveCamera?"perspective":"orthographic")+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new dl(this.resolution.x,this.resolution.y),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new dl(h,d),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new dl(h,d),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new dl(Math.round(h/2),Math.round(d/2)),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new dl(h,d),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new dl(Math.round(h/2),Math.round(d/2)),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(h,d),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(h/2),Math.round(d/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),void 0===a3&&console.error("THREE.OutlinePass relies on CopyShader");const g=a3;this.copyUniforms=gI.clone(g.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Ia({uniforms:this.copyUniforms,vertexShader:g.vertexShader,fragmentShader:g.fragmentShader,blending:0,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new sn,this.oldClearAlpha=1,this.fsQuad=new nve(null),this.tempPulseColor1=new sn,this.tempPulseColor2=new sn,this.textureMatrix=new ci}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()}setSize(o,a){this.renderTargetMaskBuffer.setSize(o,a),this.renderTargetDepthBuffer.setSize(o,a);let c=Math.round(o/this.downSampleRatio),u=Math.round(a/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(c,u),this.renderTargetBlurBuffer1.setSize(c,u),this.renderTargetEdgeBuffer1.setSize(c,u),this.separableBlurMaterial1.uniforms.texSize.value.set(c,u),c=Math.round(c/2),u=Math.round(u/2),this.renderTargetBlurBuffer2.setSize(c,u),this.renderTargetEdgeBuffer2.setSize(c,u),this.separableBlurMaterial2.uniforms.texSize.value.set(c,u)}changeVisibilityOfSelectedObjects(o){const a=this._visibilityCache;function c(u){u.isMesh&&(!0===o?u.visible=a.get(u):(a.set(u,u.visible),u.visible=o))}for(let u=0;u<this.selectedObjects.length;u++)this.selectedObjects[u].traverse(c)}changeVisibilityOfNonSelectedObjects(o){const a=this._visibilityCache,c=[];function u(d){d.isMesh&&c.push(d)}for(let d=0;d<this.selectedObjects.length;d++)this.selectedObjects[d].traverse(u);this.renderScene.traverse(function h(d){if(d.isMesh||d.isSprite){let f=!1;for(let p=0;p<c.length;p++)if(c[p].id===d.id){f=!0;break}if(!1===f){const p=d.visible;(!1===o||!0===a.get(d))&&(d.visible=o),a.set(d,p)}}else(d.isPoints||d.isLine)&&(!0===o?d.visible=a.get(d):(a.set(d,d.visible),d.visible=o))})}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(o,a,c,u,h){if(this.selectedObjects.length>0){o.getClearColor(this._oldClearColor),this.oldClearAlpha=o.getClearAlpha();const d=o.autoClear;o.autoClear=!1,h&&o.state.buffers.stencil.setTest(!1),o.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const f=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,o.setRenderTarget(this.renderTargetDepthBuffer),o.clear(),o.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,o.setRenderTarget(this.renderTargetMaskBuffer),o.clear(),o.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=f,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,o.setRenderTarget(this.renderTargetMaskDownSampleBuffer),o.clear(),this.fsQuad.render(o),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const p=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(p),this.tempPulseColor2.multiplyScalar(p)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,o.setRenderTarget(this.renderTargetEdgeBuffer1),o.clear(),this.fsQuad.render(o),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Ig.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,o.setRenderTarget(this.renderTargetBlurBuffer1),o.clear(),this.fsQuad.render(o),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Ig.BlurDirectionY,o.setRenderTarget(this.renderTargetEdgeBuffer1),o.clear(),this.fsQuad.render(o),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=Ig.BlurDirectionX,o.setRenderTarget(this.renderTargetBlurBuffer2),o.clear(),this.fsQuad.render(o),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=Ig.BlurDirectionY,o.setRenderTarget(this.renderTargetEdgeBuffer2),o.clear(),this.fsQuad.render(o),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,h&&o.state.buffers.stencil.setTest(!0),o.setRenderTarget(c),this.fsQuad.render(o),o.setClearColor(this._oldClearColor,this.oldClearAlpha),o.autoClear=d}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=c.texture,o.setRenderTarget(null),this.fsQuad.render(o))}getPrepareMaskMaterial(){return new Ia({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new dt(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}getEdgeDetectionMaterial(){return new Ia({uniforms:{maskTexture:{value:null},texSize:{value:new dt(.5,.5)},visibleEdgeColor:{value:new te(1,1,1)},hiddenEdgeColor:{value:new te(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}getSeperableBlurMaterial(o){return new Ia({defines:{MAX_RADIUS:o},uniforms:{colorTexture:{value:null},texSize:{value:new dt(.5,.5)},direction:{value:new dt(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat sigma = kernelRadius/2.0;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, sigma);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = kernelRadius * float(i) / float(MAX_RADIUS);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, sigma);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}getOverlayMaterial(){return new Ia({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:2,depthTest:!1,depthWrite:!1,transparent:!0})}}Ig.BlurDirectionX=new dt(1,0),Ig.BlurDirectionY=new dt(0,1);const Gpt={uniforms:{tDiffuse:{value:null},resolution:{value:new dt(1/1024,1/512)}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\tprecision highp float;\n\n\tuniform sampler2D tDiffuse;\n\n\tuniform vec2 resolution;\n\n\tvarying vec2 vUv;\n\n\t// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n\t//----------------------------------------------------------------------------------\n\t// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag\n\t// SDK Version: v3.00\n\t// Email:       gameworks@nvidia.com\n\t// Site:        http://developer.nvidia.com/\n\t//\n\t// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n\t//\n\t// Redistribution and use in source and binary forms, with or without\n\t// modification, are permitted provided that the following conditions\n\t// are met:\n\t//  * Redistributions of source code must retain the above copyright\n\t//    notice, this list of conditions and the following disclaimer.\n\t//  * Redistributions in binary form must reproduce the above copyright\n\t//    notice, this list of conditions and the following disclaimer in the\n\t//    documentation and/or other materials provided with the distribution.\n\t//  * Neither the name of NVIDIA CORPORATION nor the names of its\n\t//    contributors may be used to endorse or promote products derived\n\t//    from this software without specific prior written permission.\n\t//\n\t// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY\n\t// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n\t// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t//\n\t//----------------------------------------------------------------------------------\n\n\t#ifndef FXAA_DISCARD\n\t\t\t//\n\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t//\n\t\t\t// 1 = Use discard on pixels which don't need AA.\n\t\t\t//     For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t// 0 = Return unchanged color on pixels which don't need AA.\n\t\t\t//\n\t\t\t#define FXAA_DISCARD 0\n\t#endif\n\n\t/*--------------------------------------------------------------------------*/\n\t#define FxaaTexTop(t, p) texture2D(t, p, -100.0)\n\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)\n\t/*--------------------------------------------------------------------------*/\n\n\t#define NUM_SAMPLES 5\n\n\t// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha\n\tfloat contrast( vec4 a, vec4 b ) {\n\t\t\tvec4 diff = abs( a - b );\n\t\t\treturn max( max( max( diff.r, diff.g ), diff.b ), diff.a );\n\t}\n\n\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\tFXAA3 QUALITY - PC\n\n\t============================================================================*/\n\n\t/*--------------------------------------------------------------------------*/\n\tvec4 FxaaPixelShader(\n\t\t\tvec2 posM,\n\t\t\tsampler2D tex,\n\t\t\tvec2 fxaaQualityRcpFrame,\n\t\t\tfloat fxaaQualityEdgeThreshold,\n\t\t\tfloat fxaaQualityinvEdgeThreshold\n\t) {\n\t\t\tvec4 rgbaM = FxaaTexTop(tex, posM);\n\t\t\tvec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\t// . S .\n\t\t\t// W M E\n\t\t\t// . N .\n\n\t\t\tbool earlyExit = max( max( max(\n\t\t\t\t\tcontrast( rgbaM, rgbaN ),\n\t\t\t\t\tcontrast( rgbaM, rgbaS ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaE ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaW ) )\n\t\t\t\t\t< fxaaQualityEdgeThreshold;\n\t\t\t// . 0 .\n\t\t\t// 0 0 0\n\t\t\t// . 0 .\n\n\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\tif(earlyExit) FxaaDiscard;\n\t\t\t#else\n\t\t\t\t\tif(earlyExit) return rgbaM;\n\t\t\t#endif\n\n\t\t\tfloat contrastN = contrast( rgbaM, rgbaN );\n\t\t\tfloat contrastS = contrast( rgbaM, rgbaS );\n\t\t\tfloat contrastE = contrast( rgbaM, rgbaE );\n\t\t\tfloat contrastW = contrast( rgbaM, rgbaW );\n\n\t\t\tfloat relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );\n\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\tbool horzSpan = relativeVContrast > 0.;\n\t\t\t// . 1 .\n\t\t\t// 0 0 0\n\t\t\t// . 1 .\n\n\t\t\t// 45 deg edge detection and corners of objects, aka V/H contrast is too similar\n\t\t\tif( abs( relativeVContrast ) < .3 ) {\n\t\t\t\t\t// locate the edge\n\t\t\t\t\tvec2 dirToEdge;\n\t\t\t\t\tdirToEdge.x = contrastE > contrastW ? 1. : -1.;\n\t\t\t\t\tdirToEdge.y = contrastS > contrastN ? 1. : -1.;\n\t\t\t\t\t// . 2 .      . 1 .\n\t\t\t\t\t// 1 0 2  ~=  0 0 1\n\t\t\t\t\t// . 1 .      . 0 .\n\n\t\t\t\t\t// tap 2 pixels and see which ones are \"outside\" the edge, to\n\t\t\t\t\t// determine if the edge is vertical or horizontal\n\n\t\t\t\t\tvec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongH = contrast( rgbaM, rgbaAlongH );\n\t\t\t\t\t// . 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 H\n\n\t\t\t\t\tvec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongV = contrast( rgbaM, rgbaAlongV );\n\t\t\t\t\t// V 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 .\n\n\t\t\t\t\trelativeVContrast = matchAlongV - matchAlongH;\n\t\t\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\t\t\tif( abs( relativeVContrast ) < .3 ) { // 45 deg edge\n\t\t\t\t\t\t\t// 1 1 .\n\t\t\t\t\t\t\t// 0 0 1\n\t\t\t\t\t\t\t// . 0 1\n\n\t\t\t\t\t\t\t// do a simple blur\n\t\t\t\t\t\t\treturn mix(\n\t\t\t\t\t\t\t\t\trgbaM,\n\t\t\t\t\t\t\t\t\t(rgbaN + rgbaS + rgbaE + rgbaW) * .25,\n\t\t\t\t\t\t\t\t\t.4\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\thorzSpan = relativeVContrast > 0.;\n\t\t\t}\n\n\t\t\tif(!horzSpan) rgbaN = rgbaW;\n\t\t\tif(!horzSpan) rgbaS = rgbaE;\n\t\t\t// . 0 .      1\n\t\t\t// 1 0 1  ->  0\n\t\t\t// . 0 .      1\n\n\t\t\tbool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );\n\t\t\tif(!pairN) rgbaN = rgbaS;\n\n\t\t\tvec2 offNP;\n\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\n\t\t\tbool doneN = false;\n\t\t\tbool doneP = false;\n\n\t\t\tfloat nDist = 0.;\n\t\t\tfloat pDist = 0.;\n\n\t\t\tvec2 posN = posM;\n\t\t\tvec2 posP = posM;\n\n\t\t\tint iterationsUsed = 0;\n\t\t\tint iterationsUsedN = 0;\n\t\t\tint iterationsUsedP = 0;\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i++ ) {\n\t\t\t\t\titerationsUsed = i;\n\n\t\t\t\t\tfloat increment = float(i + 1);\n\n\t\t\t\t\tif(!doneN) {\n\t\t\t\t\t\t\tnDist += increment;\n\t\t\t\t\t\t\tposN = posM + offNP * nDist;\n\t\t\t\t\t\t\tvec4 rgbaEndN = FxaaTexTop(tex, posN.xy);\n\t\t\t\t\t\t\tdoneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );\n\t\t\t\t\t\t\titerationsUsedN = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!doneP) {\n\t\t\t\t\t\t\tpDist += increment;\n\t\t\t\t\t\t\tposP = posM - offNP * pDist;\n\t\t\t\t\t\t\tvec4 rgbaEndP = FxaaTexTop(tex, posP.xy);\n\t\t\t\t\t\t\tdoneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );\n\t\t\t\t\t\t\titerationsUsedP = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(doneN || doneP) break;\n\t\t\t}\n\n\n\t\t\tif ( !doneP && !doneN ) return rgbaM; // failed to find end of edge\n\n\t\t\tfloat dist = min(\n\t\t\t\t\tdoneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,\n\t\t\t\t\tdoneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.\n\t\t\t);\n\n\t\t\t// hacky way of reduces blurriness of mostly diagonal edges\n\t\t\t// but reduces AA quality\n\t\t\tdist = pow(dist, .5);\n\n\t\t\tdist = 1. - dist;\n\n\t\t\treturn mix(\n\t\t\t\t\trgbaM,\n\t\t\t\t\trgbaN,\n\t\t\t\t\tdist * .5\n\t\t\t);\n\t}\n\n\tvoid main() {\n\t\t\tconst float edgeDetectionQuality = .2;\n\t\t\tconst float invEdgeDetectionQuality = 1. / edgeDetectionQuality;\n\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\t\tvUv,\n\t\t\t\t\ttDiffuse,\n\t\t\t\t\tresolution,\n\t\t\t\t\tedgeDetectionQuality, // [0,1] contrast needed, otherwise early discard\n\t\t\t\t\tinvEdgeDetectionQuality\n\t\t\t);\n\n\t}\n\t"};class Qpt extends s2{constructor(){super(...arguments),this.renderer=null,this.camera=null,this.scene=null,this.light=null,this.cube=null,this.mouseX=0,this.mouseY=0,this.composer=null,this.effectFXAA=null,this.outlinePass=null,this.frameId=null}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}init(o){this.renderer=o;let a=this.canvasWidth,c=this.canvasHeight;this.renderer.setSize(a,c),this.renderer.setClearColor(255,1),this.scene=new $w,this.camera=new ho(75,a/c,.1,1e3),this.camera.position.z=5,this.scene.add(this.camera),this.light=new KI(4210752),this.light.position.z=10,this.scene.add(this.light);const u=new Uf(1,1,1),h=new Xs({color:65280,wireframe:!1,transparent:!0}),d=new Xs({color:0,wireframe:!0,transparent:!0});this.cube=new Ki(u,h),this.cube.add(new Ki(u,d)),this.scene.add(this.cube),this.composer=new Hpt(this.renderer);const f=new Wpt(this.scene,this.camera);this.composer.addPass(f),this.outlinePass=new Ig(new dt(a,c),this.scene,this.camera),this.composer.addPass(this.outlinePass),this.effectFXAA=new n9(Gpt),this.effectFXAA.uniforms.resolution.value.set(1/a,1/c),this.composer.addPass(this.effectFXAA),this.composer.setSize(a,c),this.outlinePass.selectedObjects=[this.cube];const p=document.createElement("canvas");p.width=128,p.height=128;const m=p.getContext("2d");m.fillStyle="red",m.fillRect(0,0,p.width,p.height);const v=new s0e(p);v.wrapS=c1,v.wrapT=c1,this.outlinePass.patternTexture=v,this.outlinePass.edgeStrength=10,this.outlinePass.edgeGlow=1,this.outlinePass.edgeThickness=1,this.outlinePass.pulsePeriod=0,this.outlinePass.usePatternTexture=!0,this.outlinePass.visibleEdgeColor=new sn(16746632)}onMouseMove(o){let c=this.canvasHeight/2;this.mouseX=o.clientX-this.canvasWidth/2,this.mouseY=o.clientY-c}onResize(){const o=this.canvasWidth,a=this.canvasHeight;this.camera.aspect=o/a,this.camera.updateProjectionMatrix(),this.renderer.setSize(o,a),this.composer.setSize(o,a)}render(){this.frameId=requestAnimationFrame(()=>{this.render()}),this.cube&&(this.cube.rotation.x+=.01,this.cube.rotation.y+=.01),this.composer&&this.composer.render()}}var Qf=(()=>(function(l){l[l.Vertexes=0]="Vertexes",l[l.Normals=1]="Normals",l[l.UV=2]="UV"}(Qf||(Qf={})),Qf))();class J1{constructor(){this.vertexes=[],this.normals=[],this.uv=[]}static builder(){return new J1}addTriangle(o,a,c,u,h,d){this.vertexes.push(o,a,c);let f=new te;f.copy(a),f.sub(o);let p=new te;p.copy(c),p.sub(o);let g=f.cross(p);return g=g.normalize(),this.normals.push(g,g,g),this}addPlaneXY(o,a,c,u=0,h=0){let d=new te(o.x,o.y,o.z),f=new te(o.x,o.y,o.z),p=new te(o.x,o.y,o.z),g=new te(o.x,o.y,o.z);f.add(new te(a,0,0)),p.add(new te(0,-c,0)),g.add(new te(a,-c,0));let m=new Ul;return m.set(1,0,0,Math.tan(-h),1,0,0,0,1),d.applyMatrix3(m),f.applyMatrix3(m),p.applyMatrix3(m),g.applyMatrix3(m),this.addTriangle(d,p,f,new dt(0,0),new dt(0,1),new dt(1,0)),this.addTriangle(f,p,g,new dt(1,0),new dt(0,1),new dt(1,1)),this}toPlainArray(o=Qf.Vertexes){switch(o){case Qf.Normals:return this.normals.flatMap(a=>[a.x,a.y,a.z]);case Qf.UV:return this.uv.flatMap(a=>[a.x,a.y]);default:return this.vertexes.flatMap(a=>[a.x,a.y,a.z])}}}function a2(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function jpt(l,o){this.source=l,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=o,this.destLen=0,this.ltree=new a2,this.dtree=new a2}String.prototype.codePointAt||function(){var l=function(){try{var a={},c=Object.defineProperty,u=c(a,a,a)&&c}catch(h){}return u}(),o=function(a){if(null==this)throw TypeError();var c=String(this),u=c.length,h=a?Number(a):0;if(h!=h&&(h=0),!(h<0||h>=u)){var f,d=c.charCodeAt(h);return d>=55296&&d<=56319&&u>h+1&&(f=c.charCodeAt(h+1))>=56320&&f<=57343?1024*(d-55296)+f-56320+65536:d}};l?l(String.prototype,"codePointAt",{value:o,configurable:!0,writable:!0}):String.prototype.codePointAt=o}();var sve=new a2,ove=new a2,s9=new Uint8Array(30),o9=new Uint16Array(30),ave=new Uint8Array(30),lve=new Uint16Array(30),qpt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),cve=new a2,kd=new Uint8Array(320);function uve(l,o,a,c){var u,h;for(u=0;u<a;++u)l[u]=0;for(u=0;u<30-a;++u)l[u+a]=u/a|0;for(h=c,u=0;u<30;++u)o[u]=h,h+=1<<l[u]}var hve=new Uint16Array(16);function a9(l,o,a,c){var u,h;for(u=0;u<16;++u)l.table[u]=0;for(u=0;u<c;++u)l.table[o[a+u]]++;for(l.table[0]=0,h=0,u=0;u<16;++u)hve[u]=h,h+=l.table[u];for(u=0;u<c;++u)o[a+u]&&(l.trans[hve[o[a+u]]++]=u)}function Xpt(l){l.bitcount--||(l.tag=l.source[l.sourceIndex++],l.bitcount=7);var o=1&l.tag;return l.tag>>>=1,o}function Md(l,o,a){if(!o)return a;for(;l.bitcount<24;)l.tag|=l.source[l.sourceIndex++]<<l.bitcount,l.bitcount+=8;var c=l.tag&65535>>>16-o;return l.tag>>>=o,l.bitcount-=o,c+a}function l9(l,o){for(;l.bitcount<24;)l.tag|=l.source[l.sourceIndex++]<<l.bitcount,l.bitcount+=8;var a=0,c=0,u=0,h=l.tag;do{c=2*c+(1&h),h>>>=1,++u,a+=o.table[u],c-=o.table[u]}while(c>=0);return l.tag=h,l.bitcount-=u,o.trans[a+c]}function Ypt(l,o,a){var c,u,h,d,f,p;for(c=Md(l,5,257),u=Md(l,5,1),h=Md(l,4,4),d=0;d<19;++d)kd[d]=0;for(d=0;d<h;++d){var g=Md(l,3,0);kd[qpt[d]]=g}for(a9(cve,kd,0,19),f=0;f<c+u;){var m=l9(l,cve);switch(m){case 16:var v=kd[f-1];for(p=Md(l,2,3);p;--p)kd[f++]=v;break;case 17:for(p=Md(l,3,3);p;--p)kd[f++]=0;break;case 18:for(p=Md(l,7,11);p;--p)kd[f++]=0;break;default:kd[f++]=m}}a9(o,kd,0,c),a9(a,kd,c,u)}function dve(l,o,a){for(;;){var u,h,d,f,c=l9(l,o);if(256===c)return 0;if(c<256)l.dest[l.destLen++]=c;else for(u=Md(l,s9[c-=257],o9[c]),h=l9(l,a),f=d=l.destLen-Md(l,ave[h],lve[h]);f<d+u;++f)l.dest[l.destLen++]=l.dest[f]}}function Kpt(l){for(var o,c;l.bitcount>8;)l.sourceIndex--,l.bitcount-=8;if((o=256*(o=l.source[l.sourceIndex+1])+l.source[l.sourceIndex])!==(65535&~(256*l.source[l.sourceIndex+3]+l.source[l.sourceIndex+2])))return-3;for(l.sourceIndex+=4,c=o;c;--c)l.dest[l.destLen++]=l.source[l.sourceIndex++];return l.bitcount=0,0}(function Zpt(l,o){var a;for(a=0;a<7;++a)l.table[a]=0;for(l.table[7]=24,l.table[8]=152,l.table[9]=112,a=0;a<24;++a)l.trans[a]=256+a;for(a=0;a<144;++a)l.trans[24+a]=a;for(a=0;a<8;++a)l.trans[168+a]=280+a;for(a=0;a<112;++a)l.trans[176+a]=144+a;for(a=0;a<5;++a)o.table[a]=0;for(o.table[5]=32,a=0;a<32;++a)o.trans[a]=a})(sve,ove),uve(s9,o9,4,3),uve(ave,lve,2,1),s9[28]=0,o9[28]=258;function eb(l,o,a,c,u){return Math.pow(1-u,3)*l+3*Math.pow(1-u,2)*u*o+3*(1-u)*Math.pow(u,2)*a+Math.pow(u,3)*c}function jf(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function fo(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function fve(l){throw new Error(l)}function pve(l,o){l||fve(o)}jf.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},jf.prototype.addPoint=function(l,o){"number"==typeof l&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=l,this.x2=l),l<this.x1&&(this.x1=l),l>this.x2&&(this.x2=l)),"number"==typeof o&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=o,this.y2=o),o<this.y1&&(this.y1=o),o>this.y2&&(this.y2=o))},jf.prototype.addX=function(l){this.addPoint(l,null)},jf.prototype.addY=function(l){this.addPoint(null,l)},jf.prototype.addBezier=function(l,o,a,c,u,h,d,f){var p=[l,o],g=[a,c],m=[u,h],v=[d,f];this.addPoint(l,o),this.addPoint(d,f);for(var y=0;y<=1;y++){var _=6*p[y]-12*g[y]+6*m[y],b=-3*p[y]+9*g[y]-9*m[y]+3*v[y],C=3*g[y]-3*p[y];if(0!==b){var S=Math.pow(_,2)-4*C*b;if(!(S<0)){var w=(-_+Math.sqrt(S))/(2*b);0<w&&w<1&&(0===y&&this.addX(eb(p[y],g[y],m[y],v[y],w)),1===y&&this.addY(eb(p[y],g[y],m[y],v[y],w)));var O=(-_-Math.sqrt(S))/(2*b);0<O&&O<1&&(0===y&&this.addX(eb(p[y],g[y],m[y],v[y],O)),1===y&&this.addY(eb(p[y],g[y],m[y],v[y],O)))}}else{if(0===_)continue;var x=-C/_;0<x&&x<1&&(0===y&&this.addX(eb(p[y],g[y],m[y],v[y],x)),1===y&&this.addY(eb(p[y],g[y],m[y],v[y],x)))}}},jf.prototype.addQuad=function(l,o,a,c,u,h){var d=l+.6666666666666666*(a-l),f=o+2/3*(c-o);this.addBezier(l,o,d,f,d+1/3*(u-l),f+1/3*(h-o),u,h)},fo.prototype.moveTo=function(l,o){this.commands.push({type:"M",x:l,y:o})},fo.prototype.lineTo=function(l,o){this.commands.push({type:"L",x:l,y:o})},fo.prototype.curveTo=fo.prototype.bezierCurveTo=function(l,o,a,c,u,h){this.commands.push({type:"C",x1:l,y1:o,x2:a,y2:c,x:u,y:h})},fo.prototype.quadTo=fo.prototype.quadraticCurveTo=function(l,o,a,c){this.commands.push({type:"Q",x1:l,y1:o,x:a,y:c})},fo.prototype.close=fo.prototype.closePath=function(){this.commands.push({type:"Z"})},fo.prototype.extend=function(l){if(l.commands)l=l.commands;else if(l instanceof jf){var o=l;return this.moveTo(o.x1,o.y1),this.lineTo(o.x2,o.y1),this.lineTo(o.x2,o.y2),this.lineTo(o.x1,o.y2),void this.close()}Array.prototype.push.apply(this.commands,l)},fo.prototype.getBoundingBox=function(){for(var l=new jf,o=0,a=0,c=0,u=0,h=0;h<this.commands.length;h++){var d=this.commands[h];switch(d.type){case"M":l.addPoint(d.x,d.y),o=c=d.x,a=u=d.y;break;case"L":l.addPoint(d.x,d.y),c=d.x,u=d.y;break;case"Q":l.addQuad(c,u,d.x1,d.y1,d.x,d.y),c=d.x,u=d.y;break;case"C":l.addBezier(c,u,d.x1,d.y1,d.x2,d.y2,d.x,d.y),c=d.x,u=d.y;break;case"Z":c=o,u=a;break;default:throw new Error("Unexpected path command "+d.type)}}return l.isEmpty()&&l.addPoint(0,0),l},fo.prototype.draw=function(l){l.beginPath();for(var o=0;o<this.commands.length;o+=1){var a=this.commands[o];"M"===a.type?l.moveTo(a.x,a.y):"L"===a.type?l.lineTo(a.x,a.y):"C"===a.type?l.bezierCurveTo(a.x1,a.y1,a.x2,a.y2,a.x,a.y):"Q"===a.type?l.quadraticCurveTo(a.x1,a.y1,a.x,a.y):"Z"===a.type&&l.closePath()}this.fill&&(l.fillStyle=this.fill,l.fill()),this.stroke&&(l.strokeStyle=this.stroke,l.lineWidth=this.strokeWidth,l.stroke())},fo.prototype.toPathData=function(l){function o(d){return Math.round(d)===d?""+Math.round(d):d.toFixed(l)}function a(){for(var d=arguments,f="",p=0;p<arguments.length;p+=1){var g=d[p];g>=0&&p>0&&(f+=" "),f+=o(g)}return f}l=void 0!==l?l:2;for(var c="",u=0;u<this.commands.length;u+=1){var h=this.commands[u];"M"===h.type?c+="M"+a(h.x,h.y):"L"===h.type?c+="L"+a(h.x,h.y):"C"===h.type?c+="C"+a(h.x1,h.y1,h.x2,h.y2,h.x,h.y):"Q"===h.type?c+="Q"+a(h.x1,h.y1,h.x,h.y):"Z"===h.type&&(c+="Z")}return c},fo.prototype.toSVG=function(l){var o='<path d="';return o+=this.toPathData(l),o+='"',this.fill&&"black"!==this.fill&&(o+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(o+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),o+"/>"},fo.prototype.toDOMElement=function(l){var o=this.toPathData(l),a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",o),a};var zn={fail:fve,argument:pve,assert:pve},tb={},on={},ti={};function mh(l){return function(){return l}}on.BYTE=function(l){return zn.argument(l>=0&&l<=255,"Byte value should be between 0 and 255."),[l]},ti.BYTE=mh(1),on.CHAR=function(l){return[l.charCodeAt(0)]},ti.CHAR=mh(1),on.CHARARRAY=function(l){void 0===l&&(l="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var o=[],a=0;a<l.length;a+=1)o[a]=l.charCodeAt(a);return o},ti.CHARARRAY=function(l){return void 0===l?0:l.length},on.USHORT=function(l){return[l>>8&255,255&l]},ti.USHORT=mh(2),on.SHORT=function(l){return l>=32768&&(l=-(65536-l)),[l>>8&255,255&l]},ti.SHORT=mh(2),on.UINT24=function(l){return[l>>16&255,l>>8&255,255&l]},ti.UINT24=mh(3),on.ULONG=function(l){return[l>>24&255,l>>16&255,l>>8&255,255&l]},ti.ULONG=mh(4),on.LONG=function(l){return l>=2147483648&&(l=-(4294967296-l)),[l>>24&255,l>>16&255,l>>8&255,255&l]},ti.LONG=mh(4),on.FIXED=on.ULONG,ti.FIXED=ti.ULONG,on.FWORD=on.SHORT,ti.FWORD=ti.SHORT,on.UFWORD=on.USHORT,ti.UFWORD=ti.USHORT,on.LONGDATETIME=function(l){return[0,0,0,0,l>>24&255,l>>16&255,l>>8&255,255&l]},ti.LONGDATETIME=mh(8),on.TAG=function(l){return zn.argument(4===l.length,"Tag should be exactly 4 ASCII characters."),[l.charCodeAt(0),l.charCodeAt(1),l.charCodeAt(2),l.charCodeAt(3)]},ti.TAG=mh(4),on.Card8=on.BYTE,ti.Card8=ti.BYTE,on.Card16=on.USHORT,ti.Card16=ti.USHORT,on.OffSize=on.BYTE,ti.OffSize=ti.BYTE,on.SID=on.USHORT,ti.SID=ti.USHORT,on.NUMBER=function(l){return l>=-107&&l<=107?[l+139]:l>=108&&l<=1131?[247+((l-=108)>>8),255&l]:l>=-1131&&l<=-108?[251+((l=-l-108)>>8),255&l]:l>=-32768&&l<=32767?on.NUMBER16(l):on.NUMBER32(l)},ti.NUMBER=function(l){return on.NUMBER(l).length},on.NUMBER16=function(l){return[28,l>>8&255,255&l]},ti.NUMBER16=mh(3),on.NUMBER32=function(l){return[29,l>>24&255,l>>16&255,l>>8&255,255&l]},ti.NUMBER32=mh(5),on.REAL=function(l){var o=l.toString(),a=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(o);if(a){var c=parseFloat("1e"+((a[2]?+a[2]:0)+a[1].length));o=(Math.round(l*c)/c).toString()}for(var u="",h=0,d=o.length;h<d;h+=1){var f=o[h];u+="e"===f?"-"===o[++h]?"c":"b":"."===f?"a":"-"===f?"e":f}for(var p=[30],g=0,m=(u+=1&u.length?"f":"ff").length;g<m;g+=2)p.push(parseInt(u.substr(g,2),16));return p},ti.REAL=function(l){return on.REAL(l).length},on.NAME=on.CHARARRAY,ti.NAME=ti.CHARARRAY,on.STRING=on.CHARARRAY,ti.STRING=ti.CHARARRAY,tb.UTF8=function(l,o,a){for(var c=[],u=a,h=0;h<u;h++,o+=1)c[h]=l.getUint8(o);return String.fromCharCode.apply(null,c)},tb.UTF16=function(l,o,a){for(var c=[],u=a/2,h=0;h<u;h++,o+=2)c[h]=l.getUint16(o);return String.fromCharCode.apply(null,c)},on.UTF16=function(l){for(var o=[],a=0;a<l.length;a+=1){var c=l.charCodeAt(a);o[o.length]=c>>8&255,o[o.length]=255&c}return o},ti.UTF16=function(l){return 2*l.length};var c9={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"};tb.MACSTRING=function(l,o,a,c){var u=c9[c];if(void 0!==u){for(var h="",d=0;d<a;d++){var f=l.getUint8(o+d);h+=f<=127?String.fromCharCode(f):u[127&f]}return h}};var c3,l3="function"==typeof WeakMap&&new WeakMap;function u9(l){return l>=-128&&l<=127}function ngt(l,o,a){for(var c=0,u=l.length;o<u&&c<64&&0===l[o];)++o,++c;return a.push(128|c-1),o}function igt(l,o,a){for(var c=0,u=l.length,h=o;h<u&&c<64;){var d=l[h];if(!u9(d)||0===d&&h+1<u&&0===l[h+1])break;++h,++c}a.push(c-1);for(var f=o;f<h;++f)a.push(l[f]+256&255);return h}function rgt(l,o,a){for(var c=0,u=l.length,h=o;h<u&&c<64;){var d=l[h];if(0===d||u9(d)&&h+1<u&&u9(l[h+1]))break;++h,++c}a.push(64|c-1);for(var f=o;f<h;++f){var p=l[f];a.push(p+65536>>8&255,p+256&255)}return h}on.MACSTRING=function(l,o){var a=function(l){if(!c3)for(var o in c3={},c9)c3[o]=new String(o);var a=c3[l];if(void 0!==a){if(l3){var c=l3.get(a);if(void 0!==c)return c}var u=c9[l];if(void 0!==u){for(var h={},d=0;d<u.length;d++)h[u.charCodeAt(d)]=d+128;return l3&&l3.set(a,h),h}}}(o);if(void 0!==a){for(var c=[],u=0;u<l.length;u++){var h=l.charCodeAt(u);if(h>=128&&void 0===(h=a[h]))return;c[u]=h}return c}},ti.MACSTRING=function(l,o){var a=on.MACSTRING(l,o);return void 0!==a?a.length:0},on.VARDELTAS=function(l){for(var o=0,a=[];o<l.length;){var c=l[o];o=0===c?ngt(l,o,a):c>=-128&&c<=127?igt(l,o,a):rgt(l,o,a)}return a},on.INDEX=function(l){for(var o=1,a=[o],c=[],u=0;u<l.length;u+=1){var h=on.OBJECT(l[u]);Array.prototype.push.apply(c,h),a.push(o+=h.length)}if(0===c.length)return[0,0];for(var d=[],f=1+Math.floor(Math.log(o)/Math.log(2))/8|0,p=[void 0,on.BYTE,on.USHORT,on.UINT24,on.ULONG][f],g=0;g<a.length;g+=1){var m=p(a[g]);Array.prototype.push.apply(d,m)}return Array.prototype.concat(on.Card16(l.length),on.OffSize(f),d,c)},ti.INDEX=function(l){return on.INDEX(l).length},on.DICT=function(l){for(var o=[],a=Object.keys(l),c=a.length,u=0;u<c;u+=1){var h=parseInt(a[u],0),d=l[h];o=(o=o.concat(on.OPERAND(d.value,d.type))).concat(on.OPERATOR(h))}return o},ti.DICT=function(l){return on.DICT(l).length},on.OPERATOR=function(l){return l<1200?[l]:[12,l-1200]},on.OPERAND=function(l,o){var a=[];if(Array.isArray(o))for(var c=0;c<o.length;c+=1)zn.argument(l.length===o.length,"Not enough arguments given for type"+o),a=a.concat(on.OPERAND(l[c],o[c]));else if("SID"===o)a=a.concat(on.NUMBER(l));else if("offset"===o)a=a.concat(on.NUMBER32(l));else if("number"===o)a=a.concat(on.NUMBER(l));else{if("real"!==o)throw new Error("Unknown operand type "+o);a=a.concat(on.REAL(l))}return a},on.OP=on.BYTE,ti.OP=ti.BYTE;var u3="function"==typeof WeakMap&&new WeakMap;function jo(l,o,a){if(o.length&&("coverageFormat"!==o[0].name||1===o[0].value))for(var c=0;c<o.length;c+=1){var u=o[c];this[u.name]=u.value}if(this.tableName=l,this.fields=o,a)for(var h=Object.keys(a),d=0;d<h.length;d+=1){var f=h[d];void 0!==this[f]&&(this[f]=a[f])}}function l2(l,o,a){void 0===a&&(a=o.length);var c=new Array(o.length+1);c[0]={name:l+"Count",type:"USHORT",value:a};for(var u=0;u<o.length;u++)c[u+1]={name:l+u,type:"USHORT",value:o[u]};return c}function h9(l,o,a){var c=o.length,u=new Array(c+1);u[0]={name:l+"Count",type:"USHORT",value:c};for(var h=0;h<c;h++)u[h+1]={name:l+h,type:"TABLE",value:a(o[h],h)};return u}function c2(l,o,a){var c=o.length,u=[];u[0]={name:l+"Count",type:"USHORT",value:c};for(var h=0;h<c;h++)u=u.concat(a(o[h],h));return u}function h3(l){1===l.format?jo.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(l2("glyph",l.glyphs))):2===l.format?jo.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(c2("rangeRecord",l.ranges,function(o){return[{name:"startGlyphID",type:"USHORT",value:o.start},{name:"endGlyphID",type:"USHORT",value:o.end},{name:"startCoverageIndex",type:"USHORT",value:o.index}]}))):zn.assert(!1,"Coverage format must be 1 or 2.")}function d3(l){jo.call(this,"scriptListTable",c2("scriptRecord",l,function(o,a){var c=o.script,u=c.defaultLangSys;return zn.assert(!!u,"Unable to write GSUB: script "+o.tag+" has no default language system."),[{name:"scriptTag"+a,type:"TAG",value:o.tag},{name:"script"+a,type:"TABLE",value:new jo("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new jo("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:u.reqFeatureIndex}].concat(l2("featureIndex",u.featureIndexes)))}].concat(c2("langSys",c.langSysRecords,function(h,d){var f=h.langSys;return[{name:"langSysTag"+d,type:"TAG",value:h.tag},{name:"langSys"+d,type:"TABLE",value:new jo("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:f.reqFeatureIndex}].concat(l2("featureIndex",f.featureIndexes)))}]})))}]}))}function f3(l){jo.call(this,"featureListTable",c2("featureRecord",l,function(o,a){var c=o.feature;return[{name:"featureTag"+a,type:"TAG",value:o.tag},{name:"feature"+a,type:"TABLE",value:new jo("featureTable",[{name:"featureParams",type:"USHORT",value:c.featureParams}].concat(l2("lookupListIndex",c.lookupListIndexes)))}]}))}function p3(l,o){jo.call(this,"lookupListTable",h9("lookup",l,function(a){var c=o[a.lookupType];return zn.assert(!!c,"Unable to write GSUB lookup type "+a.lookupType+" tables."),new jo("lookupTable",[{name:"lookupType",type:"USHORT",value:a.lookupType},{name:"lookupFlag",type:"USHORT",value:a.lookupFlag}].concat(h9("subtable",a.subtables,c)))}))}on.CHARSTRING=function(l){if(u3){var o=u3.get(l);if(void 0!==o)return o}for(var a=[],c=l.length,u=0;u<c;u+=1){var h=l[u];a=a.concat(on[h.type](h.value))}return u3&&u3.set(l,a),a},ti.CHARSTRING=function(l){return on.CHARSTRING(l).length},on.OBJECT=function(l){var o=on[l.type];return zn.argument(void 0!==o,"No encoding function for type "+l.type),o(l.value)},ti.OBJECT=function(l){var o=ti[l.type];return zn.argument(void 0!==o,"No sizeOf function for type "+l.type),o(l.value)},on.TABLE=function(l){for(var o=[],a=l.fields.length,c=[],u=[],h=0;h<a;h+=1){var d=l.fields[h],f=on[d.type];zn.argument(void 0!==f,"No encoding function for field type "+d.type+" ("+d.name+")");var p=l[d.name];void 0===p&&(p=d.value);var g=f(p);"TABLE"===d.type?(u.push(o.length),o=o.concat([0,0]),c.push(g)):o=o.concat(g)}for(var m=0;m<c.length;m+=1){var v=u[m],y=o.length;zn.argument(y<65536,"Table "+l.tableName+" too big."),o[v]=y>>8,o[v+1]=255&y,o=o.concat(c[m])}return o},ti.TABLE=function(l){for(var o=0,a=l.fields.length,c=0;c<a;c+=1){var u=l.fields[c],h=ti[u.type];zn.argument(void 0!==h,"No sizeOf function for field type "+u.type+" ("+u.name+")");var d=l[u.name];void 0===d&&(d=u.value),o+=h(d),"TABLE"===u.type&&(o+=2)}return o},on.RECORD=on.TABLE,ti.RECORD=ti.TABLE,on.LITERAL=function(l){return l},ti.LITERAL=function(l){return l.length},jo.prototype.encode=function(){return on.TABLE(this)},jo.prototype.sizeOf=function(){return ti.TABLE(this)},(h3.prototype=Object.create(jo.prototype)).constructor=h3,(d3.prototype=Object.create(jo.prototype)).constructor=d3,(f3.prototype=Object.create(jo.prototype)).constructor=f3,(p3.prototype=Object.create(jo.prototype)).constructor=p3;var gn={Table:jo,Record:jo,Coverage:h3,ScriptList:d3,FeatureList:f3,LookupList:p3,ushortList:l2,tableList:h9,recordList:c2};function vve(l,o){return l.getUint8(o)}function g3(l,o){return l.getUint16(o,!1)}function d9(l,o){return l.getUint32(o,!1)}function yve(l,o){return l.getInt16(o,!1)+l.getUint16(o+2,!1)/65535}var ugt={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Je(l,o){this.data=l,this.offset=o,this.relativeOffset=0}Je.prototype.parseByte=function(){var l=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,l},Je.prototype.parseChar=function(){var l=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,l},Je.prototype.parseCard8=Je.prototype.parseByte,Je.prototype.parseCard16=Je.prototype.parseUShort=function(){var l=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,l},Je.prototype.parseSID=Je.prototype.parseUShort,Je.prototype.parseOffset16=Je.prototype.parseUShort,Je.prototype.parseShort=function(){var l=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,l},Je.prototype.parseF2Dot14=function(){var l=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,l},Je.prototype.parseOffset32=Je.prototype.parseULong=function(){var l=d9(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,l},Je.prototype.parseFixed=function(){var l=yve(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,l},Je.prototype.parseString=function(l){var o=this.data,a=this.offset+this.relativeOffset,c="";this.relativeOffset+=l;for(var u=0;u<l;u++)c+=String.fromCharCode(o.getUint8(a+u));return c},Je.prototype.parseTag=function(){return this.parseString(4)},Je.prototype.parseLongDateTime=function(){var l=d9(this.data,this.offset+this.relativeOffset+4);return l-=2082844800,this.relativeOffset+=8,l},Je.prototype.parseVersion=function(l){var o=g3(this.data,this.offset+this.relativeOffset),a=g3(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===l&&(l=4096),o+a/l/10},Je.prototype.skip=function(l,o){void 0===o&&(o=1),this.relativeOffset+=ugt[l]*o},Je.prototype.parseULongList=function(l){void 0===l&&(l=this.parseULong());for(var o=new Array(l),a=this.data,c=this.offset+this.relativeOffset,u=0;u<l;u++)o[u]=a.getUint32(c),c+=4;return this.relativeOffset+=4*l,o},Je.prototype.parseOffset16List=Je.prototype.parseUShortList=function(l){void 0===l&&(l=this.parseUShort());for(var o=new Array(l),a=this.data,c=this.offset+this.relativeOffset,u=0;u<l;u++)o[u]=a.getUint16(c),c+=2;return this.relativeOffset+=2*l,o},Je.prototype.parseShortList=function(l){for(var o=new Array(l),a=this.data,c=this.offset+this.relativeOffset,u=0;u<l;u++)o[u]=a.getInt16(c),c+=2;return this.relativeOffset+=2*l,o},Je.prototype.parseByteList=function(l){for(var o=new Array(l),a=this.data,c=this.offset+this.relativeOffset,u=0;u<l;u++)o[u]=a.getUint8(c++);return this.relativeOffset+=l,o},Je.prototype.parseList=function(l,o){o||(o=l,l=this.parseUShort());for(var a=new Array(l),c=0;c<l;c++)a[c]=o.call(this);return a},Je.prototype.parseList32=function(l,o){o||(o=l,l=this.parseULong());for(var a=new Array(l),c=0;c<l;c++)a[c]=o.call(this);return a},Je.prototype.parseRecordList=function(l,o){o||(o=l,l=this.parseUShort());for(var a=new Array(l),c=Object.keys(o),u=0;u<l;u++){for(var h={},d=0;d<c.length;d++){var f=c[d];h[f]=o[f].call(this)}a[u]=h}return a},Je.prototype.parseRecordList32=function(l,o){o||(o=l,l=this.parseULong());for(var a=new Array(l),c=Object.keys(o),u=0;u<l;u++){for(var h={},d=0;d<c.length;d++){var f=c[d];h[f]=o[f].call(this)}a[u]=h}return a},Je.prototype.parseStruct=function(l){if("function"==typeof l)return l.call(this);for(var o=Object.keys(l),a={},c=0;c<o.length;c++){var u=o[c];a[u]=l[u].call(this)}return a},Je.prototype.parseValueRecord=function(l){if(void 0===l&&(l=this.parseUShort()),0!==l){var o={};return 1&l&&(o.xPlacement=this.parseShort()),2&l&&(o.yPlacement=this.parseShort()),4&l&&(o.xAdvance=this.parseShort()),8&l&&(o.yAdvance=this.parseShort()),16&l&&(o.xPlaDevice=void 0,this.parseShort()),32&l&&(o.yPlaDevice=void 0,this.parseShort()),64&l&&(o.xAdvDevice=void 0,this.parseShort()),128&l&&(o.yAdvDevice=void 0,this.parseShort()),o}},Je.prototype.parseValueRecordList=function(){for(var l=this.parseUShort(),o=this.parseUShort(),a=new Array(o),c=0;c<o;c++)a[c]=this.parseValueRecord(l);return a},Je.prototype.parsePointer=function(l){var o=this.parseOffset16();if(o>0)return new Je(this.data,this.offset+o).parseStruct(l)},Je.prototype.parsePointer32=function(l){var o=this.parseOffset32();if(o>0)return new Je(this.data,this.offset+o).parseStruct(l)},Je.prototype.parseListOfLists=function(l){for(var o=this.parseOffset16List(),a=o.length,c=this.relativeOffset,u=new Array(a),h=0;h<a;h++){var d=o[h];if(0!==d)if(this.relativeOffset=d,l){for(var f=this.parseOffset16List(),p=new Array(f.length),g=0;g<f.length;g++)this.relativeOffset=d+f[g],p[g]=l.call(this);u[h]=p}else u[h]=this.parseUShortList();else u[h]=void 0}return this.relativeOffset=c,u},Je.prototype.parseCoverage=function(){var l=this.offset+this.relativeOffset,o=this.parseUShort(),a=this.parseUShort();if(1===o)return{format:1,glyphs:this.parseUShortList(a)};if(2===o){for(var c=new Array(a),u=0;u<a;u++)c[u]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:c}}throw new Error("0x"+l.toString(16)+": Coverage format must be 1 or 2.")},Je.prototype.parseClassDef=function(){var l=this.offset+this.relativeOffset,o=this.parseUShort();if(1===o)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===o)return{format:2,ranges:this.parseRecordList({start:Je.uShort,end:Je.uShort,classId:Je.uShort})};throw new Error("0x"+l.toString(16)+": ClassDef format must be 1 or 2.")},Je.list=function(l,o){return function(){return this.parseList(l,o)}},Je.list32=function(l,o){return function(){return this.parseList32(l,o)}},Je.recordList=function(l,o){return function(){return this.parseRecordList(l,o)}},Je.recordList32=function(l,o){return function(){return this.parseRecordList32(l,o)}},Je.pointer=function(l){return function(){return this.parsePointer(l)}},Je.pointer32=function(l){return function(){return this.parsePointer32(l)}},Je.tag=Je.prototype.parseTag,Je.byte=Je.prototype.parseByte,Je.uShort=Je.offset16=Je.prototype.parseUShort,Je.uShortList=Je.prototype.parseUShortList,Je.uLong=Je.offset32=Je.prototype.parseULong,Je.uLongList=Je.prototype.parseULongList,Je.struct=Je.prototype.parseStruct,Je.coverage=Je.prototype.parseCoverage,Je.classDef=Je.prototype.parseClassDef;var _ve={reserved:Je.uShort,reqFeatureIndex:Je.uShort,featureIndexes:Je.uShortList};Je.prototype.parseScriptList=function(){return this.parsePointer(Je.recordList({tag:Je.tag,script:Je.pointer({defaultLangSys:Je.pointer(_ve),langSysRecords:Je.recordList({tag:Je.tag,langSys:Je.pointer(_ve)})})}))||[]},Je.prototype.parseFeatureList=function(){return this.parsePointer(Je.recordList({tag:Je.tag,feature:Je.pointer({featureParams:Je.offset16,lookupListIndexes:Je.uShortList})}))||[]},Je.prototype.parseLookupList=function(l){return this.parsePointer(Je.list(Je.pointer(function(){var o=this.parseUShort();zn.argument(1<=o&&o<=9,"GPOS/GSUB lookup type "+o+" unknown.");var a=this.parseUShort(),c=16&a;return{lookupType:o,lookupFlag:a,subtables:this.parseList(Je.pointer(l[o])),markFilteringSet:c?this.parseUShort():void 0}})))||[]},Je.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var l=this.parseUShort(),o=this.parseUShort();return zn.argument(1===l&&o<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Je.offset32,featureTableSubstitutionOffset:Je.offset32})})||[]};var kn={getByte:vve,getCard8:vve,getUShort:g3,getCard16:g3,getShort:function sgt(l,o){return l.getInt16(o,!1)},getULong:d9,getFixed:yve,getTag:function ogt(l,o){for(var a="",c=o;c<o+4;c+=1)a+=String.fromCharCode(l.getInt8(c));return a},getOffset:function agt(l,o,a){for(var c=0,u=0;u<a;u+=1)c<<=8,c+=l.getUint8(o+u);return c},getBytes:function lgt(l,o,a){for(var c=[],u=o;u<a;u+=1)c.push(l.getUint8(u));return c},bytesToString:function cgt(l){for(var o="",a=0;a<l.length;a+=1)o+=String.fromCharCode(l[a]);return o},Parser:Je};function pgt(l,o,a){l.segments.push({end:o,start:o,delta:-(o-a),offset:0,glyphIndex:a})}var bve_parse=function fgt(l,o){var a={};a.version=kn.getUShort(l,o),zn.argument(0===a.version,"cmap table version should be 0."),a.numTables=kn.getUShort(l,o+2);for(var c=-1,u=a.numTables-1;u>=0;u-=1){var h=kn.getUShort(l,o+4+8*u),d=kn.getUShort(l,o+4+8*u+2);if(3===h&&(0===d||1===d||10===d)||0===h&&(0===d||1===d||2===d||3===d||4===d)){c=kn.getULong(l,o+4+8*u+4);break}}if(-1===c)throw new Error("No valid cmap sub-tables found.");var f=new kn.Parser(l,o+c);if(a.format=f.parseUShort(),12===a.format)!function hgt(l,o){var a;o.parseUShort(),l.length=o.parseULong(),l.language=o.parseULong(),l.groupCount=a=o.parseULong(),l.glyphIndexMap={};for(var c=0;c<a;c+=1)for(var u=o.parseULong(),h=o.parseULong(),d=o.parseULong(),f=u;f<=h;f+=1)l.glyphIndexMap[f]=d,d++}(a,f);else{if(4!==a.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+a.format+").");!function dgt(l,o,a,c,u){var h;l.length=o.parseUShort(),l.language=o.parseUShort(),l.segCount=h=o.parseUShort()>>1,o.skip("uShort",3),l.glyphIndexMap={};for(var d=new kn.Parser(a,c+u+14),f=new kn.Parser(a,c+u+16+2*h),p=new kn.Parser(a,c+u+16+4*h),g=new kn.Parser(a,c+u+16+6*h),m=c+u+16+8*h,v=0;v<h-1;v+=1)for(var y=void 0,_=d.parseUShort(),b=f.parseUShort(),C=p.parseShort(),x=g.parseUShort(),S=b;S<=_;S+=1)0!==x?(m=g.offset+g.relativeOffset-2,m+=x,0!==(y=kn.getUShort(a,m+=2*(S-b)))&&(y=y+C&65535)):y=S+C&65535,l.glyphIndexMap[S]=y}(a,f,l,o,c)}return a},bve_make=function mgt(l){var a,o=!0;for(a=l.length-1;a>0;a-=1)if(l.get(a).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),o=!1;break}var u=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:o?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:o?12:20}];o||(u=u.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),u=u.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var h=new gn.Table("cmap",u);for(h.segments=[],a=0;a<l.length;a+=1){for(var d=l.get(a),f=0;f<d.unicodes.length;f+=1)pgt(h,d.unicodes[f],a);h.segments=h.segments.sort(function(w,O){return w.start-O.start})}!function ggt(l){l.segments.push({end:65535,start:65535,delta:1,offset:0})}(h);var p=h.segments.length,g=0,m=[],v=[],y=[],_=[],b=[],C=[];for(a=0;a<p;a+=1){var x=h.segments[a];x.end<=65535&&x.start<=65535?(m=m.concat({name:"end_"+a,type:"USHORT",value:x.end}),v=v.concat({name:"start_"+a,type:"USHORT",value:x.start}),y=y.concat({name:"idDelta_"+a,type:"SHORT",value:x.delta}),_=_.concat({name:"idRangeOffset_"+a,type:"USHORT",value:x.offset}),void 0!==x.glyphId&&(b=b.concat({name:"glyph_"+a,type:"USHORT",value:x.glyphId}))):g+=1,!o&&void 0!==x.glyphIndex&&(C=(C=(C=C.concat({name:"cmap12Start_"+a,type:"ULONG",value:x.start})).concat({name:"cmap12End_"+a,type:"ULONG",value:x.end})).concat({name:"cmap12Glyph_"+a,type:"ULONG",value:x.glyphIndex}))}if(h.segCountX2=2*(p-g),h.searchRange=2*Math.pow(2,Math.floor(Math.log(p-g)/Math.log(2))),h.entrySelector=Math.log(h.searchRange/2)/Math.log(2),h.rangeShift=h.segCountX2-h.searchRange,h.fields=h.fields.concat(m),h.fields.push({name:"reservedPad",type:"USHORT",value:0}),h.fields=h.fields.concat(v),h.fields=h.fields.concat(y),h.fields=h.fields.concat(_),h.fields=h.fields.concat(b),h.cmap4Length=14+2*m.length+2+2*v.length+2*y.length+2*_.length+2*b.length,!o){var S=16+4*C.length;h.cmap12Offset=20+h.cmap4Length,h.fields=h.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:S},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:C.length/3}]),h.fields=h.fields.concat(C)}return h},m3=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],vgt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ygt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],q0=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function xve(l){this.font=l}function Cve(l){this.cmap=l}function v3(l,o){this.encoding=l,this.charset=o}function f9(l){switch(l.version){case 1:this.names=q0.slice();break;case 2:this.names=new Array(l.numberOfGlyphs);for(var o=0;o<l.numberOfGlyphs;o++)this.names[o]=l.glyphNameIndex[o]<q0.length?q0[l.glyphNameIndex[o]]:l.names[l.glyphNameIndex[o]-q0.length];break;case 2.5:this.names=new Array(l.numberOfGlyphs);for(var a=0;a<l.numberOfGlyphs;a++)this.names[a]=q0[a+l.glyphNameIndex[a]];break;default:this.names=[]}}xve.prototype.charToGlyphIndex=function(l){var o=l.codePointAt(0),a=this.font.glyphs;if(a)for(var c=0;c<a.length;c+=1)for(var u=a.get(c),h=0;h<u.unicodes.length;h+=1)if(u.unicodes[h]===o)return c;return null},Cve.prototype.charToGlyphIndex=function(l){return this.cmap.glyphIndexMap[l.codePointAt(0)]||0},v3.prototype.charToGlyphIndex=function(l){var o=l.codePointAt(0);return this.charset.indexOf(this.encoding[o])},f9.prototype.nameToGlyphIndex=function(l){return this.names.indexOf(l)},f9.prototype.glyphIndexToName=function(l){return this.names[l]};var Z0_line=function Cgt(l,o,a,c,u){l.beginPath(),l.moveTo(o,a),l.lineTo(c,u),l.stroke()};function Rc(l){this.bindConstructorValues(l)}function y3(l,o,a){Object.defineProperty(l,o,{get:function(){return l[a]},set:function(c){l[a]=c},enumerable:!0,configurable:!0})}function p9(l,o){if(this.font=l,this.glyphs={},Array.isArray(o))for(var a=0;a<o.length;a++){var c=o[a];c.path.unitsPerEm=l.unitsPerEm,this.glyphs[a]=c}this.length=o&&o.length||0}Rc.prototype.bindConstructorValues=function(l){this.index=l.index||0,this.name=l.name||null,this.unicode=l.unicode||void 0,this.unicodes=l.unicodes||void 0!==l.unicode?[l.unicode]:[],"xMin"in l&&(this.xMin=l.xMin),"yMin"in l&&(this.yMin=l.yMin),"xMax"in l&&(this.xMax=l.xMax),"yMax"in l&&(this.yMax=l.yMax),"advanceWidth"in l&&(this.advanceWidth=l.advanceWidth),Object.defineProperty(this,"path",function Sgt(l,o){var a=o||new fo;return{configurable:!0,get:function(){return"function"==typeof a&&(a=a()),a},set:function(c){a=c}}}(0,l.path))},Rc.prototype.addUnicode=function(l){0===this.unicodes.length&&(this.unicode=l),this.unicodes.push(l)},Rc.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Rc.prototype.getPath=function(l,o,a,c,u){var h,d;l=void 0!==l?l:0,o=void 0!==o?o:0,a=void 0!==a?a:72,c||(c={});var f=c.xScale,p=c.yScale;if(c.hinting&&u&&u.hinting&&(d=this.path&&u.hinting.exec(this,a)),d)h=u.hinting.getCommands(d),l=Math.round(l),o=Math.round(o),f=p=1;else{h=this.path.commands;var g=1/(this.path.unitsPerEm||1e3)*a;void 0===f&&(f=g),void 0===p&&(p=g)}for(var m=new fo,v=0;v<h.length;v+=1){var y=h[v];"M"===y.type?m.moveTo(l+y.x*f,o+-y.y*p):"L"===y.type?m.lineTo(l+y.x*f,o+-y.y*p):"Q"===y.type?m.quadraticCurveTo(l+y.x1*f,o+-y.y1*p,l+y.x*f,o+-y.y*p):"C"===y.type?m.curveTo(l+y.x1*f,o+-y.y1*p,l+y.x2*f,o+-y.y2*p,l+y.x*f,o+-y.y*p):"Z"===y.type&&m.closePath()}return m},Rc.prototype.getContours=function(){if(void 0===this.points)return[];for(var l=[],o=[],a=0;a<this.points.length;a+=1){var c=this.points[a];o.push(c),c.lastPointOfContour&&(l.push(o),o=[])}return zn.argument(0===o.length,"There are still points left in the current contour."),l},Rc.prototype.getMetrics=function(){for(var l=this.path.commands,o=[],a=[],c=0;c<l.length;c+=1){var u=l[c];"Z"!==u.type&&(o.push(u.x),a.push(u.y)),("Q"===u.type||"C"===u.type)&&(o.push(u.x1),a.push(u.y1)),"C"===u.type&&(o.push(u.x2),a.push(u.y2))}var h={xMin:Math.min.apply(null,o),yMin:Math.min.apply(null,a),xMax:Math.max.apply(null,o),yMax:Math.max.apply(null,a),leftSideBearing:this.leftSideBearing};return isFinite(h.xMin)||(h.xMin=0),isFinite(h.xMax)||(h.xMax=this.advanceWidth),isFinite(h.yMin)||(h.yMin=0),isFinite(h.yMax)||(h.yMax=0),h.rightSideBearing=this.advanceWidth-h.leftSideBearing-(h.xMax-h.xMin),h},Rc.prototype.draw=function(l,o,a,c,u){this.getPath(o,a,c,u).draw(l)},Rc.prototype.drawPoints=function(l,o,a,c){function u(v,y,_,b){l.beginPath();for(var C=0;C<v.length;C+=1)l.moveTo(y+v[C].x*b,_+v[C].y*b),l.arc(y+v[C].x*b,_+v[C].y*b,2,0,2*Math.PI,!1);l.closePath(),l.fill()}o=void 0!==o?o:0,a=void 0!==a?a:0;for(var h=1/this.path.unitsPerEm*(c=void 0!==c?c:24),d=[],f=[],p=this.path,g=0;g<p.commands.length;g+=1){var m=p.commands[g];void 0!==m.x&&d.push({x:m.x,y:-m.y}),void 0!==m.x1&&f.push({x:m.x1,y:-m.y1}),void 0!==m.x2&&f.push({x:m.x2,y:-m.y2})}l.fillStyle="blue",u(d,o,a,h),l.fillStyle="red",u(f,o,a,h)},Rc.prototype.drawMetrics=function(l,o,a,c){var u;o=void 0!==o?o:0,a=void 0!==a?a:0,u=1/this.path.unitsPerEm*(c=void 0!==c?c:24),l.lineWidth=1,l.strokeStyle="black",Z0_line(l,o,-1e4,o,1e4),Z0_line(l,-1e4,a,1e4,a);var h=this.xMin||0,d=this.yMin||0,f=this.xMax||0,p=this.yMax||0,g=this.advanceWidth||0;l.strokeStyle="blue",Z0_line(l,o+h*u,-1e4,o+h*u,1e4),Z0_line(l,o+f*u,-1e4,o+f*u,1e4),Z0_line(l,-1e4,a+-d*u,1e4,a+-d*u),Z0_line(l,-1e4,a+-p*u,1e4,a+-p*u),l.strokeStyle="green",Z0_line(l,o+g*u,-1e4,o+g*u,1e4)},p9.prototype.get=function(l){if(void 0===this.glyphs[l]){this.font._push(l),"function"==typeof this.glyphs[l]&&(this.glyphs[l]=this.glyphs[l]());var o=this.glyphs[l],a=this.font._IndexToUnicodeMap[l];if(a)for(var c=0;c<a.unicodes.length;c++)o.addUnicode(a.unicodes[c]);this.font.cffEncoding?o.name=this.font.isCIDFont?"gid"+l:this.font.cffEncoding.charset[l]:this.font.glyphNames.names&&(o.name=this.font.glyphNames.glyphIndexToName(l)),this.glyphs[l].advanceWidth=this.font._hmtxTableData[l].advanceWidth,this.glyphs[l].leftSideBearing=this.font._hmtxTableData[l].leftSideBearing}else"function"==typeof this.glyphs[l]&&(this.glyphs[l]=this.glyphs[l]());return this.glyphs[l]},p9.prototype.push=function(l,o){this.glyphs[l]=o,this.length++};var Ed={GlyphSet:p9,glyphLoader:function wgt(l,o){return new Rc({index:o,font:l})},ttfGlyphLoader:function Tgt(l,o,a,c,u,h){return function(){var d=new Rc({index:o,font:l});return d.path=function(){a(d,c,u);var f=h(l.glyphs,d);return f.unitsPerEm=l.unitsPerEm,f},y3(d,"xMin","_xMin"),y3(d,"xMax","_xMax"),y3(d,"yMin","_yMin"),y3(d,"yMax","_yMax"),d}},cffGlyphLoader:function Ogt(l,o,a,c){return function(){var u=new Rc({index:o,font:l});return u.path=function(){var h=a(l,u,c);return h.unitsPerEm=l.unitsPerEm,h},u}}};function Sve(l,o){if(l===o)return!0;if(Array.isArray(l)&&Array.isArray(o)){if(l.length!==o.length)return!1;for(var a=0;a<l.length;a+=1)if(!Sve(l[a],o[a]))return!1;return!0}return!1}function g9(l){return l.length<1240?107:l.length<33900?1131:32768}function Pg(l,o,a){var d,f,c=[],u=[],h=kn.getCard16(l,o);if(0!==h){var p=kn.getByte(l,o+2);d=o+(h+1)*p+2;for(var g=o+3,m=0;m<h+1;m+=1)c.push(kn.getOffset(l,g,p)),g+=p;f=d+c[h]}else f=o+2;for(var v=0;v<c.length-1;v+=1){var y=kn.getBytes(l,d+c[v],d+c[v+1]);a&&(y=a(y)),u.push(y)}return{objects:u,startOffset:o,endOffset:f}}function Egt(l,o){if(28===o)return l.parseByte()<<8|l.parseByte();if(29===o)return l.parseByte()<<24|l.parseByte()<<16|l.parseByte()<<8|l.parseByte();if(30===o)return function Mgt(l){for(var o="",c=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var u=l.parseByte(),h=u>>4,d=15&u;if(15===h||(o+=c[h],15===d))break;o+=c[d]}return parseFloat(o)}(l);if(o>=32&&o<=246)return o-139;if(o>=247&&o<=250)return 256*(o-247)+l.parseByte()+108;if(o>=251&&o<=254)return 256*-(o-251)-l.parseByte()-108;throw new Error("Invalid b0 "+o)}function wve(l,o,a){var c=new kn.Parser(l,o=void 0!==o?o:0),u=[],h=[];for(a=void 0!==a?a:l.length;c.relativeOffset<a;){var d=c.parseByte();d<=21?(12===d&&(d=1200+c.parseByte()),u.push([d,h]),h=[]):h.push(Egt(c,d))}return function Agt(l){for(var o={},a=0;a<l.length;a+=1){var h,c=l[a][0],u=l[a][1];if(h=1===u.length?u[0]:u,o.hasOwnProperty(c)&&!isNaN(o[c]))throw new Error("Object "+o+" already has key "+c);o[c]=h}return o}(u)}function u2(l,o){return o<=390?m3[o]:l[o-391]}function Tve(l,o,a){for(var u,c={},h=0;h<o.length;h+=1){var d=o[h];if(Array.isArray(d.type)){var f=[];f.length=d.type.length;for(var p=0;p<d.type.length;p++)void 0===(u=void 0!==l[d.op]?l[d.op][p]:void 0)&&(u=void 0!==d.value&&void 0!==d.value[p]?d.value[p]:null),"SID"===d.type[p]&&(u=u2(a,u)),f[p]=u;c[d.name]=f}else void 0===(u=l[d.op])&&(u=void 0!==d.value?d.value:null),"SID"===d.type&&(u=u2(a,u)),c[d.name]=u}return c}var Ove=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Dve=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Pgt(l,o){return Tve(wve(l,0,l.byteLength),Ove,o)}function kve(l,o,a,c){return Tve(wve(l,o,a),Dve,c)}function Mve(l,o,a,c){for(var u=[],h=0;h<a.length;h+=1){var f=Pgt(new DataView(new Uint8Array(a[h]).buffer),c);f._subrs=[],f._subrsBias=0,f._defaultWidthX=0,f._nominalWidthX=0;var p=f.private[0],g=f.private[1];if(0!==p&&0!==g){var m=kve(l,g+o,p,c);if(f._defaultWidthX=m.defaultWidthX,f._nominalWidthX=m.nominalWidthX,0!==m.subrs){var y=Pg(l,g+m.subrs+o);f._subrs=y.objects,f._subrsBias=g9(f._subrs)}f._privateDict=m}u.push(f)}return u}function Eve(l,o,a){var c,u,h,d,b,C,x,S,f=new fo,p=[],g=0,m=!1,v=!1,y=0,_=0;if(l.isCIDFont){var O=l.tables.cff.topDict._fdArray[l.tables.cff.topDict._fdSelect[o.index]];b=O._subrs,C=O._subrsBias,x=O._defaultWidthX,S=O._nominalWidthX}else b=l.tables.cff.topDict._subrs,C=l.tables.cff.topDict._subrsBias,x=l.tables.cff.topDict._defaultWidthX,S=l.tables.cff.topDict._nominalWidthX;var T=x;function M(E,P){v&&f.closePath(),f.moveTo(E,P),v=!0}function A(){p.length%2!=0&&!m&&(T=p.shift()+S),g+=p.length>>1,p.length=0,m=!0}return function I(E){for(var P,B,V,Q,j,N,U,z,$,H,G,W,X=0;X<E.length;){var K=E[X];switch(X+=1,K){case 1:case 3:case 18:case 23:A();break;case 4:p.length>1&&!m&&(T=p.shift()+S,m=!0),_+=p.pop(),M(y,_);break;case 5:for(;p.length>0;)y+=p.shift(),_+=p.shift(),f.lineTo(y,_);break;case 6:for(;p.length>0&&(y+=p.shift(),f.lineTo(y,_),0!==p.length);)_+=p.shift(),f.lineTo(y,_);break;case 7:for(;p.length>0&&(_+=p.shift(),f.lineTo(y,_),0!==p.length);)y+=p.shift(),f.lineTo(y,_);break;case 8:for(;p.length>0;)c=y+p.shift(),u=_+p.shift(),h=c+p.shift(),d=u+p.shift(),y=h+p.shift(),_=d+p.shift(),f.curveTo(c,u,h,d,y,_);break;case 10:j=p.pop()+C,(N=b[j])&&I(N);break;case 11:return;case 12:switch(K=E[X],X+=1,K){case 35:c=y+p.shift(),u=_+p.shift(),h=c+p.shift(),d=u+p.shift(),U=h+p.shift(),z=d+p.shift(),$=U+p.shift(),H=z+p.shift(),G=$+p.shift(),W=H+p.shift(),y=G+p.shift(),_=W+p.shift(),p.shift(),f.curveTo(c,u,h,d,U,z),f.curveTo($,H,G,W,y,_);break;case 34:c=y+p.shift(),u=_,h=c+p.shift(),d=u+p.shift(),U=h+p.shift(),z=d,$=U+p.shift(),H=d,G=$+p.shift(),W=_,y=G+p.shift(),f.curveTo(c,u,h,d,U,z),f.curveTo($,H,G,W,y,_);break;case 36:c=y+p.shift(),u=_+p.shift(),h=c+p.shift(),d=u+p.shift(),U=h+p.shift(),z=d,$=U+p.shift(),H=d,G=$+p.shift(),W=H+p.shift(),y=G+p.shift(),f.curveTo(c,u,h,d,U,z),f.curveTo($,H,G,W,y,_);break;case 37:c=y+p.shift(),u=_+p.shift(),h=c+p.shift(),d=u+p.shift(),U=h+p.shift(),z=d+p.shift(),$=U+p.shift(),H=z+p.shift(),G=$+p.shift(),W=H+p.shift(),Math.abs(G-y)>Math.abs(W-_)?y=G+p.shift():_=W+p.shift(),f.curveTo(c,u,h,d,U,z),f.curveTo($,H,G,W,y,_);break;default:console.log("Glyph "+o.index+": unknown operator 1200"+K),p.length=0}break;case 14:p.length>0&&!m&&(T=p.shift()+S,m=!0),v&&(f.closePath(),v=!1);break;case 19:case 20:A(),X+=g+7>>3;break;case 21:p.length>2&&!m&&(T=p.shift()+S,m=!0),_+=p.pop(),M(y+=p.pop(),_);break;case 22:p.length>1&&!m&&(T=p.shift()+S,m=!0),M(y+=p.pop(),_);break;case 24:for(;p.length>2;)c=y+p.shift(),u=_+p.shift(),h=c+p.shift(),d=u+p.shift(),y=h+p.shift(),_=d+p.shift(),f.curveTo(c,u,h,d,y,_);y+=p.shift(),_+=p.shift(),f.lineTo(y,_);break;case 25:for(;p.length>6;)y+=p.shift(),_+=p.shift(),f.lineTo(y,_);c=y+p.shift(),u=_+p.shift(),h=c+p.shift(),d=u+p.shift(),y=h+p.shift(),_=d+p.shift(),f.curveTo(c,u,h,d,y,_);break;case 26:for(p.length%2&&(y+=p.shift());p.length>0;)c=y,u=_+p.shift(),h=c+p.shift(),d=u+p.shift(),y=h,_=d+p.shift(),f.curveTo(c,u,h,d,y,_);break;case 27:for(p.length%2&&(_+=p.shift());p.length>0;)c=y+p.shift(),u=_,h=c+p.shift(),d=u+p.shift(),y=h+p.shift(),f.curveTo(c,u,h,d,y,_=d);break;case 28:p.push(((P=E[X])<<24|(B=E[X+1])<<16)>>16),X+=2;break;case 29:j=p.pop()+l.gsubrsBias,(N=l.gsubrs[j])&&I(N);break;case 30:for(;p.length>0&&(c=y,u=_+p.shift(),h=c+p.shift(),d=u+p.shift(),y=h+p.shift(),_=d+(1===p.length?p.shift():0),f.curveTo(c,u,h,d,y,_),0!==p.length);)c=y+p.shift(),u=_,h=c+p.shift(),d=u+p.shift(),_=d+p.shift(),y=h+(1===p.length?p.shift():0),f.curveTo(c,u,h,d,y,_);break;case 31:for(;p.length>0&&(c=y+p.shift(),u=_,h=c+p.shift(),d=u+p.shift(),_=d+p.shift(),y=h+(1===p.length?p.shift():0),f.curveTo(c,u,h,d,y,_),0!==p.length);)c=y,u=_+p.shift(),h=c+p.shift(),d=u+p.shift(),y=h+p.shift(),_=d+(1===p.length?p.shift():0),f.curveTo(c,u,h,d,y,_);break;default:K<32?console.log("Glyph "+o.index+": unknown operator "+K):K<247?p.push(K-139):K<251?(P=E[X],X+=1,p.push(256*(K-247)+P+108)):K<255?(P=E[X],X+=1,p.push(256*-(K-251)-P-108)):(P=E[X],B=E[X+1],V=E[X+2],Q=E[X+3],X+=4,p.push((P<<24|B<<16|V<<8|Q)/65536))}}}(a),o.advanceWidth=T,f}function Ave(l,o){var a,c=m3.indexOf(l);return c>=0&&(a=c),(c=o.indexOf(l))>=0?a=c+m3.length:(a=m3.length+o.length,o.push(l)),a}function Ive(l,o,a){for(var c={},u=0;u<l.length;u+=1){var h=l[u],d=o[h.name];void 0!==d&&!Sve(d,h.value)&&("SID"===h.type&&(d=Ave(d,a)),c[h.op]={name:h.name,type:h.type,value:d})}return c}function Pve(l,o){var a=new gn.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return a.dict=Ive(Ove,l,o),a}function Rve(l){var o=new gn.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return o.topDicts=[{name:"topDict_0",type:"TABLE",value:l}],o}function $gt(l){var o=[],a=l.path;o.push({name:"width",type:"NUMBER",value:l.advanceWidth});for(var c=0,u=0,h=0;h<a.commands.length;h+=1){var d=void 0,f=void 0,p=a.commands[h];if("Q"===p.type){var g=.3333333333333333,m=2/3;p={type:"C",x:p.x,y:p.y,x1:Math.round(g*c+m*p.x1),y1:Math.round(g*u+m*p.y1),x2:Math.round(g*p.x+m*p.x1),y2:Math.round(g*p.y+m*p.y1)}}if("M"===p.type)d=Math.round(p.x-c),f=Math.round(p.y-u),o.push({name:"dx",type:"NUMBER",value:d}),o.push({name:"dy",type:"NUMBER",value:f}),o.push({name:"rmoveto",type:"OP",value:21}),c=Math.round(p.x),u=Math.round(p.y);else if("L"===p.type)d=Math.round(p.x-c),f=Math.round(p.y-u),o.push({name:"dx",type:"NUMBER",value:d}),o.push({name:"dy",type:"NUMBER",value:f}),o.push({name:"rlineto",type:"OP",value:5}),c=Math.round(p.x),u=Math.round(p.y);else if("C"===p.type){var v=Math.round(p.x1-c),y=Math.round(p.y1-u),_=Math.round(p.x2-p.x1),b=Math.round(p.y2-p.y1);d=Math.round(p.x-p.x2),f=Math.round(p.y-p.y2),o.push({name:"dx1",type:"NUMBER",value:v}),o.push({name:"dy1",type:"NUMBER",value:y}),o.push({name:"dx2",type:"NUMBER",value:_}),o.push({name:"dy2",type:"NUMBER",value:b}),o.push({name:"dx",type:"NUMBER",value:d}),o.push({name:"dy",type:"NUMBER",value:f}),o.push({name:"rrcurveto",type:"OP",value:8}),c=Math.round(p.x),u=Math.round(p.y)}}return o.push({name:"endchar",type:"OP",value:14}),o}var Fve_parse=function Lgt(l,o,a,c){a.tables.cff={};var u=function Igt(l,o){var a={};return a.formatMajor=kn.getCard8(l,o),a.formatMinor=kn.getCard8(l,o+1),a.size=kn.getCard8(l,o+2),a.offsetSize=kn.getCard8(l,o+3),a.startOffset=o,a.endOffset=o+4,a}(l,o),h=Pg(l,u.endOffset,kn.bytesToString),d=Pg(l,h.endOffset),f=Pg(l,d.endOffset,kn.bytesToString),p=Pg(l,f.endOffset);a.gsubrs=p.objects,a.gsubrsBias=g9(a.gsubrs);var g=Mve(l,o,d.objects,f.objects);if(1!==g.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+g.length);var m=g[0];if(a.tables.cff.topDict=m,m._privateDict&&(a.defaultWidthX=m._privateDict.defaultWidthX,a.nominalWidthX=m._privateDict.nominalWidthX),void 0!==m.ros[0]&&void 0!==m.ros[1]&&(a.isCIDFont=!0),a.isCIDFont){var v=m.fdArray,y=m.fdSelect;if(0===v||0===y)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var _=Pg(l,v+=o),b=Mve(l,o,_.objects,f.objects);m._fdArray=b,m._fdSelect=function Ngt(l,o,a,c){var h,u=[],d=new kn.Parser(l,o),f=d.parseCard8();if(0===f)for(var p=0;p<a;p++){if((h=d.parseCard8())>=c)throw new Error("CFF table CID Font FDSelect has bad FD index value "+h+" (FD count "+c+")");u.push(h)}else{if(3!==f)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+f);var g=d.parseCard16(),m=d.parseCard16();if(0!==m)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+m);for(var v,y=0;y<g;y++){if(h=d.parseCard8(),v=d.parseCard16(),h>=c)throw new Error("CFF table CID Font FDSelect has bad FD index value "+h+" (FD count "+c+")");if(v>a)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+v);for(;m<v;m++)u.push(h);m=v}if(v!==a)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+v)}return u}(l,y+=o,a.numGlyphs,b.length)}var O,C=o+m.private[1],x=kve(l,C,m.private[0],f.objects);if(a.defaultWidthX=x.defaultWidthX,a.nominalWidthX=x.nominalWidthX,0!==x.subrs){var w=Pg(l,C+x.subrs);a.subrs=w.objects,a.subrsBias=g9(a.subrs)}else a.subrs=[],a.subrsBias=0;c.lowMemory?(O=function Dgt(l,o){var u,h,a=[],c=kn.getCard16(l,o);if(0!==c){var d=kn.getByte(l,o+2);u=o+(c+1)*d+2;for(var f=o+3,p=0;p<c+1;p+=1)a.push(kn.getOffset(l,f,d)),f+=d;h=u+a[c]}else h=o+2;return{offsets:a,startOffset:o,endOffset:h}}(l,o+m.charStrings),a.nGlyphs=O.offsets.length):(O=Pg(l,o+m.charStrings),a.nGlyphs=O.objects.length);var T=function Rgt(l,o,a,c){var u,h,d=new kn.Parser(l,o);a-=1;var f=[".notdef"],p=d.parseCard8();if(0===p)for(var g=0;g<a;g+=1)u=d.parseSID(),f.push(u2(c,u));else if(1===p)for(;f.length<=a;){u=d.parseSID(),h=d.parseCard8();for(var m=0;m<=h;m+=1)f.push(u2(c,u)),u+=1}else{if(2!==p)throw new Error("Unknown charset format "+p);for(;f.length<=a;){u=d.parseSID(),h=d.parseCard16();for(var v=0;v<=h;v+=1)f.push(u2(c,u)),u+=1}}return f}(l,o+m.charset,a.nGlyphs,f.objects);if(a.cffEncoding=0===m.encoding?new v3(vgt,T):1===m.encoding?new v3(ygt,T):function Fgt(l,o,a){var c,u={},h=new kn.Parser(l,o),d=h.parseCard8();if(0===d)for(var f=h.parseCard8(),p=0;p<f;p+=1)u[c=h.parseCard8()]=p;else{if(1!==d)throw new Error("Unknown encoding format "+d);var g=h.parseCard8();c=1;for(var m=0;m<g;m+=1)for(var v=h.parseCard8(),y=h.parseCard8(),_=v;_<=v+y;_+=1)u[_]=c,c+=1}return new v3(u,a)}(l,o+m.encoding,T),a.encoding=a.encoding||a.cffEncoding,a.glyphs=new Ed.GlyphSet(a),c.lowMemory)a._push=function(I){var E=function kgt(l,o,a,c,u){var h=kn.getCard16(a,c),d=0;0!==h&&(d=c+(h+1)*kn.getByte(a,c+2)+2);var p=kn.getBytes(a,d+o[l],d+o[l+1]);return u&&(p=u(p)),p}(I,O.offsets,l,o+m.charStrings);a.glyphs.push(I,Ed.cffGlyphLoader(a,I,Eve,E))};else for(var M=0;M<a.nGlyphs;M+=1)a.glyphs.push(M,Ed.cffGlyphLoader(a,M,Eve,O.objects[M]))},Fve_make=function Qgt(l,o){for(var f,a=new gn.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),c=1/o.unitsPerEm,u={version:o.version,fullName:o.fullName,familyName:o.familyName,weight:o.weightName,fontBBox:o.fontBBox||[0,0,0,0],fontMatrix:[c,0,0,c,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},d=[],p=1;p<l.length;p+=1)f=l.get(p),d.push(f.name);var g=[];a.header=function Bgt(){return new gn.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}(),a.nameIndex=function Vgt(l){var o=new gn.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);o.names=[];for(var a=0;a<l.length;a+=1)o.names.push({name:"name_"+a,type:"NAME",value:l[a]});return o}([o.postScriptName]);var m=Pve(u,g);a.topDictIndex=Rve(m),a.globalSubrIndex=function Ugt(){return new gn.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}(),a.charsets=function Hgt(l,o){for(var a=new gn.Record("Charsets",[{name:"format",type:"Card8",value:0}]),c=0;c<l.length;c+=1){var h=Ave(l[c],o);a.fields.push({name:"glyph_"+c,type:"SID",value:h})}return a}(d,g),a.charStringsIndex=function Wgt(l){for(var o=new gn.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),a=0;a<l.length;a+=1){var c=l.get(a),u=$gt(c);o.charStrings.push({name:c.name,type:"CHARSTRING",value:u})}return o}(l),a.privateDict=function Ggt(l,o){var a=new gn.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return a.dict=Ive(Dve,l,o),a}({},g),a.stringIndex=function zgt(l){var o=new gn.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);o.strings=[];for(var a=0;a<l.length;a+=1)o.strings.push({name:"string_"+a,type:"STRING",value:l[a]});return o}(g);var v=a.header.sizeOf()+a.nameIndex.sizeOf()+a.topDictIndex.sizeOf()+a.stringIndex.sizeOf()+a.globalSubrIndex.sizeOf();return u.charset=v,u.encoding=0,u.charStrings=u.charset+a.charsets.sizeOf(),u.private[1]=u.charStrings+a.charStringsIndex.sizeOf(),m=Pve(u,g),a.topDictIndex=Rve(m),a},Nve_parse=function jgt(l,o){var a={},c=new kn.Parser(l,o);return a.version=c.parseVersion(),a.fontRevision=Math.round(1e3*c.parseFixed())/1e3,a.checkSumAdjustment=c.parseULong(),a.magicNumber=c.parseULong(),zn.argument(1594834165===a.magicNumber,"Font header has wrong magic number."),a.flags=c.parseUShort(),a.unitsPerEm=c.parseUShort(),a.created=c.parseLongDateTime(),a.modified=c.parseLongDateTime(),a.xMin=c.parseShort(),a.yMin=c.parseShort(),a.xMax=c.parseShort(),a.yMax=c.parseShort(),a.macStyle=c.parseUShort(),a.lowestRecPPEM=c.parseUShort(),a.fontDirectionHint=c.parseShort(),a.indexToLocFormat=c.parseShort(),a.glyphDataFormat=c.parseShort(),a},Nve_make=function qgt(l){var o=Math.round((new Date).getTime()/1e3)+2082844800,a=o;return l.createdTimestamp&&(a=l.createdTimestamp+2082844800),new gn.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:a},{name:"modified",type:"LONGDATETIME",value:o},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],l)},Lve_parse=function Zgt(l,o){var a={},c=new kn.Parser(l,o);return a.version=c.parseVersion(),a.ascender=c.parseShort(),a.descender=c.parseShort(),a.lineGap=c.parseShort(),a.advanceWidthMax=c.parseUShort(),a.minLeftSideBearing=c.parseShort(),a.minRightSideBearing=c.parseShort(),a.xMaxExtent=c.parseShort(),a.caretSlopeRise=c.parseShort(),a.caretSlopeRun=c.parseShort(),a.caretOffset=c.parseShort(),c.relativeOffset+=8,a.metricDataFormat=c.parseShort(),a.numberOfHMetrics=c.parseUShort(),a},Lve_make=function Xgt(l){return new gn.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],l)},Bve_parse=function Jgt(l,o,a,c,u,h,d){d.lowMemory?function Kgt(l,o,a,c,u){l._hmtxTableData={};for(var h,d,f=new kn.Parser(o,a),p=0;p<u;p+=1)p<c&&(h=f.parseUShort(),d=f.parseShort()),l._hmtxTableData[p]={advanceWidth:h,leftSideBearing:d}}(l,o,a,c,u):function Ygt(l,o,a,c,u){for(var h,d,f=new kn.Parser(l,o),p=0;p<c;p+=1){p<a&&(h=f.parseUShort(),d=f.parseShort());var g=u.get(p);g.advanceWidth=h,g.leftSideBearing=d}}(o,a,c,u,h)},Bve_make=function emt(l){for(var o=new gn.Table("hmtx",[]),a=0;a<l.length;a+=1){var c=l.get(a),h=c.leftSideBearing||0;o.fields.push({name:"advanceWidth_"+a,type:"USHORT",value:c.advanceWidth||0}),o.fields.push({name:"leftSideBearing_"+a,type:"SHORT",value:h})}return o},Vve_make=function tmt(l){for(var o=new gn.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:l.length}]),a="",c=12+4*l.length,u=0;u<l.length;++u){var h=a.indexOf(l[u]);h<0&&(h=a.length,a+=l[u]),o.fields.push({name:"offset "+u,type:"USHORT",value:c+h}),o.fields.push({name:"length "+u,type:"USHORT",value:l[u].length})}return o.fields.push({name:"stringPool",type:"CHARARRAY",value:a}),o},Vve_parse=function nmt(l,o){var a=new kn.Parser(l,o),c=a.parseULong();zn.argument(1===c,"Unsupported ltag table version."),a.skip("uLong",1);for(var u=a.parseULong(),h=[],d=0;d<u;d++){for(var f="",p=o+a.parseUShort(),g=a.parseUShort(),m=p;m<p+g;++m)f+=String.fromCharCode(l.getInt8(m));h.push(f)}return h},zve_parse=function imt(l,o){var a={},c=new kn.Parser(l,o);return a.version=c.parseVersion(),a.numGlyphs=c.parseUShort(),1===a.version&&(a.maxPoints=c.parseUShort(),a.maxContours=c.parseUShort(),a.maxCompositePoints=c.parseUShort(),a.maxCompositeContours=c.parseUShort(),a.maxZones=c.parseUShort(),a.maxTwilightPoints=c.parseUShort(),a.maxStorage=c.parseUShort(),a.maxFunctionDefs=c.parseUShort(),a.maxInstructionDefs=c.parseUShort(),a.maxStackElements=c.parseUShort(),a.maxSizeOfInstructions=c.parseUShort(),a.maxComponentElements=c.parseUShort(),a.maxComponentDepth=c.parseUShort()),a},zve_make=function rmt(l){return new gn.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:l}])},Uve=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Hve={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},smt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},$ve={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function omt(l,o,a){switch(l){case 0:if(65535===o)return"und";if(a)return a[o];break;case 1:return Hve[o];case 3:return $ve[o]}}var m9="utf-16",amt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},lmt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Wve(l,o,a){switch(l){case 0:return m9;case 1:return lmt[a]||amt[o];case 3:if(1===o||10===o)return m9}}function v9(l){var o={};for(var a in l)o[l[a]]=parseInt(a);return o}function Gve(l,o,a,c,u,h){return new gn.Record("NameRecord",[{name:"platformID",type:"USHORT",value:l},{name:"encodingID",type:"USHORT",value:o},{name:"languageID",type:"USHORT",value:a},{name:"nameID",type:"USHORT",value:c},{name:"length",type:"USHORT",value:u},{name:"offset",type:"USHORT",value:h}])}function Qve(l,o){var a=function umt(l,o){var a=l.length,c=o.length-a+1;e:for(var u=0;u<c;u++)for(;u<c;u++){for(var h=0;h<a;h++)if(o[u+h]!==l[h])continue e;return u}return-1}(l,o);if(a<0){a=o.length;for(var c=0,u=l.length;c<u;++c)o.push(l[c])}return a}var jve_parse=function cmt(l,o,a){for(var c={},u=new kn.Parser(l,o),h=u.parseUShort(),d=u.parseUShort(),f=u.offset+u.parseUShort(),p=0;p<d;p++){var g=u.parseUShort(),m=u.parseUShort(),v=u.parseUShort(),y=u.parseUShort(),_=Uve[y]||y,b=u.parseUShort(),C=u.parseUShort(),x=omt(g,v,a),S=Wve(g,m,v);if(void 0!==S&&void 0!==x){var w;if(w=S===m9?tb.UTF16(l,f+C,b):tb.MACSTRING(l,f+C,b,S)){var O=c[_];void 0===O&&(O=c[_]={}),O[x]=w}}}return 1===h&&u.parseUShort(),c},jve_make=function hmt(l,o){var a,c=[],u={},h=v9(Uve);for(var d in l){var f=h[d];if(void 0===f&&(f=d),a=parseInt(f),isNaN(a))throw new Error('Name table entry "'+d+'" does not exist, see nameTableNames for complete list.');u[a]=l[d],c.push(a)}for(var p=v9(Hve),g=v9($ve),m=[],v=[],y=0;y<c.length;y++){var _=u[a=c[y]];for(var b in _){var C=_[b],x=1,S=p[b],w=smt[S],O=Wve(x,w,S),T=on.MACSTRING(C,O);void 0===T&&(x=0,(S=o.indexOf(b))<0&&(S=o.length,o.push(b)),w=4,T=on.UTF16(C));var M=Qve(T,v);m.push(Gve(x,w,S,a,T.length,M));var A=g[b];if(void 0!==A){var I=on.UTF16(C),E=Qve(I,v);m.push(Gve(3,1,A,a,I.length,E))}}}m.sort(function(V,Q){return V.platformID-Q.platformID||V.encodingID-Q.encodingID||V.languageID-Q.languageID||V.nameID-Q.nameID});for(var P=new gn.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:m.length},{name:"stringOffset",type:"USHORT",value:6+12*m.length}]),B=0;B<m.length;B++)P.fields.push({name:"record_"+B,type:"RECORD",value:m[B]});return P.fields.push({name:"strings",type:"LITERAL",value:v}),P},y9=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],_9_parse=function fmt(l,o){var a={},c=new kn.Parser(l,o);a.version=c.parseUShort(),a.xAvgCharWidth=c.parseShort(),a.usWeightClass=c.parseUShort(),a.usWidthClass=c.parseUShort(),a.fsType=c.parseUShort(),a.ySubscriptXSize=c.parseShort(),a.ySubscriptYSize=c.parseShort(),a.ySubscriptXOffset=c.parseShort(),a.ySubscriptYOffset=c.parseShort(),a.ySuperscriptXSize=c.parseShort(),a.ySuperscriptYSize=c.parseShort(),a.ySuperscriptXOffset=c.parseShort(),a.ySuperscriptYOffset=c.parseShort(),a.yStrikeoutSize=c.parseShort(),a.yStrikeoutPosition=c.parseShort(),a.sFamilyClass=c.parseShort(),a.panose=[];for(var u=0;u<10;u++)a.panose[u]=c.parseByte();return a.ulUnicodeRange1=c.parseULong(),a.ulUnicodeRange2=c.parseULong(),a.ulUnicodeRange3=c.parseULong(),a.ulUnicodeRange4=c.parseULong(),a.achVendID=String.fromCharCode(c.parseByte(),c.parseByte(),c.parseByte(),c.parseByte()),a.fsSelection=c.parseUShort(),a.usFirstCharIndex=c.parseUShort(),a.usLastCharIndex=c.parseUShort(),a.sTypoAscender=c.parseShort(),a.sTypoDescender=c.parseShort(),a.sTypoLineGap=c.parseShort(),a.usWinAscent=c.parseUShort(),a.usWinDescent=c.parseUShort(),a.version>=1&&(a.ulCodePageRange1=c.parseULong(),a.ulCodePageRange2=c.parseULong()),a.version>=2&&(a.sxHeight=c.parseShort(),a.sCapHeight=c.parseShort(),a.usDefaultChar=c.parseUShort(),a.usBreakChar=c.parseUShort(),a.usMaxContent=c.parseUShort()),a},_9_make=function pmt(l){return new gn.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],l)},_9_getUnicodeRange=function dmt(l){for(var o=0;o<y9.length;o+=1){var a=y9[o];if(l>=a.begin&&l<a.end)return o}return-1},qve_parse=function gmt(l,o){var a={},c=new kn.Parser(l,o);switch(a.version=c.parseVersion(),a.italicAngle=c.parseFixed(),a.underlinePosition=c.parseShort(),a.underlineThickness=c.parseShort(),a.isFixedPitch=c.parseULong(),a.minMemType42=c.parseULong(),a.maxMemType42=c.parseULong(),a.minMemType1=c.parseULong(),a.maxMemType1=c.parseULong(),a.version){case 1:a.names=q0.slice();break;case 2:a.numberOfGlyphs=c.parseUShort(),a.glyphNameIndex=new Array(a.numberOfGlyphs);for(var u=0;u<a.numberOfGlyphs;u++)a.glyphNameIndex[u]=c.parseUShort();a.names=[];for(var h=0;h<a.numberOfGlyphs;h++)if(a.glyphNameIndex[h]>=q0.length){var d=c.parseChar();a.names.push(c.parseString(d))}break;case 2.5:a.numberOfGlyphs=c.parseUShort(),a.offset=new Array(a.numberOfGlyphs);for(var f=0;f<a.numberOfGlyphs;f++)a.offset[f]=c.parseChar()}return a},qve_make=function mmt(){return new gn.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},vh=new Array(9);vh[1]=function(){var o=this.offset+this.relativeOffset,a=this.parseUShort();return 1===a?{substFormat:1,coverage:this.parsePointer(Je.coverage),deltaGlyphId:this.parseUShort()}:2===a?{substFormat:2,coverage:this.parsePointer(Je.coverage),substitute:this.parseOffset16List()}:void zn.assert(!1,"0x"+o.toString(16)+": lookup type 1 format must be 1 or 2.")},vh[2]=function(){var o=this.parseUShort();return zn.argument(1===o,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:o,coverage:this.parsePointer(Je.coverage),sequences:this.parseListOfLists()}},vh[3]=function(){var o=this.parseUShort();return zn.argument(1===o,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:o,coverage:this.parsePointer(Je.coverage),alternateSets:this.parseListOfLists()}},vh[4]=function(){var o=this.parseUShort();return zn.argument(1===o,"GSUB ligature table identifier-format must be 1"),{substFormat:o,coverage:this.parsePointer(Je.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var nb={sequenceIndex:Je.uShort,lookupListIndex:Je.uShort};vh[5]=function(){var o=this.offset+this.relativeOffset,a=this.parseUShort();if(1===a)return{substFormat:a,coverage:this.parsePointer(Je.coverage),ruleSets:this.parseListOfLists(function(){var h=this.parseUShort(),d=this.parseUShort();return{input:this.parseUShortList(h-1),lookupRecords:this.parseRecordList(d,nb)}})};if(2===a)return{substFormat:a,coverage:this.parsePointer(Je.coverage),classDef:this.parsePointer(Je.classDef),classSets:this.parseListOfLists(function(){var h=this.parseUShort(),d=this.parseUShort();return{classes:this.parseUShortList(h-1),lookupRecords:this.parseRecordList(d,nb)}})};if(3===a){var c=this.parseUShort(),u=this.parseUShort();return{substFormat:a,coverages:this.parseList(c,Je.pointer(Je.coverage)),lookupRecords:this.parseRecordList(u,nb)}}zn.assert(!1,"0x"+o.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},vh[6]=function(){var o=this.offset+this.relativeOffset,a=this.parseUShort();return 1===a?{substFormat:1,coverage:this.parsePointer(Je.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(nb)}})}:2===a?{substFormat:2,coverage:this.parsePointer(Je.coverage),backtrackClassDef:this.parsePointer(Je.classDef),inputClassDef:this.parsePointer(Je.classDef),lookaheadClassDef:this.parsePointer(Je.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(nb)}})}:3===a?{substFormat:3,backtrackCoverage:this.parseList(Je.pointer(Je.coverage)),inputCoverage:this.parseList(Je.pointer(Je.coverage)),lookaheadCoverage:this.parseList(Je.pointer(Je.coverage)),lookupRecords:this.parseRecordList(nb)}:void zn.assert(!1,"0x"+o.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},vh[7]=function(){var o=this.parseUShort();zn.argument(1===o,"GSUB Extension Substitution subtable identifier-format must be 1");var a=this.parseUShort(),c=new Je(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:a,extension:vh[a].call(c)}},vh[8]=function(){var o=this.parseUShort();return zn.argument(1===o,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:o,coverage:this.parsePointer(Je.coverage),backtrackCoverage:this.parseList(Je.pointer(Je.coverage)),lookaheadCoverage:this.parseList(Je.pointer(Je.coverage)),substitutes:this.parseUShortList()}};var ib=new Array(9);ib[1]=function(o){return new gn.Table("substitutionTable",1===o.substFormat?[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new gn.Coverage(o.coverage)},{name:"deltaGlyphID",type:"USHORT",value:o.deltaGlyphId}]:[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new gn.Coverage(o.coverage)}].concat(gn.ushortList("substitute",o.substitute)))},ib[2]=function(o){return zn.assert(1===o.substFormat,"Lookup type 2 substFormat must be 1."),new gn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new gn.Coverage(o.coverage)}].concat(gn.tableList("seqSet",o.sequences,function(a){return new gn.Table("sequenceSetTable",gn.ushortList("sequence",a))})))},ib[3]=function(o){return zn.assert(1===o.substFormat,"Lookup type 3 substFormat must be 1."),new gn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new gn.Coverage(o.coverage)}].concat(gn.tableList("altSet",o.alternateSets,function(a){return new gn.Table("alternateSetTable",gn.ushortList("alternate",a))})))},ib[4]=function(o){return zn.assert(1===o.substFormat,"Lookup type 4 substFormat must be 1."),new gn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new gn.Coverage(o.coverage)}].concat(gn.tableList("ligSet",o.ligatureSets,function(a){return new gn.Table("ligatureSetTable",gn.tableList("ligature",a,function(c){return new gn.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:c.ligGlyph}].concat(gn.ushortList("component",c.components,c.components.length+1)))}))})))},ib[6]=function(o){if(1===o.substFormat)return new gn.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:o.substFormat},{name:"coverage",type:"TABLE",value:new gn.Coverage(o.coverage)}].concat(gn.tableList("chainRuleSet",o.chainRuleSets,function(h){return new gn.Table("chainRuleSetTable",gn.tableList("chainRule",h,function(d){var f=gn.ushortList("backtrackGlyph",d.backtrack,d.backtrack.length).concat(gn.ushortList("inputGlyph",d.input,d.input.length+1)).concat(gn.ushortList("lookaheadGlyph",d.lookahead,d.lookahead.length)).concat(gn.ushortList("substitution",[],d.lookupRecords.length));return d.lookupRecords.forEach(function(p,g){f=f.concat({name:"sequenceIndex"+g,type:"USHORT",value:p.sequenceIndex}).concat({name:"lookupListIndex"+g,type:"USHORT",value:p.lookupListIndex})}),new gn.Table("chainRuleTable",f)}))})));if(2===o.substFormat)zn.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(3===o.substFormat){var c=[{name:"substFormat",type:"USHORT",value:o.substFormat}];return c.push({name:"backtrackGlyphCount",type:"USHORT",value:o.backtrackCoverage.length}),o.backtrackCoverage.forEach(function(h,d){c.push({name:"backtrackCoverage"+d,type:"TABLE",value:new gn.Coverage(h)})}),c.push({name:"inputGlyphCount",type:"USHORT",value:o.inputCoverage.length}),o.inputCoverage.forEach(function(h,d){c.push({name:"inputCoverage"+d,type:"TABLE",value:new gn.Coverage(h)})}),c.push({name:"lookaheadGlyphCount",type:"USHORT",value:o.lookaheadCoverage.length}),o.lookaheadCoverage.forEach(function(h,d){c.push({name:"lookaheadCoverage"+d,type:"TABLE",value:new gn.Coverage(h)})}),c.push({name:"substitutionCount",type:"USHORT",value:o.lookupRecords.length}),o.lookupRecords.forEach(function(h,d){c=c.concat({name:"sequenceIndex"+d,type:"USHORT",value:h.sequenceIndex}).concat({name:"lookupListIndex"+d,type:"USHORT",value:h.lookupListIndex})}),new gn.Table("chainContextTable",c)}zn.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};var Zve_parse=function vmt(l,o){var a=new Je(l,o=o||0),c=a.parseVersion(1);return zn.argument(1===c||1.1===c,"Unsupported GSUB table version."),1===c?{version:c,scripts:a.parseScriptList(),features:a.parseFeatureList(),lookups:a.parseLookupList(vh)}:{version:c,scripts:a.parseScriptList(),features:a.parseFeatureList(),lookups:a.parseLookupList(vh),variations:a.parseFeatureVariationsList()}},Zve_make=function ymt(l){return new gn.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new gn.ScriptList(l.scripts)},{name:"features",type:"TABLE",value:new gn.FeatureList(l.features)},{name:"lookups",type:"TABLE",value:new gn.LookupList(l.lookups,ib)}])},Xve_parse=function _mt(l,o){var a=new kn.Parser(l,o),c=a.parseULong();zn.argument(1===c,"Unsupported META table version."),a.parseULong(),a.parseULong();for(var u=a.parseULong(),h={},d=0;d<u;d++){var f=a.parseTag(),p=a.parseULong(),g=a.parseULong(),m=tb.UTF8(l,o+p,g);h[f]=m}return h},Xve_make=function bmt(l){var o=Object.keys(l).length,a="",c=16+12*o,u=new gn.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:c},{name:"numTags",type:"ULONG",value:o}]);for(var h in l){var d=a.length;a+=l[h],u.fields.push({name:"tag "+h,type:"TAG",value:h}),u.fields.push({name:"offset "+h,type:"ULONG",value:c+d}),u.fields.push({name:"length "+h,type:"ULONG",value:l[h].length})}return u.fields.push({name:"stringPool",type:"CHARARRAY",value:a}),u},Yve_parse=function xmt(l,o){var a=new Je(l,o),c=a.parseUShort();zn.argument(0===c,"Only COLRv0 supported.");var u=a.parseUShort(),h=a.parseOffset32(),d=a.parseOffset32(),f=a.parseUShort();a.relativeOffset=h;var p=a.parseRecordList(u,{glyphID:Je.uShort,firstLayerIndex:Je.uShort,numLayers:Je.uShort});return a.relativeOffset=d,{version:c,baseGlyphRecords:p,layerRecords:a.parseRecordList(f,{glyphID:Je.uShort,paletteIndex:Je.uShort})}},Yve_make=function Cmt(l){var o=l.version;void 0===o&&(o=0);var a=l.baseGlyphRecords;void 0===a&&(a=[]);var c=l.layerRecords;void 0===c&&(c=[]),zn.argument(0===o,"Only COLRv0 supported.");var u=14;return new gn.Table("COLR",[{name:"version",type:"USHORT",value:o},{name:"numBaseGlyphRecords",type:"USHORT",value:a.length},{name:"baseGlyphRecordsOffset",type:"ULONG",value:u},{name:"layerRecordsOffset",type:"ULONG",value:u+6*a.length},{name:"numLayerRecords",type:"USHORT",value:c.length}].concat(a.map(function(d,f){return[{name:"glyphID_"+f,type:"USHORT",value:d.glyphID},{name:"firstLayerIndex_"+f,type:"USHORT",value:d.firstLayerIndex},{name:"numLayers_"+f,type:"USHORT",value:d.numLayers}]}).flat(),c.map(function(d,f){return[{name:"LayerGlyphID_"+f,type:"USHORT",value:d.glyphID},{name:"paletteIndex_"+f,type:"USHORT",value:d.paletteIndex}]}).flat()))},Kve_parse=function Smt(l,o){var a=new Je(l,o),c=a.parseShort(),u=a.parseShort(),h=a.parseShort(),d=a.parseShort(),f=a.parseOffset32(),p=a.parseUShortList(h);return a.relativeOffset=f,{version:c,numPaletteEntries:u,colorRecords:a.parseULongList(d),colorRecordIndices:p}},Kve_make=function wmt(l){var o=l.version;void 0===o&&(o=0);var a=l.numPaletteEntries;void 0===a&&(a=0);var c=l.colorRecords;void 0===c&&(c=[]);var u=l.colorRecordIndices;return void 0===u&&(u=[0]),zn.argument(0===o,"Only CPALv0 are supported."),zn.argument(c.length,"No colorRecords given."),zn.argument(u.length,"No colorRecordIndices given."),zn.argument(!a&&1==u.length,"Can't infer numPaletteEntries on multiple colorRecordIndices"),new gn.Table("CPAL",[{name:"version",type:"USHORT",value:o},{name:"numPaletteEntries",type:"USHORT",value:a||c.length},{name:"numPalettes",type:"USHORT",value:u.length},{name:"numColorRecords",type:"USHORT",value:c.length},{name:"colorRecordsArrayOffset",type:"ULONG",value:12+2*u.length}].concat(u.map(function(h,d){return{name:"colorRecordIndices_"+d,type:"USHORT",value:h}}),c.map(function(h,d){return{name:"colorRecords_"+d,type:"ULONG",value:h}})))};function Jve(l){return Math.log(l)/Math.log(2)|0}function b9(l){for(;l.length%4!=0;)l.push(0);for(var o=0,a=0;a<l.length;a+=4)o+=(l[a]<<24)+(l[a+1]<<16)+(l[a+2]<<8)+l[a+3];return o%Math.pow(2,32)}function eye(l,o,a,c){return new gn.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==l?l:""},{name:"checkSum",type:"ULONG",value:void 0!==o?o:0},{name:"offset",type:"ULONG",value:void 0!==a?a:0},{name:"length",type:"ULONG",value:void 0!==c?c:0}])}function tye(l){var o=new gn.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);o.tables=l,o.numTables=l.length;var a=Math.pow(2,Jve(o.numTables));o.searchRange=16*a,o.entrySelector=Jve(a),o.rangeShift=16*o.numTables-o.searchRange;for(var c=[],u=[],h=o.sizeOf()+eye().sizeOf()*o.numTables;h%4!=0;)h+=1,u.push({name:"padding",type:"BYTE",value:0});for(var d=0;d<l.length;d+=1){var f=l[d];zn.argument(4===f.tableName.length,"Table name"+f.tableName+" is invalid.");var p=f.sizeOf(),g=eye(f.tableName,b9(f.encode()),h,p);for(c.push({name:g.tag+" Table Record",type:"RECORD",value:g}),u.push({name:f.tableName+" table",type:"RECORD",value:f}),h+=p,zn.argument(!isNaN(h),"Something went wrong calculating the offset.");h%4!=0;)h+=1,u.push({name:"padding",type:"BYTE",value:0})}return c.sort(function(m,v){return m.value.tag>v.value.tag?1:-1}),o.fields=o.fields.concat(c),o.fields=o.fields.concat(u),o}function nye(l,o,a){for(var c=0;c<o.length;c+=1){var u=l.charToGlyphIndex(o[c]);if(u>0)return l.glyphs.get(u).getMetrics()}return a}function Tmt(l){for(var o=0,a=0;a<l.length;a+=1)o+=l[a];return o/l.length}var Dmt_fontToTable=function Omt(l){for(var p,o=[],a=[],c=[],u=[],h=[],d=[],f=[],g=0,m=0,v=0,y=0,_=0,b=0;b<l.glyphs.length;b+=1){var C=l.glyphs.get(b),x=0|C.unicode;if(isNaN(C.advanceWidth))throw new Error("Glyph "+C.name+" ("+b+"): advanceWidth is not a number.");(p>x||void 0===p)&&x>0&&(p=x),g<x&&(g=x);var S=_9_getUnicodeRange(x);if(S<32)m|=1<<S;else if(S<64)v|=1<<S-32;else if(S<96)y|=1<<S-64;else{if(!(S<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");_|=1<<S-96}if(".notdef"!==C.name){var w=C.getMetrics();o.push(w.xMin),a.push(w.yMin),c.push(w.xMax),u.push(w.yMax),d.push(w.leftSideBearing),f.push(w.rightSideBearing),h.push(C.advanceWidth)}}var O={xMin:Math.min.apply(null,o),yMin:Math.min.apply(null,a),xMax:Math.max.apply(null,c),yMax:Math.max.apply(null,u),advanceWidthMax:Math.max.apply(null,h),advanceWidthAvg:Tmt(h),minLeftSideBearing:Math.min.apply(null,d),maxLeftSideBearing:Math.max.apply(null,d),minRightSideBearing:Math.min.apply(null,f)};O.ascender=l.ascender,O.descender=l.descender;var T=Nve_make({flags:3,unitsPerEm:l.unitsPerEm,xMin:O.xMin,yMin:O.yMin,xMax:O.xMax,yMax:O.yMax,lowestRecPPEM:3,createdTimestamp:l.createdTimestamp}),M=Lve_make({ascender:O.ascender,descender:O.descender,advanceWidthMax:O.advanceWidthMax,minLeftSideBearing:O.minLeftSideBearing,minRightSideBearing:O.minRightSideBearing,xMaxExtent:O.maxLeftSideBearing+(O.xMax-O.xMin),numberOfHMetrics:l.glyphs.length}),A=zve_make(l.glyphs.length),I=_9_make(Object.assign({xAvgCharWidth:Math.round(O.advanceWidthAvg),usFirstCharIndex:p,usLastCharIndex:g,ulUnicodeRange1:m,ulUnicodeRange2:v,ulUnicodeRange3:y,ulUnicodeRange4:_,sTypoAscender:O.ascender,sTypoDescender:O.descender,sTypoLineGap:0,usWinAscent:O.yMax,usWinDescent:Math.abs(O.yMin),ulCodePageRange1:1,sxHeight:nye(l,"xyvw",{yMax:Math.round(O.ascender/2)}).yMax,sCapHeight:nye(l,"HIKLEFJMNTZBDPRAGOQSUVWXY",O).yMax,usDefaultChar:l.hasChar(" ")?32:0,usBreakChar:l.hasChar(" ")?32:0},l.tables.os2)),E=Bve_make(l.glyphs),P=bve_make(l.glyphs),B=l.getEnglishName("fontFamily"),V=l.getEnglishName("fontSubfamily"),Q=B+" "+V,j=l.getEnglishName("postScriptName");j||(j=B.replace(/\s/g,"")+"-"+V);var N={};for(var U in l.names)N[U]=l.names[U];N.uniqueID||(N.uniqueID={en:l.getEnglishName("manufacturer")+":"+Q}),N.postScriptName||(N.postScriptName={en:j}),N.preferredFamily||(N.preferredFamily=l.names.fontFamily),N.preferredSubfamily||(N.preferredSubfamily=l.names.fontSubfamily);var z=[],$=jve_make(N,z),H=z.length>0?Vve_make(z):void 0,G=qve_make(),W=Fve_make(l.glyphs,{version:l.getEnglishName("version"),fullName:Q,familyName:B,weightName:V,postScriptName:j,unitsPerEm:l.unitsPerEm,fontBBox:[0,O.yMin,O.ascender,O.advanceWidthMax]}),X=l.metas&&Object.keys(l.metas).length>0?Xve_make(l.metas):void 0,K=[T,M,A,I,$,P,G,W,E];H&&K.push(H),l.tables.gsub&&K.push(Zve_make(l.tables.gsub)),l.tables.cpal&&K.push(Kve_make(l.tables.cpal)),l.tables.colr&&K.push(Yve_make(l.tables.colr)),X&&K.push(X);for(var ae=tye(K),Ce=b9(ae.encode()),ve=ae.fields,Oe=!1,$e=0;$e<ve.length;$e+=1)if("head table"===ve[$e].name){ve[$e].value.checkSumAdjustment=2981146554-Ce,Oe=!0;break}if(!Oe)throw new Error("Could not find head table with checkSum to adjust.");return ae};function x9(l,o){for(var a=0,c=l.length-1;a<=c;){var u=a+c>>>1,h=l[u].tag;if(h===o)return u;h<o?a=u+1:c=u-1}return-a-1}function iye(l,o){for(var a=0,c=l.length-1;a<=c;){var u=a+c>>>1,h=l[u];if(h===o)return u;h<o?a=u+1:c=u-1}return-a-1}function rye(l,o){for(var a,c=0,u=l.length-1;c<=u;){var h=c+u>>>1,d=(a=l[h]).start;if(d===o)return a;d<o?c=h+1:u=h-1}if(c>0)return o>(a=l[c-1]).end?0:a}function h2(l,o){this.font=l,this.tableName=o}function d2(l){h2.call(this,l,"gpos")}function Fc(l){h2.call(this,l,"gsub")}function kmt(l,o){var a=l.length;if(a!==o.length)return!1;for(var c=0;c<a;c++)if(l[c]!==o[c])return!1;return!0}function C9(l,o,a){for(var c=l.subtables,u=0;u<c.length;u++){var h=c[u];if(h.substFormat===o)return h}if(a)return c.push(a),a}function sye(l){for(var o=new ArrayBuffer(l.length),a=new Uint8Array(o),c=0;c<l.length;++c)a[c]=l[c];return o}function f2(l,o){if(!l)throw o}function oye(l,o,a,c,u){var h;return(o&c)>0?(h=l.parseByte(),0==(o&u)&&(h=-h),h=a+h):h=(o&u)>0?a:a+l.parseShort(),h}function aye(l,o,a){var u,h,c=new kn.Parser(o,a);if(l.numberOfContours=c.parseShort(),l._xMin=c.parseShort(),l._yMin=c.parseShort(),l._xMax=c.parseShort(),l._yMax=c.parseShort(),l.numberOfContours>0){for(var d=l.endPointIndices=[],f=0;f<l.numberOfContours;f+=1)d.push(c.parseUShort());l.instructionLength=c.parseUShort(),l.instructions=[];for(var p=0;p<l.instructionLength;p+=1)l.instructions.push(c.parseByte());var g=d[d.length-1]+1;u=[];for(var m=0;m<g;m+=1)if(h=c.parseByte(),u.push(h),(8&h)>0)for(var v=c.parseByte(),y=0;y<v;y+=1)u.push(h),m+=1;if(zn.argument(u.length===g,"Bad flags."),d.length>0){var b,_=[];if(g>0){for(var C=0;C<g;C+=1)(b={}).onCurve=!!(1&(h=u[C])),b.lastPointOfContour=d.indexOf(C)>=0,_.push(b);for(var x=0,S=0;S<g;S+=1)(b=_[S]).x=oye(c,h=u[S],x,2,16),x=b.x;for(var w=0,O=0;O<g;O+=1)(b=_[O]).y=oye(c,h=u[O],w,4,32),w=b.y}l.points=_}else l.points=[]}else if(0===l.numberOfContours)l.points=[];else{l.isComposite=!0,l.points=[],l.components=[];for(var T=!0;T;){u=c.parseUShort();var M={glyphIndex:c.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&u)>0?(2&u)>0?(M.dx=c.parseShort(),M.dy=c.parseShort()):M.matchedPoints=[c.parseUShort(),c.parseUShort()]:(2&u)>0?(M.dx=c.parseChar(),M.dy=c.parseChar()):M.matchedPoints=[c.parseByte(),c.parseByte()],(8&u)>0?M.xScale=M.yScale=c.parseF2Dot14():(64&u)>0?(M.xScale=c.parseF2Dot14(),M.yScale=c.parseF2Dot14()):(128&u)>0&&(M.xScale=c.parseF2Dot14(),M.scale01=c.parseF2Dot14(),M.scale10=c.parseF2Dot14(),M.yScale=c.parseF2Dot14()),l.components.push(M),T=!!(32&u)}if(256&u){l.instructionLength=c.parseUShort(),l.instructions=[];for(var A=0;A<l.instructionLength;A+=1)l.instructions.push(c.parseByte())}}}function S9(l,o){for(var a=[],c=0;c<l.length;c+=1){var u=l[c];a.push({x:o.xScale*u.x+o.scale01*u.y+o.dx,y:o.scale10*u.x+o.yScale*u.y+o.dy,onCurve:u.onCurve,lastPointOfContour:u.lastPointOfContour})}return a}function lye(l){var o=new fo;if(!l)return o;for(var a=function Amt(l){for(var o=[],a=[],c=0;c<l.length;c+=1){var u=l[c];a.push(u),u.lastPointOfContour&&(o.push(a),a=[])}return zn.argument(0===a.length,"There are still points left in the current contour."),o}(l),c=0;c<a.length;++c){var u=a[c],d=u[u.length-1],f=u[0];if(d.onCurve)o.moveTo(d.x,d.y);else if(f.onCurve)o.moveTo(f.x,f.y);else{var p={x:.5*(d.x+f.x),y:.5*(d.y+f.y)};o.moveTo(p.x,p.y)}for(var g=0;g<u.length;++g)if(d,d=f,f=u[(g+1)%u.length],d.onCurve)o.lineTo(d.x,d.y);else{var v=f;f.onCurve||(v={x:.5*(d.x+f.x),y:.5*(d.y+f.y)}),o.quadraticCurveTo(d.x,d.y,v.x,v.y)}o.closePath()}return o}function cye(l,o){if(o.isComposite)for(var a=0;a<o.components.length;a+=1){var c=o.components[a],u=l.get(c.glyphIndex);if(u.getPath(),u.points){var h=void 0;if(void 0===c.matchedPoints)h=S9(u.points,c);else{if(c.matchedPoints[0]>o.points.length-1||c.matchedPoints[1]>u.points.length-1)throw Error("Matched points out of range in "+o.name);var d=o.points[c.matchedPoints[0]],f=u.points[c.matchedPoints[1]],p={xScale:c.xScale,scale01:c.scale01,scale10:c.scale10,yScale:c.yScale,dx:0,dy:0};f=S9([f],p)[0],p.dx=d.x-f.x,p.dy=d.y-f.y,h=S9(u.points,p)}o.points=o.points.concat(h)}}return lye(o.points)}(d2.prototype=h2.prototype={searchTag:x9,binSearch:iye,getTable:function(l){var o=this.font.tables[this.tableName];return!o&&l&&(o=this.font.tables[this.tableName]=this.createDefaultTable()),o},getScriptNames:function(){var l=this.getTable();return l?l.scripts.map(function(o){return o.tag}):[]},getDefaultScriptName:function(){var l=this.getTable();if(l){for(var o=!1,a=0;a<l.scripts.length;a++){var c=l.scripts[a].tag;if("DFLT"===c)return c;"latn"===c&&(o=!0)}if(o)return"latn"}},getScriptTable:function(l,o){var a=this.getTable(o);if(a){var c=a.scripts,u=x9(a.scripts,l=l||"DFLT");if(u>=0)return c[u].script;if(o){var h={tag:l,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return c.splice(-1-u,0,h),h.script}}},getLangSysTable:function(l,o,a){var c=this.getScriptTable(l,a);if(c){if(!o||"dflt"===o||"DFLT"===o)return c.defaultLangSys;var u=x9(c.langSysRecords,o);if(u>=0)return c.langSysRecords[u].langSys;if(a){var h={tag:o,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return c.langSysRecords.splice(-1-u,0,h),h.langSys}}},getFeatureTable:function(l,o,a,c){var u=this.getLangSysTable(l,o,c);if(u){for(var h,d=u.featureIndexes,f=this.font.tables[this.tableName].features,p=0;p<d.length;p++)if((h=f[d[p]]).tag===a)return h.feature;if(c){var g=f.length;return zn.assert(0===g||a>=f[g-1].tag,"Features must be added in alphabetical order."),f.push(h={tag:a,feature:{params:0,lookupListIndexes:[]}}),d.push(g),h.feature}}},getLookupTables:function(l,o,a,c,u){var h=this.getFeatureTable(l,o,a,u),d=[];if(h){for(var f,p=h.lookupListIndexes,g=this.font.tables[this.tableName].lookups,m=0;m<p.length;m++)(f=g[p[m]]).lookupType===c&&d.push(f);if(0===d.length&&u){var v=g.length;return g.push(f={lookupType:c,lookupFlag:0,subtables:[],markFilteringSet:void 0}),p.push(v),[f]}}return d},getGlyphClass:function(l,o){switch(l.format){case 1:return l.startGlyph<=o&&o<l.startGlyph+l.classes.length?l.classes[o-l.startGlyph]:0;case 2:var a=rye(l.ranges,o);return a?a.classId:0}},getCoverageIndex:function(l,o){switch(l.format){case 1:var a=iye(l.glyphs,o);return a>=0?a:-1;case 2:var c=rye(l.ranges,o);return c?c.index+o-c.start:-1}},expandCoverage:function(l){if(1===l.format)return l.glyphs;for(var o=[],a=l.ranges,c=0;c<a.length;c++)for(var u=a[c],d=u.end,f=u.start;f<=d;f++)o.push(f);return o}}).init=function(){var l=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(l)},d2.prototype.getKerningValue=function(l,o,a){for(var c=0;c<l.length;c++)for(var u=l[c].subtables,h=0;h<u.length;h++){var d=u[h],f=this.getCoverageIndex(d.coverage,o);if(!(f<0))switch(d.posFormat){case 1:for(var p=d.pairSets[f],g=0;g<p.length;g++){var m=p[g];if(m.secondGlyph===a)return m.value1&&m.value1.xAdvance||0}break;case 2:var v=this.getGlyphClass(d.classDef1,o),y=this.getGlyphClass(d.classDef2,a),_=d.classRecords[v][y];return _.value1&&_.value1.xAdvance||0}}return 0},d2.prototype.getKerningTables=function(l,o){if(this.font.tables.gpos)return this.getLookupTables(l,o,"kern",2)},(Fc.prototype=h2.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Fc.prototype.getSingle=function(l,o,a){for(var c=[],u=this.getLookupTables(o,a,l,1),h=0;h<u.length;h++)for(var d=u[h].subtables,f=0;f<d.length;f++){var p=d[f],g=this.expandCoverage(p.coverage),m=void 0;if(1===p.substFormat){var v=p.deltaGlyphId;for(m=0;m<g.length;m++){var y=g[m];c.push({sub:y,by:y+v})}}else{var _=p.substitute;for(m=0;m<g.length;m++)c.push({sub:g[m],by:_[m]})}}return c},Fc.prototype.getMultiple=function(l,o,a){for(var c=[],u=this.getLookupTables(o,a,l,2),h=0;h<u.length;h++)for(var d=u[h].subtables,f=0;f<d.length;f++){var p=d[f],g=this.expandCoverage(p.coverage),m=void 0;for(m=0;m<g.length;m++)c.push({sub:g[m],by:p.sequences[m]})}return c},Fc.prototype.getAlternates=function(l,o,a){for(var c=[],u=this.getLookupTables(o,a,l,3),h=0;h<u.length;h++)for(var d=u[h].subtables,f=0;f<d.length;f++)for(var p=d[f],g=this.expandCoverage(p.coverage),m=p.alternateSets,v=0;v<g.length;v++)c.push({sub:g[v],by:m[v]});return c},Fc.prototype.getLigatures=function(l,o,a){for(var c=[],u=this.getLookupTables(o,a,l,4),h=0;h<u.length;h++)for(var d=u[h].subtables,f=0;f<d.length;f++)for(var p=d[f],g=this.expandCoverage(p.coverage),m=p.ligatureSets,v=0;v<g.length;v++)for(var y=g[v],_=m[v],b=0;b<_.length;b++){var C=_[b];c.push({sub:[y].concat(C.components),by:C.ligGlyph})}return c},Fc.prototype.addSingle=function(l,o,a,c){var h=C9(this.getLookupTables(a,c,l,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});zn.assert(1===h.coverage.format,"Single: unable to modify coverage table format "+h.coverage.format);var d=o.sub,f=this.binSearch(h.coverage.glyphs,d);f<0&&(h.coverage.glyphs.splice(f=-1-f,0,d),h.substitute.splice(f,0,0)),h.substitute[f]=o.by},Fc.prototype.addMultiple=function(l,o,a,c){zn.assert(o.by instanceof Array&&o.by.length>1,'Multiple: "by" must be an array of two or more ids');var h=C9(this.getLookupTables(a,c,l,2,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});zn.assert(1===h.coverage.format,"Multiple: unable to modify coverage table format "+h.coverage.format);var d=o.sub,f=this.binSearch(h.coverage.glyphs,d);f<0&&(h.coverage.glyphs.splice(f=-1-f,0,d),h.sequences.splice(f,0,0)),h.sequences[f]=o.by},Fc.prototype.addAlternate=function(l,o,a,c){var h=C9(this.getLookupTables(a,c,l,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});zn.assert(1===h.coverage.format,"Alternate: unable to modify coverage table format "+h.coverage.format);var d=o.sub,f=this.binSearch(h.coverage.glyphs,d);f<0&&(h.coverage.glyphs.splice(f=-1-f,0,d),h.alternateSets.splice(f,0,0)),h.alternateSets[f]=o.by},Fc.prototype.addLigature=function(l,o,a,c){var u=this.getLookupTables(a,c,l,4,!0)[0],h=u.subtables[0];h||(u.subtables[0]=h={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),zn.assert(1===h.coverage.format,"Ligature: unable to modify coverage table format "+h.coverage.format);var d=o.sub[0],f=o.sub.slice(1),p={ligGlyph:o.by,components:f},g=this.binSearch(h.coverage.glyphs,d);if(g>=0){for(var m=h.ligatureSets[g],v=0;v<m.length;v++)if(kmt(m[v].components,f))return;m.push(p)}else h.coverage.glyphs.splice(g=-1-g,0,d),h.ligatureSets.splice(g,0,[p])},Fc.prototype.getFeature=function(l,o,a){if(/ss\d\d/.test(l))return this.getSingle(l,o,a);switch(l){case"aalt":case"salt":return this.getSingle(l,o,a).concat(this.getAlternates(l,o,a));case"dlig":case"liga":case"rlig":return this.getLigatures(l,o,a);case"ccmp":return this.getMultiple(l,o,a).concat(this.getLigatures(l,o,a));case"stch":return this.getMultiple(l,o,a)}},Fc.prototype.add=function(l,o,a,c){if(/ss\d\d/.test(l))return this.addSingle(l,o,a,c);switch(l){case"aalt":case"salt":return"number"==typeof o.by?this.addSingle(l,o,a,c):this.addAlternate(l,o,a,c);case"dlig":case"liga":case"rlig":return this.addLigature(l,o,a,c);case"ccmp":return o.by instanceof Array?this.addMultiple(l,o,a,c):this.addLigature(l,o,a,c)}};var hye,X0,dye,w9,uye={getPath:lye,parse:function Rmt(l,o,a,c,u){return u.lowMemory?function Pmt(l,o,a,c){var u=new Ed.GlyphSet(c);return c._push=function(h){var d=a[h];u.push(h,d!==a[h+1]?Ed.ttfGlyphLoader(c,h,aye,l,o+d,cye):Ed.glyphLoader(c,h))},u}(l,o,a,c):function Imt(l,o,a,c){for(var u=new Ed.GlyphSet(c),h=0;h<a.length-1;h+=1){var d=a[h];u.push(h,d!==a[h+1]?Ed.ttfGlyphLoader(c,h,aye,l,o+d,cye):Ed.glyphLoader(c,h))}return u}(l,o,a,c)}};function fye(l){this.font=l,this.getCommands=function(o){return uye.getPath(o).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Fmt(l){return l}function pye(l){return Math.sign(l)*Math.round(Math.abs(l))}function Nmt(l){return Math.sign(l)*Math.round(Math.abs(2*l))/2}function Lmt(l){return Math.sign(l)*(Math.round(Math.abs(l)+.5)-.5)}function Bmt(l){return Math.sign(l)*Math.ceil(Math.abs(l))}function Vmt(l){return Math.sign(l)*Math.floor(Math.abs(l))}var gye=function(l){var o=this.srPeriod,a=this.srPhase,u=1;return l<0&&(l=-l,u=-1),l+=this.srThreshold-a,l=Math.trunc(l/o)*o,(l+=a)<0?a*u:l*u},Ad={x:1,y:0,axis:"x",distance:function(l,o,a,c){return(a?l.xo:l.x)-(c?o.xo:o.x)},interpolate:function(l,o,a,c){var u,h,d,f,p,g,m;if(!c||c===this)return u=l.xo-o.xo,h=l.xo-a.xo,p=o.x-o.xo,g=a.x-a.xo,0===(m=(d=Math.abs(u))+(f=Math.abs(h)))?void(l.x=l.xo+(p+g)/2):void(l.x=l.xo+(p*f+g*d)/m);u=c.distance(l,o,!0,!0),h=c.distance(l,a,!0,!0),p=c.distance(o,o,!1,!0),g=c.distance(a,a,!1,!0),0!==(m=(d=Math.abs(u))+(f=Math.abs(h)))?Ad.setRelative(l,l,(p*f+g*d)/m,c,!0):Ad.setRelative(l,l,(p+g)/2,c,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(l,o,a,c,u){l.x=c&&c!==this?(u?o.xo:o.x)+a*c.x+(l.y-((u?o.yo:o.y)+a*c.y))/c.normalSlope:(u?o.xo:o.x)+a},slope:0,touch:function(l){l.xTouched=!0},touched:function(l){return l.xTouched},untouch:function(l){l.xTouched=!1}},qf={x:0,y:1,axis:"y",distance:function(l,o,a,c){return(a?l.yo:l.y)-(c?o.yo:o.y)},interpolate:function(l,o,a,c){var u,h,d,f,p,g,m;if(!c||c===this)return u=l.yo-o.yo,h=l.yo-a.yo,p=o.y-o.yo,g=a.y-a.yo,0===(m=(d=Math.abs(u))+(f=Math.abs(h)))?void(l.y=l.yo+(p+g)/2):void(l.y=l.yo+(p*f+g*d)/m);u=c.distance(l,o,!0,!0),h=c.distance(l,a,!0,!0),p=c.distance(o,o,!1,!0),g=c.distance(a,a,!1,!0),0!==(m=(d=Math.abs(u))+(f=Math.abs(h)))?qf.setRelative(l,l,(p*f+g*d)/m,c,!0):qf.setRelative(l,l,(p+g)/2,c,!0)},normalSlope:0,setRelative:function(l,o,a,c,u){l.y=c&&c!==this?(u?o.yo:o.y)+a*c.y+c.normalSlope*(l.x-((u?o.xo:o.x)+a*c.x)):(u?o.yo:o.y)+a},slope:Number.POSITIVE_INFINITY,touch:function(l){l.yTouched=!0},touched:function(l){return l.yTouched},untouch:function(l){l.yTouched=!1}};function p2(l,o){this.x=l,this.y=o,this.axis=void 0,this.slope=o/l,this.normalSlope=-l/o,Object.freeze(this)}function g2(l,o){var a=Math.sqrt(l*l+o*o);return o/=a,1==(l/=a)&&0===o?Ad:0===l&&1===o?qf:new p2(l,o)}function Zf(l,o,a,c){this.x=this.xo=Math.round(64*l)/64,this.y=this.yo=Math.round(64*o)/64,this.lastPointOfContour=a,this.onCurve=c,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Ad),Object.freeze(qf),p2.prototype.distance=function(l,o,a,c){return this.x*Ad.distance(l,o,a,c)+this.y*qf.distance(l,o,a,c)},p2.prototype.interpolate=function(l,o,a,c){var u,h,d,f,p,g,m;d=c.distance(l,o,!0,!0),f=c.distance(l,a,!0,!0),u=c.distance(o,o,!1,!0),h=c.distance(a,a,!1,!0),0!==(m=(p=Math.abs(d))+(g=Math.abs(f)))?this.setRelative(l,l,(u*g+h*p)/m,c,!0):this.setRelative(l,l,(u+h)/2,c,!0)},p2.prototype.setRelative=function(l,o,a,c,u){var g=(c=c||this).normalSlope,m=this.slope,v=l.x,y=l.y;l.x=(m*v-g*((u?o.xo:o.x)+a*c.x)+((u?o.yo:o.y)+a*c.y)-y)/(m-g),l.y=m*(l.x-v)+y},p2.prototype.touch=function(l){l.xTouched=!0,l.yTouched=!0},Zf.prototype.nextTouched=function(l){for(var o=this.nextPointOnContour;!l.touched(o)&&o!==this;)o=o.nextPointOnContour;return o},Zf.prototype.prevTouched=function(l){for(var o=this.prevPointOnContour;!l.touched(o)&&o!==this;)o=o.prevPointOnContour;return o};var m2=Object.freeze(new Zf(0,0)),zmt={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Rg(l,o){switch(this.env=l,this.stack=[],this.prog=o,l){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Ad,this.round=pye}}function _3(l){for(var o=l.tZone=new Array(l.gZone.length),a=0;a<o.length;a++)o[a]=new Zf(0,0)}function mye(l,o){var h,a=l.prog,c=l.ip,u=1;do{if(88===(h=a[++c]))u++;else if(89===h)u--;else if(64===h)c+=a[c+1]+1;else if(65===h)c+=2*a[c+1]+1;else if(h>=176&&h<=183)c+=h-176+1;else if(h>=184&&h<=191)c+=2*(h-184+1);else if(o&&1===u&&27===h)break}while(u>0);l.ip=c}function vye(l,o){exports.DEBUG&&console.log(o.step,"SVTCA["+l.axis+"]"),o.fv=o.pv=o.dpv=l}function yye(l,o){exports.DEBUG&&console.log(o.step,"SPVTCA["+l.axis+"]"),o.pv=o.dpv=l}function _ye(l,o){exports.DEBUG&&console.log(o.step,"SFVTCA["+l.axis+"]"),o.fv=l}function bye(l,o){var f,p,a=o.stack,c=a.pop(),u=a.pop(),h=o.z2[c],d=o.z1[u];exports.DEBUG&&console.log("SPVTL["+l+"]",c,u),l?(f=h.y-d.y,p=d.x-h.x):(f=d.x-h.x,p=d.y-h.y),o.pv=o.dpv=g2(f,p)}function xye(l,o){var f,p,a=o.stack,c=a.pop(),u=a.pop(),h=o.z2[c],d=o.z1[u];exports.DEBUG&&console.log("SFVTL["+l+"]",c,u),l?(f=h.y-d.y,p=d.x-h.x):(f=d.x-h.x,p=d.y-h.y),o.fv=g2(f,p)}function T9(l){exports.DEBUG&&console.log(l.step,"POP[]"),l.stack.pop()}function Cye(l,o){var a=o.stack.pop(),c=o.z0[a],u=o.fv,h=o.pv;exports.DEBUG&&console.log(o.step,"MDAP["+l+"]",a);var d=h.distance(c,m2);l&&(d=o.round(d)),u.setRelative(c,m2,d,h),u.touch(c),o.rp0=o.rp1=a}function Sye(l,o){var u,h,d,a=o.z2,c=a.length-2;exports.DEBUG&&console.log(o.step,"IUP["+l.axis+"]");for(var f=0;f<c;f++)!l.touched(u=a[f])&&(h=u.prevTouched(l))!==u&&(h===(d=u.nextTouched(l))&&l.setRelative(u,u,l.distance(h,h,!1,!0),l,!0),l.interpolate(u,h,d,l))}function wye(l,o){for(var a=o.stack,u=(l?o.z0:o.z1)[l?o.rp1:o.rp2],h=o.fv,d=o.pv,f=o.loop,p=o.z2;f--;){var g=a.pop(),m=p[g],v=d.distance(u,u,!1,!0);h.setRelative(m,m,v,d),h.touch(m),exports.DEBUG&&console.log(o.step,(o.loop>1?"loop "+(o.loop-f)+": ":"")+"SHP["+(l?"rp1":"rp2")+"]",g)}o.loop=1}function Tye(l,o){var u=(l?o.z0:o.z1)[l?o.rp1:o.rp2],h=o.fv,d=o.pv,f=o.stack.pop(),p=o.z2[o.contours[f]],g=p;exports.DEBUG&&console.log(o.step,"SHC["+l+"]",f);var m=d.distance(u,u,!1,!0);do{g!==u&&h.setRelative(g,g,m,d),g=g.nextPointOnContour}while(g!==p)}function Oye(l,o){var p,u=(l?o.z0:o.z1)[l?o.rp1:o.rp2],h=o.fv,d=o.pv,f=o.stack.pop();switch(exports.DEBUG&&console.log(o.step,"SHZ["+l+"]",f),f){case 0:p=o.tZone;break;case 1:p=o.gZone;break;default:throw new Error("Invalid zone")}for(var g,m=d.distance(u,u,!1,!0),v=p.length-2,y=0;y<v;y++)h.setRelative(g=p[y],g,m,d)}function Dye(l,o){var a=o.stack,c=a.pop()/64,u=a.pop(),h=o.z1[u],f=o.fv;f.setRelative(h,o.z0[o.rp0],c,o.pv),f.touch(h),exports.DEBUG&&console.log(o.step,"MSIRP["+l+"]",c,u),o.rp1=o.rp0,o.rp2=u,l&&(o.rp0=u)}function kye(l,o){var a=o.stack,c=a.pop(),u=a.pop(),h=o.z0[u],d=o.fv,f=o.pv,p=o.cvt[c];exports.DEBUG&&console.log(o.step,"MIAP["+l+"]",c,"(",p,")",u);var g=f.distance(h,m2);l&&(Math.abs(g-p)<o.cvCutIn&&(g=p),g=o.round(g)),d.setRelative(h,m2,g,f),0===o.zp0&&(h.xo=h.x,h.yo=h.y),d.touch(h),o.rp0=o.rp1=u}function Mye(l,o){var a=o.stack,c=a.pop(),u=o.z2[c];exports.DEBUG&&console.log(o.step,"GC["+l+"]",c),a.push(64*o.dpv.distance(u,m2,l,!1))}function Eye(l,o){var a=o.stack,c=a.pop(),u=a.pop(),f=o.dpv.distance(o.z0[u],o.z1[c],l,l);exports.DEBUG&&console.log(o.step,"MD["+l+"]",c,u,"->",f),o.stack.push(Math.round(64*f))}function O9(l,o){var a=o.stack,c=a.pop(),u=o.fv,h=o.pv,d=o.ppem,f=o.deltaBase+16*(l-1),p=o.deltaShift,g=o.z0;exports.DEBUG&&console.log(o.step,"DELTAP["+l+"]",c,a);for(var m=0;m<c;m++){var v=a.pop(),y=a.pop();if(f+((240&y)>>4)===d){var b=(15&y)-8;b>=0&&b++,exports.DEBUG&&console.log(o.step,"DELTAPFIX",v,"by",b*p);var C=g[v];u.setRelative(C,C,b*p,h)}}}function b3(l,o){var a=o.stack,c=a.pop();exports.DEBUG&&console.log(o.step,"ROUND[]"),a.push(64*o.round(c/64))}function D9(l,o){var a=o.stack,c=a.pop(),u=o.ppem,h=o.deltaBase+16*(l-1),d=o.deltaShift;exports.DEBUG&&console.log(o.step,"DELTAC["+l+"]",c,a);for(var f=0;f<c;f++){var p=a.pop(),g=a.pop();if(h+((240&g)>>4)===u){var v=(15&g)-8;v>=0&&v++;var y=v*d;exports.DEBUG&&console.log(o.step,"DELTACFIX",p,"by",y),o.cvt[p]+=y}}}function Aye(l,o){var f,p,a=o.stack,c=a.pop(),u=a.pop(),h=o.z2[c],d=o.z1[u];exports.DEBUG&&console.log(o.step,"SDPVTL["+l+"]",c,u),l?(f=h.y-d.y,p=d.x-h.x):(f=d.x-h.x,p=d.y-h.y),o.dpv=g2(f,p)}function Fg(l,o){var a=o.stack,c=o.prog,u=o.ip;exports.DEBUG&&console.log(o.step,"PUSHB["+l+"]");for(var h=0;h<l;h++)a.push(c[++u]);o.ip=u}function Ng(l,o){var a=o.ip,c=o.prog,u=o.stack;exports.DEBUG&&console.log(o.ip,"PUSHW["+l+"]");for(var h=0;h<l;h++){var d=c[++a]<<8|c[++a];32768&d&&(d=-(1+(65535^d))),u.push(d)}o.ip=a}function Mn(l,o,a,c,u,h){var C,x,S,w,d=h.stack,f=l&&d.pop(),p=d.pop(),m=h.z0[h.rp0],v=h.z1[p],y=h.minDis,_=h.fv,b=h.dpv;S=(x=C=b.distance(v,m,!0,!0))>=0?1:-1,x=Math.abs(x),l&&(w=h.cvt[f],c&&Math.abs(x-w)<h.cvCutIn&&(x=w)),a&&x<y&&(x=y),c&&(x=h.round(x)),_.setRelative(v,m,S*x,b),_.touch(v),exports.DEBUG&&console.log(h.step,(l?"MIRP[":"MDRP[")+(o?"M":"m")+(a?">":"_")+(c?"R":"_")+(0===u?"Gr":1===u?"Bl":2===u?"Wh":"")+"]",l?f+"("+h.cvt[f]+","+w+")":"",p,"(d =",C,"->",S*x,")"),h.rp1=h.rp0,h.rp2=p,o&&(h.rp0=p)}function rb(l){this.char=l,this.state={},this.activeState=null}function k9(l,o,a){this.contextName=a,this.startIndex=l,this.endOffset=o}function uvt(l,o,a){this.contextName=l,this.openRange=null,this.ranges=[],this.checkStart=o,this.checkEnd=a}function yh(l,o){this.context=l,this.index=o,this.length=l.length,this.current=l[o],this.backtrack=l.slice(0,o),this.lookahead=l.slice(o+1)}function x3(l){this.eventId=l,this.subscribers=[]}function hvt(l){var o=this,a=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];a.forEach(function(u){Object.defineProperty(o.events,u,{value:new x3(u)})}),l&&a.forEach(function(u){var h=l[u];"function"==typeof h&&o.events[u].subscribe(h)}),["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach(function(u){o.events[u].subscribe(o.updateContextsRanges)})}function zs(l){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],hvt.call(this,l)}function Lg(l){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(l)}function Iye(l){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(l)}function Bg(l){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(l)}function C3(l){return/[A-z]/.test(l)}function Nc(l){this.font=l,this.features={}}function Y0(l){this.id=l.id,this.tag=l.tag,this.substitution=l.substitution}function v2(l,o){if(!l)return-1;switch(o.format){case 1:return o.glyphs.indexOf(l);case 2:for(var a=o.ranges,c=0;c<a.length;c++){var u=a[c];if(l>=u.start&&l<=u.end)return u.index+(l-u.start)}break;default:return-1}return-1}function fvt(l,o){return-1===v2(l,o.coverage)?null:l+o.deltaGlyphId}function pvt(l,o){var a=v2(l,o.coverage);return-1===a?null:o.substitute[a]}function M9(l,o){for(var a=[],c=0;c<l.length;c++){var u=l[c],h=o.current,d=v2(h=Array.isArray(h)?h[0]:h,u);-1!==d&&a.push(d)}return a.length!==l.length?-1:a}function gvt(l,o){if(l.context.length<o.inputCoverage.length+o.lookaheadCoverage.length+o.backtrackCoverage.length)return[];var c=M9(o.inputCoverage,l);if(-1===c)return[];if(l.lookahead.length<o.lookaheadCoverage.length)return[];for(var h=l.lookahead.slice(o.inputCoverage.length-1);h.length&&Bg(h[0].char);)h.shift();var d=new yh(h,0),f=M9(o.lookaheadCoverage,d),p=[].concat(l.backtrack);for(p.reverse();p.length&&Bg(p[0].char);)p.shift();if(p.length<o.backtrackCoverage.length)return[];var g=new yh(p,0),m=M9(o.backtrackCoverage,g),y=[];if(c.length===o.inputCoverage.length&&f.length===o.lookaheadCoverage.length&&m.length===o.backtrackCoverage.length)for(var _=0;_<o.lookupRecords.length;_++)for(var x=this.getLookupByIndex(o.lookupRecords[_].lookupListIndex),S=0;S<x.subtables.length;S++){var w=x.subtables[S],O=this.getLookupMethod(x,w);if("12"===this.getSubstitutionType(x,w))for(var M=0;M<c.length;M++){var I=O(l.get(M));I&&y.push(I)}}return y}function mvt(l,o){var c=v2(l.current,o.coverage);if(-1===c)return null;for(var u,h=o.ligatureSets[c],d=0;d<h.length;d++){u=h[d];for(var f=0;f<u.components.length&&l.lookahead[f]===u.components[f];f++)if(f===u.components.length-1)return u}return null}function vvt(l,o){var a=v2(l,o.coverage);return-1===a?null:o.sequences[a]}fye.prototype.exec=function(l,o){if("number"!=typeof o)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var a=this.font,c=this._prepState;if(!c||c.ppem!==o){var u=this._fpgmState;if(!u){Rg.prototype=zmt,(u=this._fpgmState=new Rg("fpgm",a.tables.fpgm)).funcs=[],u.font=a,exports.DEBUG&&(console.log("---EXEC FPGM---"),u.step=-1);try{X0(u)}catch(g){return console.log("Hinting error in FPGM:"+g),void(this._errorState=3)}}Rg.prototype=u,(c=this._prepState=new Rg("prep",a.tables.prep)).ppem=o;var h=a.tables.cvt;if(h)for(var d=c.cvt=new Array(h.length),f=o/a.unitsPerEm,p=0;p<h.length;p++)d[p]=h[p]*f;else c.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),c.step=-1);try{X0(c)}catch(g){this._errorState<2&&console.log("Hinting error in PREP:"+g),this._errorState=2}}if(!(this._errorState>1))try{return dye(l,c)}catch(g){return this._errorState<1&&(console.log("Hinting error:"+g),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},dye=function(l,o){var h,d,f,a=o.ppem/o.font.unitsPerEm,c=a,u=l.components;if(Rg.prototype=o,u){var p=o.font;d=[],h=[];for(var g=0;g<u.length;g++){var m=u[g],v=p.glyphs.get(m.glyphIndex);f=new Rg("glyf",v.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+g+"---"),f.step=-1),w9(v,f,a,c);for(var y=Math.round(m.dx*a),_=Math.round(m.dy*c),b=f.gZone,C=f.contours,x=0;x<b.length;x++){var S=b[x];S.xTouched=S.yTouched=!1,S.xo=S.x=S.x+y,S.yo=S.y=S.y+_}var w=d.length;d.push.apply(d,b);for(var O=0;O<C.length;O++)h.push(C[O]+w)}l.instructions&&!f.inhibitGridFit&&((f=new Rg("glyf",l.instructions)).gZone=f.z0=f.z1=f.z2=d,f.contours=h,d.push(new Zf(0,0),new Zf(Math.round(l.advanceWidth*a),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),f.step=-1),X0(f),d.length-=2)}else f=new Rg("glyf",l.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),f.step=-1),w9(l,f,a,c),d=f.gZone;return d},w9=function(l,o,a,c){for(var p,u=l.points||[],h=u.length,d=o.gZone=o.z0=o.z1=o.z2=[],f=o.contours=[],g=0;g<h;g++)d[g]=new Zf((p=u[g]).x*a,p.y*c,p.lastPointOfContour,p.onCurve);for(var m,v,y=0;y<h;y++)p=d[y],m||(m=p,f.push(y)),p.lastPointOfContour?(p.nextPointOnContour=m,m.prevPointOnContour=p,m=void 0):(p.nextPointOnContour=v=d[y+1],v.prevPointOnContour=p);if(!o.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",o.stack);for(var _=0;_<h;_++)console.log(_,d[_].x,d[_].y)}if(d.push(new Zf(0,0),new Zf(Math.round(l.advanceWidth*a),0)),X0(o),d.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",o.stack);for(var b=0;b<h;b++)console.log(b,d[b].x,d[b].y)}}},X0=function(l){var o=l.prog;if(o){var c,a=o.length;for(l.ip=0;l.ip<a;l.ip++){if(exports.DEBUG&&l.step++,!(c=hye[o[l.ip]]))throw new Error("unknown instruction: 0x"+Number(o[l.ip]).toString(16));c(l)}}},hye=[vye.bind(void 0,qf),vye.bind(void 0,Ad),yye.bind(void 0,qf),yye.bind(void 0,Ad),_ye.bind(void 0,qf),_ye.bind(void 0,Ad),bye.bind(void 0,0),bye.bind(void 0,1),xye.bind(void 0,0),xye.bind(void 0,1),function Umt(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"SPVFS[]",a,c),l.pv=l.dpv=g2(c,a)},function Hmt(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"SPVFS[]",a,c),l.fv=g2(c,a)},function $mt(l){var o=l.stack,a=l.pv;exports.DEBUG&&console.log(l.step,"GPV[]"),o.push(16384*a.x),o.push(16384*a.y)},function Wmt(l){var o=l.stack,a=l.fv;exports.DEBUG&&console.log(l.step,"GFV[]"),o.push(16384*a.x),o.push(16384*a.y)},function Gmt(l){l.fv=l.pv,exports.DEBUG&&console.log(l.step,"SFVTPV[]")},function Qmt(l){var o=l.stack,a=o.pop(),c=o.pop(),u=o.pop(),h=o.pop(),d=o.pop(),f=l.z0,p=l.z1,g=f[a],m=f[c],v=p[u],y=p[h],_=l.z2[d];exports.DEBUG&&console.log("ISECT[], ",a,c,u,h,d);var b=g.x,C=g.y,x=m.x,S=m.y,w=v.x,O=v.y,T=y.x,M=y.y,A=(b-x)*(O-M)-(C-S)*(w-T),I=b*S-C*x,E=w*M-O*T;_.x=(I*(w-T)-E*(b-x))/A,_.y=(I*(O-M)-E*(C-S))/A},function jmt(l){l.rp0=l.stack.pop(),exports.DEBUG&&console.log(l.step,"SRP0[]",l.rp0)},function qmt(l){l.rp1=l.stack.pop(),exports.DEBUG&&console.log(l.step,"SRP1[]",l.rp1)},function Zmt(l){l.rp2=l.stack.pop(),exports.DEBUG&&console.log(l.step,"SRP2[]",l.rp2)},function Xmt(l){var o=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"SZP0[]",o),l.zp0=o,o){case 0:l.tZone||_3(l),l.z0=l.tZone;break;case 1:l.z0=l.gZone;break;default:throw new Error("Invalid zone pointer")}},function Ymt(l){var o=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"SZP1[]",o),l.zp1=o,o){case 0:l.tZone||_3(l),l.z1=l.tZone;break;case 1:l.z1=l.gZone;break;default:throw new Error("Invalid zone pointer")}},function Kmt(l){var o=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"SZP2[]",o),l.zp2=o,o){case 0:l.tZone||_3(l),l.z2=l.tZone;break;case 1:l.z2=l.gZone;break;default:throw new Error("Invalid zone pointer")}},function Jmt(l){var o=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"SZPS[]",o),l.zp0=l.zp1=l.zp2=o,o){case 0:l.tZone||_3(l),l.z0=l.z1=l.z2=l.tZone;break;case 1:l.z0=l.z1=l.z2=l.gZone;break;default:throw new Error("Invalid zone pointer")}},function e0t(l){l.loop=l.stack.pop(),exports.DEBUG&&console.log(l.step,"SLOOP[]",l.loop)},function t0t(l){exports.DEBUG&&console.log(l.step,"RTG[]"),l.round=pye},function n0t(l){exports.DEBUG&&console.log(l.step,"RTHG[]"),l.round=Lmt},function i0t(l){var o=l.stack.pop();exports.DEBUG&&console.log(l.step,"SMD[]",o),l.minDis=o/64},function r0t(l){exports.DEBUG&&console.log(l.step,"ELSE[]"),mye(l,!1)},function s0t(l){var o=l.stack.pop();exports.DEBUG&&console.log(l.step,"JMPR[]",o),l.ip+=o-1},function o0t(l){var o=l.stack.pop();exports.DEBUG&&console.log(l.step,"SCVTCI[]",o),l.cvCutIn=o/64},void 0,void 0,function a0t(l){var o=l.stack;exports.DEBUG&&console.log(l.step,"DUP[]"),o.push(o[o.length-1])},T9,function l0t(l){exports.DEBUG&&console.log(l.step,"CLEAR[]"),l.stack.length=0},function c0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"SWAP[]"),o.push(a),o.push(c)},function u0t(l){var o=l.stack;exports.DEBUG&&console.log(l.step,"DEPTH[]"),o.push(o.length)},function f0t(l){var o=l.stack,a=o.pop();exports.DEBUG&&console.log(l.step,"CINDEX[]",a),o.push(o[o.length-a])},function p0t(l){var o=l.stack,a=o.pop();exports.DEBUG&&console.log(l.step,"MINDEX[]",a),o.push(o.splice(o.length-a,1)[0])},void 0,void 0,void 0,function h0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"LOOPCALL[]",a,c);var u=l.ip,h=l.prog;l.prog=l.funcs[a];for(var d=0;d<c;d++)X0(l),exports.DEBUG&&console.log(++l.step,d+1<c?"next loopcall":"done loopcall",d);l.ip=u,l.prog=h},function d0t(l){var o=l.stack.pop();exports.DEBUG&&console.log(l.step,"CALL[]",o);var a=l.ip,c=l.prog;l.prog=l.funcs[o],X0(l),l.ip=a,l.prog=c,exports.DEBUG&&console.log(++l.step,"returning from",o)},function g0t(l){if("fpgm"!==l.env)throw new Error("FDEF not allowed here");var a=l.prog,c=l.ip,u=l.stack.pop(),h=c;for(exports.DEBUG&&console.log(l.step,"FDEF[]",u);45!==a[++c];);l.ip=c,l.funcs[u]=a.slice(h+1,c)},void 0,Cye.bind(void 0,0),Cye.bind(void 0,1),Sye.bind(void 0,qf),Sye.bind(void 0,Ad),wye.bind(void 0,0),wye.bind(void 0,1),Tye.bind(void 0,0),Tye.bind(void 0,1),Oye.bind(void 0,0),Oye.bind(void 0,1),function m0t(l){for(var o=l.stack,a=l.loop,c=l.fv,u=o.pop()/64,h=l.z2;a--;){var d=o.pop(),f=h[d];exports.DEBUG&&console.log(l.step,(l.loop>1?"loop "+(l.loop-a)+": ":"")+"SHPIX[]",d,u),c.setRelative(f,f,u),c.touch(f)}l.loop=1},function v0t(l){for(var o=l.stack,a=l.rp1,c=l.rp2,u=l.loop,h=l.z0[a],d=l.z1[c],f=l.fv,p=l.dpv,g=l.z2;u--;){var m=o.pop(),v=g[m];exports.DEBUG&&console.log(l.step,(l.loop>1?"loop "+(l.loop-u)+": ":"")+"IP[]",m,a,"<->",c),f.interpolate(v,h,d,p),f.touch(v)}l.loop=1},Dye.bind(void 0,0),Dye.bind(void 0,1),function y0t(l){for(var o=l.stack,c=l.z0[l.rp0],u=l.loop,h=l.fv,d=l.pv,f=l.z1;u--;){var p=o.pop(),g=f[p];exports.DEBUG&&console.log(l.step,(l.loop>1?"loop "+(l.loop-u)+": ":"")+"ALIGNRP[]",p),h.setRelative(g,c,0,d),h.touch(g)}l.loop=1},function _0t(l){exports.DEBUG&&console.log(l.step,"RTDG[]"),l.round=Nmt},kye.bind(void 0,0),kye.bind(void 0,1),function b0t(l){var o=l.prog,a=l.ip,c=l.stack,u=o[++a];exports.DEBUG&&console.log(l.step,"NPUSHB[]",u);for(var h=0;h<u;h++)c.push(o[++a]);l.ip=a},function x0t(l){var o=l.ip,a=l.prog,c=l.stack,u=a[++o];exports.DEBUG&&console.log(l.step,"NPUSHW[]",u);for(var h=0;h<u;h++){var d=a[++o]<<8|a[++o];32768&d&&(d=-(1+(65535^d))),c.push(d)}l.ip=o},function C0t(l){var o=l.stack,a=l.store;a||(a=l.store=[]);var c=o.pop(),u=o.pop();exports.DEBUG&&console.log(l.step,"WS",c,u),a[u]=c},function S0t(l){var o=l.stack,a=l.store,c=o.pop();exports.DEBUG&&console.log(l.step,"RS",c),o.push(a&&a[c]||0)},function w0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"WCVTP",a,c),l.cvt[c]=a/64},function T0t(l){var o=l.stack,a=o.pop();exports.DEBUG&&console.log(l.step,"RCVT",a),o.push(64*l.cvt[a])},Mye.bind(void 0,0),Mye.bind(void 0,1),void 0,Eye.bind(void 0,0),Eye.bind(void 0,1),function O0t(l){exports.DEBUG&&console.log(l.step,"MPPEM[]"),l.stack.push(l.ppem)},void 0,function D0t(l){exports.DEBUG&&console.log(l.step,"FLIPON[]"),l.autoFlip=!0},void 0,void 0,function k0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"LT[]",a,c),o.push(c<a?1:0)},function M0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"LTEQ[]",a,c),o.push(c<=a?1:0)},function E0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"GT[]",a,c),o.push(c>a?1:0)},function A0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"GTEQ[]",a,c),o.push(c>=a?1:0)},function I0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"EQ[]",a,c),o.push(a===c?1:0)},function P0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"NEQ[]",a,c),o.push(a!==c?1:0)},function R0t(l){var o=l.stack,a=o.pop();exports.DEBUG&&console.log(l.step,"ODD[]",a),o.push(Math.trunc(a)%2?1:0)},function F0t(l){var o=l.stack,a=o.pop();exports.DEBUG&&console.log(l.step,"EVEN[]",a),o.push(Math.trunc(a)%2?0:1)},function N0t(l){var o=l.stack.pop();exports.DEBUG&&console.log(l.step,"IF[]",o),o||(mye(l,!0),exports.DEBUG&&console.log(l.step,"EIF[]"))},function L0t(l){exports.DEBUG&&console.log(l.step,"EIF[]")},function B0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"AND[]",a,c),o.push(a&&c?1:0)},function V0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"OR[]",a,c),o.push(a||c?1:0)},function z0t(l){var o=l.stack,a=o.pop();exports.DEBUG&&console.log(l.step,"NOT[]",a),o.push(a?0:1)},O9.bind(void 0,1),function U0t(l){var a=l.stack.pop();exports.DEBUG&&console.log(l.step,"SDB[]",a),l.deltaBase=a},function H0t(l){var a=l.stack.pop();exports.DEBUG&&console.log(l.step,"SDS[]",a),l.deltaShift=Math.pow(.5,a)},function $0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"ADD[]",a,c),o.push(c+a)},function W0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"SUB[]",a,c),o.push(c-a)},function G0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"DIV[]",a,c),o.push(64*c/a)},function Q0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"MUL[]",a,c),o.push(c*a/64)},function j0t(l){var o=l.stack,a=o.pop();exports.DEBUG&&console.log(l.step,"ABS[]",a),o.push(Math.abs(a))},function q0t(l){var o=l.stack,a=o.pop();exports.DEBUG&&console.log(l.step,"NEG[]",a),o.push(-a)},function Z0t(l){var o=l.stack,a=o.pop();exports.DEBUG&&console.log(l.step,"FLOOR[]",a),o.push(64*Math.floor(a/64))},function X0t(l){var o=l.stack,a=o.pop();exports.DEBUG&&console.log(l.step,"CEILING[]",a),o.push(64*Math.ceil(a/64))},b3.bind(void 0,0),b3.bind(void 0,1),b3.bind(void 0,2),b3.bind(void 0,3),void 0,void 0,void 0,void 0,function Y0t(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"WCVTF[]",a,c),l.cvt[c]=a*l.ppem/l.font.unitsPerEm},O9.bind(void 0,2),O9.bind(void 0,3),D9.bind(void 0,1),D9.bind(void 0,2),D9.bind(void 0,3),function K0t(l){var a,o=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"SROUND[]",o),l.round=gye,192&o){case 0:a=.5;break;case 64:a=1;break;case 128:a=2;break;default:throw new Error("invalid SROUND value")}switch(l.srPeriod=a,48&o){case 0:l.srPhase=0;break;case 16:l.srPhase=.25*a;break;case 32:l.srPhase=.5*a;break;case 48:l.srPhase=.75*a;break;default:throw new Error("invalid SROUND value")}l.srThreshold=0==(o&=15)?0:(o/8-.5)*a},function J0t(l){var a,o=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"S45ROUND[]",o),l.round=gye,192&o){case 0:a=Math.sqrt(2)/2;break;case 64:a=Math.sqrt(2);break;case 128:a=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(l.srPeriod=a,48&o){case 0:l.srPhase=0;break;case 16:l.srPhase=.25*a;break;case 32:l.srPhase=.5*a;break;case 48:l.srPhase=.75*a;break;default:throw new Error("invalid S45ROUND value")}l.srThreshold=0==(o&=15)?0:(o/8-.5)*a},void 0,void 0,function evt(l){exports.DEBUG&&console.log(l.step,"ROFF[]"),l.round=Fmt},void 0,function tvt(l){exports.DEBUG&&console.log(l.step,"RUTG[]"),l.round=Bmt},function nvt(l){exports.DEBUG&&console.log(l.step,"RDTG[]"),l.round=Vmt},T9,T9,void 0,void 0,void 0,void 0,void 0,function ivt(l){var o=l.stack.pop();exports.DEBUG&&console.log(l.step,"SCANCTRL[]",o)},Aye.bind(void 0,0),Aye.bind(void 0,1),function rvt(l){var o=l.stack,a=o.pop(),c=0;exports.DEBUG&&console.log(l.step,"GETINFO[]",a),1&a&&(c=35),32&a&&(c|=4096),o.push(c)},void 0,function svt(l){var o=l.stack,a=o.pop(),c=o.pop(),u=o.pop();exports.DEBUG&&console.log(l.step,"ROLL[]"),o.push(c),o.push(a),o.push(u)},function ovt(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"MAX[]",a,c),o.push(Math.max(c,a))},function avt(l){var o=l.stack,a=o.pop(),c=o.pop();exports.DEBUG&&console.log(l.step,"MIN[]",a,c),o.push(Math.min(c,a))},function lvt(l){var o=l.stack.pop();exports.DEBUG&&console.log(l.step,"SCANTYPE[]",o)},function cvt(l){var o=l.stack.pop(),a=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"INSTCTRL[]",o,a),o){case 1:return void(l.inhibitGridFit=!!a);case 2:return void(l.ignoreCvt=!!a);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Fg.bind(void 0,1),Fg.bind(void 0,2),Fg.bind(void 0,3),Fg.bind(void 0,4),Fg.bind(void 0,5),Fg.bind(void 0,6),Fg.bind(void 0,7),Fg.bind(void 0,8),Ng.bind(void 0,1),Ng.bind(void 0,2),Ng.bind(void 0,3),Ng.bind(void 0,4),Ng.bind(void 0,5),Ng.bind(void 0,6),Ng.bind(void 0,7),Ng.bind(void 0,8),Mn.bind(void 0,0,0,0,0,0),Mn.bind(void 0,0,0,0,0,1),Mn.bind(void 0,0,0,0,0,2),Mn.bind(void 0,0,0,0,0,3),Mn.bind(void 0,0,0,0,1,0),Mn.bind(void 0,0,0,0,1,1),Mn.bind(void 0,0,0,0,1,2),Mn.bind(void 0,0,0,0,1,3),Mn.bind(void 0,0,0,1,0,0),Mn.bind(void 0,0,0,1,0,1),Mn.bind(void 0,0,0,1,0,2),Mn.bind(void 0,0,0,1,0,3),Mn.bind(void 0,0,0,1,1,0),Mn.bind(void 0,0,0,1,1,1),Mn.bind(void 0,0,0,1,1,2),Mn.bind(void 0,0,0,1,1,3),Mn.bind(void 0,0,1,0,0,0),Mn.bind(void 0,0,1,0,0,1),Mn.bind(void 0,0,1,0,0,2),Mn.bind(void 0,0,1,0,0,3),Mn.bind(void 0,0,1,0,1,0),Mn.bind(void 0,0,1,0,1,1),Mn.bind(void 0,0,1,0,1,2),Mn.bind(void 0,0,1,0,1,3),Mn.bind(void 0,0,1,1,0,0),Mn.bind(void 0,0,1,1,0,1),Mn.bind(void 0,0,1,1,0,2),Mn.bind(void 0,0,1,1,0,3),Mn.bind(void 0,0,1,1,1,0),Mn.bind(void 0,0,1,1,1,1),Mn.bind(void 0,0,1,1,1,2),Mn.bind(void 0,0,1,1,1,3),Mn.bind(void 0,1,0,0,0,0),Mn.bind(void 0,1,0,0,0,1),Mn.bind(void 0,1,0,0,0,2),Mn.bind(void 0,1,0,0,0,3),Mn.bind(void 0,1,0,0,1,0),Mn.bind(void 0,1,0,0,1,1),Mn.bind(void 0,1,0,0,1,2),Mn.bind(void 0,1,0,0,1,3),Mn.bind(void 0,1,0,1,0,0),Mn.bind(void 0,1,0,1,0,1),Mn.bind(void 0,1,0,1,0,2),Mn.bind(void 0,1,0,1,0,3),Mn.bind(void 0,1,0,1,1,0),Mn.bind(void 0,1,0,1,1,1),Mn.bind(void 0,1,0,1,1,2),Mn.bind(void 0,1,0,1,1,3),Mn.bind(void 0,1,1,0,0,0),Mn.bind(void 0,1,1,0,0,1),Mn.bind(void 0,1,1,0,0,2),Mn.bind(void 0,1,1,0,0,3),Mn.bind(void 0,1,1,0,1,0),Mn.bind(void 0,1,1,0,1,1),Mn.bind(void 0,1,1,0,1,2),Mn.bind(void 0,1,1,0,1,3),Mn.bind(void 0,1,1,1,0,0),Mn.bind(void 0,1,1,1,0,1),Mn.bind(void 0,1,1,1,0,2),Mn.bind(void 0,1,1,1,0,3),Mn.bind(void 0,1,1,1,1,0),Mn.bind(void 0,1,1,1,1,1),Mn.bind(void 0,1,1,1,1,2),Mn.bind(void 0,1,1,1,1,3)],rb.prototype.setState=function(l,o){return this.state[l]=o,this.activeState={key:l,value:this.state[l]},this.activeState},rb.prototype.getState=function(l){return this.state[l]||null},zs.prototype.inboundIndex=function(l){return l>=0&&l<this.tokens.length},zs.prototype.composeRUD=function(l){var o=this,c=l.map(function(h){return o[h[0]].apply(o,h.slice(1).concat(!0))}),u=function(h){return"object"==typeof h&&h.hasOwnProperty("FAIL")};if(c.every(u))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:c.filter(u)};this.dispatch("composeRUD",[c.filter(function(h){return!u(h)})])},zs.prototype.replaceRange=function(l,o,a,c){o=null!==o?o:this.tokens.length;var u=a.every(function(d){return d instanceof rb});if(!isNaN(l)&&this.inboundIndex(l)&&u){var h=this.tokens.splice.apply(this.tokens,[l,o].concat(a));return c||this.dispatch("replaceToken",[l,o,a]),[h,a]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},zs.prototype.replaceToken=function(l,o,a){if(!isNaN(l)&&this.inboundIndex(l)&&o instanceof rb){var c=this.tokens.splice(l,1,o);return a||this.dispatch("replaceToken",[l,o]),[c[0],o]}return{FAIL:"replaceToken: invalid token or index."}},zs.prototype.removeRange=function(l,o,a){o=isNaN(o)?this.tokens.length:o;var c=this.tokens.splice(l,o);return a||this.dispatch("removeRange",[c,l,o]),c},zs.prototype.removeToken=function(l,o){if(!isNaN(l)&&this.inboundIndex(l)){var a=this.tokens.splice(l,1);return o||this.dispatch("removeToken",[a,l]),a}return{FAIL:"removeToken: invalid token index."}},zs.prototype.insertToken=function(l,o,a){return l.every(function(u){return u instanceof rb})?(this.tokens.splice.apply(this.tokens,[o,0].concat(l)),a||this.dispatch("insertToken",[l,o]),l):{FAIL:"insertToken: invalid token(s)."}},zs.prototype.registerModifier=function(l,o,a){this.events.newToken.subscribe(function(c,u){if(null===o||!0===o.apply(this,[c,u])){var p=a.apply(this,[c,u]);c.setState(l,p)}}),this.registeredModifiers.push(l)},x3.prototype.subscribe=function(l){return"function"==typeof l?this.subscribers.push(l)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},x3.prototype.unsubscribe=function(l){this.subscribers.splice(l,1)},yh.prototype.setCurrentIndex=function(l){this.index=l,this.current=this.context[l],this.backtrack=this.context.slice(0,l),this.lookahead=this.context.slice(l+1)},yh.prototype.get=function(l){switch(!0){case 0===l:return this.current;case l<0&&Math.abs(l)<=this.backtrack.length:return this.backtrack.slice(l)[0];case l>0&&l<=this.lookahead.length:return this.lookahead[l-1];default:return null}},zs.prototype.rangeToText=function(l){if(l instanceof k9)return this.getRangeTokens(l).map(function(o){return o.char}).join("")},zs.prototype.getText=function(){return this.tokens.map(function(l){return l.char}).join("")},zs.prototype.getContext=function(l){return this.registeredContexts[l]||null},zs.prototype.on=function(l,o){var a=this.events[l];return a?a.subscribe(o):null},zs.prototype.dispatch=function(l,o){var a=this,c=this.events[l];c instanceof x3&&c.subscribers.forEach(function(u){u.apply(a,o||[])})},zs.prototype.registerContextChecker=function(l,o,a){if(this.getContext(l))return{FAIL:"context name '"+l+"' is already registered."};if("function"!=typeof o)return{FAIL:"missing context start check."};if("function"!=typeof a)return{FAIL:"missing context end check."};var c=new uvt(l,o,a);return this.registeredContexts[l]=c,this.contextCheckers.push(c),c},zs.prototype.getRangeTokens=function(l){return[].concat(this.tokens.slice(l.startIndex,l.startIndex+l.endOffset))},zs.prototype.getContextRanges=function(l){var o=this.getContext(l);return o?o.ranges:{FAIL:"context checker '"+l+"' is not registered."}},zs.prototype.resetContextsRanges=function(){var l=this.registeredContexts;for(var o in l)l.hasOwnProperty(o)&&(l[o].ranges=[])},zs.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var l=this.tokens.map(function(c){return c.char}),o=0;o<l.length;o++){var a=new yh(l,o);this.runContextCheck(a)}this.dispatch("updateContextsRanges",[this.registeredContexts])},zs.prototype.setEndOffset=function(l,o){var c=new k9(this.getContext(o).openRange.startIndex,l,o),u=this.getContext(o).ranges;return c.rangeId=o+"."+u.length,u.push(c),this.getContext(o).openRange=null,c},zs.prototype.runContextCheck=function(l){var o=this,a=l.index;this.contextCheckers.forEach(function(c){var u=c.contextName,h=o.getContext(u).openRange;if(!h&&c.checkStart(l)&&(h=new k9(a,null,u),o.getContext(u).openRange=h,o.dispatch("contextStart",[u,a])),h&&c.checkEnd(l)){var f=o.setEndOffset(a-h.startIndex+1,u);o.dispatch("contextEnd",[u,f])}})},zs.prototype.tokenize=function(l){this.tokens=[],this.resetContextsRanges();var o=Array.from(l);this.dispatch("start");for(var a=0;a<o.length;a++){var c=o[a],u=new yh(o,a);this.dispatch("next",[u]),this.runContextCheck(u);var h=new rb(c);this.tokens.push(h),this.dispatch("newToken",[h,u])}return this.dispatch("end",[this.tokens]),this.tokens},Nc.prototype.getDefaultScriptFeaturesIndexes=function(){for(var l=this.font.tables.gsub.scripts,o=0;o<l.length;o++){var a=l[o];if("DFLT"===a.tag)return a.script.defaultLangSys.featureIndexes}return[]},Nc.prototype.getScriptFeaturesIndexes=function(l){if(!this.font.tables.gsub)return[];if(!l)return this.getDefaultScriptFeaturesIndexes();for(var a=this.font.tables.gsub.scripts,c=0;c<a.length;c++){var u=a[c];if(u.tag===l&&u.script.defaultLangSys)return u.script.defaultLangSys.featureIndexes;var h=u.langSysRecords;if(h)for(var d=0;d<h.length;d++){var f=h[d];if(f.tag===l)return f.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},Nc.prototype.mapTagsToFeatures=function(l,o){for(var a={},c=0;c<l.length;c++)a[l[c].tag]=l[c].feature;this.features[o].tags=a},Nc.prototype.getScriptFeatures=function(l){var o=this.features[l];if(this.features.hasOwnProperty(l))return o;var a=this.getScriptFeaturesIndexes(l);if(!a)return null;var c=this.font.tables.gsub;return o=a.map(function(u){return c.features[u]}),this.features[l]=o,this.mapTagsToFeatures(o,l),o},Nc.prototype.getSubstitutionType=function(l,o){return l.lookupType.toString()+o.substFormat.toString()},Nc.prototype.getLookupMethod=function(l,o){var a=this;switch(this.getSubstitutionType(l,o)){case"11":return function(u){return fvt.apply(a,[u,o])};case"12":return function(u){return pvt.apply(a,[u,o])};case"63":return function(u){return gvt.apply(a,[u,o])};case"41":return function(u){return mvt.apply(a,[u,o])};case"21":return function(u){return vvt.apply(a,[u,o])};default:throw new Error("lookupType: "+l.lookupType+" - substFormat: "+o.substFormat+" is not yet supported")}},Nc.prototype.lookupFeature=function(l){var o=l.contextParams,a=o.index,c=this.getFeature({tag:l.tag,script:l.script});if(!c)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+l.tag+"' for script '"+l.script+"'.");for(var u=this.getFeatureLookups(c),h=[].concat(o.context),d=0;d<u.length;d++)for(var f=u[d],p=this.getLookupSubtables(f),g=0;g<p.length;g++){var m=p[g],v=this.getSubstitutionType(f,m),y=this.getLookupMethod(f,m),_=void 0;switch(v){case"11":(_=y(o.current))&&h.splice(a,1,new Y0({id:11,tag:l.tag,substitution:_}));break;case"12":(_=y(o.current))&&h.splice(a,1,new Y0({id:12,tag:l.tag,substitution:_}));break;case"63":_=y(o),Array.isArray(_)&&_.length&&h.splice(a,1,new Y0({id:63,tag:l.tag,substitution:_}));break;case"41":(_=y(o))&&h.splice(a,1,new Y0({id:41,tag:l.tag,substitution:_}));break;case"21":(_=y(o.current))&&h.splice(a,1,new Y0({id:21,tag:l.tag,substitution:_}))}o=new yh(h,a),(!Array.isArray(_)||_.length)&&(_=null)}return h.length?h:null},Nc.prototype.supports=function(l){if(!l.script)return!1;this.getScriptFeatures(l.script);var o=this.features.hasOwnProperty(l.script);if(!l.tag)return o;var a=this.features[l.script].some(function(c){return c.tag===l.tag});return o&&a},Nc.prototype.getLookupSubtables=function(l){return l.subtables||null},Nc.prototype.getLookupByIndex=function(l){return this.font.tables.gsub.lookups[l]||null},Nc.prototype.getFeatureLookups=function(l){return l.lookupListIndexes.map(this.getLookupByIndex.bind(this))},Nc.prototype.getFeature=function(o){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(o.script)||this.getScriptFeatures(o.script);var a=this.features[o.script];return a?a.tags[o.tag]?this.features[o.script].tags[o.tag]:null:{FAIL:"No feature for script "+o.script}};var bvt={startCheck:function yvt(l){var o=l.current,a=l.get(-1);return null===a&&Lg(o)||!Lg(a)&&Lg(o)},endCheck:function _vt(l){var o=l.get(1);return null===o||!Lg(o)}},Svt={startCheck:function xvt(l){var o=l.current,a=l.get(-1);return(Lg(o)||Bg(o))&&!Lg(a)},endCheck:function Cvt(l){var o=l.get(1);switch(!0){case null===o:return!0;case!Lg(o)&&!Bg(o):var a=function dvt(l){return/\s/.test(l)}(o);if(!a)return!0;if(a&&!l.lookahead.some(function(u){return Lg(u)||Bg(u)}))return!0;break;default:return!1}}},Pye={11:function wvt(l,o,a){o[a].setState(l.tag,l.substitution)},12:function Tvt(l,o,a){o[a].setState(l.tag,l.substitution)},63:function Ovt(l,o,a){l.substitution.forEach(function(c,u){o[a+u].setState(l.tag,c)})},41:function Dvt(l,o,a){var c=o[a];c.setState(l.tag,l.substitution.ligGlyph);for(var u=l.substitution.components.length,h=0;h<u;h++)(c=o[a+h+1]).setState("deleted",!0)}};function E9(l,o,a){l instanceof Y0&&Pye[l.id]&&Pye[l.id](l,o,a)}function Evt(l){var o=this,a="arab",c=this.featuresTags[a],u=this.tokenizer.getRangeTokens(l);if(1!==u.length){var h=new yh(u.map(function(f){return f.getState("glyphIndex")}),0),d=new yh(u.map(function(f){return f.char}),0);u.forEach(function(f,p){if(!Bg(f.char)){h.setCurrentIndex(p),d.setCurrentIndex(p);var m,g=0;switch(function kvt(l){for(var o=[].concat(l.backtrack),a=o.length-1;a>=0;a--){var c=o[a],u=Iye(c),h=Bg(c);if(!u&&!h)return!0;if(u)return!1}return!1}(d)&&(g|=1),function Mvt(l){if(Iye(l.current))return!1;for(var o=0;o<l.lookahead.length;o++)if(!Bg(l.lookahead[o]))return!0;return!1}(d)&&(g|=2),g){case 1:m="fina";break;case 2:m="init";break;case 3:m="medi"}if(-1!==c.indexOf(m)){var v=o.query.lookupFeature({tag:m,script:a,contextParams:h});if(v instanceof Error)return console.info(v.message);v.forEach(function(y,_){y instanceof Y0&&(E9(y,u,_),h.context[_]=y.substitution)})}}})}}function Rye(l,o){return new yh(l.map(function(c){return c.activeState.value}),o||0)}function Avt(l){var o=this,c=this.tokenizer.getRangeTokens(l),u=Rye(c);u.context.forEach(function(h,d){u.setCurrentIndex(d);var f=o.query.lookupFeature({tag:"rlig",script:"arab",contextParams:u});f.length&&(f.forEach(function(p){return E9(p,c,d)}),u=Rye(c))})}var Rvt={startCheck:function Ivt(l){var o=l.current,a=l.get(-1);return null===a&&C3(o)||!C3(a)&&C3(o)},endCheck:function Pvt(l){var o=l.get(1);return null===o||!C3(o)}};function Fye(l,o){return new yh(l.map(function(c){return c.activeState.value}),o||0)}function Fvt(l){var o=this,c=this.tokenizer.getRangeTokens(l),u=Fye(c);u.context.forEach(function(h,d){u.setCurrentIndex(d);var f=o.query.lookupFeature({tag:"liga",script:"latn",contextParams:u});f.length&&(f.forEach(function(p){return E9(p,c,d)}),u=Fye(c))})}function _h(l){this.baseDir=l||"ltr",this.tokenizer=new zs,this.featuresTags={}}function A9(l){var o=this.contextChecks[l+"Check"];return this.tokenizer.registerContextChecker(l,o.startCheck,o.endCheck)}function Nvt(){return A9.call(this,"latinWord"),A9.call(this,"arabicWord"),A9.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function Lvt(){var l=this;this.tokenizer.getContextRanges("arabicSentence").forEach(function(a){var c=l.tokenizer.getRangeTokens(a);l.tokenizer.replaceRange(a.startIndex,a.endOffset,c.reverse())})}function I9(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function Bvt(){var l=this;this.featuresTags.hasOwnProperty("arab")&&(I9.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(function(c){Evt.call(l,c)}))}function Vvt(){var l=this,o="arab";this.featuresTags.hasOwnProperty(o)&&-1!==this.featuresTags[o].indexOf("rlig")&&(I9.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(function(u){Avt.call(l,u)}))}function zvt(){var l=this,o="latn";this.featuresTags.hasOwnProperty(o)&&-1!==this.featuresTags[o].indexOf("liga")&&(I9.call(this),this.tokenizer.getContextRanges("latinWord").forEach(function(u){Fvt.call(l,u)}))}function Pr(l){(l=l||{}).tables=l.tables||{},l.empty||(f2(l.familyName,"When creating a new Font object, familyName is required."),f2(l.styleName,"When creating a new Font object, styleName is required."),f2(l.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),f2(l.ascender,"When creating a new Font object, ascender is required."),f2(l.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:l.familyName||" "},fontSubfamily:{en:l.styleName||" "},fullName:{en:l.fullName||l.familyName+" "+l.styleName},postScriptName:{en:l.postScriptName||(l.familyName+l.styleName).replace(/\s/g,"")},designer:{en:l.designer||" "},designerURL:{en:l.designerURL||" "},manufacturer:{en:l.manufacturer||" "},manufacturerURL:{en:l.manufacturerURL||" "},license:{en:l.license||" "},licenseURL:{en:l.licenseURL||" "},version:{en:l.version||"Version 0.1"},description:{en:l.description||" "},copyright:{en:l.copyright||" "},trademark:{en:l.trademark||" "}},this.unitsPerEm=l.unitsPerEm||1e3,this.ascender=l.ascender,this.descender=l.descender,this.createdTimestamp=l.createdTimestamp,this.tables=Object.assign(l.tables,{os2:Object.assign({usWeightClass:l.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:l.widthClass||this.usWidthClasses.MEDIUM,fsSelection:l.fsSelection||this.fsSelectionValues.REGULAR},l.tables.os2)})),this.supported=!0,this.glyphs=new Ed.GlyphSet(this,l.glyphs||[]),this.encoding=new xve(this),this.position=new d2(this),this.substitution=new Fc(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new fye(this):void 0}})}function Hvt(l,o,a){var c={},u=new kn.Parser(l,o);return c.tag=u.parseTag(),c.minValue=u.parseFixed(),c.defaultValue=u.parseFixed(),c.maxValue=u.parseFixed(),u.skip("uShort",1),c.name=a[u.parseUShort()]||{},c}function Wvt(l,o,a,c){var u={},h=new kn.Parser(l,o);u.name=c[h.parseUShort()]||{},h.skip("uShort",1),u.coordinates={};for(var d=0;d<a.length;++d)u.coordinates[a[d].tag]=h.parseFixed();return u}_h.prototype.setText=function(l){this.text=l},_h.prototype.contextChecks={latinWordCheck:Rvt,arabicWordCheck:bvt,arabicSentenceCheck:Svt},_h.prototype.registerFeatures=function(l,o){var a=this,c=o.filter(function(u){return a.query.supports({script:l,tag:u})});this.featuresTags[l]=this.featuresTags.hasOwnProperty(l)?this.featuresTags[l].concat(c):c},_h.prototype.applyFeatures=function(l,o){if(!l)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Nc(l));for(var a=0;a<o.length;a++){var c=o[a];!this.query.supports({script:c.script})||this.registerFeatures(c.script,c.tags)}},_h.prototype.registerModifier=function(l,o,a){this.tokenizer.registerModifier(l,o,a)},_h.prototype.checkContextReady=function(l){return!!this.tokenizer.getContext(l)},_h.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(Bvt.call(this),Vvt.call(this)),this.checkContextReady("latinWord")&&zvt.call(this),this.checkContextReady("arabicSentence")&&Lvt.call(this)},_h.prototype.processText=function(l){(!this.text||this.text!==l)&&(this.setText(l),Nvt.call(this),this.applyFeaturesToContexts())},_h.prototype.getBidiText=function(l){return this.processText(l),this.tokenizer.getText()},_h.prototype.getTextGlyphs=function(l){this.processText(l);for(var o=[],a=0;a<this.tokenizer.tokens.length;a++){var c=this.tokenizer.tokens[a];if(!c.state.deleted){var u=c.activeState.value;o.push(Array.isArray(u)?u[0]:u)}}return o},Pr.prototype.hasChar=function(l){return null!==this.encoding.charToGlyphIndex(l)},Pr.prototype.charToGlyphIndex=function(l){return this.encoding.charToGlyphIndex(l)},Pr.prototype.charToGlyph=function(l){var o=this.charToGlyphIndex(l),a=this.glyphs.get(o);return a||(a=this.glyphs.get(0)),a},Pr.prototype.updateFeatures=function(l){return this.defaultRenderOptions.features.map(function(o){return"latn"===o.script?{script:"latn",tags:o.tags.filter(function(a){return l[a]})}:o})},Pr.prototype.stringToGlyphs=function(l,o){var a=this,c=new _h;c.registerModifier("glyphIndex",null,function(v){return a.charToGlyphIndex(v.char)});var h=o?this.updateFeatures(o.features):this.defaultRenderOptions.features;c.applyFeatures(this,h);for(var d=c.getTextGlyphs(l),f=d.length,p=new Array(f),g=this.glyphs.get(0),m=0;m<f;m+=1)p[m]=this.glyphs.get(d[m])||g;return p},Pr.prototype.nameToGlyphIndex=function(l){return this.glyphNames.nameToGlyphIndex(l)},Pr.prototype.nameToGlyph=function(l){var o=this.nameToGlyphIndex(l),a=this.glyphs.get(o);return a||(a=this.glyphs.get(0)),a},Pr.prototype.glyphIndexToName=function(l){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(l):""},Pr.prototype.getKerningValue=function(l,o){l=l.index||l,o=o.index||o;var a=this.position.defaultKerningTables;return a?this.position.getKerningValue(a,l,o):this.kerningPairs[l+","+o]||0},Pr.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},Pr.prototype.forEachGlyph=function(l,o,a,c,u,h){o=void 0!==o?o:0,a=void 0!==a?a:0,c=void 0!==c?c:72,u=Object.assign({},this.defaultRenderOptions,u);var p,d=1/this.unitsPerEm*c,f=this.stringToGlyphs(l,u);if(u.kerning){var g=u.script||this.position.getDefaultScriptName();p=this.position.getKerningTables(g,u.language)}for(var m=0;m<f.length;m+=1){var v=f[m];h.call(this,v,o,a,c,u),v.advanceWidth&&(o+=v.advanceWidth*d),u.kerning&&m<f.length-1&&(o+=(p?this.position.getKerningValue(p,v.index,f[m+1].index):this.getKerningValue(v,f[m+1]))*d),u.letterSpacing?o+=u.letterSpacing*c:u.tracking&&(o+=u.tracking/1e3*c)}return o},Pr.prototype.getPath=function(l,o,a,c,u){var h=new fo;return this.forEachGlyph(l,o,a,c,u,function(d,f,p,g){var m=d.getPath(f,p,g,u,this);h.extend(m)}),h},Pr.prototype.getPaths=function(l,o,a,c,u){var h=[];return this.forEachGlyph(l,o,a,c,u,function(d,f,p,g){var m=d.getPath(f,p,g,u,this);h.push(m)}),h},Pr.prototype.getAdvanceWidth=function(l,o,a){return this.forEachGlyph(l,0,0,o,a,function(){})},Pr.prototype.draw=function(l,o,a,c,u,h){this.getPath(o,a,c,u,h).draw(l)},Pr.prototype.drawPoints=function(l,o,a,c,u,h){this.forEachGlyph(o,a,c,u,h,function(d,f,p,g){d.drawPoints(l,f,p,g)})},Pr.prototype.drawMetrics=function(l,o,a,c,u,h){this.forEachGlyph(o,a,c,u,h,function(d,f,p,g){d.drawMetrics(l,f,p,g)})},Pr.prototype.getEnglishName=function(l){var o=this.names[l];if(o)return o.en},Pr.prototype.validate=function(){var l=this;function a(c){var u=l.getEnglishName(c);u&&u.trim()}a("fontFamily"),a("weightName"),a("manufacturer"),a("copyright"),a("version")},Pr.prototype.toTables=function(){return Dmt_fontToTable(this)},Pr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Pr.prototype.toArrayBuffer=function(){for(var o=this.toTables().encode(),a=new ArrayBuffer(o.length),c=new Uint8Array(a),u=0;u<o.length;u++)c[u]=o[u];return a},Pr.prototype.download=function(l){var o=this.getEnglishName("fontFamily"),a=this.getEnglishName("fontSubfamily");l=l||o.replace(/\s/g,"")+"-"+a+".otf";var c=this.toArrayBuffer();if(function Mmt(){return"undefined"!=typeof window}())if(window.URL=window.URL||window.webkitURL,window.URL){var u=new DataView(c),h=new Blob([u],{type:"font/opentype"}),d=document.createElement("a");d.href=window.URL.createObjectURL(h),d.download=l;var f=document.createEvent("MouseEvents");f.initEvent("click",!0,!1),d.dispatchEvent(f)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var p=require("fs"),g=function Emt(l){for(var o=new Buffer(l.byteLength),a=new Uint8Array(l),c=0;c<o.length;++c)o[c]=a[c];return o}(c);p.writeFileSync(l,g)}},Pr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Pr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Pr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var jvt_parse=function Qvt(l,o,a){var c=new kn.Parser(l,o),u=c.parseULong();zn.argument(65536===u,"Unsupported fvar table version.");var h=c.parseOffset16();c.skip("uShort",1);for(var d=c.parseUShort(),f=c.parseUShort(),p=c.parseUShort(),g=c.parseUShort(),m=[],v=0;v<d;v++)m.push(Hvt(l,o+h+v*f,a));for(var y=[],_=o+h+d*f,b=0;b<p;b++)y.push(Wvt(l,_+b*g,m,a));return{axes:m,instances:y}},qvt=function(){return{coverage:this.parsePointer(Je.coverage),attachPoints:this.parseList(Je.pointer(Je.uShortList))}},Zvt=function(){var l=this.parseUShort();return zn.argument(1===l||2===l||3===l,"Unsupported CaretValue table version."),1===l?{coordinate:this.parseShort()}:2===l?{pointindex:this.parseShort()}:3===l?{coordinate:this.parseShort()}:void 0},Xvt=function(){return this.parseList(Je.pointer(Zvt))},Yvt=function(){return{coverage:this.parsePointer(Je.coverage),ligGlyphs:this.parseList(Je.pointer(Xvt))}},Kvt=function(){return this.parseUShort(),this.parseList(Je.pointer(Je.coverage))},eyt_parse=function Jvt(l,o){var a=new Je(l,o=o||0),c=a.parseVersion(1);zn.argument(1===c||1.2===c||1.3===c,"Unsupported GDEF table version.");var u={version:c,classDef:a.parsePointer(Je.classDef),attachList:a.parsePointer(qvt),ligCaretList:a.parsePointer(Yvt),markAttachClassDef:a.parsePointer(Je.classDef)};return c>=1.2&&(u.markGlyphSets=a.parsePointer(Kvt)),u},bh=new Array(10);bh[1]=function(){var o=this.offset+this.relativeOffset,a=this.parseUShort();return 1===a?{posFormat:1,coverage:this.parsePointer(Je.coverage),value:this.parseValueRecord()}:2===a?{posFormat:2,coverage:this.parsePointer(Je.coverage),values:this.parseValueRecordList()}:void zn.assert(!1,"0x"+o.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},bh[2]=function(){var o=this.offset+this.relativeOffset,a=this.parseUShort();zn.assert(1===a||2===a,"0x"+o.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var c=this.parsePointer(Je.coverage),u=this.parseUShort(),h=this.parseUShort();if(1===a)return{posFormat:a,coverage:c,valueFormat1:u,valueFormat2:h,pairSets:this.parseList(Je.pointer(Je.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(u),value2:this.parseValueRecord(h)}})))};if(2===a){var d=this.parsePointer(Je.classDef),f=this.parsePointer(Je.classDef),p=this.parseUShort(),g=this.parseUShort();return{posFormat:a,coverage:c,valueFormat1:u,valueFormat2:h,classDef1:d,classDef2:f,class1Count:p,class2Count:g,classRecords:this.parseList(p,Je.list(g,function(){return{value1:this.parseValueRecord(u),value2:this.parseValueRecord(h)}}))}}},bh[3]=function(){return{error:"GPOS Lookup 3 not supported"}},bh[4]=function(){return{error:"GPOS Lookup 4 not supported"}},bh[5]=function(){return{error:"GPOS Lookup 5 not supported"}},bh[6]=function(){return{error:"GPOS Lookup 6 not supported"}},bh[7]=function(){return{error:"GPOS Lookup 7 not supported"}},bh[8]=function(){return{error:"GPOS Lookup 8 not supported"}},bh[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);var ryt_parse=function tyt(l,o){var a=new Je(l,o=o||0),c=a.parseVersion(1);return zn.argument(1===c||1.1===c,"Unsupported GPOS table version "+c),1===c?{version:c,scripts:a.parseScriptList(),features:a.parseFeatureList(),lookups:a.parseLookupList(bh)}:{version:c,scripts:a.parseScriptList(),features:a.parseFeatureList(),lookups:a.parseLookupList(bh),variations:a.parseFeatureVariationsList()}},lyt_parse=function ayt(l,o){var a=new kn.Parser(l,o),c=a.parseUShort();if(0===c)return function syt(l){var o={};l.skip("uShort");var a=l.parseUShort();zn.argument(0===a,"Unsupported kern sub-table version."),l.skip("uShort",2);var c=l.parseUShort();l.skip("uShort",3);for(var u=0;u<c;u+=1){var h=l.parseUShort(),d=l.parseUShort(),f=l.parseShort();o[h+","+d]=f}return o}(a);if(1===c)return function oyt(l){var o={};l.skip("uShort"),l.parseULong()>1&&console.warn("Only the first kern subtable is supported."),l.skip("uLong");var u=255&l.parseUShort();if(l.skip("uShort"),0===u){var h=l.parseUShort();l.skip("uShort",3);for(var d=0;d<h;d+=1){var f=l.parseUShort(),p=l.parseUShort(),g=l.parseShort();o[f+","+p]=g}}return o}(a);throw new Error("Unsupported kern table version ("+c+").")},uyt_parse=function cyt(l,o,a,c){for(var u=new kn.Parser(l,o),h=c?u.parseUShort:u.parseULong,d=[],f=0;f<a+1;f+=1){var p=h.call(u);c&&(p*=2),d.push(p)}return d};function hyt(l,o){require("fs").readFile(l,function(c,u){if(c)return o(c.message);o(null,sye(u))})}function dyt(l,o){var a=new XMLHttpRequest;a.open("get",l,!0),a.responseType="arraybuffer",a.onload=function(){return a.response?o(null,a.response):o("Font could not be loaded: "+a.statusText)},a.onerror=function(){o("Font could not be loaded")},a.send()}function Lye(l,o){for(var a=[],c=12,u=0;u<o;u+=1){var h=kn.getTag(l,c),d=kn.getULong(l,c+4),f=kn.getULong(l,c+8),p=kn.getULong(l,c+12);a.push({tag:h,checksum:d,offset:f,length:p,compression:!1}),c+=16}return a}function Ds(l,o){if("WOFF"===o.compression){var a=new Uint8Array(l.buffer,o.offset+2,o.compressedLength-2),c=new Uint8Array(o.length);if(function Jpt(l,o){var c,h,a=new jpt(l,o);do{switch(c=Xpt(a),Md(a,2,0)){case 0:h=Kpt(a);break;case 1:h=dve(a,sve,ove);break;case 2:Ypt(a,a.ltree,a.dtree),h=dve(a,a.ltree,a.dtree);break;default:h=-3}if(0!==h)throw new Error("Data error")}while(!c);a.destLen<a.dest.length&&("function"==typeof a.dest.slice?a.dest.slice(0,a.destLen):a.dest.subarray(0,a.destLen))}(a,c),c.byteLength!==o.length)throw new Error("Decompression error: "+o.tag+" decompressed length doesn't match recorded length");return{data:new DataView(c.buffer,0),offset:0}}return{data:l,offset:o.offset}}function P9(l,o){o=null==o?{}:o;var a,c,d,u=new Pr({empty:!0}),h=new DataView(l,0),f=[],p=kn.getTag(h,0);if(p===String.fromCharCode(0,1,0,0)||"true"===p||"typ1"===p)u.outlinesFormat="truetype",f=Lye(h,d=kn.getUShort(h,4));else if("OTTO"===p)u.outlinesFormat="cff",f=Lye(h,d=kn.getUShort(h,4));else{if("wOFF"!==p)throw new Error("Unsupported OpenType signature "+p);var g=kn.getTag(h,4);if(g===String.fromCharCode(0,1,0,0))u.outlinesFormat="truetype";else{if("OTTO"!==g)throw new Error("Unsupported OpenType flavor "+p);u.outlinesFormat="cff"}f=function fyt(l,o){for(var a=[],c=44,u=0;u<o;u+=1){var h=kn.getTag(l,c),d=kn.getULong(l,c+4),f=kn.getULong(l,c+8),p=kn.getULong(l,c+12);a.push({tag:h,offset:d,compression:f<p&&"WOFF",compressedLength:f,length:p}),c+=20}return a}(h,d=kn.getUShort(h,12))}for(var m,v,y,_,b,C,x,S,w,O,T,M,A=0;A<d;A+=1){var I=f[A],E=void 0;switch(I.tag){case"cmap":E=Ds(h,I),u.tables.cmap=bve_parse(E.data,E.offset),u.encoding=new Cve(u.tables.cmap);break;case"cvt ":E=Ds(h,I),M=new kn.Parser(E.data,E.offset),u.tables.cvt=M.parseShortList(I.length/2);break;case"fvar":v=I;break;case"fpgm":E=Ds(h,I),M=new kn.Parser(E.data,E.offset),u.tables.fpgm=M.parseByteList(I.length);break;case"head":E=Ds(h,I),u.tables.head=Nve_parse(E.data,E.offset),u.unitsPerEm=u.tables.head.unitsPerEm,a=u.tables.head.indexToLocFormat;break;case"hhea":E=Ds(h,I),u.tables.hhea=Lve_parse(E.data,E.offset),u.ascender=u.tables.hhea.ascender,u.descender=u.tables.hhea.descender,u.numberOfHMetrics=u.tables.hhea.numberOfHMetrics;break;case"hmtx":x=I;break;case"ltag":E=Ds(h,I),c=Vve_parse(E.data,E.offset);break;case"COLR":E=Ds(h,I),u.tables.colr=Yve_parse(E.data,E.offset);break;case"CPAL":E=Ds(h,I),u.tables.cpal=Kve_parse(E.data,E.offset);break;case"maxp":E=Ds(h,I),u.tables.maxp=zve_parse(E.data,E.offset),u.numGlyphs=u.tables.maxp.numGlyphs;break;case"name":O=I;break;case"OS/2":E=Ds(h,I),u.tables.os2=_9_parse(E.data,E.offset);break;case"post":E=Ds(h,I),u.tables.post=qve_parse(E.data,E.offset),u.glyphNames=new f9(u.tables.post);break;case"prep":E=Ds(h,I),M=new kn.Parser(E.data,E.offset),u.tables.prep=M.parseByteList(I.length);break;case"glyf":y=I;break;case"loca":w=I;break;case"CFF ":m=I;break;case"kern":S=I;break;case"GDEF":_=I;break;case"GPOS":b=I;break;case"GSUB":C=I;break;case"meta":T=I}}var P=Ds(h,O);if(u.tables.name=jve_parse(P.data,P.offset,c),u.names=u.tables.name,y&&w){var B=0===a,V=Ds(h,w),Q=uyt_parse(V.data,V.offset,u.numGlyphs,B),j=Ds(h,y);u.glyphs=uye.parse(j.data,j.offset,Q,u,o)}else{if(!m)throw new Error("Font doesn't contain TrueType or CFF outlines.");var N=Ds(h,m);Fve_parse(N.data,N.offset,u,o)}var U=Ds(h,x);if(Bve_parse(u,U.data,U.offset,u.numberOfHMetrics,u.numGlyphs,u.glyphs,o),function xgt(l,o){o.lowMemory?function bgt(l){l._IndexToUnicodeMap={};for(var o=l.tables.cmap.glyphIndexMap,a=Object.keys(o),c=0;c<a.length;c+=1){var u=a[c],h=o[u];void 0===l._IndexToUnicodeMap[h]?l._IndexToUnicodeMap[h]={unicodes:[parseInt(u)]}:l._IndexToUnicodeMap[h].unicodes.push(parseInt(u))}}(l):function _gt(l){for(var o,a=l.tables.cmap.glyphIndexMap,c=Object.keys(a),u=0;u<c.length;u+=1){var h=c[u];(o=l.glyphs.get(a[h])).addUnicode(parseInt(h))}for(var f=0;f<l.glyphs.length;f+=1)o=l.glyphs.get(f),l.cffEncoding?o.name=l.isCIDFont?"gid"+f:l.cffEncoding.charset[f]:l.glyphNames.names&&(o.name=l.glyphNames.glyphIndexToName(f))}(l)}(u,o),S){var z=Ds(h,S);u.kerningPairs=lyt_parse(z.data,z.offset)}else u.kerningPairs={};if(_){var $=Ds(h,_);u.tables.gdef=eyt_parse($.data,$.offset)}if(b){var H=Ds(h,b);u.tables.gpos=ryt_parse(H.data,H.offset),u.position.init()}if(C){var G=Ds(h,C);u.tables.gsub=Zve_parse(G.data,G.offset)}if(v){var W=Ds(h,v);u.tables.fvar=jvt_parse(W.data,W.offset,u.names)}if(T){var X=Ds(h,T);u.tables.meta=Xve_parse(X.data,X.offset),u.metas=u.tables.meta}return u}var myt=Object.freeze({__proto__:null,Font:Pr,Glyph:Rc,Path:fo,BoundingBox:jf,_parse:kn,parse:P9,load:function pyt(l,o,a){a=null==a?{}:a;var u="undefined"!=typeof window||a.isUrl?dyt:hyt;return new Promise(function(h,d){u(l,function(f,p){if(f){if(o)return o(f);d(f)}var g;try{g=P9(p,a)}catch(m){if(o)return o(m,null);d(m)}if(o)return o(null,g);h(g)})})},loadSync:function gyt(l,o){return P9(sye(require("fs").readFileSync(l)),o)}});const Bye=myt;class vyt extends T0e{constructor(o){super(o),this.reversed=!1}load(o,a,c,u){const h=this,d=new Gf(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(o,function(f){try{a(h.parse(f))}catch(p){u?u(p):console.error(p),h.manager.itemError(o)}},c,u)}parse(o){function c(u){const h=[];let d;u.forEach(function(p){"m"===p.type.toLowerCase()?(d=[p],h.push(d)):"z"!==p.type.toLowerCase()&&d.push(p)});const f=[];return h.forEach(function(p){f.push({type:"m",x:p[p.length-1].x,y:p[p.length-1].y});for(let m=p.length-1;m>0;m--){const v=p[m],y={type:v.type};void 0!==v.x2&&void 0!==v.y2?(y.x1=v.x2,y.y1=v.y2,y.x2=v.x1,y.y2=v.y1):void 0!==v.x1&&void 0!==v.y1&&(y.x1=v.x1,y.y1=v.y1),y.x=p[m-1].x,y.y=p[m-1].y,f.push(y)}}),f}return void 0===Bye?(console.warn("THREE.TTFLoader: The loader requires opentype.js. Make sure it's included before using the loader."),null):function a(u,h){const d=Math.round,f={},p=1e5/(72*(u.unitsPerEm||2048)),g=u.encoding.cmap.glyphIndexMap,m=Object.keys(g);for(let v=0;v<m.length;v++){const y=m[v],_=u.glyphs.glyphs[g[y]];if(void 0!==y){const b={ha:d(_.advanceWidth*p),x_min:d(_.xMin*p),x_max:d(_.xMax*p),o:""};h&&(_.path.commands=c(_.path.commands)),_.path.commands.forEach(function(C){"c"===C.type.toLowerCase()&&(C.type="b"),b.o+=C.type.toLowerCase()+" ",void 0!==C.x&&void 0!==C.y&&(b.o+=d(C.x*p)+" "+d(C.y*p)+" "),void 0!==C.x1&&void 0!==C.y1&&(b.o+=d(C.x1*p)+" "+d(C.y1*p)+" "),void 0!==C.x2&&void 0!==C.y2&&(b.o+=d(C.x2*p)+" "+d(C.y2*p)+" ")}),f[String.fromCodePoint(_.unicode)]=b}}return{glyphs:f,familyName:u.getEnglishName("fullName"),ascender:d(u.ascender*p),descender:d(u.descender*p),underlinePosition:u.tables.post.underlinePosition,underlineThickness:u.tables.post.underlineThickness,boundingBox:{xMin:u.tables.head.xMin,xMax:u.tables.head.xMax,yMin:u.tables.head.yMin,yMax:u.tables.head.yMax},resolution:1e3,original_font_information:u.tables.name}}(Bye.parse(o),this.reversed)}}class Vye{constructor(o){this.isFont=!0,this.type="Font",this.data=o}generateShapes(o,a=100){const c=[],u=function yyt(l,o,a){const c=Array.from(l),u=o/a.resolution,h=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*u,d=[];let f=0,p=0;for(let g=0;g<c.length;g++){const m=c[g];if("\n"===m)f=0,p-=h;else{const v=_yt(m,u,f,p,a);f+=v.offsetX,d.push(v.path)}}return d}(o,a,this.data);for(let h=0,d=u.length;h<d;h++)c.push(...u[h].toShapes());return c}}function _yt(l,o,a,c,u){const h=u.glyphs[l]||u.glyphs["?"];if(!h)return void console.error('THREE.Font: character "'+l+'" does not exists in font family '+u.familyName+".");const d=new Mpt;let f,p,g,m,v,y,_,b;if(h.o){const C=h._cachedOutline||(h._cachedOutline=h.o.split(" "));for(let x=0,S=C.length;x<S;)switch(C[x++]){case"m":f=C[x++]*o+a,p=C[x++]*o+c,d.moveTo(f,p);break;case"l":f=C[x++]*o+a,p=C[x++]*o+c,d.lineTo(f,p);break;case"q":g=C[x++]*o+a,m=C[x++]*o+c,v=C[x++]*o+a,y=C[x++]*o+c,d.quadraticCurveTo(v,y,g,m);break;case"b":g=C[x++]*o+a,m=C[x++]*o+c,v=C[x++]*o+a,y=C[x++]*o+c,_=C[x++]*o+a,b=C[x++]*o+c,d.bezierCurveTo(v,y,_,b,g,m)}}return{offsetX:h.ha*o,path:d}}class byt extends q1{constructor(o,a={}){const c=a.font;if(void 0===c)super();else{const u=c.generateShapes(o,a.size);a.depth=void 0!==a.height?a.height:50,void 0===a.bevelThickness&&(a.bevelThickness=10),void 0===a.bevelSize&&(a.bevelSize=8),void 0===a.bevelEnabled&&(a.bevelEnabled=!1),super(u,a)}this.type="TextGeometry"}}var zi=(()=>(function(l){l[l.Left=0]="Left",l[l.Right=1]="Right",l[l.Middle=2]="Middle"}(zi||(zi={})),zi))();class xyt{constructor(){this.scale=1,this.width=100,this.height=100,this.delta=10,this.lineWidth=1,this.lineSizeExtra=1}setWidth(o){return this.width=o,this}setHeight(o){return this.height=o,this}setDelta(o){return this.delta=o,this}clearAll(){return this}}class R9{constructor(o,a){this.name=o,this.vertexes=a}static builder(){return new R9("",null)}setName(o){return this.name=o,this}setVertexes(o){return this.vertexes=o,this}}class Cyt{\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(o){return 1/(o*(Math.sqrt(5)+1)/2)}toDegrees(o){return o/Math.PI*180}translation(o,a,c){return(new ci).makeTranslation(o,a,c)}zRotation(o,a,c,u){const h=new ci;h.makeRotationZ(o);const d=new ci;d.makeTranslation(a,c,0);const f=new ci;return f.identity(),u&&f.scale(u),f.multiply(h.multiply(d))}extrudeShape(o){const a=new o0e([new te(0,0,-.1),new te(0,0,0)]);return new q1(o,{steps:1,bevelEnabled:!1,extrudePath:a})}extrudePath(o,a,c,u){let h=-a+Math.PI/2,d=[-c,u];const f=[],p=this.zRotation(h,d[0],d[1]);o.forEach(m=>{let y=new er(m[0],m[1],0,1).applyMatrix4(p);f.push(new dt(y.x,y.y))});const g=new Hf(f);return this.extrudeShape(g)}createTrost(o,a=0,c=0,u=0,h=0,d=0){let f=o.delta/2/4,p=o.height*(1-c)*.8;return this.extrudePath([[-f,0],[-f,p+3*f],[f,p+3*f],[f,0],[-f,0]],.05*Math.PI,4*-o.delta,-o.height/2)}createKopie(o,a=0,c=0,u=0,h=0,d=0){let f=o.delta/2/4,p=o.height*(1-c)*.8;return this.extrudePath([[-f,0],[-f,p+3*f],[f,p+3*f],[f,0],[-f,0]],-.05*Math.PI,4*+o.delta,-o.height/2)}createTri1(o,a,c=0,u=0,h=0,d=0,f=0){let p=a.delta/2/4,g=a.height*(1-u)*.8;return this.extrudePath([[4*-p/2,+g-2*p],[0,+g+2*p],[4*+p/2,+g-2*p],[4*-p/2,+g-2*p]],180*o/20*1/180*Math.PI,o*-a.delta*4,-a.height/2)}createTri2(o,a,c=0,u=0,h=0,d=0,f=0){let p=a.delta/2/4,g=a.height*(1-u)*.8;return this.extrudePath([[4*-p/2,+g-6*p],[0,+g-2*p],[4*+p/2,+g-6*p],[4*-p/2,+g-6*p]],180*o/20*1/180*Math.PI,o*-a.delta*4,-a.height/2)}createTrostNakonechnik(o,a,c=0,u=0,h=0,d=0,f=0){let p=a.delta/2/4,g=a.height*(1-u)*.8,m=a.delta,v=a.height,y=new Hf;y.moveTo(0,+g+2*p);let C=.5,x=[[0,+g+2*p],[5*-p*C,+g+2*p],[5*-p,+g+2*p],[5*-p,+g+8*p],[5*-p,+g+16*p],[5*-p*C,+g+16*p],[0,+g+16*p],[5*+p*C,+g+16*p],[5*+p,+g+16*p],[5*+p,+g+8*p],[5*+p,+g+2*p],[5*+p*C,+g+2*p],[0,+g+2*p]],T=-180*o/20*1/180*Math.PI+Math.PI/2,M=[-o*-m*4,-v/2];const I=this.zRotation(T,M[0],M[1]);let E=x.map(P=>{let V=new er(P[0],P[1],0,1).applyMatrix4(I);return new dt(V.x,V.y)});return y.moveTo(E[0].x,E[0].y),y.bezierCurveTo(E[1].x,E[1].y,E[2].x,E[2].y,E[3].x,E[3].y),y.bezierCurveTo(E[4].x,E[4].y,E[5].x,E[5].y,E[6].x,E[6].y),y.bezierCurveTo(E[7].x,E[7].y,E[8].x,E[8].y,E[9].x,E[9].y),y.bezierCurveTo(E[10].x,E[10].y,E[11].x,E[11].y,E[12].x,E[12].y),this.extrudeShape(y)}createTri3_2(o,a,c=0,u=0,h=0,d=0,f=0){let p=a.delta/2/4,g=a.height*(1-u)*.8;return this.extrudePath([[0,+g+2*p],[5*-p,+g+2*p],[5*-p,+g+16*p],[0,+g+16*p],[5*+p,+g+16*p],[5*+p,+g+2*p],[0,+g+2*p]],180*o/20*1/180*Math.PI,o*-a.delta*4,-a.height/2)}createKopieNakonechnik(o,a,c=0,u=0,h=0,d=0,f=0){let p=a.delta/2/4,g=a.height*(1-u)*.8;return this.extrudePath([[0,+g-2*p],[2*-p,+g+2*p],[0,+g+16*p],[2*+p,+g+2*p],[0,+g-2*p]],180*o/20*1/180*Math.PI,o*-a.delta*4,-a.height/2)}createSkull(o,a,c=0,u=0,h=0,d=0,f=0){let m=a.delta,v=a.height,y=new Hf,w=0*a.delta/4/2,T=(It,Rt)=>Rt*(1.75*a.delta+2*It),M=(It,Rt)=>Rt*(1.75*a.delta+2*It)*.8,j=.7*T(w,1)/2*.5,N=.7*M(w,1)/2*.5,$=(T(w,1),M(w,1),T(w,1)),H=M(w,1),W=.275*$,X=.9*$/4,K=N/4*2,ae=j/4*2,Ce=(It,Rt,je,Zt,Wt)=>[[Rt/2,0],[Rt-Zt,0],[Rt,Wt],[Rt,je/2],[Rt,je-Wt],[Rt-Zt,je],[Rt/2,je],[Zt,je],[0,je-Wt],[0,je/2],[0,Wt],[Zt,0],[Rt/2,0]].map(Ee=>[Ee[0]+It.x,Ee[1]+It.y]),Ie=Math.PI/4+Math.PI/2,Xe=[$/2,-H/2],Re=this.zRotation(Ie,-Xe[0],Xe[1],new te(-1,1,1)),Ye=this.zRotation(Math.PI/2,0,-v/2-2*m-m/4),nt=(It=new dt(0,0),Rt=$,je=H,Zt=j,Wt=N,[[Rt/2,0],[Rt-Zt,0],[Rt,Wt],[Rt,je/2],[Rt,je-Wt],[Rt/2+Rt/6+.16*Rt,je-Wt],[Rt/2+Rt/6+.16*Rt,je],[Rt/2+Rt/6+.16*Rt,je+Wt],[Rt/2-Rt/4+.16*Rt,je+Wt],[Rt/2-Rt/4+.16*Rt,je],[Rt/2-Rt/4+.16*Rt,je-Wt],[0,je-Wt],[0,je/2],[0,Wt],[Zt,0],[Rt/2,0]].map(Ee=>[Ee[0]+It.x,Ee[1]+It.y])).map(It=>{let Zt=new er(It[0],It[1],0,1).applyMatrix4(Re).applyMatrix4(Ye);return new dt(Zt.x,Zt.y)});var It,Rt,je,Zt,Wt;y.moveTo(nt[0].x,nt[0].y),y.bezierCurveTo(nt[1].x,nt[1].y,nt[2].x,nt[2].y,nt[3].x,nt[3].y),y.bezierCurveTo(nt[4].x,nt[4].y,nt[5].x,nt[5].y,nt[6].x,nt[6].y),y.bezierCurveTo(nt[7].x,nt[7].y,nt[8].x,nt[8].y,nt[9].x,nt[9].y),y.bezierCurveTo(nt[10].x,nt[10].y,nt[11].x,nt[11].y,nt[12].x,nt[12].y),y.bezierCurveTo(nt[13].x,nt[13].y,nt[14].x,nt[14].y,nt[15].x,nt[15].y);let Qe=Ce(new dt($/2-$/6,H/3),W,X,ae,K).map(It=>{let Zt=new er(It[0],It[1],0,1).applyMatrix4(Re).applyMatrix4(Ye);return new dt(Zt.x,Zt.y)}),we=new H0;we.moveTo(Qe[0].x,Qe[0].y),we.bezierCurveTo(Qe[1].x,Qe[1].y,Qe[2].x,Qe[2].y,Qe[3].x,Qe[3].y),we.bezierCurveTo(Qe[4].x,Qe[4].y,Qe[5].x,Qe[5].y,Qe[6].x,Qe[6].y),we.bezierCurveTo(Qe[7].x,Qe[7].y,Qe[8].x,Qe[8].y,Qe[9].x,Qe[9].y),we.bezierCurveTo(Qe[10].x,Qe[10].y,Qe[11].x,Qe[11].y,Qe[12].x,Qe[12].y),y.holes.push(we);let We=Ce(new dt($/2+$/6,H/3),W,X,ae,K).map(It=>{let Zt=new er(It[0],It[1],0,1).applyMatrix4(Re).applyMatrix4(Ye);return new dt(Zt.x,Zt.y)}),Bt=new H0;Bt.moveTo(We[0].x,We[0].y),Bt.bezierCurveTo(We[1].x,We[1].y,We[2].x,We[2].y,We[3].x,We[3].y),Bt.bezierCurveTo(We[4].x,We[4].y,We[5].x,We[5].y,We[6].x,We[6].y),Bt.bezierCurveTo(We[7].x,We[7].y,We[8].x,We[8].y,We[9].x,We[9].y),Bt.bezierCurveTo(We[10].x,We[10].y,We[11].x,We[11].y,We[12].x,We[12].y),y.holes.push(Bt);let Ln=$/4*.6,he=.9*$/4,re=.2*Ln,rt=.2*he,_t=((It,Rt,je,Zt,Wt)=>[[Rt/2,0],[Rt/2+Zt,0],[Rt,je-Wt],[Rt,je],[Rt,je+Wt],[0,je+Wt],[0,je],[0,je-Wt],[Rt/2-Zt,0],[Rt/2,0]].map(Ee=>[Ee[0]+It.x,Ee[1]+It.y]))(new dt($/2+2*W*.16,H/3*2*.9),Ln,he,re,rt).map(It=>{let Zt=new er(It[0],It[1],0,1).applyMatrix4(Re).applyMatrix4(Ye);return new dt(Zt.x,Zt.y)}),Ut=new H0;return Ut.moveTo(_t[0].x,_t[0].y),Ut.bezierCurveTo(_t[1].x,_t[1].y,_t[2].x,_t[2].y,_t[3].x,_t[3].y),Ut.bezierCurveTo(_t[4].x,_t[4].y,_t[5].x,_t[5].y,_t[6].x,_t[6].y),Ut.bezierCurveTo(_t[7].x,_t[7].y,_t[8].x,_t[8].y,_t[9].x,_t[9].y),y.holes.push(Ut),this.extrudeShape(y)}createCrossParts(o,a=0,c=0,u=0,h=0,d=0,f=0,p=0,g=0,m=0){let v=[],_=c,b=u||o.width,C=h||o.height,x=o.delta/o.width*b,S=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),w=b*(d||S),O=m||Math.atan2(1-S,.5),T=w*(f||1-S),M=w*(p||1-S),A=w*(p||.25),I=g?C*g+A*Math.tan(O):C-w/2,E=J1.builder(),P=(Q,j,N,U,z,$)=>{E.addPlaneXY(j,N,U,z,$),v.push(R9.builder().setVertexes(E).setName(Q)),E=J1.builder()};P("\u043a\u0440\u0435\u0441\u0442",new te(-x/2,C/2,0),x,C),P("\u043a\u0440\u0435\u0441\u0442",new te(-w/2,C/2-(T-x/2),0),w,x),P("\u0418\u0438\u0441\u0443\u0441 \u041d\u0430\u0437\u043e\u0440\u0435\u0439 \u0426\u0430\u0440\u044c \u0418\u0443\u0434\u0435\u0439\u0441\u043a\u0438\u0439",new te(-M/2,C/2-(_+(f?(w*(f||1-S)-x/2)/2:w*Math.pow(1-S,2))-x/2),0),M,x),P("\u043a\u0440\u0435\u0441\u0442",new te(-A/2,C/2-(I-A/Math.cos(O)/2)-x,0),A,x/Math.cos(O),0,O);let B=.55*o.width,V=1.5/o.width;return P("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new te(-B/2,-o.height/2+V,0),B,o.delta+V),P("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new te(-B/2-o.delta/2*3,-o.height/2-o.delta+V,0),2.5*o.delta,o.delta+V),P("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new te(+B/2-o.delta,-o.height/2-o.delta+V,0),2.5*o.delta,o.delta+V),P("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new te(-B/2-o.delta/2*3,-o.height/2-2*o.delta+V,0),o.delta,o.delta+V),P("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new te(+B/2+o.delta/2,-o.height/2-2*o.delta+V,0),o.delta,o.delta+V),v}createCross(o,a=0,c=0,u=0,h=0,d=0,f=0,p=0,g=0,m=0){let v=J1.builder();return v.vertexes=this.createCrossParts(o,a,c,u,h,d,f,p,g,m).flatMap(y=>y.vertexes.vertexes),v}createConfig(){return new xyt}createTextDirect(o,a,c,u,h){let _=new byt(a,{font:o,size:c,height:c/10,curveSegments:4,bevelThickness:c/100,bevelSize:c/100,bevelEnabled:!1});_.computeBoundingBox(),_.computeVertexNormals();let b=0;switch(h){case zi.Left:b=0;break;case zi.Right:b=-(_.boundingBox.max.x-_.boundingBox.min.x);break;case zi.Middle:b=-.5*(_.boundingBox.max.x-_.boundingBox.min.x)}const C=new Xs({color:16777215,transparent:!0});let x=new Ki(_,C);return x.position.x=u.x-_.boundingBox.min.x+b,x.position.y=u.y,x.position.z=u.z,x.rotation.x=0,x.rotation.y=0,x}createText(o,a,c,u=0,h=0,d=0,f=0,p=0,g=0,m=0,v=0,y=0){let _=(Ce,ve,Oe="",$e=1,Me=0,Ie=0)=>{o(Ce,ve,Oe,$e,Me,Ie)},b=d||c.width,C=f||c.height,x=c.delta/c.width*b,S=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),w=b*(p||S),O=y||Math.atan2(1-S,.5),T=w*(g||1-S),M=w*(m||1-S),A=w*(m||.25),I=v?C*v+A*Math.tan(O):C-w/2,E=0,P=C/2+4*x,B=this.createTextDirect(a,"\u0426\u0430\u0440\u044c \u0421\u043b\u0430\u0432\u044b",x,new te(E,P,0),zi.Middle),V=this.createTextDirect(a,"\u0418\u0438\u0441\u0443\u0441 \u0425\u0440\u0438\u0441\u0442\u043e\u0441",x,new te(E,P,0),zi.Middle),Q=this.createTextDirect(a,"\u0421\u044b\u043d \u0411\u043e\u0436\u0438\u0439",x,new te(E,P,0),zi.Middle),j=this.createTextDirect(a,"\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c",x,new te(E,P,0),zi.Middle),N=this.createTextDirect(a,"\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",x,new te(E,P,0),zi.Middle),U=this.createTextDirect(a,"\u043a\u043e\u043f\u0438\u0435",x,new te(E,P,0),zi.Middle),z=this.createTextDirect(a,"\u0442\u0440\u043e\u0441\u0442\u044c",x,new te(E,P,0),zi.Middle),$=this.createTextDirect(a,"\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430",x,new te(E,P,0),zi.Middle),H=this.createTextDirect(a,"\u043c\u0435\u0441\u0442\u043e \u043b\u043e\u0431\u043d\u043e\u0435",x,new te(E,P,0),zi.Middle),G=this.createTextDirect(a,"\u0440\u0430\u0441\u043f\u044f\u0442 \u0431\u044b\u0441\u0442\u044c",x,new te(E,P,0),zi.Middle);E=-M/2,P=C/2+x,_(this.createTextDirect(a,"\u0446\u0440\u0483\u044c",x,new te(E,P,0),zi.Right),B),_(this.createTextDirect(a,"\u0441\u043b\u0483\u0432\u044b",x,new te(E+M,P,0),zi.Left),B),E=-w/2,P=C/2-(T-x/2)+x/2,_(this.createTextDirect(a,"\u0406\u0421",x,new te(E,P,0),zi.Left),V),_(this.createTextDirect(a,"\u0483",x,new te(E+.2*x,P+.6*x,0),zi.Left),V),_(this.createTextDirect(a,"\u0425\u0421",x,new te(E+w,P,0),zi.Right),V),_(this.createTextDirect(a,"\u0483",x,new te(E+w-1.1*x,P+.6*x,0),zi.Left),V),P-=3*x,_(this.createTextDirect(a,"\u0441\u043d\u0483\u044a",x,new te(E,P,0),zi.Middle),Q),_(this.createTextDirect(a,"\u0431\u0436\u0483\u0457\u0439",x,new te(E+w,P,0),zi.Middle),Q),E=-x/2,P=(C/2-(I-A/Math.cos(O)/2)-x+C/2-(T-x/2)+x/2)/2-x/2,_(this.createTextDirect(a,"\u043d\u0438",x,new te(E-x/2,P,0),zi.Right),j),_(this.createTextDirect(a,"\u043a\u0430",x,new te(E+x+.3*x,P,0),zi.Left),j);let W=.55*c.width,X=c.delta,K=X/2*3/2;E=-W/2,P=-c.height/2,_(this.createTextDirect(a,"\u0433",x,new te(E-K,P,0),zi.Middle),N),_(this.createTextDirect(a,"\u0433",x,new te(E+K+W,P,0),zi.Middle),N),P=.3*-(T-x/2),_(this.createTextDirect(a,"\u043a",x,new te(E-K,P,0),zi.Middle),U),_(this.createTextDirect(a,"\u0442",x,new te(E+K+W,P,0),zi.Middle),z),E=-W/2*.5,P=-c.height/2-2.5*X,_(this.createTextDirect(a,"\u0433",x,new te(E,P,0),zi.Middle),$),E=W/2*.5,_(this.createTextDirect(a,"\u0430",x,new te(E,P,0),zi.Middle),$);let ae=C/2-(I+A*Math.tan(O)/2+c.delta/Math.cos(O)/2),se=C/2-(c.height+I+A*Math.tan(O)/2+c.delta/Math.cos(O)/2)/2;E=-W/2*.5,P=ae-x/2,_(this.createTextDirect(a,"\u043c",x,new te(E,P,0),zi.Middle),H),E=W/2*.5,_(this.createTextDirect(a,"\u043b",x,new te(E,P,0),zi.Middle),H),E=-W/2*.5,P=se-x/2,_(this.createTextDirect(a,"\u0440",x,new te(E,P,0),zi.Middle),G),E=W/2*.5,_(this.createTextDirect(a,"\u0431",x,new te(E,P,0),zi.Middle),G)}createLeftArrow(o,a,c,u){return this.extrudePath([[a.x,a.y],[a.x,a.y-u],[a.x+o*c,a.y-u/2],[a.x,a.y]],0,0,0)}createRect(o,a,c,u){return this.extrudePath([[a.x,a.y],[a.x,a.y-u],[a.x+o*c,a.y-u],[a.x+o*c,a.y],[a.x,a.y]],0,0,0)}}class Syt{constructor(o,a={}){this.enabled=!0;const c=void 0!==a.defaultThickness?a.defaultThickness:.003,u=(new sn).fromArray(void 0!==a.defaultColor?a.defaultColor:[0,0,0]),d=void 0!==a.defaultKeepAlive&&a.defaultKeepAlive,f={},g={},m={},v={outlineThickness:{value:c},outlineColor:{value:u},outlineAlpha:{value:void 0!==a.defaultAlpha?a.defaultAlpha:1}},y=["#include <common>","#include <uv_pars_vertex>","#include <displacementmap_pars_vertex>","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>","uniform float outlineThickness;","vec4 calculateOutline( vec4 pos, vec3 normal, vec4 skinned ) {","\tfloat thickness = outlineThickness;","\tconst float ratio = 1.0;","\tvec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + normal, 1.0 );","\tvec4 norm = normalize( pos - pos2 );","\treturn pos + norm * thickness * pos.w * ratio;","}","void main() {","\t#include <uv_vertex>","\t#include <beginnormal_vertex>","\t#include <morphnormal_vertex>","\t#include <skinbase_vertex>","\t#include <skinnormal_vertex>","\t#include <begin_vertex>","\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <displacementmap_vertex>","\t#include <project_vertex>","\tvec3 outlineNormal = - objectNormal;","\tgl_Position = calculateOutline( gl_Position, outlineNormal, vec4( transformed, 1.0 ) );","\t#include <logdepthbuf_vertex>","\t#include <clipping_planes_vertex>","\t#include <fog_vertex>","}"].join("\n"),_=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>","uniform vec3 outlineColor;","uniform float outlineAlpha;","void main() {","\t#include <clipping_planes_fragment>","\t#include <logdepthbuf_fragment>","\tgl_FragColor = vec4( outlineColor, outlineAlpha );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","\t#include <premultiplied_alpha_fragment>","}"].join("\n");function x(E){const P=function C(E){let P=f[E.uuid];return void 0===P&&(P={material:new Ia({type:"OutlineEffect",uniforms:gI.merge([rn.fog,rn.displacementmap,v]),vertexShader:y,fragmentShader:_,side:1}),used:!0,keepAlive:d,count:0},f[E.uuid]=P),P.used=!0,P.material}(E);return g[P.uuid]=E,function A(E,P){if("invisible"===E.name)return;const B=P.userData.outlineParameters;E.fog=P.fog,E.toneMapped=P.toneMapped,E.premultipliedAlpha=P.premultipliedAlpha,E.displacementMap=P.displacementMap,void 0!==B?(E.visible=!1!==P.visible&&(void 0===B.visible||B.visible),E.transparent=void 0!==B.alpha&&B.alpha<1||P.transparent,void 0!==B.keepAlive&&(f[P.uuid].keepAlive=B.keepAlive)):(E.transparent=P.transparent,E.visible=P.visible),(!0===P.wireframe||!1===P.depthTest)&&(E.visible=!1),P.clippingPlanes&&(E.clipping=!0,E.clippingPlanes=P.clippingPlanes,E.clipIntersection=P.clipIntersection,E.clipShadows=P.clipShadows),E.version=P.version}(P,E),P}function S(E){const P=E.geometry;let B=!1;return void 0!==E.geometry&&(B=!P.isBufferGeometry||void 0!==P.attributes.normal),!0===E.isMesh&&void 0!==E.material&&!0===B}function w(E){if(!1!==S(E)){if(Array.isArray(E.material))for(let P=0,B=E.material.length;P<B;P++)E.material[P]=x(E.material[P]);else E.material=x(E.material);m[E.uuid]=E.onBeforeRender,E.onBeforeRender=T}}function O(E){if(!1!==S(E)){if(Array.isArray(E.material))for(let P=0,B=E.material.length;P<B;P++)E.material[P]=g[E.material[P].uuid];else E.material=g[E.material.uuid];E.onBeforeRender=m[E.uuid]}}function T(E,P,B,V,Q){const j=g[Q.uuid];void 0!==j&&function M(E,P){const B=P.userData.outlineParameters;E.uniforms.outlineAlpha.value=P.opacity,void 0!==B&&(void 0!==B.thickness&&(E.uniforms.outlineThickness.value=B.thickness),void 0!==B.color&&E.uniforms.outlineColor.value.fromArray(B.color),void 0!==B.alpha&&(E.uniforms.outlineAlpha.value=B.alpha)),P.displacementMap&&(E.uniforms.displacementMap.value=P.displacementMap,E.uniforms.displacementScale.value=P.displacementScale,E.uniforms.displacementBias.value=P.displacementBias)}(Q,j)}this.render=function(E,P){let B,V=!1;if(void 0!==arguments[2]&&(console.warn("THREE.OutlineEffect.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),B=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.OutlineEffect.render(): the forceClear argument has been removed. Use .clear() instead."),V=arguments[3]),void 0!==B&&o.setRenderTarget(B),V&&o.clear(),!1===this.enabled)return void o.render(E,P);const Q=o.autoClear;o.autoClear=this.autoClear,o.render(E,P),o.autoClear=Q,this.renderOutline(E,P)},this.renderOutline=function(E,P){const B=o.autoClear,V=E.autoUpdate,Q=E.background,j=o.shadowMap.enabled;E.autoUpdate=!1,E.background=null,o.autoClear=!1,o.shadowMap.enabled=!1,E.traverse(w),o.render(E,P),E.traverse(O),function I(){let E;E=Object.keys(g);for(let P=0,B=E.length;P<B;P++)g[E[P]]=void 0;E=Object.keys(m);for(let P=0,B=E.length;P<B;P++)m[E[P]]=void 0;E=Object.keys(f);for(let P=0,B=E.length;P<B;P++){const V=E[P];!1===f[V].used?(f[V].count++,!1===f[V].keepAlive&&f[V].count>60&&delete f[V]):(f[V].used=!1,f[V].count=0)}}(),E.autoUpdate=V,E.background=Q,o.autoClear=B,o.shadowMap.enabled=j},this.autoClear=o.autoClear,this.domElement=o.domElement,this.shadowMap=o.shadowMap,this.clear=function(E,P,B){o.clear(E,P,B)},this.getPixelRatio=function(){return o.getPixelRatio()},this.setPixelRatio=function(E){o.setPixelRatio(E)},this.getSize=function(E){return o.getSize(E)},this.setSize=function(E,P,B){o.setSize(E,P,B)},this.setViewport=function(E,P,B,V){o.setViewport(E,P,B,V)},this.setScissor=function(E,P,B,V){o.setScissor(E,P,B,V)},this.setScissorTest=function(E){o.setScissorTest(E)},this.setRenderTarget=function(E){o.setRenderTarget(E)}}}class S3{constructor(o,a){this.names=o,this.selected=a}static builder(){return new S3([],"")}setNames(o){return this.names=o,this}setSelected(o){return this.selected=o,this}}class F9{constructor(o,a,c="",u=1,h=0,d=0){this.meshText=o,this.mesh=a,this.infoText=c,this.d=u,this.x=h,this.y=d}static builder(){return new F9(null,null)}setMeshText(o){return this.meshText=o,this}setMesh(o){return this.mesh=o,this}setInfoText(o){return this.infoText=o,this}setD(o){return this.d=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}}class w3{constructor(o,a,c,u){this.mesh=o,this.meshVisible=a,this.action=c,this.update=u}static builder(){return new w3(null,null,()=>{},()=>{})}setMesh(o){return this.mesh=o,this}setMeshVisible(o){return this.meshVisible=o,this}setAction(o){return this.action=o,this}setUpdate(o){return this.update=o,this}runAction(){return this.action(this),this}runUpdate(){return this.update(this),this}}let wyt=(()=>{class l extends s2{constructor(){super(...arguments),this.modelGenerator=new Cyt,this.renderer=null,this.camera=null,this.scene=null,this.light=null,this.logoMeshes=[],this.crossMeshes=[],this.cube=null,this.group=null,this.font=null,this.infoDelayed=[],this.frameId=null,this.config=null,this.raycaster=null,this.id2Mesh=new Map,this.infoObject=null,this.infoStartTime=0,this.infoAlphaTime=0,this.infoAlpha=0,this.infoAlphaIncrement=.001,this.infoAlphaFadeOutTime=5e3,this.effect=null,this.toonMaterial=null,this.particleLight=null,this.menuTextScaleTime=0,this.menuTextScale=1,this.menuTextScaleSpeed=.001,this.menuTextMesh=null,this.menuTextMeshes=[],this.menuTextMeshesUnderline=[],this.meshActions=[]}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}getFovInRadians(a,c){let d=15/a;return d<22&&(d=22),2*Math.atan2(d/2,c)}init(a){this.renderer=a,this.recreate()}recreate(){if(!this.renderer)return;this.menuTextMesh=null,this.menuTextMeshes=[],this.menuTextMeshesUnderline=[];let a=this.canvasWidth,c=this.canvasHeight;this.renderer.setSize(a,c),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputEncoding=ws,this.scene=new $w;let h=this.getFovInRadians(a/c,15);this.camera=new ho(h/Math.PI*180,a/c,.1,1e3),this.camera.position.z=15,this.camera.lookAt(this.scene.position),this.scene.add(this.camera),this.light=new KI(16777215),this.light.position.z=10,this.scene.add(this.light),this.particleLight=new Ki(new Z1(1,8,8),new Xs({color:16746632})),new A0e(16777215,2,50);const f=this.renderer.capabilities.isWebGL2?1028:1024,v=(new sn).setHSL(34/255,23/255,240/255),_=new Uint8Array(4);for(let C=0;C<=_.length;C++)_[C]=C/_.length*256;const b=new G1(_,_.length,1,f);b.needsUpdate=!0,this.toonMaterial=new x0e({color:v,gradientMap:b}),this.effect=new Syt(this.renderer,{defaultThickness:.005}),this.createCrossMeshes().forEach((C,x)=>{0==x&&(this.cube=C),this.scene.add(C),this.crossMeshes.push(C)}),this.getLogoText()&&this.scene.remove(...this.crossMeshes),this.createMenuMeshes().forEach((C,x)=>{this.scene.add(C)}),this.group=new V1,this.group.position.y=0,this.scene.add(this.group),this.font=this.appParamProvider(l.font3dParamName).font,this.font?this.onFontLoaded():(new vyt).load("./fonts/PonomarUnicode.ttf",x=>{this.appParamProvider(l.font3dParamName).font=this.font=new Vye(x),this.onFontLoaded()}),this.raycaster=new Dpt}onFontLoaded(){!this.font||this.config&&(this.modelGenerator.createText((a,c,u="",h=1,d=0,f=0)=>this.pushInfo(a,c,u,h,d,f),this.font,this.config,0,0,0,0,1,1-.8,.27,.6,Math.PI/8),this.createMenuText(),this.runPushInfoDelayed(),this.calculateMenuArrows(),this.recreateLogoText())}onMouseMove(a){}onMouseClick(a){this.onMouseClickDIrect(a)}onMouseClickDIrect(a){if(!this.raycaster)return;const c=new dt(this.incrementX(a.clientX)/this.canvasWidth*2-1,-this.incrementY(a.clientY)/this.canvasHeight*2+1);this.raycaster.setFromCamera(c,this.camera);let u=[];this.id2Mesh.forEach((m,v,y)=>{u.push(m)});let h=this.scene.children.filter(m=>this.id2Mesh.has(m.uuid));const d=this.raycaster.intersectObjects(h,!1);let f="",p=!1;if(d.length>0){let m=d[0].object;p="\u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e"==m.userData.text,f=m.uuid}let g=this.meshActions.find(m=>{var v;return(null===(v=m.mesh)||void 0===v?void 0:v.uuid)==f});if(p)this.runMenuItemAction();else if(g)g.runAction();else if(f){let m=d[0].object;m.material.wireframe=!m.material.wireframe,m.material.opacity=this.infoAlpha=0;const v=new Date;this.infoStartTime=this.infoAlphaTime=v.getTime(),this.id2Mesh.forEach((y,_,b)=>{y.visible=!1}),this.id2Mesh.forEach((y,_,b)=>{_==f&&(y.visible=!0,this.infoObject=y)})}}onResize(){const a=this.canvasWidth,c=this.canvasHeight;this.camera.aspect=a/c,this.camera.updateProjectionMatrix(),this.renderer.setSize(a,c)}render(){if(this.frameId=requestAnimationFrame(()=>{this.render()}),this.camera&&(this.camera.fov=180/Math.PI*this.getFovInRadians(this.canvasWidth/this.canvasHeight,this.camera.position.z)),this.group&&this.cube&&(this.group.rotation.y=this.cube.rotation.y),this.infoObject){let u=this.infoObject;const h=new Date;let d=this.infoAlphaTime?h.getTime()-this.infoAlphaTime:0;this.infoAlphaTime=h.getTime(),this.infoAlpha+=d*this.infoAlphaIncrement*(this.infoAlphaTime-this.infoStartTime>this.infoAlphaFadeOutTime?-1:1),this.infoAlpha<0&&(this.infoAlpha=0),this.infoAlpha>1&&(this.infoAlpha=1),u.material.opacity=this.infoAlpha,this.infoAlphaTime-this.infoStartTime>this.infoAlphaFadeOutTime&&0==this.infoAlpha&&(this.infoObject.visible=!1,this.infoObject=null)}this.calculateMenuTextScale();const a=25e-5*Date.now();this.particleLight.position.x=13*Math.sin(7*a)/2,this.particleLight.position.y=14*Math.cos(5*a)/2,this.particleLight.position.z=13*Math.cos(3*a)/2,this.effect?this.effect.render(this.scene,this.camera):this.renderer.render(this.scene,this.camera)}getMenuItems(){let a=this.getParam("\u043f\u0443\u043d\u043a\u0442\u044b");return null==a&&(a=S3.builder().setNames(["\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a","\u041a\u043d\u0438\u0433\u0438","\u041f\u0440\u0438\u043c\u0435\u0440\u044b 3D"]).setSelected("")),a}getLogoText(){var a;let c=null===(a=this.menuTextMesh)||void 0===a?void 0:a.userData.text;if(!c){let u=this.getMenuItems();c=u.selected,!c&&u.names.length>0&&(c=u.names[0])}return this.appLogoTextProvider(c||"")}recreateLogoText(){var a,c,u;null===(a=this.scene)||void 0===a||a.remove(...this.logoMeshes),this.logoMeshes=[],this.getLogoText()?(this.getLogoText()&&(null===(u=this.scene)||void 0===u||u.remove(...this.crossMeshes)),this.createLogoText()):null===(c=this.scene)||void 0===c||c.add(...this.crossMeshes)}createLogoText(){let c=this.getLogoText().split("|"),h=10/3,d=this.addLogoText(c[0],0,h);this.addLogoText(c[1],0,h-1.5*d),((m,v,y=!0)=>{var _;const b=this.toonMaterial?this.toonMaterial:new Xs({color:16777215});let C=new Ki(m,b);m.computeBoundingBox(),null===(_=this.scene)||void 0===_||_.add(C),this.logoMeshes.push(C),C.visible=y,C.userData={material:b,text:v}})(this.modelGenerator.createRect(1,new te(-5,h-d+.25,0),10,.5),"\u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043b\u0438\u043d\u0438\u044f",!0)}createMenuText(){let a=this.getMenuItems();a.names.forEach((c,u,h)=>this.addMenuText(c,c==a.selected||!!a.selected&&!this.menuTextMesh&&u+1==h.length||!a.selected&&0==u))}addLogoText(a,c,u){var h;let f=2.5,p=this.modelGenerator.createTextDirect(this.font,a,f,new te(c,u-f/2,0),zi.Middle);if(p.geometry.boundingBox){let g=p.geometry.boundingBox.max.x-p.geometry.boundingBox.min.x;if(g>10){let m=10/g;p.scale.set(m,m,m),f*=m,p.position.set(c-g*m/2,u-f/2,0)}}return null===(h=this.scene)||void 0===h||h.add(p),this.logoMeshes.push(p),p.visible=!0,p.userData={text:a},f}addMenuText(a,c){var u;let w=this.modelGenerator.createTextDirect(this.font,a,2.4,new te(0,-10.066666666666666,0),zi.Middle);null===(u=this.scene)||void 0===u||u.add(w),this.menuTextMeshes.push(w),w.visible=!1,w.userData={text:a},!this.menuTextMesh&&c&&(this.menuTextMesh=w,this.menuTextMesh.visible=!0)}calculateMenuTextScale(){if(!this.menuTextMesh)return;let m=.26666666666666666,_=(new Date).getTime(),b=this.menuTextScaleTime?_-this.menuTextScaleTime:0;if(this.menuTextScaleTime=_,this.menuTextMesh.geometry.boundingBox){let C=this.menuTextMesh.geometry.boundingBox.max.x-this.menuTextMesh.geometry.boundingBox.min.x;if(C>10-2*m){let x=(10-2*m)/C,S=x-this.menuTextScale,w=b*this.menuTextScaleSpeed*(S<0?-1:1);Math.abs(S)<Math.abs(w)?this.menuTextScale=x:this.menuTextScale+=w}else{let S=2.4/(this.menuTextMesh.geometry.boundingBox.max.y-this.menuTextMesh.geometry.boundingBox.min.y),w=S-this.menuTextScale,O=b*this.menuTextScaleSpeed*(w<0?-1:1);Math.abs(w)<Math.abs(O)?this.menuTextScale=S:this.menuTextScale+=O}this.menuTextMesh.position.x=(-C/2-this.menuTextMesh.geometry.boundingBox.min.x)*this.menuTextScale,this.menuTextMesh.position.y=-9.666666666666666}this.menuTextMesh.scale.set(this.menuTextScale,this.menuTextScale,this.menuTextScale)}createMenuMeshes(){let c=10/15,p=0,g=-5-4*c,m=2*c,v=4*c,y=[];const b=new Xs({color:16777215,wireframe:!0});let C=(w,O,T=!0)=>{const M=this.toonMaterial?this.toonMaterial:new Xs({color:16777215});let A=new Ki(w,M);return w.computeBoundingBox(),y.push(A),A.visible=T,A.userData={material:M,materialWireframe:b,text:O},this.pushInfoDelayed(A,null,O,c,0,7.666666666666666),A};p=-5,C(this.modelGenerator.createRect(1,new te(p,g,0),10,v),"\u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e",!1);let x=v/10,S=v/10;return this.getMenuItems().names.forEach((w,O,T)=>{let A=(10-x)/T.length;this.menuTextMeshesUnderline.push(C(this.modelGenerator.createRect(1,new te(p+A*O+x,g-v+S,0),A-x,S),"\u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e"))}),C(this.modelGenerator.createLeftArrow(-1,new te(p,g,0),m,v),"\u043c\u0435\u043d\u044e \u0432\u043b\u0435\u0432\u043e"),p=5,C(this.modelGenerator.createLeftArrow(1,new te(p,g,0),m,v),"\u043c\u0435\u043d\u044e \u0432\u043f\u0440\u0430\u0432\u043e"),y}createCrossMeshes(){let c=10/15,u=this.modelGenerator.createConfig().setWidth(10).setHeight(10).setDelta(c);this.config=u;let p=5+4*c;new Xs({color:0,wireframe:!0,transparent:!0});let v=this.modelGenerator.createCrossParts(u,0,0,0,0,1,1-.8,.27,.6,Math.PI/8).map(_=>{const b=new Ai;b.setAttribute("position",new Ts(new Float32Array(_.vertexes.toPlainArray()),3)),b.setAttribute("normal",new Ts(new Float32Array(_.vertexes.toPlainArray(Qf.Normals)),3)),b.setAttribute("uv",new Ts(new Float32Array(_.vertexes.toPlainArray(Qf.UV)),2)),b.computeBoundingBox();const C=this.toonMaterial?this.toonMaterial:new Xs({color:16777215}),x=new Ki(b,C);return this.pushInfoDelayed(x,null,_.name,c,0,p),x}),y=(_,b)=>{const C=this.toonMaterial?this.toonMaterial:new Xs({color:16777215});let x=new Ki(_,C);_.computeBoundingBox(),v.push(x),this.pushInfoDelayed(x,null,b,c,0,p)};return y(this.modelGenerator.createTrost(u,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),y(this.modelGenerator.createTri1(1,u,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),y(this.modelGenerator.createTri2(1,u,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),y(this.modelGenerator.createKopie(u,-1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),y(this.modelGenerator.createTri1(-1,u,1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),y(this.modelGenerator.createTri2(-1,u,1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),y(this.modelGenerator.createTrostNakonechnik(1,u,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),y(this.modelGenerator.createKopieNakonechnik(-1,u,1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),y(this.modelGenerator.createSkull(-1,u,1,1-.8,.27,.6,Math.PI/8),"\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430"),v}pushInfoDelayed(a,c,u="",h=1,d=0,f=0){this.infoDelayed.push(F9.builder().setMeshText(a).setMesh(c).setInfoText(u).setD(h).setX(d).setY(f))}runPushInfoDelayed(){this.infoDelayed.forEach(a=>{a.meshText&&this.pushInfo(a.meshText,a.mesh,a.infoText,a.d,a.x,a.y)}),this.infoDelayed=[]}pushInfo(a,c,u="",h=1,d=0,f=0){var p,g,m;if(u&&(c=this.modelGenerator.createTextDirect(this.font,u,h,new te(d,f,0),zi.Middle)),!c)return;u||(null===(p=this.scene)||void 0===p||p.add(a),this.crossMeshes.push(a)),c.visible=!1,null===(g=this.scene)||void 0===g||g.add(c),this.crossMeshes.push(c);let v=a.geometry.boundingBox,y=J1.builder();y.addPlaneXY(new te(v.min.x,v.max.y,v.min.z),v.max.x-v.min.x,v.max.y-v.min.y);let _=new Ai;_.setAttribute("position",new Ts(new Float32Array(y.toPlainArray()),3));const b=new Xs({color:16777215,wireframe:!1});let C=new Ki(_,b);null===(m=this.scene)||void 0===m||m.add(C),C.position.add(a.position),C.visible=!1,C.userData={text:u},this.id2Mesh.set(C.uuid,c),"\u043c\u0435\u043d\u044e \u0432\u043b\u0435\u0432\u043e"==u&&this.meshActions.push(w3.builder().setMesh(C).setMeshVisible(a).setAction(()=>this.onPrevMenu()).setUpdate(S=>{if(this.menuTextMesh){let w=this.menuTextMeshes.indexOf(this.menuTextMesh);S.meshVisible&&(S.meshVisible.visible=this.menuTextMeshes.length>1,this.setMeshMaterial(0==w,S.meshVisible))}})),"\u043c\u0435\u043d\u044e \u0432\u043f\u0440\u0430\u0432\u043e"==u&&this.meshActions.push(w3.builder().setMesh(C).setMeshVisible(a).setAction(()=>this.onNextMenu()).setUpdate(S=>{if(this.menuTextMesh){let w=this.menuTextMeshes.indexOf(this.menuTextMesh);S.meshVisible&&(S.meshVisible.visible=this.menuTextMeshes.length>1,this.setMeshMaterial(w+1==this.menuTextMeshes.length,S.meshVisible))}}))}setMeshMaterial(a,c){a?c.material=c.userData.materialWireframe:c&&(c.material=c.userData.material)}calculateMenuArrows(){let a=this.menuTextMeshes.indexOf(this.menuTextMesh);this.menuTextMeshesUnderline.forEach((c,u)=>{this.setMeshMaterial(u!=a,c)}),this.meshActions.forEach(c=>c.runUpdate())}onPrevMenu(){let a=this.menuTextMeshes.indexOf(this.menuTextMesh);a>0&&(--a,this.menuTextMesh&&(this.menuTextMesh.visible=!1),this.menuTextMesh=this.menuTextMeshes[a],this.menuTextMesh.visible=!0,this.calculateMenuArrows(),this.recreateLogoText())}onNextMenu(){let a=this.menuTextMeshes.indexOf(this.menuTextMesh);a+1<this.menuTextMeshes.length&&(++a,this.menuTextMesh&&(this.menuTextMesh.visible=!1),this.menuTextMesh=this.menuTextMeshes[a],this.menuTextMesh.visible=!0,this.calculateMenuArrows(),this.recreateLogoText())}runMenuItemAction(){var a;let c=null===(a=this.menuTextMesh)||void 0===a?void 0:a.userData.text;this.runAction(c)}}return l.font3dParamName="font3d",l})(),N9=(()=>{class l{constructor(a,c,u){this.uiConfig=a,this.config=c,this.router=u}onLoginCommand(a){let c=a;this.config.setShowNormal(),this.config.defaultApplication=c.id,this.uiConfig.ui.lastLoginApp.setStringValue(c.id);let u=pageRequestedRoute||this.uiConfig.ui.defaultAppRoute.getStringValue();pageRequestedRoute="",c.routes.find(h=>h.link==u)||(u=c.routes[0].link),this.uiConfig.ui.defaultAppRoute.setStringValue(u),this.uiConfig.setAppRoutes(null),this.router.navigate([u])}autoLogin(){let a=pageRequestedApp||this.uiConfig.ui.lastLoginApp.getStringValue(),c=this.config.environment.applications.filter(h=>h.applicationEnabled);if(!a&&1!=c.length)return;let u=null;c.forEach((h,d,f)=>{h.id==a&&(u=h)}),null==u&&1==c.length&&c.forEach((h,d,f)=>{u=h}),pageRequestedApp="",null!=u&&this.onLoginCommand(u)}}return l.\u0275fac=function(a){return new(a||l)(Ae(Xn),Ae(an),Ae(Ps))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();const Tyt=["myCanvas"];function Oyt(l,o){if(1&l){const a=gt();D(0,"button",6),ee("click",function(){return Le(a),Z(2).routeToV1()}),ne(1,"v1"),k()}}function Dyt(l,o){if(1&l){const a=gt();D(0,"div",4),Y(1,Oyt,2,0,"button",5),D(2,"button",6),ee("click",function(){return Le(a),Z().routeToLogo()}),ne(3,"2D"),k(),k()}if(2&l){const a=Z();R(1),F("ngIf",a.config.showOldVersions)}}class L9 extends s2{constructor(o,a,c){super(),this.scene=o,this.initialized=a,this.name=c}static builder(){return new L9(null,!1,"")}setScene(o){return this.scene=o,this}setInitialized(o){return this.initialized=o,this}setName(o){return this.name=o,this}get canvasWidth(){return this.scene?this.scene.canvasWidth:this.iCanvasWidth}get canvasHeight(){return this.scene?this.scene.canvasHeight:this.iCanvasHeight}get canvasPercentage(){return this.scene?this.scene.canvasPercentage:this.iPercentage}setWidthPixelIncrement(o){var a;return null===(a=this.scene)||void 0===a||a.setWidthPixelIncrement(o),super.setWidthPixelIncrement(o)}setHeightPixelIncrement(o){var a;return null===(a=this.scene)||void 0===a||a.setHeightPixelIncrement(o),super.setHeightPixelIncrement(o)}setXPixelIncrement(o){var a;return null===(a=this.scene)||void 0===a||a.setXPixelIncrement(o),super.setXPixelIncrement(o)}setYPixelIncrement(o){var a;return null===(a=this.scene)||void 0===a||a.setYPixelIncrement(o),super.setYPixelIncrement(o)}setCanvasWidth(o){var a;return null===(a=this.scene)||void 0===a||a.setCanvasWidth(o),super.setCanvasWidth(o)}setCanvasHeight(o){var a;return null===(a=this.scene)||void 0===a||a.setCanvasHeight(o),super.setCanvasHeight(o)}setPercentage(o){var a;return null===(a=this.scene)||void 0===a||a.setPercentage(o),super.setPercentage(o)}setLight(o){var a;return null===(a=this.scene)||void 0===a||a.setLight(o),super.setLight(o)}setActionHandler(o){var a;return null===(a=this.scene)||void 0===a||a.setActionHandler(o),super.setActionHandler(o)}setParam(o,a){var c;return null===(c=this.scene)||void 0===c||c.setParam(o,a),super.setParam(o,a)}setAppLogoTextProvider(o){var a;return null===(a=this.scene)||void 0===a||a.setAppLogoTextProvider(o),super.setAppLogoTextProvider(o)}setAppParamProvider(o){var a;return null===(a=this.scene)||void 0===a||a.setAppParamProvider(o),super.setAppParamProvider(o)}dispose(){var o;this.initialized&&(null===(o=this.scene)||void 0===o||o.dispose(),this.initialized=!1)}init(o){var a;null===(a=this.scene)||void 0===a||a.init(o),this.initialized=!0}onMouseMove(o){var a;this.initialized&&(null===(a=this.scene)||void 0===a||a.onMouseMove(o))}onMouseClick(o){var a;this.initialized&&(null===(a=this.scene)||void 0===a||a.onMouseClick(o))}onResize(){var o;this.initialized&&(null===(o=this.scene)||void 0===o||o.onResize())}render(){var o;null===(o=this.scene)||void 0===o||o.render()}}let zye=(()=>{class l{constructor(a,c,u,h,d){this.uiConfig=a,this.config=c,this.renderer2=u,this.themesSvc=h,this.autoLoginSvc=d,this.running=!1,this.canvas=null,this.renderer=null,this.fullScreen=!1,this.allScenes=[],this.sceneIndex=-1,this.requestedSceneName="\u041a\u0440\u0435\u0441\u0442",this.iRequestedCanvasWidth=90,this.iRequestedCanvasHeight=100,this.iRequestedPercentage=!0,this.enabled=!0,this.sName="",this.scenes="\u041a\u0440\u0435\u0441\u0442"}set scenes(a){let c=a.split(",");0==c.length&&(c=["\u041a\u0440\u0435\u0441\u0442"]),this.allScenes=[],c.forEach(u=>{let h=L9.builder().setName(u);switch(u){default:case"\u041a\u0443\u0431":h.setScene(new Bpt);break;case"\u0418\u043a\u043e\u0441\u0430\u0445\u0435\u0434\u0440\u043e\u043d":h.setScene(new Vpt);break;case"\u0421\u0432\u0435\u0447\u0435\u043d\u0438\u0435":h.setScene(new Qpt);break;case"\u041a\u0440\u0435\u0441\u0442":h.setScene(new wyt)}this.allScenes.push(h)})}get scene(){return this.sceneIndex<0||this.sceneIndex>=this.allScenes.length?null:this.allScenes[this.sceneIndex]}get sceneName(){return this.sceneIndex<0||this.sceneIndex>=this.allScenes.length?this.requestedSceneName:this.allScenes[this.sceneIndex].name}set sceneName(a){this.renderer?this.selectSceneByName(a):this.requestedSceneName=a}get requestedCanvasWidth(){return this.iRequestedCanvasWidth}set requestedCanvasWidth(a){this.iRequestedCanvasWidth=a;let c=this.scene;c&&c.dispose()}get requestedCanvasHeight(){return this.iRequestedCanvasHeight}set requestedCanvasHeight(a){this.iRequestedCanvasHeight=a;let c=this.scene;c&&c.dispose()}get requestedPercentage(){return this.iRequestedPercentage}set requestedPercentage(a){this.iRequestedPercentage=a;let c=this.scene;c&&c.dispose()}selectScene(a){var c;a>=0&&a<this.allScenes.length&&a!=this.sceneIndex&&(null===(c=this.scene)||void 0===c||c.dispose(),this.sceneIndex=a,this.config.post(()=>{this.render()}))}selectSceneByName(a){let c=this.allScenes.findIndex(u=>u.name==a);this.selectScene(c)}set name(a){this.sName=a}get name(){return this.sName}onResize(){var a;null===(a=this.scene)||void 0===a||a.onResize()}onMouseMove(a){var c;null===(c=this.scene)||void 0===c||c.onMouseMove(a)}onMouseClick(a){var c;a.ctrlKey?this.selectScene((this.sceneIndex+1)%this.allScenes.length):null===(c=this.scene)||void 0===c||c.onMouseClick(a)}ngOnInit(){this.fullScreen&&this.addOverflowClass(),this.uiConfig.check(()=>{this.config.autoLoginApplication&&this.fullScreen&&this.autoLoginSvc.autoLogin()}),this.running=!0}ngOnDestroy(){var a;this.fullScreen&&this.removeOverflowClass(),null===(a=this.scene)||void 0===a||a.dispose(),this.canvas=null,this.running=!1}addOverflowClass(){this.renderer2.addClass(document.body,"overflowHidden")}removeOverflowClass(){this.renderer2.removeClass(document.body,"overflowHidden")}routeToV1(){window.location.href="./v1"}routeToLogo(){this.config.requestLogin3d(!1),this.config.setShowLogin(!1)}ngAfterViewInit(){this.canvas=this.myCanvasRef.nativeElement,this.canvas&&(this.renderer=new Fme({canvas:this.canvas,alpha:!0,antialias:!0}),this.config.post(()=>{this.selectSceneByName(this.requestedSceneName)}))}render(){var a,c,u,h,d;if(!this.running)return null===(a=this.scene)||void 0===a||a.dispose(),void(this.sceneIndex=-1);!(null===(c=this.scene)||void 0===c?void 0:c.initialized)&&this.renderer&&(!this.fullScreen&&this.canvas&&(null===(u=this.scene)||void 0===u||u.setCanvasWidth(this.requestedCanvasWidth).setCanvasHeight(this.requestedCanvasHeight).setPercentage(this.requestedPercentage).setHeightPixelIncrement(-60).setYPixelIncrement(-60)),null===(h=this.scene)||void 0===h||h.setLight(this.themesSvc.nowIsDay()).setParam("\u043f\u0443\u043d\u043a\u0442\u044b",this.getMenuItems()).setActionHandler(f=>this.runMenuItemClick(f)).setAppLogoTextProvider(f=>{let p=this.config.getApplicationByNameOrNull(f);return p||(p=this.config.getSingleAppOrNull()),p||(p=this.config.getApplication()),p?p.applicationLogoText:""}).setAppParamProvider(f=>this.uiConfig.getAppParam(f)).init(this.renderer)),null===(d=this.scene)||void 0===d||d.render()}getMenuItems(){let a=this.config.environment.applications.filter(h=>h.applicationEnabled&&!h.applicationHidden).map(h=>h.name),c=this.uiConfig.ui.lastLoginApp.getStringValue(),u=this.config.environment.applications.find(h=>h.id==c);return S3.builder().setNames(a).setSelected(u?u.name:"")}runMenuItemClick(a){let c=this.config.environment.applications.find(u=>u.name==a);c?this.autoLoginSvc.onLoginCommand(c):console.log(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435: "${a}".`)}getLogoText(){let a=this.config.getSingleAppOrNull();return null==a&&(a=this.config.getApplication()),a?a.applicationLogoText:""}}return l.\u0275fac=function(a){return new(a||l)(L(Xn),L(an),L(yi),L(Mo),L(N9))},l.\u0275cmp=qe({type:l,selectors:[["app-three-logo"]],viewQuery:function(a,c){if(1&a&&ai(Tyt,5),2&a){let u;Vt(u=zt())&&(c.myCanvasRef=u.first)}},hostBindings:function(a,c){1&a&&ee("resize",function(h){return c.onResize(h.target)},!1,Lb)("mousemove",function(h){return c.onMouseMove(h)},!1,Lb)("click",function(h){return c.onMouseClick(h)},!1,Lb)},inputs:{fullScreen:"fullScreen",scenes:"scenes",requestedSceneName:"requestedSceneName",sceneName:"sceneName",requestedCanvasWidth:"requestedCanvasWidth",requestedCanvasHeight:"requestedCanvasHeight",requestedPercentage:"requestedPercentage",enabled:"enabled",name:"name"},decls:4,vars:1,consts:[["class","flyout",4,"ngIf"],[1,"container","bgColor","fade-in-3"],[1,"centeredCanvas"],["myCanvas",""],[1,"flyout"],["class","btn btn-link btn-block whiteBtn fade-in-3",3,"click",4,"ngIf"],[1,"btn","btn-link","btn-block","whiteBtn","fade-in-3",3,"click"]],template:function(a,c){1&a&&(Y(0,Dyt,4,1,"div",0),D(1,"div",1),me(2,"canvas",2,3),k()),2&a&&F("ngIf",c.fullScreen)},directives:[yn],styles:[".centeredCanvas[_ngcontent-%COMP%]{padding:0;margin:auto;display:block;width:90vw}.flyout[_ngcontent-%COMP%]{position:fixed;z-index:999;top:0;right:0;width:85px;height:35px;background:none;transition:all .3s ease-in-out}.whiteBtn[_ngcontent-%COMP%]{color:#fff!important}.container[_ngcontent-%COMP%]{width:100%}"]}),l})(),kyt=(()=>{class l{constructor(a){this.uiConfig=a,this.scenes="\u041a\u0440\u0435\u0441\u0442,\u041a\u0443\u0431,\u0418\u043a\u043e\u0441\u0430\u0445\u0435\u0434\u0440\u043e\u043d,\u0421\u0432\u0435\u0447\u0435\u043d\u0438\u0435"}ngOnInit(){this.uiConfig.setAppRoutes(null)}ngAfterViewInit(){}}return l.\u0275fac=function(a){return new(a||l)(L(Xn))},l.\u0275cmp=qe({type:l,selectors:[["app-d3d-examples"]],decls:2,vars:6,consts:[[3,"fullScreen","sceneName","requestedCanvasWidth","requestedCanvasHeight","requestedPercentage","scenes"]],template:function(a,c){1&a&&(D(0,"div"),me(1,"app-three-logo",0),k()),2&a&&(R(1),F("fullScreen",!1)("sceneName","\u041a\u0440\u0435\u0441\u0442")("requestedCanvasWidth",100)("requestedCanvasHeight",100)("requestedPercentage",!0)("scenes",c.scenes))},directives:[zye],styles:[""]}),l})();function Myt(l,o){if(1&l){const a=gt();D(0,"button",2),ee("click",function(){return Le(a),Z().routeToV1()}),ne(1,"v1"),k()}}let Uye=(()=>{class l{constructor(a,c,u,h){this.router=a,this.autologinSvc=c,this.config=u,this.uiConfig=h,this.logoData=ou.builder()}ngOnInit(){let a=this.config.getSingleAppOrNull();null==a&&(a=this.config.getApplication()),this.logoData=this.newLogoData(a?a.applicationLogoText:""),this.uiConfig.check(()=>{this.config.autoLoginApplication&&this.autologinSvc.autoLogin()})}newLogoData(a){return ou.builder().setSvgWidth(512).setSvgHeight(512).setLogoText(a).setGenName(a?"NoLogo":"Logo").setScene(a?"/scenes/name.logo.scene.txt":"/scenes/cross.scene.txt")}navigateTo(a,c){this.uiConfig.ui.defaultAppRoute.setStringValue(c),this.uiConfig.setAppRoutes(null),this.router.navigate([c])}isActive(a){return this.router.isActive(a,!1)}onLoginCommand(a){this.autologinSvc.onLoginCommand(a)}onPreviewCommand(a){this.logoData=this.newLogoData(a?a.applicationLogoText:"")}routeToV1(){window.location.href="./v1"}routeTo3D(){this.config.requestLogin3d(!0),this.config.setShowLogin(!1)}}return l.\u0275fac=function(a){return new(a||l)(L(Ps),L(N9),L(an),L(Xn))},l.\u0275cmp=qe({type:l,selectors:[["app-login"]],decls:9,vars:7,consts:[[1,"flyout"],["class","btn btn-link btn-block whiteBtn fade-in-3",3,"click",4,"ngIf"],[1,"btn","btn-link","btn-block","whiteBtn","fade-in-3",3,"click"],[1,"main-container","bgColor","wh100"],[1,"content-container","centeredImage"],[1,"h80",3,"svgWidth","svgHeight","data"],[1,"login-footer"],[3,"svgWidth","svgHeight","genName","onCommand","onPreviewCommand"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,Myt,2,0,"button",1),D(2,"button",2),ee("click",function(){return c.routeTo3D()}),ne(3,"3d"),k(),k(),D(4,"div",3),D(5,"div",4),me(6,"app-svg-js-image",5),k(),D(7,"div",6),D(8,"app-svg-js-image",7),ee("onCommand",function(h){return c.onLoginCommand(h)})("onPreviewCommand",function(h){return c.onPreviewCommand(h)}),k(),k(),k()),2&a&&(R(1),F("ngIf",c.config.showOldVersions),R(5),F("svgWidth",512)("svgHeight",512)("data",c.logoData),R(2),F("svgWidth",512)("svgHeight",128)("genName","Menu"))},directives:[yn,mc],styles:[".login-footer[_ngcontent-%COMP%]{height:20vh;padding-top:0;padding-bottom:5vh;padding-left:0}.centeredImage[_ngcontent-%COMP%]{top:0;bottom:0;left:0;right:0;max-width:100%;max-height:100%;margin:auto;overflow:auto}.wh100[_ngcontent-%COMP%]{width:100vw;height:100vh}.h80[_ngcontent-%COMP%]{height:75vh;width:75vh}flyout-toggle[_ngcontent-%COMP%]{position:absolute;transform:rotate(90deg);top:50%;left:-50px;z-index:998;width:85px;height:35px;font-size:13px;background:#92C7B8;border:solid #fff 1px}.flyout[_ngcontent-%COMP%]{position:fixed;z-index:999;top:0;right:0;width:85px;height:35px;background:none;transition:all .3s ease-in-out}.whiteBtn[_ngcontent-%COMP%]{color:#fff!important}"]}),l})(),Eyt=(()=>{class l{constructor(a,c,u,h){this.router=a,this.config=c,this.uiConfig=u,this.themesSvc=h,this.dynMenuData=Kp.builder().setWhiteBack(!1).setMenuState($p.builder().addCommand(Ca.builder().setName("\u0414\u0435\u0432\u0438\u0441\u043a\u0438\u043d")).setGenName("MenuDay")),this.menuLinksOld=null,this.light=!0}ngOnInit(){this.light=this.themesSvc.nowIsDay(),this.dynMenuData=Kp.builder().setWhiteBack(!1).setMenuState($p.builder().addCommand(Ca.builder().setName("\u0414\u0435\u0432\u0438\u0441\u043a\u0438\u043d")).setGenName(this.light?"MenuDay":"MenuNight2")).setOnClick(this.getOnOk()),this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes([])},0)}ngOnDestroy(){this.menuLinksOld&&(this.menuLinksOld.unsubscribe(),this.menuLinksOld=null)}get version(){return this.config.environment.version}getOnOk(){return()=>this.onOk()}onOk(){this.config.post(()=>{this.config.setShowLogin(!1)})}}return l.\u0275fac=function(a){return new(a||l)(L(Ps),L(an),L(Xn),L(Mo))},l.\u0275cmp=qe({type:l,selectors:[["app-about"]],decls:4,vars:5,consts:[[1,"ftext","fade-in-3","pad","fullHeight","bgColor"],[3,"genName","svgWidth","svgHeight","type"],[3,"data"]],template:function(a,c){1&a&&(D(0,"div",0),D(1,"div"),me(2,"app-svg-js-image",1),me(3,"app-dynamic-menu",2),k(),k()),2&a&&(R(2),F("genName",c.light?"LogoLight":"LogoDark")("svgWidth",512)("svgHeight",512)("type",0),R(1),F("data",c.dynMenuData))},directives:[mc,HM],styles:[".pad[_ngcontent-%COMP%]{padding:1em}.fullHeight[_ngcontent-%COMP%]{height:calc(100vh - 60px)}"]}),l})(),Ayt=(()=>{class l{constructor(a){this.router=a,this.logText=["\u041c\u043e\u043b\u0435\u0431\u0435\u043d"].join(", "),this.extraPages=[],this.horizontalPagesCount=2,this.verticalPagesCount=2}ngOnInit(){}onPagesCount(a){this.extraPages=[];let c=this.horizontalPagesCount*this.verticalPagesCount,u=a-c,h=0;for(;u>0;)u=Math.max(0,u-c),h+=c,this.extraPages.push(h)}}return l.\u0275fac=function(a){return new(a||l)(L(Ps))},l.\u0275cmp=qe({type:l,selectors:[["app-main"]],decls:2,vars:9,consts:[[1,"pageBreak"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount","pagesCount"]],template:function(a,c){1&a&&(D(0,"div",0),D(1,"app-svg-js-image",1),ee("pagesCount",function(h){return c.onPagesCount(h)}),k(),k()),2&a&&(R(1),F("svgWidth",210)("svgHeight",297)("scene","/scenes/parser.scene.txt")("genName","Js")("logoText",c.logText)("type",1)("startPageIndex",0)("horizontalPagesCount",c.horizontalPagesCount)("verticalPagesCount",c.verticalPagesCount))},directives:[mc],styles:[".h512[_ngcontent-%COMP%]{width:210px;height:297px;margin:auto}.centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}"]}),l})();function Iyt(l,o){if(1&l&&(D(0,"div"),me(1,"app-add-component",2),k()),2&l){const a=o.$implicit;R(1),F("component",a)}}let Pyt=(()=>{class l extends Yp{constructor(a,c,u){super(a,c,u),this.appBookName="\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 APP_CLC",this.appBookChapter="1",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.helpChapterNormal="1",this.helpChapterConfidential="2",this.errorsData=rh.builder(),this.addMenuLink(qn.builder().setLink("#").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setShape("calculator").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(qn.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(qn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}getUIVisited(){return this.uiConfig.ui.visitedCalculatorHelp}getUIBook(){return this.uiConfig.ui.calculatorBook}getUIChapter(){return this.uiConfig.ui.calculatorChapter}getUILine(){return this.uiConfig.ui.calculatorLine}isSettings(){var a;return!(this.components.length<=0)&&(null===(a=this.components[0].data.component)||void 0===a?void 0:a.data)instanceof sh}isComponent(a,c=""){var u;if(this.components.length<=0)return!1;let d=null===(u=this.components[0].data.component)||void 0===u?void 0:u.data;return(null==d?void 0:d.text)==a&&(!c||(null==d?void 0:d.link.chapter)==c)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let a=this.getUIBook().getStringValue(),c=this.getUIChapter().getStringValue(),u=this.getUILine().getNumberValue();a?this.routeTo(a,c,u):this.resetDelayed(this.appBookChapter)}}resetDelayed(a){this.config.post(()=>{this.reset(a)})}reset(a){this.routeTo(this.appBookName,a,1)}routeToHelpDelayed(a){this.config.post(()=>{this.routeToHelp(a)})}routeToHelp(a){this.isComponent(this.helpBookName,a)&&a===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,a,1)}routeToDelayed(a,c="",u=-1){this.config.post(()=>{this.routeTo(a,c,u)})}routeTo(a,c="",u=-1){let h=a;if(h){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==h)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==h||h==this.helpBookName&&""==c&&u<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==c&&(c="1"),u<0&&(u=1),this.getUIBook().setStringValue(h),this.getUIChapter().setStringValue(c),this.getUILine().setNumberValue(u),this.setComponentsDelayed([new Vn(Vl,lo.builder().setComponent(new Vn(pu,Rl.builder().setText(h).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!0).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Pl.builder().setBookName(h).setChapter(c).setStartLine(u).setEndLine(1e3).setOnRoute(d=>{d?this.routeToDelayed(d.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(a){this.config.post(()=>{this.components=a})}clearErrors(){this.errorsData.setErrors([])}setErrors(a){this.errorsData.setErrors(a).updateClasses(c=>c.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new Vn(Vl,lo.builder().setComponent(new Vn(N_,sh.builder().updateClasses(a=>a.setCalculatorSettings(!0)))))])}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(nh))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-calculator"]],features:[pn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,Iyt,2,1,"div",1),k()),2&a&&(R(1),F("ngForOf",c.components))},directives:[_i,_c],styles:[""]}),l})(),Ryt=(()=>{class l{constructor(a,c){this.uiConfig=a,this.config=c,this.generator=new FM,this.solving=!1,this.codemirrorData=zS.builder(),this.logText="",this.svgData=ou.builder().setScene("/scenes/compiler.page.scene.txt").setGenName("JS").setLogoText("").setSvgWidth(512).setSvgHeight(512).setType(512)}get formulaText(){return this.uiConfig.ui.compilerSourceText.getStringValue()}set formulaText(a){this.uiConfig.ui.compilerSourceText.setStringValue(a),this.onUpdateSourceTextConfig()}get compilerData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.compilerData.components.length?this.compilerData.components[0]:null}get components(){return this.compilerData.components}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.onUpdateSourceTextConfig(),this.requestRun()}requestRun(){this.config.post(()=>{this.onRun()})}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onRun(){this.solving=!0;let a=new u6,c=us.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Mi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));a.addMethod(c,"\u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c",(u,h)=>{let d=h[0],p=u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return this.logText&&(this.logText+="\r\n"),this.logText+=p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),this.syncLogText(),d}),a.run(this.formulaText,null,c),this.solving=!1}onUpdateSourceTextConfig(){}onSelectFormula(a){this.formulaText=a.params.get("\u0442\u0435\u043a\u0441\u0442")}syncLogText(){this.codemirrorData.text=this.logText}}return l.\u0275fac=function(a){return new(a||l)(L(Xn),L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-compiler-runner"]],inputs:{data:"data"},decls:2,vars:3,consts:[[3,"ngClass"],[3,"text","maxHeightStr"]],template:function(a,c){1&a&&(D(0,"div",0),me(1,"app-dynamic-codemirror",1),k()),2&a&&(F("ngClass",c.getClasses()),R(1),F("text",c.logText)("maxHeightStr","calc(100vh - 60px - 30px)"))},directives:[ii,JU],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),l})();class B9{constructor(){}static builder(){return new B9}}class T3 extends Ei{constructor(o,a,c,u){super(o,a,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new T3("",null,null,B9.builder())}setText(o){return super.setText(o)}setOnClick(o){return super.setOnClick(o)}setTag(o){return super.setTag(o)}update(o){return o(this.classes),this}setId(o){return this.id=o,this}setWaitingForSenderid(o){return this.waitingForSenderId=o,this}setComponents(o){return this.components=o,this}}function Fyt(l,o){if(1&l&&(D(0,"div"),me(1,"app-add-component",2),k()),2&l){const a=o.$implicit;R(1),F("component",a)}}let Nyt=(()=>{class l extends Yp{constructor(a,c,u){super(a,c,u),this.appBookName="\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440 APP_CMP",this.appBookChapter="1",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.helpChapterNormal="1",this.helpChapterConfidential="2",this.errorsData=rh.builder(),this.addMenuLink(qn.builder().setLink("#").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(qn.builder().setLink("#").setName("\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c").setShape("play").setOnClick(()=>{this.showRunner()}).setIsActive(()=>this.isRunner())).addMenuLink(qn.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(qn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}getUIVisited(){return this.uiConfig.ui.visitedCompilerHelp}getUIBook(){return this.uiConfig.ui.compilerBook}getUIChapter(){return this.uiConfig.ui.compilerChapter}getUILine(){return this.uiConfig.ui.compilerLine}isRunner(){var a;return!(this.components.length<=0)&&(null===(a=this.components[0].data.component)||void 0===a?void 0:a.data)instanceof T3}isSettings(){var a;return!(this.components.length<=0)&&(null===(a=this.components[0].data.component)||void 0===a?void 0:a.data)instanceof sh}isComponent(a,c=""){var u;if(this.components.length<=0)return!1;let d=null===(u=this.components[0].data.component)||void 0===u?void 0:u.data;return(null==d?void 0:d.text)==a&&(!c||(null==d?void 0:d.link.chapter)==c)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let a=this.getUIBook().getStringValue(),c=this.getUIChapter().getStringValue(),u=this.getUILine().getNumberValue();a?this.routeTo(a,c,u):this.resetDelayed(this.appBookChapter)}}resetDelayed(a){this.config.post(()=>{this.reset(a)})}reset(a){this.routeTo(this.appBookName,a,1)}routeToHelpDelayed(a){this.config.post(()=>{this.routeToHelp(a)})}routeToHelp(a){this.isComponent(this.helpBookName,a)&&a===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,a,1)}routeToDelayed(a,c="",u=-1){this.config.post(()=>{this.routeTo(a,c,u)})}routeTo(a,c="",u=-1){let h=a;if(h){if("\u0441\u0442\u0430\u0440\u0442"==h)return void this.showRunner();if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==h)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==h||h==this.helpBookName&&""==c&&u<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==c&&(c="1"),u<0&&(u=1),this.getUIBook().setStringValue(h),this.getUIChapter().setStringValue(c),this.getUILine().setNumberValue(u),this.setComponentsDelayed([new Vn(Vl,lo.builder().setComponent(new Vn(pu,Rl.builder().setText(h).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!1).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Pl.builder().setBookName(h).setChapter(c).setStartLine(u).setEndLine(1e3).setOnRoute(d=>{d?this.routeToDelayed(d.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(a){this.config.post(()=>{this.components=a})}clearErrors(){this.errorsData.setErrors([])}setErrors(a){this.errorsData.setErrors(a).updateClasses(c=>c.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new Vn(Vl,lo.builder().setComponent(new Vn(N_,sh.builder().updateClasses(a=>a.setCalculatorSettings(!0)))))])}showRunner(){this.setComponentsDelayed([new Vn(Vl,lo.builder().setComponent(new Vn(Ryt,T3.builder())))])}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(nh))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-compiler"]],features:[pn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,Fyt,2,1,"div",1),k()),2&a&&(R(1),F("ngForOf",c.components))},directives:[_i,_c],styles:[""]}),l})();function Lyt(l,o){if(1&l&&(D(0,"div"),me(1,"app-add-component",2),k()),2&l){const a=o.$implicit;R(1),F("component",a)}}let Byt=(()=>{class l extends Yp{constructor(a,c,u){super(a,c,u),this.appBookName="\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c APP_CLD",this.appBookChapter="1",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.helpChapterNormal="1",this.helpChapterConfidential="2",this.errorsData=rh.builder(),this.addMenuLink(qn.builder().setLink("#").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(qn.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(qn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}getUIVisited(){return this.uiConfig.ui.visitedCalendarHelp}getUIBook(){return this.uiConfig.ui.calendarBook}getUIChapter(){return this.uiConfig.ui.calendarChapter}getUILine(){return this.uiConfig.ui.calendarLine}isSettings(){var a;return!(this.components.length<=0)&&(null===(a=this.components[0].data.component)||void 0===a?void 0:a.data)instanceof sh}isComponent(a,c=""){var u;if(this.components.length<=0)return!1;let d=null===(u=this.components[0].data.component)||void 0===u?void 0:u.data;return(null==d?void 0:d.text)==a&&(!c||(null==d?void 0:d.link.chapter)==c)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let a=this.getUIBook().getStringValue(),c=this.getUIChapter().getStringValue(),u=this.getUILine().getNumberValue();a?this.routeTo(a,c,u):this.resetDelayed(this.appBookChapter)}}resetDelayed(a){this.config.post(()=>{this.reset(a)})}reset(a){this.routeTo(this.appBookName,a,1)}routeToHelpDelayed(a){this.config.post(()=>{this.routeToHelp(a)})}routeToHelp(a){this.isComponent(this.helpBookName,a)&&a===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,a,1)}routeToDelayed(a,c="",u=-1){this.config.post(()=>{this.routeTo(a,c,u)})}routeTo(a,c="",u=-1){let h=a;if(h){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==h)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==h||h==this.helpBookName&&""==c&&u<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==c&&(c="1"),u<0&&(u=1),this.getUIBook().setStringValue(h),this.getUIChapter().setStringValue(c),this.getUILine().setNumberValue(u),this.setComponentsDelayed([new Vn(Vl,lo.builder().setComponent(new Vn(pu,Rl.builder().setText(h).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!0).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Pl.builder().setBookName(h).setChapter(c).setStartLine(u).setEndLine(1e3).setOnRoute(d=>{d?this.routeToDelayed(d.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(a){this.config.post(()=>{this.components=a})}clearErrors(){this.errorsData.setErrors([])}setErrors(a){this.errorsData.setErrors(a).updateClasses(c=>c.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new Vn(Vl,lo.builder().setComponent(new Vn(N_,sh.builder().updateClasses(a=>a.setCalculatorSettings(!0)))))])}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(nh))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-calendar"]],features:[pn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,Lyt,2,1,"div",1),k()),2&a&&(R(1),F("ngForOf",c.components))},directives:[_i,_c],styles:[""]}),l})();function Vyt(l,o){if(1&l&&(D(0,"div"),me(1,"app-add-component",2),k()),2&l){const a=o.$implicit;R(1),F("component",a)}}const zyt=[{path:"about",component:Eyt},{path:"main",component:Uye},{path:"main-test",component:Ayt},{path:"memorials-pages-editor",component:mZe},{path:"help",component:eBe},{path:"d3examples",component:aZe},{path:"d3Dexamples",component:kyt},{path:"books",component:Oat},{path:"dynamic-components-examples",component:rat},{path:"tests",component:pZe},{path:"memorial",component:kat},{path:"calculator",component:Pyt},{path:"calendar",component:Byt},{path:"compiler",component:Nyt},{path:"scheduler",component:(()=>{class l extends Yp{constructor(a,c,u){super(a,c,u),this.appBookName="\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 APP_SCH",this.appBookChapter="1",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.helpChapterNormal="1",this.helpChapterConfidential="2",this.errorsData=rh.builder(),this.addMenuLink(qn.builder().setLink("#").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(qn.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(qn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}getUIVisited(){return this.uiConfig.ui.visitedSchedulerHelp}getUIBook(){return this.uiConfig.ui.schedulerBook}getUIChapter(){return this.uiConfig.ui.schedulerChapter}getUILine(){return this.uiConfig.ui.schedulerLine}isSettings(){var a;return!(this.components.length<=0)&&(null===(a=this.components[0].data.component)||void 0===a?void 0:a.data)instanceof sh}isComponent(a,c=""){var u;if(this.components.length<=0)return!1;let d=null===(u=this.components[0].data.component)||void 0===u?void 0:u.data;return(null==d?void 0:d.text)==a&&(!c||(null==d?void 0:d.link.chapter)==c)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let a=this.getUIBook().getStringValue(),c=this.getUIChapter().getStringValue(),u=this.getUILine().getNumberValue();a?this.routeTo(a,c,u):this.resetDelayed(this.appBookChapter)}}resetDelayed(a){this.config.post(()=>{this.reset(a)})}reset(a){this.routeTo(this.appBookName,a,1)}routeToHelpDelayed(a){this.config.post(()=>{this.routeToHelp(a)})}routeToHelp(a){this.isComponent(this.helpBookName,a)&&a===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,a,1)}routeToDelayed(a,c="",u=-1){this.config.post(()=>{this.routeTo(a,c,u)})}routeTo(a,c="",u=-1){let h=a;if(h){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==h)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==h||h==this.helpBookName&&""==c&&u<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==c&&(c="1"),u<0&&(u=1),this.getUIBook().setStringValue(h),this.getUIChapter().setStringValue(c),this.getUILine().setNumberValue(u),this.setComponentsDelayed([new Vn(Vl,lo.builder().setComponent(new Vn(pu,Rl.builder().setText(h).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!0).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Pl.builder().setBookName(h).setChapter(c).setStartLine(u).setEndLine(1e3).setOnRoute(d=>{d?this.routeToDelayed(d.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(a){this.config.post(()=>{this.components=a})}clearErrors(){this.errorsData.setErrors([])}setErrors(a){this.errorsData.setErrors(a).updateClasses(c=>c.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new Vn(Vl,lo.builder().setComponent(new Vn(N_,sh.builder().updateClasses(a=>a.setCalculatorSettings(!0)))))])}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(nh))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-scheduler"]],features:[pn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,c){1&a&&(D(0,"div",0),Y(1,Vyt,2,1,"div",1),k()),2&a&&(R(1),F("ngForOf",c.components))},directives:[_i,_c],styles:[""]}),l})()},{path:"index.html",redirectTo:"/about",pathMatch:"full"},{path:"index.night.html",redirectTo:"/about",pathMatch:"full"},{path:"",redirectTo:"/about",pathMatch:"full"}];let Uyt=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({imports:[[VX.forRoot(zyt)],VX]}),l})();function Hye(){return"undefined"!=typeof window&&void 0!==window.document}function V9(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Vg(l){switch(l.length){case 0:return new ly;case 1:return l[0];default:return new vY(l)}}function $ye(l,o,a,c,u={},h={}){const d=[],f=[];let p=-1,g=null;if(c.forEach(m=>{const v=m.offset,y=v==p,_=y&&g||{};Object.keys(m).forEach(b=>{let C=b,x=m[b];if("offset"!==b)switch(C=o.normalizePropertyName(C,d),x){case"!":x=u[b];break;case Jd:x=h[b];break;default:x=o.normalizeStyleValue(b,C,x,d)}_[C]=x}),y||f.push(_),g=_,p=v}),d.length){const m="\n - ";throw new Error(`Unable to animate due to the following errors:${m}${d.join(m)}`)}return f}function z9(l,o,a,c){switch(o){case"start":l.onStart(()=>c(a&&U9(a,"start",l)));break;case"done":l.onDone(()=>c(a&&U9(a,"done",l)));break;case"destroy":l.onDestroy(()=>c(a&&U9(a,"destroy",l)))}}function U9(l,o,a){const c=a.totalTime,h=H9(l.element,l.triggerName,l.fromState,l.toState,o||l.phaseName,null==c?l.totalTime:c,!!a.disabled),d=l._data;return null!=d&&(h._data=d),h}function H9(l,o,a,c,u="",h=0,d){return{element:l,triggerName:o,fromState:a,toState:c,phaseName:u,totalTime:h,disabled:!!d}}function Lc(l,o,a){let c;return l instanceof Map?(c=l.get(o),c||l.set(o,c=a)):(c=l[o],c||(c=l[o]=a)),c}function Wye(l){const o=l.indexOf(":");return[l.substring(1,o),l.substr(o+1)]}let $9=(l,o)=>!1,Gye=(l,o,a)=>[];(V9()||"undefined"!=typeof Element)&&($9=Hye()?(l,o)=>{for(;o&&o!==document.documentElement;){if(o===l)return!0;o=o.parentNode||o.host}return!1}:(l,o)=>l.contains(o),Gye=(l,o,a)=>{if(a)return Array.from(l.querySelectorAll(o));const c=l.querySelector(o);return c?[c]:[]});let K0=null,Qye=!1;function W9(l){K0||(K0=function $yt(){return"undefined"!=typeof document?document.body:null}()||{},Qye=!!K0.style&&"WebkitAppearance"in K0.style);let o=!0;return K0.style&&!function Hyt(l){return"ebkit"==l.substring(1,6)}(l)&&(o=l in K0.style,!o&&Qye&&(o="Webkit"+l.charAt(0).toUpperCase()+l.substr(1)in K0.style)),o}const G9=$9,Q9=Gye;function jye(l){const o={};return Object.keys(l).forEach(a=>{const c=a.replace(/([a-z])([A-Z])/g,"$1-$2");o[c]=l[a]}),o}let qye=(()=>{class l{validateStyleProperty(a){return W9(a)}matchesElement(a,c){return!1}containsElement(a,c){return G9(a,c)}query(a,c,u){return Q9(a,c,u)}computeStyle(a,c,u){return u||""}animate(a,c,u,h,d,f=[],p){return new ly(u,h)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})(),j9=(()=>{class l{}return l.NOOP=new qye,l})();const q9="ng-enter",O3="ng-leave",D3="ng-trigger",k3=".ng-trigger",Xye="ng-animating",Z9=".ng-animating";function J0(l){if("number"==typeof l)return l;const o=l.match(/^(-?[\.\d]+)(m?s)/);return!o||o.length<2?0:X9(parseFloat(o[1]),o[2])}function X9(l,o){return"s"===o?1e3*l:l}function M3(l,o,a){return l.hasOwnProperty("duration")?l:function Qyt(l,o,a){let u,h=0,d="";if("string"==typeof l){const f=l.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return o.push(`The provided timing value "${l}" is invalid.`),{duration:0,delay:0,easing:""};u=X9(parseFloat(f[1]),f[2]);const p=f[3];null!=p&&(h=X9(parseFloat(p),f[4]));const g=f[5];g&&(d=g)}else u=l;if(!a){let f=!1,p=o.length;u<0&&(o.push("Duration values below 0 are not allowed for this animation step."),f=!0),h<0&&(o.push("Delay values below 0 are not allowed for this animation step."),f=!0),f&&o.splice(p,0,`The provided timing value "${l}" is invalid.`)}return{duration:u,delay:h,easing:d}}(l,o,a)}function sb(l,o={}){return Object.keys(l).forEach(a=>{o[a]=l[a]}),o}function zg(l,o,a={}){if(o)for(let c in l)a[c]=l[c];else sb(l,a);return a}function Kye(l,o,a){return a?o+":"+a+";":""}function Jye(l){let o="";for(let a=0;a<l.style.length;a++){const c=l.style.item(a);o+=Kye(0,c,l.style.getPropertyValue(c))}for(const a in l.style)l.style.hasOwnProperty(a)&&!a.startsWith("_")&&(o+=Kye(0,Zyt(a),l.style[a]));l.setAttribute("style",o)}function Id(l,o,a){l.style&&(Object.keys(o).forEach(c=>{const u=K9(c);a&&!a.hasOwnProperty(c)&&(a[c]=l.style[u]),l.style[u]=o[c]}),V9()&&Jye(l))}function ev(l,o){l.style&&(Object.keys(o).forEach(a=>{const c=K9(a);l.style[c]=""}),V9()&&Jye(l))}function y2(l){return Array.isArray(l)?1==l.length?l[0]:gY(l):l}const Y9=new RegExp("{{\\s*(.+?)\\s*}}","g");function e_e(l){let o=[];if("string"==typeof l){let a;for(;a=Y9.exec(l);)o.push(a[1]);Y9.lastIndex=0}return o}function E3(l,o,a){const c=l.toString(),u=c.replace(Y9,(h,d)=>{let f=o[d];return o.hasOwnProperty(d)||(a.push(`Please provide a value for the animation param ${d}`),f=""),f.toString()});return u==c?l:u}function A3(l){const o=[];let a=l.next();for(;!a.done;)o.push(a.value),a=l.next();return o}const qyt=/-+([a-z0-9])/g;function K9(l){return l.replace(qyt,(...o)=>o[1].toUpperCase())}function Zyt(l){return l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function t_e(l,o){return 0===l||0===o}function n_e(l,o,a){const c=Object.keys(a);if(c.length&&o.length){let h=o[0],d=[];if(c.forEach(f=>{h.hasOwnProperty(f)||d.push(f),h[f]=a[f]}),d.length)for(var u=1;u<o.length;u++){let f=o[u];d.forEach(function(p){f[p]=J9(l,p)})}}return o}function Bc(l,o,a){switch(o.type){case 7:return l.visitTrigger(o,a);case 0:return l.visitState(o,a);case 1:return l.visitTransition(o,a);case 2:return l.visitSequence(o,a);case 3:return l.visitGroup(o,a);case 4:return l.visitAnimate(o,a);case 5:return l.visitKeyframes(o,a);case 6:return l.visitStyle(o,a);case 8:return l.visitReference(o,a);case 9:return l.visitAnimateChild(o,a);case 10:return l.visitAnimateRef(o,a);case 11:return l.visitQuery(o,a);case 12:return l.visitStagger(o,a);default:throw new Error(`Unable to resolve animation metadata node #${o.type}`)}}function J9(l,o){return window.getComputedStyle(l)[o]}function Xyt(l,o){const a=[];return"string"==typeof l?l.split(/\s*,\s*/).forEach(c=>function Yyt(l,o,a){if(":"==l[0]){const p=function Kyt(l,o){switch(l){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(a,c)=>parseFloat(c)>parseFloat(a);case":decrement":return(a,c)=>parseFloat(c)<parseFloat(a);default:return o.push(`The transition alias value "${l}" is not supported`),"* => *"}}(l,a);if("function"==typeof p)return void o.push(p);l=p}const c=l.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==c||c.length<4)return a.push(`The provided transition expression "${l}" is not supported`),o;const u=c[1],h=c[2],d=c[3];o.push(i_e(u,d));"<"==h[0]&&!("*"==u&&"*"==d)&&o.push(i_e(d,u))}(c,a,o)):a.push(l),a}const P3=new Set(["true","1"]),R3=new Set(["false","0"]);function i_e(l,o){const a=P3.has(l)||R3.has(l),c=P3.has(o)||R3.has(o);return(u,h)=>{let d="*"==l||l==u,f="*"==o||o==h;return!d&&a&&"boolean"==typeof u&&(d=u?P3.has(l):R3.has(l)),!f&&c&&"boolean"==typeof h&&(f=h?P3.has(o):R3.has(o)),d&&f}}const Jyt=new RegExp("s*:selfs*,?","g");function e$(l,o,a){return new e_t(l).build(o,a)}class e_t{constructor(o){this._driver=o}build(o,a){const c=new i_t(a);return this._resetContextStyleTimingState(c),Bc(this,y2(o),c)}_resetContextStyleTimingState(o){o.currentQuerySelector="",o.collectedStyles={},o.collectedStyles[""]={},o.currentTime=0}visitTrigger(o,a){let c=a.queryCount=0,u=a.depCount=0;const h=[],d=[];return"@"==o.name.charAt(0)&&a.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),o.definitions.forEach(f=>{if(this._resetContextStyleTimingState(a),0==f.type){const p=f,g=p.name;g.toString().split(/\s*,\s*/).forEach(m=>{p.name=m,h.push(this.visitState(p,a))}),p.name=g}else if(1==f.type){const p=this.visitTransition(f,a);c+=p.queryCount,u+=p.depCount,d.push(p)}else a.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:o.name,states:h,transitions:d,queryCount:c,depCount:u,options:null}}visitState(o,a){const c=this.visitStyle(o.styles,a),u=o.options&&o.options.params||null;if(c.containsDynamicStyles){const h=new Set,d=u||{};if(c.styles.forEach(f=>{if(F3(f)){const p=f;Object.keys(p).forEach(g=>{e_e(p[g]).forEach(m=>{d.hasOwnProperty(m)||h.add(m)})})}}),h.size){const f=A3(h.values());a.errors.push(`state("${o.name}", ...) must define default values for all the following style substitutions: ${f.join(", ")}`)}}return{type:0,name:o.name,style:c,options:u?{params:u}:null}}visitTransition(o,a){a.queryCount=0,a.depCount=0;const c=Bc(this,y2(o.animation),a);return{type:1,matchers:Xyt(o.expr,a.errors),animation:c,queryCount:a.queryCount,depCount:a.depCount,options:tv(o.options)}}visitSequence(o,a){return{type:2,steps:o.steps.map(c=>Bc(this,c,a)),options:tv(o.options)}}visitGroup(o,a){const c=a.currentTime;let u=0;const h=o.steps.map(d=>{a.currentTime=c;const f=Bc(this,d,a);return u=Math.max(u,a.currentTime),f});return a.currentTime=u,{type:3,steps:h,options:tv(o.options)}}visitAnimate(o,a){const c=function s_t(l,o){let a=null;if(l.hasOwnProperty("duration"))a=l;else if("number"==typeof l)return t$(M3(l,o).duration,0,"");const c=l;if(c.split(/\s+/).some(h=>"{"==h.charAt(0)&&"{"==h.charAt(1))){const h=t$(0,0,"");return h.dynamic=!0,h.strValue=c,h}return a=a||M3(c,o),t$(a.duration,a.delay,a.easing)}(o.timings,a.errors);a.currentAnimateTimings=c;let u,h=o.styles?o.styles:Bi({});if(5==h.type)u=this.visitKeyframes(h,a);else{let d=o.styles,f=!1;if(!d){f=!0;const g={};c.easing&&(g.easing=c.easing),d=Bi(g)}a.currentTime+=c.duration+c.delay;const p=this.visitStyle(d,a);p.isEmptyStep=f,u=p}return a.currentAnimateTimings=null,{type:4,timings:c,style:u,options:null}}visitStyle(o,a){const c=this._makeStyleAst(o,a);return this._validateStyleAst(c,a),c}_makeStyleAst(o,a){const c=[];Array.isArray(o.styles)?o.styles.forEach(d=>{"string"==typeof d?d==Jd?c.push(d):a.errors.push(`The provided style string value ${d} is not allowed.`):c.push(d)}):c.push(o.styles);let u=!1,h=null;return c.forEach(d=>{if(F3(d)){const f=d,p=f.easing;if(p&&(h=p,delete f.easing),!u)for(let g in f)if(f[g].toString().indexOf("{{")>=0){u=!0;break}}}),{type:6,styles:c,easing:h,offset:o.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(o,a){const c=a.currentAnimateTimings;let u=a.currentTime,h=a.currentTime;c&&h>0&&(h-=c.duration+c.delay),o.styles.forEach(d=>{"string"!=typeof d&&Object.keys(d).forEach(f=>{if(!this._driver.validateStyleProperty(f))return void a.errors.push(`The provided animation property "${f}" is not a supported CSS property for animations`);const p=a.collectedStyles[a.currentQuerySelector],g=p[f];let m=!0;g&&(h!=u&&h>=g.startTime&&u<=g.endTime&&(a.errors.push(`The CSS property "${f}" that exists between the times of "${g.startTime}ms" and "${g.endTime}ms" is also being animated in a parallel animation between the times of "${h}ms" and "${u}ms"`),m=!1),h=g.startTime),m&&(p[f]={startTime:h,endTime:u}),a.options&&function jyt(l,o,a){const c=o.params||{},u=e_e(l);u.length&&u.forEach(h=>{c.hasOwnProperty(h)||a.push(`Unable to resolve the local animation param ${h} in the given list of values`)})}(d[f],a.options,a.errors)})})}visitKeyframes(o,a){const c={type:5,styles:[],options:null};if(!a.currentAnimateTimings)return a.errors.push("keyframes() must be placed inside of a call to animate()"),c;let h=0;const d=[];let f=!1,p=!1,g=0;const m=o.steps.map(S=>{const w=this._makeStyleAst(S,a);let O=null!=w.offset?w.offset:function r_t(l){if("string"==typeof l)return null;let o=null;if(Array.isArray(l))l.forEach(a=>{if(F3(a)&&a.hasOwnProperty("offset")){const c=a;o=parseFloat(c.offset),delete c.offset}});else if(F3(l)&&l.hasOwnProperty("offset")){const a=l;o=parseFloat(a.offset),delete a.offset}return o}(w.styles),T=0;return null!=O&&(h++,T=w.offset=O),p=p||T<0||T>1,f=f||T<g,g=T,d.push(T),w});p&&a.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),f&&a.errors.push("Please ensure that all keyframe offsets are in order");const v=o.steps.length;let y=0;h>0&&h<v?a.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==h&&(y=1/(v-1));const _=v-1,b=a.currentTime,C=a.currentAnimateTimings,x=C.duration;return m.forEach((S,w)=>{const O=y>0?w==_?1:y*w:d[w],T=O*x;a.currentTime=b+C.delay+T,C.duration=T,this._validateStyleAst(S,a),S.offset=O,c.styles.push(S)}),c}visitReference(o,a){return{type:8,animation:Bc(this,y2(o.animation),a),options:tv(o.options)}}visitAnimateChild(o,a){return a.depCount++,{type:9,options:tv(o.options)}}visitAnimateRef(o,a){return{type:10,animation:this.visitReference(o.animation,a),options:tv(o.options)}}visitQuery(o,a){const c=a.currentQuerySelector,u=o.options||{};a.queryCount++,a.currentQuery=o;const[h,d]=function t_t(l){const o=!!l.split(/\s*,\s*/).find(a=>":self"==a);return o&&(l=l.replace(Jyt,"")),l=l.replace(/@\*/g,k3).replace(/@\w+/g,a=>k3+"-"+a.substr(1)).replace(/:animating/g,Z9),[l,o]}(o.selector);a.currentQuerySelector=c.length?c+" "+h:h,Lc(a.collectedStyles,a.currentQuerySelector,{});const f=Bc(this,y2(o.animation),a);return a.currentQuery=null,a.currentQuerySelector=c,{type:11,selector:h,limit:u.limit||0,optional:!!u.optional,includeSelf:d,animation:f,originalSelector:o.selector,options:tv(o.options)}}visitStagger(o,a){a.currentQuery||a.errors.push("stagger() can only be used inside of query()");const c="full"===o.timings?{duration:0,delay:0,easing:"full"}:M3(o.timings,a.errors,!0);return{type:12,animation:Bc(this,y2(o.animation),a),timings:c,options:null}}}class i_t{constructor(o){this.errors=o,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function F3(l){return!Array.isArray(l)&&"object"==typeof l}function tv(l){return l?(l=sb(l)).params&&(l.params=function n_t(l){return l?sb(l):null}(l.params)):l={},l}function t$(l,o,a){return{duration:l,delay:o,easing:a}}function n$(l,o,a,c,u,h,d=null,f=!1){return{type:1,element:l,keyframes:o,preStyleProps:a,postStyleProps:c,duration:u,delay:h,totalTime:u+h,easing:d,subTimeline:f}}class N3{constructor(){this._map=new Map}get(o){return this._map.get(o)||[]}append(o,a){let c=this._map.get(o);c||this._map.set(o,c=[]),c.push(...a)}has(o){return this._map.has(o)}clear(){this._map.clear()}}const l_t=new RegExp(":enter","g"),u_t=new RegExp(":leave","g");function i$(l,o,a,c,u,h={},d={},f,p,g=[]){return(new h_t).buildKeyframes(l,o,a,c,u,h,d,f,p,g)}class h_t{buildKeyframes(o,a,c,u,h,d,f,p,g,m=[]){g=g||new N3;const v=new r$(o,a,g,u,h,m,[]);v.options=p,v.currentTimeline.setStyles([d],null,v.errors,p),Bc(this,c,v);const y=v.timelines.filter(_=>_.containsAnimation());if(Object.keys(f).length){let _;for(let b=y.length-1;b>=0;b--){const C=y[b];if(C.element===a){_=C;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([f],null,v.errors,p)}return y.length?y.map(_=>_.buildKeyframes()):[n$(a,[],[],[],0,0,"",!1)]}visitTrigger(o,a){}visitState(o,a){}visitTransition(o,a){}visitAnimateChild(o,a){const c=a.subInstructions.get(a.element);if(c){const u=a.createSubContext(o.options),h=a.currentTimeline.currentTime,d=this._visitSubInstructions(c,u,u.options);h!=d&&a.transformIntoNewTimeline(d)}a.previousNode=o}visitAnimateRef(o,a){const c=a.createSubContext(o.options);c.transformIntoNewTimeline(),this.visitReference(o.animation,c),a.transformIntoNewTimeline(c.currentTimeline.currentTime),a.previousNode=o}_visitSubInstructions(o,a,c){let h=a.currentTimeline.currentTime;const d=null!=c.duration?J0(c.duration):null,f=null!=c.delay?J0(c.delay):null;return 0!==d&&o.forEach(p=>{const g=a.appendInstructionToTimeline(p,d,f);h=Math.max(h,g.duration+g.delay)}),h}visitReference(o,a){a.updateOptions(o.options,!0),Bc(this,o.animation,a),a.previousNode=o}visitSequence(o,a){const c=a.subContextCount;let u=a;const h=o.options;if(h&&(h.params||h.delay)&&(u=a.createSubContext(h),u.transformIntoNewTimeline(),null!=h.delay)){6==u.previousNode.type&&(u.currentTimeline.snapshotCurrentStyles(),u.previousNode=L3);const d=J0(h.delay);u.delayNextStep(d)}o.steps.length&&(o.steps.forEach(d=>Bc(this,d,u)),u.currentTimeline.applyStylesToKeyframe(),u.subContextCount>c&&u.transformIntoNewTimeline()),a.previousNode=o}visitGroup(o,a){const c=[];let u=a.currentTimeline.currentTime;const h=o.options&&o.options.delay?J0(o.options.delay):0;o.steps.forEach(d=>{const f=a.createSubContext(o.options);h&&f.delayNextStep(h),Bc(this,d,f),u=Math.max(u,f.currentTimeline.currentTime),c.push(f.currentTimeline)}),c.forEach(d=>a.currentTimeline.mergeTimelineCollectedStyles(d)),a.transformIntoNewTimeline(u),a.previousNode=o}_visitTiming(o,a){if(o.dynamic){const c=o.strValue;return M3(a.params?E3(c,a.params,a.errors):c,a.errors)}return{duration:o.duration,delay:o.delay,easing:o.easing}}visitAnimate(o,a){const c=a.currentAnimateTimings=this._visitTiming(o.timings,a),u=a.currentTimeline;c.delay&&(a.incrementTime(c.delay),u.snapshotCurrentStyles());const h=o.style;5==h.type?this.visitKeyframes(h,a):(a.incrementTime(c.duration),this.visitStyle(h,a),u.applyStylesToKeyframe()),a.currentAnimateTimings=null,a.previousNode=o}visitStyle(o,a){const c=a.currentTimeline,u=a.currentAnimateTimings;!u&&c.getCurrentStyleProperties().length&&c.forwardFrame();const h=u&&u.easing||o.easing;o.isEmptyStep?c.applyEmptyStep(h):c.setStyles(o.styles,h,a.errors,a.options),a.previousNode=o}visitKeyframes(o,a){const c=a.currentAnimateTimings,u=a.currentTimeline.duration,h=c.duration,f=a.createSubContext().currentTimeline;f.easing=c.easing,o.styles.forEach(p=>{f.forwardTime((p.offset||0)*h),f.setStyles(p.styles,p.easing,a.errors,a.options),f.applyStylesToKeyframe()}),a.currentTimeline.mergeTimelineCollectedStyles(f),a.transformIntoNewTimeline(u+h),a.previousNode=o}visitQuery(o,a){const c=a.currentTimeline.currentTime,u=o.options||{},h=u.delay?J0(u.delay):0;h&&(6===a.previousNode.type||0==c&&a.currentTimeline.getCurrentStyleProperties().length)&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=L3);let d=c;const f=a.invokeQuery(o.selector,o.originalSelector,o.limit,o.includeSelf,!!u.optional,a.errors);a.currentQueryTotal=f.length;let p=null;f.forEach((g,m)=>{a.currentQueryIndex=m;const v=a.createSubContext(o.options,g);h&&v.delayNextStep(h),g===a.element&&(p=v.currentTimeline),Bc(this,o.animation,v),v.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,v.currentTimeline.currentTime)}),a.currentQueryIndex=0,a.currentQueryTotal=0,a.transformIntoNewTimeline(d),p&&(a.currentTimeline.mergeTimelineCollectedStyles(p),a.currentTimeline.snapshotCurrentStyles()),a.previousNode=o}visitStagger(o,a){const c=a.parentContext,u=a.currentTimeline,h=o.timings,d=Math.abs(h.duration),f=d*(a.currentQueryTotal-1);let p=d*a.currentQueryIndex;switch(h.duration<0?"reverse":h.easing){case"reverse":p=f-p;break;case"full":p=c.currentStaggerTime}const m=a.currentTimeline;p&&m.delayNextStep(p);const v=m.currentTime;Bc(this,o.animation,a),a.previousNode=o,c.currentStaggerTime=u.currentTime-v+(u.startTime-c.currentTimeline.startTime)}}const L3={};class r${constructor(o,a,c,u,h,d,f,p){this._driver=o,this.element=a,this.subInstructions=c,this._enterClassName=u,this._leaveClassName=h,this.errors=d,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=L3,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new B3(this._driver,a,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(o,a){if(!o)return;const c=o;let u=this.options;null!=c.duration&&(u.duration=J0(c.duration)),null!=c.delay&&(u.delay=J0(c.delay));const h=c.params;if(h){let d=u.params;d||(d=this.options.params={}),Object.keys(h).forEach(f=>{(!a||!d.hasOwnProperty(f))&&(d[f]=E3(h[f],d,this.errors))})}}_copyOptions(){const o={};if(this.options){const a=this.options.params;if(a){const c=o.params={};Object.keys(a).forEach(u=>{c[u]=a[u]})}}return o}createSubContext(o=null,a,c){const u=a||this.element,h=new r$(this._driver,u,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(u,c||0));return h.previousNode=this.previousNode,h.currentAnimateTimings=this.currentAnimateTimings,h.options=this._copyOptions(),h.updateOptions(o),h.currentQueryIndex=this.currentQueryIndex,h.currentQueryTotal=this.currentQueryTotal,h.parentContext=this,this.subContextCount++,h}transformIntoNewTimeline(o){return this.previousNode=L3,this.currentTimeline=this.currentTimeline.fork(this.element,o),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(o,a,c){const u={duration:null!=a?a:o.duration,delay:this.currentTimeline.currentTime+(null!=c?c:0)+o.delay,easing:""},h=new d_t(this._driver,o.element,o.keyframes,o.preStyleProps,o.postStyleProps,u,o.stretchStartingKeyframe);return this.timelines.push(h),u}incrementTime(o){this.currentTimeline.forwardTime(this.currentTimeline.duration+o)}delayNextStep(o){o>0&&this.currentTimeline.delayNextStep(o)}invokeQuery(o,a,c,u,h,d){let f=[];if(u&&f.push(this.element),o.length>0){o=(o=o.replace(l_t,"."+this._enterClassName)).replace(u_t,"."+this._leaveClassName);let g=this._driver.query(this.element,o,1!=c);0!==c&&(g=c<0?g.slice(g.length+c,g.length):g.slice(0,c)),f.push(...g)}return!h&&0==f.length&&d.push(`\`query("${a}")\` returned zero elements. (Use \`query("${a}", { optional: true })\` if you wish to allow this.)`),f}}class B3{constructor(o,a,c,u){this._driver=o,this.element=a,this.startTime=c,this._elementTimelineStylesLookup=u,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(a),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(a,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(o){const a=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||a?(this.forwardTime(this.currentTime+o),a&&this.snapshotCurrentStyles()):this.startTime+=o}fork(o,a){return this.applyStylesToKeyframe(),new B3(this._driver,o,a||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(o){this.applyStylesToKeyframe(),this.duration=o,this._loadKeyframe()}_updateStyle(o,a){this._localTimelineStyles[o]=a,this._globalTimelineStyles[o]=a,this._styleSummary[o]={time:this.currentTime,value:a}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(o){o&&(this._previousKeyframe.easing=o),Object.keys(this._globalTimelineStyles).forEach(a=>{this._backFill[a]=this._globalTimelineStyles[a]||Jd,this._currentKeyframe[a]=Jd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(o,a,c,u){a&&(this._previousKeyframe.easing=a);const h=u&&u.params||{},d=function f_t(l,o){const a={};let c;return l.forEach(u=>{"*"===u?(c=c||Object.keys(o),c.forEach(h=>{a[h]=Jd})):zg(u,!1,a)}),a}(o,this._globalTimelineStyles);Object.keys(d).forEach(f=>{const p=E3(d[f],h,c);this._pendingStyles[f]=p,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:Jd),this._updateStyle(f,p)})}applyStylesToKeyframe(){const o=this._pendingStyles,a=Object.keys(o);0!=a.length&&(this._pendingStyles={},a.forEach(c=>{this._currentKeyframe[c]=o[c]}),Object.keys(this._localTimelineStyles).forEach(c=>{this._currentKeyframe.hasOwnProperty(c)||(this._currentKeyframe[c]=this._localTimelineStyles[c])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(o=>{const a=this._localTimelineStyles[o];this._pendingStyles[o]=a,this._updateStyle(o,a)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const o=[];for(let a in this._currentKeyframe)o.push(a);return o}mergeTimelineCollectedStyles(o){Object.keys(o._styleSummary).forEach(a=>{const c=this._styleSummary[a],u=o._styleSummary[a];(!c||u.time>c.time)&&this._updateStyle(a,u.value)})}buildKeyframes(){this.applyStylesToKeyframe();const o=new Set,a=new Set,c=1===this._keyframes.size&&0===this.duration;let u=[];this._keyframes.forEach((f,p)=>{const g=zg(f,!0);Object.keys(g).forEach(m=>{const v=g[m];"!"==v?o.add(m):v==Jd&&a.add(m)}),c||(g.offset=p/this.duration),u.push(g)});const h=o.size?A3(o.values()):[],d=a.size?A3(a.values()):[];if(c){const f=u[0],p=sb(f);f.offset=0,p.offset=1,u=[f,p]}return n$(this.element,u,h,d,this.duration,this.startTime,this.easing,!1)}}class d_t extends B3{constructor(o,a,c,u,h,d,f=!1){super(o,a,d.delay),this.keyframes=c,this.preStyleProps=u,this.postStyleProps=h,this._stretchStartingKeyframe=f,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let o=this.keyframes,{delay:a,duration:c,easing:u}=this.timings;if(this._stretchStartingKeyframe&&a){const h=[],d=c+a,f=a/d,p=zg(o[0],!1);p.offset=0,h.push(p);const g=zg(o[0],!1);g.offset=o_e(f),h.push(g);const m=o.length-1;for(let v=1;v<=m;v++){let y=zg(o[v],!1);y.offset=o_e((a+y.offset*c)/d),h.push(y)}c=d,a=0,u="",o=h}return n$(this.element,o,this.preStyleProps,this.postStyleProps,c,a,u,!0)}}function o_e(l,o=3){const a=Math.pow(10,o-1);return Math.round(l*a)/a}class s${}class p_t extends s${normalizePropertyName(o,a){return K9(o)}normalizeStyleValue(o,a,c,u){let h="";const d=c.toString().trim();if(g_t[a]&&0!==c&&"0"!==c)if("number"==typeof c)h="px";else{const f=c.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&u.push(`Please provide a CSS unit value for ${o}:${c}`)}return d+h}}const g_t=(()=>function m_t(l){const o={};return l.forEach(a=>o[a]=!0),o}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function a_e(l,o,a,c,u,h,d,f,p,g,m,v,y){return{type:0,element:l,triggerName:o,isRemovalTransition:u,fromState:a,fromStyles:h,toState:c,toStyles:d,timelines:f,queriedElements:p,preStyleProps:g,postStyleProps:m,totalTime:v,errors:y}}const o$={};class l_e{constructor(o,a,c){this._triggerName=o,this.ast=a,this._stateStyles=c}match(o,a,c,u){return function v_t(l,o,a,c,u){return l.some(h=>h(o,a,c,u))}(this.ast.matchers,o,a,c,u)}buildStyles(o,a,c){const u=this._stateStyles["*"],h=this._stateStyles[o],d=u?u.buildStyles(a,c):{};return h?h.buildStyles(a,c):d}build(o,a,c,u,h,d,f,p,g,m){const v=[],y=this.ast.options&&this.ast.options.params||o$,b=this.buildStyles(c,f&&f.params||o$,v),C=p&&p.params||o$,x=this.buildStyles(u,C,v),S=new Set,w=new Map,O=new Map,T="void"===u,M={params:Object.assign(Object.assign({},y),C)},A=m?[]:i$(o,a,this.ast.animation,h,d,b,x,M,g,v);let I=0;if(A.forEach(P=>{I=Math.max(P.duration+P.delay,I)}),v.length)return a_e(a,this._triggerName,c,u,T,b,x,[],[],w,O,I,v);A.forEach(P=>{const B=P.element,V=Lc(w,B,{});P.preStyleProps.forEach(j=>V[j]=!0);const Q=Lc(O,B,{});P.postStyleProps.forEach(j=>Q[j]=!0),B!==a&&S.add(B)});const E=A3(S.values());return a_e(a,this._triggerName,c,u,T,b,x,A,E,w,O,I)}}class y_t{constructor(o,a,c){this.styles=o,this.defaultParams=a,this.normalizer=c}buildStyles(o,a){const c={},u=sb(this.defaultParams);return Object.keys(o).forEach(h=>{const d=o[h];null!=d&&(u[h]=d)}),this.styles.styles.forEach(h=>{if("string"!=typeof h){const d=h;Object.keys(d).forEach(f=>{let p=d[f];p.length>1&&(p=E3(p,u,a));const g=this.normalizer.normalizePropertyName(f,a);p=this.normalizer.normalizeStyleValue(f,g,p,a),c[g]=p})}}),c}}class b_t{constructor(o,a,c){this.name=o,this.ast=a,this._normalizer=c,this.transitionFactories=[],this.states={},a.states.forEach(u=>{this.states[u.name]=new y_t(u.style,u.options&&u.options.params||{},c)}),c_e(this.states,"true","1"),c_e(this.states,"false","0"),a.transitions.forEach(u=>{this.transitionFactories.push(new l_e(o,u,this.states))}),this.fallbackTransition=function x_t(l,o,a){return new l_e(l,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,f)=>!0],options:null,queryCount:0,depCount:0},o)}(o,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(o,a,c,u){return this.transitionFactories.find(d=>d.match(o,a,c,u))||null}matchStyles(o,a,c){return this.fallbackTransition.buildStyles(o,a,c)}}function c_e(l,o,a){l.hasOwnProperty(o)?l.hasOwnProperty(a)||(l[a]=l[o]):l.hasOwnProperty(a)&&(l[o]=l[a])}const C_t=new N3;class S_t{constructor(o,a,c){this.bodyNode=o,this._driver=a,this._normalizer=c,this._animations={},this._playersById={},this.players=[]}register(o,a){const c=[],u=e$(this._driver,a,c);if(c.length)throw new Error(`Unable to build the animation due to the following errors: ${c.join("\n")}`);this._animations[o]=u}_buildPlayer(o,a,c){const u=o.element,h=$ye(0,this._normalizer,0,o.keyframes,a,c);return this._driver.animate(u,h,o.duration,o.delay,o.easing,[],!0)}create(o,a,c={}){const u=[],h=this._animations[o];let d;const f=new Map;if(h?(d=i$(this._driver,a,h,q9,O3,{},{},c,C_t,u),d.forEach(m=>{const v=Lc(f,m.element,{});m.postStyleProps.forEach(y=>v[y]=null)})):(u.push("The requested animation doesn't exist or has already been destroyed"),d=[]),u.length)throw new Error(`Unable to create the animation due to the following errors: ${u.join("\n")}`);f.forEach((m,v)=>{Object.keys(m).forEach(y=>{m[y]=this._driver.computeStyle(v,y,Jd)})});const g=Vg(d.map(m=>{const v=f.get(m.element);return this._buildPlayer(m,{},v)}));return this._playersById[o]=g,g.onDestroy(()=>this.destroy(o)),this.players.push(g),g}destroy(o){const a=this._getPlayer(o);a.destroy(),delete this._playersById[o];const c=this.players.indexOf(a);c>=0&&this.players.splice(c,1)}_getPlayer(o){const a=this._playersById[o];if(!a)throw new Error(`Unable to find the timeline player referenced by ${o}`);return a}listen(o,a,c,u){const h=H9(a,"","","");return z9(this._getPlayer(o),c,h,u),()=>{}}command(o,a,c,u){if("register"==c)return void this.register(o,u[0]);if("create"==c)return void this.create(o,a,u[0]||{});const h=this._getPlayer(o);switch(c){case"play":h.play();break;case"pause":h.pause();break;case"reset":h.reset();break;case"restart":h.restart();break;case"finish":h.finish();break;case"init":h.init();break;case"setPosition":h.setPosition(parseFloat(u[0]));break;case"destroy":this.destroy(o)}}}const u_e="ng-animate-queued",a$="ng-animate-disabled",k_t=[],h_e={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},M_t={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},mu="__ng_removed";class l${constructor(o,a=""){this.namespaceId=a;const c=o&&o.hasOwnProperty("value");if(this.value=function P_t(l){return null!=l?l:null}(c?o.value:o),c){const h=sb(o);delete h.value,this.options=h}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(o){const a=o.params;if(a){const c=this.options.params;Object.keys(a).forEach(u=>{null==c[u]&&(c[u]=a[u])})}}}const _2="void",c$=new l$(_2);class E_t{constructor(o,a,c){this.id=o,this.hostElement=a,this._engine=c,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+o,vu(a,this._hostClassName)}listen(o,a,c,u){if(!this._triggers.hasOwnProperty(a))throw new Error(`Unable to listen on the animation trigger event "${c}" because the animation trigger "${a}" doesn't exist!`);if(null==c||0==c.length)throw new Error(`Unable to listen on the animation trigger "${a}" because the provided event is undefined!`);if(!function R_t(l){return"start"==l||"done"==l}(c))throw new Error(`The provided animation trigger event "${c}" for the animation trigger "${a}" is not supported!`);const h=Lc(this._elementListeners,o,[]),d={name:a,phase:c,callback:u};h.push(d);const f=Lc(this._engine.statesByElement,o,{});return f.hasOwnProperty(a)||(vu(o,D3),vu(o,D3+"-"+a),f[a]=c$),()=>{this._engine.afterFlush(()=>{const p=h.indexOf(d);p>=0&&h.splice(p,1),this._triggers[a]||delete f[a]})}}register(o,a){return!this._triggers[o]&&(this._triggers[o]=a,!0)}_getTrigger(o){const a=this._triggers[o];if(!a)throw new Error(`The provided animation trigger "${o}" has not been registered!`);return a}trigger(o,a,c,u=!0){const h=this._getTrigger(a),d=new u$(this.id,a,o);let f=this._engine.statesByElement.get(o);f||(vu(o,D3),vu(o,D3+"-"+a),this._engine.statesByElement.set(o,f={}));let p=f[a];const g=new l$(c,this.id);if(!(c&&c.hasOwnProperty("value"))&&p&&g.absorbOptions(p.options),f[a]=g,p||(p=c$),g.value!==_2&&p.value===g.value){if(!function L_t(l,o){const a=Object.keys(l),c=Object.keys(o);if(a.length!=c.length)return!1;for(let u=0;u<a.length;u++){const h=a[u];if(!o.hasOwnProperty(h)||l[h]!==o[h])return!1}return!0}(p.params,g.params)){const C=[],x=h.matchStyles(p.value,p.params,C),S=h.matchStyles(g.value,g.params,C);C.length?this._engine.reportError(C):this._engine.afterFlush(()=>{ev(o,x),Id(o,S)})}return}const y=Lc(this._engine.playersByElement,o,[]);y.forEach(C=>{C.namespaceId==this.id&&C.triggerName==a&&C.queued&&C.destroy()});let _=h.matchTransition(p.value,g.value,o,g.params),b=!1;if(!_){if(!u)return;_=h.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:o,triggerName:a,transition:_,fromState:p,toState:g,player:d,isFallbackTransition:b}),b||(vu(o,u_e),d.onStart(()=>{ob(o,u_e)})),d.onDone(()=>{let C=this.players.indexOf(d);C>=0&&this.players.splice(C,1);const x=this._engine.playersByElement.get(o);if(x){let S=x.indexOf(d);S>=0&&x.splice(S,1)}}),this.players.push(d),y.push(d),d}deregister(o){delete this._triggers[o],this._engine.statesByElement.forEach((a,c)=>{delete a[o]}),this._elementListeners.forEach((a,c)=>{this._elementListeners.set(c,a.filter(u=>u.name!=o))})}clearElementCache(o){this._engine.statesByElement.delete(o),this._elementListeners.delete(o);const a=this._engine.playersByElement.get(o);a&&(a.forEach(c=>c.destroy()),this._engine.playersByElement.delete(o))}_signalRemovalForInnerTriggers(o,a){const c=this._engine.driver.query(o,k3,!0);c.forEach(u=>{if(u[mu])return;const h=this._engine.fetchNamespacesByElement(u);h.size?h.forEach(d=>d.triggerLeaveAnimation(u,a,!1,!0)):this.clearElementCache(u)}),this._engine.afterFlushAnimationsDone(()=>c.forEach(u=>this.clearElementCache(u)))}triggerLeaveAnimation(o,a,c,u){const h=this._engine.statesByElement.get(o),d=new Map;if(h){const f=[];if(Object.keys(h).forEach(p=>{if(d.set(p,h[p].value),this._triggers[p]){const g=this.trigger(o,p,_2,u);g&&f.push(g)}}),f.length)return this._engine.markElementAsRemoved(this.id,o,!0,a,d),c&&Vg(f).onDone(()=>this._engine.processLeaveNode(o)),!0}return!1}prepareLeaveAnimationListeners(o){const a=this._elementListeners.get(o),c=this._engine.statesByElement.get(o);if(a&&c){const u=new Set;a.forEach(h=>{const d=h.name;if(u.has(d))return;u.add(d);const p=this._triggers[d].fallbackTransition,g=c[d]||c$,m=new l$(_2),v=new u$(this.id,d,o);this._engine.totalQueuedPlayers++,this._queue.push({element:o,triggerName:d,transition:p,fromState:g,toState:m,player:v,isFallbackTransition:!0})})}}removeNode(o,a){const c=this._engine;if(o.childElementCount&&this._signalRemovalForInnerTriggers(o,a),this.triggerLeaveAnimation(o,a,!0))return;let u=!1;if(c.totalAnimations){const h=c.players.length?c.playersByQueriedElement.get(o):[];if(h&&h.length)u=!0;else{let d=o;for(;d=d.parentNode;)if(c.statesByElement.get(d)){u=!0;break}}}if(this.prepareLeaveAnimationListeners(o),u)c.markElementAsRemoved(this.id,o,!1,a);else{const h=o[mu];(!h||h===h_e)&&(c.afterFlush(()=>this.clearElementCache(o)),c.destroyInnerAnimations(o),c._onRemovalComplete(o,a))}}insertNode(o,a){vu(o,this._hostClassName)}drainQueuedTransitions(o){const a=[];return this._queue.forEach(c=>{const u=c.player;if(u.destroyed)return;const h=c.element,d=this._elementListeners.get(h);d&&d.forEach(f=>{if(f.name==c.triggerName){const p=H9(h,c.triggerName,c.fromState.value,c.toState.value);p._data=o,z9(c.player,f.phase,p,f.callback)}}),u.markedForDestroy?this._engine.afterFlush(()=>{u.destroy()}):a.push(c)}),this._queue=[],a.sort((c,u)=>{const h=c.transition.ast.depCount,d=u.transition.ast.depCount;return 0==h||0==d?h-d:this._engine.driver.containsElement(c.element,u.element)?1:-1})}destroy(o){this.players.forEach(a=>a.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,o)}elementContainsData(o){let a=!1;return this._elementListeners.has(o)&&(a=!0),a=!!this._queue.find(c=>c.element===o)||a,a}}class A_t{constructor(o,a,c){this.bodyNode=o,this.driver=a,this._normalizer=c,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(u,h)=>{}}_onRemovalComplete(o,a){this.onRemovalComplete(o,a)}get queuedPlayers(){const o=[];return this._namespaceList.forEach(a=>{a.players.forEach(c=>{c.queued&&o.push(c)})}),o}createNamespace(o,a){const c=new E_t(o,a,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,a)?this._balanceNamespaceList(c,a):(this.newHostElements.set(a,c),this.collectEnterElement(a)),this._namespaceLookup[o]=c}_balanceNamespaceList(o,a){const c=this._namespaceList.length-1;if(c>=0){let u=!1;for(let h=c;h>=0;h--)if(this.driver.containsElement(this._namespaceList[h].hostElement,a)){this._namespaceList.splice(h+1,0,o),u=!0;break}u||this._namespaceList.splice(0,0,o)}else this._namespaceList.push(o);return this.namespacesByHostElement.set(a,o),o}register(o,a){let c=this._namespaceLookup[o];return c||(c=this.createNamespace(o,a)),c}registerTrigger(o,a,c){let u=this._namespaceLookup[o];u&&u.register(a,c)&&this.totalAnimations++}destroy(o,a){if(!o)return;const c=this._fetchNamespace(o);this.afterFlush(()=>{this.namespacesByHostElement.delete(c.hostElement),delete this._namespaceLookup[o];const u=this._namespaceList.indexOf(c);u>=0&&this._namespaceList.splice(u,1)}),this.afterFlushAnimationsDone(()=>c.destroy(a))}_fetchNamespace(o){return this._namespaceLookup[o]}fetchNamespacesByElement(o){const a=new Set,c=this.statesByElement.get(o);if(c){const u=Object.keys(c);for(let h=0;h<u.length;h++){const d=c[u[h]].namespaceId;if(d){const f=this._fetchNamespace(d);f&&a.add(f)}}}return a}trigger(o,a,c,u){if(V3(a)){const h=this._fetchNamespace(o);if(h)return h.trigger(a,c,u),!0}return!1}insertNode(o,a,c,u){if(!V3(a))return;const h=a[mu];if(h&&h.setForRemoval){h.setForRemoval=!1,h.setForMove=!0;const d=this.collectedLeaveElements.indexOf(a);d>=0&&this.collectedLeaveElements.splice(d,1)}if(o){const d=this._fetchNamespace(o);d&&d.insertNode(a,c)}u&&this.collectEnterElement(a)}collectEnterElement(o){this.collectedEnterElements.push(o)}markElementAsDisabled(o,a){a?this.disabledNodes.has(o)||(this.disabledNodes.add(o),vu(o,a$)):this.disabledNodes.has(o)&&(this.disabledNodes.delete(o),ob(o,a$))}removeNode(o,a,c,u){if(V3(a)){const h=o?this._fetchNamespace(o):null;if(h?h.removeNode(a,u):this.markElementAsRemoved(o,a,!1,u),c){const d=this.namespacesByHostElement.get(a);d&&d.id!==o&&d.removeNode(a,u)}}else this._onRemovalComplete(a,u)}markElementAsRemoved(o,a,c,u,h){this.collectedLeaveElements.push(a),a[mu]={namespaceId:o,setForRemoval:u,hasAnimation:c,removedBeforeQueried:!1,previousTriggersValues:h}}listen(o,a,c,u,h){return V3(a)?this._fetchNamespace(o).listen(a,c,u,h):()=>{}}_buildInstruction(o,a,c,u,h){return o.transition.build(this.driver,o.element,o.fromState.value,o.toState.value,c,u,o.fromState.options,o.toState.options,a,h)}destroyInnerAnimations(o){let a=this.driver.query(o,k3,!0);a.forEach(c=>this.destroyActiveAnimationsForElement(c)),0!=this.playersByQueriedElement.size&&(a=this.driver.query(o,Z9,!0),a.forEach(c=>this.finishActiveQueriedAnimationOnElement(c)))}destroyActiveAnimationsForElement(o){const a=this.playersByElement.get(o);a&&a.forEach(c=>{c.queued?c.markedForDestroy=!0:c.destroy()})}finishActiveQueriedAnimationOnElement(o){const a=this.playersByQueriedElement.get(o);a&&a.forEach(c=>c.finish())}whenRenderingDone(){return new Promise(o=>{if(this.players.length)return Vg(this.players).onDone(()=>o());o()})}processLeaveNode(o){var a;const c=o[mu];if(c&&c.setForRemoval){if(o[mu]=h_e,c.namespaceId){this.destroyInnerAnimations(o);const u=this._fetchNamespace(c.namespaceId);u&&u.clearElementCache(o)}this._onRemovalComplete(o,c.setForRemoval)}(null===(a=o.classList)||void 0===a?void 0:a.contains(a$))&&this.markElementAsDisabled(o,!1),this.driver.query(o,".ng-animate-disabled",!0).forEach(u=>{this.markElementAsDisabled(u,!1)})}flush(o=-1){let a=[];if(this.newHostElements.size&&(this.newHostElements.forEach((c,u)=>this._balanceNamespaceList(c,u)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let c=0;c<this.collectedEnterElements.length;c++)vu(this.collectedEnterElements[c],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const c=[];try{a=this._flushAnimations(c,o)}finally{for(let u=0;u<c.length;u++)c[u]()}}else for(let c=0;c<this.collectedLeaveElements.length;c++)this.processLeaveNode(this.collectedLeaveElements[c]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(c=>c()),this._flushFns=[],this._whenQuietFns.length){const c=this._whenQuietFns;this._whenQuietFns=[],a.length?Vg(a).onDone(()=>{c.forEach(u=>u())}):c.forEach(u=>u())}}reportError(o){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${o.join("\n")}`)}_flushAnimations(o,a){const c=new N3,u=[],h=new Map,d=[],f=new Map,p=new Map,g=new Map,m=new Set;this.disabledNodes.forEach(z=>{m.add(z);const $=this.driver.query(z,".ng-animate-queued",!0);for(let H=0;H<$.length;H++)m.add($[H])});const v=this.bodyNode,y=Array.from(this.statesByElement.keys()),_=p_e(y,this.collectedEnterElements),b=new Map;let C=0;_.forEach((z,$)=>{const H=q9+C++;b.set($,H),z.forEach(G=>vu(G,H))});const x=[],S=new Set,w=new Set;for(let z=0;z<this.collectedLeaveElements.length;z++){const $=this.collectedLeaveElements[z],H=$[mu];H&&H.setForRemoval&&(x.push($),S.add($),H.hasAnimation?this.driver.query($,".ng-star-inserted",!0).forEach(G=>S.add(G)):w.add($))}const O=new Map,T=p_e(y,Array.from(S));T.forEach((z,$)=>{const H=O3+C++;O.set($,H),z.forEach(G=>vu(G,H))}),o.push(()=>{_.forEach((z,$)=>{const H=b.get($);z.forEach(G=>ob(G,H))}),T.forEach((z,$)=>{const H=O.get($);z.forEach(G=>ob(G,H))}),x.forEach(z=>{this.processLeaveNode(z)})});const M=[],A=[];for(let z=this._namespaceList.length-1;z>=0;z--)this._namespaceList[z].drainQueuedTransitions(a).forEach(H=>{const G=H.player,W=H.element;if(M.push(G),this.collectedEnterElements.length){const Oe=W[mu];if(Oe&&Oe.setForMove){if(Oe.previousTriggersValues&&Oe.previousTriggersValues.has(H.triggerName)){const $e=Oe.previousTriggersValues.get(H.triggerName),Me=this.statesByElement.get(H.element);Me&&Me[H.triggerName]&&(Me[H.triggerName].value=$e)}return void G.destroy()}}const X=!v||!this.driver.containsElement(v,W),K=O.get(W),ae=b.get(W),se=this._buildInstruction(H,c,ae,K,X);if(se.errors&&se.errors.length)return void A.push(se);if(X)return G.onStart(()=>ev(W,se.fromStyles)),G.onDestroy(()=>Id(W,se.toStyles)),void u.push(G);if(H.isFallbackTransition)return G.onStart(()=>ev(W,se.fromStyles)),G.onDestroy(()=>Id(W,se.toStyles)),void u.push(G);const Ce=[];se.timelines.forEach(Oe=>{Oe.stretchStartingKeyframe=!0,this.disabledNodes.has(Oe.element)||Ce.push(Oe)}),se.timelines=Ce,c.append(W,se.timelines),d.push({instruction:se,player:G,element:W}),se.queriedElements.forEach(Oe=>Lc(f,Oe,[]).push(G)),se.preStyleProps.forEach((Oe,$e)=>{const Me=Object.keys(Oe);if(Me.length){let Ie=p.get($e);Ie||p.set($e,Ie=new Set),Me.forEach(Xe=>Ie.add(Xe))}}),se.postStyleProps.forEach((Oe,$e)=>{const Me=Object.keys(Oe);let Ie=g.get($e);Ie||g.set($e,Ie=new Set),Me.forEach(Xe=>Ie.add(Xe))})});if(A.length){const z=[];A.forEach($=>{z.push(`@${$.triggerName} has failed due to:\n`),$.errors.forEach(H=>z.push(`- ${H}\n`))}),M.forEach($=>$.destroy()),this.reportError(z)}const I=new Map,E=new Map;d.forEach(z=>{const $=z.element;c.has($)&&(E.set($,$),this._beforeAnimationBuild(z.player.namespaceId,z.instruction,I))}),u.forEach(z=>{const $=z.element;this._getPreviousPlayers($,!1,z.namespaceId,z.triggerName,null).forEach(G=>{Lc(I,$,[]).push(G),G.destroy()})});const P=x.filter(z=>m_e(z,p,g)),B=new Map;f_e(B,this.driver,w,g,Jd).forEach(z=>{m_e(z,p,g)&&P.push(z)});const Q=new Map;_.forEach((z,$)=>{f_e(Q,this.driver,new Set(z),p,"!")}),P.forEach(z=>{const $=B.get(z),H=Q.get(z);B.set(z,Object.assign(Object.assign({},$),H))});const j=[],N=[],U={};d.forEach(z=>{const{element:$,player:H,instruction:G}=z;if(c.has($)){if(m.has($))return H.onDestroy(()=>Id($,G.toStyles)),H.disabled=!0,H.overrideTotalTime(G.totalTime),void u.push(H);let W=U;if(E.size>1){let K=$;const ae=[];for(;K=K.parentNode;){const se=E.get(K);if(se){W=se;break}ae.push(K)}ae.forEach(se=>E.set(se,W))}const X=this._buildAnimation(H.namespaceId,G,I,h,Q,B);if(H.setRealPlayer(X),W===U)j.push(H);else{const K=this.playersByElement.get(W);K&&K.length&&(H.parentPlayer=Vg(K)),u.push(H)}}else ev($,G.fromStyles),H.onDestroy(()=>Id($,G.toStyles)),N.push(H),m.has($)&&u.push(H)}),N.forEach(z=>{const $=h.get(z.element);if($&&$.length){const H=Vg($);z.setRealPlayer(H)}}),u.forEach(z=>{z.parentPlayer?z.syncPlayerEvents(z.parentPlayer):z.destroy()});for(let z=0;z<x.length;z++){const $=x[z],H=$[mu];if(ob($,O3),H&&H.hasAnimation)continue;let G=[];if(f.size){let X=f.get($);X&&X.length&&G.push(...X);let K=this.driver.query($,Z9,!0);for(let ae=0;ae<K.length;ae++){let se=f.get(K[ae]);se&&se.length&&G.push(...se)}}const W=G.filter(X=>!X.destroyed);W.length?F_t(this,$,W):this.processLeaveNode($)}return x.length=0,j.forEach(z=>{this.players.push(z),z.onDone(()=>{z.destroy();const $=this.players.indexOf(z);this.players.splice($,1)}),z.play()}),j}elementContainsData(o,a){let c=!1;const u=a[mu];return u&&u.setForRemoval&&(c=!0),this.playersByElement.has(a)&&(c=!0),this.playersByQueriedElement.has(a)&&(c=!0),this.statesByElement.has(a)&&(c=!0),this._fetchNamespace(o).elementContainsData(a)||c}afterFlush(o){this._flushFns.push(o)}afterFlushAnimationsDone(o){this._whenQuietFns.push(o)}_getPreviousPlayers(o,a,c,u,h){let d=[];if(a){const f=this.playersByQueriedElement.get(o);f&&(d=f)}else{const f=this.playersByElement.get(o);if(f){const p=!h||h==_2;f.forEach(g=>{g.queued||!p&&g.triggerName!=u||d.push(g)})}}return(c||u)&&(d=d.filter(f=>!(c&&c!=f.namespaceId||u&&u!=f.triggerName))),d}_beforeAnimationBuild(o,a,c){const h=a.element,d=a.isRemovalTransition?void 0:o,f=a.isRemovalTransition?void 0:a.triggerName;for(const p of a.timelines){const g=p.element,m=g!==h,v=Lc(c,g,[]);this._getPreviousPlayers(g,m,d,f,a.toState).forEach(_=>{const b=_.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),_.destroy(),v.push(_)})}ev(h,a.fromStyles)}_buildAnimation(o,a,c,u,h,d){const f=a.triggerName,p=a.element,g=[],m=new Set,v=new Set,y=a.timelines.map(b=>{const C=b.element;m.add(C);const x=C[mu];if(x&&x.removedBeforeQueried)return new ly(b.duration,b.delay);const S=C!==p,w=function N_t(l){const o=[];return g_e(l,o),o}((c.get(C)||k_t).map(I=>I.getRealPlayer())).filter(I=>!!I.element&&I.element===C),O=h.get(C),T=d.get(C),M=$ye(0,this._normalizer,0,b.keyframes,O,T),A=this._buildPlayer(b,M,w);if(b.subTimeline&&u&&v.add(C),S){const I=new u$(o,f,C);I.setRealPlayer(A),g.push(I)}return A});g.forEach(b=>{Lc(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>function I_t(l,o,a){let c;if(l instanceof Map){if(c=l.get(o),c){if(c.length){const u=c.indexOf(a);c.splice(u,1)}0==c.length&&l.delete(o)}}else if(c=l[o],c){if(c.length){const u=c.indexOf(a);c.splice(u,1)}0==c.length&&delete l[o]}return c}(this.playersByQueriedElement,b.element,b))}),m.forEach(b=>vu(b,Xye));const _=Vg(y);return _.onDestroy(()=>{m.forEach(b=>ob(b,Xye)),Id(p,a.toStyles)}),v.forEach(b=>{Lc(u,b,[]).push(_)}),_}_buildPlayer(o,a,c){return a.length>0?this.driver.animate(o.element,a,o.duration,o.delay,o.easing,c):new ly(o.duration,o.delay)}}class u${constructor(o,a,c){this.namespaceId=o,this.triggerName=a,this.element=c,this._player=new ly,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(o){this._containsRealPlayer||(this._player=o,Object.keys(this._queuedCallbacks).forEach(a=>{this._queuedCallbacks[a].forEach(c=>z9(o,a,void 0,c))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(o.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(o){this.totalTime=o}syncPlayerEvents(o){const a=this._player;a.triggerCallback&&o.onStart(()=>a.triggerCallback("start")),o.onDone(()=>this.finish()),o.onDestroy(()=>this.destroy())}_queueEvent(o,a){Lc(this._queuedCallbacks,o,[]).push(a)}onDone(o){this.queued&&this._queueEvent("done",o),this._player.onDone(o)}onStart(o){this.queued&&this._queueEvent("start",o),this._player.onStart(o)}onDestroy(o){this.queued&&this._queueEvent("destroy",o),this._player.onDestroy(o)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(o){this.queued||this._player.setPosition(o)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(o){const a=this._player;a.triggerCallback&&a.triggerCallback(o)}}function V3(l){return l&&1===l.nodeType}function d_e(l,o){const a=l.style.display;return l.style.display=null!=o?o:"none",a}function f_e(l,o,a,c,u){const h=[];a.forEach(p=>h.push(d_e(p)));const d=[];c.forEach((p,g)=>{const m={};p.forEach(v=>{const y=m[v]=o.computeStyle(g,v,u);(!y||0==y.length)&&(g[mu]=M_t,d.push(g))}),l.set(g,m)});let f=0;return a.forEach(p=>d_e(p,h[f++])),d}function p_e(l,o){const a=new Map;if(l.forEach(f=>a.set(f,[])),0==o.length)return a;const u=new Set(o),h=new Map;function d(f){if(!f)return 1;let p=h.get(f);if(p)return p;const g=f.parentNode;return p=a.has(g)?g:u.has(g)?1:d(g),h.set(f,p),p}return o.forEach(f=>{const p=d(f);1!==p&&a.get(p).push(f)}),a}function vu(l,o){var a;null===(a=l.classList)||void 0===a||a.add(o)}function ob(l,o){var a;null===(a=l.classList)||void 0===a||a.remove(o)}function F_t(l,o,a){Vg(a).onDone(()=>l.processLeaveNode(o))}function g_e(l,o){for(let a=0;a<l.length;a++){const c=l[a];c instanceof vY?g_e(c.players,o):o.push(c)}}function m_e(l,o,a){const c=a.get(l);if(!c)return!1;let u=o.get(l);return u?c.forEach(h=>u.add(h)):o.set(l,c),a.delete(l),!0}class z3{constructor(o,a,c){this.bodyNode=o,this._driver=a,this._normalizer=c,this._triggerCache={},this.onRemovalComplete=(u,h)=>{},this._transitionEngine=new A_t(o,a,c),this._timelineEngine=new S_t(o,a,c),this._transitionEngine.onRemovalComplete=(u,h)=>this.onRemovalComplete(u,h)}registerTrigger(o,a,c,u,h){const d=o+"-"+u;let f=this._triggerCache[d];if(!f){const p=[],g=e$(this._driver,h,p);if(p.length)throw new Error(`The animation trigger "${u}" has failed to build due to the following errors:\n - ${p.join("\n - ")}`);f=function __t(l,o,a){return new b_t(l,o,a)}(u,g,this._normalizer),this._triggerCache[d]=f}this._transitionEngine.registerTrigger(a,u,f)}register(o,a){this._transitionEngine.register(o,a)}destroy(o,a){this._transitionEngine.destroy(o,a)}onInsert(o,a,c,u){this._transitionEngine.insertNode(o,a,c,u)}onRemove(o,a,c,u){this._transitionEngine.removeNode(o,a,u||!1,c)}disableAnimations(o,a){this._transitionEngine.markElementAsDisabled(o,a)}process(o,a,c,u){if("@"==c.charAt(0)){const[h,d]=Wye(c);this._timelineEngine.command(h,a,d,u)}else this._transitionEngine.trigger(o,a,c,u)}listen(o,a,c,u,h){if("@"==c.charAt(0)){const[d,f]=Wye(c);return this._timelineEngine.listen(d,a,f,h)}return this._transitionEngine.listen(o,a,c,u,h)}flush(o=-1){this._transitionEngine.flush(o)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function v_e(l,o){let a=null,c=null;return Array.isArray(o)&&o.length?(a=h$(o[0]),o.length>1&&(c=h$(o[o.length-1]))):o&&(a=h$(o)),a||c?new B_t(l,a,c):null}let B_t=(()=>{class l{constructor(a,c,u){this._element=a,this._startStyles=c,this._endStyles=u,this._state=0;let h=l.initialStylesByElement.get(a);h||l.initialStylesByElement.set(a,h={}),this._initialStyles=h}start(){this._state<1&&(this._startStyles&&Id(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Id(this._element,this._initialStyles),this._endStyles&&(Id(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(l.initialStylesByElement.delete(this._element),this._startStyles&&(ev(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ev(this._element,this._endStyles),this._endStyles=null),Id(this._element,this._initialStyles),this._state=3)}}return l.initialStylesByElement=new WeakMap,l})();function h$(l){let o=null;const a=Object.keys(l);for(let c=0;c<a.length;c++){const u=a[c];V_t(u)&&(o=o||{},o[u]=l[u])}return o}function V_t(l){return"display"===l||"position"===l}const __e="animationend";class H_t{constructor(o,a,c,u,h,d,f){this._element=o,this._name=a,this._duration=c,this._delay=u,this._easing=h,this._fillMode=d,this._onDoneFn=f,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=p=>this._handleCallback(p)}apply(){(function $_t(l,o){const a=f$(l,"").trim();let c=0;a.length&&(c=function G_t(l,o){let a=0;for(let c=0;c<l.length;c++)l.charAt(c)===o&&a++;return a}(a,",")+1,o=`${a}, ${o}`),U3(l,"",o)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),C_e(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){b_e(this._element,this._name,"paused")}resume(){b_e(this._element,this._name,"running")}setPosition(o){const a=x_e(this._element,this._name);this._position=o*this._duration,U3(this._element,"Delay",`-${this._position}ms`,a)}getPosition(){return this._position}_handleCallback(o){const a=o._ngTestManualTimestamp||Date.now(),c=1e3*parseFloat(o.elapsedTime.toFixed(3));o.animationName==this._name&&Math.max(a-this._startTime,0)>=this._delay&&c>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),C_e(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function W_t(l,o){const c=f$(l,"").split(","),u=d$(c,o);u>=0&&(c.splice(u,1),U3(l,"",c.join(",")))}(this._element,this._name))}}function b_e(l,o,a){U3(l,"PlayState",a,x_e(l,o))}function x_e(l,o){const a=f$(l,"");return a.indexOf(",")>0?d$(a.split(","),o):d$([a],o)}function d$(l,o){for(let a=0;a<l.length;a++)if(l[a].indexOf(o)>=0)return a;return-1}function C_e(l,o,a){a?l.removeEventListener(__e,o):l.addEventListener(__e,o)}function U3(l,o,a,c){const u="animation"+o;if(null!=c){const h=l.style[u];if(h.length){const d=h.split(",");d[c]=a,a=d.join(",")}}l.style[u]=a}function f$(l,o){return l.style["animation"+o]||""}class S_e{constructor(o,a,c,u,h,d,f,p){this.element=o,this.keyframes=a,this.animationName=c,this._duration=u,this._delay=h,this._finalStyles=f,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=d||"linear",this.totalTime=u+h,this._buildStyler()}onStart(o){this._onStartFns.push(o)}onDone(o){this._onDoneFns.push(o)}onDestroy(o){this._onDestroyFns.push(o)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(o=>o()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(o=>o()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(o=>o()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(o){this._styler.setPosition(o)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new H_t(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(o){const a="start"==o?this._onStartFns:this._onDoneFns;a.forEach(c=>c()),a.length=0}beforeDestroy(){this.init();const o={};if(this.hasStarted()){const a=this._state>=3;Object.keys(this._finalStyles).forEach(c=>{"offset"!=c&&(o[c]=a?this._finalStyles[c]:J9(this.element,c))})}this.currentSnapshot=o}}class q_t extends ly{constructor(o,a){super(),this.element=o,this._startingStyles={},this.__initialized=!1,this._styles=jye(a)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(o=>{this._startingStyles[o]=this.element.style[o]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(o=>this.element.style.setProperty(o,this._styles[o])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(o=>{const a=this._startingStyles[o];a?this.element.style.setProperty(o,a):this.element.style.removeProperty(o)}),this._startingStyles=null,super.destroy())}}class T_e{constructor(){this._count=0}validateStyleProperty(o){return W9(o)}matchesElement(o,a){return!1}containsElement(o,a){return G9(o,a)}query(o,a,c){return Q9(o,a,c)}computeStyle(o,a,c){return window.getComputedStyle(o)[a]}buildKeyframeElement(o,a,c){c=c.map(f=>jye(f));let u=`@keyframes ${a} {\n`,h="";c.forEach(f=>{h=" ";const p=parseFloat(f.offset);u+=`${h}${100*p}% {\n`,h+=" ",Object.keys(f).forEach(g=>{const m=f[g];switch(g){case"offset":return;case"easing":return void(m&&(u+=`${h}animation-timing-function: ${m};\n`));default:return void(u+=`${h}${g}: ${m};\n`)}}),u+=`${h}}\n`}),u+="}\n";const d=document.createElement("style");return d.textContent=u,d}animate(o,a,c,u,h,d=[],f){const p=d.filter(x=>x instanceof S_e),g={};t_e(c,u)&&p.forEach(x=>{let S=x.currentSnapshot;Object.keys(S).forEach(w=>g[w]=S[w])});const m=function Y_t(l){let o={};return l&&(Array.isArray(l)?l:[l]).forEach(c=>{Object.keys(c).forEach(u=>{"offset"==u||"easing"==u||(o[u]=c[u])})}),o}(a=n_e(o,a,g));if(0==c)return new q_t(o,m);const v="gen_css_kf_"+this._count++,y=this.buildKeyframeElement(o,v,a);(function X_t(l){var o;const a=null===(o=l.getRootNode)||void 0===o?void 0:o.call(l);return"undefined"!=typeof ShadowRoot&&a instanceof ShadowRoot?a:document.head})(o).appendChild(y);const b=v_e(o,a),C=new S_e(o,a,v,c,u,h,m,b);return C.onDestroy(()=>function K_t(l){l.parentNode.removeChild(l)}(y)),C}}class D_e{constructor(o,a,c,u){this.element=o,this.keyframes=a,this.options=c,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=c.duration,this._delay=c.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(o=>o()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const o=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,o,this.options),this._finalKeyframe=o.length?o[o.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(o,a,c){return o.animate(a,c)}onStart(o){this._onStartFns.push(o)}onDone(o){this._onDoneFns.push(o)}onDestroy(o){this._onDestroyFns.push(o)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(o=>o()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(o=>o()),this._onDestroyFns=[])}setPosition(o){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=o*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const o={};if(this.hasStarted()){const a=this._finalKeyframe;Object.keys(a).forEach(c=>{"offset"!=c&&(o[c]=this._finished?a[c]:J9(this.element,c))})}this.currentSnapshot=o}triggerCallback(o){const a="start"==o?this._onStartFns:this._onDoneFns;a.forEach(c=>c()),a.length=0}}class J_t{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(k_e().toString()),this._cssKeyframesDriver=new T_e}validateStyleProperty(o){return W9(o)}matchesElement(o,a){return!1}containsElement(o,a){return G9(o,a)}query(o,a,c){return Q9(o,a,c)}computeStyle(o,a,c){return window.getComputedStyle(o)[a]}overrideWebAnimationsSupport(o){this._isNativeImpl=o}animate(o,a,c,u,h,d=[],f){if(!f&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(o,a,c,u,h,d);const m={duration:c,delay:u,fill:0==u?"both":"forwards"};h&&(m.easing=h);const v={},y=d.filter(b=>b instanceof D_e);t_e(c,u)&&y.forEach(b=>{let C=b.currentSnapshot;Object.keys(C).forEach(x=>v[x]=C[x])});const _=v_e(o,a=n_e(o,a=a.map(b=>zg(b,!1)),v));return new D_e(o,a,m,_)}}function k_e(){return Hye()&&Element.prototype.animate||{}}let t1t=(()=>{class l extends pY{constructor(a,c){super(),this._nextAnimationId=0,this._renderer=a.createRenderer(c.body,{id:"0",encapsulation:Cu.None,styles:[],data:{animation:[]}})}build(a){const c=this._nextAnimationId.toString();this._nextAnimationId++;const u=Array.isArray(a)?gY(a):a;return M_e(this._renderer,null,c,"register",[u]),new n1t(c,this._renderer)}}return l.\u0275fac=function(a){return new(a||l)(Ae(jv),Ae(is))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class n1t extends class VAe{}{constructor(o,a){super(),this._id=o,this._renderer=a}create(o,a){return new i1t(this._id,o,a||{},this._renderer)}}class i1t{constructor(o,a,c,u){this.id=o,this.element=a,this._renderer=u,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",c)}_listen(o,a){return this._renderer.listen(this.element,`@@${this.id}:${o}`,a)}_command(o,...a){return M_e(this._renderer,this.element,this.id,o,a)}onDone(o){this._listen("done",o)}onStart(o){this._listen("start",o)}onDestroy(o){this._listen("destroy",o)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(o){this._command("setPosition",o)}getPosition(){var o,a;return null!==(a=null===(o=this._renderer.engine.players[+this.id])||void 0===o?void 0:o.getPosition())&&void 0!==a?a:0}}function M_e(l,o,a,c,u){return l.setProperty(o,`@@${a}:${c}`,u)}const E_e="@.disabled";let r1t=(()=>{class l{constructor(a,c,u){this.delegate=a,this.engine=c,this._zone=u,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),c.onRemovalComplete=(h,d)=>{const f=null==d?void 0:d.parentNode(h);f&&d.removeChild(f,h)}}createRenderer(a,c){const h=this.delegate.createRenderer(a,c);if(!(a&&c&&c.data&&c.data.animation)){let m=this._rendererCache.get(h);return m||(m=new A_e("",h,this.engine),this._rendererCache.set(h,m)),m}const d=c.id,f=c.id+"-"+this._currentId;this._currentId++,this.engine.register(f,a);const p=m=>{Array.isArray(m)?m.forEach(p):this.engine.registerTrigger(d,f,a,m.name,m)};return c.data.animation.forEach(p),new s1t(this,f,h,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(a,c,u){a>=0&&a<this._microtaskId?this._zone.run(()=>c(u)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(h=>{const[d,f]=h;d(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([c,u]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return l.\u0275fac=function(a){return new(a||l)(Ae(jv),Ae(z3),Ae(mr))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class A_e{constructor(o,a,c){this.namespaceId=o,this.delegate=a,this.engine=c,this.destroyNode=this.delegate.destroyNode?u=>a.destroyNode(u):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(o,a){return this.delegate.createElement(o,a)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}appendChild(o,a){this.delegate.appendChild(o,a),this.engine.onInsert(this.namespaceId,a,o,!1)}insertBefore(o,a,c,u=!0){this.delegate.insertBefore(o,a,c),this.engine.onInsert(this.namespaceId,a,o,u)}removeChild(o,a,c){this.engine.onRemove(this.namespaceId,a,this.delegate,c)}selectRootElement(o,a){return this.delegate.selectRootElement(o,a)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,a,c,u){this.delegate.setAttribute(o,a,c,u)}removeAttribute(o,a,c){this.delegate.removeAttribute(o,a,c)}addClass(o,a){this.delegate.addClass(o,a)}removeClass(o,a){this.delegate.removeClass(o,a)}setStyle(o,a,c,u){this.delegate.setStyle(o,a,c,u)}removeStyle(o,a,c){this.delegate.removeStyle(o,a,c)}setProperty(o,a,c){"@"==a.charAt(0)&&a==E_e?this.disableAnimations(o,!!c):this.delegate.setProperty(o,a,c)}setValue(o,a){this.delegate.setValue(o,a)}listen(o,a,c){return this.delegate.listen(o,a,c)}disableAnimations(o,a){this.engine.disableAnimations(o,a)}}class s1t extends A_e{constructor(o,a,c,u){super(a,c,u),this.factory=o,this.namespaceId=a}setProperty(o,a,c){"@"==a.charAt(0)?"."==a.charAt(1)&&a==E_e?this.disableAnimations(o,c=void 0===c||!!c):this.engine.process(this.namespaceId,o,a.substr(1),c):this.delegate.setProperty(o,a,c)}listen(o,a,c){if("@"==a.charAt(0)){const u=function o1t(l){switch(l){case"body":return document.body;case"document":return document;case"window":return window;default:return l}}(o);let h=a.substr(1),d="";return"@"!=h.charAt(0)&&([h,d]=function a1t(l){const o=l.indexOf(".");return[l.substring(0,o),l.substr(o+1)]}(h)),this.engine.listen(this.namespaceId,u,h,d,f=>{this.factory.scheduleListenerCallback(f._data||-1,c,f)})}return this.delegate.listen(o,a,c)}}let l1t=(()=>{class l extends z3{constructor(a,c,u){super(a.body,c,u)}ngOnDestroy(){this.flush()}}return l.\u0275fac=function(a){return new(a||l)(Ae(is),Ae(j9),Ae(s$))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();const I_e=new Zn("AnimationModuleType"),P_e=[{provide:pY,useClass:t1t},{provide:s$,useFactory:function u1t(){return new p_t}},{provide:z3,useClass:l1t},{provide:jv,useFactory:function h1t(l,o,a){return new r1t(l,o,a)},deps:[jT,z3,mr]}],R_e=[{provide:j9,useFactory:function c1t(){return function e1t(){return"function"==typeof k_e()}()?new J_t:new T_e}},{provide:I_e,useValue:"BrowserAnimations"},...P_e],d1t=[{provide:j9,useClass:qye},{provide:I_e,useValue:"NoopAnimations"},...P_e];let f1t=(()=>{class l{static withConfig(a){return{ngModule:l,providers:a.disableAnimations?d1t:R_e}}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l}),l.\u0275inj=On({providers:R_e,imports:[EZ]}),l})();function p1t(l,o){if(1&l){const a=gt();D(0,"div",11),ee("click",function(){return Le(a),Z().$implicit.onButtonClick()}),D(1,"button",12),ne(2),k(),k()}if(2&l){const a=Z().$implicit;R(2),en(a.buttonText)}}function g1t(l,o){if(1&l&&(D(0,"div",6),D(1,"div",7),me(2,"clr-icon",8),k(),D(3,"div",9),ne(4),k(),Y(5,p1t,3,1,"div",10),k()),2&l){const a=o.$implicit;R(4),vi(" ",a.text," "),R(1),F("ngIf",a.buttonText)}}function m1t(l,o){if(1&l&&(D(0,"div",1),D(1,"div",2),Y(2,g1t,6,2,"div",3),k(),D(3,"button",4),me(4,"clr-icon",5),k(),k()),2&l){const a=Z();R(2),F("ngForOf",a.config.alerts)}}let v1t=(()=>{class l{constructor(a){this.config=a,this.id=0}isShowType(a){return this.config.showType==a}ngOnInit(){let a=++this.id,u=()=>{a===this.id&&(this.update(),this.config.post(u,1e3))};this.config.post(u,1e3)}ngOnDestroy(){++this.id}update(){!this.config.alerts||0==this.config.alerts.length||this.config.alerts.map(a=>a).forEach(a=>{a.update()||a.remove()})}}return l.\u0275fac=function(a){return new(a||l)(L(an))},l.\u0275cmp=qe({type:l,selectors:[["app-alerts"]],decls:1,vars:1,consts:[["class","alert alert-app-level alert-info","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-app-level","alert-info"],[1,"alert-items"],["class","alert-item static",4,"ngFor","ngForOf"],["type","button","aria-label","Close",1,"close"],["aria-hidden","true","shape","close"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],["shape","exclamation-circle",1,"alert-icon"],[1,"alert-text"],["class","alert-actions",3,"click",4,"ngIf"],[1,"alert-actions",3,"click"],[1,"btn","alert-action"]],template:function(a,c){1&a&&Y(0,m1t,5,1,"div",0),2&a&&F("ngIf",c.config.alerts.length>0)},directives:[yn,_i,Ws,tD],styles:[""]}),l})();const y1t=function(l){return{"nav-link":!0,"nav-icon":!0,active:l}},_1t=function(l,o){return{"has-badge":l,"has-alert":o}};function b1t(l,o){if(1&l){const a=gt();D(0,"a",7),ee("click",function(u){const d=Le(a).$implicit;return Z(2).navigateTo(u,d)}),me(1,"clr-icon",1),k()}if(2&l){const a=o.$implicit,c=Z(2);F("ngClass",eo(3,y1t,c.isActive(a))),R(1),F("ngClass",ps(5,_1t,a.hasBadge,a.hasAlert)),et("shape",a.shape)}}const x1t=function(l){return{header:!0,"header-6":!0,bgmaroon:l,"no-print":!0}};function C1t(l,o){if(1&l){const a=gt();D(0,"header"),D(1,"div",3),ee("click",function(){return Le(a),Z().onRootRoute()}),me(2,"app-svg-js-image",4),k(),D(3,"div",5),Y(4,b1t,2,8,"a",6),k(),k()}if(2&l){const a=Z();B4(eo(6,x1t,a.isRedTheme())),R(2),F("svgWidth",128)("svgHeight",32)("logoText",a.getTitle()),R(2),F("ngForOf",a.getLinks())}}const S1t=function(l){return{"main-container":l}},w1t=function(l){return{"content-container":l}},T1t=function(l){return{"content-area":l}};let O1t=(()=>{class l{constructor(a,c,u){this.router=a,this.config=c,this.uiConfig=u,this.names=[qn.builder().setLink("https://deviskin.github.io").setName("Deviskin")]}get applicationInfo(){return this.config.getApplication()}ngOnInit(){}navigateTo(a,c){c.onClick?c.onClick(c):(this.uiConfig.ui.defaultAppRoute.setStringValue(c.link),this.router.navigate([c.link]))}navigateToMain(a){this.router.navigate(["/main"])}isActive(a){return a.isActive?a.isActive(a):this.router.isActive(a.link,!1)}isUpperMenuEnabled(){return!0}isLeftBarEnabled(){return!1}isRightBarEnabled(){return!1}isFooterBarEnabled(){return!1}onCompiler(){this.router.navigate(["/compiler"])}isRedTheme(){return!1}onRootRoute(){this.config.setShowLogin(!1)}getTitle(){return this.applicationInfo.name}getLinks(){return this.uiConfig.appRoutes||this.applicationInfo.routes}isMainContainerEnabled(){return this.uiConfig.mainContainerEnabled}}return l.\u0275fac=function(a){return new(a||l)(L(Ps),L(an),L(Xn))},l.\u0275cmp=qe({type:l,selectors:[["app-default"]],decls:6,vars:10,consts:[[1,"clr-example"],[3,"ngClass"],[3,"class",4,"ngIf"],[1,"logotypeImage","cursor",3,"click"],[3,"svgWidth","svgHeight","logoText"],[1,"header-nav"],["href","javascript://",3,"ngClass","click",4,"ngFor","ngForOf"],["href","javascript://",3,"ngClass","click"]],template:function(a,c){1&a&&(D(0,"div",0),D(1,"div",1),Y(2,C1t,5,8,"header",2),D(3,"div",1),D(4,"div",1),me(5,"router-outlet"),k(),k(),k(),k()),2&a&&(R(1),F("ngClass",eo(4,S1t,c.isMainContainerEnabled())),R(1),F("ngIf",c.isUpperMenuEnabled()),R(1),F("ngClass",eo(6,w1t,c.isMainContainerEnabled())),R(1),F("ngClass",eo(8,T1t,c.isMainContainerEnabled())))},directives:[ii,yn,mc,_i,Ws,iF],styles:[".logotypeImage[_ngcontent-%COMP%]{width:150px;height:100%;padding-right:10px;padding-left:10px}.clr-example[_ngcontent-%COMP%]{padding:0;overflow:hidden}.clr-example[_ngcontent-%COMP%]   .example-aside-section[_ngcontent-%COMP%]{width:20%;padding:24px;border:1px solid}.clr-example[_ngcontent-%COMP%]   .example-footer[_ngcontent-%COMP%]{height:40px;padding-top:0;padding-bottom:10px;padding-left:24px}"]}),l})();function D1t(l,o){1&l&&me(0,"app-default")}function k1t(l,o){1&l&&me(0,"app-login")}function M1t(l,o){1&l&&me(0,"app-three-logo",2),2&l&&F("fullScreen",!0)}let E1t=(()=>{class l{constructor(a,c,u){this.router=a,this.config=c,this.themeSvc=u}isShowType(a){return this.config.showType==a}ngOnInit(){this.themeSvc.applyTheme()}}return l.\u0275fac=function(a){return new(a||l)(L(Ps),L(an),L(Mo))},l.\u0275cmp=qe({type:l,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"],["class","fullSize",3,"fullScreen",4,"ngIf"],[1,"fullSize",3,"fullScreen"]],template:function(a,c){1&a&&(me(0,"app-alerts"),Y(1,D1t,1,0,"app-default",0),Y(2,k1t,1,0,"app-login",0),Y(3,M1t,1,1,"app-three-logo",1)),2&a&&(R(1),F("ngIf",c.isShowType("normal")),R(1),F("ngIf",c.isShowType("login")),R(1),F("ngIf",c.isShowType("login3d")))},directives:[v1t,yn,O1t,Uye,zye],styles:[".fullSize[_ngcontent-%COMP%]{width:100vw;height:100vh}"]}),l})();const Pd=void 0,I1t=["ru",[["AM","PM"],Pd,Pd],Pd,[["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],Pd,["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"]],[["\u0412","\u041f","\u0412","\u0421","\u0427","\u041f","\u0421"],["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"]],[["\u042f","\u0424","\u041c","\u0410","\u041c","\u0418","\u0418","\u0410","\u0421","\u041e","\u041d","\u0414"],["\u044f\u043d\u0432.","\u0444\u0435\u0432\u0440.","\u043c\u0430\u0440.","\u0430\u043f\u0440.","\u043c\u0430\u044f","\u0438\u044e\u043d.","\u0438\u044e\u043b.","\u0430\u0432\u0433.","\u0441\u0435\u043d\u0442.","\u043e\u043a\u0442.","\u043d\u043e\u044f\u0431.","\u0434\u0435\u043a."],["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"]],[["\u042f","\u0424","\u041c","\u0410","\u041c","\u0418","\u0418","\u0410","\u0421","\u041e","\u041d","\u0414"],["\u044f\u043d\u0432.","\u0444\u0435\u0432\u0440.","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440.","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433.","\u0441\u0435\u043d\u0442.","\u043e\u043a\u0442.","\u043d\u043e\u044f\u0431.","\u0434\u0435\u043a."],["\u044f\u043d\u0432\u0430\u0440\u044c","\u0444\u0435\u0432\u0440\u0430\u043b\u044c","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440\u0435\u043b\u044c","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u043e\u043a\u0442\u044f\u0431\u0440\u044c","\u043d\u043e\u044f\u0431\u0440\u044c","\u0434\u0435\u043a\u0430\u0431\u0440\u044c"]],[["\u0434\u043e \u043d.\u044d.","\u043d.\u044d."],["\u0434\u043e \u043d. \u044d.","\u043d. \u044d."],["\u0434\u043e \u0420\u043e\u0436\u0434\u0435\u0441\u0442\u0432\u0430 \u0425\u0440\u0438\u0441\u0442\u043e\u0432\u0430","\u043e\u0442 \u0420\u043e\u0436\u0434\u0435\u0441\u0442\u0432\u0430 \u0425\u0440\u0438\u0441\u0442\u043e\u0432\u0430"]],1,[6,0],["dd.MM.y","d MMM y '\u0433'.","d MMMM y '\u0433'.","EEEE, d MMMM y '\u0433'."],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",Pd,Pd,Pd],[",","\xa0",";","%","+","-","E","\xd7","\u2030","\u221e","\u043d\u0435\xa0\u0447\u0438\u0441\u043b\u043e",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"RUB","\u20bd","\u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439 \u0440\u0443\u0431\u043b\u044c",{GEL:[Pd,"\u10da"],PHP:[Pd,"\u20b1"],RON:[Pd,"L"],RUB:["\u20bd"],RUR:["\u0440."],THB:["\u0e3f"],TMT:["\u0422\u041c\u0422"],TWD:["NT$"],UAH:["\u20b4"],XXX:["XXXX"]},"ltr",function A1t(l){const a=Math.floor(Math.abs(l)),c=l.toString().replace(/^[^.]*\.?/,"").length;return 0===c&&a%10==1&&a%100!=11?1:0===c&&a%10===Math.floor(a%10)&&a%10>=2&&a%10<=4&&!(a%100>=12&&a%100<=14)?3:0===c&&a%10==0||0===c&&a%10===Math.floor(a%10)&&a%10>=5&&a%10<=9||0===c&&a%100===Math.floor(a%100)&&a%100>=11&&a%100<=14?4:5}];let R1t=(()=>{class l{constructor(a){this.config=a}intercept(a,c){let u=a.headers.set("X-Requested-With","XMLHttpRequest");this.config.authBody&&(u=u.set("Authorization","Basic "+this.config.authBody),u=u.set(this.config.authIdKey,this.config.authId));const h=new Of({encoder:new F1t,fromString:a.params.toString()});return a=a.clone({withCredentials:!0,headers:u,params:h}),c.handle(a)}}return l.\u0275fac=function(a){return new(a||l)(Ae(an))},l.\u0275prov=Ze({token:l,factory:l.\u0275fac}),l})();class F1t{encodeKey(o){return encodeURIComponent(o)}encodeValue(o){return encodeURIComponent(o)}decodeKey(o){return decodeURIComponent(o)}decodeValue(o){return decodeURIComponent(o)}}function N1t(l,o){1&l&&(D(0,"span"),ne(1,"\u0421\u043e\u0431\u0440\u0430\u043d\u043e "),k())}function L1t(l,o){1&l&&me(0,"clr-progress-bar",3),2&l&&F("clrValue",Z().progressValue)}function B1t(l,o){if(1&l){const a=gt();D(0,"clr-toggle-container",4),D(1,"label"),ne(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438:"),k(),D(3,"clr-toggle-wrapper"),D(4,"input",5),ee("ngModelChange",function(u){return Le(a),Z().v.rawValue=u}),k(),D(5,"label"),ne(6),k(),k(),k()}if(2&l){const a=Z();R(4),F("name",a.v.name)("value",a.v.name)("ngModel",a.v.rawValue),R(2),en(a.v.description)}}let V1t=(()=>{class l{constructor(a,c,u){this.config=a,this.uiConfig=c,this.epubBuilder=u,this.progressValue=0,this.lastEvent="",this.fileEntries=[],this.workerSvc=Ta.builder(),this.bookServerSvc=new UV((h,d)=>{this.config.post(()=>{this.bookSvc.post(h,d)})}),this.bookSvc=new C7((h,d)=>{this.config.post(()=>{this.workerSvc.enabled()?this.workerSvc.sendMessage(d):this.bookServerSvc.post(h,d)})}),this.allBookslines=[],this.allBooksChapters=[],this.allBooksEmptyLines=[],this.allBooksNames=[]}get printEpubData(){return this.data}get v(){return this.uiConfig.ui.memorialPrintAllBook}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.workerSvc.enabled()?this.workerSvc.setOnMessage(a=>{this.config.post(()=>{this.bookSvc.post(null,a)})}):this.bookServerSvc.setCacheService(new zV(new hO)),this.bookSvc.setConfig(this.config).setUIConfig(this.uiConfig),this.bookSvc.onPageLoadEvent.setOnEventHandler(a=>{this.onPageCompleted()}),this.printEpubData.printEventsEmitter.subscribe({next:a=>{this.onPrintEpubEvent(a)}})}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}clearAllItems(){this.fileEntries=[],this.allBookslines=[],this.allBooksChapters=[],this.allBooksEmptyLines=[],this.allBooksNames=[]}onPageCompleted(){this.config.post(()=>{var a,c;if(this.bookSvc.bookChapter){this.allBooksNames.length||(this.allBooksNames=[...this.bookSvc.bookLanguages]);let u=this.bookSvc.getChapterTitleName();this.allBooksChapters.push(u||this.bookSvc.bookChapter.name),this.allBooksEmptyLines.push(this.bookSvc.books.map(f=>f.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a)),this.allBookslines.push(this.bookSvc.books.map((f,p)=>{var g,m;let v=[],y=(b,C)=>b?b[C]:null;var b;return((null==(b=null===(m=y(null===(g=y(f.\u0441\u0442\u0440\u043e\u043a\u0438,0))||void 0===g?void 0:g.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b,0))||void 0===m?void 0:m.classes)?void 0:b.red)||(null==b?void 0:b.redDark))&&++this.allBooksEmptyLines[this.allBooksEmptyLines.length-1][p],f.\u0441\u0442\u0440\u043e\u043a\u0438.forEach(b=>{v.push(b.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.map(C=>C.text).join(""))}),v}));let h=""+(+this.bookSvc.bookChapter.name+1),d=this.printEpubData.showSettings&&this.uiConfig.ui.memorialPrintAllBook.getBooleanValue();if(d&&null!=(null===(a=this.bookSvc.bookContent[0].parsed)||void 0===a?void 0:a.content.find((f,p,g)=>f.name==h)))this.lastEvent="loaded chapter: "+h,this.progressValue=Math.floor(+this.bookSvc.bookChapter.name/(null===(c=this.bookSvc.bookContent[0].parsed)||void 0===c?void 0:c.content.length)*100),this.config.post(()=>{this.bookSvc.loadPage(h)},1);else if(d){this.lastEvent="stopped after chapter: "+h,this.progressValue=100;let f=this.printEpubData.bookTitle;if(d){let p=f.indexOf(":");p>0&&(f=f.substring(0,p))}this.epubBuilder.generate(A_.builder().setName(f).setPsalomName("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c VZ_KU"==this.bookSvc.bookName?"\u041f\u0441\u0430\u043b\u043e\u043c":"\u0413\u043b\u0430\u0432\u0430").setAllBooks(this.allBookslines).setBookNames(this.allBooksNames).setAllBooksChapters(this.allBooksChapters).setEmptyFirstLines(this.allBooksEmptyLines).setShowLineIndexes(this.bookSvc.bookName.includes("VZ")||this.bookSvc.bookName.includes("NZ"))).then(p=>{this.printEpubData.printEventsEmitter.emit("stop")},p=>{this.config.addAlert(Or.of(`\u041e\u0448\u0438\u0431\u043a\u0430: ${p}`,"\u041e\u041a",15)),this.printEpubData.printEventsEmitter.emit("stop")})}else if(this.printEpubData.printerHandler){let f=XV.builder();this.printEpubData.printerHandler.print(f);let p=0,g=()=>{if(p>=f.requestsPack.length)this.progressValue=100,f.requestsPack.length>=1?this.epubBuilder.generate(f.requestsPack[0],!1,!1,!0).then(v=>{this.printEpubData.printEventsEmitter.emit("stop")}):this.printEpubData.printEventsEmitter.emit("stop");else{let m=p++;this.progressValue=Math.floor((m+1)/f.requestsPack.length*100);let v=f.requestsPack[m];this.epubBuilder.generate(v,0==m,v.showMiddleContent,!1).then(y=>{this.config.post(()=>g())})}};g()}else this.printEpubData.printEventsEmitter.emit("stop")}else this.printEpubData.printEventsEmitter.emit("stop")})}onPrintEpubEvent(a){"print"===(this.lastEvent=a,a)?(this.clearAllItems(),this.progressValue=1,this.bookSvc.loadBookByName(this.printEpubData.bookName,this.printEpubData.bookLanguages,this.uiConfig.ui.memorialPrintAllBook.getBooleanValue()?"1":this.printEpubData.bookChapter)):this.progressValue=0}}return l.\u0275fac=function(a){return new(a||l)(L(an),L(Xn),L(tce))},l.\u0275cmp=qe({type:l,selectors:[["app-dynamic-print-epub"]],inputs:{data:"data"},decls:6,vars:4,consts:[[4,"ngIf"],["clrMax","100","clrSuccess","","clrLabeled","",3,"clrValue",4,"ngIf"],["clrInline","",4,"ngIf"],["clrMax","100","clrSuccess","","clrLabeled","",3,"clrValue"],["clrInline",""],["type","checkbox","clrToggle","",3,"name","value","ngModel","ngModelChange"]],template:function(a,c){1&a&&(D(0,"div"),D(1,"div"),Y(2,N1t,2,0,"span",0),ne(3),k(),Y(4,L1t,1,1,"clr-progress-bar",1),k(),Y(5,B1t,7,4,"clr-toggle-container",2)),2&a&&(R(2),F("ngIf",c.progressValue>0),R(1),vi('"',c.printEpubData.bookTitle,'":'),R(1),F("ngIf",c.progressValue>0),R(1),F("ngIf",c.printEpubData.showSettings))},directives:[yn,lL,IO,ss,mp,Vh,vp,No,Co],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();!function oDe(l,o,a){(function Cwe(l,o,a){"string"!=typeof o&&(a=o,o=l[un.LocaleId]),o=o.toLowerCase().replace(/_/g,"-"),Wv[o]=l,a&&(Wv[o][un.ExtraData]=a)})(l,o,a)}(I1t,"ru",[[["\u043f\u043e\u043b\u043d.","\u043f\u043e\u043b\u0434.","\u0443\u0442\u0440\u0430","\u0434\u043d\u044f","\u0432\u0435\u0447.","\u043d\u043e\u0447\u0438"],["\u043f\u043e\u043b\u043d.","\u043f\u043e\u043b\u0434.","\u0443\u0442\u0440\u0430","\u0434\u043d\u044f","\u0432\u0435\u0447\u0435\u0440\u0430","\u043d\u043e\u0447\u0438"],["\u043f\u043e\u043b\u043d\u043e\u0447\u044c","\u043f\u043e\u043b\u0434\u0435\u043d\u044c","\u0443\u0442\u0440\u0430","\u0434\u043d\u044f","\u0432\u0435\u0447\u0435\u0440\u0430","\u043d\u043e\u0447\u0438"]],[["\u043f\u043e\u043b\u043d.","\u043f\u043e\u043b\u0434.","\u0443\u0442\u0440\u043e","\u0434\u0435\u043d\u044c","\u0432\u0435\u0447.","\u043d\u043e\u0447\u044c"],void 0,["\u043f\u043e\u043b\u043d\u043e\u0447\u044c","\u043f\u043e\u043b\u0434\u0435\u043d\u044c","\u0443\u0442\u0440\u043e","\u0434\u0435\u043d\u044c","\u0432\u0435\u0447\u0435\u0440","\u043d\u043e\u0447\u044c"]],["00:00","12:00",["04:00","12:00"],["12:00","18:00"],["18:00","22:00"],["22:00","04:00"]]]);let z1t=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=En({type:l,bootstrap:[E1t]}),l.\u0275inj=On({providers:[an,Mo,mM,Df,FV,Xn,yV,Nle,Lle,P_,Ta,tge,nge,nh,ES,Hle,E_,zle,Vle,Xp,DV,Ble,w6,ace,uce,hce,A6,cce,qM,ZM,F_,Ko,tce,N9,pF,tg,Kpe,Upe,zpe,[{provide:pV,useClass:R1t,multi:!0},{provide:Ah,useValue:"ru"}]],imports:[[EZ,Uyt,J5e,f1t,Vqe,fp]]}),l})();tP(pu,[dce,yn,ii,YM,dC,Fy,Cm,pC,hC,fC,N_,Ws,XM,P6,_i,_c,hf,df,V1t],[]),tP(e6,[Ws,ii,yn,pu],[]),Nh.production&&function WTe(){Vq=!1}(),ake().bootstrapModule(z1t).catch(l=>console.error(l))},650:Ra=>{Ra.exports=function De(St,ze,ce){function xe(Pe,Ve){if(!ze[Pe]){if(!St[Pe]){if(ie)return ie(Pe,!0);var Ne=new Error("Cannot find module '"+Pe+"'");throw Ne.code="MODULE_NOT_FOUND",Ne}var le=ze[Pe]={exports:{}};St[Pe][0].call(le.exports,function(Se){return xe(St[Pe][1][Se]||Se)},le,le.exports,De,St,ze,ce)}return ze[Pe].exports}for(var ie=void 0,ye=0;ye<ce.length;ye++)xe(ce[ye]);return xe}({1:[function(De,St,ze){"use strict";var ce=De("./utils"),xe=De("./support"),ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";ze.encode=function(ye){for(var Pe,Ve,Fe,le,Se,Te,oe=[],ge=0,be=ye.length,Ue=be,bt="string"!==ce.getTypeOf(ye);ge<ye.length;)Ue=be-ge,Fe=bt?(Pe=ye[ge++],Ve=ge<be?ye[ge++]:0,ge<be?ye[ge++]:0):(Pe=ye.charCodeAt(ge++),Ve=ge<be?ye.charCodeAt(ge++):0,ge<be?ye.charCodeAt(ge++):0),le=(3&Pe)<<4|Ve>>4,Se=1<Ue?(15&Ve)<<2|Fe>>6:64,Te=2<Ue?63&Fe:64,oe.push(ie.charAt(Pe>>2)+ie.charAt(le)+ie.charAt(Se)+ie.charAt(Te));return oe.join("")},ze.decode=function(ye){var Pe,Ve,Fe,Ne,le,Se,Te=0,oe=0;if("data:"===ye.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var be,Ue=3*(ye=ye.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(ye.charAt(ye.length-1)===ie.charAt(64)&&Ue--,ye.charAt(ye.length-2)===ie.charAt(64)&&Ue--,Ue%1!=0)throw new Error("Invalid base64 input, bad content length.");for(be=xe.uint8array?new Uint8Array(0|Ue):new Array(0|Ue);Te<ye.length;)Pe=ie.indexOf(ye.charAt(Te++))<<2|(Ne=ie.indexOf(ye.charAt(Te++)))>>4,Ve=(15&Ne)<<4|(le=ie.indexOf(ye.charAt(Te++)))>>2,Fe=(3&le)<<6|(Se=ie.indexOf(ye.charAt(Te++))),be[oe++]=Pe,64!==le&&(be[oe++]=Ve),64!==Se&&(be[oe++]=Fe);return be}},{"./support":30,"./utils":32}],2:[function(De,St,ze){"use strict";var ce=De("./external"),xe=De("./stream/DataWorker"),ie=De("./stream/Crc32Probe"),ye=De("./stream/DataLengthProbe");function Pe(Ve,Fe,Ne,le,Se){this.compressedSize=Ve,this.uncompressedSize=Fe,this.crc32=Ne,this.compression=le,this.compressedContent=Se}Pe.prototype={getContentWorker:function(){var Ve=new xe(ce.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new ye("data_length")),Fe=this;return Ve.on("end",function(){if(this.streamInfo.data_length!==Fe.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),Ve},getCompressedWorker:function(){return new xe(ce.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},Pe.createWorkerFrom=function(Ve,Fe,Ne){return Ve.pipe(new ie).pipe(new ye("uncompressedSize")).pipe(Fe.compressWorker(Ne)).pipe(new ye("compressedSize")).withStreamInfo("compression",Fe)},St.exports=Pe},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(De,St,ze){"use strict";var ce=De("./stream/GenericWorker");ze.STORE={magic:"\0\0",compressWorker:function(xe){return new ce("STORE compression")},uncompressWorker:function(){return new ce("STORE decompression")}},ze.DEFLATE=De("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(De,St,ze){"use strict";var ce=De("./utils"),xe=function(){for(var ie,ye=[],Pe=0;Pe<256;Pe++){ie=Pe;for(var Ve=0;Ve<8;Ve++)ie=1&ie?3988292384^ie>>>1:ie>>>1;ye[Pe]=ie}return ye}();St.exports=function(ie,ye){return void 0!==ie&&ie.length?"string"!==ce.getTypeOf(ie)?function(Pe,Ve,Fe,Ne){var le=xe,Se=0+Fe;Pe^=-1;for(var Te=0;Te<Se;Te++)Pe=Pe>>>8^le[255&(Pe^Ve[Te])];return-1^Pe}(0|ye,ie,ie.length):function(Pe,Ve,Fe,Ne){var le=xe,Se=0+Fe;Pe^=-1;for(var Te=0;Te<Se;Te++)Pe=Pe>>>8^le[255&(Pe^Ve.charCodeAt(Te))];return-1^Pe}(0|ye,ie,ie.length):0}},{"./utils":32}],5:[function(De,St,ze){"use strict";ze.base64=!1,ze.binary=!1,ze.dir=!1,ze.createFolders=!0,ze.date=null,ze.compression=null,ze.compressionOptions=null,ze.comment=null,ze.unixPermissions=null,ze.dosPermissions=null},{}],6:[function(De,St,ze){"use strict";var ce;ce="undefined"!=typeof Promise?Promise:De("lie"),St.exports={Promise:ce}},{lie:37}],7:[function(De,St,ze){"use strict";var ce="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,xe=De("pako"),ie=De("./utils"),ye=De("./stream/GenericWorker"),Pe=ce?"uint8array":"array";function Ve(Fe,Ne){ye.call(this,"FlateWorker/"+Fe),this._pako=null,this._pakoAction=Fe,this._pakoOptions=Ne,this.meta={}}ze.magic="\b\0",ie.inherits(Ve,ye),Ve.prototype.processChunk=function(Fe){this.meta=Fe.meta,null===this._pako&&this._createPako(),this._pako.push(ie.transformTo(Pe,Fe.data),!1)},Ve.prototype.flush=function(){ye.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},Ve.prototype.cleanUp=function(){ye.prototype.cleanUp.call(this),this._pako=null},Ve.prototype._createPako=function(){this._pako=new xe[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var Fe=this;this._pako.onData=function(Ne){Fe.push({data:Ne,meta:Fe.meta})}},ze.compressWorker=function(Fe){return new Ve("Deflate",Fe)},ze.uncompressWorker=function(){return new Ve("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(De,St,ze){"use strict";function ce(le,Se){var Te,oe="";for(Te=0;Te<Se;Te++)oe+=String.fromCharCode(255&le),le>>>=8;return oe}function xe(le,Se,Te,oe,ge,be){var Ue,bt,Ge=le.file,Pt=le.compression,Ot=be!==Pe.utf8encode,qt=ie.transformTo("string",be(Ge.name)),ft=ie.transformTo("string",Pe.utf8encode(Ge.name)),Gt=Ge.comment,Gn=ie.transformTo("string",be(Gt)),ke=ie.transformTo("string",Pe.utf8encode(Gt)),yt=ft.length!==Ge.name.length,J=ke.length!==Gt.length,xt="",hi="",Lt="",xn=Ge.dir,$t=Ge.date,Jn={crc32:0,compressedSize:0,uncompressedSize:0};Se&&!Te||(Jn.crc32=le.crc32,Jn.compressedSize=le.compressedSize,Jn.uncompressedSize=le.uncompressedSize);var ot=0;Se&&(ot|=8),Ot||!yt&&!J||(ot|=2048);var Jt,Hi,it=0,mt=0;xn&&(it|=16),"UNIX"===ge?(mt=798,it|=(Hi=Jt=Ge.unixPermissions,Jt||(Hi=xn?16893:33204),(65535&Hi)<<16)):(mt=20,it|=function(Jt){return 63&(Jt||0)}(Ge.dosPermissions)),Ue=$t.getUTCHours(),Ue<<=6,Ue|=$t.getUTCMinutes(),Ue<<=5,Ue|=$t.getUTCSeconds()/2,bt=$t.getUTCFullYear()-1980,bt<<=4,bt|=$t.getUTCMonth()+1,bt<<=5,bt|=$t.getUTCDate(),yt&&(hi=ce(1,1)+ce(Ve(qt),4)+ft,xt+="up"+ce(hi.length,2)+hi),J&&(Lt=ce(1,1)+ce(Ve(Gn),4)+ke,xt+="uc"+ce(Lt.length,2)+Lt);var vn="";return vn+="\n\0",vn+=ce(ot,2),vn+=Pt.magic,vn+=ce(Ue,2),vn+=ce(bt,2),vn+=ce(Jn.crc32,4),vn+=ce(Jn.compressedSize,4),vn+=ce(Jn.uncompressedSize,4),vn+=ce(qt.length,2),vn+=ce(xt.length,2),{fileRecord:Fe.LOCAL_FILE_HEADER+vn+qt+xt,dirRecord:Fe.CENTRAL_FILE_HEADER+ce(mt,2)+vn+ce(Gn.length,2)+"\0\0\0\0"+ce(it,4)+ce(oe,4)+qt+xt+Gn}}var ie=De("../utils"),ye=De("../stream/GenericWorker"),Pe=De("../utf8"),Ve=De("../crc32"),Fe=De("../signature");function Ne(le,Se,Te,oe){ye.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=Se,this.zipPlatform=Te,this.encodeFileName=oe,this.streamFiles=le,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}ie.inherits(Ne,ye),Ne.prototype.push=function(le){var Se=le.meta.percent||0,Te=this.entriesCount,oe=this._sources.length;this.accumulate?this.contentBuffer.push(le):(this.bytesWritten+=le.data.length,ye.prototype.push.call(this,{data:le.data,meta:{currentFile:this.currentFile,percent:Te?(Se+100*(Te-oe-1))/Te:100}}))},Ne.prototype.openedSource=function(le){this.currentSourceOffset=this.bytesWritten,this.currentFile=le.file.name;var Se=this.streamFiles&&!le.file.dir;if(Se){var Te=xe(le,Se,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:Te.fileRecord,meta:{percent:0}})}else this.accumulate=!0},Ne.prototype.closedSource=function(le){this.accumulate=!1;var oe,Se=this.streamFiles&&!le.file.dir,Te=xe(le,Se,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(Te.dirRecord),Se)this.push({data:(oe=le,Fe.DATA_DESCRIPTOR+ce(oe.crc32,4)+ce(oe.compressedSize,4)+ce(oe.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:Te.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},Ne.prototype.flush=function(){for(var le=this.bytesWritten,Se=0;Se<this.dirRecords.length;Se++)this.push({data:this.dirRecords[Se],meta:{percent:100}});var ge,be,Ue,Pt,oe=(ge=this.dirRecords.length,be=this.bytesWritten-le,Ue=le,Pt=ie.transformTo("string",(0,this.encodeFileName)(this.zipComment)),Fe.CENTRAL_DIRECTORY_END+"\0\0\0\0"+ce(ge,2)+ce(ge,2)+ce(be,4)+ce(Ue,4)+ce(Pt.length,2)+Pt);this.push({data:oe,meta:{percent:100}})},Ne.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},Ne.prototype.registerPrevious=function(le){this._sources.push(le);var Se=this;return le.on("data",function(Te){Se.processChunk(Te)}),le.on("end",function(){Se.closedSource(Se.previous.streamInfo),Se._sources.length?Se.prepareNextSource():Se.end()}),le.on("error",function(Te){Se.error(Te)}),this},Ne.prototype.resume=function(){return!!ye.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},Ne.prototype.error=function(le){var Se=this._sources;if(!ye.prototype.error.call(this,le))return!1;for(var Te=0;Te<Se.length;Te++)try{Se[Te].error(le)}catch(oe){}return!0},Ne.prototype.lock=function(){ye.prototype.lock.call(this);for(var le=this._sources,Se=0;Se<le.length;Se++)le[Se].lock()},St.exports=Ne},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(De,St,ze){"use strict";var ce=De("../compressions"),xe=De("./ZipFileWorker");ze.generateWorker=function(ie,ye,Pe){var Ve=new xe(ye.streamFiles,Pe,ye.platform,ye.encodeFileName),Fe=0;try{ie.forEach(function(Ne,le){Fe++;var Se=function(be,Ue){var bt=be||Ue,Ge=ce[bt];if(!Ge)throw new Error(bt+" is not a valid compression method !");return Ge}(le.options.compression,ye.compression),oe=le.dir,ge=le.date;le._compressWorker(Se,le.options.compressionOptions||ye.compressionOptions||{}).withStreamInfo("file",{name:Ne,dir:oe,date:ge,comment:le.comment||"",unixPermissions:le.unixPermissions,dosPermissions:le.dosPermissions}).pipe(Ve)}),Ve.entriesCount=Fe}catch(Ne){Ve.error(Ne)}return Ve}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(De,St,ze){"use strict";function ce(){if(!(this instanceof ce))return new ce;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var xe=new ce;for(var ie in this)"function"!=typeof this[ie]&&(xe[ie]=this[ie]);return xe}}(ce.prototype=De("./object")).loadAsync=De("./load"),ce.support=De("./support"),ce.defaults=De("./defaults"),ce.version="3.7.1",ce.loadAsync=function(xe,ie){return(new ce).loadAsync(xe,ie)},ce.external=De("./external"),St.exports=ce},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(De,St,ze){"use strict";var ce=De("./utils"),xe=De("./external"),ie=De("./utf8"),ye=De("./zipEntries"),Pe=De("./stream/Crc32Probe"),Ve=De("./nodejsUtils");function Fe(Ne){return new xe.Promise(function(le,Se){var Te=Ne.decompressed.getContentWorker().pipe(new Pe);Te.on("error",function(oe){Se(oe)}).on("end",function(){Te.streamInfo.crc32!==Ne.decompressed.crc32?Se(new Error("Corrupted zip : CRC32 mismatch")):le()}).resume()})}St.exports=function(Ne,le){var Se=this;return le=ce.extend(le||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:ie.utf8decode}),Ve.isNode&&Ve.isStream(Ne)?xe.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):ce.prepareContent("the loaded zip file",Ne,!0,le.optimizedBinaryString,le.base64).then(function(Te){var oe=new ye(le);return oe.load(Te),oe}).then(function(Te){var oe=[xe.Promise.resolve(Te)],ge=Te.files;if(le.checkCRC32)for(var be=0;be<ge.length;be++)oe.push(Fe(ge[be]));return xe.Promise.all(oe)}).then(function(Te){for(var oe=Te.shift(),ge=oe.files,be=0;be<ge.length;be++){var Ue=ge[be];Se.file(Ue.fileNameStr,Ue.decompressed,{binary:!0,optimizedBinaryString:!0,date:Ue.date,dir:Ue.dir,comment:Ue.fileCommentStr.length?Ue.fileCommentStr:null,unixPermissions:Ue.unixPermissions,dosPermissions:Ue.dosPermissions,createFolders:le.createFolders})}return oe.zipComment.length&&(Se.comment=oe.zipComment),Se})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(De,St,ze){"use strict";var ce=De("../utils"),xe=De("../stream/GenericWorker");function ie(ye,Pe){xe.call(this,"Nodejs stream input adapter for "+ye),this._upstreamEnded=!1,this._bindStream(Pe)}ce.inherits(ie,xe),ie.prototype._bindStream=function(ye){var Pe=this;(this._stream=ye).pause(),ye.on("data",function(Ve){Pe.push({data:Ve,meta:{percent:0}})}).on("error",function(Ve){Pe.isPaused?this.generatedError=Ve:Pe.error(Ve)}).on("end",function(){Pe.isPaused?Pe._upstreamEnded=!0:Pe.end()})},ie.prototype.pause=function(){return!!xe.prototype.pause.call(this)&&(this._stream.pause(),!0)},ie.prototype.resume=function(){return!!xe.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},St.exports=ie},{"../stream/GenericWorker":28,"../utils":32}],13:[function(De,St,ze){"use strict";var ce=De("readable-stream").Readable;function xe(ie,ye,Pe){ce.call(this,ye),this._helper=ie;var Ve=this;ie.on("data",function(Fe,Ne){Ve.push(Fe)||Ve._helper.pause(),Pe&&Pe(Ne)}).on("error",function(Fe){Ve.emit("error",Fe)}).on("end",function(){Ve.push(null)})}De("../utils").inherits(xe,ce),xe.prototype._read=function(){this._helper.resume()},St.exports=xe},{"../utils":32,"readable-stream":16}],14:[function(De,St,ze){"use strict";St.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(ce,xe){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(ce,xe);if("number"==typeof ce)throw new Error('The "data" argument must not be a number');return new Buffer(ce,xe)},allocBuffer:function(ce){if(Buffer.alloc)return Buffer.alloc(ce);var xe=new Buffer(ce);return xe.fill(0),xe},isBuffer:function(ce){return Buffer.isBuffer(ce)},isStream:function(ce){return ce&&"function"==typeof ce.on&&"function"==typeof ce.pause&&"function"==typeof ce.resume}}},{}],15:[function(De,St,ze){"use strict";function ce(Ge,Pt,Ot){var qt,ft=ie.getTypeOf(Pt),Gt=ie.extend(Ot||{},Ve);Gt.date=Gt.date||new Date,null!==Gt.compression&&(Gt.compression=Gt.compression.toUpperCase()),"string"==typeof Gt.unixPermissions&&(Gt.unixPermissions=parseInt(Gt.unixPermissions,8)),Gt.unixPermissions&&16384&Gt.unixPermissions&&(Gt.dir=!0),Gt.dosPermissions&&16&Gt.dosPermissions&&(Gt.dir=!0),Gt.dir&&(Ge=ge(Ge)),Gt.createFolders&&(qt=oe(Ge))&&be.call(this,qt,!0),Ot&&void 0!==Ot.binary||(Gt.binary=!("string"===ft&&!1===Gt.binary&&!1===Gt.base64)),(Pt instanceof Fe&&0===Pt.uncompressedSize||Gt.dir||!Pt||0===Pt.length)&&(Gt.base64=!1,Gt.binary=!0,Pt="",Gt.compression="STORE",ft="string");var ke;ke=Pt instanceof Fe||Pt instanceof ye?Pt:Se.isNode&&Se.isStream(Pt)?new Te(Ge,Pt):ie.prepareContent(Ge,Pt,Gt.binary,Gt.optimizedBinaryString,Gt.base64);var yt=new Ne(Ge,ke,Gt);this.files[Ge]=yt}var xe=De("./utf8"),ie=De("./utils"),ye=De("./stream/GenericWorker"),Pe=De("./stream/StreamHelper"),Ve=De("./defaults"),Fe=De("./compressedObject"),Ne=De("./zipObject"),le=De("./generate"),Se=De("./nodejsUtils"),Te=De("./nodejs/NodejsStreamInputAdapter"),oe=function(Ge){"/"===Ge.slice(-1)&&(Ge=Ge.substring(0,Ge.length-1));var Pt=Ge.lastIndexOf("/");return 0<Pt?Ge.substring(0,Pt):""},ge=function(Ge){return"/"!==Ge.slice(-1)&&(Ge+="/"),Ge},be=function(Ge,Pt){return Pt=void 0!==Pt?Pt:Ve.createFolders,Ge=ge(Ge),this.files[Ge]||ce.call(this,Ge,null,{dir:!0,createFolders:Pt}),this.files[Ge]};function Ue(Ge){return"[object RegExp]"===Object.prototype.toString.call(Ge)}var bt={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(Ge){var Pt,Ot,qt;for(Pt in this.files)qt=this.files[Pt],(Ot=Pt.slice(this.root.length,Pt.length))&&Pt.slice(0,this.root.length)===this.root&&Ge(Ot,qt)},filter:function(Ge){var Pt=[];return this.forEach(function(Ot,qt){Ge(Ot,qt)&&Pt.push(qt)}),Pt},file:function(Ge,Pt,Ot){if(1!==arguments.length)return ce.call(this,Ge=this.root+Ge,Pt,Ot),this;if(Ue(Ge)){var qt=Ge;return this.filter(function(Gt,Gn){return!Gn.dir&&qt.test(Gt)})}var ft=this.files[this.root+Ge];return ft&&!ft.dir?ft:null},folder:function(Ge){if(!Ge)return this;if(Ue(Ge))return this.filter(function(ft,Gt){return Gt.dir&&Ge.test(ft)});var Ot=be.call(this,this.root+Ge),qt=this.clone();return qt.root=Ot.name,qt},remove:function(Ge){var Pt=this.files[Ge=this.root+Ge];if(Pt||("/"!==Ge.slice(-1)&&(Ge+="/"),Pt=this.files[Ge]),Pt&&!Pt.dir)delete this.files[Ge];else for(var Ot=this.filter(function(ft,Gt){return Gt.name.slice(0,Ge.length)===Ge}),qt=0;qt<Ot.length;qt++)delete this.files[Ot[qt].name];return this},generate:function(Ge){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(Ge){var Pt,Ot={};try{if((Ot=ie.extend(Ge||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:xe.utf8encode})).type=Ot.type.toLowerCase(),Ot.compression=Ot.compression.toUpperCase(),"binarystring"===Ot.type&&(Ot.type="string"),!Ot.type)throw new Error("No output type specified.");ie.checkSupport(Ot.type),"darwin"!==Ot.platform&&"freebsd"!==Ot.platform&&"linux"!==Ot.platform&&"sunos"!==Ot.platform||(Ot.platform="UNIX"),"win32"===Ot.platform&&(Ot.platform="DOS"),Pt=le.generateWorker(this,Ot,Ot.comment||this.comment||"")}catch(ft){(Pt=new ye("error")).error(ft)}return new Pe(Pt,Ot.type||"string",Ot.mimeType)},generateAsync:function(Ge,Pt){return this.generateInternalStream(Ge).accumulate(Pt)},generateNodeStream:function(Ge,Pt){return(Ge=Ge||{}).type||(Ge.type="nodebuffer"),this.generateInternalStream(Ge).toNodejsStream(Pt)}};St.exports=bt},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(De,St,ze){St.exports=De("stream")},{stream:void 0}],17:[function(De,St,ze){"use strict";var ce=De("./DataReader");function xe(ie){ce.call(this,ie);for(var ye=0;ye<this.data.length;ye++)ie[ye]=255&ie[ye]}De("../utils").inherits(xe,ce),xe.prototype.byteAt=function(ie){return this.data[this.zero+ie]},xe.prototype.lastIndexOfSignature=function(ie){for(var ye=ie.charCodeAt(0),Pe=ie.charCodeAt(1),Ve=ie.charCodeAt(2),Fe=ie.charCodeAt(3),Ne=this.length-4;0<=Ne;--Ne)if(this.data[Ne]===ye&&this.data[Ne+1]===Pe&&this.data[Ne+2]===Ve&&this.data[Ne+3]===Fe)return Ne-this.zero;return-1},xe.prototype.readAndCheckSignature=function(ie){var ye=ie.charCodeAt(0),Pe=ie.charCodeAt(1),Ve=ie.charCodeAt(2),Fe=ie.charCodeAt(3),Ne=this.readData(4);return ye===Ne[0]&&Pe===Ne[1]&&Ve===Ne[2]&&Fe===Ne[3]},xe.prototype.readData=function(ie){if(this.checkOffset(ie),0===ie)return[];var ye=this.data.slice(this.zero+this.index,this.zero+this.index+ie);return this.index+=ie,ye},St.exports=xe},{"../utils":32,"./DataReader":18}],18:[function(De,St,ze){"use strict";var ce=De("../utils");function xe(ie){this.data=ie,this.length=ie.length,this.index=0,this.zero=0}xe.prototype={checkOffset:function(ie){this.checkIndex(this.index+ie)},checkIndex:function(ie){if(this.length<this.zero+ie||ie<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+ie+"). Corrupted zip ?")},setIndex:function(ie){this.checkIndex(ie),this.index=ie},skip:function(ie){this.setIndex(this.index+ie)},byteAt:function(ie){},readInt:function(ie){var ye,Pe=0;for(this.checkOffset(ie),ye=this.index+ie-1;ye>=this.index;ye--)Pe=(Pe<<8)+this.byteAt(ye);return this.index+=ie,Pe},readString:function(ie){return ce.transformTo("string",this.readData(ie))},readData:function(ie){},lastIndexOfSignature:function(ie){},readAndCheckSignature:function(ie){},readDate:function(){var ie=this.readInt(4);return new Date(Date.UTC(1980+(ie>>25&127),(ie>>21&15)-1,ie>>16&31,ie>>11&31,ie>>5&63,(31&ie)<<1))}},St.exports=xe},{"../utils":32}],19:[function(De,St,ze){"use strict";var ce=De("./Uint8ArrayReader");function xe(ie){ce.call(this,ie)}De("../utils").inherits(xe,ce),xe.prototype.readData=function(ie){this.checkOffset(ie);var ye=this.data.slice(this.zero+this.index,this.zero+this.index+ie);return this.index+=ie,ye},St.exports=xe},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(De,St,ze){"use strict";var ce=De("./DataReader");function xe(ie){ce.call(this,ie)}De("../utils").inherits(xe,ce),xe.prototype.byteAt=function(ie){return this.data.charCodeAt(this.zero+ie)},xe.prototype.lastIndexOfSignature=function(ie){return this.data.lastIndexOf(ie)-this.zero},xe.prototype.readAndCheckSignature=function(ie){return ie===this.readData(4)},xe.prototype.readData=function(ie){this.checkOffset(ie);var ye=this.data.slice(this.zero+this.index,this.zero+this.index+ie);return this.index+=ie,ye},St.exports=xe},{"../utils":32,"./DataReader":18}],21:[function(De,St,ze){"use strict";var ce=De("./ArrayReader");function xe(ie){ce.call(this,ie)}De("../utils").inherits(xe,ce),xe.prototype.readData=function(ie){if(this.checkOffset(ie),0===ie)return new Uint8Array(0);var ye=this.data.subarray(this.zero+this.index,this.zero+this.index+ie);return this.index+=ie,ye},St.exports=xe},{"../utils":32,"./ArrayReader":17}],22:[function(De,St,ze){"use strict";var ce=De("../utils"),xe=De("../support"),ie=De("./ArrayReader"),ye=De("./StringReader"),Pe=De("./NodeBufferReader"),Ve=De("./Uint8ArrayReader");St.exports=function(Fe){var Ne=ce.getTypeOf(Fe);return ce.checkSupport(Ne),"string"!==Ne||xe.uint8array?"nodebuffer"===Ne?new Pe(Fe):xe.uint8array?new Ve(ce.transformTo("uint8array",Fe)):new ie(ce.transformTo("array",Fe)):new ye(Fe)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(De,St,ze){"use strict";ze.LOCAL_FILE_HEADER="PK\x03\x04",ze.CENTRAL_FILE_HEADER="PK\x01\x02",ze.CENTRAL_DIRECTORY_END="PK\x05\x06",ze.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",ze.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",ze.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(De,St,ze){"use strict";var ce=De("./GenericWorker"),xe=De("../utils");function ie(ye){ce.call(this,"ConvertWorker to "+ye),this.destType=ye}xe.inherits(ie,ce),ie.prototype.processChunk=function(ye){this.push({data:xe.transformTo(this.destType,ye.data),meta:ye.meta})},St.exports=ie},{"../utils":32,"./GenericWorker":28}],25:[function(De,St,ze){"use strict";var ce=De("./GenericWorker"),xe=De("../crc32");function ie(){ce.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}De("../utils").inherits(ie,ce),ie.prototype.processChunk=function(ye){this.streamInfo.crc32=xe(ye.data,this.streamInfo.crc32||0),this.push(ye)},St.exports=ie},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(De,St,ze){"use strict";var ce=De("../utils"),xe=De("./GenericWorker");function ie(ye){xe.call(this,"DataLengthProbe for "+ye),this.propName=ye,this.withStreamInfo(ye,0)}ce.inherits(ie,xe),ie.prototype.processChunk=function(ye){ye&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+ye.data.length),xe.prototype.processChunk.call(this,ye)},St.exports=ie},{"../utils":32,"./GenericWorker":28}],27:[function(De,St,ze){"use strict";var ce=De("../utils"),xe=De("./GenericWorker");function ie(ye){xe.call(this,"DataWorker");var Pe=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,ye.then(function(Ve){Pe.dataIsReady=!0,Pe.data=Ve,Pe.max=Ve&&Ve.length||0,Pe.type=ce.getTypeOf(Ve),Pe.isPaused||Pe._tickAndRepeat()},function(Ve){Pe.error(Ve)})}ce.inherits(ie,xe),ie.prototype.cleanUp=function(){xe.prototype.cleanUp.call(this),this.data=null},ie.prototype.resume=function(){return!!xe.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,ce.delay(this._tickAndRepeat,[],this)),!0)},ie.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(ce.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},ie.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var ye=null,Pe=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":ye=this.data.substring(this.index,Pe);break;case"uint8array":ye=this.data.subarray(this.index,Pe);break;case"array":case"nodebuffer":ye=this.data.slice(this.index,Pe)}return this.index=Pe,this.push({data:ye,meta:{percent:this.max?this.index/this.max*100:0}})},St.exports=ie},{"../utils":32,"./GenericWorker":28}],28:[function(De,St,ze){"use strict";function ce(xe){this.name=xe||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}ce.prototype={push:function(xe){this.emit("data",xe)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(xe){this.emit("error",xe)}return!0},error:function(xe){return!this.isFinished&&(this.isPaused?this.generatedError=xe:(this.isFinished=!0,this.emit("error",xe),this.previous&&this.previous.error(xe),this.cleanUp()),!0)},on:function(xe,ie){return this._listeners[xe].push(ie),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(xe,ie){if(this._listeners[xe])for(var ye=0;ye<this._listeners[xe].length;ye++)this._listeners[xe][ye].call(this,ie)},pipe:function(xe){return xe.registerPrevious(this)},registerPrevious:function(xe){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=xe.streamInfo,this.mergeStreamInfo(),this.previous=xe;var ie=this;return xe.on("data",function(ye){ie.processChunk(ye)}),xe.on("end",function(){ie.end()}),xe.on("error",function(ye){ie.error(ye)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var xe=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),xe=!0),this.previous&&this.previous.resume(),!xe},flush:function(){},processChunk:function(xe){this.push(xe)},withStreamInfo:function(xe,ie){return this.extraStreamInfo[xe]=ie,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var xe in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(xe)&&(this.streamInfo[xe]=this.extraStreamInfo[xe])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var xe="Worker "+this.name;return this.previous?this.previous+" -> "+xe:xe}},St.exports=ce},{}],29:[function(De,St,ze){"use strict";var ce=De("../utils"),xe=De("./ConvertWorker"),ie=De("./GenericWorker"),ye=De("../base64"),Pe=De("../support"),Ve=De("../external"),Fe=null;if(Pe.nodestream)try{Fe=De("../nodejs/NodejsStreamOutputAdapter")}catch(Se){}function le(Se,Te,oe){var ge=Te;switch(Te){case"blob":case"arraybuffer":ge="uint8array";break;case"base64":ge="string"}try{this._internalType=ge,this._outputType=Te,this._mimeType=oe,ce.checkSupport(ge),this._worker=Se.pipe(new xe(ge)),Se.lock()}catch(be){this._worker=new ie("error"),this._worker.error(be)}}le.prototype={accumulate:function(Se){return function Ne(Se,Te){return new Ve.Promise(function(oe,ge){var be=[],Ue=Se._internalType,bt=Se._outputType,Ge=Se._mimeType;Se.on("data",function(Pt,Ot){be.push(Pt),Te&&Te(Ot)}).on("error",function(Pt){be=[],ge(Pt)}).on("end",function(){try{var Pt=function(Ot,qt,ft){switch(Ot){case"blob":return ce.newBlob(ce.transformTo("arraybuffer",qt),ft);case"base64":return ye.encode(qt);default:return ce.transformTo(Ot,qt)}}(bt,function(Ot,qt){var ft,Gt=0,Gn=null,ke=0;for(ft=0;ft<qt.length;ft++)ke+=qt[ft].length;switch(Ot){case"string":return qt.join("");case"array":return Array.prototype.concat.apply([],qt);case"uint8array":for(Gn=new Uint8Array(ke),ft=0;ft<qt.length;ft++)Gn.set(qt[ft],Gt),Gt+=qt[ft].length;return Gn;case"nodebuffer":return Buffer.concat(qt);default:throw new Error("concat : unsupported type '"+Ot+"'")}}(Ue,be),Ge);oe(Pt)}catch(Ot){ge(Ot)}be=[]}).resume()})}(this,Se)},on:function(Se,Te){var oe=this;return this._worker.on(Se,"data"===Se?function(ge){Te.call(oe,ge.data,ge.meta)}:function(){ce.delay(Te,arguments,oe)}),this},resume:function(){return ce.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(Se){if(ce.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new Fe(this,{objectMode:"nodebuffer"!==this._outputType},Se)}},St.exports=le},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(De,St,ze){"use strict";if(ze.base64=!0,ze.array=!0,ze.string=!0,ze.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,ze.nodebuffer="undefined"!=typeof Buffer,ze.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)ze.blob=!1;else{var ce=new ArrayBuffer(0);try{ze.blob=0===new Blob([ce],{type:"application/zip"}).size}catch(ie){try{var xe=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);xe.append(ce),ze.blob=0===xe.getBlob("application/zip").size}catch(ye){ze.blob=!1}}}try{ze.nodestream=!!De("readable-stream").Readable}catch(ie){ze.nodestream=!1}},{"readable-stream":16}],31:[function(De,St,ze){"use strict";for(var ce=De("./utils"),xe=De("./support"),ie=De("./nodejsUtils"),ye=De("./stream/GenericWorker"),Pe=new Array(256),Ve=0;Ve<256;Ve++)Pe[Ve]=252<=Ve?6:248<=Ve?5:240<=Ve?4:224<=Ve?3:192<=Ve?2:1;function Fe(){ye.call(this,"utf-8 decode"),this.leftOver=null}function Ne(){ye.call(this,"utf-8 encode")}Pe[254]=Pe[254]=1,ze.utf8encode=function(le){return xe.nodebuffer?ie.newBufferFrom(le,"utf-8"):function(Se){var Te,oe,ge,be,Ue,bt=Se.length,Ge=0;for(be=0;be<bt;be++)55296==(64512&(oe=Se.charCodeAt(be)))&&be+1<bt&&56320==(64512&(ge=Se.charCodeAt(be+1)))&&(oe=65536+(oe-55296<<10)+(ge-56320),be++),Ge+=oe<128?1:oe<2048?2:oe<65536?3:4;for(Te=xe.uint8array?new Uint8Array(Ge):new Array(Ge),be=Ue=0;Ue<Ge;be++)55296==(64512&(oe=Se.charCodeAt(be)))&&be+1<bt&&56320==(64512&(ge=Se.charCodeAt(be+1)))&&(oe=65536+(oe-55296<<10)+(ge-56320),be++),oe<128?Te[Ue++]=oe:(oe<2048?Te[Ue++]=192|oe>>>6:(oe<65536?Te[Ue++]=224|oe>>>12:(Te[Ue++]=240|oe>>>18,Te[Ue++]=128|oe>>>12&63),Te[Ue++]=128|oe>>>6&63),Te[Ue++]=128|63&oe);return Te}(le)},ze.utf8decode=function(le){return xe.nodebuffer?ce.transformTo("nodebuffer",le).toString("utf-8"):function(Se){var Te,oe,ge,be,Ue=Se.length,bt=new Array(2*Ue);for(Te=oe=0;Te<Ue;)if((ge=Se[Te++])<128)bt[oe++]=ge;else if(4<(be=Pe[ge]))bt[oe++]=65533,Te+=be-1;else{for(ge&=2===be?31:3===be?15:7;1<be&&Te<Ue;)ge=ge<<6|63&Se[Te++],be--;1<be?bt[oe++]=65533:ge<65536?bt[oe++]=ge:(bt[oe++]=55296|(ge-=65536)>>10&1023,bt[oe++]=56320|1023&ge)}return bt.length!==oe&&(bt.subarray?bt=bt.subarray(0,oe):bt.length=oe),ce.applyFromCharCode(bt)}(le=ce.transformTo(xe.uint8array?"uint8array":"array",le))},ce.inherits(Fe,ye),Fe.prototype.processChunk=function(le){var Se=ce.transformTo(xe.uint8array?"uint8array":"array",le.data);if(this.leftOver&&this.leftOver.length){if(xe.uint8array){var Te=Se;(Se=new Uint8Array(Te.length+this.leftOver.length)).set(this.leftOver,0),Se.set(Te,this.leftOver.length)}else Se=this.leftOver.concat(Se);this.leftOver=null}var oe=function(be,Ue){var bt;for((Ue=Ue||be.length)>be.length&&(Ue=be.length),bt=Ue-1;0<=bt&&128==(192&be[bt]);)bt--;return bt<0||0===bt?Ue:bt+Pe[be[bt]]>Ue?bt:Ue}(Se),ge=Se;oe!==Se.length&&(xe.uint8array?(ge=Se.subarray(0,oe),this.leftOver=Se.subarray(oe,Se.length)):(ge=Se.slice(0,oe),this.leftOver=Se.slice(oe,Se.length))),this.push({data:ze.utf8decode(ge),meta:le.meta})},Fe.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:ze.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},ze.Utf8DecodeWorker=Fe,ce.inherits(Ne,ye),Ne.prototype.processChunk=function(le){this.push({data:ze.utf8encode(le.data),meta:le.meta})},ze.Utf8EncodeWorker=Ne},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(De,St,ze){"use strict";var ce=De("./support"),xe=De("./base64"),ie=De("./nodejsUtils"),ye=De("set-immediate-shim"),Pe=De("./external");function Ve(oe){return oe}function Fe(oe,ge){for(var be=0;be<oe.length;++be)ge[be]=255&oe.charCodeAt(be);return ge}ze.newBlob=function(oe,ge){ze.checkSupport("blob");try{return new Blob([oe],{type:ge})}catch(Ue){try{var be=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return be.append(oe),be.getBlob(ge)}catch(bt){throw new Error("Bug : can't construct the Blob.")}}};var Ne={stringifyByChunk:function(oe,ge,be){var Ue=[],bt=0,Ge=oe.length;if(Ge<=be)return String.fromCharCode.apply(null,oe);for(;bt<Ge;)Ue.push(String.fromCharCode.apply(null,"array"===ge||"nodebuffer"===ge?oe.slice(bt,Math.min(bt+be,Ge)):oe.subarray(bt,Math.min(bt+be,Ge)))),bt+=be;return Ue.join("")},stringifyByChar:function(oe){for(var ge="",be=0;be<oe.length;be++)ge+=String.fromCharCode(oe[be]);return ge},applyCanBeUsed:{uint8array:function(){try{return ce.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(oe){return!1}}(),nodebuffer:function(){try{return ce.nodebuffer&&1===String.fromCharCode.apply(null,ie.allocBuffer(1)).length}catch(oe){return!1}}()}};function le(oe){var ge=65536,be=ze.getTypeOf(oe),Ue=!0;if("uint8array"===be?Ue=Ne.applyCanBeUsed.uint8array:"nodebuffer"===be&&(Ue=Ne.applyCanBeUsed.nodebuffer),Ue)for(;1<ge;)try{return Ne.stringifyByChunk(oe,be,ge)}catch(bt){ge=Math.floor(ge/2)}return Ne.stringifyByChar(oe)}function Se(oe,ge){for(var be=0;be<oe.length;be++)ge[be]=oe[be];return ge}ze.applyFromCharCode=le;var Te={};Te.string={string:Ve,array:function(oe){return Fe(oe,new Array(oe.length))},arraybuffer:function(oe){return Te.string.uint8array(oe).buffer},uint8array:function(oe){return Fe(oe,new Uint8Array(oe.length))},nodebuffer:function(oe){return Fe(oe,ie.allocBuffer(oe.length))}},Te.array={string:le,array:Ve,arraybuffer:function(oe){return new Uint8Array(oe).buffer},uint8array:function(oe){return new Uint8Array(oe)},nodebuffer:function(oe){return ie.newBufferFrom(oe)}},Te.arraybuffer={string:function(oe){return le(new Uint8Array(oe))},array:function(oe){return Se(new Uint8Array(oe),new Array(oe.byteLength))},arraybuffer:Ve,uint8array:function(oe){return new Uint8Array(oe)},nodebuffer:function(oe){return ie.newBufferFrom(new Uint8Array(oe))}},Te.uint8array={string:le,array:function(oe){return Se(oe,new Array(oe.length))},arraybuffer:function(oe){return oe.buffer},uint8array:Ve,nodebuffer:function(oe){return ie.newBufferFrom(oe)}},Te.nodebuffer={string:le,array:function(oe){return Se(oe,new Array(oe.length))},arraybuffer:function(oe){return Te.nodebuffer.uint8array(oe).buffer},uint8array:function(oe){return Se(oe,new Uint8Array(oe.length))},nodebuffer:Ve},ze.transformTo=function(oe,ge){if(ge=ge||"",!oe)return ge;ze.checkSupport(oe);var be=ze.getTypeOf(ge);return Te[be][oe](ge)},ze.getTypeOf=function(oe){return"string"==typeof oe?"string":"[object Array]"===Object.prototype.toString.call(oe)?"array":ce.nodebuffer&&ie.isBuffer(oe)?"nodebuffer":ce.uint8array&&oe instanceof Uint8Array?"uint8array":ce.arraybuffer&&oe instanceof ArrayBuffer?"arraybuffer":void 0},ze.checkSupport=function(oe){if(!ce[oe.toLowerCase()])throw new Error(oe+" is not supported by this platform")},ze.MAX_VALUE_16BITS=65535,ze.MAX_VALUE_32BITS=-1,ze.pretty=function(oe){var ge,be,Ue="";for(be=0;be<(oe||"").length;be++)Ue+="\\x"+((ge=oe.charCodeAt(be))<16?"0":"")+ge.toString(16).toUpperCase();return Ue},ze.delay=function(oe,ge,be){ye(function(){oe.apply(be||null,ge||[])})},ze.inherits=function(oe,ge){function be(){}be.prototype=ge.prototype,oe.prototype=new be},ze.extend=function(){var oe,ge,be={};for(oe=0;oe<arguments.length;oe++)for(ge in arguments[oe])arguments[oe].hasOwnProperty(ge)&&void 0===be[ge]&&(be[ge]=arguments[oe][ge]);return be},ze.prepareContent=function(oe,ge,be,Ue,bt){return Pe.Promise.resolve(ge).then(function(Ge){return ce.blob&&(Ge instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Ge)))&&"undefined"!=typeof FileReader?new Pe.Promise(function(Pt,Ot){var qt=new FileReader;qt.onload=function(ft){Pt(ft.target.result)},qt.onerror=function(ft){Ot(ft.target.error)},qt.readAsArrayBuffer(Ge)}):Ge}).then(function(Ge){var Ot,Pt=ze.getTypeOf(Ge);return Pt?("arraybuffer"===Pt?Ge=ze.transformTo("uint8array",Ge):"string"===Pt&&(bt?Ge=xe.decode(Ge):be&&!0!==Ue&&(Ge=Fe(Ot=Ge,ce.uint8array?new Uint8Array(Ot.length):new Array(Ot.length)))),Ge):Pe.Promise.reject(new Error("Can't read the data of '"+oe+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(De,St,ze){"use strict";var ce=De("./reader/readerFor"),xe=De("./utils"),ie=De("./signature"),ye=De("./zipEntry"),Pe=(De("./utf8"),De("./support"));function Ve(Fe){this.files=[],this.loadOptions=Fe}Ve.prototype={checkSignature:function(Fe){if(!this.reader.readAndCheckSignature(Fe)){this.reader.index-=4;var Ne=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+xe.pretty(Ne)+", expected "+xe.pretty(Fe)+")")}},isSignature:function(Fe,Ne){var le=this.reader.index;this.reader.setIndex(Fe);var Se=this.reader.readString(4)===Ne;return this.reader.setIndex(le),Se},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var Fe=this.reader.readData(this.zipCommentLength),le=xe.transformTo(Pe.uint8array?"uint8array":"array",Fe);this.zipComment=this.loadOptions.decodeFileName(le)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var Fe,Ne,le,Se=this.zip64EndOfCentralSize-44;0<Se;)Fe=this.reader.readInt(2),Ne=this.reader.readInt(4),le=this.reader.readData(Ne),this.zip64ExtensibleData[Fe]={id:Fe,length:Ne,value:le}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var Fe,Ne;for(Fe=0;Fe<this.files.length;Fe++)this.reader.setIndex((Ne=this.files[Fe]).localHeaderOffset),this.checkSignature(ie.LOCAL_FILE_HEADER),Ne.readLocalPart(this.reader),Ne.handleUTF8(),Ne.processAttributes()},readCentralDir:function(){var Fe;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(ie.CENTRAL_FILE_HEADER);)(Fe=new ye({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(Fe);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var Fe=this.reader.lastIndexOfSignature(ie.CENTRAL_DIRECTORY_END);if(Fe<0)throw this.isSignature(0,ie.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(Fe);var Ne=Fe;if(this.checkSignature(ie.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===xe.MAX_VALUE_16BITS||this.diskWithCentralDirStart===xe.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===xe.MAX_VALUE_16BITS||this.centralDirRecords===xe.MAX_VALUE_16BITS||this.centralDirSize===xe.MAX_VALUE_32BITS||this.centralDirOffset===xe.MAX_VALUE_32BITS){if(this.zip64=!0,(Fe=this.reader.lastIndexOfSignature(ie.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(Fe),this.checkSignature(ie.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,ie.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(ie.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(ie.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var le=this.centralDirOffset+this.centralDirSize;this.zip64&&(le+=20,le+=12+this.zip64EndOfCentralSize);var Se=Ne-le;if(0<Se)this.isSignature(Ne,ie.CENTRAL_FILE_HEADER)||(this.reader.zero=Se);else if(Se<0)throw new Error("Corrupted zip: missing "+Math.abs(Se)+" bytes.")},prepareReader:function(Fe){this.reader=ce(Fe)},load:function(Fe){this.prepareReader(Fe),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},St.exports=Ve},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(De,St,ze){"use strict";var ce=De("./reader/readerFor"),xe=De("./utils"),ie=De("./compressedObject"),ye=De("./crc32"),Pe=De("./utf8"),Ve=De("./compressions"),Fe=De("./support");function Ne(le,Se){this.options=le,this.loadOptions=Se}Ne.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(le){var Se,Te;if(le.skip(22),this.fileNameLength=le.readInt(2),Te=le.readInt(2),this.fileName=le.readData(this.fileNameLength),le.skip(Te),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(Se=function(oe){for(var ge in Ve)if(Ve.hasOwnProperty(ge)&&Ve[ge].magic===oe)return Ve[ge];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+xe.pretty(this.compressionMethod)+" unknown (inner file : "+xe.transformTo("string",this.fileName)+")");this.decompressed=new ie(this.compressedSize,this.uncompressedSize,this.crc32,Se,le.readData(this.compressedSize))},readCentralPart:function(le){this.versionMadeBy=le.readInt(2),le.skip(2),this.bitFlag=le.readInt(2),this.compressionMethod=le.readString(2),this.date=le.readDate(),this.crc32=le.readInt(4),this.compressedSize=le.readInt(4),this.uncompressedSize=le.readInt(4);var Se=le.readInt(2);if(this.extraFieldsLength=le.readInt(2),this.fileCommentLength=le.readInt(2),this.diskNumberStart=le.readInt(2),this.internalFileAttributes=le.readInt(2),this.externalFileAttributes=le.readInt(4),this.localHeaderOffset=le.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");le.skip(Se),this.readExtraFields(le),this.parseZIP64ExtraField(le),this.fileComment=le.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var le=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==le&&(this.dosPermissions=63&this.externalFileAttributes),3==le&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(le){if(this.extraFields[1]){var Se=ce(this.extraFields[1].value);this.uncompressedSize===xe.MAX_VALUE_32BITS&&(this.uncompressedSize=Se.readInt(8)),this.compressedSize===xe.MAX_VALUE_32BITS&&(this.compressedSize=Se.readInt(8)),this.localHeaderOffset===xe.MAX_VALUE_32BITS&&(this.localHeaderOffset=Se.readInt(8)),this.diskNumberStart===xe.MAX_VALUE_32BITS&&(this.diskNumberStart=Se.readInt(4))}},readExtraFields:function(le){var Se,Te,oe,ge=le.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});le.index+4<ge;)Se=le.readInt(2),Te=le.readInt(2),oe=le.readData(Te),this.extraFields[Se]={id:Se,length:Te,value:oe};le.setIndex(ge)},handleUTF8:function(){var le=Fe.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=Pe.utf8decode(this.fileName),this.fileCommentStr=Pe.utf8decode(this.fileComment);else{var Se=this.findExtraFieldUnicodePath();if(null!==Se)this.fileNameStr=Se;else{var Te=xe.transformTo(le,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(Te)}var oe=this.findExtraFieldUnicodeComment();if(null!==oe)this.fileCommentStr=oe;else{var ge=xe.transformTo(le,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(ge)}}},findExtraFieldUnicodePath:function(){var le=this.extraFields[28789];if(le){var Se=ce(le.value);return 1!==Se.readInt(1)||ye(this.fileName)!==Se.readInt(4)?null:Pe.utf8decode(Se.readData(le.length-5))}return null},findExtraFieldUnicodeComment:function(){var le=this.extraFields[25461];if(le){var Se=ce(le.value);return 1!==Se.readInt(1)||ye(this.fileComment)!==Se.readInt(4)?null:Pe.utf8decode(Se.readData(le.length-5))}return null}},St.exports=Ne},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(De,St,ze){"use strict";function ce(Se,Te,oe){this.name=Se,this.dir=oe.dir,this.date=oe.date,this.comment=oe.comment,this.unixPermissions=oe.unixPermissions,this.dosPermissions=oe.dosPermissions,this._data=Te,this._dataBinary=oe.binary,this.options={compression:oe.compression,compressionOptions:oe.compressionOptions}}var xe=De("./stream/StreamHelper"),ie=De("./stream/DataWorker"),ye=De("./utf8"),Pe=De("./compressedObject"),Ve=De("./stream/GenericWorker");ce.prototype={internalStream:function(Se){var Te=null,oe="string";try{if(!Se)throw new Error("No output type specified.");var ge="string"===(oe=Se.toLowerCase())||"text"===oe;"binarystring"!==oe&&"text"!==oe||(oe="string"),Te=this._decompressWorker();var be=!this._dataBinary;be&&!ge&&(Te=Te.pipe(new ye.Utf8EncodeWorker)),!be&&ge&&(Te=Te.pipe(new ye.Utf8DecodeWorker))}catch(Ue){(Te=new Ve("error")).error(Ue)}return new xe(Te,oe,"")},async:function(Se,Te){return this.internalStream(Se).accumulate(Te)},nodeStream:function(Se,Te){return this.internalStream(Se||"nodebuffer").toNodejsStream(Te)},_compressWorker:function(Se,Te){if(this._data instanceof Pe&&this._data.compression.magic===Se.magic)return this._data.getCompressedWorker();var oe=this._decompressWorker();return this._dataBinary||(oe=oe.pipe(new ye.Utf8EncodeWorker)),Pe.createWorkerFrom(oe,Se,Te)},_decompressWorker:function(){return this._data instanceof Pe?this._data.getContentWorker():this._data instanceof Ve?this._data:new ie(this._data)}};for(var Fe=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Ne=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},le=0;le<Fe.length;le++)ce.prototype[Fe[le]]=Ne;St.exports=ce},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(De,St,ze){(function(ce){"use strict";var xe,ie,ye=ce.MutationObserver||ce.WebKitMutationObserver;if(ye){var Pe=0,Ve=new ye(Se),Fe=ce.document.createTextNode("");Ve.observe(Fe,{characterData:!0}),xe=function(){Fe.data=Pe=++Pe%2}}else if(ce.setImmediate||void 0===ce.MessageChannel)xe="document"in ce&&"onreadystatechange"in ce.document.createElement("script")?function(){var Te=ce.document.createElement("script");Te.onreadystatechange=function(){Se(),Te.onreadystatechange=null,Te.parentNode.removeChild(Te),Te=null},ce.document.documentElement.appendChild(Te)}:function(){setTimeout(Se,0)};else{var Ne=new ce.MessageChannel;Ne.port1.onmessage=Se,xe=function(){Ne.port2.postMessage(0)}}var le=[];function Se(){var Te,oe;ie=!0;for(var ge=le.length;ge;){for(oe=le,le=[],Te=-1;++Te<ge;)oe[Te]();ge=le.length}ie=!1}St.exports=function(Te){1!==le.push(Te)||ie||xe()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(De,St,ze){"use strict";var ce=De("immediate");function xe(){}var ie={},ye=["REJECTED"],Pe=["FULFILLED"],Ve=["PENDING"];function Fe(ge){if("function"!=typeof ge)throw new TypeError("resolver must be a function");this.state=Ve,this.queue=[],this.outcome=void 0,ge!==xe&&Te(this,ge)}function Ne(ge,be,Ue){this.promise=ge,"function"==typeof be&&(this.onFulfilled=be,this.callFulfilled=this.otherCallFulfilled),"function"==typeof Ue&&(this.onRejected=Ue,this.callRejected=this.otherCallRejected)}function le(ge,be,Ue){ce(function(){var bt;try{bt=be(Ue)}catch(Ge){return ie.reject(ge,Ge)}bt===ge?ie.reject(ge,new TypeError("Cannot resolve promise with itself")):ie.resolve(ge,bt)})}function Se(ge){var be=ge&&ge.then;if(ge&&("object"==typeof ge||"function"==typeof ge)&&"function"==typeof be)return function(){be.apply(ge,arguments)}}function Te(ge,be){var Ue=!1;function bt(Ot){Ue||(Ue=!0,ie.reject(ge,Ot))}function Ge(Ot){Ue||(Ue=!0,ie.resolve(ge,Ot))}var Pt=oe(function(){be(Ge,bt)});"error"===Pt.status&&bt(Pt.value)}function oe(ge,be){var Ue={};try{Ue.value=ge(be),Ue.status="success"}catch(bt){Ue.status="error",Ue.value=bt}return Ue}(St.exports=Fe).prototype.finally=function(ge){if("function"!=typeof ge)return this;var be=this.constructor;return this.then(function(Ue){return be.resolve(ge()).then(function(){return Ue})},function(Ue){return be.resolve(ge()).then(function(){throw Ue})})},Fe.prototype.catch=function(ge){return this.then(null,ge)},Fe.prototype.then=function(ge,be){if("function"!=typeof ge&&this.state===Pe||"function"!=typeof be&&this.state===ye)return this;var Ue=new this.constructor(xe);return this.state!==Ve?le(Ue,this.state===Pe?ge:be,this.outcome):this.queue.push(new Ne(Ue,ge,be)),Ue},Ne.prototype.callFulfilled=function(ge){ie.resolve(this.promise,ge)},Ne.prototype.otherCallFulfilled=function(ge){le(this.promise,this.onFulfilled,ge)},Ne.prototype.callRejected=function(ge){ie.reject(this.promise,ge)},Ne.prototype.otherCallRejected=function(ge){le(this.promise,this.onRejected,ge)},ie.resolve=function(ge,be){var Ue=oe(Se,be);if("error"===Ue.status)return ie.reject(ge,Ue.value);var bt=Ue.value;if(bt)Te(ge,bt);else{ge.state=Pe,ge.outcome=be;for(var Ge=-1,Pt=ge.queue.length;++Ge<Pt;)ge.queue[Ge].callFulfilled(be)}return ge},ie.reject=function(ge,be){ge.state=ye,ge.outcome=be;for(var Ue=-1,bt=ge.queue.length;++Ue<bt;)ge.queue[Ue].callRejected(be);return ge},Fe.resolve=function(ge){return ge instanceof this?ge:ie.resolve(new this(xe),ge)},Fe.reject=function(ge){var be=new this(xe);return ie.reject(be,ge)},Fe.all=function(ge){var be=this;if("[object Array]"!==Object.prototype.toString.call(ge))return this.reject(new TypeError("must be an array"));var Ue=ge.length,bt=!1;if(!Ue)return this.resolve([]);for(var Ge=new Array(Ue),Pt=0,Ot=-1,qt=new this(xe);++Ot<Ue;)ft(ge[Ot],Ot);return qt;function ft(Gt,Gn){be.resolve(Gt).then(function(ke){Ge[Gn]=ke,++Pt!==Ue||bt||(bt=!0,ie.resolve(qt,Ge))},function(ke){bt||(bt=!0,ie.reject(qt,ke))})}},Fe.race=function(ge){if("[object Array]"!==Object.prototype.toString.call(ge))return this.reject(new TypeError("must be an array"));var Ue=ge.length,bt=!1;if(!Ue)return this.resolve([]);for(var Ge=-1,Pt=new this(xe);++Ge<Ue;)this.resolve(ge[Ge]).then(function(qt){bt||(bt=!0,ie.resolve(Pt,qt))},function(qt){bt||(bt=!0,ie.reject(Pt,qt))});return Pt}},{immediate:36}],38:[function(De,St,ze){"use strict";var ce={};(0,De("./lib/utils/common").assign)(ce,De("./lib/deflate"),De("./lib/inflate"),De("./lib/zlib/constants")),St.exports=ce},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(De,St,ze){"use strict";var ce=De("./zlib/deflate"),xe=De("./utils/common"),ie=De("./utils/strings"),ye=De("./zlib/messages"),Pe=De("./zlib/zstream"),Ve=Object.prototype.toString;function Te(ge){if(!(this instanceof Te))return new Te(ge);this.options=xe.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},ge||{});var be=this.options;be.raw&&0<be.windowBits?be.windowBits=-be.windowBits:be.gzip&&0<be.windowBits&&be.windowBits<16&&(be.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pe,this.strm.avail_out=0;var Ue=ce.deflateInit2(this.strm,be.level,be.method,be.windowBits,be.memLevel,be.strategy);if(0!==Ue)throw new Error(ye[Ue]);if(be.header&&ce.deflateSetHeader(this.strm,be.header),be.dictionary){var bt;if(bt="string"==typeof be.dictionary?ie.string2buf(be.dictionary):"[object ArrayBuffer]"===Ve.call(be.dictionary)?new Uint8Array(be.dictionary):be.dictionary,0!==(Ue=ce.deflateSetDictionary(this.strm,bt)))throw new Error(ye[Ue]);this._dict_set=!0}}function oe(ge,be){var Ue=new Te(be);if(Ue.push(ge,!0),Ue.err)throw Ue.msg||ye[Ue.err];return Ue.result}Te.prototype.push=function(ge,be){var Ue,bt,Ge=this.strm,Pt=this.options.chunkSize;if(this.ended)return!1;bt=be===~~be?be:!0===be?4:0,Ge.input="string"==typeof ge?ie.string2buf(ge):"[object ArrayBuffer]"===Ve.call(ge)?new Uint8Array(ge):ge,Ge.next_in=0,Ge.avail_in=Ge.input.length;do{if(0===Ge.avail_out&&(Ge.output=new xe.Buf8(Pt),Ge.next_out=0,Ge.avail_out=Pt),1!==(Ue=ce.deflate(Ge,bt))&&0!==Ue)return this.onEnd(Ue),!(this.ended=!0);0!==Ge.avail_out&&(0!==Ge.avail_in||4!==bt&&2!==bt)||this.onData("string"===this.options.to?ie.buf2binstring(xe.shrinkBuf(Ge.output,Ge.next_out)):xe.shrinkBuf(Ge.output,Ge.next_out))}while((0<Ge.avail_in||0===Ge.avail_out)&&1!==Ue);return 4===bt?(Ue=ce.deflateEnd(this.strm),this.onEnd(Ue),this.ended=!0,0===Ue):2!==bt||(this.onEnd(0),!(Ge.avail_out=0))},Te.prototype.onData=function(ge){this.chunks.push(ge)},Te.prototype.onEnd=function(ge){0===ge&&(this.result="string"===this.options.to?this.chunks.join(""):xe.flattenChunks(this.chunks)),this.chunks=[],this.err=ge,this.msg=this.strm.msg},ze.Deflate=Te,ze.deflate=oe,ze.deflateRaw=function(ge,be){return(be=be||{}).raw=!0,oe(ge,be)},ze.gzip=function(ge,be){return(be=be||{}).gzip=!0,oe(ge,be)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(De,St,ze){"use strict";var ce=De("./zlib/inflate"),xe=De("./utils/common"),ie=De("./utils/strings"),ye=De("./zlib/constants"),Pe=De("./zlib/messages"),Ve=De("./zlib/zstream"),Fe=De("./zlib/gzheader"),Ne=Object.prototype.toString;function le(Te){if(!(this instanceof le))return new le(Te);this.options=xe.assign({chunkSize:16384,windowBits:0,to:""},Te||{});var oe=this.options;oe.raw&&0<=oe.windowBits&&oe.windowBits<16&&(oe.windowBits=-oe.windowBits,0===oe.windowBits&&(oe.windowBits=-15)),!(0<=oe.windowBits&&oe.windowBits<16)||Te&&Te.windowBits||(oe.windowBits+=32),15<oe.windowBits&&oe.windowBits<48&&0==(15&oe.windowBits)&&(oe.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ve,this.strm.avail_out=0;var ge=ce.inflateInit2(this.strm,oe.windowBits);if(ge!==ye.Z_OK)throw new Error(Pe[ge]);this.header=new Fe,ce.inflateGetHeader(this.strm,this.header)}function Se(Te,oe){var ge=new le(oe);if(ge.push(Te,!0),ge.err)throw ge.msg||Pe[ge.err];return ge.result}le.prototype.push=function(Te,oe){var ge,be,Ue,bt,Ge,Pt,Ot=this.strm,qt=this.options.chunkSize,ft=this.options.dictionary,Gt=!1;if(this.ended)return!1;be=oe===~~oe?oe:!0===oe?ye.Z_FINISH:ye.Z_NO_FLUSH,Ot.input="string"==typeof Te?ie.binstring2buf(Te):"[object ArrayBuffer]"===Ne.call(Te)?new Uint8Array(Te):Te,Ot.next_in=0,Ot.avail_in=Ot.input.length;do{if(0===Ot.avail_out&&(Ot.output=new xe.Buf8(qt),Ot.next_out=0,Ot.avail_out=qt),(ge=ce.inflate(Ot,ye.Z_NO_FLUSH))===ye.Z_NEED_DICT&&ft&&(Pt="string"==typeof ft?ie.string2buf(ft):"[object ArrayBuffer]"===Ne.call(ft)?new Uint8Array(ft):ft,ge=ce.inflateSetDictionary(this.strm,Pt)),ge===ye.Z_BUF_ERROR&&!0===Gt&&(ge=ye.Z_OK,Gt=!1),ge!==ye.Z_STREAM_END&&ge!==ye.Z_OK)return this.onEnd(ge),!(this.ended=!0);Ot.next_out&&(0!==Ot.avail_out&&ge!==ye.Z_STREAM_END&&(0!==Ot.avail_in||be!==ye.Z_FINISH&&be!==ye.Z_SYNC_FLUSH)||("string"===this.options.to?(Ue=ie.utf8border(Ot.output,Ot.next_out),bt=Ot.next_out-Ue,Ge=ie.buf2string(Ot.output,Ue),Ot.next_out=bt,Ot.avail_out=qt-bt,bt&&xe.arraySet(Ot.output,Ot.output,Ue,bt,0),this.onData(Ge)):this.onData(xe.shrinkBuf(Ot.output,Ot.next_out)))),0===Ot.avail_in&&0===Ot.avail_out&&(Gt=!0)}while((0<Ot.avail_in||0===Ot.avail_out)&&ge!==ye.Z_STREAM_END);return ge===ye.Z_STREAM_END&&(be=ye.Z_FINISH),be===ye.Z_FINISH?(ge=ce.inflateEnd(this.strm),this.onEnd(ge),this.ended=!0,ge===ye.Z_OK):be!==ye.Z_SYNC_FLUSH||(this.onEnd(ye.Z_OK),!(Ot.avail_out=0))},le.prototype.onData=function(Te){this.chunks.push(Te)},le.prototype.onEnd=function(Te){Te===ye.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):xe.flattenChunks(this.chunks)),this.chunks=[],this.err=Te,this.msg=this.strm.msg},ze.Inflate=le,ze.inflate=Se,ze.inflateRaw=function(Te,oe){return(oe=oe||{}).raw=!0,Se(Te,oe)},ze.ungzip=Se},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(De,St,ze){"use strict";var ce="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;ze.assign=function(ye){for(var Pe=Array.prototype.slice.call(arguments,1);Pe.length;){var Ve=Pe.shift();if(Ve){if("object"!=typeof Ve)throw new TypeError(Ve+"must be non-object");for(var Fe in Ve)Ve.hasOwnProperty(Fe)&&(ye[Fe]=Ve[Fe])}}return ye},ze.shrinkBuf=function(ye,Pe){return ye.length===Pe?ye:ye.subarray?ye.subarray(0,Pe):(ye.length=Pe,ye)};var xe={arraySet:function(ye,Pe,Ve,Fe,Ne){if(Pe.subarray&&ye.subarray)ye.set(Pe.subarray(Ve,Ve+Fe),Ne);else for(var le=0;le<Fe;le++)ye[Ne+le]=Pe[Ve+le]},flattenChunks:function(ye){var Pe,Ve,Fe,Ne,le,Se;for(Pe=Fe=0,Ve=ye.length;Pe<Ve;Pe++)Fe+=ye[Pe].length;for(Se=new Uint8Array(Fe),Pe=Ne=0,Ve=ye.length;Pe<Ve;Pe++)Se.set(le=ye[Pe],Ne),Ne+=le.length;return Se}},ie={arraySet:function(ye,Pe,Ve,Fe,Ne){for(var le=0;le<Fe;le++)ye[Ne+le]=Pe[Ve+le]},flattenChunks:function(ye){return[].concat.apply([],ye)}};ze.setTyped=function(ye){ye?(ze.Buf8=Uint8Array,ze.Buf16=Uint16Array,ze.Buf32=Int32Array,ze.assign(ze,xe)):(ze.Buf8=Array,ze.Buf16=Array,ze.Buf32=Array,ze.assign(ze,ie))},ze.setTyped(ce)},{}],42:[function(De,St,ze){"use strict";var ce=De("./common"),xe=!0,ie=!0;try{String.fromCharCode.apply(null,[0])}catch(Fe){xe=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Fe){ie=!1}for(var ye=new ce.Buf8(256),Pe=0;Pe<256;Pe++)ye[Pe]=252<=Pe?6:248<=Pe?5:240<=Pe?4:224<=Pe?3:192<=Pe?2:1;function Ve(Fe,Ne){if(Ne<65537&&(Fe.subarray&&ie||!Fe.subarray&&xe))return String.fromCharCode.apply(null,ce.shrinkBuf(Fe,Ne));for(var le="",Se=0;Se<Ne;Se++)le+=String.fromCharCode(Fe[Se]);return le}ye[254]=ye[254]=1,ze.string2buf=function(Fe){var Ne,le,Se,Te,oe,ge=Fe.length,be=0;for(Te=0;Te<ge;Te++)55296==(64512&(le=Fe.charCodeAt(Te)))&&Te+1<ge&&56320==(64512&(Se=Fe.charCodeAt(Te+1)))&&(le=65536+(le-55296<<10)+(Se-56320),Te++),be+=le<128?1:le<2048?2:le<65536?3:4;for(Ne=new ce.Buf8(be),Te=oe=0;oe<be;Te++)55296==(64512&(le=Fe.charCodeAt(Te)))&&Te+1<ge&&56320==(64512&(Se=Fe.charCodeAt(Te+1)))&&(le=65536+(le-55296<<10)+(Se-56320),Te++),le<128?Ne[oe++]=le:(le<2048?Ne[oe++]=192|le>>>6:(le<65536?Ne[oe++]=224|le>>>12:(Ne[oe++]=240|le>>>18,Ne[oe++]=128|le>>>12&63),Ne[oe++]=128|le>>>6&63),Ne[oe++]=128|63&le);return Ne},ze.buf2binstring=function(Fe){return Ve(Fe,Fe.length)},ze.binstring2buf=function(Fe){for(var Ne=new ce.Buf8(Fe.length),le=0,Se=Ne.length;le<Se;le++)Ne[le]=Fe.charCodeAt(le);return Ne},ze.buf2string=function(Fe,Ne){var le,Se,Te,oe,ge=Ne||Fe.length,be=new Array(2*ge);for(le=Se=0;le<ge;)if((Te=Fe[le++])<128)be[Se++]=Te;else if(4<(oe=ye[Te]))be[Se++]=65533,le+=oe-1;else{for(Te&=2===oe?31:3===oe?15:7;1<oe&&le<ge;)Te=Te<<6|63&Fe[le++],oe--;1<oe?be[Se++]=65533:Te<65536?be[Se++]=Te:(be[Se++]=55296|(Te-=65536)>>10&1023,be[Se++]=56320|1023&Te)}return Ve(be,Se)},ze.utf8border=function(Fe,Ne){var le;for((Ne=Ne||Fe.length)>Fe.length&&(Ne=Fe.length),le=Ne-1;0<=le&&128==(192&Fe[le]);)le--;return le<0||0===le?Ne:le+ye[Fe[le]]>Ne?le:Ne}},{"./common":41}],43:[function(De,St,ze){"use strict";St.exports=function(ce,xe,ie,ye){for(var Pe=65535&ce|0,Ve=ce>>>16&65535|0,Fe=0;0!==ie;){for(ie-=Fe=2e3<ie?2e3:ie;Ve=Ve+(Pe=Pe+xe[ye++]|0)|0,--Fe;);Pe%=65521,Ve%=65521}return Pe|Ve<<16|0}},{}],44:[function(De,St,ze){"use strict";St.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(De,St,ze){"use strict";var ce=function(){for(var xe,ie=[],ye=0;ye<256;ye++){xe=ye;for(var Pe=0;Pe<8;Pe++)xe=1&xe?3988292384^xe>>>1:xe>>>1;ie[ye]=xe}return ie}();St.exports=function(xe,ie,ye,Pe){var Ve=ce,Fe=Pe+ye;xe^=-1;for(var Ne=Pe;Ne<Fe;Ne++)xe=xe>>>8^Ve[255&(xe^ie[Ne])];return-1^xe}},{}],46:[function(De,St,ze){"use strict";var ce,xe=De("../utils/common"),ie=De("./trees"),ye=De("./adler32"),Pe=De("./crc32"),Ve=De("./messages"),Gt=258,Gn=262;function xn(q,Tt){return q.msg=Ve[Tt],Tt}function $t(q){return(q<<1)-(4<q?9:0)}function Jn(q){for(var Tt=q.length;0<=--Tt;)q[Tt]=0}function ot(q){var Tt=q.state,ht=Tt.pending;ht>q.avail_out&&(ht=q.avail_out),0!==ht&&(xe.arraySet(q.output,Tt.pending_buf,Tt.pending_out,ht,q.next_out),q.next_out+=ht,Tt.pending_out+=ht,q.total_out+=ht,q.avail_out-=ht,Tt.pending-=ht,0===Tt.pending&&(Tt.pending_out=0))}function it(q,Tt){ie._tr_flush_block(q,0<=q.block_start?q.block_start:-1,q.strstart-q.block_start,Tt),q.block_start=q.strstart,ot(q.strm)}function mt(q,Tt){q.pending_buf[q.pending++]=Tt}function vn(q,Tt){q.pending_buf[q.pending++]=Tt>>>8&255,q.pending_buf[q.pending++]=255&Tt}function Jt(q,Tt){var ht,_e,fe=q.max_chain_length,He=q.strstart,Mt=q.prev_length,Ft=q.nice_match,Ke=q.strstart>q.w_size-Gn?q.strstart-(q.w_size-Gn):0,Qt=q.window,Cn=q.w_mask,Ht=q.prev,Un=q.strstart+Gt,Rr=Qt[He+Mt-1],Xi=Qt[He+Mt];q.prev_length>=q.good_match&&(fe>>=2),Ft>q.lookahead&&(Ft=q.lookahead);do{if(Qt[(ht=Tt)+Mt]===Xi&&Qt[ht+Mt-1]===Rr&&Qt[ht]===Qt[He]&&Qt[++ht]===Qt[He+1]){He+=2,ht++;do{}while(Qt[++He]===Qt[++ht]&&Qt[++He]===Qt[++ht]&&Qt[++He]===Qt[++ht]&&Qt[++He]===Qt[++ht]&&Qt[++He]===Qt[++ht]&&Qt[++He]===Qt[++ht]&&Qt[++He]===Qt[++ht]&&Qt[++He]===Qt[++ht]&&He<Un);if(_e=Gt-(Un-He),He=Un-Gt,Mt<_e){if(q.match_start=Tt,Ft<=(Mt=_e))break;Rr=Qt[He+Mt-1],Xi=Qt[He+Mt]}}}while((Tt=Ht[Tt&Cn])>Ke&&0!=--fe);return Mt<=q.lookahead?Mt:q.lookahead}function Ci(q){var Tt,ht,_e,fe,He,Mt,Ft,Ke,Qt,Cn,Ht=q.w_size;do{if(fe=q.window_size-q.lookahead-q.strstart,q.strstart>=Ht+(Ht-Gn)){for(xe.arraySet(q.window,q.window,Ht,Ht,0),q.match_start-=Ht,q.strstart-=Ht,q.block_start-=Ht,Tt=ht=q.hash_size;_e=q.head[--Tt],q.head[Tt]=Ht<=_e?_e-Ht:0,--ht;);for(Tt=ht=Ht;_e=q.prev[--Tt],q.prev[Tt]=Ht<=_e?_e-Ht:0,--ht;);fe+=Ht}if(0===q.strm.avail_in)break;if(Ft=q.window,Ke=q.strstart+q.lookahead,Cn=void 0,(Qt=fe)<(Cn=(Mt=q.strm).avail_in)&&(Cn=Qt),ht=0===Cn?0:(Mt.avail_in-=Cn,xe.arraySet(Ft,Mt.input,Mt.next_in,Cn,Ke),1===Mt.state.wrap?Mt.adler=ye(Mt.adler,Ft,Cn,Ke):2===Mt.state.wrap&&(Mt.adler=Pe(Mt.adler,Ft,Cn,Ke)),Mt.next_in+=Cn,Mt.total_in+=Cn,Cn),q.lookahead+=ht,q.lookahead+q.insert>=3)for(q.ins_h=q.window[He=q.strstart-q.insert],q.ins_h=(q.ins_h<<q.hash_shift^q.window[He+1])&q.hash_mask;q.insert&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[He+3-1])&q.hash_mask,q.prev[He&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=He,He++,q.insert--,!(q.lookahead+q.insert<3)););}while(q.lookahead<Gn&&0!==q.strm.avail_in)}function Hi(q,Tt){for(var ht,_e;;){if(q.lookahead<Gn){if(Ci(q),q.lookahead<Gn&&0===Tt)return 1;if(0===q.lookahead)break}if(ht=0,q.lookahead>=3&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+3-1])&q.hash_mask,ht=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),0!==ht&&q.strstart-ht<=q.w_size-Gn&&(q.match_length=Jt(q,ht)),q.match_length>=3)if(_e=ie._tr_tally(q,q.strstart-q.match_start,q.match_length-3),q.lookahead-=q.match_length,q.match_length<=q.max_lazy_match&&q.lookahead>=3){for(q.match_length--;q.strstart++,q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+3-1])&q.hash_mask,ht=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart,0!=--q.match_length;);q.strstart++}else q.strstart+=q.match_length,q.match_length=0,q.ins_h=q.window[q.strstart],q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+1])&q.hash_mask;else _e=ie._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++;if(_e&&(it(q,!1),0===q.strm.avail_out))return 1}return q.insert=q.strstart<2?q.strstart:2,4===Tt?(it(q,!0),0===q.strm.avail_out?3:4):q.last_lit&&(it(q,!1),0===q.strm.avail_out)?1:2}function fn(q,Tt){for(var ht,_e,fe;;){if(q.lookahead<Gn){if(Ci(q),q.lookahead<Gn&&0===Tt)return 1;if(0===q.lookahead)break}if(ht=0,q.lookahead>=3&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+3-1])&q.hash_mask,ht=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),q.prev_length=q.match_length,q.prev_match=q.match_start,q.match_length=2,0!==ht&&q.prev_length<q.max_lazy_match&&q.strstart-ht<=q.w_size-Gn&&(q.match_length=Jt(q,ht),q.match_length<=5&&(1===q.strategy||3===q.match_length&&4096<q.strstart-q.match_start)&&(q.match_length=2)),q.prev_length>=3&&q.match_length<=q.prev_length){for(fe=q.strstart+q.lookahead-3,_e=ie._tr_tally(q,q.strstart-1-q.prev_match,q.prev_length-3),q.lookahead-=q.prev_length-1,q.prev_length-=2;++q.strstart<=fe&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+3-1])&q.hash_mask,ht=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),0!=--q.prev_length;);if(q.match_available=0,q.match_length=2,q.strstart++,_e&&(it(q,!1),0===q.strm.avail_out))return 1}else if(q.match_available){if((_e=ie._tr_tally(q,0,q.window[q.strstart-1]))&&it(q,!1),q.strstart++,q.lookahead--,0===q.strm.avail_out)return 1}else q.match_available=1,q.strstart++,q.lookahead--}return q.match_available&&(_e=ie._tr_tally(q,0,q.window[q.strstart-1]),q.match_available=0),q.insert=q.strstart<2?q.strstart:2,4===Tt?(it(q,!0),0===q.strm.avail_out?3:4):q.last_lit&&(it(q,!1),0===q.strm.avail_out)?1:2}function tr(q,Tt,ht,_e,fe){this.good_length=q,this.max_lazy=Tt,this.nice_length=ht,this.max_chain=_e,this.func=fe}function go(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new xe.Buf16(1146),this.dyn_dtree=new xe.Buf16(122),this.bl_tree=new xe.Buf16(78),Jn(this.dyn_ltree),Jn(this.dyn_dtree),Jn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new xe.Buf16(16),this.heap=new xe.Buf16(573),Jn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new xe.Buf16(573),Jn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function es(q){var Tt;return q&&q.state?(q.total_in=q.total_out=0,q.data_type=2,(Tt=q.state).pending=0,Tt.pending_out=0,Tt.wrap<0&&(Tt.wrap=-Tt.wrap),Tt.status=Tt.wrap?42:113,q.adler=2===Tt.wrap?0:1,Tt.last_flush=0,ie._tr_init(Tt),0):xn(q,-2)}function yu(q){var ht,Tt=es(q);return 0===Tt&&((ht=q.state).window_size=2*ht.w_size,Jn(ht.head),ht.max_lazy_match=ce[ht.level].max_lazy,ht.good_match=ce[ht.level].good_length,ht.nice_match=ce[ht.level].nice_length,ht.max_chain_length=ce[ht.level].max_chain,ht.strstart=0,ht.block_start=0,ht.lookahead=0,ht.insert=0,ht.match_length=ht.prev_length=2,ht.match_available=0,ht.ins_h=0),Tt}function ks(q,Tt,ht,_e,fe,He){if(!q)return-2;var Mt=1;if(-1===Tt&&(Tt=6),_e<0?(Mt=0,_e=-_e):15<_e&&(Mt=2,_e-=16),fe<1||9<fe||8!==ht||_e<8||15<_e||Tt<0||9<Tt||He<0||4<He)return xn(q,-2);8===_e&&(_e=9);var Ft=new go;return(q.state=Ft).strm=q,Ft.wrap=Mt,Ft.gzhead=null,Ft.w_bits=_e,Ft.w_size=1<<Ft.w_bits,Ft.w_mask=Ft.w_size-1,Ft.hash_bits=fe+7,Ft.hash_size=1<<Ft.hash_bits,Ft.hash_mask=Ft.hash_size-1,Ft.hash_shift=~~((Ft.hash_bits+3-1)/3),Ft.window=new xe.Buf8(2*Ft.w_size),Ft.head=new xe.Buf16(Ft.hash_size),Ft.prev=new xe.Buf16(Ft.w_size),Ft.lit_bufsize=1<<fe+6,Ft.pending_buf_size=4*Ft.lit_bufsize,Ft.pending_buf=new xe.Buf8(Ft.pending_buf_size),Ft.d_buf=1*Ft.lit_bufsize,Ft.l_buf=3*Ft.lit_bufsize,Ft.level=Tt,Ft.strategy=He,Ft.method=ht,yu(q)}ce=[new tr(0,0,0,0,function(q,Tt){var ht=65535;for(ht>q.pending_buf_size-5&&(ht=q.pending_buf_size-5);;){if(q.lookahead<=1){if(Ci(q),0===q.lookahead&&0===Tt)return 1;if(0===q.lookahead)break}q.strstart+=q.lookahead,q.lookahead=0;var _e=q.block_start+ht;if((0===q.strstart||q.strstart>=_e)&&(q.lookahead=q.strstart-_e,q.strstart=_e,it(q,!1),0===q.strm.avail_out)||q.strstart-q.block_start>=q.w_size-Gn&&(it(q,!1),0===q.strm.avail_out))return 1}return q.insert=0,4===Tt?(it(q,!0),0===q.strm.avail_out?3:4):(q.strstart>q.block_start&&it(q,!1),1)}),new tr(4,4,8,4,Hi),new tr(4,5,16,8,Hi),new tr(4,6,32,32,Hi),new tr(4,4,16,16,fn),new tr(8,16,32,32,fn),new tr(8,16,128,128,fn),new tr(8,32,128,256,fn),new tr(32,128,258,1024,fn),new tr(32,258,258,4096,fn)],ze.deflateInit=function(q,Tt){return ks(q,Tt,8,15,8,0)},ze.deflateInit2=ks,ze.deflateReset=yu,ze.deflateResetKeep=es,ze.deflateSetHeader=function(q,Tt){return q&&q.state?2!==q.state.wrap?-2:(q.state.gzhead=Tt,0):-2},ze.deflate=function(q,Tt){var ht,_e,fe,He;if(!q||!q.state||5<Tt||Tt<0)return q?xn(q,-2):-2;if(_e=q.state,!q.output||!q.input&&0!==q.avail_in||666===_e.status&&4!==Tt)return xn(q,0===q.avail_out?-5:-2);if(_e.strm=q,ht=_e.last_flush,_e.last_flush=Tt,42===_e.status)if(2===_e.wrap)q.adler=0,mt(_e,31),mt(_e,139),mt(_e,8),_e.gzhead?(mt(_e,(_e.gzhead.text?1:0)+(_e.gzhead.hcrc?2:0)+(_e.gzhead.extra?4:0)+(_e.gzhead.name?8:0)+(_e.gzhead.comment?16:0)),mt(_e,255&_e.gzhead.time),mt(_e,_e.gzhead.time>>8&255),mt(_e,_e.gzhead.time>>16&255),mt(_e,_e.gzhead.time>>24&255),mt(_e,9===_e.level?2:2<=_e.strategy||_e.level<2?4:0),mt(_e,255&_e.gzhead.os),_e.gzhead.extra&&_e.gzhead.extra.length&&(mt(_e,255&_e.gzhead.extra.length),mt(_e,_e.gzhead.extra.length>>8&255)),_e.gzhead.hcrc&&(q.adler=Pe(q.adler,_e.pending_buf,_e.pending,0)),_e.gzindex=0,_e.status=69):(mt(_e,0),mt(_e,0),mt(_e,0),mt(_e,0),mt(_e,0),mt(_e,9===_e.level?2:2<=_e.strategy||_e.level<2?4:0),mt(_e,3),_e.status=113);else{var Mt=8+(_e.w_bits-8<<4)<<8;Mt|=(2<=_e.strategy||_e.level<2?0:_e.level<6?1:6===_e.level?2:3)<<6,0!==_e.strstart&&(Mt|=32),Mt+=31-Mt%31,_e.status=113,vn(_e,Mt),0!==_e.strstart&&(vn(_e,q.adler>>>16),vn(_e,65535&q.adler)),q.adler=1}if(69===_e.status)if(_e.gzhead.extra){for(fe=_e.pending;_e.gzindex<(65535&_e.gzhead.extra.length)&&(_e.pending!==_e.pending_buf_size||(_e.gzhead.hcrc&&_e.pending>fe&&(q.adler=Pe(q.adler,_e.pending_buf,_e.pending-fe,fe)),ot(q),fe=_e.pending,_e.pending!==_e.pending_buf_size));)mt(_e,255&_e.gzhead.extra[_e.gzindex]),_e.gzindex++;_e.gzhead.hcrc&&_e.pending>fe&&(q.adler=Pe(q.adler,_e.pending_buf,_e.pending-fe,fe)),_e.gzindex===_e.gzhead.extra.length&&(_e.gzindex=0,_e.status=73)}else _e.status=73;if(73===_e.status)if(_e.gzhead.name){fe=_e.pending;do{if(_e.pending===_e.pending_buf_size&&(_e.gzhead.hcrc&&_e.pending>fe&&(q.adler=Pe(q.adler,_e.pending_buf,_e.pending-fe,fe)),ot(q),fe=_e.pending,_e.pending===_e.pending_buf_size)){He=1;break}He=_e.gzindex<_e.gzhead.name.length?255&_e.gzhead.name.charCodeAt(_e.gzindex++):0,mt(_e,He)}while(0!==He);_e.gzhead.hcrc&&_e.pending>fe&&(q.adler=Pe(q.adler,_e.pending_buf,_e.pending-fe,fe)),0===He&&(_e.gzindex=0,_e.status=91)}else _e.status=91;if(91===_e.status)if(_e.gzhead.comment){fe=_e.pending;do{if(_e.pending===_e.pending_buf_size&&(_e.gzhead.hcrc&&_e.pending>fe&&(q.adler=Pe(q.adler,_e.pending_buf,_e.pending-fe,fe)),ot(q),fe=_e.pending,_e.pending===_e.pending_buf_size)){He=1;break}He=_e.gzindex<_e.gzhead.comment.length?255&_e.gzhead.comment.charCodeAt(_e.gzindex++):0,mt(_e,He)}while(0!==He);_e.gzhead.hcrc&&_e.pending>fe&&(q.adler=Pe(q.adler,_e.pending_buf,_e.pending-fe,fe)),0===He&&(_e.status=103)}else _e.status=103;if(103===_e.status&&(_e.gzhead.hcrc?(_e.pending+2>_e.pending_buf_size&&ot(q),_e.pending+2<=_e.pending_buf_size&&(mt(_e,255&q.adler),mt(_e,q.adler>>8&255),q.adler=0,_e.status=113)):_e.status=113),0!==_e.pending){if(ot(q),0===q.avail_out)return _e.last_flush=-1,0}else if(0===q.avail_in&&$t(Tt)<=$t(ht)&&4!==Tt)return xn(q,-5);if(666===_e.status&&0!==q.avail_in)return xn(q,-5);if(0!==q.avail_in||0!==_e.lookahead||0!==Tt&&666!==_e.status){var Ft=2===_e.strategy?function(Ke,Qt){for(var Cn;;){if(0===Ke.lookahead&&(Ci(Ke),0===Ke.lookahead)){if(0===Qt)return 1;break}if(Ke.match_length=0,Cn=ie._tr_tally(Ke,0,Ke.window[Ke.strstart]),Ke.lookahead--,Ke.strstart++,Cn&&(it(Ke,!1),0===Ke.strm.avail_out))return 1}return Ke.insert=0,4===Qt?(it(Ke,!0),0===Ke.strm.avail_out?3:4):Ke.last_lit&&(it(Ke,!1),0===Ke.strm.avail_out)?1:2}(_e,Tt):3===_e.strategy?function(Ke,Qt){for(var Cn,Ht,Un,Rr,Xi=Ke.window;;){if(Ke.lookahead<=Gt){if(Ci(Ke),Ke.lookahead<=Gt&&0===Qt)return 1;if(0===Ke.lookahead)break}if(Ke.match_length=0,Ke.lookahead>=3&&0<Ke.strstart&&(Ht=Xi[Un=Ke.strstart-1])===Xi[++Un]&&Ht===Xi[++Un]&&Ht===Xi[++Un]){Rr=Ke.strstart+Gt;do{}while(Ht===Xi[++Un]&&Ht===Xi[++Un]&&Ht===Xi[++Un]&&Ht===Xi[++Un]&&Ht===Xi[++Un]&&Ht===Xi[++Un]&&Ht===Xi[++Un]&&Ht===Xi[++Un]&&Un<Rr);Ke.match_length=Gt-(Rr-Un),Ke.match_length>Ke.lookahead&&(Ke.match_length=Ke.lookahead)}if(Ke.match_length>=3?(Cn=ie._tr_tally(Ke,1,Ke.match_length-3),Ke.lookahead-=Ke.match_length,Ke.strstart+=Ke.match_length,Ke.match_length=0):(Cn=ie._tr_tally(Ke,0,Ke.window[Ke.strstart]),Ke.lookahead--,Ke.strstart++),Cn&&(it(Ke,!1),0===Ke.strm.avail_out))return 1}return Ke.insert=0,4===Qt?(it(Ke,!0),0===Ke.strm.avail_out?3:4):Ke.last_lit&&(it(Ke,!1),0===Ke.strm.avail_out)?1:2}(_e,Tt):ce[_e.level].func(_e,Tt);if(3!==Ft&&4!==Ft||(_e.status=666),1===Ft||3===Ft)return 0===q.avail_out&&(_e.last_flush=-1),0;if(2===Ft&&(1===Tt?ie._tr_align(_e):5!==Tt&&(ie._tr_stored_block(_e,0,0,!1),3===Tt&&(Jn(_e.head),0===_e.lookahead&&(_e.strstart=0,_e.block_start=0,_e.insert=0))),ot(q),0===q.avail_out))return _e.last_flush=-1,0}return 4!==Tt?0:_e.wrap<=0?1:(2===_e.wrap?(mt(_e,255&q.adler),mt(_e,q.adler>>8&255),mt(_e,q.adler>>16&255),mt(_e,q.adler>>24&255),mt(_e,255&q.total_in),mt(_e,q.total_in>>8&255),mt(_e,q.total_in>>16&255),mt(_e,q.total_in>>24&255)):(vn(_e,q.adler>>>16),vn(_e,65535&q.adler)),ot(q),0<_e.wrap&&(_e.wrap=-_e.wrap),0!==_e.pending?0:1)},ze.deflateEnd=function(q){var Tt;return q&&q.state?42!==(Tt=q.state.status)&&69!==Tt&&73!==Tt&&91!==Tt&&103!==Tt&&113!==Tt&&666!==Tt?xn(q,-2):(q.state=null,113===Tt?xn(q,-3):0):-2},ze.deflateSetDictionary=function(q,Tt){var ht,_e,fe,He,Mt,Ft,Ke,Qt,Cn=Tt.length;if(!q||!q.state||2===(He=(ht=q.state).wrap)||1===He&&42!==ht.status||ht.lookahead)return-2;for(1===He&&(q.adler=ye(q.adler,Tt,Cn,0)),ht.wrap=0,Cn>=ht.w_size&&(0===He&&(Jn(ht.head),ht.strstart=0,ht.block_start=0,ht.insert=0),Qt=new xe.Buf8(ht.w_size),xe.arraySet(Qt,Tt,Cn-ht.w_size,ht.w_size,0),Tt=Qt,Cn=ht.w_size),Mt=q.avail_in,Ft=q.next_in,Ke=q.input,q.avail_in=Cn,q.next_in=0,q.input=Tt,Ci(ht);ht.lookahead>=3;){for(_e=ht.strstart,fe=ht.lookahead-2;ht.ins_h=(ht.ins_h<<ht.hash_shift^ht.window[_e+3-1])&ht.hash_mask,ht.prev[_e&ht.w_mask]=ht.head[ht.ins_h],ht.head[ht.ins_h]=_e,_e++,--fe;);ht.strstart=_e,ht.lookahead=2,Ci(ht)}return ht.strstart+=ht.lookahead,ht.block_start=ht.strstart,ht.insert=ht.lookahead,ht.lookahead=0,ht.match_length=ht.prev_length=2,ht.match_available=0,q.next_in=Ft,q.input=Ke,q.avail_in=Mt,ht.wrap=He,0},ze.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(De,St,ze){"use strict";St.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(De,St,ze){"use strict";St.exports=function(ce,xe){var ie,ye,Pe,Ve,Fe,Ne,le,Se,Te,oe,ge,be,Ue,bt,Ge,Pt,Ot,qt,ft,Gt,Gn,ke,yt,J,xt;J=ce.input,Pe=(ye=ce.next_in)+(ce.avail_in-5),xt=ce.output,Fe=(Ve=ce.next_out)-(xe-ce.avail_out),Ne=Ve+(ce.avail_out-257),le=(ie=ce.state).dmax,Se=ie.wsize,Te=ie.whave,oe=ie.wnext,ge=ie.window,be=ie.hold,Ue=ie.bits,bt=ie.lencode,Ge=ie.distcode,Pt=(1<<ie.lenbits)-1,Ot=(1<<ie.distbits)-1;e:do{Ue<15&&(be+=J[ye++]<<Ue,be+=J[ye++]<<(Ue+=8),Ue+=8),qt=bt[be&Pt];t:for(;;){if(be>>>=ft=qt>>>24,Ue-=ft,0==(ft=qt>>>16&255))xt[Ve++]=65535&qt;else{if(!(16&ft)){if(0==(64&ft)){qt=bt[(65535&qt)+(be&(1<<ft)-1)];continue t}if(32&ft){ie.mode=12;break e}ce.msg="invalid literal/length code",ie.mode=30;break e}Gt=65535&qt,(ft&=15)&&(Ue<ft&&(be+=J[ye++]<<Ue,Ue+=8),Gt+=be&(1<<ft)-1,be>>>=ft,Ue-=ft),Ue<15&&(be+=J[ye++]<<Ue,be+=J[ye++]<<(Ue+=8),Ue+=8),qt=Ge[be&Ot];n:for(;;){if(be>>>=ft=qt>>>24,Ue-=ft,!(16&(ft=qt>>>16&255))){if(0==(64&ft)){qt=Ge[(65535&qt)+(be&(1<<ft)-1)];continue n}ce.msg="invalid distance code",ie.mode=30;break e}if(Gn=65535&qt,Ue<(ft&=15)&&(be+=J[ye++]<<Ue,(Ue+=8)<ft&&(be+=J[ye++]<<Ue,Ue+=8)),le<(Gn+=be&(1<<ft)-1)){ce.msg="invalid distance too far back",ie.mode=30;break e}if(be>>>=ft,Ue-=ft,(ft=Ve-Fe)<Gn){if(Te<(ft=Gn-ft)&&ie.sane){ce.msg="invalid distance too far back",ie.mode=30;break e}if(yt=ge,(ke=0)===oe){if(ke+=Se-ft,ft<Gt){for(Gt-=ft;xt[Ve++]=ge[ke++],--ft;);ke=Ve-Gn,yt=xt}}else if(oe<ft){if(ke+=Se+oe-ft,(ft-=oe)<Gt){for(Gt-=ft;xt[Ve++]=ge[ke++],--ft;);if(ke=0,oe<Gt){for(Gt-=ft=oe;xt[Ve++]=ge[ke++],--ft;);ke=Ve-Gn,yt=xt}}}else if(ke+=oe-ft,ft<Gt){for(Gt-=ft;xt[Ve++]=ge[ke++],--ft;);ke=Ve-Gn,yt=xt}for(;2<Gt;)xt[Ve++]=yt[ke++],xt[Ve++]=yt[ke++],xt[Ve++]=yt[ke++],Gt-=3;Gt&&(xt[Ve++]=yt[ke++],1<Gt&&(xt[Ve++]=yt[ke++]))}else{for(ke=Ve-Gn;xt[Ve++]=xt[ke++],xt[Ve++]=xt[ke++],xt[Ve++]=xt[ke++],2<(Gt-=3););Gt&&(xt[Ve++]=xt[ke++],1<Gt&&(xt[Ve++]=xt[ke++]))}break}}break}}while(ye<Pe&&Ve<Ne);ye-=Gt=Ue>>3,be&=(1<<(Ue-=Gt<<3))-1,ce.next_in=ye,ce.next_out=Ve,ce.avail_in=ye<Pe?Pe-ye+5:5-(ye-Pe),ce.avail_out=Ve<Ne?Ne-Ve+257:257-(Ve-Ne),ie.hold=be,ie.bits=Ue}},{}],49:[function(De,St,ze){"use strict";var ce=De("../utils/common"),xe=De("./adler32"),ie=De("./crc32"),ye=De("./inffast"),Pe=De("./inftrees");function ge(ke){return(ke>>>24&255)+(ke>>>8&65280)+((65280&ke)<<8)+((255&ke)<<24)}function be(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ce.Buf16(320),this.work=new ce.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ue(ke){var yt;return ke&&ke.state?(ke.total_in=ke.total_out=(yt=ke.state).total=0,ke.msg="",yt.wrap&&(ke.adler=1&yt.wrap),yt.mode=1,yt.last=0,yt.havedict=0,yt.dmax=32768,yt.head=null,yt.hold=0,yt.bits=0,yt.lencode=yt.lendyn=new ce.Buf32(852),yt.distcode=yt.distdyn=new ce.Buf32(592),yt.sane=1,yt.back=-1,0):-2}function bt(ke){var yt;return ke&&ke.state?((yt=ke.state).wsize=0,yt.whave=0,yt.wnext=0,Ue(ke)):-2}function Ge(ke,yt){var J,xt;return ke&&ke.state?(xt=ke.state,yt<0?(J=0,yt=-yt):(J=1+(yt>>4),yt<48&&(yt&=15)),yt&&(yt<8||15<yt)?-2:(null!==xt.window&&xt.wbits!==yt&&(xt.window=null),xt.wrap=J,xt.wbits=yt,bt(ke))):-2}function Pt(ke,yt){var J,xt;return ke?(xt=new be,(ke.state=xt).window=null,0!==(J=Ge(ke,yt))&&(ke.state=null),J):-2}var Ot,qt,ft=!0;function Gt(ke){if(ft){var yt;for(Ot=new ce.Buf32(512),qt=new ce.Buf32(32),yt=0;yt<144;)ke.lens[yt++]=8;for(;yt<256;)ke.lens[yt++]=9;for(;yt<280;)ke.lens[yt++]=7;for(;yt<288;)ke.lens[yt++]=8;for(Pe(1,ke.lens,0,288,Ot,0,ke.work,{bits:9}),yt=0;yt<32;)ke.lens[yt++]=5;Pe(2,ke.lens,0,32,qt,0,ke.work,{bits:5}),ft=!1}ke.lencode=Ot,ke.lenbits=9,ke.distcode=qt,ke.distbits=5}function Gn(ke,yt,J,xt){var hi,Lt=ke.state;return null===Lt.window&&(Lt.wsize=1<<Lt.wbits,Lt.wnext=0,Lt.whave=0,Lt.window=new ce.Buf8(Lt.wsize)),xt>=Lt.wsize?(ce.arraySet(Lt.window,yt,J-Lt.wsize,Lt.wsize,0),Lt.wnext=0,Lt.whave=Lt.wsize):(xt<(hi=Lt.wsize-Lt.wnext)&&(hi=xt),ce.arraySet(Lt.window,yt,J-xt,hi,Lt.wnext),(xt-=hi)?(ce.arraySet(Lt.window,yt,J-xt,xt,0),Lt.wnext=xt,Lt.whave=Lt.wsize):(Lt.wnext+=hi,Lt.wnext===Lt.wsize&&(Lt.wnext=0),Lt.whave<Lt.wsize&&(Lt.whave+=hi))),0}ze.inflateReset=bt,ze.inflateReset2=Ge,ze.inflateResetKeep=Ue,ze.inflateInit=function(ke){return Pt(ke,15)},ze.inflateInit2=Pt,ze.inflate=function(ke,yt){var J,xt,hi,Lt,xn,$t,Jn,ot,it,mt,vn,Jt,Ci,Hi,fn,tr,go,es,yu,ks,q,Tt,ht,_e,fe=0,He=new ce.Buf8(4),Mt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ke||!ke.state||!ke.output||!ke.input&&0!==ke.avail_in)return-2;12===(J=ke.state).mode&&(J.mode=13),xn=ke.next_out,hi=ke.output,Lt=ke.next_in,xt=ke.input,ot=J.hold,it=J.bits,mt=$t=ke.avail_in,vn=Jn=ke.avail_out,Tt=0;e:for(;;)switch(J.mode){case 1:if(0===J.wrap){J.mode=13;break}for(;it<16;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}if(2&J.wrap&&35615===ot){He[J.check=0]=255&ot,He[1]=ot>>>8&255,J.check=ie(J.check,He,2,0),it=ot=0,J.mode=2;break}if(J.flags=0,J.head&&(J.head.done=!1),!(1&J.wrap)||(((255&ot)<<8)+(ot>>8))%31){ke.msg="incorrect header check",J.mode=30;break}if(8!=(15&ot)){ke.msg="unknown compression method",J.mode=30;break}if(it-=4,q=8+(15&(ot>>>=4)),0===J.wbits)J.wbits=q;else if(q>J.wbits){ke.msg="invalid window size",J.mode=30;break}J.dmax=1<<q,ke.adler=J.check=1,J.mode=512&ot?10:12,it=ot=0;break;case 2:for(;it<16;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}if(J.flags=ot,8!=(255&J.flags)){ke.msg="unknown compression method",J.mode=30;break}if(57344&J.flags){ke.msg="unknown header flags set",J.mode=30;break}J.head&&(J.head.text=ot>>8&1),512&J.flags&&(He[0]=255&ot,He[1]=ot>>>8&255,J.check=ie(J.check,He,2,0)),it=ot=0,J.mode=3;case 3:for(;it<32;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}J.head&&(J.head.time=ot),512&J.flags&&(He[0]=255&ot,He[1]=ot>>>8&255,He[2]=ot>>>16&255,He[3]=ot>>>24&255,J.check=ie(J.check,He,4,0)),it=ot=0,J.mode=4;case 4:for(;it<16;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}J.head&&(J.head.xflags=255&ot,J.head.os=ot>>8),512&J.flags&&(He[0]=255&ot,He[1]=ot>>>8&255,J.check=ie(J.check,He,2,0)),it=ot=0,J.mode=5;case 5:if(1024&J.flags){for(;it<16;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}J.length=ot,J.head&&(J.head.extra_len=ot),512&J.flags&&(He[0]=255&ot,He[1]=ot>>>8&255,J.check=ie(J.check,He,2,0)),it=ot=0}else J.head&&(J.head.extra=null);J.mode=6;case 6:if(1024&J.flags&&($t<(Jt=J.length)&&(Jt=$t),Jt&&(J.head&&(q=J.head.extra_len-J.length,J.head.extra||(J.head.extra=new Array(J.head.extra_len)),ce.arraySet(J.head.extra,xt,Lt,Jt,q)),512&J.flags&&(J.check=ie(J.check,xt,Jt,Lt)),$t-=Jt,Lt+=Jt,J.length-=Jt),J.length))break e;J.length=0,J.mode=7;case 7:if(2048&J.flags){if(0===$t)break e;for(Jt=0;q=xt[Lt+Jt++],J.head&&q&&J.length<65536&&(J.head.name+=String.fromCharCode(q)),q&&Jt<$t;);if(512&J.flags&&(J.check=ie(J.check,xt,Jt,Lt)),$t-=Jt,Lt+=Jt,q)break e}else J.head&&(J.head.name=null);J.length=0,J.mode=8;case 8:if(4096&J.flags){if(0===$t)break e;for(Jt=0;q=xt[Lt+Jt++],J.head&&q&&J.length<65536&&(J.head.comment+=String.fromCharCode(q)),q&&Jt<$t;);if(512&J.flags&&(J.check=ie(J.check,xt,Jt,Lt)),$t-=Jt,Lt+=Jt,q)break e}else J.head&&(J.head.comment=null);J.mode=9;case 9:if(512&J.flags){for(;it<16;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}if(ot!==(65535&J.check)){ke.msg="header crc mismatch",J.mode=30;break}it=ot=0}J.head&&(J.head.hcrc=J.flags>>9&1,J.head.done=!0),ke.adler=J.check=0,J.mode=12;break;case 10:for(;it<32;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}ke.adler=J.check=ge(ot),it=ot=0,J.mode=11;case 11:if(0===J.havedict)return ke.next_out=xn,ke.avail_out=Jn,ke.next_in=Lt,ke.avail_in=$t,J.hold=ot,J.bits=it,2;ke.adler=J.check=1,J.mode=12;case 12:if(5===yt||6===yt)break e;case 13:if(J.last){ot>>>=7&it,it-=7&it,J.mode=27;break}for(;it<3;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}switch(J.last=1&ot,it-=1,3&(ot>>>=1)){case 0:J.mode=14;break;case 1:if(Gt(J),J.mode=20,6!==yt)break;ot>>>=2,it-=2;break e;case 2:J.mode=17;break;case 3:ke.msg="invalid block type",J.mode=30}ot>>>=2,it-=2;break;case 14:for(ot>>>=7&it,it-=7&it;it<32;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}if((65535&ot)!=(ot>>>16^65535)){ke.msg="invalid stored block lengths",J.mode=30;break}if(J.length=65535&ot,it=ot=0,J.mode=15,6===yt)break e;case 15:J.mode=16;case 16:if(Jt=J.length){if($t<Jt&&(Jt=$t),Jn<Jt&&(Jt=Jn),0===Jt)break e;ce.arraySet(hi,xt,Lt,Jt,xn),$t-=Jt,Lt+=Jt,Jn-=Jt,xn+=Jt,J.length-=Jt;break}J.mode=12;break;case 17:for(;it<14;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}if(J.nlen=257+(31&ot),it-=5,J.ndist=1+(31&(ot>>>=5)),it-=5,J.ncode=4+(15&(ot>>>=5)),ot>>>=4,it-=4,286<J.nlen||30<J.ndist){ke.msg="too many length or distance symbols",J.mode=30;break}J.have=0,J.mode=18;case 18:for(;J.have<J.ncode;){for(;it<3;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}J.lens[Mt[J.have++]]=7&ot,ot>>>=3,it-=3}for(;J.have<19;)J.lens[Mt[J.have++]]=0;if(J.lencode=J.lendyn,J.lenbits=7,Tt=Pe(0,J.lens,0,19,J.lencode,0,J.work,ht={bits:J.lenbits}),J.lenbits=ht.bits,Tt){ke.msg="invalid code lengths set",J.mode=30;break}J.have=0,J.mode=19;case 19:for(;J.have<J.nlen+J.ndist;){for(;tr=(fe=J.lencode[ot&(1<<J.lenbits)-1])>>>16&255,go=65535&fe,!((fn=fe>>>24)<=it);){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}if(go<16)ot>>>=fn,it-=fn,J.lens[J.have++]=go;else{if(16===go){for(_e=fn+2;it<_e;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}if(ot>>>=fn,it-=fn,0===J.have){ke.msg="invalid bit length repeat",J.mode=30;break}q=J.lens[J.have-1],Jt=3+(3&ot),ot>>>=2,it-=2}else if(17===go){for(_e=fn+3;it<_e;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}it-=fn,q=0,Jt=3+(7&(ot>>>=fn)),ot>>>=3,it-=3}else{for(_e=fn+7;it<_e;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}it-=fn,q=0,Jt=11+(127&(ot>>>=fn)),ot>>>=7,it-=7}if(J.have+Jt>J.nlen+J.ndist){ke.msg="invalid bit length repeat",J.mode=30;break}for(;Jt--;)J.lens[J.have++]=q}}if(30===J.mode)break;if(0===J.lens[256]){ke.msg="invalid code -- missing end-of-block",J.mode=30;break}if(J.lenbits=9,Tt=Pe(1,J.lens,0,J.nlen,J.lencode,0,J.work,ht={bits:J.lenbits}),J.lenbits=ht.bits,Tt){ke.msg="invalid literal/lengths set",J.mode=30;break}if(J.distbits=6,J.distcode=J.distdyn,Tt=Pe(2,J.lens,J.nlen,J.ndist,J.distcode,0,J.work,ht={bits:J.distbits}),J.distbits=ht.bits,Tt){ke.msg="invalid distances set",J.mode=30;break}if(J.mode=20,6===yt)break e;case 20:J.mode=21;case 21:if(6<=$t&&258<=Jn){ke.next_out=xn,ke.avail_out=Jn,ke.next_in=Lt,ke.avail_in=$t,J.hold=ot,J.bits=it,ye(ke,vn),xn=ke.next_out,hi=ke.output,Jn=ke.avail_out,Lt=ke.next_in,xt=ke.input,$t=ke.avail_in,ot=J.hold,it=J.bits,12===J.mode&&(J.back=-1);break}for(J.back=0;tr=(fe=J.lencode[ot&(1<<J.lenbits)-1])>>>16&255,go=65535&fe,!((fn=fe>>>24)<=it);){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}if(tr&&0==(240&tr)){for(es=fn,yu=tr,ks=go;tr=(fe=J.lencode[ks+((ot&(1<<es+yu)-1)>>es)])>>>16&255,go=65535&fe,!(es+(fn=fe>>>24)<=it);){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}ot>>>=es,it-=es,J.back+=es}if(ot>>>=fn,it-=fn,J.back+=fn,J.length=go,0===tr){J.mode=26;break}if(32&tr){J.back=-1,J.mode=12;break}if(64&tr){ke.msg="invalid literal/length code",J.mode=30;break}J.extra=15&tr,J.mode=22;case 22:if(J.extra){for(_e=J.extra;it<_e;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}J.length+=ot&(1<<J.extra)-1,ot>>>=J.extra,it-=J.extra,J.back+=J.extra}J.was=J.length,J.mode=23;case 23:for(;tr=(fe=J.distcode[ot&(1<<J.distbits)-1])>>>16&255,go=65535&fe,!((fn=fe>>>24)<=it);){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}if(0==(240&tr)){for(es=fn,yu=tr,ks=go;tr=(fe=J.distcode[ks+((ot&(1<<es+yu)-1)>>es)])>>>16&255,go=65535&fe,!(es+(fn=fe>>>24)<=it);){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}ot>>>=es,it-=es,J.back+=es}if(ot>>>=fn,it-=fn,J.back+=fn,64&tr){ke.msg="invalid distance code",J.mode=30;break}J.offset=go,J.extra=15&tr,J.mode=24;case 24:if(J.extra){for(_e=J.extra;it<_e;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}J.offset+=ot&(1<<J.extra)-1,ot>>>=J.extra,it-=J.extra,J.back+=J.extra}if(J.offset>J.dmax){ke.msg="invalid distance too far back",J.mode=30;break}J.mode=25;case 25:if(0===Jn)break e;if(J.offset>(Jt=vn-Jn)){if((Jt=J.offset-Jt)>J.whave&&J.sane){ke.msg="invalid distance too far back",J.mode=30;break}Ci=Jt>J.wnext?J.wsize-(Jt-=J.wnext):J.wnext-Jt,Jt>J.length&&(Jt=J.length),Hi=J.window}else Hi=hi,Ci=xn-J.offset,Jt=J.length;for(Jn<Jt&&(Jt=Jn),Jn-=Jt,J.length-=Jt;hi[xn++]=Hi[Ci++],--Jt;);0===J.length&&(J.mode=21);break;case 26:if(0===Jn)break e;hi[xn++]=J.length,Jn--,J.mode=21;break;case 27:if(J.wrap){for(;it<32;){if(0===$t)break e;$t--,ot|=xt[Lt++]<<it,it+=8}if(ke.total_out+=vn-=Jn,J.total+=vn,vn&&(ke.adler=J.check=J.flags?ie(J.check,hi,vn,xn-vn):xe(J.check,hi,vn,xn-vn)),vn=Jn,(J.flags?ot:ge(ot))!==J.check){ke.msg="incorrect data check",J.mode=30;break}it=ot=0}J.mode=28;case 28:if(J.wrap&&J.flags){for(;it<32;){if(0===$t)break e;$t--,ot+=xt[Lt++]<<it,it+=8}if(ot!==(4294967295&J.total)){ke.msg="incorrect length check",J.mode=30;break}it=ot=0}J.mode=29;case 29:Tt=1;break e;case 30:Tt=-3;break e;case 31:return-4;default:return-2}return ke.next_out=xn,ke.avail_out=Jn,ke.next_in=Lt,ke.avail_in=$t,J.hold=ot,J.bits=it,(J.wsize||vn!==ke.avail_out&&J.mode<30&&(J.mode<27||4!==yt))&&Gn(ke,ke.output,ke.next_out,vn-ke.avail_out)?(J.mode=31,-4):(vn-=ke.avail_out,ke.total_in+=mt-=ke.avail_in,ke.total_out+=vn,J.total+=vn,J.wrap&&vn&&(ke.adler=J.check=J.flags?ie(J.check,hi,vn,ke.next_out-vn):xe(J.check,hi,vn,ke.next_out-vn)),ke.data_type=J.bits+(J.last?64:0)+(12===J.mode?128:0)+(20===J.mode||15===J.mode?256:0),(0==mt&&0===vn||4===yt)&&0===Tt&&(Tt=-5),Tt)},ze.inflateEnd=function(ke){if(!ke||!ke.state)return-2;var yt=ke.state;return yt.window&&(yt.window=null),ke.state=null,0},ze.inflateGetHeader=function(ke,yt){var J;return ke&&ke.state?0==(2&(J=ke.state).wrap)?-2:((J.head=yt).done=!1,0):-2},ze.inflateSetDictionary=function(ke,yt){var J,xt=yt.length;return ke&&ke.state?0!==(J=ke.state).wrap&&11!==J.mode?-2:11===J.mode&&xe(1,yt,xt,0)!==J.check?-3:Gn(ke,yt,xt,xt)?(J.mode=31,-4):(J.havedict=1,0):-2},ze.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(De,St,ze){"use strict";var ce=De("../utils/common"),xe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ie=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ye=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Pe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];St.exports=function(Ve,Fe,Ne,le,Se,Te,oe,ge){var be,Ue,bt,Ge,Pt,Ot,qt,ft,Gt,Gn=ge.bits,ke=0,yt=0,J=0,xt=0,hi=0,Lt=0,xn=0,$t=0,Jn=0,ot=0,it=null,mt=0,vn=new ce.Buf16(16),Jt=new ce.Buf16(16),Ci=null,Hi=0;for(ke=0;ke<=15;ke++)vn[ke]=0;for(yt=0;yt<le;yt++)vn[Fe[Ne+yt]]++;for(hi=Gn,xt=15;1<=xt&&0===vn[xt];xt--);if(xt<hi&&(hi=xt),0===xt)return Se[Te++]=20971520,Se[Te++]=20971520,ge.bits=1,0;for(J=1;J<xt&&0===vn[J];J++);for(hi<J&&(hi=J),ke=$t=1;ke<=15;ke++)if($t<<=1,($t-=vn[ke])<0)return-1;if(0<$t&&(0===Ve||1!==xt))return-1;for(Jt[1]=0,ke=1;ke<15;ke++)Jt[ke+1]=Jt[ke]+vn[ke];for(yt=0;yt<le;yt++)0!==Fe[Ne+yt]&&(oe[Jt[Fe[Ne+yt]]++]=yt);if(Ot=0===Ve?(it=Ci=oe,19):1===Ve?(it=xe,mt-=257,Ci=ie,Hi-=257,256):(it=ye,Ci=Pe,-1),ke=J,Pt=Te,xn=yt=ot=0,bt=-1,Ge=(Jn=1<<(Lt=hi))-1,1===Ve&&852<Jn||2===Ve&&592<Jn)return 1;for(;;){for(qt=ke-xn,Gt=oe[yt]<Ot?(ft=0,oe[yt]):oe[yt]>Ot?(ft=Ci[Hi+oe[yt]],it[mt+oe[yt]]):(ft=96,0),be=1<<ke-xn,J=Ue=1<<Lt;Se[Pt+(ot>>xn)+(Ue-=be)]=qt<<24|ft<<16|Gt|0,0!==Ue;);for(be=1<<ke-1;ot&be;)be>>=1;if(0!==be?(ot&=be-1,ot+=be):ot=0,yt++,0==--vn[ke]){if(ke===xt)break;ke=Fe[Ne+oe[yt]]}if(hi<ke&&(ot&Ge)!==bt){for(0===xn&&(xn=hi),Pt+=J,$t=1<<(Lt=ke-xn);Lt+xn<xt&&!(($t-=vn[Lt+xn])<=0);)Lt++,$t<<=1;if(Jn+=1<<Lt,1===Ve&&852<Jn||2===Ve&&592<Jn)return 1;Se[bt=ot&Ge]=hi<<24|Lt<<16|Pt-Te|0}}return 0!==ot&&(Se[Pt+ot]=ke-xn<<24|64<<16|0),ge.bits=hi,0}},{"../utils/common":41}],51:[function(De,St,ze){"use strict";St.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(De,St,ze){"use strict";var ce=De("../utils/common");function ye(fe){for(var He=fe.length;0<=--He;)fe[He]=0}var Ot=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],qt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ft=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Gt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Gn=new Array(576);ye(Gn);var ke=new Array(60);ye(ke);var yt=new Array(512);ye(yt);var J=new Array(256);ye(J);var xt=new Array(29);ye(xt);var hi,Lt,xn,$t=new Array(30);function Jn(fe,He,Mt,Ft,Ke){this.static_tree=fe,this.extra_bits=He,this.extra_base=Mt,this.elems=Ft,this.max_length=Ke,this.has_stree=fe&&fe.length}function ot(fe,He){this.dyn_tree=fe,this.max_code=0,this.stat_desc=He}function it(fe){return fe<256?yt[fe]:yt[256+(fe>>>7)]}function mt(fe,He){fe.pending_buf[fe.pending++]=255&He,fe.pending_buf[fe.pending++]=He>>>8&255}function vn(fe,He,Mt){fe.bi_valid>16-Mt?(fe.bi_buf|=He<<fe.bi_valid&65535,mt(fe,fe.bi_buf),fe.bi_buf=He>>16-fe.bi_valid,fe.bi_valid+=Mt-16):(fe.bi_buf|=He<<fe.bi_valid&65535,fe.bi_valid+=Mt)}function Jt(fe,He,Mt){vn(fe,Mt[2*He],Mt[2*He+1])}function Ci(fe,He){for(var Mt=0;Mt|=1&fe,fe>>>=1,Mt<<=1,0<--He;);return Mt>>>1}function Hi(fe,He,Mt){var Ft,Ke,Qt=new Array(16),Cn=0;for(Ft=1;Ft<=15;Ft++)Qt[Ft]=Cn=Cn+Mt[Ft-1]<<1;for(Ke=0;Ke<=He;Ke++){var Ht=fe[2*Ke+1];0!==Ht&&(fe[2*Ke]=Ci(Qt[Ht]++,Ht))}}function fn(fe){var He;for(He=0;He<286;He++)fe.dyn_ltree[2*He]=0;for(He=0;He<30;He++)fe.dyn_dtree[2*He]=0;for(He=0;He<19;He++)fe.bl_tree[2*He]=0;fe.dyn_ltree[512]=1,fe.opt_len=fe.static_len=0,fe.last_lit=fe.matches=0}function tr(fe){8<fe.bi_valid?mt(fe,fe.bi_buf):0<fe.bi_valid&&(fe.pending_buf[fe.pending++]=fe.bi_buf),fe.bi_buf=0,fe.bi_valid=0}function go(fe,He,Mt,Ft){var Ke=2*He,Qt=2*Mt;return fe[Ke]<fe[Qt]||fe[Ke]===fe[Qt]&&Ft[He]<=Ft[Mt]}function es(fe,He,Mt){for(var Ft=fe.heap[Mt],Ke=Mt<<1;Ke<=fe.heap_len&&(Ke<fe.heap_len&&go(He,fe.heap[Ke+1],fe.heap[Ke],fe.depth)&&Ke++,!go(He,Ft,fe.heap[Ke],fe.depth));)fe.heap[Mt]=fe.heap[Ke],Mt=Ke,Ke<<=1;fe.heap[Mt]=Ft}function yu(fe,He,Mt){var Ft,Ke,Qt,Cn,Ht=0;if(0!==fe.last_lit)for(;Ft=fe.pending_buf[fe.d_buf+2*Ht]<<8|fe.pending_buf[fe.d_buf+2*Ht+1],Ke=fe.pending_buf[fe.l_buf+Ht],Ht++,0===Ft?Jt(fe,Ke,He):(Jt(fe,(Qt=J[Ke])+256+1,He),0!==(Cn=Ot[Qt])&&vn(fe,Ke-=xt[Qt],Cn),Jt(fe,Qt=it(--Ft),Mt),0!==(Cn=qt[Qt])&&vn(fe,Ft-=$t[Qt],Cn)),Ht<fe.last_lit;);Jt(fe,256,He)}function ks(fe,He){var Mt,Ft,Ke,Qt=He.dyn_tree,Cn=He.stat_desc.static_tree,Ht=He.stat_desc.has_stree,Un=He.stat_desc.elems,Rr=-1;for(fe.heap_len=0,fe.heap_max=573,Mt=0;Mt<Un;Mt++)0!==Qt[2*Mt]?(fe.heap[++fe.heap_len]=Rr=Mt,fe.depth[Mt]=0):Qt[2*Mt+1]=0;for(;fe.heap_len<2;)Qt[2*(Ke=fe.heap[++fe.heap_len]=Rr<2?++Rr:0)]=1,fe.depth[Ke]=0,fe.opt_len--,Ht&&(fe.static_len-=Cn[2*Ke+1]);for(He.max_code=Rr,Mt=fe.heap_len>>1;1<=Mt;Mt--)es(fe,Qt,Mt);for(Ke=Un;Mt=fe.heap[1],fe.heap[1]=fe.heap[fe.heap_len--],es(fe,Qt,1),Ft=fe.heap[1],fe.heap[--fe.heap_max]=Mt,fe.heap[--fe.heap_max]=Ft,Qt[2*Ke]=Qt[2*Mt]+Qt[2*Ft],fe.depth[Ke]=(fe.depth[Mt]>=fe.depth[Ft]?fe.depth[Mt]:fe.depth[Ft])+1,Qt[2*Mt+1]=Qt[2*Ft+1]=Ke,fe.heap[1]=Ke++,es(fe,Qt,1),2<=fe.heap_len;);fe.heap[--fe.heap_max]=fe.heap[1],function(Xi,Hl){var Hg,_u,iv,Ms,ub,$g,Vc=Hl.dyn_tree,hb=Hl.max_code,S2=Hl.stat_desc.static_tree,w2=Hl.stat_desc.has_stree,W3=Hl.stat_desc.extra_bits,db=Hl.stat_desc.extra_base,Xf=Hl.stat_desc.max_length,Wg=0;for(Ms=0;Ms<=15;Ms++)Xi.bl_count[Ms]=0;for(Vc[2*Xi.heap[Xi.heap_max]+1]=0,Hg=Xi.heap_max+1;Hg<573;Hg++)Xf<(Ms=Vc[2*Vc[2*(_u=Xi.heap[Hg])+1]+1]+1)&&(Ms=Xf,Wg++),Vc[2*_u+1]=Ms,hb<_u||(Xi.bl_count[Ms]++,ub=0,db<=_u&&(ub=W3[_u-db]),Xi.opt_len+=($g=Vc[2*_u])*(Ms+ub),w2&&(Xi.static_len+=$g*(S2[2*_u+1]+ub)));if(0!==Wg){do{for(Ms=Xf-1;0===Xi.bl_count[Ms];)Ms--;Xi.bl_count[Ms]--,Xi.bl_count[Ms+1]+=2,Xi.bl_count[Xf]--,Wg-=2}while(0<Wg);for(Ms=Xf;0!==Ms;Ms--)for(_u=Xi.bl_count[Ms];0!==_u;)hb<(iv=Xi.heap[--Hg])||(Vc[2*iv+1]!==Ms&&(Xi.opt_len+=(Ms-Vc[2*iv+1])*Vc[2*iv],Vc[2*iv+1]=Ms),_u--)}}(fe,He),Hi(Qt,Rr,fe.bl_count)}function q(fe,He,Mt){var Ft,Ke,Qt=-1,Cn=He[1],Ht=0,Un=7,Rr=4;for(0===Cn&&(Un=138,Rr=3),He[2*(Mt+1)+1]=65535,Ft=0;Ft<=Mt;Ft++)Ke=Cn,Cn=He[2*(Ft+1)+1],++Ht<Un&&Ke===Cn||(Ht<Rr?fe.bl_tree[2*Ke]+=Ht:0!==Ke?(Ke!==Qt&&fe.bl_tree[2*Ke]++,fe.bl_tree[32]++):Ht<=10?fe.bl_tree[34]++:fe.bl_tree[36]++,Qt=Ke,Rr=(Ht=0)===Cn?(Un=138,3):Ke===Cn?(Un=6,3):(Un=7,4))}function Tt(fe,He,Mt){var Ft,Ke,Qt=-1,Cn=He[1],Ht=0,Un=7,Rr=4;for(0===Cn&&(Un=138,Rr=3),Ft=0;Ft<=Mt;Ft++)if(Ke=Cn,Cn=He[2*(Ft+1)+1],!(++Ht<Un&&Ke===Cn)){if(Ht<Rr)for(;Jt(fe,Ke,fe.bl_tree),0!=--Ht;);else 0!==Ke?(Ke!==Qt&&(Jt(fe,Ke,fe.bl_tree),Ht--),Jt(fe,16,fe.bl_tree),vn(fe,Ht-3,2)):Ht<=10?(Jt(fe,17,fe.bl_tree),vn(fe,Ht-3,3)):(Jt(fe,18,fe.bl_tree),vn(fe,Ht-11,7));Qt=Ke,Rr=(Ht=0)===Cn?(Un=138,3):Ke===Cn?(Un=6,3):(Un=7,4)}}ye($t);var ht=!1;function _e(fe,He,Mt,Ft){var Ke,Qt,Cn;vn(fe,0+(Ft?1:0),3),Qt=He,Cn=Mt,tr(Ke=fe),mt(Ke,Cn),mt(Ke,~Cn),ce.arraySet(Ke.pending_buf,Ke.window,Qt,Cn,Ke.pending),Ke.pending+=Cn}ze._tr_init=function(fe){ht||(function(){var He,Mt,Ft,Ke,Qt,Cn=new Array(16);for(Ke=Ft=0;Ke<28;Ke++)for(xt[Ke]=Ft,He=0;He<1<<Ot[Ke];He++)J[Ft++]=Ke;for(J[Ft-1]=Ke,Ke=Qt=0;Ke<16;Ke++)for($t[Ke]=Qt,He=0;He<1<<qt[Ke];He++)yt[Qt++]=Ke;for(Qt>>=7;Ke<30;Ke++)for($t[Ke]=Qt<<7,He=0;He<1<<qt[Ke]-7;He++)yt[256+Qt++]=Ke;for(Mt=0;Mt<=15;Mt++)Cn[Mt]=0;for(He=0;He<=143;)Gn[2*He+1]=8,He++,Cn[8]++;for(;He<=255;)Gn[2*He+1]=9,He++,Cn[9]++;for(;He<=279;)Gn[2*He+1]=7,He++,Cn[7]++;for(;He<=287;)Gn[2*He+1]=8,He++,Cn[8]++;for(Hi(Gn,287,Cn),He=0;He<30;He++)ke[2*He+1]=5,ke[2*He]=Ci(He,5);hi=new Jn(Gn,Ot,257,286,15),Lt=new Jn(ke,qt,0,30,15),xn=new Jn(new Array(0),ft,0,19,7)}(),ht=!0),fe.l_desc=new ot(fe.dyn_ltree,hi),fe.d_desc=new ot(fe.dyn_dtree,Lt),fe.bl_desc=new ot(fe.bl_tree,xn),fe.bi_buf=0,fe.bi_valid=0,fn(fe)},ze._tr_stored_block=_e,ze._tr_flush_block=function(fe,He,Mt,Ft){var Ke,Qt,Cn=0;0<fe.level?(2===fe.strm.data_type&&(fe.strm.data_type=function(Ht){var Un,Rr=4093624447;for(Un=0;Un<=31;Un++,Rr>>>=1)if(1&Rr&&0!==Ht.dyn_ltree[2*Un])return 0;if(0!==Ht.dyn_ltree[18]||0!==Ht.dyn_ltree[20]||0!==Ht.dyn_ltree[26])return 1;for(Un=32;Un<256;Un++)if(0!==Ht.dyn_ltree[2*Un])return 1;return 0}(fe)),ks(fe,fe.l_desc),ks(fe,fe.d_desc),Cn=function(Ht){var Un;for(q(Ht,Ht.dyn_ltree,Ht.l_desc.max_code),q(Ht,Ht.dyn_dtree,Ht.d_desc.max_code),ks(Ht,Ht.bl_desc),Un=18;3<=Un&&0===Ht.bl_tree[2*Gt[Un]+1];Un--);return Ht.opt_len+=3*(Un+1)+5+5+4,Un}(fe),(Qt=fe.static_len+3+7>>>3)<=(Ke=fe.opt_len+3+7>>>3)&&(Ke=Qt)):Ke=Qt=Mt+5,Mt+4<=Ke&&-1!==He?_e(fe,He,Mt,Ft):4===fe.strategy||Qt===Ke?(vn(fe,2+(Ft?1:0),3),yu(fe,Gn,ke)):(vn(fe,4+(Ft?1:0),3),function(Ht,Un,Rr,Xi){var Hl;for(vn(Ht,Un-257,5),vn(Ht,Rr-1,5),vn(Ht,Xi-4,4),Hl=0;Hl<Xi;Hl++)vn(Ht,Ht.bl_tree[2*Gt[Hl]+1],3);Tt(Ht,Ht.dyn_ltree,Un-1),Tt(Ht,Ht.dyn_dtree,Rr-1)}(fe,fe.l_desc.max_code+1,fe.d_desc.max_code+1,Cn+1),yu(fe,fe.dyn_ltree,fe.dyn_dtree)),fn(fe),Ft&&tr(fe)},ze._tr_tally=function(fe,He,Mt){return fe.pending_buf[fe.d_buf+2*fe.last_lit]=He>>>8&255,fe.pending_buf[fe.d_buf+2*fe.last_lit+1]=255&He,fe.pending_buf[fe.l_buf+fe.last_lit]=255&Mt,fe.last_lit++,0===He?fe.dyn_ltree[2*Mt]++:(fe.matches++,He--,fe.dyn_ltree[2*(J[Mt]+256+1)]++,fe.dyn_dtree[2*it(He)]++),fe.last_lit===fe.lit_bufsize-1},ze._tr_align=function(fe){var He;vn(fe,2,3),Jt(fe,256,Gn),16===(He=fe).bi_valid?(mt(He,He.bi_buf),He.bi_buf=0,He.bi_valid=0):8<=He.bi_valid&&(He.pending_buf[He.pending++]=255&He.bi_buf,He.bi_buf>>=8,He.bi_valid-=8)}},{"../utils/common":41}],53:[function(De,St,ze){"use strict";St.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(De,St,ze){"use strict";St.exports="function"==typeof setImmediate?setImmediate:function(){var ce=[].slice.apply(arguments);ce.splice(1,0,0),setTimeout.apply(null,ce)}},{}]},{},[10])(10)}},Ra=>{Ra(Ra.s=120)}]);