(()=>{var Ar={390:(L,Te,U)=>{"use strict";class z{workerId;message;constructor(e,t){this.workerId=e,this.message=t}static builder(){return new z(-1,null)}setWorkerId(e){return this.workerId=e,this}setMessage(e){return this.message=e,this}}let ae=(()=>{class r{type;id=0;callbackId=-1;static staticId=0;constructor(t){this.type=t,this.id=r.newId()}static newId(){return r.staticId++}setCallbackId(t){return this.callbackId=t,this}}return r})(),Tr=(()=>{class r extends ae{pageLoadedFrom;static TYPE="SetupWorkerRequest";constructor(t){super(r.TYPE),this.pageLoadedFrom=t}static builder(){return new r("")}setPageLoadedFrom(t){return this.pageLoadedFrom=t,this}}return r})(),Pe=(()=>{class r extends ae{formula;static TYPE="CalculateWorkerRequest";constructor(t){super(r.TYPE),this.formula=t}static builder(){return new r("")}setFormula(t){return this.formula=t,this}}return r})(),Me=(()=>{class r extends ae{gameId;commands;result;static TYPE="CalculateChessWorkerRequest";constructor(t,n,i){super(r.TYPE),this.gameId=t,this.commands=n,this.result=i}static builder(){return new r("","","")}setCommands(t,...n){return this.gameId=t,this.commands=[t,...n].join("\n"),this}setResult(t,n){return this.gameId=t,this.result=n,this}}return r})();class W extends ae{}let Pr=(()=>{class r extends W{libraryRef;libraryType;static TYPE="LibraryInfoRequest";constructor(t,n){super(r.TYPE),this.libraryRef=t,this.libraryType=n}static builder(){return new r("","")}setLibraryRef(t){return this.libraryRef=t,this}setLibraryType(t){return this.libraryType=t,this}}return r})(),Mr=(()=>{class r extends W{libraryType;bookRef;loadBooksEnabled;static TYPE="BookInfoRequest";constructor(t,n,i){super(r.TYPE),this.libraryType=t,this.bookRef=n,this.loadBooksEnabled=i}static builder(){return new r("","",!0)}setLibraryType(t){return this.libraryType=t,this}setBookRef(t){return this.bookRef=t,this}setLoadBooksEnabled(t){return this.loadBooksEnabled=t,this}}return r})(),Cr=(()=>{class r extends W{libraryType;bookRef;languages;static TYPE="BookRequest";constructor(t,n,i){super(r.TYPE),this.libraryType=t,this.bookRef=n,this.languages=i}static builder(){return new r("","",[])}setLibraryType(t){return this.libraryType=t,this}setBookRef(t){return this.bookRef=t,this}setLanguages(t){return this.languages=t,this}addLanguage(t){return this.languages.push(t),this}}return r})(),Ir=(()=>{class r extends W{pages;static TYPE="PagesRequest";constructor(t){super(r.TYPE),this.pages=t}static builder(){return new r([])}setBookPages(t){return this.pages=t,this}addBookPage(t){return this.pages.push(t),this}}return r})(),Lr=(()=>{class r extends W{pages;static TYPE="PagesResponse";constructor(t){super(r.TYPE),this.pages=t}static builder(){return new r([])}setPages(t){return this.pages=t,this}addPage(t){return this.pages.push(t),this}}return r})();class Ce{bookRef;path;content;constructor(e,t,n){this.bookRef=e,this.path=t,this.content=n}static builder(){return new Ce("","","")}setBookRef(e){return this.bookRef=e,this}setPath(e){return this.path=e,this}setContent(e){return this.content=e,this}}let Fr=(()=>{class r extends W{metaBooks;static TYPE="BookResponse";constructor(t){super(r.TYPE),this.metaBooks=t}static builder(){return new r([])}setMetaBooks(t){return this.metaBooks=t,this}addMetaBook(t){return this.metaBooks.push(t),this}}return r})(),Dr=(()=>{class r extends W{bookRef;metaContent;loadBooksEnabled;static TYPE="BookInfoResponse";constructor(t,n,i){super(r.TYPE),this.bookRef=t,this.metaContent=n,this.loadBooksEnabled=i}static builder(){return new r("","",!0)}setBookRef(t){return this.bookRef=t,this}setMetaContent(t){return this.metaContent=t,this}setLoadBooksEnabled(t){return this.loadBooksEnabled=t,this}}return r})(),xr=(()=>{class r extends W{libraryRef;metaContent;static TYPE="LibraryInfoResponse";constructor(t,n){super(r.TYPE),this.libraryRef=t,this.metaContent=n}static builder(){return new r("","")}setLibraryRef(t){return this.libraryRef=t,this}setMetaContent(t){return this.metaContent=t,this}}return r})();class Nr{messageSender;requests=new Map;constructor(e=null){this.messageSender=e}send(e,t){return this.messageSender&&(this.requests.set(t.type,t),this.messageSender(e,t)),this}post(e,t){return this}runAll(e,t,n){let i=0,o=()=>{if(i>=e.length)return void(n&&n(!0));let a=e[i++];t(a,l=>{l?o():n&&n(!1)})};o()}}class le{static merge(e,t){if(!e&&!t)return"";if(!e)return t;if(!t)return e;let n=e.endsWith("/"),i=t.startsWith("/"),o=e;return n!=i?o+=t:n?o+=i?t.substring(1):t:o?o+="/"+t:o=t,o}}class Xe{static dtr(e,t){for(var n=t>=0?t:47,i=new ArrayBuffer(e.length-1),o=new Uint8Array(i),a=n,l=0;l<e.length;++l){var h=255&(e[l]^a);l>0&&(o[l-1]=h),a=255&(a+h^5)}return o}static fromByteArray(e){let t="";for(let n=0;n<e.length;n+=2)t+=String.fromCharCode(e[n+1]<<8|e[n]);return t}}const Ge="2.0.609",Yr=[{id:"deviskin",name:"Deviskin",nameSortOrder:"Deviskin",link:"http://deviskin.github.io"}];class x{id;name;shape;menuShape;routes;routeEnabled;applicationEnabled;applicationHidden;applicationLogoText;libraryType;libraryRef;constructor(e,t,n,i,o,a,l,c,h,w,_){this.id=e,this.name=t,this.shape=n,this.menuShape=i,this.routes=o,this.routeEnabled=a,this.applicationEnabled=l,this.applicationHidden=c,this.applicationLogoText=h,this.libraryType=w,this.libraryRef=_}static builder(){return new x("","","","",[],!1,!1,!1,"","prod","book")}setId(e){return this.id=e,this}setName(e){return this.name=e,this}setShape(e){return this.shape=e,this}setMenuShape(e){return this.menuShape=e,this}setRoutes(e){return this.routes=e,this}setRouteEnabled(e){return this.routeEnabled=e,this}setApplicatioinEnabled(e){return this.applicationEnabled=e,this}setApplicationLogoText(e){return this.applicationLogoText=e,this}setLibraryType(e){return this.libraryType=e,this}setLibraryRef(e){return this.libraryRef=e,this}enable(e=!0){return this.routeEnabled=e,this.applicationEnabled=e,this}hide(e=!0){return this.applicationHidden=e,this}disable(){return this.routeEnabled=!1,this.applicationEnabled=!1,this}}class M{onClick;isActive;isHidden;syncHandler;sLink="";sName="";sShape="";bHasBadge=!1;bHasAlert=!1;workingSync=0;constructor(e,t,n,i,o,a=null,l=null,c=null,h=null){this.onClick=a,this.isActive=l,this.isHidden=c,this.syncHandler=h,this.setLink(e),this.setName(t),this.setShape(n),this.setHasBadge(i),this.setHasAlert(o)}static builder(){return new M("","","",!1,!1,null)}setSyncHandler(e){return this.syncHandler=e,this}setIsActive(e){return this.isActive=e,this}setIsHidden(e){return this.isHidden=e,this}setOnClick(e){return this.onClick=e,this}sync(){if(!(this.workingSync>0)){try{++this.workingSync,this.syncHandler&&this.syncHandler(this)}catch{}--this.workingSync}}get link(){return this.sync(),this.sLink}set link(e){this.sLink=e}get name(){return this.sync(),this.sName}set name(e){this.sName=e}get shape(){return this.sync(),this.sShape}set shape(e){this.sShape=e}get hasBadge(){return this.sync(),this.bHasBadge}set hasBadge(e){this.bHasBadge=e}get hasAlert(){return this.sync(),this.bHasAlert}set hasAlert(e){this.bHasAlert=e}setLink(e){return this.link=e,this}setName(e){return this.name=e,this}setShape(e){return this.shape=e,this}setHasBadge(e){return this.hasBadge=e,this}setHasAlert(e){return this.hasAlert=e,this}runOnClick(){this.onClick&&this.onClick(this)}}class zr{version="";applicationId="memorial";applicationName="Memorial";developers=Yr;production=!0;platform="Web";relativeCacheService=!0;serviceAPIHost="";redirectToServerAfterItIsReadyAdress="";portAutoDetection=!0;portAutoIncrementValue=0;defaultRoute="/compiler";coding=!0;showOldVersions=!1;oldVersionsName="V1";useDictionaries=!1;themeName="blue";serverType="rest";applications=[];constructor(){this.addApplication(x.builder().setId("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setShape("home").setRoutes([M.builder().setLink("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setShape("home")]).hide()).addApplication(x.builder().setId("logos").setName("\u041b\u043e\u0433\u043e").setShape("scroll").setApplicationLogoText("\u041f\u0435\u0447\u0430\u0442\u044c|\u043b\u043e\u0433\u043e\u0442\u0438\u043f\u043e\u0432").setRoutes([M.builder().setLink("logos").setName("\u041b\u043e\u0433\u043e").setShape("print")]).hide()).addApplication(x.builder().setId("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setShape("check-circle").setApplicationLogoText("D3|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([M.builder().setLink("main-test").setName("\u041c\u043e\u043b\u0435\u0431\u0435\u043d").setShape("calendar"),M.builder().setLink("memorials-pages-editor").setName("\u0417\u0430\u043f\u0438\u0441\u043a\u0438").setShape("event"),M.builder().setLink("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setShape("image"),M.builder().setLink("tests").setName("\u0422\u0435\u0441\u0442\u044b").setShape("check-circle")]).hide()).addApplication(x.builder().setId("d3Dexamples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b 3D").setShape("scroll").setApplicationLogoText("Three.JS|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([M.builder().setLink("d3Dexamples").setName("Three 3D").setShape("scroll")]).hide()).addApplication(x.builder().setId("books").setName("\u041a\u043d\u0438\u0433\u0438").setShape("my-logo-icon").setMenuShape("book").setLibraryType("prod").setLibraryRef("biblia").setRoutes([M.builder().setLink("books").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book")])).addApplication(x.builder().setId("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("my-logo-icon").setMenuShape("form").setLibraryType("mprod").setLibraryRef("ps").setRoutes([M.builder().setLink("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("users")])).addApplication(x.builder().setId("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar").setLibraryType("clndrprod").setLibraryRef("clndr").setRoutes([M.builder().setLink("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar")])).addApplication(x.builder().setId("cross").setName("\u041a\u0440\u0435\u0441\u0442").setShape("my-logo-icon").setLibraryType("crossprod").setLibraryRef("cross").setRoutes([M.builder().setLink("cross").setName("\u041a\u0440\u0435\u0441\u0442").setShape("my-logo-icon")])).addApplication(x.builder().setId("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug").setLibraryType("compprod").setLibraryRef("comp").setApplicationLogoText("C-Js|\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setRoutes([M.builder().setLink("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug")]).hide()).addApplication(x.builder().setId("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock").setLibraryType("schprod").setLibraryRef("sch").setRoutes([M.builder().setLink("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock")])).addApplication(x.builder().setId("calculator").setName("\u0420\u0435\u0448IDE").setShape("calculator").setLibraryType("cprod").setLibraryRef("calc").setApplicationLogoText("\u0420\u0435\u0448IDE|\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setRoutes([M.builder().setLink("calculator").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setShape("calculator")])).addApplication(x.builder().setId("chess").setName("\u0428\u0430\u0445\u043c\u0430\u0442\u044b").setShape("chess-white-king").setLibraryType("chessprod").setLibraryRef("chess").setApplicationLogoText("\u0428\u0430\u0445\u043c\u0430\u0442\u044b|\u0438\u0433\u0440\u0430").setRoutes([M.builder().setLink("chess").setName("\u0428\u0430\u0445\u043c\u0430\u0442\u044b").setShape("chess-white-king")])).setVersion("BV."+Ge),this.afterConstruct()}addApplication(e){if(null!=this.applications.find(t=>t.id==e.id))throw new Error(`\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 "${e.id}" \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.`);return this.applications.push(e),this}setVersion(e){return this.version=e,this}setProduction(e){return this.production=e,this}setPlatform(e){return this.platform=e,this}setRelativeCacheService(e){return this.relativeCacheService=e,this}setServiceAPIHost(e){return this.serviceAPIHost=e,this}setRedirectToServerAfterItIsReadyAdress(e){return this.redirectToServerAfterItIsReadyAdress=e,this}setPortAutoDetection(e){return this.portAutoDetection=e,this}setPortAutoIncrementValue(e){return this.portAutoIncrementValue=e,this}setDefaultRoute(e){return this.defaultRoute=e,this}setServerType(e){return this.serverType=e,this}setCoding(e){return this.coding=e,this}setShowOldVersions(e){return this.showOldVersions=e,this}setUseDictionaries(e){return this.useDictionaries=e,this}afterConstruct(){}}class Ie extends zr{afterConstruct(){super.afterConstruct(),this.setVersion("WPR."+Ge).setProduction(!0).setServiceAPIHost("").setRedirectToServerAfterItIsReadyAdress("").setPortAutoDetection(!0).setPortAutoIncrementValue(0).setDefaultRoute("/help").setServerType("memory"),this.applications.forEach((e,t,n)=>e.enable())}static builder(){return new Ie}}const H=Ie.builder();class Le{id;handler;constructor(e,t){this.id=e,this.handler=t}static builder(){return new Le(-1,()=>{})}setId(e){return this.id=e,this}setHandler(e){return this.handler=e,this}}class Wr{id=1;handlers=new Map;targetHandlers=new Map;messagesToTarget=new Map;messagesTimeoutMs=18e4;newId(){return this.id++}putMessage(e){let t=e.target,n=this.messagesToTarget.get(t);return null==n&&(n=[]),n.push(e),n=this.removeOld(n),n?this.messagesToTarget.set(t,n):this.messagesToTarget.delete(t),this}getMessages(e,t=!0){let n=this.messagesToTarget.get(e),i=this.removeOld(n);return null==n&&t&&this.messagesToTarget.delete(e),i}removeAllOld(){let e=[];return this.messagesToTarget.forEach((t,n,i)=>{e.push(n)}),e.forEach(t=>{this.getMessages(t,!1)}),this}removeOld(e){if(void 0===e)return;let t=Date.now(),n=e.findIndex(o=>o.time+this.messagesTimeoutMs>t),i=e;return n>0&&(i=e.splice(0,n)),i}sendMessage(e){this.handlers.forEach((n,i,o)=>{n(e)});let t=this.targetHandlers.get(e.target);t&&t.forEach(n=>{n.handler(e)})}addHandler(e){let t=this.newId();this.handlers.set(t,e);let n=this;return{unsubscribe(){n.removeHandler(t)}}}addTargetHandler(e,t){let n=this.newId(),i=this.targetHandlers.get(e);null==i&&(i=[],this.targetHandlers.set(e,i)),i.push(Le.builder().setId(n).setHandler(t));let o=this;return{unsubscribe(){o.removeTargetHandler(e,n)}}}removeAllTargetHandlers(e){return this.targetHandlers.delete(e),this}removeHandler(e){this.handlers.delete(e)}removeTargetHandler(e,t){let n=this.targetHandlers.get(e);if(n){let i=n.filter((o,a,l)=>o.id!=t);i.length?this.targetHandlers.set(e,i):this.targetHandlers.delete(e)}}}L=U.hmd(L);let ue=null,j=new class Hr extends Nr{cacheService=null;constructor(e=null){super(e)}getCacheService(){return this.cacheService}setCacheService(e){return this.cacheService=e,this}post(e,t){switch(t.type){case Pr.TYPE:this.onLibraryInfoRequest(e,t);break;case Mr.TYPE:this.onBookInfoRequest(e,t);break;case Cr.TYPE:this.onBookRequest(e,t);break;case Ir.TYPE:this.onPagesRequest(e,t);break;default:throw new Error(`Unknown message type: ${t.type}.`)}return this}onLibraryInfoRequest(e,t){let n=xr.builder().setCallbackId(t.id);t.libraryRef?this.loadLibraryInfo(t,n,t.libraryType+"/"+t.libraryRef+".library.txt",i=>{this.send(e,n)}):this.send(e,n)}loadLibraryInfo(e,t,n,i=null){let o=this.cacheService.getRestPoint(n,null);this.cacheService.getTextRestcallUrl(o,a=>{t.setMetaContent(a||"").setLibraryRef(e.libraryRef),i&&i(!!a)})}onBookInfoRequest(e,t){let n=Dr.builder().setCallbackId(t.id);t.bookRef?this.loadBookInfo(t,n,t.libraryType+"/"+t.bookRef+".book.txt",i=>{this.send(e,n)}):this.send(e,n)}loadBookInfo(e,t,n,i=null){let o=this.cacheService.getRestPoint(n,null);this.cacheService.getTextRestcallUrl(o,a=>{t.setMetaContent(a||"").setBookRef(e.bookRef),i&&i(!!a)})}onBookRequest(e,t){let n=Fr.builder().setCallbackId(t.id),i=t.languages.map(o=>o);i.length||i.push("CS","Sinodal"),i=i.map(o=>le.merge("/"+t.libraryType,t.bookRef+"_"+o+"/index.txt")),t.bookRef?this.runAll(i,(o,a)=>{this.loadBookPath(t,n,o,a)},o=>{this.send(e,n)}):this.send(e,n)}loadBookPath(e,t,n,i=null){let o=this.cacheService.getRestPoint(n,null);this.cacheService.getTextRestcallUrl(o,a=>{t.addMetaBook(Ce.builder().setBookRef(e.bookRef).setPath(n).setContent(a||"")),i&&i(!!a)})}onPagesRequest(e,t){let n=Lr.builder().setCallbackId(t.id);this.runAll(t.pages,(i,o)=>{let a=this.findPathPrefix(i.bookPath),l=this.cacheService.getRestPoint(le.merge(a,i.bookPage),null);this.cacheService.getTextRestcallUrl(l,c=>{n.addPage(c||""),o(!0)})},i=>{this.send(e,n)})}findPathPrefix(e){let t=e.lastIndexOf("/");return e.substring(0,t)}}((r,e)=>{postMessage(r?z.builder().setWorkerId(r.workerId).setMessage(e):e)}),Qe=new class jr{cache=new Map;environment=H;themeName=H.themeName;serviceAPIHost=H.serviceAPIHost;redirectToServerAfterItIsReadyAdress=H.redirectToServerAfterItIsReadyAdress;portAutoDetection=H.portAutoDetection;portAutoIncrementValue=H.portAutoIncrementValue;messageBus=new Wr;alerts=[];upperMenuEnabled=!0;pageLoadedFrom="";authId="";authIdKey="authId";authBody="";baseHref="";waitingIOOperationCount=0;waitingIOOperationValue=0;waitingIOOperationValueMax=100;outletOnly=!1;autoLoginApplication=!0;defaultApplication="";defaultLoginType="login";showType=this.defaultLoginType;enableDefaultPersons=!0;coding=H.coding;showOldVersions=H.showOldVersions;oldVersionsName=H.oldVersionsName;useDictionaries=H.useDictionaries;dictionaries=null;setDictionaries(e){return this.dictionaries=e,this}isShowLogin(){return this.showType==this.defaultLoginType}isShowNormal(){return"normal"==this.showType}isUseDictionaries(){return this.useDictionaries}setShowNormal(){return this.showType="normal",this}setShowLogin(e=null){return null!=e&&(this.autoLoginApplication=e),this.showType=this.defaultLoginType,this}get version(){return this.environment.version}get developerId(){let e="";return this.environment.developers.forEach(t=>{e=e+(e?"_":"")+t.id}),e}get developerName(){let e="";return this.environment.developers.forEach(t=>{e=e+(e?", ":"")+t.name}),e}get developerNameSortOrder(){let e="";return this.environment.developers.forEach(t=>{e=e+(e?", ":"")+t.nameSortOrder}),e}get developerLink(){return this.environment.developers[0].link}setPageLoadedFrom(e,t=!1){return this.pageLoadedFrom=e,t&&this.runPortAutoDetection(),this.setupBaseHref(),this}constructor(){typeof pageLoadedFrom<"u"&&this.setPageLoadedFrom(pageLoadedFrom),this.runPortAutoDetection(),this.setupBaseHref()}setupBaseHref(){let e=this.pageLoadedFrom;e.endsWith("/")&&(e=e.substring(0,e.length-1)),this.baseHref=e}runPortAutoDetection(){this.portAutoDetection&&(this.serviceAPIHost=this.doPortAutoDetection(this.serviceAPIHost?this.serviceAPIHost:this.pageLoadedFrom),this.redirectToServerAfterItIsReadyAdress=this.doPortAutoDetection(this.redirectToServerAfterItIsReadyAdress))}doPortAutoDetection(e){const t=e.lastIndexOf(":");if(t<0)return e;let n="";for(let a=t+1;a<e.length&&"0123456789".indexOf(e.charAt(a))>=0;++a)n+=e.charAt(a);return isNaN(+n)?e:e.substring(0,t)+":"+(+location.port+H.portAutoIncrementValue)+e.substring(t+1+n.length,e.length)}addAlert(e){e.setConfig(this),this.alerts.push(e)}removeAlert(e){const t=this.alerts.findIndex((n,i,o)=>n===e);t>=0&&this.alerts.splice(t,1)}isPlatformAndroid(){return"Android"===this.environment.platform}isPlatformWeb(){return"Web"===this.environment.platform}isPlatform(e){return this.environment.platform===e}isRelativeCacheService(){return this.environment.relativeCacheService}isRestServerType(){return"rest"===this.environment.serverType}isMemoryServerType(){return"memory"===this.environment.serverType}isServerType(e){return this.environment.serverType===e}isRedTheme(){return"red"===this.themeName}isBlueTheme(){return"blue"===this.themeName}isTheme(e){return this.themeName===e}isWaitingIO(){return this.waitingIOOperationCount>0}incWaitingIO(){return this.waitingIOOperationCount++}decWaitingIO(){return this.waitingIOOperationCount--}clearWaitingIO(){this.waitingIOOperationCount=0}post(e,t=0){setTimeout(()=>{e()},t)}getApplication(){let e=null;return this.environment.applications.forEach(t=>{t.id==this.defaultApplication&&(e=t)}),e}getApplicationByNameOrNull(e){let t=null;return this.environment.applications.forEach(n=>{n.name==e&&(t=n)}),t}getSingleAppOrNull(){let e=null,t=this.environment.applications.filter(n=>n.applicationEnabled&&!n.applicationHidden);return 1==t.length&&(e=t[0]),e}};j.setCacheService(new class Br{config;sRestPoint;textCache=new Map;waitingTextCache=new Map;get coding(){return this.config.coding}get restPoint(){return this.coding?"/staticb":this.sRestPoint}constructor(e,t="/static"){this.config=e,this.sRestPoint=t}getRestPoint(e,t,n=null){const i=this.config.isRelativeCacheService()||this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return le.merge(le.merge(t||i,n??this.restPoint),e)}completeOnDone(e,t){let n=this.waitingTextCache.get(e);n&&(n.forEach(i=>{this.config.post(()=>{i&&i(t)})}),this.waitingTextCache.delete(e))}getTextRestcallUrl(e,t){if(this.coding){if(this.textCache.has(e)){let n=this.textCache.get(e);if(null!=n)return void this.config.post(()=>{t&&t(n)})}return this.waitingTextCache.has(e)?void(t&&this.waitingTextCache.get(e).push(t)):(t&&this.waitingTextCache.set(e,[t]),this.getBinRestcallUrlRaw(e,n=>{if(n){let i=new Uint8Array(n),o=Xe.fromByteArray(i);this.completeOnDone(e,o)}else t&&t(null)}))}return this.getTextRestcallUrlRaw(e,t)}getTextRestcallUrlRaw(e,t){if(this.textCache.has(e)){let i=this.textCache.get(e);if(null!=i)return void this.config.post(()=>{t&&t(i)})}if(this.waitingTextCache.has(e))t&&this.waitingTextCache.get(e).push(t);else{t&&this.waitingTextCache.set(e,[t]);var n=new XMLHttpRequest;n.onload=()=>{if(t){let i=4===n.readyState&&200===n.status?n.responseText:null;null!=i?this.textCache.set(e,i):this.textCache.delete(e),this.completeOnDone(e,i)}},n.open("get",e,!0),n.send()}}getBinRestcallUrlRaw(e,t,n=!0){let i=e;if(this.coding){let a=i.lastIndexOf(".");a>=0&&(i=i.substring(0,a)+".bin")}var o=new XMLHttpRequest;o.onload=()=>{if(t){let l=new Uint8Array(4===o.readyState&&200===o.status?o.response:null),c=n?Xe.dtr(l,-1):l;t&&t(c)}},o.open("get",i,!0),o.responseType="arraybuffer",o.send()}}(Qe));let er=!1,rr=!1;addEventListener("message",({data:r})=>{let e=r;if("string"==typeof e.message){const t=`worker response to ${r}`;postMessage(z.builder().setWorkerId(e.workerId).setMessage(t))}else if(e.message.type===Tr.TYPE)Qe.setPageLoadedFrom(e.message.pageLoadedFrom,!0);else if(e.message.type===Pe.TYPE){let t=()=>{if(u&&u._Calculate){let n=e.message;const i=2048,o=u._malloc(i),a=20480,l=u._malloc(a);ie(n.formula,u.HEAP8,o,i),u._Calculate(o,a,l);const c=V(u.HEAP8,l,a);u._free(l),u._free(o),postMessage(z.builder().setWorkerId(e.workerId).setMessage(Pe.builder().setFormula(c)))}else postMessage(z.builder().setWorkerId(e.workerId).setMessage(Pe.builder().setFormula("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e. \u0415\u0449\u0451 \u0438\u0434\u0451\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..")))};er?t():j.getCacheService()?.getBinRestcallUrlRaw(j.getCacheService()?.getRestPoint("data/memorial.bin"),n=>{if(null!=n){const i=n.byteLength,o=u._malloc(i);u.HEAP8.set(n,o),u._Setup(o,i),u._free(o),er=!0,t()}},j.getCacheService()?.coding)}else if(e.message.type===Me.TYPE){let t=()=>{if(u&&u._ChessCalculate){let n=e.message;const i=2048,o=u._malloc(i),a=20480,l=u._malloc(a);ie(n.commands,u.HEAP8,o,i),ue=e,u._ChessCalculate(o,a,l),ue=null,V(u.HEAP8,l,a),u._free(l),u._free(o)}else postMessage(z.builder().setWorkerId(e.workerId).setResult(Me.builder().setResult(e.gameId,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e. \u0415\u0449\u0451 \u0438\u0434\u0451\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..")))};rr?t():j.getCacheService()?.getBinRestcallUrlRaw(j.getCacheService()?.getRestPoint("data/chessapp.bin"),n=>{if(null!=n){const i=n.byteLength,o=u._malloc(i);u.HEAP8.set(n,o),u._ChessSetup(o,i),rr=!0,t()}},j.getCacheService()?.coding)}else j.post(e,e.message)});var ee,re,fe,u=typeof u<"u"?u:{},tr=Object.assign({},u),Fe=[],ce="./this.program",de=(r,e)=>{throw e},nr="object"==typeof window,J="function"==typeof importScripts,he="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,N="";if(he){var De=U(652),xe=U(832);N=J?xe.dirname(N)+"/":__dirname+"/",ee=(r,e)=>(r=ge(r)?new URL(r):xe.normalize(r),De.readFileSync(r,e?void 0:"utf8")),fe=r=>{var e=ee(r,!0);return e.buffer||(e=new Uint8Array(e)),e},re=(r,e,t,n=!0)=>{r=ge(r)?new URL(r):xe.normalize(r),De.readFile(r,n?void 0:"utf8",(i,o)=>{i?t(i):e(n?o.buffer:o)})},!u.thisProgram&&process.argv.length>1&&(ce=process.argv[1].replace(/\\/g,"/")),Fe=process.argv.slice(2),L.exports=u,process.on("uncaughtException",r=>{if(!("unwind"===r||r instanceof ye||r.context instanceof ye))throw r}),de=(r,e)=>{throw process.exitCode=r,e},u.inspect=()=>"[Emscripten Module object]"}else(nr||J)&&(J?N=self.location.href:typeof document<"u"&&document.currentScript&&(N=document.currentScript.src),N=0!==N.indexOf("blob:")?N.substr(0,N.replace(/[?#].*/,"").lastIndexOf("/")+1):"",ee=r=>{var e=new XMLHttpRequest;return e.open("GET",r,!1),e.send(null),e.responseText},J&&(fe=r=>{var e=new XMLHttpRequest;return e.open("GET",r,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),re=(r,e,t)=>{var n=new XMLHttpRequest;n.open("GET",r,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?e(n.response):t()},n.onerror=t,n.send(null)});var te,Ne=u.print||console.log.bind(console),q=u.printErr||console.error.bind(console);Object.assign(u,tr),tr=null,u.arguments&&(Fe=u.arguments),u.thisProgram&&(ce=u.thisProgram),u.quit&&(de=u.quit),u.wasmBinary&&(te=u.wasmBinary),"object"!=typeof WebAssembly&&Z("no native wasm support detected");var pe,me,C,G,ne,g,S,Be=!1;function sr(){var r=pe.buffer;u.HEAP8=C=new Int8Array(r),u.HEAP16=ne=new Int16Array(r),u.HEAPU8=G=new Uint8Array(r),u.HEAPU16=new Uint16Array(r),u.HEAP32=g=new Int32Array(r),u.HEAPU32=S=new Uint32Array(r),u.HEAPF32=new Float32Array(r),u.HEAPF64=new Float64Array(r)}var ir=[],or=[],Jr=[],ar=[],K=0,He=null,se=null;function Oe(r){K++,u.monitorRunDependencies&&u.monitorRunDependencies(K)}function ve(r){if(K--,u.monitorRunDependencies&&u.monitorRunDependencies(K),0==K&&(null!==He&&(clearInterval(He),He=null),se)){var e=se;se=null,e()}}function Z(r){throw u.onAbort&&u.onAbort(r),q(r="Aborted("+r+")"),Be=!0,me=1,r+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(r)}var Q,v,A,lr=r=>r.startsWith("data:application/octet-stream;base64,"),ge=r=>r.startsWith("file://");function ur(r){if(r==Q&&te)return new Uint8Array(te);if(fe)return fe(r);throw"both async and sync fetching of the wasm failed"}function cr(r,e,t){return function at(r){if(!te&&(nr||J)){if("function"==typeof fetch&&!ge(r))return fetch(r,{credentials:"same-origin"}).then(e=>{if(!e.ok)throw"failed to load wasm binary file at '"+r+"'";return e.arrayBuffer()}).catch(()=>ur(r));if(re)return new Promise((e,t)=>{re(r,n=>e(new Uint8Array(n)),t)})}return Promise.resolve().then(()=>ur(r))}(r).then(n=>WebAssembly.instantiate(n,e)).then(n=>n).then(t,n=>{q(`failed to asynchronously prepare wasm: ${n}`),Z(n)})}function ye(r){this.name="ExitStatus",this.message=`Program terminated with exit(${r})`,this.status=r}lr(Q="mathapp.wasm")||(Q=function Vr(r){return u.locateFile?u.locateFile(r,N):N+r}(Q));var we=r=>{for(;r.length>0;)r.shift()(u)},dt=u.noExitRuntime||!0,dr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,V=(r,e,t)=>{for(var n=e+t,i=e;r[i]&&!(i>=n);)++i;if(i-e>16&&r.buffer&&dr)return dr.decode(r.subarray(e,i));for(var o="";e<i;){var a=r[e++];if(128&a){var l=63&r[e++];if(192!=(224&a)){var c=63&r[e++];if((a=224==(240&a)?(15&a)<<12|l<<6|c:(7&a)<<18|l<<12|c<<6|63&r[e++])<65536)o+=String.fromCharCode(a);else{var h=a-65536;o+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else o+=String.fromCharCode((31&a)<<6|l)}else o+=String.fromCharCode(a)}return o},$=(r,e)=>r?V(G,r,e):"";function ft(r){this.excPtr=r,this.ptr=r-24,this.set_type=function(e){S[this.ptr+4>>2]=e},this.get_type=function(){return S[this.ptr+4>>2]},this.set_destructor=function(e){S[this.ptr+8>>2]=e},this.get_destructor=function(){return S[this.ptr+8>>2]},this.set_caught=function(e){C[this.ptr+12>>0]=e=e?1:0},this.get_caught=function(){return 0!=C[this.ptr+12>>0]},this.set_rethrown=function(e){C[this.ptr+13>>0]=e=e?1:0},this.get_rethrown=function(){return 0!=C[this.ptr+13>>0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t)},this.set_adjusted_ptr=function(e){S[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return S[this.ptr+16>>2]},this.get_exception_ptr=function(){if(kr(this.get_type()))return S[this.excPtr>>2];var t=this.get_adjusted_ptr();return 0!==t?t:this.excPtr}}var k={isAbs:r=>"/"===r.charAt(0),splitPath:r=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(r).slice(1),normalizeArray:(r,e)=>{for(var t=0,n=r.length-1;n>=0;n--){var i=r[n];"."===i?r.splice(n,1):".."===i?(r.splice(n,1),t++):t&&(r.splice(n,1),t--)}if(e)for(;t;t--)r.unshift("..");return r},normalize:r=>{var e=k.isAbs(r),t="/"===r.substr(-1);return!(r=k.normalizeArray(r.split("/").filter(n=>!!n),!e).join("/"))&&!e&&(r="."),r&&t&&(r+="/"),(e?"/":"")+r},dirname:r=>{var e=k.splitPath(r),t=e[0],n=e[1];return t||n?(n&&(n=n.substr(0,n.length-1)),t+n):"."},basename:r=>{if("/"===r)return"/";var e=(r=(r=k.normalize(r)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?r:r.substr(e+1)},join:function(){var r=Array.prototype.slice.call(arguments);return k.normalize(r.join("/"))},join2:(r,e)=>k.normalize(r+"/"+e)},fr=r=>(fr=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return n=>crypto.getRandomValues(n);if(he)try{var r=U(827);if(r.randomFillSync)return n=>r.randomFillSync(n);var t=r.randomBytes;return n=>(n.set(t(n.byteLength)),n)}catch{}Z("initRandomDevice")})())(r),Y={resolve:function(){for(var r="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var n=t>=0?arguments[t]:s.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";r=n+"/"+r,e=k.isAbs(n)}return(e?"/":"")+(r=k.normalizeArray(r.split("/").filter(i=>!!i),!e).join("/"))||"."},relative:(r,e)=>{function t(h){for(var w=0;w<h.length&&""===h[w];w++);for(var _=h.length-1;_>=0&&""===h[_];_--);return w>_?[]:h.slice(w,_-w+1)}r=Y.resolve(r).substr(1),e=Y.resolve(e).substr(1);for(var n=t(r.split("/")),i=t(e.split("/")),o=Math.min(n.length,i.length),a=o,l=0;l<o;l++)if(n[l]!==i[l]){a=l;break}var c=[];for(l=a;l<n.length;l++)c.push("..");return(c=c.concat(i.slice(a))).join("/")}},Ue=[],Ee=r=>{for(var e=0,t=0;t<r.length;++t){var n=r.charCodeAt(t);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++t):e+=3}return e},ie=(r,e,t,n)=>{if(!(n>0))return 0;for(var i=t,o=t+n-1,a=0;a<r.length;++a){var l=r.charCodeAt(a);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&r.charCodeAt(++a)),l<=127){if(t>=o)break;e[t++]=l}else if(l<=2047){if(t+1>=o)break;e[t++]=192|l>>6,e[t++]=128|63&l}else if(l<=65535){if(t+2>=o)break;e[t++]=224|l>>12,e[t++]=128|l>>6&63,e[t++]=128|63&l}else{if(t+3>=o)break;e[t++]=240|l>>18,e[t++]=128|l>>12&63,e[t++]=128|l>>6&63,e[t++]=128|63&l}}return e[t]=0,t-i};function _e(r,e,t){var n=t>0?t:Ee(r)+1,i=new Array(n),o=ie(r,i,0,i.length);return e&&(i.length=o),i}var mr,X={ttys:[],init(){},shutdown(){},register(r,e){X.ttys[r]={input:[],output:[],ops:e},s.registerDevice(r,X.stream_ops)},stream_ops:{open(r){var e=X.ttys[r.node.rdev];if(!e)throw new s.ErrnoError(43);r.tty=e,r.seekable=!1},close(r){r.tty.ops.fsync(r.tty)},fsync(r){r.tty.ops.fsync(r.tty)},read(r,e,t,n,i){if(!r.tty||!r.tty.ops.get_char)throw new s.ErrnoError(60);for(var o=0,a=0;a<n;a++){var l;try{l=r.tty.ops.get_char(r.tty)}catch{throw new s.ErrnoError(29)}if(void 0===l&&0===o)throw new s.ErrnoError(6);if(null==l)break;o++,e[t+a]=l}return o&&(r.node.timestamp=Date.now()),o},write(r,e,t,n,i){if(!r.tty||!r.tty.ops.put_char)throw new s.ErrnoError(60);try{for(var o=0;o<n;o++)r.tty.ops.put_char(r.tty,e[t+o])}catch{throw new s.ErrnoError(29)}return n&&(r.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:r=>(()=>{if(!Ue.length){var r=null;if(he){var t=Buffer.alloc(256),n=0,i=process.stdin.fd;try{n=De.readSync(i,t)}catch(o){if(!o.toString().includes("EOF"))throw o;n=0}r=n>0?t.slice(0,n).toString("utf-8"):null}else typeof window<"u"&&"function"==typeof window.prompt?null!==(r=window.prompt("Input: "))&&(r+="\n"):"function"==typeof readline&&null!==(r=readline())&&(r+="\n");if(!r)return null;Ue=_e(r,!0)}return Ue.shift()})(),put_char(r,e){null===e||10===e?(Ne(V(r.output,0)),r.output=[]):0!=e&&r.output.push(e)},fsync(r){r.output&&r.output.length>0&&(Ne(V(r.output,0)),r.output=[])},ioctl_tcgets:r=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(r,e,t)=>0,ioctl_tiocgwinsz:r=>[24,80]},default_tty1_ops:{put_char(r,e){null===e||10===e?(q(V(r.output,0)),r.output=[]):0!=e&&r.output.push(e)},fsync(r){r.output&&r.output.length>0&&(q(V(r.output,0)),r.output=[])}}},pr=r=>{r=((r,e)=>65536*Math.ceil(r/65536))(r);var e=br(65536,r);return e?((r,e)=>(G.fill(0,r,r+e),r))(e,r):0},y={ops_table:null,mount:r=>y.createNode(null,"/",16895,0),createNode(r,e,t,n){if(s.isBlkdev(t)||s.isFIFO(t))throw new s.ErrnoError(63);y.ops_table||(y.ops_table={dir:{node:{getattr:y.node_ops.getattr,setattr:y.node_ops.setattr,lookup:y.node_ops.lookup,mknod:y.node_ops.mknod,rename:y.node_ops.rename,unlink:y.node_ops.unlink,rmdir:y.node_ops.rmdir,readdir:y.node_ops.readdir,symlink:y.node_ops.symlink},stream:{llseek:y.stream_ops.llseek}},file:{node:{getattr:y.node_ops.getattr,setattr:y.node_ops.setattr},stream:{llseek:y.stream_ops.llseek,read:y.stream_ops.read,write:y.stream_ops.write,allocate:y.stream_ops.allocate,mmap:y.stream_ops.mmap,msync:y.stream_ops.msync}},link:{node:{getattr:y.node_ops.getattr,setattr:y.node_ops.setattr,readlink:y.node_ops.readlink},stream:{}},chrdev:{node:{getattr:y.node_ops.getattr,setattr:y.node_ops.setattr},stream:s.chrdev_stream_ops}});var i=s.createNode(r,e,t,n);return s.isDir(i.mode)?(i.node_ops=y.ops_table.dir.node,i.stream_ops=y.ops_table.dir.stream,i.contents={}):s.isFile(i.mode)?(i.node_ops=y.ops_table.file.node,i.stream_ops=y.ops_table.file.stream,i.usedBytes=0,i.contents=null):s.isLink(i.mode)?(i.node_ops=y.ops_table.link.node,i.stream_ops=y.ops_table.link.stream):s.isChrdev(i.mode)&&(i.node_ops=y.ops_table.chrdev.node,i.stream_ops=y.ops_table.chrdev.stream),i.timestamp=Date.now(),r&&(r.contents[e]=i,r.timestamp=i.timestamp),i},getFileDataAsTypedArray:r=>r.contents?r.contents.subarray?r.contents.subarray(0,r.usedBytes):new Uint8Array(r.contents):new Uint8Array(0),expandFileStorage(r,e){var t=r.contents?r.contents.length:0;if(!(t>=e)){e=Math.max(e,t*(t<1048576?2:1.125)>>>0),0!=t&&(e=Math.max(e,256));var i=r.contents;r.contents=new Uint8Array(e),r.usedBytes>0&&r.contents.set(i.subarray(0,r.usedBytes),0)}},resizeFileStorage(r,e){if(r.usedBytes!=e)if(0==e)r.contents=null,r.usedBytes=0;else{var t=r.contents;r.contents=new Uint8Array(e),t&&r.contents.set(t.subarray(0,Math.min(e,r.usedBytes))),r.usedBytes=e}},node_ops:{getattr(r){var e={};return e.dev=s.isChrdev(r.mode)?r.id:1,e.ino=r.id,e.mode=r.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=r.rdev,e.size=s.isDir(r.mode)?4096:s.isFile(r.mode)?r.usedBytes:s.isLink(r.mode)?r.link.length:0,e.atime=new Date(r.timestamp),e.mtime=new Date(r.timestamp),e.ctime=new Date(r.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr(r,e){void 0!==e.mode&&(r.mode=e.mode),void 0!==e.timestamp&&(r.timestamp=e.timestamp),void 0!==e.size&&y.resizeFileStorage(r,e.size)},lookup(r,e){throw s.genericErrors[44]},mknod:(r,e,t,n)=>y.createNode(r,e,t,n),rename(r,e,t){if(s.isDir(r.mode)){var n;try{n=s.lookupNode(e,t)}catch{}if(n)for(var i in n.contents)throw new s.ErrnoError(55)}delete r.parent.contents[r.name],r.parent.timestamp=Date.now(),r.name=t,e.contents[t]=r,e.timestamp=r.parent.timestamp,r.parent=e},unlink(r,e){delete r.contents[e],r.timestamp=Date.now()},rmdir(r,e){var t=s.lookupNode(r,e);for(var n in t.contents)throw new s.ErrnoError(55);delete r.contents[e],r.timestamp=Date.now()},readdir(r){var e=[".",".."];for(var t in r.contents)r.contents.hasOwnProperty(t)&&e.push(t);return e},symlink(r,e,t){var n=y.createNode(r,e,41471,0);return n.link=t,n},readlink(r){if(!s.isLink(r.mode))throw new s.ErrnoError(28);return r.link}},stream_ops:{read(r,e,t,n,i){var o=r.node.contents;if(i>=r.node.usedBytes)return 0;var a=Math.min(r.node.usedBytes-i,n);if(a>8&&o.subarray)e.set(o.subarray(i,i+a),t);else for(var l=0;l<a;l++)e[t+l]=o[i+l];return a},write(r,e,t,n,i,o){if(e.buffer===C.buffer&&(o=!1),!n)return 0;var a=r.node;if(a.timestamp=Date.now(),e.subarray&&(!a.contents||a.contents.subarray)){if(o)return a.contents=e.subarray(t,t+n),a.usedBytes=n,n;if(0===a.usedBytes&&0===i)return a.contents=e.slice(t,t+n),a.usedBytes=n,n;if(i+n<=a.usedBytes)return a.contents.set(e.subarray(t,t+n),i),n}if(y.expandFileStorage(a,i+n),a.contents.subarray&&e.subarray)a.contents.set(e.subarray(t,t+n),i);else for(var l=0;l<n;l++)a.contents[i+l]=e[t+l];return a.usedBytes=Math.max(a.usedBytes,i+n),n},llseek(r,e,t){var n=e;if(1===t?n+=r.position:2===t&&s.isFile(r.node.mode)&&(n+=r.node.usedBytes),n<0)throw new s.ErrnoError(28);return n},allocate(r,e,t){y.expandFileStorage(r.node,e+t),r.node.usedBytes=Math.max(r.node.usedBytes,e+t)},mmap(r,e,t,n,i){if(!s.isFile(r.node.mode))throw new s.ErrnoError(43);var o,a,l=r.node.contents;if(2&i||l.buffer!==C.buffer){if((t>0||t+e<l.length)&&(l=l.subarray?l.subarray(t,t+e):Array.prototype.slice.call(l,t,t+e)),a=!0,!(o=pr(e)))throw new s.ErrnoError(48);C.set(l,o)}else a=!1,o=l.byteOffset;return{ptr:o,allocated:a}},msync:(r,e,t,n,i)=>(y.stream_ops.write(r,e,0,n,t,!1),0)}},kt=u.preloadPlugins||[],Ye=(r,e)=>{var t=0;return r&&(t|=365),e&&(t|=146),t},s={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(r,e={}){if(!(r=Y.resolve(r)))return{path:"",node:null};if((e=Object.assign({follow_mount:!0,recurse_count:0},e)).recurse_count>8)throw new s.ErrnoError(32);for(var n=r.split("/").filter(_=>!!_),i=s.root,o="/",a=0;a<n.length;a++){var l=a===n.length-1;if(l&&e.parent)break;if(i=s.lookupNode(i,n[a]),o=k.join2(o,n[a]),s.isMountpoint(i)&&(!l||l&&e.follow_mount)&&(i=i.mounted.root),!l||e.follow)for(var c=0;s.isLink(i.mode);){var h=s.readlink(o);if(o=Y.resolve(k.dirname(o),h),i=s.lookupPath(o,{recurse_count:e.recurse_count+1}).node,c++>40)throw new s.ErrnoError(32)}}return{path:o,node:i}},getPath(r){for(var e;;){if(s.isRoot(r)){var t=r.mount.mountpoint;return e?"/"!==t[t.length-1]?`${t}/${e}`:t+e:t}e=e?`${r.name}/${e}`:r.name,r=r.parent}},hashName(r,e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return(r+t>>>0)%s.nameTable.length},hashAddNode(r){var e=s.hashName(r.parent.id,r.name);r.name_next=s.nameTable[e],s.nameTable[e]=r},hashRemoveNode(r){var e=s.hashName(r.parent.id,r.name);if(s.nameTable[e]===r)s.nameTable[e]=r.name_next;else for(var t=s.nameTable[e];t;){if(t.name_next===r){t.name_next=r.name_next;break}t=t.name_next}},lookupNode(r,e){var t=s.mayLookup(r);if(t)throw new s.ErrnoError(t,r);for(var n=s.hashName(r.id,e),i=s.nameTable[n];i;i=i.name_next)if(i.parent.id===r.id&&i.name===e)return i;return s.lookup(r,e)},createNode(r,e,t,n){var i=new s.FSNode(r,e,t,n);return s.hashAddNode(i),i},destroyNode(r){s.hashRemoveNode(r)},isRoot:r=>r===r.parent,isMountpoint:r=>!!r.mounted,isFile:r=>32768==(61440&r),isDir:r=>16384==(61440&r),isLink:r=>40960==(61440&r),isChrdev:r=>8192==(61440&r),isBlkdev:r=>24576==(61440&r),isFIFO:r=>4096==(61440&r),isSocket:r=>49152==(49152&r),flagsToPermissionString(r){var e=["r","w","rw"][3&r];return 512&r&&(e+="w"),e},nodePermissions:(r,e)=>s.ignorePermissions?0:e.includes("r")&&!(292&r.mode)||e.includes("w")&&!(146&r.mode)||e.includes("x")&&!(73&r.mode)?2:0,mayLookup:r=>s.nodePermissions(r,"x")||(r.node_ops.lookup?0:2),mayCreate(r,e){try{return s.lookupNode(r,e),20}catch{}return s.nodePermissions(r,"wx")},mayDelete(r,e,t){var n;try{n=s.lookupNode(r,e)}catch(o){return o.errno}var i=s.nodePermissions(r,"wx");if(i)return i;if(t){if(!s.isDir(n.mode))return 54;if(s.isRoot(n)||s.getPath(n)===s.cwd())return 10}else if(s.isDir(n.mode))return 31;return 0},mayOpen:(r,e)=>r?s.isLink(r.mode)?32:s.isDir(r.mode)&&("r"!==s.flagsToPermissionString(e)||512&e)?31:s.nodePermissions(r,s.flagsToPermissionString(e)):44,MAX_OPEN_FDS:4096,nextfd(){for(var r=0;r<=s.MAX_OPEN_FDS;r++)if(!s.streams[r])return r;throw new s.ErrnoError(33)},getStreamChecked(r){var e=s.getStream(r);if(!e)throw new s.ErrnoError(8);return e},getStream:r=>s.streams[r],createStream:(r,e=-1)=>(s.FSStream||(s.FSStream=function(){this.shared={}},s.FSStream.prototype={},Object.defineProperties(s.FSStream.prototype,{object:{get(){return this.node},set(t){this.node=t}},isRead:{get(){return 1!=(2097155&this.flags)}},isWrite:{get(){return 0!=(2097155&this.flags)}},isAppend:{get(){return 1024&this.flags}},flags:{get(){return this.shared.flags},set(t){this.shared.flags=t}},position:{get(){return this.shared.position},set(t){this.shared.position=t}}})),r=Object.assign(new s.FSStream,r),-1==e&&(e=s.nextfd()),r.fd=e,s.streams[e]=r,r),closeStream(r){s.streams[r]=null},chrdev_stream_ops:{open(r){var e=s.getDevice(r.node.rdev);r.stream_ops=e.stream_ops,r.stream_ops.open&&r.stream_ops.open(r)},llseek(){throw new s.ErrnoError(70)}},major:r=>r>>8,minor:r=>255&r,makedev:(r,e)=>r<<8|e,registerDevice(r,e){s.devices[r]={stream_ops:e}},getDevice:r=>s.devices[r],getMounts(r){for(var e=[],t=[r];t.length;){var n=t.pop();e.push(n),t.push.apply(t,n.mounts)}return e},syncfs(r,e){"function"==typeof r&&(e=r,r=!1),s.syncFSRequests++,s.syncFSRequests>1&&q(`warning: ${s.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var t=s.getMounts(s.root.mount),n=0;function i(a){return s.syncFSRequests--,e(a)}function o(a){if(a)return o.errored?void 0:(o.errored=!0,i(a));++n>=t.length&&i(null)}t.forEach(a=>{if(!a.type.syncfs)return o(null);a.type.syncfs(a,r,o)})},mount(r,e,t){var o,n="/"===t,i=!t;if(n&&s.root)throw new s.ErrnoError(10);if(!n&&!i){var a=s.lookupPath(t,{follow_mount:!1});if(t=a.path,s.isMountpoint(o=a.node))throw new s.ErrnoError(10);if(!s.isDir(o.mode))throw new s.ErrnoError(54)}var l={type:r,opts:e,mountpoint:t,mounts:[]},c=r.mount(l);return c.mount=l,l.root=c,n?s.root=c:o&&(o.mounted=l,o.mount&&o.mount.mounts.push(l)),c},unmount(r){var e=s.lookupPath(r,{follow_mount:!1});if(!s.isMountpoint(e.node))throw new s.ErrnoError(28);var t=e.node,n=t.mounted,i=s.getMounts(n);Object.keys(s.nameTable).forEach(a=>{for(var l=s.nameTable[a];l;){var c=l.name_next;i.includes(l.mount)&&s.destroyNode(l),l=c}}),t.mounted=null;var o=t.mount.mounts.indexOf(n);t.mount.mounts.splice(o,1)},lookup:(r,e)=>r.node_ops.lookup(r,e),mknod(r,e,t){var i=s.lookupPath(r,{parent:!0}).node,o=k.basename(r);if(!o||"."===o||".."===o)throw new s.ErrnoError(28);var a=s.mayCreate(i,o);if(a)throw new s.ErrnoError(a);if(!i.node_ops.mknod)throw new s.ErrnoError(63);return i.node_ops.mknod(i,o,e,t)},create:(r,e)=>(e=void 0!==e?e:438,e&=4095,s.mknod(r,e|=32768,0)),mkdir:(r,e)=>(e=void 0!==e?e:511,e&=1023,s.mknod(r,e|=16384,0)),mkdirTree(r,e){for(var t=r.split("/"),n="",i=0;i<t.length;++i)if(t[i]){n+="/"+t[i];try{s.mkdir(n,e)}catch(o){if(20!=o.errno)throw o}}},mkdev:(r,e,t)=>(typeof t>"u"&&(t=e,e=438),s.mknod(r,e|=8192,t)),symlink(r,e){if(!Y.resolve(r))throw new s.ErrnoError(44);var n=s.lookupPath(e,{parent:!0}).node;if(!n)throw new s.ErrnoError(44);var i=k.basename(e),o=s.mayCreate(n,i);if(o)throw new s.ErrnoError(o);if(!n.node_ops.symlink)throw new s.ErrnoError(63);return n.node_ops.symlink(n,i,r)},rename(r,e){var l,c,t=k.dirname(r),n=k.dirname(e),i=k.basename(r),o=k.basename(e);if(l=s.lookupPath(r,{parent:!0}).node,c=s.lookupPath(e,{parent:!0}).node,!l||!c)throw new s.ErrnoError(44);if(l.mount!==c.mount)throw new s.ErrnoError(75);var _,h=s.lookupNode(l,i),w=Y.relative(r,n);if("."!==w.charAt(0))throw new s.ErrnoError(28);if("."!==(w=Y.relative(e,t)).charAt(0))throw new s.ErrnoError(55);try{_=s.lookupNode(c,o)}catch{}if(h!==_){var m=s.isDir(h.mode),f=s.mayDelete(l,i,m);if(f)throw new s.ErrnoError(f);if(f=_?s.mayDelete(c,o,m):s.mayCreate(c,o))throw new s.ErrnoError(f);if(!l.node_ops.rename)throw new s.ErrnoError(63);if(s.isMountpoint(h)||_&&s.isMountpoint(_))throw new s.ErrnoError(10);if(c!==l&&(f=s.nodePermissions(l,"w")))throw new s.ErrnoError(f);s.hashRemoveNode(h);try{l.node_ops.rename(h,c,o)}catch(b){throw b}finally{s.hashAddNode(h)}}},rmdir(r){var t=s.lookupPath(r,{parent:!0}).node,n=k.basename(r),i=s.lookupNode(t,n),o=s.mayDelete(t,n,!0);if(o)throw new s.ErrnoError(o);if(!t.node_ops.rmdir)throw new s.ErrnoError(63);if(s.isMountpoint(i))throw new s.ErrnoError(10);t.node_ops.rmdir(t,n),s.destroyNode(i)},readdir(r){var t=s.lookupPath(r,{follow:!0}).node;if(!t.node_ops.readdir)throw new s.ErrnoError(54);return t.node_ops.readdir(t)},unlink(r){var t=s.lookupPath(r,{parent:!0}).node;if(!t)throw new s.ErrnoError(44);var n=k.basename(r),i=s.lookupNode(t,n),o=s.mayDelete(t,n,!1);if(o)throw new s.ErrnoError(o);if(!t.node_ops.unlink)throw new s.ErrnoError(63);if(s.isMountpoint(i))throw new s.ErrnoError(10);t.node_ops.unlink(t,n),s.destroyNode(i)},readlink(r){var t=s.lookupPath(r).node;if(!t)throw new s.ErrnoError(44);if(!t.node_ops.readlink)throw new s.ErrnoError(28);return Y.resolve(s.getPath(t.parent),t.node_ops.readlink(t))},stat(r,e){var n=s.lookupPath(r,{follow:!e}).node;if(!n)throw new s.ErrnoError(44);if(!n.node_ops.getattr)throw new s.ErrnoError(63);return n.node_ops.getattr(n)},lstat:r=>s.stat(r,!0),chmod(r,e,t){var n;if(!(n="string"==typeof r?s.lookupPath(r,{follow:!t}).node:r).node_ops.setattr)throw new s.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&e|-4096&n.mode,timestamp:Date.now()})},lchmod(r,e){s.chmod(r,e,!0)},fchmod(r,e){var t=s.getStreamChecked(r);s.chmod(t.node,e)},chown(r,e,t,n){var i;if(!(i="string"==typeof r?s.lookupPath(r,{follow:!n}).node:r).node_ops.setattr)throw new s.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown(r,e,t){s.chown(r,e,t,!0)},fchown(r,e,t){var n=s.getStreamChecked(r);s.chown(n.node,e,t)},truncate(r,e){if(e<0)throw new s.ErrnoError(28);var t;if(!(t="string"==typeof r?s.lookupPath(r,{follow:!0}).node:r).node_ops.setattr)throw new s.ErrnoError(63);if(s.isDir(t.mode))throw new s.ErrnoError(31);if(!s.isFile(t.mode))throw new s.ErrnoError(28);var i=s.nodePermissions(t,"w");if(i)throw new s.ErrnoError(i);t.node_ops.setattr(t,{size:e,timestamp:Date.now()})},ftruncate(r,e){var t=s.getStreamChecked(r);if(!(2097155&t.flags))throw new s.ErrnoError(28);s.truncate(t.node,e)},utime(r,e,t){var i=s.lookupPath(r,{follow:!0}).node;i.node_ops.setattr(i,{timestamp:Math.max(e,t)})},open(r,e,t){if(""===r)throw new s.ErrnoError(44);var n;if(e="string"==typeof e?(r=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[r];if(typeof t>"u")throw new Error(`Unknown file open mode: ${r}`);return t})(e):e,t=typeof t>"u"?438:t,t=64&e?4095&t|32768:0,"object"==typeof r)n=r;else{r=k.normalize(r);try{n=s.lookupPath(r,{follow:!(131072&e)}).node}catch{}}var o=!1;if(64&e)if(n){if(128&e)throw new s.ErrnoError(20)}else n=s.mknod(r,t,0),o=!0;if(!n)throw new s.ErrnoError(44);if(s.isChrdev(n.mode)&&(e&=-513),65536&e&&!s.isDir(n.mode))throw new s.ErrnoError(54);if(!o){var a=s.mayOpen(n,e);if(a)throw new s.ErrnoError(a)}512&e&&!o&&s.truncate(n,0),e&=-131713;var l=s.createStream({node:n,path:s.getPath(n),flags:e,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return l.stream_ops.open&&l.stream_ops.open(l),u.logReadFiles&&!(1&e)&&(s.readFiles||(s.readFiles={}),r in s.readFiles||(s.readFiles[r]=1)),l},close(r){if(s.isClosed(r))throw new s.ErrnoError(8);r.getdents&&(r.getdents=null);try{r.stream_ops.close&&r.stream_ops.close(r)}catch(e){throw e}finally{s.closeStream(r.fd)}r.fd=null},isClosed:r=>null===r.fd,llseek(r,e,t){if(s.isClosed(r))throw new s.ErrnoError(8);if(!r.seekable||!r.stream_ops.llseek)throw new s.ErrnoError(70);if(0!=t&&1!=t&&2!=t)throw new s.ErrnoError(28);return r.position=r.stream_ops.llseek(r,e,t),r.ungotten=[],r.position},read(r,e,t,n,i){if(n<0||i<0)throw new s.ErrnoError(28);if(s.isClosed(r))throw new s.ErrnoError(8);if(1==(2097155&r.flags))throw new s.ErrnoError(8);if(s.isDir(r.node.mode))throw new s.ErrnoError(31);if(!r.stream_ops.read)throw new s.ErrnoError(28);var o=typeof i<"u";if(o){if(!r.seekable)throw new s.ErrnoError(70)}else i=r.position;var a=r.stream_ops.read(r,e,t,n,i);return o||(r.position+=a),a},write(r,e,t,n,i,o){if(n<0||i<0)throw new s.ErrnoError(28);if(s.isClosed(r))throw new s.ErrnoError(8);if(!(2097155&r.flags))throw new s.ErrnoError(8);if(s.isDir(r.node.mode))throw new s.ErrnoError(31);if(!r.stream_ops.write)throw new s.ErrnoError(28);r.seekable&&1024&r.flags&&s.llseek(r,0,2);var a=typeof i<"u";if(a){if(!r.seekable)throw new s.ErrnoError(70)}else i=r.position;var l=r.stream_ops.write(r,e,t,n,i,o);return a||(r.position+=l),l},allocate(r,e,t){if(s.isClosed(r))throw new s.ErrnoError(8);if(e<0||t<=0)throw new s.ErrnoError(28);if(!(2097155&r.flags))throw new s.ErrnoError(8);if(!s.isFile(r.node.mode)&&!s.isDir(r.node.mode))throw new s.ErrnoError(43);if(!r.stream_ops.allocate)throw new s.ErrnoError(138);r.stream_ops.allocate(r,e,t)},mmap(r,e,t,n,i){if(2&n&&!(2&i)&&2!=(2097155&r.flags))throw new s.ErrnoError(2);if(1==(2097155&r.flags))throw new s.ErrnoError(2);if(!r.stream_ops.mmap)throw new s.ErrnoError(43);return r.stream_ops.mmap(r,e,t,n,i)},msync:(r,e,t,n,i)=>r.stream_ops.msync?r.stream_ops.msync(r,e,t,n,i):0,munmap:r=>0,ioctl(r,e,t){if(!r.stream_ops.ioctl)throw new s.ErrnoError(59);return r.stream_ops.ioctl(r,e,t)},readFile(r,e={}){if(e.flags=e.flags||0,e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw new Error(`Invalid encoding type "${e.encoding}"`);var t,n=s.open(r,e.flags),o=s.stat(r).size,a=new Uint8Array(o);return s.read(n,a,0,o,0),"utf8"===e.encoding?t=V(a,0):"binary"===e.encoding&&(t=a),s.close(n),t},writeFile(r,e,t={}){t.flags=t.flags||577;var n=s.open(r,t.flags,t.mode);if("string"==typeof e){var i=new Uint8Array(Ee(e)+1),o=ie(e,i,0,i.length);s.write(n,i,0,o,void 0,t.canOwn)}else{if(!ArrayBuffer.isView(e))throw new Error("Unsupported data type");s.write(n,e,0,e.byteLength,void 0,t.canOwn)}s.close(n)},cwd:()=>s.currentPath,chdir(r){var e=s.lookupPath(r,{follow:!0});if(null===e.node)throw new s.ErrnoError(44);if(!s.isDir(e.node.mode))throw new s.ErrnoError(54);var t=s.nodePermissions(e.node,"x");if(t)throw new s.ErrnoError(t);s.currentPath=e.path},createDefaultDirectories(){s.mkdir("/tmp"),s.mkdir("/home"),s.mkdir("/home/web_user")},createDefaultDevices(){s.mkdir("/dev"),s.registerDevice(s.makedev(1,3),{read:()=>0,write:(n,i,o,a,l)=>a}),s.mkdev("/dev/null",s.makedev(1,3)),X.register(s.makedev(5,0),X.default_tty_ops),X.register(s.makedev(6,0),X.default_tty1_ops),s.mkdev("/dev/tty",s.makedev(5,0)),s.mkdev("/dev/tty1",s.makedev(6,0));var r=new Uint8Array(1024),e=0,t=()=>(0===e&&(e=fr(r).byteLength),r[--e]);s.createDevice("/dev","random",t),s.createDevice("/dev","urandom",t),s.mkdir("/dev/shm"),s.mkdir("/dev/shm/tmp")},createSpecialDirectories(){s.mkdir("/proc");var r=s.mkdir("/proc/self");s.mkdir("/proc/self/fd"),s.mount({mount(){var e=s.createNode(r,"fd",16895,73);return e.node_ops={lookup(t,n){var o=s.getStreamChecked(+n),a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>o.path}};return a.parent=a,a}},e}},{},"/proc/self/fd")},createStandardStreams(){u.stdin?s.createDevice("/dev","stdin",u.stdin):s.symlink("/dev/tty","/dev/stdin"),u.stdout?s.createDevice("/dev","stdout",null,u.stdout):s.symlink("/dev/tty","/dev/stdout"),u.stderr?s.createDevice("/dev","stderr",null,u.stderr):s.symlink("/dev/tty1","/dev/stderr"),s.open("/dev/stdin",0),s.open("/dev/stdout",1),s.open("/dev/stderr",1)},ensureErrnoError(){s.ErrnoError||(s.ErrnoError=function(e,t){this.name="ErrnoError",this.node=t,this.setErrno=function(n){this.errno=n},this.setErrno(e),this.message="FS error"},s.ErrnoError.prototype=new Error,s.ErrnoError.prototype.constructor=s.ErrnoError,[44].forEach(r=>{s.genericErrors[r]=new s.ErrnoError(r),s.genericErrors[r].stack="<generic error, no stack>"}))},staticInit(){s.ensureErrnoError(),s.nameTable=new Array(4096),s.mount(y,{},"/"),s.createDefaultDirectories(),s.createDefaultDevices(),s.createSpecialDirectories(),s.filesystems={MEMFS:y}},init(r,e,t){s.init.initialized=!0,s.ensureErrnoError(),u.stdin=r||u.stdin,u.stdout=e||u.stdout,u.stderr=t||u.stderr,s.createStandardStreams()},quit(){s.init.initialized=!1;for(var r=0;r<s.streams.length;r++){var e=s.streams[r];e&&s.close(e)}},findObject(r,e){var t=s.analyzePath(r,e);return t.exists?t.object:null},analyzePath(r,e){try{r=(t=s.lookupPath(r,{follow:!e})).path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var t=s.lookupPath(r,{parent:!0});n.parentExists=!0,n.parentPath=t.path,n.parentObject=t.node,n.name=k.basename(r),t=s.lookupPath(r,{follow:!e}),n.exists=!0,n.path=t.path,n.object=t.node,n.name=t.node.name,n.isRoot="/"===t.path}catch(i){n.error=i.errno}return n},createPath(r,e,t,n){r="string"==typeof r?r:s.getPath(r);for(var i=e.split("/").reverse();i.length;){var o=i.pop();if(o){var a=k.join2(r,o);try{s.mkdir(a)}catch{}r=a}}return a},createFile(r,e,t,n,i){var o=k.join2("string"==typeof r?r:s.getPath(r),e),a=Ye(n,i);return s.create(o,a)},createDataFile(r,e,t,n,i,o){var a=e;r&&(r="string"==typeof r?r:s.getPath(r),a=e?k.join2(r,e):r);var l=Ye(n,i),c=s.create(a,l);if(t){if("string"==typeof t){for(var h=new Array(t.length),w=0,_=t.length;w<_;++w)h[w]=t.charCodeAt(w);t=h}s.chmod(c,146|l);var m=s.open(c,577);s.write(m,t,0,t.length,0,o),s.close(m),s.chmod(c,l)}return c},createDevice(r,e,t,n){var i=k.join2("string"==typeof r?r:s.getPath(r),e),o=Ye(!!t,!!n);s.createDevice.major||(s.createDevice.major=64);var a=s.makedev(s.createDevice.major++,0);return s.registerDevice(a,{open(l){l.seekable=!1},close(l){n&&n.buffer&&n.buffer.length&&n(10)},read(l,c,h,w,_){for(var m=0,f=0;f<w;f++){var b;try{b=t()}catch{throw new s.ErrnoError(29)}if(void 0===b&&0===m)throw new s.ErrnoError(6);if(null==b)break;m++,c[h+f]=b}return m&&(l.node.timestamp=Date.now()),m},write(l,c,h,w,_){for(var m=0;m<w;m++)try{n(c[h+m])}catch{throw new s.ErrnoError(29)}return w&&(l.node.timestamp=Date.now()),m}}),s.mkdev(i,o,a)},forceLoadFile(r){if(r.isDevice||r.isFolder||r.link||r.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!ee)throw new Error("Cannot load without read() or XMLHttpRequest.");try{r.contents=_e(ee(r.url),!0),r.usedBytes=r.contents.length}catch{throw new s.ErrnoError(29)}},createLazyFile(r,e,t,n,i){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(f){if(!(f>this.length-1||f<0)){var b=f%this.chunkSize;return this.getter(f/this.chunkSize|0)[b]}},o.prototype.setDataGetter=function(f){this.getter=f},o.prototype.cacheLength=function(){var f=new XMLHttpRequest;if(f.open("HEAD",t,!1),f.send(null),!(f.status>=200&&f.status<300||304===f.status))throw new Error("Couldn't load "+t+". Status: "+f.status);var I,b=Number(f.getResponseHeader("Content-length")),B=(I=f.getResponseHeader("Accept-Ranges"))&&"bytes"===I,D=(I=f.getResponseHeader("Content-Encoding"))&&"gzip"===I,d=1048576;B||(d=b);var P=this;P.setDataGetter(R=>{var O=R*d,T=(R+1)*d-1;if(T=Math.min(T,b-1),typeof P.chunks[R]>"u"&&(P.chunks[R]=((R,O)=>{if(R>O)throw new Error("invalid range ("+R+", "+O+") or no bytes requested!");if(O>b-1)throw new Error("only "+b+" bytes available! programmer error!");var T=new XMLHttpRequest;if(T.open("GET",t,!1),b!==d&&T.setRequestHeader("Range","bytes="+R+"-"+O),T.responseType="arraybuffer",T.overrideMimeType&&T.overrideMimeType("text/plain; charset=x-user-defined"),T.send(null),!(T.status>=200&&T.status<300||304===T.status))throw new Error("Couldn't load "+t+". Status: "+T.status);return void 0!==T.response?new Uint8Array(T.response||[]):_e(T.responseText||"",!0)})(O,T)),typeof P.chunks[R]>"u")throw new Error("doXHR failed!");return P.chunks[R]}),(D||!b)&&(d=b=1,b=this.getter(0).length,d=b,Ne("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=b,this._chunkSize=d,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!J)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a=new o;Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var l={isDevice:!1,contents:a}}else l={isDevice:!1,url:t};var c=s.createFile(r,e,l,n,i);l.contents?c.contents=l.contents:l.url&&(c.contents=null,c.url=l.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var h={};function _(m,f,b,I,B){var D=m.node.contents;if(B>=D.length)return 0;var d=Math.min(D.length-B,I);if(D.slice)for(var p=0;p<d;p++)f[b+p]=D[B+p];else for(p=0;p<d;p++)f[b+p]=D.get(B+p);return d}return Object.keys(c.stream_ops).forEach(m=>{var f=c.stream_ops[m];h[m]=function(){return s.forceLoadFile(c),f.apply(null,arguments)}}),h.read=(m,f,b,I,B)=>(s.forceLoadFile(c),_(m,f,b,I,B)),h.mmap=(m,f,b,I,B)=>{s.forceLoadFile(c);var D=pr(f);if(!D)throw new s.ErrnoError(48);return _(m,C,D,f,b),{ptr:D,allocated:!0}},c.stream_ops=h,c}},E={DEFAULT_POLLMASK:5,calculateAt(r,e,t){if(k.isAbs(e))return e;var n;if(n=-100===r?s.cwd():E.getStreamFromFD(r).path,0==e.length){if(!t)throw new s.ErrnoError(44);return n}return k.join2(n,e)},doStat(r,e,t){try{var n=r(e)}catch(l){if(l&&l.node&&k.normalize(e)!==k.normalize(s.getPath(l.node)))return-54;throw l}g[t>>2]=n.dev,g[t+4>>2]=n.mode,S[t+8>>2]=n.nlink,g[t+12>>2]=n.uid,g[t+16>>2]=n.gid,g[t+20>>2]=n.rdev,A=[n.size>>>0,(v=n.size,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[t+24>>2]=A[0],g[t+28>>2]=A[1],g[t+32>>2]=4096,g[t+36>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return A=[Math.floor(i/1e3)>>>0,(v=Math.floor(i/1e3),+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[t+40>>2]=A[0],g[t+44>>2]=A[1],S[t+48>>2]=i%1e3*1e3,A=[Math.floor(o/1e3)>>>0,(v=Math.floor(o/1e3),+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[t+56>>2]=A[0],g[t+60>>2]=A[1],S[t+64>>2]=o%1e3*1e3,A=[Math.floor(a/1e3)>>>0,(v=Math.floor(a/1e3),+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[t+72>>2]=A[0],g[t+76>>2]=A[1],S[t+80>>2]=a%1e3*1e3,A=[n.ino>>>0,(v=n.ino,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[t+88>>2]=A[0],g[t+92>>2]=A[1],0},doMsync(r,e,t,n,i){if(!s.isFile(e.node.mode))throw new s.ErrnoError(43);if(2&n)return 0;var o=G.slice(r,r+t);s.msync(e,o,i,t,n)},varargs:void 0,get(){var r=g[+E.varargs>>2];return E.varargs+=4,r},getp:()=>E.get(),getStr:r=>$(r),getStreamFromFD:r=>s.getStreamChecked(r)},ze=(r,e,t)=>ie(r,G,e,t),We=(r,e)=>e+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*e:NaN;mr=()=>performance.now();var Wt=r=>{var t=(r-pe.buffer.byteLength+65535)/65536;try{return pe.grow(t),sr(),1}catch{}},je={},oe=()=>{if(!oe.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ce||"./this.program"};for(var t in je)void 0===je[t]?delete e[t]:e[t]=je[t];var n=[];for(var t in e)n.push(`${t}=${e[t]}`);oe.strings=n}return oe.strings},vr=(r,e)=>{me=r,(r=>{me=r,dt||(u.onExit&&u.onExit(r),Be=!0),de(r,new ye(r))})(r)},Zt=vr,be=r=>r%4==0&&(r%100!=0||r%400==0),gr=[31,29,31,30,31,30,31,31,30,31,30,31],yr=[31,28,31,30,31,30,31,31,30,31,30,31],wr=function(r,e,t,n){r||(r=this),this.parent=r,this.mount=r.mount,this.mounted=null,this.id=s.nextInode++,this.name=e,this.mode=t,this.node_ops={},this.stream_ops={},this.rdev=n};Object.defineProperties(wr.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(r){r?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(r){r?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return s.isDir(this.mode)}},isDevice:{get:function(){return s.isChrdev(this.mode)}}}),s.FSNode=wr,s.createPreloadedFile=(r,e,t,n,i,o,a,l,c,h)=>{var w=e?Y.resolve(k.join2(r,e)):r;function m(f){function b(I){h&&h(),l||((r,e,t,n,i,o)=>{s.createDataFile(r,e,t,n,i,o)})(r,e,I,n,i,c),o&&o(),ve()}((r,e,t,n)=>{typeof Browser<"u"&&Browser.init();var i=!1;return kt.forEach(o=>{i||o.canHandle(e)&&(o.handle(r,e,t,n),i=!0)}),i})(f,w,b,()=>{a&&a(),ve()})||b(f)}Oe(),"string"==typeof t?((r,e,t,n)=>{var i=n?"":`al ${r}`;re(r,o=>{(function $r(r,e){r||Z(e)})(o,`Loading data file "${r}" failed (no arrayBuffer).`),e(new Uint8Array(o)),i&&ve()},o=>{if(!t)throw`Loading data file "${r}" failed.`;t()}),i&&Oe()})(t,f=>m(f),a):m(t)},s.staticInit();var Re,fn={a:(r,e,t,n)=>{Z(`Assertion failed: ${$(r)}, at: `+[e?$(e):"unknown filename",t,n?$(n):"unknown function"])},b:(r,e,t)=>{throw new ft(r).init(e,t),r},d:function Tt(r,e,t){E.varargs=t;try{var n=E.getStreamFromFD(r);switch(e){case 0:if((i=E.get())<0)return-28;for(;s.streams[i];)i++;return s.createStream(n,i).fd;case 1:case 2:case 6:case 7:return 0;case 3:return n.flags;case 4:var i=E.get();return n.flags|=i,0;case 5:return i=E.getp(),ne[i+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return g[_r()>>2]=28,-1}}catch(l){if(typeof s>"u"||"ErrnoError"!==l.name)throw l;return-l.errno}},y:function Pt(r,e){try{var t=E.getStreamFromFD(r);return E.doStat(s.stat,t.path,e)}catch(n){if(typeof s>"u"||"ErrnoError"!==n.name)throw n;return-n.errno}},u:function Mt(r,e){try{if(0===e)return-28;var t=s.cwd(),n=Ee(t)+1;return e<n?-68:(ze(t,r,e),n)}catch(i){if(typeof s>"u"||"ErrnoError"!==i.name)throw i;return-i.errno}},r:function Ct(r,e,t){try{var n=E.getStreamFromFD(r);n.getdents||(n.getdents=s.readdir(n.path));for(var i=280,o=0,a=s.llseek(n,0,1),l=Math.floor(a/i);l<n.getdents.length&&o+i<=t;){var c,h,w=n.getdents[l];if("."===w)c=n.node.id,h=4;else if(".."===w)c=s.lookupPath(n.path,{parent:!0}).node.id,h=4;else{var m=s.lookupNode(n.node,w);c=m.id,h=s.isChrdev(m.mode)?2:s.isDir(m.mode)?4:s.isLink(m.mode)?10:8}A=[c>>>0,(v=c,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[e+o>>2]=A[0],g[e+o+4>>2]=A[1],A=[(l+1)*i>>>0,(v=(l+1)*i,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[e+o+8>>2]=A[0],g[e+o+12>>2]=A[1],ne[e+o+16>>1]=280,C[e+o+18>>0]=h,ze(w,e+o+19,256),o+=i,l+=1}return s.llseek(n,l*i,0),o}catch(f){if(typeof s>"u"||"ErrnoError"!==f.name)throw f;return-f.errno}},A:function It(r,e,t){E.varargs=t;try{var n=E.getStreamFromFD(r);switch(e){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return n.tty?0:-59;case 21505:if(!n.tty)return-59;if(n.tty.ops.ioctl_tcgets){var i=n.tty.ops.ioctl_tcgets(n),o=E.getp();g[o>>2]=i.c_iflag||0,g[o+4>>2]=i.c_oflag||0,g[o+8>>2]=i.c_cflag||0,g[o+12>>2]=i.c_lflag||0;for(var a=0;a<32;a++)C[o+a+17>>0]=i.c_cc[a]||0;return 0}return 0;case 21506:case 21507:case 21508:if(!n.tty)return-59;if(n.tty.ops.ioctl_tcsets){o=E.getp();var l=g[o>>2],c=g[o+4>>2],h=g[o+8>>2],w=g[o+12>>2],_=[];for(a=0;a<32;a++)_.push(C[o+a+17>>0]);return n.tty.ops.ioctl_tcsets(n.tty,e,{c_iflag:l,c_oflag:c,c_cflag:h,c_lflag:w,c_cc:_})}return 0;case 21519:return n.tty?(o=E.getp(),g[o>>2]=0,0):-59;case 21520:return n.tty?-28:-59;case 21531:return o=E.getp(),s.ioctl(n,e,o);case 21523:if(!n.tty)return-59;if(n.tty.ops.ioctl_tiocgwinsz){var m=n.tty.ops.ioctl_tiocgwinsz(n.tty);o=E.getp(),ne[o>>1]=m[0],ne[o+2>>1]=m[1]}return 0;default:return-28}}catch(f){if(typeof s>"u"||"ErrnoError"!==f.name)throw f;return-f.errno}},v:function Lt(r,e){try{return r=E.getStr(r),E.doStat(s.lstat,r,e)}catch(t){if(typeof s>"u"||"ErrnoError"!==t.name)throw t;return-t.errno}},w:function Ft(r,e,t,n){try{e=E.getStr(e);var i=256&n,o=4096&n;return n&=-6401,e=E.calculateAt(r,e,o),E.doStat(i?s.lstat:s.stat,e,t)}catch(a){if(typeof s>"u"||"ErrnoError"!==a.name)throw a;return-a.errno}},h:function Dt(r,e,t,n){E.varargs=n;try{e=E.getStr(e),e=E.calculateAt(r,e);var i=n?E.get():0;return s.open(e,t,i).fd}catch(o){if(typeof s>"u"||"ErrnoError"!==o.name)throw o;return-o.errno}},x:function xt(r,e){try{return r=E.getStr(r),E.doStat(s.stat,r,e)}catch(t){if(typeof s>"u"||"ErrnoError"!==t.name)throw t;return-t.errno}},k:()=>!0,n:function Ht(r,e,t,n,i,o,a,l){var c=We(i,o);try{if(isNaN(c))return 61;var h=E.getStreamFromFD(n),w=s.mmap(h,r,c,e,t),_=w.ptr;return g[a>>2]=w.allocated,S[l>>2]=_,0}catch(m){if(typeof s>"u"||"ErrnoError"!==m.name)throw m;return-m.errno}},o:function Ot(r,e,t,n,i,o,a){var l=We(o,a);try{if(isNaN(l))return 61;var c=E.getStreamFromFD(i);2&t&&E.doMsync(r,c,e,n,l),s.munmap(c)}catch(h){if(typeof s>"u"||"ErrnoError"!==h.name)throw h;return-h.errno}},f:()=>{Z("")},j:mr,l:(r,e,t)=>G.copyWithin(r,e,e+t),q:r=>{var c,e=G.length,t=2147483648;if((r>>>=0)>t)return!1;for(var i=1;i<=4;i*=2){var o=e*(1+.2/i);o=Math.min(o,r+100663296);var a=Math.min(t,(c=Math.max(r,o))+(65536-c%65536)%65536);if(Wt(a))return!0}return!1},s:(r,e)=>{var t=0;return oe().forEach((n,i)=>{var o=e+t;S[r+4*i>>2]=o,((r,e)=>{for(var t=0;t<r.length;++t)C[e++>>0]=r.charCodeAt(t);C[e>>0]=0})(n,o),t+=n.length+1}),0},t:(r,e)=>{var t=oe();S[r>>2]=t.length;var n=0;return t.forEach(i=>n+=i.length+1),S[e>>2]=n,0},e:Zt,g:function Qt(r){try{var e=E.getStreamFromFD(r);return s.close(e),0}catch(t){if(typeof s>"u"||"ErrnoError"!==t.name)throw t;return t.errno}},z:function rn(r,e,t,n){try{var o=((r,e,t,n)=>{for(var i=0,o=0;o<t;o++){var a=S[e>>2],l=S[e+4>>2];e+=8;var c=s.read(r,C,a,l,n);if(c<0)return-1;if(i+=c,c<l)break;typeof n<"u"&&(n+=c)}return i})(E.getStreamFromFD(r),e,t);return S[n>>2]=o,0}catch(a){if(typeof s>"u"||"ErrnoError"!==a.name)throw a;return a.errno}},p:function tn(r,e,t,n,i){var o=We(e,t);try{if(isNaN(o))return 61;var a=E.getStreamFromFD(r);return s.llseek(a,o,n),A=[a.position>>>0,(v=a.position,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[i>>2]=A[0],g[i+4>>2]=A[1],a.getdents&&0===o&&0===n&&(a.getdents=null),0}catch(l){if(typeof s>"u"||"ErrnoError"!==l.name)throw l;return l.errno}},i:function sn(r,e,t,n){try{var o=((r,e,t,n)=>{for(var i=0,o=0;o<t;o++){var a=S[e>>2],l=S[e+4>>2];e+=8;var c=s.write(r,C,a,l,n);if(c<0)return-1;i+=c,typeof n<"u"&&(n+=c)}return i})(E.getStreamFromFD(r),e,t);return S[n>>2]=o,0}catch(a){if(typeof s>"u"||"ErrnoError"!==a.name)throw a;return a.errno}},m:function ct(r,e,t,n){!function qr(r,e){ue&&postMessage(z.builder().setWorkerId(ue.workerId).setMessage(Me.builder().setResult(r,e)))}($(r,e),$(t,n))},c:(r,e,t,n,i)=>((r,e,t,n)=>{var i=S[n+40>>2],o={tm_sec:g[n>>2],tm_min:g[n+4>>2],tm_hour:g[n+8>>2],tm_mday:g[n+12>>2],tm_mon:g[n+16>>2],tm_year:g[n+20>>2],tm_wday:g[n+24>>2],tm_yday:g[n+28>>2],tm_isdst:g[n+32>>2],tm_gmtoff:g[n+36>>2],tm_zone:i?$(i):""},a=$(t),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in l)a=a.replace(new RegExp(c,"g"),l[c]);var h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],w=["January","February","March","April","May","June","July","August","September","October","November","December"];function _(d,p,P){for(var R="number"==typeof d?d.toString():d||"";R.length<p;)R=P[0]+R;return R}function m(d,p){return _(d,p,"0")}function f(d,p){function P(O){return O<0?-1:O>0?1:0}var R;return 0===(R=P(d.getFullYear()-p.getFullYear()))&&0===(R=P(d.getMonth()-p.getMonth()))&&(R=P(d.getDate()-p.getDate())),R}function b(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function I(d){var p=((r,e)=>{for(var t=new Date(r.getTime());e>0;){var n=be(t.getFullYear()),i=t.getMonth(),o=(n?gr:yr)[i];if(!(e>o-t.getDate()))return t.setDate(t.getDate()+e),t;e-=o-t.getDate()+1,t.setDate(1),i<11?t.setMonth(i+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return t})(new Date(d.tm_year+1900,0,1),d.tm_yday),P=new Date(p.getFullYear(),0,4),R=new Date(p.getFullYear()+1,0,4),O=b(P),T=b(R);return f(O,p)<=0?f(T,p)<=0?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}var B={"%a":d=>h[d.tm_wday].substring(0,3),"%A":d=>h[d.tm_wday],"%b":d=>w[d.tm_mon].substring(0,3),"%B":d=>w[d.tm_mon],"%C":d=>m((d.tm_year+1900)/100|0,2),"%d":d=>m(d.tm_mday,2),"%e":d=>_(d.tm_mday,2," "),"%g":d=>I(d).toString().substring(2),"%G":d=>I(d),"%H":d=>m(d.tm_hour,2),"%I":d=>{var p=d.tm_hour;return 0==p?p=12:p>12&&(p-=12),m(p,2)},"%j":d=>m(d.tm_mday+((r,e)=>{for(var t=0,n=0;n<=e;t+=r[n++]);return t})(be(d.tm_year+1900)?gr:yr,d.tm_mon-1),3),"%m":d=>m(d.tm_mon+1,2),"%M":d=>m(d.tm_min,2),"%n":()=>"\n","%p":d=>d.tm_hour>=0&&d.tm_hour<12?"AM":"PM","%S":d=>m(d.tm_sec,2),"%t":()=>"\t","%u":d=>d.tm_wday||7,"%U":d=>m(Math.floor((d.tm_yday+7-d.tm_wday)/7),2),"%V":d=>{var p=Math.floor((d.tm_yday+7-(d.tm_wday+6)%7)/7);if((d.tm_wday+371-d.tm_yday-2)%7<=2&&p++,p){if(53==p){var R=(d.tm_wday+371-d.tm_yday)%7;4!=R&&(3!=R||!be(d.tm_year))&&(p=1)}}else{p=52;var P=(d.tm_wday+7-d.tm_yday-1)%7;(4==P||5==P&&be(d.tm_year%400-1))&&p++}return m(p,2)},"%w":d=>d.tm_wday,"%W":d=>m(Math.floor((d.tm_yday+7-(d.tm_wday+6)%7)/7),2),"%y":d=>(d.tm_year+1900).toString().substring(2),"%Y":d=>d.tm_year+1900,"%z":d=>{var p=d.tm_gmtoff;return(p>=0?"+":"-")+("0000"+(p=(p=Math.abs(p)/60)/60*100+p%60)).slice(-4)},"%Z":d=>d.tm_zone,"%%":()=>"%"};for(var c in a=a.replace(/%%/g,"\0\0"),B)a.includes(c)&&(a=a.replace(new RegExp(c,"g"),B[c](o)));var D=_e(a=a.replace(/\0\0/g,"%"),!1);return D.length>e?0:(((r,e)=>{C.set(r,e)})(D,r),D.length-1)})(r,e,t,n)},F=function ut(){var r={a:fn};function e(n,i){return pe=(F=n.exports).B,sr(),function st(r){or.unshift(r)}(F.C),ve(),F}if(Oe(),u.instantiateWasm)try{return u.instantiateWasm(r,e)}catch(n){return q(`Module.instantiateWasm callback failed with error: ${n}`),!1}return function lt(r,e,t,n){r||"function"!=typeof WebAssembly.instantiateStreaming||lr(e)||ge(e)||he||"function"!=typeof fetch?cr(e,t,n):fetch(e,{credentials:"same-origin"}).then(i=>WebAssembly.instantiateStreaming(i,t).then(n,function(a){return q(`wasm streaming compile failed: ${a}`),q("falling back to ArrayBuffer instantiation"),cr(e,t,n)}))}(te,Q,r,function t(n){e(n.instance)}),{}}(),Er=(u._free=r=>(u._free=F.E)(r),u._ChessSetup=(r,e)=>(u._ChessSetup=F.F)(r,e),u._ChessCalculate=(r,e,t)=>(u._ChessCalculate=F.G)(r,e,t),u._main=(r,e)=>(Er=u._main=F.H)(r,e)),_r=(u._Setup=(r,e)=>(u._Setup=F.I)(r,e),u._Calculate=(r,e,t)=>(u._Calculate=F.J)(r,e,t),u._malloc=r=>(u._malloc=F.K)(r),()=>(_r=F.L)()),br=(r,e)=>(br=F.M)(r,e),qe=r=>(qe=F.N)(r),kr=r=>(kr=F.O)(r);function Sr(r=Fe){function e(){Re||(Re=!0,u.calledRun=!0,!Be&&(function et(){!u.noFSInit&&!s.init.initialized&&s.init(),s.ignorePermissions=!1,X.init(),we(or)}(),function rt(){we(Jr)}(),u.onRuntimeInitialized&&u.onRuntimeInitialized(),Rr&&function _n(r=[]){var e=Er;r.unshift(ce);var t=r.length,n=qe(4*(t+1)),i=n;r.forEach(a=>{S[i>>2]=(r=>{var e=Ee(r)+1,t=qe(e);return ze(r,t,e),t})(a),i+=4}),S[i>>2]=0;try{var o=e(t,n);return vr(o),o}catch(a){return(r=>{if(r instanceof ye||"unwind"==r)return me;de(1,r)})(a)}}(r),function tt(){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;)r=u.postRun.shift(),ar.unshift(r);var r;we(ar)}()))}K>0||(function Qr(){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)r=u.preRun.shift(),ir.unshift(r);var r;we(ir)}(),K>0)||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),e()},1)):e())}if(u.___start_em_js=264140,u.___stop_em_js=264275,se=function r(){Re||Sr(),Re||(se=r)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();var Rr=!0;u.noInitialRun&&(Rr=!1),Sr()},827:()=>{},652:()=>{},832:()=>{}},Ve={};function Ae(L){var Te=Ve[L];if(void 0!==Te)return Te.exports;var U=Ve[L]={id:L,loaded:!1,exports:{}};return Ar[L](U,U.exports,Ae),U.loaded=!0,U.exports}Ae.hmd=L=>((L=Object.create(L)).children||(L.children=[]),Object.defineProperty(L,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+L.id)}}),L),Ae(390)})();