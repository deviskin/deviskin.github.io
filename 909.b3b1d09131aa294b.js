(()=>{var Mt={3909:(I,Re,U)=>{"use strict";class W{workerId;message;constructor(e,r){this.workerId=e,this.message=r}static builder(){return new W(-1,null)}setWorkerId(e){return this.workerId=e,this}setMessage(e){return this.message=e,this}}let le=(()=>{class t{type;id=0;callbackId=-1;static staticId=0;constructor(r){this.type=r,this.id=t.newId()}static newId(){return t.staticId++}setCallbackId(r){return this.callbackId=r,this}}return t})(),Dt=(()=>{class t extends le{pageLoadedFrom;static TYPE="SetupWorkerRequest";constructor(r){super(t.TYPE),this.pageLoadedFrom=r}static builder(){return new t("")}setPageLoadedFrom(r){return this.pageLoadedFrom=r,this}}return t})(),Pe=(()=>{class t extends le{formula;static TYPE="CalculateWorkerRequest";constructor(r){super(t.TYPE),this.formula=r}static builder(){return new t("")}setFormula(r){return this.formula=r,this}}return t})(),Le=(()=>{class t extends le{gameId;commands;result;static TYPE="CalculateChessWorkerRequest";constructor(r,s,i){super(t.TYPE),this.gameId=r,this.commands=s,this.result=i}static builder(){return new t("","","")}setCommands(r,...s){return this.gameId=r,this.commands=[r,...s].join("\n"),this}setResult(r,s){return this.gameId=r,this.result=s,this}}return t})();class Y extends le{}let Ge=(()=>{class t extends Y{bodies;static TYPE="LibraryInfoRequest";constructor(r){super(t.TYPE),this.bodies=r}static builder(){return new t([])}setBodies(r){return this.bodies=r,this}}return t})(),Ct=(()=>{class t extends Y{libraryType;bookRef;loadBooksEnabled;static TYPE="BookInfoRequest";constructor(r,s,i){super(t.TYPE),this.libraryType=r,this.bookRef=s,this.loadBooksEnabled=i}static builder(){return new t("","",!0)}setLibraryType(r){return this.libraryType=r,this}setBookRef(r){return this.bookRef=r,this}setLoadBooksEnabled(r){return this.loadBooksEnabled=r,this}}return t})(),It=(()=>{class t extends Y{libraryType;bookRef;languages;static TYPE="BookRequest";constructor(r,s,i){super(t.TYPE),this.libraryType=r,this.bookRef=s,this.languages=i}static builder(){return new t("","",[])}setLibraryType(r){return this.libraryType=r,this}setBookRef(r){return this.bookRef=r,this}setLanguages(r){return this.languages=r,this}addLanguage(r){return this.languages.push(r),this}}return t})(),Ft=(()=>{class t extends Y{pages;static TYPE="PagesRequest";constructor(r){super(t.TYPE),this.pages=r}static builder(){return new t([])}setBookPages(r){return this.pages=r,this}addBookPage(r){return this.pages.push(r),this}}return t})(),xt=(()=>{class t extends Y{pages;static TYPE="PagesResponse";constructor(r){super(t.TYPE),this.pages=r}static builder(){return new t([])}setPages(r){return this.pages=r,this}addPage(r){return this.pages.push(r),this}}return t})();class Me{bookRef;path;content;constructor(e,r,s){this.bookRef=e,this.path=r,this.content=s}static builder(){return new Me("","","")}setBookRef(e){return this.bookRef=e,this}setPath(e){return this.path=e,this}setContent(e){return this.content=e,this}}let Nt=(()=>{class t extends Y{metaBooks;static TYPE="BookResponse";constructor(r){super(t.TYPE),this.metaBooks=r}static builder(){return new t([])}setMetaBooks(r){return this.metaBooks=r,this}addMetaBook(r){return this.metaBooks.push(r),this}}return t})(),Bt=(()=>{class t extends Y{bookRef;metaContent;loadBooksEnabled;static TYPE="BookInfoResponse";constructor(r,s,i){super(t.TYPE),this.bookRef=r,this.metaContent=s,this.loadBooksEnabled=i}static builder(){return new t("","",!0)}setBookRef(r){return this.bookRef=r,this}setMetaContent(r){return this.metaContent=r,this}setLoadBooksEnabled(r){return this.loadBooksEnabled=r,this}}return t})();class De{libraryRef;metaContent;constructor(e,r){this.libraryRef=e,this.metaContent=r}static builder(){return new De("","")}setLibraryRef(e){return this.libraryRef=e,this}setMetaContent(e){return this.metaContent=e,this}}let Ht=(()=>{class t extends Y{bodies;static TYPE="LibraryInfoResponse";constructor(r){super(t.TYPE),this.bodies=r}static builder(){return new t([])}setBodies(r){return this.bodies=r,this}}return t})();class Ot{messageSender;requests=new Map;constructor(e=null){this.messageSender=e}send(e,r){return this.messageSender&&(this.requests.set(r.type,r),this.messageSender(e,r)),this}post(e,r){return this}runAll(e,r,s){let i=0,a=()=>{if(i>=e.length)return void(s&&s(!0));let o=e[i++];r(o,l=>{l?a():s&&s(!1)})};a()}}class ee{static merge(e,r){if(!e&&!r)return"";if(!e)return r;if(!r)return e;let s=e.endsWith("/"),i=r.startsWith("/"),a=e;return s!=i?a+=r:s?a+=i?r.substring(1):r:a?a+="/"+r:a=r,a}}class Ze{static dtr(e,r){for(var s=r>=0?r:47,i=new ArrayBuffer(e.length-1),a=new Uint8Array(i),o=s,l=0;l<e.length;++l){var d=255&(e[l]^o);l>0&&(a[l-1]=d),o=255&(o+d^5)}return a}static fromByteArray(e){let r="";for(let s=0;s<e.length;s+=2)r+=String.fromCharCode(e[s+1]<<8|e[s]);return r}}const Qe="2.1.165",jt=[{id:"deviskin",name:"Deviskin",nameSortOrder:"Deviskin",link:"http://deviskin.github.io",semail:"ZXZnZW55LmFsaXNraW5AZ21haWwuY29t"}];class x{type;ref;constructor(e,r){this.type=e,this.ref=r}static builder(){return new x("","")}setType(e){return this.type=e,this}setRef(e){return this.ref=e,this}}class L{id;name;shape;menuShape;routes;routeEnabled;applicationEnabled;applicationHidden;applicationDirect;applicationLogoText;libraries;constructor(e,r,s,i,a,o,l,c,d,w,E){this.id=e,this.name=r,this.shape=s,this.menuShape=i,this.routes=a,this.routeEnabled=o,this.applicationEnabled=l,this.applicationHidden=c,this.applicationDirect=d,this.applicationLogoText=w,this.libraries=E}static builder(){return new L("","","","",[],!1,!1,!1,!1,"",[x.builder().setType("prod").setRef("book")])}setId(e){return this.id=e,this}setName(e){return this.name=e,this}setShape(e){return this.shape=e,this}setMenuShape(e){return this.menuShape=e,this}setRoutes(e){return this.routes=e,this}setRouteEnabled(e){return this.routeEnabled=e,this}setApplicationEnabled(e){return this.applicationEnabled=e,this}setApplicationDirect(e){return this.applicationDirect=e,this}setApplicationLogoText(e){return this.applicationLogoText=e,this}setLibraries(e){return this.libraries=e,this}enable(e=!0){return this.routeEnabled=e,this.applicationEnabled=e,this}hide(e=!0){return this.applicationHidden=e,this}disable(){return this.routeEnabled=!1,this.applicationEnabled=!1,this}}class R{onClick;isActive;isHidden;syncHandler;sLink="";sName="";sShape="";bHasBadge=!1;bHasAlert=!1;workingSync=0;constructor(e,r,s,i,a,o=null,l=null,c=null,d=null){this.onClick=o,this.isActive=l,this.isHidden=c,this.syncHandler=d,this.setLink(e),this.setName(r),this.setShape(s),this.setHasBadge(i),this.setHasAlert(a)}static builder(){return new R("","","",!1,!1,null)}setSyncHandler(e){return this.syncHandler=e,this}setIsActive(e){return this.isActive=e,this}setIsHidden(e){return this.isHidden=e,this}setOnClick(e){return this.onClick=e,this}sync(){if(!(this.workingSync>0)){try{++this.workingSync,this.syncHandler&&this.syncHandler(this)}catch{}--this.workingSync}}get link(){return this.sync(),this.sLink}set link(e){this.sLink=e}get name(){return this.sync(),this.sName}set name(e){this.sName=e}get shape(){return this.sync(),this.sShape}set shape(e){this.sShape=e}get hasBadge(){return this.sync(),this.bHasBadge}set hasBadge(e){this.bHasBadge=e}get hasAlert(){return this.sync(),this.bHasAlert}set hasAlert(e){this.bHasAlert=e}setLink(e){return this.link=e,this}setName(e){return this.name=e,this}setShape(e){return this.shape=e,this}setHasBadge(e){return this.hasBadge=e,this}setHasAlert(e){return this.hasAlert=e,this}runOnClick(){this.onClick&&this.onClick(this)}}class qt{version="";applicationId="memorial";applicationName="Memorial";developers=jt;production=!0;platform="Web";relativeCacheService=!0;serviceAPIHost="";staticDataHost="";redirectToServerAfterItIsReadyAdress="";portAutoDetection=!0;portAutoIncrementValue=0;defaultRoute="/compiler";coding=!0;showOldVersions=!1;show3D=!1;oldVersionsName="V1";useDictionaries=!1;useReactLang=!1;usePlotlyLang=!1;useBootstrapLang=!1;useHtmlLang=!1;useCJsLang=!1;usePegJsLang=!1;useSqlLang=!1;useJsLang=!0;useTsLang=!0;useTsPLang=!0;useTsPpLang=!1;useCyrillicLang=!0;useIFrameLang=!1;useLocalStorage=!0;useMenuExamplesEx=!1;useBookmarkLinks=!1;csNumbersDefault=!1;themeName="blue";serverType="rest";applications=[];setUseIFrameLang(e){return this.useIFrameLang=e,this}setUseTsLang(e){return this.useTsLang=e,this}setUseTsPLang(e){return this.useTsPLang=e,this}setUseTsPpLang(e){return this.useTsPpLang=e,this}setUseCJsLang(e){return this.useCJsLang=e,this}setUsePegJsLang(e){return this.usePegJsLang=e,this}setUseCyrillicLang(e){return this.useCyrillicLang=e,this}setUseSqlLang(e){return this.useSqlLang=e,this}setUseReactLang(e){return this.useReactLang=e,this}setUsePlotlyLang(e){return this.usePlotlyLang=e,this}setUseBootstrapLang(e){return this.useBootstrapLang=e,this}setUseHtmlLang(e){return this.useHtmlLang=e,this}constructor(){this.addApplication(L.builder().setId("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setShape("home").setRoutes([R.builder().setLink("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setShape("home")]).hide()).addApplication(L.builder().setId("logos").setName("\u041b\u043e\u0433\u043e").setShape("scroll").setApplicationLogoText("\u041f\u0435\u0447\u0430\u0442\u044c|\u043b\u043e\u0433\u043e\u0442\u0438\u043f\u043e\u0432").setRoutes([R.builder().setLink("logos").setName("\u041b\u043e\u0433\u043e").setShape("print")]).hide()).addApplication(L.builder().setId("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setShape("check-circle").setApplicationLogoText("D3|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([R.builder().setLink("main-test").setName("\u041c\u043e\u043b\u0435\u0431\u0435\u043d").setShape("calendar"),R.builder().setLink("memorials-pages-editor").setName("\u0417\u0430\u043f\u0438\u0441\u043a\u0438").setShape("event"),R.builder().setLink("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setShape("image")]).hide()).addApplication(L.builder().setId("tests").setName("\u0422\u0435\u0441\u0442\u044b").setShape("check-circle").setApplicationLogoText("\u0422\u0435\u0441\u0442\u044b|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([R.builder().setLink("tests").setName("\u0422\u0435\u0441\u0442\u044b").setShape("check-circle")]).hide()).addApplication(L.builder().setId("d3Dexamples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b 3D").setShape("scroll").setApplicationLogoText("Three.JS|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([R.builder().setLink("d3Dexamples").setName("Three 3D").setShape("scroll")]).hide()).addApplication(L.builder().setId("books").setName("\u041a\u043d\u0438\u0433\u0438").setShape("my-logo-icon").setMenuShape("book").setLibraries([x.builder().setType("prod").setRef("biblia")]).setRoutes([R.builder().setLink("books").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book")])).addApplication(L.builder().setId("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("my-logo-icon").setMenuShape("form").setLibraries([x.builder().setType("mprod").setRef("ps")]).setRoutes([R.builder().setLink("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("users")])).addApplication(L.builder().setId("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar").setLibraries([x.builder().setType("clndrprod").setRef("clndr")]).setRoutes([R.builder().setLink("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar")])).addApplication(L.builder().setId("cross").setName("\u041a\u0440\u0435\u0441\u0442").setShape("my-logo-icon").setLibraries([x.builder().setType("crossprod").setRef("cross")]).setRoutes([R.builder().setLink("cross").setName("\u041a\u0440\u0435\u0441\u0442").setShape("my-logo-icon")])).addApplication(L.builder().setId("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug").setLibraries([x.builder().setType("compprod").setRef("comp")]).setApplicationLogoText("C-Js|\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setRoutes([R.builder().setLink("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug")]).hide()).addApplication(L.builder().setId("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock").setLibraries([x.builder().setType("schprod").setRef("sch")]).setRoutes([R.builder().setLink("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock")])).addApplication(L.builder().setId("calculator").setName("\u0420\u0435\u0448IDE").setShape("calculator").setLibraries([x.builder().setType("cprod").setRef("calc")]).setApplicationLogoText("\u0420\u0435\u0448IDE|\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setRoutes([R.builder().setLink("calculator").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setShape("calculator")])).addApplication(L.builder().setId("chess").setName("\u0428\u0430\u0445\u043c\u0430\u0442\u044b").setShape("chess-white-king").setLibraries([x.builder().setType("chessprod").setRef("chess")]).setApplicationLogoText("\u0428\u0430\u0445\u043c\u0430\u0442\u044b|\u0438\u0433\u0440\u0430").setRoutes([R.builder().setLink("chess").setName("\u0428\u0430\u0445\u043c\u0430\u0442\u044b").setShape("chess-white-king")])).addApplication(L.builder().setId("cubicrubik").setName("\u041a\u0443\u0431\u0438\u043a \u0420\u0443\u0431\u0438\u043a\u0430").setShape("block").setLibraries([x.builder().setType("cubicrubik").setRef("cubicrubik")]).setApplicationLogoText("\u041a\u0443\u0431\u0438\u043a|\u0420\u0443\u0431\u0438\u043a\u0430").setRoutes([R.builder().setLink("cubicrubik/cubicRubik.html").setName("\u041a\u0443\u0431\u0438\u043a \u0420\u0443\u0431\u0438\u043a\u0430").setShape("block")])).addApplication(L.builder().setId("hybrIDE").setName("\u0413\u0438\u0431\u0440IDE").setShape("bug").setLibraries([x.builder().setType("hybrIDE").setRef("hybrIDE")]).setApplicationLogoText("\u0413\u0438\u0431\u0440IDE|\u041f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430").setRoutes([R.builder().setLink("hybrIDE/hybrIDE.html").setName("\u0413\u0438\u0431\u0440IDE").setShape("bug")]).hide()).addApplication(L.builder().setId("hrb").setName("\u0425\u0420\u0411").setShape("my-logo-icon").setLibraries([x.builder().setType("prod").setRef("biblia"),x.builder().setType("hrbprod").setRef("hrb")]).setApplicationLogoText("\u0425\u0440\u0430\u043c|\u0432 \u041a\u043e\u0441\u0442\u0438\u043d\u043e").setRoutes([R.builder().setLink("hrb").setName("\u0425\u0440\u0430\u043c \u0432 \u041a\u043e\u0441\u0442\u0438\u043d\u043e").setShape("my-logo-icon")]).hide().setApplicationDirect(!0)).setVersion("BV."+Qe),this.afterConstruct()}setUseBookmarkLinks(e){return this.useBookmarkLinks=e,this}setUseMenuExamplesEx(e){return this.useMenuExamplesEx=e,this}addApplication(e){if(null!=this.applications.find(r=>r.id==e.id))throw new Error(`\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 "${e.id}" \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.`);return this.applications.push(e),this}setVersion(e){return this.version=e,this}setProduction(e){return this.production=e,this}setPlatform(e){return this.platform=e,this}setRelativeCacheService(e){return this.relativeCacheService=e,this}setServiceAPIHost(e){return this.serviceAPIHost=e,this}setStaticDataHost(e){return this.staticDataHost=e,this}setRedirectToServerAfterItIsReadyAdress(e){return this.redirectToServerAfterItIsReadyAdress=e,this}setPortAutoDetection(e){return this.portAutoDetection=e,this}setPortAutoIncrementValue(e){return this.portAutoIncrementValue=e,this}setDefaultRoute(e){return this.defaultRoute=e,this}setServerType(e){return this.serverType=e,this}setCoding(e){return this.coding=e,this}setShowOldVersions(e){return this.showOldVersions=e,this}setUseDictionaries(e){return this.useDictionaries=e,this}setCsNumbersDefault(e){return this.csNumbersDefault=e,this}afterConstruct(){}}class Ce extends qt{afterConstruct(){super.afterConstruct(),this.setVersion("WPR."+Qe).setProduction(!0).setServiceAPIHost("").setRedirectToServerAfterItIsReadyAdress("").setPortAutoDetection(!0).setPortAutoIncrementValue(0).setDefaultRoute("/help").setServerType("memory"),this.applications.forEach((e,r,s)=>e.enable())}static builder(){return new Ce}}const Vt=Ce.builder();class Ie{id;handler;constructor(e,r){this.id=e,this.handler=r}static builder(){return new Ie(-1,()=>{})}setId(e){return this.id=e,this}setHandler(e){return this.handler=e,this}}class Xt{id=1;handlers=new Map;targetHandlers=new Map;messagesToTarget=new Map;messagesTimeoutMs=18e4;newId(){return this.id++}putMessage(e){let r=e.target,s=this.messagesToTarget.get(r);return null==s&&(s=[]),s.push(e),s=this.removeOld(s),s?this.messagesToTarget.set(r,s):this.messagesToTarget.delete(r),this}getMessages(e,r=!0){let s=this.messagesToTarget.get(e),i=this.removeOld(s);return null==s&&r&&this.messagesToTarget.delete(e),i}removeAllOld(){let e=[];return this.messagesToTarget.forEach((r,s,i)=>{e.push(s)}),e.forEach(r=>{this.getMessages(r,!1)}),this}removeOld(e){if(void 0===e)return;let r=Date.now(),s=e.findIndex(a=>a.time+this.messagesTimeoutMs>r),i=e;return s>0&&(i=e.splice(0,s)),i}sendMessage(e){this.handlers.forEach((s,i,a)=>{s(e)});let r=this.targetHandlers.get(e.target);r&&r.forEach(s=>{s.handler(e)})}addHandler(e){let r=this.newId();this.handlers.set(r,e);let s=this;return{unsubscribe(){s.removeHandler(r)}}}addTargetHandler(e,r){let s=this.newId(),i=this.targetHandlers.get(e);null==i&&(i=[],this.targetHandlers.set(e,i)),i.push(Ie.builder().setId(s).setHandler(r));let a=this;return{unsubscribe(){a.removeTargetHandler(e,s)}}}removeAllTargetHandlers(e){return this.targetHandlers.delete(e),this}removeHandler(e){this.handlers.delete(e)}removeTargetHandler(e,r){let s=this.targetHandlers.get(e);if(s){let i=s.filter((a,o,l)=>a.id!=r);i.length?this.targetHandlers.set(e,i):this.targetHandlers.delete(e)}}}class Fe{subscription;bean;ctor;validator;constructor(e,r,s,i){this.subscription=e,this.bean=r,this.ctor=s,this.validator=i}static builder(){return new Fe(null,null,null,null)}validate(){return this.validator&&this.validator(),this}resubscribe(e){return this.unsubscribe(),this.bean=e.getBeanByCtorOrNull(this.ctor),this.subscription=e.subscribeBeanByCtor(this.ctor,r=>{this.bean=r,this.validate()}),this}unsubscribe(){this.subscription?.unsubscribe(),this.subscription&&(this.subscription=null)}setSubscription(e){return this.subscription=e,this}setBean(e){return this.bean=e,this}setCtor(e){return this.ctor=e,this}setValidator(e){return this.validator=e,this}activate(){if(!this.bean)throw new Error("\u041d\u0435\u0442 \u0431\u0438\u043d\u0430 \u0434\u043b\u044f \u0430\u043a\u0442\u0438\u0432\u0430\u0446\u0438\u0438.");this.bean.activate()}}class $t{beans=new Map;apiSvc=null;setApiSvc(e){return this.apiSvc=e,this}apiSvcCheckAndGet(){if(!this.apiSvc)throw new Error("\u041d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d API \u0441\u0435\u0440\u0432\u0438\u0441.");return this.apiSvc}addBeanCtors(...e){return e.forEach(r=>{if(!r.name)throw new Error("\u041d\u0435\u0442 \u0438\u043c\u0435\u043d\u0438 \u043a\u043b\u0430\u0441\u0441\u0430.");const s=Fe.builder().setCtor(r).setValidator(()=>this.validate());this.apiSvc&&s.resubscribe(this.apiSvc),this.beans.set(s.ctor,s)}),this}getBeanByCtor(e){let r=this.beans.get(e);if(null==r)throw new Error("\u0411\u0438\u043d \u043d\u0435 \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d \u0441 \u0438\u043c\u0435\u043d\u0435\u043c: "+e.name);return r.bean}reconstruct(){const e=this.apiSvcCheckAndGet();this.beans.forEach(r=>{r.resubscribe(e)})}validate(){[...this.beans.keys()].map(r=>null!=this.beans.get(r)?.bean).reduce((r,s)=>r&&s,!0)&&this.onValid()}onValid(){}dependencies(){return[...this.beans.keys()].map(e=>this.beans.get(e)).filter(e=>null!=e).map(e=>e.ctor)}construct(e){return this.setApiSvc(e),this.reconstruct(),this}activate(){return this}deactivate(){return this}deconstruct(){return this}}let Jt=(()=>{class t extends $t{static currentEnvironmentValue=null;static setCurrentEnvironment(r){t.currentEnvironmentValue=r}static currentEnvironment(r){return t.currentEnvironmentValue?t.currentEnvironmentValue:r}breakpoints=null;debugPositionsToLineMap=null;debugScriptRunning=!1;debugVar=null;cache=new Map;tsLibs=null;jses5pLibs=null;tspLibs=null;environment=t.currentEnvironment(Vt);themeName=this.environment.themeName;serviceAPIHost=this.environment.serviceAPIHost;staticDataHost=this.environment.staticDataHost;redirectToServerAfterItIsReadyAdress=this.environment.redirectToServerAfterItIsReadyAdress;portAutoDetection=this.environment.portAutoDetection;portAutoIncrementValue=this.environment.portAutoIncrementValue;messageBus=new Xt;alerts=[];pageLoadedFrom="";authId="";authIdKey="authId";authBody="";baseHref="";waitingIOOperationCount=0;waitingIOOperationValue=0;waitingIOOperationValueMax=100;outletOnly=!1;autoLoginApplication=!0;defaultApplication="";defaultLoginType="login";showType=this.defaultLoginType;enableDefaultPersons=!0;production=this.environment.production;coding=this.environment.coding;showOldVersions=this.environment.showOldVersions;show3D=this.environment.show3D;oldVersionsName=this.environment.oldVersionsName;useDictionaries=this.environment.useDictionaries;useIFrameLang=this.environment.useIFrameLang;usePlotlyLang=this.environment.usePlotlyLang;useReactLang=this.environment.useReactLang;useBootstrapLang=this.environment.useBootstrapLang;useHtmlLang=this.environment.useHtmlLang;useCJsLang=this.environment.useCJsLang;usePegJsLang=this.environment.usePegJsLang;useSqlLang=this.environment.useSqlLang;useJsLang=this.environment.useJsLang;useTsLang=this.environment.useTsLang;useTsPLang=this.environment.useTsPLang;useTsPpLang=this.environment.useTsPpLang;useCyrillicLang=this.environment.useCyrillicLang;useMenuExamplesEx=this.environment.useMenuExamplesEx;useBookmarkLinks=this.environment.useBookmarkLinks;dictionaries=null;useLocalStorage=this.environment.useLocalStorage;csNumbersDefault=this.environment.csNumbersDefault;setDictionaries(r){return this.dictionaries=r,this}setTsLibs(r){return this.tsLibs=r,this}setJses5pLibs(r){return this.jses5pLibs=r,this}isProduction(){return this.production}isDebug(){return!this.production}logMessage(r){return this.logObjects(r)}logObjects(...r){if(!this.isProduction())return console.log(...r),this}isShowLogin(){return this.showType==this.defaultLoginType}isShowNormal(){return"normal"==this.showType}isUseDictionaries(){return this.useDictionaries}setShowNormal(){return this.showType="normal",this}setShowLogin(r=null){return null!=r&&(this.autoLoginApplication=r),this.showType=this.defaultLoginType,this}get version(){return this.environment.version}get developerId(){let r="";return this.environment.developers.forEach(s=>{r=r+(r?"_":"")+s.id}),r}get developerName(){let r="";return this.environment.developers.forEach(s=>{r=r+(r?", ":"")+s.name}),r}get developerNameSortOrder(){let r="";return this.environment.developers.forEach(s=>{r=r+(r?", ":"")+s.nameSortOrder}),r}get developerLink(){return this.environment.developers[0].link}get developerSemail(){return this.environment.developers[0].semail}getDeveloperSemail(r){let s=this.environment.developers.filter(i=>i.id==r);return s.length>0?s[0].semail:this.developerSemail}setPageLoadedFrom(r,s=!1){return this.pageLoadedFrom=r,s&&this.runPortAutoDetection(),this.setupBaseHref(),this}constructor(){super(),typeof pageLoadedFrom<"u"&&this.setPageLoadedFrom(pageLoadedFrom),this.runPortAutoDetection(),this.setupBaseHref()}setupBaseHref(){let r=this.pageLoadedFrom;r.endsWith("/")&&(r=r.substring(0,r.length-1)),this.baseHref=r}runPortAutoDetection(){this.portAutoDetection&&(this.serviceAPIHost=this.doPortAutoDetection(this.serviceAPIHost?this.serviceAPIHost:this.pageLoadedFrom),this.redirectToServerAfterItIsReadyAdress=this.doPortAutoDetection(this.redirectToServerAfterItIsReadyAdress))}doPortAutoDetection(r){const s=r.lastIndexOf(":");if(s<0)return r;let i="";for(let l=s+1;l<r.length&&"0123456789".indexOf(r.charAt(l))>=0;++l)i+=r.charAt(l);return isNaN(+i)?r:r.substring(0,s)+":"+(+location.port+this.environment.portAutoIncrementValue)+r.substring(s+1+i.length,r.length)}addAlert(r){r.setConfig(this),this.alerts.push(r),this.post(()=>{window?.scrollTo(0,0)},50)}removeAlert(r){const s=this.alerts.findIndex((i,a,o)=>i===r);s>=0&&this.alerts.splice(s,1)}isPlatformAndroid(){return"Android"===this.environment.platform}isPlatformWeb(){return"Web"===this.environment.platform}isPlatform(r){return this.environment.platform===r}isRelativeCacheService(){return this.environment.relativeCacheService}isRestServerType(){return"rest"===this.environment.serverType}isMemoryServerType(){return"memory"===this.environment.serverType}isServerType(r){return this.environment.serverType===r}isRedTheme(){return"red"===this.themeName}isBlueTheme(){return"blue"===this.themeName}isTheme(r){return this.themeName===r}isWaitingIO(){return this.waitingIOOperationCount>0}incWaitingIO(){return this.waitingIOOperationCount++}decWaitingIO(){return this.waitingIOOperationCount--}clearWaitingIO(){this.waitingIOOperationCount=0}post(r,s=0){setTimeout(()=>{r()},s||void 0)}getApplications(){return this.environment.applications.filter(r=>r.applicationEnabled&&!r.applicationHidden||r.applicationDirect)}getApplication(){let r=null;return this.getApplications().forEach(s=>{s.id==this.defaultApplication&&(r=s)}),r}getApplicationByNameOrNull(r){let s=null;return this.getApplications().forEach(i=>{(i.name==r||i.id==r)&&(s=i)}),s}getSingleAppOrNull(){let r=null,s=this.getApplications();return 1==s.length&&(r=s[0]),r}}return t})();I=U.hmd(I);let ue=null,j=new class Yt extends Ot{cacheService=null;constructor(e=null){super(e)}getCacheService(){return this.cacheService}setCacheService(e){return this.cacheService=e,this}post(e,r){switch(r.type){case Ge.TYPE:this.onLibraryInfoRequest(e,r);break;case Ct.TYPE:this.onBookInfoRequest(e,r);break;case It.TYPE:this.onBookRequest(e,r);break;case Ft.TYPE:this.onPagesRequest(e,r);break;default:throw new Error(`Unknown message type: ${r.type}.`)}return this}onLibraryInfoRequest(e,r){let s=Ht.builder().setCallbackId(r.id);if(r.bodies){let i=r.bodies;i.forEach((a,o)=>{this.loadLibraryInfo(r,a,o,s,a.libraryType+"/"+a.libraryRef+".library.txt",l=>{s.bodies.length==i.length&&this.send(e,s)})})}else this.send(e,s)}loadLibraryInfo(e,r,s,i,a,o=null){let l=this.cacheService.getRestPoint(a,null);this.cacheService.getTextRestcallUrl(l,c=>{i.bodies.push(De.builder().setMetaContent(c||"").setLibraryRef(r.libraryRef)),o&&o(!!c)})}onBookInfoRequest(e,r){let s=Bt.builder().setCallbackId(r.id);r.bookRef?this.loadBookInfo(r,s,r.libraryType+"/"+r.bookRef+".book.txt",i=>{this.send(e,s)}):this.send(e,s)}loadBookInfo(e,r,s,i=null){let a=this.cacheService.getRestPoint(s,null);this.cacheService.getTextRestcallUrl(a,o=>{r.setMetaContent(o||"").setBookRef(e.bookRef),i&&i(!!o)})}onBookRequest(e,r){let s=Nt.builder().setCallbackId(r.id),i=r.languages.map(a=>a);i.length||i.push("CS","Sinodal"),i=i.map(a=>ee.merge("/"+r.libraryType,r.bookRef+"_"+a+"/index.txt")),r.bookRef?this.runAll(i,(a,o)=>{this.loadBookPath(r,s,a,o)},a=>{this.send(e,s)}):this.send(e,s)}loadBookPath(e,r,s,i=null){let a=this.cacheService.getRestPoint(s,null);this.cacheService.getTextRestcallUrl(a,o=>{r.addMetaBook(Me.builder().setBookRef(e.bookRef).setPath(s).setContent(o||"")),i&&i(!!o)})}onPagesRequest(e,r){let s=xt.builder().setCallbackId(r.id);this.runAll(r.pages,(i,a)=>{let o=this.findPathPrefix(i.bookPath),l=this.cacheService.getRestPoint(ee.merge(o,i.bookPage),null);this.cacheService.getTextRestcallUrl(l,c=>{s.addPage(c||""),a(!0)})},i=>{this.send(e,s)})}findPathPrefix(e){let r=e.lastIndexOf("/");return e.substring(0,r)}}((t,e)=>{postMessage(t?W.builder().setWorkerId(t.workerId).setMessage(e):e)}),st=new Jt;j.setCacheService(new class Ut{config;sRestPoint;textCache=new Map;waitingTextCache=new Map;get coding(){return this.config.coding}get restPoint(){return this.coding?"/staticb":this.sRestPoint}constructor(e,r="/static"){this.config=e,this.sRestPoint=r}getRestPoint(e,r,s=null){const i=this.config.staticDataHost.startsWith("http://")||this.config.staticDataHost.startsWith("https://");let a=i?this.config.staticDataHost:this.config.isRelativeCacheService()||this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return!i&&this.config.staticDataHost&&(a=ee.merge(a,this.config.staticDataHost)),ee.merge(ee.merge(r||a,s??this.restPoint),e)}completeOnDone(e,r){let s=this.waitingTextCache.get(e);s&&(s.forEach(i=>{this.config.post(()=>{i&&i(r)})}),this.waitingTextCache.delete(e))}getTextRestcallUrl(e,r){if(this.coding){if(this.textCache.has(e)){let s=this.textCache.get(e);if(null!=s)return void this.config.post(()=>{r&&r(s)})}return this.waitingTextCache.has(e)?void(r&&this.waitingTextCache.get(e).push(r)):(r&&this.waitingTextCache.set(e,[r]),this.getBinRestcallUrlRaw(e,s=>{if(s){let i=new Uint8Array(s),a=Ze.fromByteArray(i);this.completeOnDone(e,a)}else r&&r(null)}))}return this.getTextRestcallUrlRaw(e,r)}getTextRestcallUrlRaw(e,r){if(this.textCache.has(e)){let i=this.textCache.get(e);if(null!=i)return void this.config.post(()=>{r&&r(i)})}if(this.waitingTextCache.has(e))r&&this.waitingTextCache.get(e).push(r);else{r&&this.waitingTextCache.set(e,[r]);var s=new XMLHttpRequest;s.onload=()=>{if(r){let i=4===s.readyState&&200===s.status?s.responseText:null;null!=i?this.textCache.set(e,i):this.textCache.delete(e),this.completeOnDone(e,i)}},s.open("get",e,!0),s.send()}}getBinRestcallUrlRaw(e,r,s=!0){let i=e;if(this.coding){let o=i.lastIndexOf(".");o>=0&&(i=i.substring(0,o)+".bin")}var a=new XMLHttpRequest;a.onload=()=>{if(r){let l=new Uint8Array(4===a.readyState&&200===a.status?a.response:null),c=s?Ze.dtr(l,-1):l;r&&r(c)}},a.open("get",i,!0),a.responseType="arraybuffer",a.send()}}(st));let nt=!1,it=!1;addEventListener("message",({data:t})=>{let e=t;if("string"==typeof e.message){const r=`worker response to ${t}`;postMessage(W.builder().setWorkerId(e.workerId).setMessage(r))}else if(e.message.type===Dt.TYPE)st.setPageLoadedFrom(e.message.pageLoadedFrom,!0);else if(e.message.type===Pe.TYPE){let r=()=>{if(u&&u._Calculate){let s=e.message;const i=2048,a=u._malloc(i),o=20480,l=u._malloc(o);ae(s.formula,u.HEAP8,a,i),u._Calculate(a,o,l);const c=V(u.HEAP8,l,o);u._free(l),u._free(a),postMessage(W.builder().setWorkerId(e.workerId).setMessage(Pe.builder().setFormula(c)))}else postMessage(W.builder().setWorkerId(e.workerId).setMessage(Pe.builder().setFormula("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e. \u0415\u0449\u0451 \u0438\u0434\u0451\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..")))};nt?r():j.getCacheService()?.getBinRestcallUrlRaw(j.getCacheService()?.getRestPoint("data/memorial.bin"),s=>{if(null!=s){const i=s.byteLength,a=u._malloc(i);u.HEAP8.set(s,a),u._Setup(a,i),u._free(a),nt=!0,r()}},j.getCacheService()?.coding)}else if(e.message.type===Le.TYPE){let r=()=>{if(u&&u._ChessCalculate){let s=e.message;const i=2048,a=u._malloc(i),o=20480,l=u._malloc(o);ae(s.commands,u.HEAP8,a,i),ue=e,u._ChessCalculate(a,o,l),ue=null,V(u.HEAP8,l,o),u._free(l),u._free(a)}else postMessage(W.builder().setWorkerId(e.workerId).setResult(Le.builder().setResult(e.gameId,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e. \u0415\u0449\u0451 \u0438\u0434\u0451\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..")))};it?r():j.getCacheService()?.getBinRestcallUrlRaw(j.getCacheService()?.getRestPoint("data/chessapp.bin"),s=>{if(null!=s){const i=s.byteLength,a=u._malloc(i);u.HEAP8.set(s,a),u._ChessSetup(a,i),it=!0,r()}},j.getCacheService()?.coding)}else j.post(e,e.message)});var te,re,fe,u=typeof u<"u"?u:{},at=Object.assign({},u),xe=[],ce="./this.program",he=(t,e)=>{throw e},ot="object"==typeof window,K="function"==typeof importScripts,de="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,B="";if(de){var Ne=U(1653),Be=U(1633);B=K?Be.dirname(B)+"/":__dirname+"/",te=(t,e)=>(t=ge(t)?new URL(t):Be.normalize(t),Ne.readFileSync(t,e?void 0:"utf8")),fe=t=>{var e=te(t,!0);return e.buffer||(e=new Uint8Array(e)),e},re=(t,e,r,s=!0)=>{t=ge(t)?new URL(t):Be.normalize(t),Ne.readFile(t,s?void 0:"utf8",(i,a)=>{i?r(i):e(s?a.buffer:a)})},!u.thisProgram&&process.argv.length>1&&(ce=process.argv[1].replace(/\\/g,"/")),xe=process.argv.slice(2),I.exports=u,process.on("uncaughtException",t=>{if(!("unwind"===t||t instanceof ye||t.context instanceof ye))throw t}),he=(t,e)=>{throw process.exitCode=t,e},u.inspect=()=>"[Emscripten Module object]"}else(ot||K)&&(K?B=self.location.href:typeof document<"u"&&document.currentScript&&(B=document.currentScript.src),B=0!==B.indexOf("blob:")?B.substr(0,B.replace(/[?#].*/,"").lastIndexOf("/")+1):"",te=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},K&&(fe=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),re=(t,e,r)=>{var s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.onload=()=>{200==s.status||0==s.status&&s.response?e(s.response):r()},s.onerror=r,s.send(null)});var se,He=u.print||console.log.bind(console),q=u.printErr||console.error.bind(console);Object.assign(u,at),at=null,u.arguments&&(xe=u.arguments),u.thisProgram&&(ce=u.thisProgram),u.quit&&(he=u.quit),u.wasmBinary&&(se=u.wasmBinary),"object"!=typeof WebAssembly&&Z("no native wasm support detected");var pe,me,D,J,ne,g,S,Oe=!1;function lt(){var t=pe.buffer;u.HEAP8=D=new Int8Array(t),u.HEAP16=ne=new Int16Array(t),u.HEAPU8=J=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAP32=g=new Int32Array(t),u.HEAPU32=S=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=new Float64Array(t)}var ut=[],ct=[],rr=[],ht=[],G=0,Ue=null,ie=null;function Ye(t){G++,u.monitorRunDependencies&&u.monitorRunDependencies(G)}function ve(t){if(G--,u.monitorRunDependencies&&u.monitorRunDependencies(G),0==G&&(null!==Ue&&(clearInterval(Ue),Ue=null),ie)){var e=ie;ie=null,e()}}function Z(t){throw u.onAbort&&u.onAbort(t),q(t="Aborted("+t+")"),Oe=!0,me=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}var Q,v,A,dt=t=>t.startsWith("data:application/octet-stream;base64,"),ge=t=>t.startsWith("file://");function ft(t){if(t==Q&&se)return new Uint8Array(se);if(fe)return fe(t);throw"both async and sync fetching of the wasm failed"}function pt(t,e,r){return function dr(t){if(!se&&(ot||K)){if("function"==typeof fetch&&!ge(t))return fetch(t,{credentials:"same-origin"}).then(e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()}).catch(()=>ft(t));if(re)return new Promise((e,r)=>{re(t,s=>e(new Uint8Array(s)),r)})}return Promise.resolve().then(()=>ft(t))}(t).then(s=>WebAssembly.instantiate(s,e)).then(s=>s).then(r,s=>{q(`failed to asynchronously prepare wasm: ${s}`),Z(s)})}function ye(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}dt(Q="mathapp.wasm")||(Q=function Kt(t){return u.locateFile?u.locateFile(t,B):B+t}(Q));var we=t=>{for(;t.length>0;)t.shift()(u)},vr=u.noExitRuntime||!0,mt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,V=(t,e,r)=>{for(var s=e+r,i=e;t[i]&&!(i>=s);)++i;if(i-e>16&&t.buffer&&mt)return mt.decode(t.subarray(e,i));for(var a="";e<i;){var o=t[e++];if(128&o){var l=63&t[e++];if(192!=(224&o)){var c=63&t[e++];if((o=224==(240&o)?(15&o)<<12|l<<6|c:(7&o)<<18|l<<12|c<<6|63&t[e++])<65536)a+=String.fromCharCode(o);else{var d=o-65536;a+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else a+=String.fromCharCode((31&o)<<6|l)}else a+=String.fromCharCode(o)}return a},X=(t,e)=>t?V(J,t,e):"";function yr(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(e){S[this.ptr+4>>2]=e},this.get_type=function(){return S[this.ptr+4>>2]},this.set_destructor=function(e){S[this.ptr+8>>2]=e},this.get_destructor=function(){return S[this.ptr+8>>2]},this.set_caught=function(e){D[this.ptr+12|0]=e=e?1:0},this.get_caught=function(){return 0!=D[this.ptr+12|0]},this.set_rethrown=function(e){D[this.ptr+13|0]=e=e?1:0},this.get_rethrown=function(){return 0!=D[this.ptr+13|0]},this.init=function(e,r){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(r)},this.set_adjusted_ptr=function(e){S[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return S[this.ptr+16>>2]},this.get_exception_ptr=function(){if(Rt(this.get_type()))return S[this.excPtr>>2];var r=this.get_adjusted_ptr();return 0!==r?r:this.excPtr}}var k={isAbs:t=>"/"===t.charAt(0),splitPath:t=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1),normalizeArray:(t,e)=>{for(var r=0,s=t.length-1;s>=0;s--){var i=t[s];"."===i?t.splice(s,1):".."===i?(t.splice(s,1),r++):r&&(t.splice(s,1),r--)}if(e)for(;r;r--)t.unshift("..");return t},normalize:t=>{var e=k.isAbs(t),r="/"===t.substr(-1);return!(t=k.normalizeArray(t.split("/").filter(s=>!!s),!e).join("/"))&&!e&&(t="."),t&&r&&(t+="/"),(e?"/":"")+t},dirname:t=>{var e=k.splitPath(t),r=e[0],s=e[1];return r||s?(s&&(s=s.substr(0,s.length-1)),r+s):"."},basename:t=>{if("/"===t)return"/";var e=(t=(t=k.normalize(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)},join:function(){var t=Array.prototype.slice.call(arguments);return k.normalize(t.join("/"))},join2:(t,e)=>k.normalize(t+"/"+e)},gt=t=>(gt=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return s=>crypto.getRandomValues(s);if(de)try{var t=U(231);if(t.randomFillSync)return s=>t.randomFillSync(s);var r=t.randomBytes;return s=>(s.set(r(s.byteLength)),s)}catch{}Z("initRandomDevice")})())(t),z={resolve:function(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var s=r>=0?arguments[r]:n.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");if(!s)return"";t=s+"/"+t,e=k.isAbs(s)}return(e?"/":"")+(t=k.normalizeArray(t.split("/").filter(i=>!!i),!e).join("/"))||"."},relative:(t,e)=>{function r(d){for(var w=0;w<d.length&&""===d[w];w++);for(var E=d.length-1;E>=0&&""===d[E];E--);return w>E?[]:d.slice(w,E-w+1)}t=z.resolve(t).substr(1),e=z.resolve(e).substr(1);for(var s=r(t.split("/")),i=r(e.split("/")),a=Math.min(s.length,i.length),o=a,l=0;l<a;l++)if(s[l]!==i[l]){o=l;break}var c=[];for(l=o;l<s.length;l++)c.push("..");return(c=c.concat(i.slice(o))).join("/")}},ze=[],be=t=>{for(var e=0,r=0;r<t.length;++r){var s=t.charCodeAt(r);s<=127?e++:s<=2047?e+=2:s>=55296&&s<=57343?(e+=4,++r):e+=3}return e},ae=(t,e,r,s)=>{if(!(s>0))return 0;for(var i=r,a=r+s-1,o=0;o<t.length;++o){var l=t.charCodeAt(o);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&t.charCodeAt(++o)),l<=127){if(r>=a)break;e[r++]=l}else if(l<=2047){if(r+1>=a)break;e[r++]=192|l>>6,e[r++]=128|63&l}else if(l<=65535){if(r+2>=a)break;e[r++]=224|l>>12,e[r++]=128|l>>6&63,e[r++]=128|63&l}else{if(r+3>=a)break;e[r++]=240|l>>18,e[r++]=128|l>>12&63,e[r++]=128|l>>6&63,e[r++]=128|63&l}}return e[r]=0,r-i};function Ee(t,e,r){var s=r>0?r:be(t)+1,i=new Array(s),a=ae(t,i,0,i.length);return e&&(i.length=a),i}var wt,$={ttys:[],init(){},shutdown(){},register(t,e){$.ttys[t]={input:[],output:[],ops:e},n.registerDevice(t,$.stream_ops)},stream_ops:{open(t){var e=$.ttys[t.node.rdev];if(!e)throw new n.ErrnoError(43);t.tty=e,t.seekable=!1},close(t){t.tty.ops.fsync(t.tty)},fsync(t){t.tty.ops.fsync(t.tty)},read(t,e,r,s,i){if(!t.tty||!t.tty.ops.get_char)throw new n.ErrnoError(60);for(var a=0,o=0;o<s;o++){var l;try{l=t.tty.ops.get_char(t.tty)}catch{throw new n.ErrnoError(29)}if(void 0===l&&0===a)throw new n.ErrnoError(6);if(null==l)break;a++,e[r+o]=l}return a&&(t.node.timestamp=Date.now()),a},write(t,e,r,s,i){if(!t.tty||!t.tty.ops.put_char)throw new n.ErrnoError(60);try{for(var a=0;a<s;a++)t.tty.ops.put_char(t.tty,e[r+a])}catch{throw new n.ErrnoError(29)}return s&&(t.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:t=>(()=>{if(!ze.length){var t=null;if(de){var r=Buffer.alloc(256),s=0,i=process.stdin.fd;try{s=Ne.readSync(i,r)}catch(a){if(!a.toString().includes("EOF"))throw a;s=0}t=s>0?r.slice(0,s).toString("utf-8"):null}else typeof window<"u"&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;ze=Ee(t,!0)}return ze.shift()})(),put_char(t,e){null===e||10===e?(He(V(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},fsync(t){t.output&&t.output.length>0&&(He(V(t.output,0)),t.output=[])},ioctl_tcgets:t=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(t,e,r)=>0,ioctl_tiocgwinsz:t=>[24,80]},default_tty1_ops:{put_char(t,e){null===e||10===e?(q(V(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},fsync(t){t.output&&t.output.length>0&&(q(V(t.output,0)),t.output=[])}}},yt=t=>{t=((t,e)=>65536*Math.ceil(t/65536))(t);var e=At(65536,t);return e?((t,e)=>(J.fill(0,t,t+e),t))(e,t):0},y={ops_table:null,mount:t=>y.createNode(null,"/",16895,0),createNode(t,e,r,s){if(n.isBlkdev(r)||n.isFIFO(r))throw new n.ErrnoError(63);y.ops_table||(y.ops_table={dir:{node:{getattr:y.node_ops.getattr,setattr:y.node_ops.setattr,lookup:y.node_ops.lookup,mknod:y.node_ops.mknod,rename:y.node_ops.rename,unlink:y.node_ops.unlink,rmdir:y.node_ops.rmdir,readdir:y.node_ops.readdir,symlink:y.node_ops.symlink},stream:{llseek:y.stream_ops.llseek}},file:{node:{getattr:y.node_ops.getattr,setattr:y.node_ops.setattr},stream:{llseek:y.stream_ops.llseek,read:y.stream_ops.read,write:y.stream_ops.write,allocate:y.stream_ops.allocate,mmap:y.stream_ops.mmap,msync:y.stream_ops.msync}},link:{node:{getattr:y.node_ops.getattr,setattr:y.node_ops.setattr,readlink:y.node_ops.readlink},stream:{}},chrdev:{node:{getattr:y.node_ops.getattr,setattr:y.node_ops.setattr},stream:n.chrdev_stream_ops}});var i=n.createNode(t,e,r,s);return n.isDir(i.mode)?(i.node_ops=y.ops_table.dir.node,i.stream_ops=y.ops_table.dir.stream,i.contents={}):n.isFile(i.mode)?(i.node_ops=y.ops_table.file.node,i.stream_ops=y.ops_table.file.stream,i.usedBytes=0,i.contents=null):n.isLink(i.mode)?(i.node_ops=y.ops_table.link.node,i.stream_ops=y.ops_table.link.stream):n.isChrdev(i.mode)&&(i.node_ops=y.ops_table.chrdev.node,i.stream_ops=y.ops_table.chrdev.stream),i.timestamp=Date.now(),t&&(t.contents[e]=i,t.timestamp=i.timestamp),i},getFileDataAsTypedArray:t=>t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0),expandFileStorage(t,e){var r=t.contents?t.contents.length:0;if(!(r>=e)){e=Math.max(e,r*(r<1048576?2:1.125)>>>0),0!=r&&(e=Math.max(e,256));var i=t.contents;t.contents=new Uint8Array(e),t.usedBytes>0&&t.contents.set(i.subarray(0,t.usedBytes),0)}},resizeFileStorage(t,e){if(t.usedBytes!=e)if(0==e)t.contents=null,t.usedBytes=0;else{var r=t.contents;t.contents=new Uint8Array(e),r&&t.contents.set(r.subarray(0,Math.min(e,t.usedBytes))),t.usedBytes=e}},node_ops:{getattr(t){var e={};return e.dev=n.isChrdev(t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,e.size=n.isDir(t.mode)?4096:n.isFile(t.mode)?t.usedBytes:n.isLink(t.mode)?t.link.length:0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&y.resizeFileStorage(t,e.size)},lookup(t,e){throw n.genericErrors[44]},mknod:(t,e,r,s)=>y.createNode(t,e,r,s),rename(t,e,r){if(n.isDir(t.mode)){var s;try{s=n.lookupNode(e,r)}catch{}if(s)for(var i in s.contents)throw new n.ErrnoError(55)}delete t.parent.contents[t.name],t.parent.timestamp=Date.now(),t.name=r,e.contents[r]=t,e.timestamp=t.parent.timestamp,t.parent=e},unlink(t,e){delete t.contents[e],t.timestamp=Date.now()},rmdir(t,e){var r=n.lookupNode(t,e);for(var s in r.contents)throw new n.ErrnoError(55);delete t.contents[e],t.timestamp=Date.now()},readdir(t){var e=[".",".."];for(var r in t.contents)t.contents.hasOwnProperty(r)&&e.push(r);return e},symlink(t,e,r){var s=y.createNode(t,e,41471,0);return s.link=r,s},readlink(t){if(!n.isLink(t.mode))throw new n.ErrnoError(28);return t.link}},stream_ops:{read(t,e,r,s,i){var a=t.node.contents;if(i>=t.node.usedBytes)return 0;var o=Math.min(t.node.usedBytes-i,s);if(o>8&&a.subarray)e.set(a.subarray(i,i+o),r);else for(var l=0;l<o;l++)e[r+l]=a[i+l];return o},write(t,e,r,s,i,a){if(e.buffer===D.buffer&&(a=!1),!s)return 0;var o=t.node;if(o.timestamp=Date.now(),e.subarray&&(!o.contents||o.contents.subarray)){if(a)return o.contents=e.subarray(r,r+s),o.usedBytes=s,s;if(0===o.usedBytes&&0===i)return o.contents=e.slice(r,r+s),o.usedBytes=s,s;if(i+s<=o.usedBytes)return o.contents.set(e.subarray(r,r+s),i),s}if(y.expandFileStorage(o,i+s),o.contents.subarray&&e.subarray)o.contents.set(e.subarray(r,r+s),i);else for(var l=0;l<s;l++)o.contents[i+l]=e[r+l];return o.usedBytes=Math.max(o.usedBytes,i+s),s},llseek(t,e,r){var s=e;if(1===r?s+=t.position:2===r&&n.isFile(t.node.mode)&&(s+=t.node.usedBytes),s<0)throw new n.ErrnoError(28);return s},allocate(t,e,r){y.expandFileStorage(t.node,e+r),t.node.usedBytes=Math.max(t.node.usedBytes,e+r)},mmap(t,e,r,s,i){if(!n.isFile(t.node.mode))throw new n.ErrnoError(43);var a,o,l=t.node.contents;if(2&i||l.buffer!==D.buffer){if((r>0||r+e<l.length)&&(l=l.subarray?l.subarray(r,r+e):Array.prototype.slice.call(l,r,r+e)),o=!0,!(a=yt(e)))throw new n.ErrnoError(48);D.set(l,a)}else o=!1,a=l.byteOffset;return{ptr:a,allocated:o}},msync:(t,e,r,s,i)=>(y.stream_ops.write(t,e,0,s,r,!1),0)}},Pr=u.preloadPlugins||[],We=(t,e)=>{var r=0;return t&&(r|=365),e&&(r|=146),r},n={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(t,e={}){if(!(t=z.resolve(t)))return{path:"",node:null};if((e=Object.assign({follow_mount:!0,recurse_count:0},e)).recurse_count>8)throw new n.ErrnoError(32);for(var s=t.split("/").filter(E=>!!E),i=n.root,a="/",o=0;o<s.length;o++){var l=o===s.length-1;if(l&&e.parent)break;if(i=n.lookupNode(i,s[o]),a=k.join2(a,s[o]),n.isMountpoint(i)&&(!l||l&&e.follow_mount)&&(i=i.mounted.root),!l||e.follow)for(var c=0;n.isLink(i.mode);){var d=n.readlink(a);if(a=z.resolve(k.dirname(a),d),i=n.lookupPath(a,{recurse_count:e.recurse_count+1}).node,c++>40)throw new n.ErrnoError(32)}}return{path:a,node:i}},getPath(t){for(var e;;){if(n.isRoot(t)){var r=t.mount.mountpoint;return e?"/"!==r[r.length-1]?`${r}/${e}`:r+e:r}e=e?`${t.name}/${e}`:t.name,t=t.parent}},hashName(t,e){for(var r=0,s=0;s<e.length;s++)r=(r<<5)-r+e.charCodeAt(s)|0;return(t+r>>>0)%n.nameTable.length},hashAddNode(t){var e=n.hashName(t.parent.id,t.name);t.name_next=n.nameTable[e],n.nameTable[e]=t},hashRemoveNode(t){var e=n.hashName(t.parent.id,t.name);if(n.nameTable[e]===t)n.nameTable[e]=t.name_next;else for(var r=n.nameTable[e];r;){if(r.name_next===t){r.name_next=t.name_next;break}r=r.name_next}},lookupNode(t,e){var r=n.mayLookup(t);if(r)throw new n.ErrnoError(r,t);for(var s=n.hashName(t.id,e),i=n.nameTable[s];i;i=i.name_next)if(i.parent.id===t.id&&i.name===e)return i;return n.lookup(t,e)},createNode(t,e,r,s){var i=new n.FSNode(t,e,r,s);return n.hashAddNode(i),i},destroyNode(t){n.hashRemoveNode(t)},isRoot:t=>t===t.parent,isMountpoint:t=>!!t.mounted,isFile:t=>32768==(61440&t),isDir:t=>16384==(61440&t),isLink:t=>40960==(61440&t),isChrdev:t=>8192==(61440&t),isBlkdev:t=>24576==(61440&t),isFIFO:t=>4096==(61440&t),isSocket:t=>!(49152&~t),flagsToPermissionString(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},nodePermissions:(t,e)=>n.ignorePermissions?0:e.includes("r")&&!(292&t.mode)||e.includes("w")&&!(146&t.mode)||e.includes("x")&&!(73&t.mode)?2:0,mayLookup:t=>n.nodePermissions(t,"x")||(t.node_ops.lookup?0:2),mayCreate(t,e){try{return n.lookupNode(t,e),20}catch{}return n.nodePermissions(t,"wx")},mayDelete(t,e,r){var s;try{s=n.lookupNode(t,e)}catch(a){return a.errno}var i=n.nodePermissions(t,"wx");if(i)return i;if(r){if(!n.isDir(s.mode))return 54;if(n.isRoot(s)||n.getPath(s)===n.cwd())return 10}else if(n.isDir(s.mode))return 31;return 0},mayOpen:(t,e)=>t?n.isLink(t.mode)?32:n.isDir(t.mode)&&("r"!==n.flagsToPermissionString(e)||512&e)?31:n.nodePermissions(t,n.flagsToPermissionString(e)):44,MAX_OPEN_FDS:4096,nextfd(){for(var t=0;t<=n.MAX_OPEN_FDS;t++)if(!n.streams[t])return t;throw new n.ErrnoError(33)},getStreamChecked(t){var e=n.getStream(t);if(!e)throw new n.ErrnoError(8);return e},getStream:t=>n.streams[t],createStream:(t,e=-1)=>(n.FSStream||(n.FSStream=function(){this.shared={}},n.FSStream.prototype={},Object.defineProperties(n.FSStream.prototype,{object:{get(){return this.node},set(r){this.node=r}},isRead:{get(){return 1!=(2097155&this.flags)}},isWrite:{get(){return!!(2097155&this.flags)}},isAppend:{get(){return 1024&this.flags}},flags:{get(){return this.shared.flags},set(r){this.shared.flags=r}},position:{get(){return this.shared.position},set(r){this.shared.position=r}}})),t=Object.assign(new n.FSStream,t),-1==e&&(e=n.nextfd()),t.fd=e,n.streams[e]=t,t),closeStream(t){n.streams[t]=null},chrdev_stream_ops:{open(t){var e=n.getDevice(t.node.rdev);t.stream_ops=e.stream_ops,t.stream_ops.open&&t.stream_ops.open(t)},llseek(){throw new n.ErrnoError(70)}},major:t=>t>>8,minor:t=>255&t,makedev:(t,e)=>t<<8|e,registerDevice(t,e){n.devices[t]={stream_ops:e}},getDevice:t=>n.devices[t],getMounts(t){for(var e=[],r=[t];r.length;){var s=r.pop();e.push(s),r.push.apply(r,s.mounts)}return e},syncfs(t,e){"function"==typeof t&&(e=t,t=!1),n.syncFSRequests++,n.syncFSRequests>1&&q(`warning: ${n.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var r=n.getMounts(n.root.mount),s=0;function i(o){return n.syncFSRequests--,e(o)}function a(o){if(o)return a.errored?void 0:(a.errored=!0,i(o));++s>=r.length&&i(null)}r.forEach(o=>{if(!o.type.syncfs)return a(null);o.type.syncfs(o,t,a)})},mount(t,e,r){var a,s="/"===r,i=!r;if(s&&n.root)throw new n.ErrnoError(10);if(!s&&!i){var o=n.lookupPath(r,{follow_mount:!1});if(r=o.path,n.isMountpoint(a=o.node))throw new n.ErrnoError(10);if(!n.isDir(a.mode))throw new n.ErrnoError(54)}var l={type:t,opts:e,mountpoint:r,mounts:[]},c=t.mount(l);return c.mount=l,l.root=c,s?n.root=c:a&&(a.mounted=l,a.mount&&a.mount.mounts.push(l)),c},unmount(t){var e=n.lookupPath(t,{follow_mount:!1});if(!n.isMountpoint(e.node))throw new n.ErrnoError(28);var r=e.node,s=r.mounted,i=n.getMounts(s);Object.keys(n.nameTable).forEach(o=>{for(var l=n.nameTable[o];l;){var c=l.name_next;i.includes(l.mount)&&n.destroyNode(l),l=c}}),r.mounted=null;var a=r.mount.mounts.indexOf(s);r.mount.mounts.splice(a,1)},lookup:(t,e)=>t.node_ops.lookup(t,e),mknod(t,e,r){var i=n.lookupPath(t,{parent:!0}).node,a=k.basename(t);if(!a||"."===a||".."===a)throw new n.ErrnoError(28);var o=n.mayCreate(i,a);if(o)throw new n.ErrnoError(o);if(!i.node_ops.mknod)throw new n.ErrnoError(63);return i.node_ops.mknod(i,a,e,r)},create:(t,e)=>(e=void 0!==e?e:438,e&=4095,n.mknod(t,e|=32768,0)),mkdir:(t,e)=>(e=void 0!==e?e:511,e&=1023,n.mknod(t,e|=16384,0)),mkdirTree(t,e){for(var r=t.split("/"),s="",i=0;i<r.length;++i)if(r[i]){s+="/"+r[i];try{n.mkdir(s,e)}catch(a){if(20!=a.errno)throw a}}},mkdev:(t,e,r)=>(typeof r>"u"&&(r=e,e=438),n.mknod(t,e|=8192,r)),symlink(t,e){if(!z.resolve(t))throw new n.ErrnoError(44);var s=n.lookupPath(e,{parent:!0}).node;if(!s)throw new n.ErrnoError(44);var i=k.basename(e),a=n.mayCreate(s,i);if(a)throw new n.ErrnoError(a);if(!s.node_ops.symlink)throw new n.ErrnoError(63);return s.node_ops.symlink(s,i,t)},rename(t,e){var l,c,r=k.dirname(t),s=k.dirname(e),i=k.basename(t),a=k.basename(e);if(l=n.lookupPath(t,{parent:!0}).node,c=n.lookupPath(e,{parent:!0}).node,!l||!c)throw new n.ErrnoError(44);if(l.mount!==c.mount)throw new n.ErrnoError(75);var E,d=n.lookupNode(l,i),w=z.relative(t,s);if("."!==w.charAt(0))throw new n.ErrnoError(28);if("."!==(w=z.relative(e,r)).charAt(0))throw new n.ErrnoError(55);try{E=n.lookupNode(c,a)}catch{}if(d!==E){var m=n.isDir(d.mode),f=n.mayDelete(l,i,m);if(f)throw new n.ErrnoError(f);if(f=E?n.mayDelete(c,a,m):n.mayCreate(c,a))throw new n.ErrnoError(f);if(!l.node_ops.rename)throw new n.ErrnoError(63);if(n.isMountpoint(d)||E&&n.isMountpoint(E))throw new n.ErrnoError(10);if(c!==l&&(f=n.nodePermissions(l,"w")))throw new n.ErrnoError(f);n.hashRemoveNode(d);try{l.node_ops.rename(d,c,a)}catch(_){throw _}finally{n.hashAddNode(d)}}},rmdir(t){var r=n.lookupPath(t,{parent:!0}).node,s=k.basename(t),i=n.lookupNode(r,s),a=n.mayDelete(r,s,!0);if(a)throw new n.ErrnoError(a);if(!r.node_ops.rmdir)throw new n.ErrnoError(63);if(n.isMountpoint(i))throw new n.ErrnoError(10);r.node_ops.rmdir(r,s),n.destroyNode(i)},readdir(t){var r=n.lookupPath(t,{follow:!0}).node;if(!r.node_ops.readdir)throw new n.ErrnoError(54);return r.node_ops.readdir(r)},unlink(t){var r=n.lookupPath(t,{parent:!0}).node;if(!r)throw new n.ErrnoError(44);var s=k.basename(t),i=n.lookupNode(r,s),a=n.mayDelete(r,s,!1);if(a)throw new n.ErrnoError(a);if(!r.node_ops.unlink)throw new n.ErrnoError(63);if(n.isMountpoint(i))throw new n.ErrnoError(10);r.node_ops.unlink(r,s),n.destroyNode(i)},readlink(t){var r=n.lookupPath(t).node;if(!r)throw new n.ErrnoError(44);if(!r.node_ops.readlink)throw new n.ErrnoError(28);return z.resolve(n.getPath(r.parent),r.node_ops.readlink(r))},stat(t,e){var s=n.lookupPath(t,{follow:!e}).node;if(!s)throw new n.ErrnoError(44);if(!s.node_ops.getattr)throw new n.ErrnoError(63);return s.node_ops.getattr(s)},lstat:t=>n.stat(t,!0),chmod(t,e,r){var s;if(!(s="string"==typeof t?n.lookupPath(t,{follow:!r}).node:t).node_ops.setattr)throw new n.ErrnoError(63);s.node_ops.setattr(s,{mode:4095&e|-4096&s.mode,timestamp:Date.now()})},lchmod(t,e){n.chmod(t,e,!0)},fchmod(t,e){var r=n.getStreamChecked(t);n.chmod(r.node,e)},chown(t,e,r,s){var i;if(!(i="string"==typeof t?n.lookupPath(t,{follow:!s}).node:t).node_ops.setattr)throw new n.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown(t,e,r){n.chown(t,e,r,!0)},fchown(t,e,r){var s=n.getStreamChecked(t);n.chown(s.node,e,r)},truncate(t,e){if(e<0)throw new n.ErrnoError(28);var r;if(!(r="string"==typeof t?n.lookupPath(t,{follow:!0}).node:t).node_ops.setattr)throw new n.ErrnoError(63);if(n.isDir(r.mode))throw new n.ErrnoError(31);if(!n.isFile(r.mode))throw new n.ErrnoError(28);var i=n.nodePermissions(r,"w");if(i)throw new n.ErrnoError(i);r.node_ops.setattr(r,{size:e,timestamp:Date.now()})},ftruncate(t,e){var r=n.getStreamChecked(t);if(!(2097155&r.flags))throw new n.ErrnoError(28);n.truncate(r.node,e)},utime(t,e,r){var i=n.lookupPath(t,{follow:!0}).node;i.node_ops.setattr(i,{timestamp:Math.max(e,r)})},open(t,e,r){if(""===t)throw new n.ErrnoError(44);var s;if(e="string"==typeof e?(t=>{var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof r>"u")throw new Error(`Unknown file open mode: ${t}`);return r})(e):e,r=typeof r>"u"?438:r,r=64&e?4095&r|32768:0,"object"==typeof t)s=t;else{t=k.normalize(t);try{s=n.lookupPath(t,{follow:!(131072&e)}).node}catch{}}var a=!1;if(64&e)if(s){if(128&e)throw new n.ErrnoError(20)}else s=n.mknod(t,r,0),a=!0;if(!s)throw new n.ErrnoError(44);if(n.isChrdev(s.mode)&&(e&=-513),65536&e&&!n.isDir(s.mode))throw new n.ErrnoError(54);if(!a){var o=n.mayOpen(s,e);if(o)throw new n.ErrnoError(o)}512&e&&!a&&n.truncate(s,0),e&=-131713;var l=n.createStream({node:s,path:n.getPath(s),flags:e,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1});return l.stream_ops.open&&l.stream_ops.open(l),u.logReadFiles&&!(1&e)&&(n.readFiles||(n.readFiles={}),t in n.readFiles||(n.readFiles[t]=1)),l},close(t){if(n.isClosed(t))throw new n.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(e){throw e}finally{n.closeStream(t.fd)}t.fd=null},isClosed:t=>null===t.fd,llseek(t,e,r){if(n.isClosed(t))throw new n.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new n.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new n.ErrnoError(28);return t.position=t.stream_ops.llseek(t,e,r),t.ungotten=[],t.position},read(t,e,r,s,i){if(s<0||i<0)throw new n.ErrnoError(28);if(n.isClosed(t))throw new n.ErrnoError(8);if(1==(2097155&t.flags))throw new n.ErrnoError(8);if(n.isDir(t.node.mode))throw new n.ErrnoError(31);if(!t.stream_ops.read)throw new n.ErrnoError(28);var a=typeof i<"u";if(a){if(!t.seekable)throw new n.ErrnoError(70)}else i=t.position;var o=t.stream_ops.read(t,e,r,s,i);return a||(t.position+=o),o},write(t,e,r,s,i,a){if(s<0||i<0)throw new n.ErrnoError(28);if(n.isClosed(t))throw new n.ErrnoError(8);if(!(2097155&t.flags))throw new n.ErrnoError(8);if(n.isDir(t.node.mode))throw new n.ErrnoError(31);if(!t.stream_ops.write)throw new n.ErrnoError(28);t.seekable&&1024&t.flags&&n.llseek(t,0,2);var o=typeof i<"u";if(o){if(!t.seekable)throw new n.ErrnoError(70)}else i=t.position;var l=t.stream_ops.write(t,e,r,s,i,a);return o||(t.position+=l),l},allocate(t,e,r){if(n.isClosed(t))throw new n.ErrnoError(8);if(e<0||r<=0)throw new n.ErrnoError(28);if(!(2097155&t.flags))throw new n.ErrnoError(8);if(!n.isFile(t.node.mode)&&!n.isDir(t.node.mode))throw new n.ErrnoError(43);if(!t.stream_ops.allocate)throw new n.ErrnoError(138);t.stream_ops.allocate(t,e,r)},mmap(t,e,r,s,i){if(2&s&&!(2&i)&&2!=(2097155&t.flags))throw new n.ErrnoError(2);if(1==(2097155&t.flags))throw new n.ErrnoError(2);if(!t.stream_ops.mmap)throw new n.ErrnoError(43);return t.stream_ops.mmap(t,e,r,s,i)},msync:(t,e,r,s,i)=>t.stream_ops.msync?t.stream_ops.msync(t,e,r,s,i):0,munmap:t=>0,ioctl(t,e,r){if(!t.stream_ops.ioctl)throw new n.ErrnoError(59);return t.stream_ops.ioctl(t,e,r)},readFile(t,e={}){if(e.flags=e.flags||0,e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw new Error(`Invalid encoding type "${e.encoding}"`);var r,s=n.open(t,e.flags),a=n.stat(t).size,o=new Uint8Array(a);return n.read(s,o,0,a,0),"utf8"===e.encoding?r=V(o,0):"binary"===e.encoding&&(r=o),n.close(s),r},writeFile(t,e,r={}){r.flags=r.flags||577;var s=n.open(t,r.flags,r.mode);if("string"==typeof e){var i=new Uint8Array(be(e)+1),a=ae(e,i,0,i.length);n.write(s,i,0,a,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(e))throw new Error("Unsupported data type");n.write(s,e,0,e.byteLength,void 0,r.canOwn)}n.close(s)},cwd:()=>n.currentPath,chdir(t){var e=n.lookupPath(t,{follow:!0});if(null===e.node)throw new n.ErrnoError(44);if(!n.isDir(e.node.mode))throw new n.ErrnoError(54);var r=n.nodePermissions(e.node,"x");if(r)throw new n.ErrnoError(r);n.currentPath=e.path},createDefaultDirectories(){n.mkdir("/tmp"),n.mkdir("/home"),n.mkdir("/home/web_user")},createDefaultDevices(){n.mkdir("/dev"),n.registerDevice(n.makedev(1,3),{read:()=>0,write:(s,i,a,o,l)=>o}),n.mkdev("/dev/null",n.makedev(1,3)),$.register(n.makedev(5,0),$.default_tty_ops),$.register(n.makedev(6,0),$.default_tty1_ops),n.mkdev("/dev/tty",n.makedev(5,0)),n.mkdev("/dev/tty1",n.makedev(6,0));var t=new Uint8Array(1024),e=0,r=()=>(0===e&&(e=gt(t).byteLength),t[--e]);n.createDevice("/dev","random",r),n.createDevice("/dev","urandom",r),n.mkdir("/dev/shm"),n.mkdir("/dev/shm/tmp")},createSpecialDirectories(){n.mkdir("/proc");var t=n.mkdir("/proc/self");n.mkdir("/proc/self/fd"),n.mount({mount(){var e=n.createNode(t,"fd",16895,73);return e.node_ops={lookup(r,s){var a=n.getStreamChecked(+s),o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>a.path}};return o.parent=o,o}},e}},{},"/proc/self/fd")},createStandardStreams(){u.stdin?n.createDevice("/dev","stdin",u.stdin):n.symlink("/dev/tty","/dev/stdin"),u.stdout?n.createDevice("/dev","stdout",null,u.stdout):n.symlink("/dev/tty","/dev/stdout"),u.stderr?n.createDevice("/dev","stderr",null,u.stderr):n.symlink("/dev/tty1","/dev/stderr"),n.open("/dev/stdin",0),n.open("/dev/stdout",1),n.open("/dev/stderr",1)},ensureErrnoError(){n.ErrnoError||(n.ErrnoError=function(e,r){this.name="ErrnoError",this.node=r,this.setErrno=function(s){this.errno=s},this.setErrno(e),this.message="FS error"},n.ErrnoError.prototype=new Error,n.ErrnoError.prototype.constructor=n.ErrnoError,[44].forEach(t=>{n.genericErrors[t]=new n.ErrnoError(t),n.genericErrors[t].stack="<generic error, no stack>"}))},staticInit(){n.ensureErrnoError(),n.nameTable=new Array(4096),n.mount(y,{},"/"),n.createDefaultDirectories(),n.createDefaultDevices(),n.createSpecialDirectories(),n.filesystems={MEMFS:y}},init(t,e,r){n.init.initialized=!0,n.ensureErrnoError(),u.stdin=t||u.stdin,u.stdout=e||u.stdout,u.stderr=r||u.stderr,n.createStandardStreams()},quit(){n.init.initialized=!1;for(var t=0;t<n.streams.length;t++){var e=n.streams[t];e&&n.close(e)}},findObject(t,e){var r=n.analyzePath(t,e);return r.exists?r.object:null},analyzePath(t,e){try{t=(r=n.lookupPath(t,{follow:!e})).path}catch{}var s={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=n.lookupPath(t,{parent:!0});s.parentExists=!0,s.parentPath=r.path,s.parentObject=r.node,s.name=k.basename(t),r=n.lookupPath(t,{follow:!e}),s.exists=!0,s.path=r.path,s.object=r.node,s.name=r.node.name,s.isRoot="/"===r.path}catch(i){s.error=i.errno}return s},createPath(t,e,r,s){t="string"==typeof t?t:n.getPath(t);for(var i=e.split("/").reverse();i.length;){var a=i.pop();if(a){var o=k.join2(t,a);try{n.mkdir(o)}catch{}t=o}}return o},createFile(t,e,r,s,i){var a=k.join2("string"==typeof t?t:n.getPath(t),e),o=We(s,i);return n.create(a,o)},createDataFile(t,e,r,s,i,a){var o=e;t&&(t="string"==typeof t?t:n.getPath(t),o=e?k.join2(t,e):t);var l=We(s,i),c=n.create(o,l);if(r){if("string"==typeof r){for(var d=new Array(r.length),w=0,E=r.length;w<E;++w)d[w]=r.charCodeAt(w);r=d}n.chmod(c,146|l);var m=n.open(c,577);n.write(m,r,0,r.length,0,a),n.close(m),n.chmod(c,l)}return c},createDevice(t,e,r,s){var i=k.join2("string"==typeof t?t:n.getPath(t),e),a=We(!!r,!!s);n.createDevice.major||(n.createDevice.major=64);var o=n.makedev(n.createDevice.major++,0);return n.registerDevice(o,{open(l){l.seekable=!1},close(l){s&&s.buffer&&s.buffer.length&&s(10)},read(l,c,d,w,E){for(var m=0,f=0;f<w;f++){var _;try{_=r()}catch{throw new n.ErrnoError(29)}if(void 0===_&&0===m)throw new n.ErrnoError(6);if(null==_)break;m++,c[d+f]=_}return m&&(l.node.timestamp=Date.now()),m},write(l,c,d,w,E){for(var m=0;m<w;m++)try{s(c[d+m])}catch{throw new n.ErrnoError(29)}return w&&(l.node.timestamp=Date.now()),m}}),n.mkdev(i,a,o)},forceLoadFile(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!te)throw new Error("Cannot load without read() or XMLHttpRequest.");try{t.contents=Ee(te(t.url),!0),t.usedBytes=t.contents.length}catch{throw new n.ErrnoError(29)}},createLazyFile(t,e,r,s,i){function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(f){if(!(f>this.length-1||f<0)){var _=f%this.chunkSize;return this.getter(f/this.chunkSize|0)[_]}},a.prototype.setDataGetter=function(f){this.getter=f},a.prototype.cacheLength=function(){var f=new XMLHttpRequest;if(f.open("HEAD",r,!1),f.send(null),!(f.status>=200&&f.status<300||304===f.status))throw new Error("Couldn't load "+r+". Status: "+f.status);var C,_=Number(f.getResponseHeader("Content-length")),H=(C=f.getResponseHeader("Accept-Ranges"))&&"bytes"===C,N=(C=f.getResponseHeader("Content-Encoding"))&&"gzip"===C,h=1048576;H||(h=_);var M=this;M.setDataGetter(T=>{var O=T*h,P=(T+1)*h-1;if(P=Math.min(P,_-1),typeof M.chunks[T]>"u"&&(M.chunks[T]=((T,O)=>{if(T>O)throw new Error("invalid range ("+T+", "+O+") or no bytes requested!");if(O>_-1)throw new Error("only "+_+" bytes available! programmer error!");var P=new XMLHttpRequest;if(P.open("GET",r,!1),_!==h&&P.setRequestHeader("Range","bytes="+T+"-"+O),P.responseType="arraybuffer",P.overrideMimeType&&P.overrideMimeType("text/plain; charset=x-user-defined"),P.send(null),!(P.status>=200&&P.status<300||304===P.status))throw new Error("Couldn't load "+r+". Status: "+P.status);return void 0!==P.response?new Uint8Array(P.response||[]):Ee(P.responseText||"",!0)})(O,P)),typeof M.chunks[T]>"u")throw new Error("doXHR failed!");return M.chunks[T]}),(N||!_)&&(h=_=1,_=this.getter(0).length,h=_,He("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=_,this._chunkSize=h,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!K)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o=new a;Object.defineProperties(o,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var l={isDevice:!1,contents:o}}else l={isDevice:!1,url:r};var c=n.createFile(t,e,l,s,i);l.contents?c.contents=l.contents:l.url&&(c.contents=null,c.url=l.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var d={};function E(m,f,_,C,H){var N=m.node.contents;if(H>=N.length)return 0;var h=Math.min(N.length-H,C);if(N.slice)for(var p=0;p<h;p++)f[_+p]=N[H+p];else for(p=0;p<h;p++)f[_+p]=N.get(H+p);return h}return Object.keys(c.stream_ops).forEach(m=>{var f=c.stream_ops[m];d[m]=function(){return n.forceLoadFile(c),f.apply(null,arguments)}}),d.read=(m,f,_,C,H)=>(n.forceLoadFile(c),E(m,f,_,C,H)),d.mmap=(m,f,_,C,H)=>{n.forceLoadFile(c);var N=yt(f);if(!N)throw new n.ErrnoError(48);return E(m,D,N,f,_),{ptr:N,allocated:!0}},c.stream_ops=d,c}},b={DEFAULT_POLLMASK:5,calculateAt(t,e,r){if(k.isAbs(e))return e;var s;if(s=-100===t?n.cwd():b.getStreamFromFD(t).path,0==e.length){if(!r)throw new n.ErrnoError(44);return s}return k.join2(s,e)},doStat(t,e,r){try{var s=t(e)}catch(l){if(l&&l.node&&k.normalize(e)!==k.normalize(n.getPath(l.node)))return-54;throw l}g[r>>2]=s.dev,g[r+4>>2]=s.mode,S[r+8>>2]=s.nlink,g[r+12>>2]=s.uid,g[r+16>>2]=s.gid,g[r+20>>2]=s.rdev,A=[s.size>>>0,(v=s.size,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[r+24>>2]=A[0],g[r+28>>2]=A[1],g[r+32>>2]=4096,g[r+36>>2]=s.blocks;var i=s.atime.getTime(),a=s.mtime.getTime(),o=s.ctime.getTime();return A=[Math.floor(i/1e3)>>>0,(v=Math.floor(i/1e3),+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[r+40>>2]=A[0],g[r+44>>2]=A[1],S[r+48>>2]=i%1e3*1e3,A=[Math.floor(a/1e3)>>>0,(v=Math.floor(a/1e3),+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[r+56>>2]=A[0],g[r+60>>2]=A[1],S[r+64>>2]=a%1e3*1e3,A=[Math.floor(o/1e3)>>>0,(v=Math.floor(o/1e3),+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[r+72>>2]=A[0],g[r+76>>2]=A[1],S[r+80>>2]=o%1e3*1e3,A=[s.ino>>>0,(v=s.ino,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[r+88>>2]=A[0],g[r+92>>2]=A[1],0},doMsync(t,e,r,s,i){if(!n.isFile(e.node.mode))throw new n.ErrnoError(43);if(2&s)return 0;var a=J.slice(t,t+r);n.msync(e,a,i,r,s)},varargs:void 0,get(){var t=g[+b.varargs>>2];return b.varargs+=4,t},getp:()=>b.get(),getStr:t=>X(t),getStreamFromFD:t=>n.getStreamChecked(t)},je=(t,e,r)=>ae(t,J,e,r),qe=(t,e)=>e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN;wt=()=>performance.now();var $r=t=>{var r=(t-pe.buffer.byteLength+65535)/65536;try{return pe.grow(r),lt(),1}catch{}},Ve={},oe=()=>{if(!oe.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ce||"./this.program"};for(var r in Ve)void 0===Ve[r]?delete e[r]:e[r]=Ve[r];var s=[];for(var r in e)s.push(`${r}=${e[r]}`);oe.strings=s}return oe.strings},bt=(t,e)=>{me=t,(t=>{me=t,vr||(u.onExit&&u.onExit(t),Oe=!0),he(t,new ye(t))})(t)},ss=bt,_e=t=>t%4==0&&(t%100!=0||t%400==0),Et=[31,29,31,30,31,30,31,31,30,31,30,31],_t=[31,28,31,30,31,30,31,31,30,31,30,31],kt=function(t,e,r,s){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=n.nextInode++,this.name=e,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=s};Object.defineProperties(kt.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return n.isDir(this.mode)}},isDevice:{get:function(){return n.isChrdev(this.mode)}}}),n.FSNode=kt,n.createPreloadedFile=(t,e,r,s,i,a,o,l,c,d)=>{var w=e?z.resolve(k.join2(t,e)):t;function m(f){function _(C){d&&d(),l||((t,e,r,s,i,a)=>{n.createDataFile(t,e,r,s,i,a)})(t,e,C,s,i,c),a&&a(),ve()}((t,e,r,s)=>{typeof Browser<"u"&&Browser.init();var i=!1;return Pr.forEach(a=>{i||a.canHandle(e)&&(a.handle(t,e,r,s),i=!0)}),i})(f,w,_,()=>{o&&o(),ve()})||_(f)}Ye(),"string"==typeof r?((t,e,r,s)=>{var i=s?"":`al ${t}`;re(t,a=>{(function Zt(t,e){t||Z(e)})(a,`Loading data file "${t}" failed (no arrayBuffer).`),e(new Uint8Array(a)),i&&ve()},a=>{if(!r)throw`Loading data file "${t}" failed.`;r()}),i&&Ye()})(r,f=>m(f),o):m(r)},n.staticInit();var Te,gs={a:(t,e,r,s)=>{Z(`Assertion failed: ${X(t)}, at: `+[e?X(e):"unknown filename",r,s?X(s):"unknown function"])},b:(t,e,r)=>{throw new yr(t).init(e,r),t},d:function Cr(t,e,r){b.varargs=r;try{var s=b.getStreamFromFD(t);switch(e){case 0:if((i=b.get())<0)return-28;for(;n.streams[i];)i++;return n.createStream(s,i).fd;case 1:case 2:case 6:case 7:return 0;case 3:return s.flags;case 4:var i=b.get();return s.flags|=i,0;case 5:return i=b.getp(),ne[i+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return g[Tt()>>2]=28,-1}}catch(l){if(typeof n>"u"||"ErrnoError"!==l.name)throw l;return-l.errno}},y:function Ir(t,e){try{var r=b.getStreamFromFD(t);return b.doStat(n.stat,r.path,e)}catch(s){if(typeof n>"u"||"ErrnoError"!==s.name)throw s;return-s.errno}},u:function Fr(t,e){try{if(0===e)return-28;var r=n.cwd(),s=be(r)+1;return e<s?-68:(je(r,t,e),s)}catch(i){if(typeof n>"u"||"ErrnoError"!==i.name)throw i;return-i.errno}},r:function xr(t,e,r){try{var s=b.getStreamFromFD(t);s.getdents||(s.getdents=n.readdir(s.path));for(var i=280,a=0,o=n.llseek(s,0,1),l=Math.floor(o/i);l<s.getdents.length&&a+i<=r;){var c,d,w=s.getdents[l];if("."===w)c=s.node.id,d=4;else if(".."===w)c=n.lookupPath(s.path,{parent:!0}).node.id,d=4;else{var m=n.lookupNode(s.node,w);c=m.id,d=n.isChrdev(m.mode)?2:n.isDir(m.mode)?4:n.isLink(m.mode)?10:8}A=[c>>>0,(v=c,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[e+a>>2]=A[0],g[e+a+4>>2]=A[1],A=[(l+1)*i>>>0,(v=(l+1)*i,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[e+a+8>>2]=A[0],g[e+a+12>>2]=A[1],ne[e+a+16>>1]=280,D[e+a+18|0]=d,je(w,e+a+19,256),a+=i,l+=1}return n.llseek(s,l*i,0),a}catch(f){if(typeof n>"u"||"ErrnoError"!==f.name)throw f;return-f.errno}},A:function Nr(t,e,r){b.varargs=r;try{var s=b.getStreamFromFD(t);switch(e){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return s.tty?0:-59;case 21505:if(!s.tty)return-59;if(s.tty.ops.ioctl_tcgets){var i=s.tty.ops.ioctl_tcgets(s),a=b.getp();g[a>>2]=i.c_iflag||0,g[a+4>>2]=i.c_oflag||0,g[a+8>>2]=i.c_cflag||0,g[a+12>>2]=i.c_lflag||0;for(var o=0;o<32;o++)D[a+o+17|0]=i.c_cc[o]||0;return 0}return 0;case 21506:case 21507:case 21508:if(!s.tty)return-59;if(s.tty.ops.ioctl_tcsets){a=b.getp();var l=g[a>>2],c=g[a+4>>2],d=g[a+8>>2],w=g[a+12>>2],E=[];for(o=0;o<32;o++)E.push(D[a+o+17|0]);return s.tty.ops.ioctl_tcsets(s.tty,e,{c_iflag:l,c_oflag:c,c_cflag:d,c_lflag:w,c_cc:E})}return 0;case 21519:return s.tty?(a=b.getp(),g[a>>2]=0,0):-59;case 21520:return s.tty?-28:-59;case 21531:return a=b.getp(),n.ioctl(s,e,a);case 21523:if(!s.tty)return-59;if(s.tty.ops.ioctl_tiocgwinsz){var m=s.tty.ops.ioctl_tiocgwinsz(s.tty);a=b.getp(),ne[a>>1]=m[0],ne[a+2>>1]=m[1]}return 0;default:return-28}}catch(f){if(typeof n>"u"||"ErrnoError"!==f.name)throw f;return-f.errno}},v:function Br(t,e){try{return t=b.getStr(t),b.doStat(n.lstat,t,e)}catch(r){if(typeof n>"u"||"ErrnoError"!==r.name)throw r;return-r.errno}},w:function Hr(t,e,r,s){try{e=b.getStr(e);var i=256&s,a=4096&s;return s&=-6401,e=b.calculateAt(t,e,a),b.doStat(i?n.lstat:n.stat,e,r)}catch(o){if(typeof n>"u"||"ErrnoError"!==o.name)throw o;return-o.errno}},h:function Or(t,e,r,s){b.varargs=s;try{e=b.getStr(e),e=b.calculateAt(t,e);var i=s?b.get():0;return n.open(e,r,i).fd}catch(a){if(typeof n>"u"||"ErrnoError"!==a.name)throw a;return-a.errno}},x:function Ur(t,e){try{return t=b.getStr(t),b.doStat(n.stat,t,e)}catch(r){if(typeof n>"u"||"ErrnoError"!==r.name)throw r;return-r.errno}},k:()=>!0,n:function Wr(t,e,r,s,i,a,o,l){var c=qe(i,a);try{if(isNaN(c))return 61;var d=b.getStreamFromFD(s),w=n.mmap(d,t,c,e,r),E=w.ptr;return g[o>>2]=w.allocated,S[l>>2]=E,0}catch(m){if(typeof n>"u"||"ErrnoError"!==m.name)throw m;return-m.errno}},o:function jr(t,e,r,s,i,a,o){var l=qe(a,o);try{if(isNaN(l))return 61;var c=b.getStreamFromFD(i);2&r&&b.doMsync(t,c,e,s,l),n.munmap(c)}catch(d){if(typeof n>"u"||"ErrnoError"!==d.name)throw d;return-d.errno}},f:()=>{Z("")},j:wt,l:(t,e,r)=>J.copyWithin(t,e,e+r),q:t=>{var c,e=J.length,r=2147483648;if((t>>>=0)>r)return!1;for(var i=1;i<=4;i*=2){var a=e*(1+.2/i);a=Math.min(a,t+100663296);var o=Math.min(r,(c=Math.max(t,a))+(65536-c%65536)%65536);if($r(o))return!0}return!1},s:(t,e)=>{var r=0;return oe().forEach((s,i)=>{var a=e+r;S[t+4*i>>2]=a,((t,e)=>{for(var r=0;r<t.length;++r)D[0|e++]=t.charCodeAt(r);D[0|e]=0})(s,a),r+=s.length+1}),0},t:(t,e)=>{var r=oe();S[t>>2]=r.length;var s=0;return r.forEach(i=>s+=i.length+1),S[e>>2]=s,0},e:ss,g:function ns(t){try{var e=b.getStreamFromFD(t);return n.close(e),0}catch(r){if(typeof n>"u"||"ErrnoError"!==r.name)throw r;return r.errno}},z:function as(t,e,r,s){try{var a=((t,e,r,s)=>{for(var i=0,a=0;a<r;a++){var o=S[e>>2],l=S[e+4>>2];e+=8;var c=n.read(t,D,o,l,s);if(c<0)return-1;if(i+=c,c<l)break;typeof s<"u"&&(s+=c)}return i})(b.getStreamFromFD(t),e,r);return S[s>>2]=a,0}catch(o){if(typeof n>"u"||"ErrnoError"!==o.name)throw o;return o.errno}},p:function os(t,e,r,s,i){var a=qe(e,r);try{if(isNaN(a))return 61;var o=b.getStreamFromFD(t);return n.llseek(o,a,s),A=[o.position>>>0,(v=o.position,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[i>>2]=A[0],g[i+4>>2]=A[1],o.getdents&&0===a&&0===s&&(o.getdents=null),0}catch(l){if(typeof n>"u"||"ErrnoError"!==l.name)throw l;return l.errno}},i:function us(t,e,r,s){try{var a=((t,e,r,s)=>{for(var i=0,a=0;a<r;a++){var o=S[e>>2],l=S[e+4>>2];e+=8;var c=n.write(t,D,o,l,s);if(c<0)return-1;i+=c,typeof s<"u"&&(s+=c)}return i})(b.getStreamFromFD(t),e,r);return S[s>>2]=a,0}catch(o){if(typeof n>"u"||"ErrnoError"!==o.name)throw o;return o.errno}},m:function mr(t,e,r,s){!function Gt(t,e){ue&&postMessage(W.builder().setWorkerId(ue.workerId).setMessage(Le.builder().setResult(t,e)))}(X(t,e),X(r,s))},c:(t,e,r,s,i)=>((t,e,r,s)=>{var i=S[s+40>>2],a={tm_sec:g[s>>2],tm_min:g[s+4>>2],tm_hour:g[s+8>>2],tm_mday:g[s+12>>2],tm_mon:g[s+16>>2],tm_year:g[s+20>>2],tm_wday:g[s+24>>2],tm_yday:g[s+28>>2],tm_isdst:g[s+32>>2],tm_gmtoff:g[s+36>>2],tm_zone:i?X(i):""},o=X(r),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in l)o=o.replace(new RegExp(c,"g"),l[c]);var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],w=["January","February","March","April","May","June","July","August","September","October","November","December"];function E(h,p,M){for(var T="number"==typeof h?h.toString():h||"";T.length<p;)T=M[0]+T;return T}function m(h,p){return E(h,p,"0")}function f(h,p){function M(O){return O<0?-1:O>0?1:0}var T;return 0===(T=M(h.getFullYear()-p.getFullYear()))&&0===(T=M(h.getMonth()-p.getMonth()))&&(T=M(h.getDate()-p.getDate())),T}function _(h){switch(h.getDay()){case 0:return new Date(h.getFullYear()-1,11,29);case 1:return h;case 2:return new Date(h.getFullYear(),0,3);case 3:return new Date(h.getFullYear(),0,2);case 4:return new Date(h.getFullYear(),0,1);case 5:return new Date(h.getFullYear()-1,11,31);case 6:return new Date(h.getFullYear()-1,11,30)}}function C(h){var p=((t,e)=>{for(var r=new Date(t.getTime());e>0;){var s=_e(r.getFullYear()),i=r.getMonth(),a=(s?Et:_t)[i];if(!(e>a-r.getDate()))return r.setDate(r.getDate()+e),r;e-=a-r.getDate()+1,r.setDate(1),i<11?r.setMonth(i+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r})(new Date(h.tm_year+1900,0,1),h.tm_yday),M=new Date(p.getFullYear(),0,4),T=new Date(p.getFullYear()+1,0,4),O=_(M),P=_(T);return f(O,p)<=0?f(P,p)<=0?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}var H={"%a":h=>d[h.tm_wday].substring(0,3),"%A":h=>d[h.tm_wday],"%b":h=>w[h.tm_mon].substring(0,3),"%B":h=>w[h.tm_mon],"%C":h=>m((h.tm_year+1900)/100|0,2),"%d":h=>m(h.tm_mday,2),"%e":h=>E(h.tm_mday,2," "),"%g":h=>C(h).toString().substring(2),"%G":h=>C(h),"%H":h=>m(h.tm_hour,2),"%I":h=>{var p=h.tm_hour;return 0==p?p=12:p>12&&(p-=12),m(p,2)},"%j":h=>m(h.tm_mday+((t,e)=>{for(var r=0,s=0;s<=e;r+=t[s++]);return r})(_e(h.tm_year+1900)?Et:_t,h.tm_mon-1),3),"%m":h=>m(h.tm_mon+1,2),"%M":h=>m(h.tm_min,2),"%n":()=>"\n","%p":h=>h.tm_hour>=0&&h.tm_hour<12?"AM":"PM","%S":h=>m(h.tm_sec,2),"%t":()=>"\t","%u":h=>h.tm_wday||7,"%U":h=>m(Math.floor((h.tm_yday+7-h.tm_wday)/7),2),"%V":h=>{var p=Math.floor((h.tm_yday+7-(h.tm_wday+6)%7)/7);if((h.tm_wday+371-h.tm_yday-2)%7<=2&&p++,p){if(53==p){var T=(h.tm_wday+371-h.tm_yday)%7;4!=T&&(3!=T||!_e(h.tm_year))&&(p=1)}}else{p=52;var M=(h.tm_wday+7-h.tm_yday-1)%7;(4==M||5==M&&_e(h.tm_year%400-1))&&p++}return m(p,2)},"%w":h=>h.tm_wday,"%W":h=>m(Math.floor((h.tm_yday+7-(h.tm_wday+6)%7)/7),2),"%y":h=>(h.tm_year+1900).toString().substring(2),"%Y":h=>h.tm_year+1900,"%z":h=>{var p=h.tm_gmtoff;return(p>=0?"+":"-")+("0000"+(p=(p=Math.abs(p)/60)/60*100+p%60)).slice(-4)},"%Z":h=>h.tm_zone,"%%":()=>"%"};for(var c in o=o.replace(/%%/g,"\0\0"),H)o.includes(c)&&(o=o.replace(new RegExp(c,"g"),H[c](a)));var N=Ee(o=o.replace(/\0\0/g,"%"),!1);return N.length>e?0:(((t,e)=>{D.set(t,e)})(N,t),N.length-1)})(t,e,r,s)},F=function pr(){var t={a:gs};function e(s,i){return pe=(F=s.exports).B,lt(),function ur(t){ct.unshift(t)}(F.C),ve(),F}if(Ye(),u.instantiateWasm)try{return u.instantiateWasm(t,e)}catch(s){return q(`Module.instantiateWasm callback failed with error: ${s}`),!1}return function fr(t,e,r,s){t||"function"!=typeof WebAssembly.instantiateStreaming||dt(e)||ge(e)||de||"function"!=typeof fetch?pt(e,r,s):fetch(e,{credentials:"same-origin"}).then(i=>WebAssembly.instantiateStreaming(i,r).then(s,function(o){return q(`wasm streaming compile failed: ${o}`),q("falling back to ArrayBuffer instantiation"),pt(e,r,s)}))}(se,Q,t,function r(s){e(s.instance)}),{}}(),St=(u._free=t=>(u._free=F.E)(t),u._ChessSetup=(t,e)=>(u._ChessSetup=F.F)(t,e),u._ChessCalculate=(t,e,r)=>(u._ChessCalculate=F.G)(t,e,r),u._main=(t,e)=>(St=u._main=F.H)(t,e)),Tt=(u._Setup=(t,e)=>(u._Setup=F.I)(t,e),u._Calculate=(t,e,r)=>(u._Calculate=F.J)(t,e,r),u._malloc=t=>(u._malloc=F.K)(t),()=>(Tt=F.L)()),At=(t,e)=>(At=F.M)(t,e),Xe=t=>(Xe=F.N)(t),Rt=t=>(Rt=F.O)(t);function Pt(t=xe){function e(){Te||(Te=!0,u.calledRun=!0,!Oe&&(function ir(){!u.noFSInit&&!n.init.initialized&&n.init(),n.ignorePermissions=!1,$.init(),we(ct)}(),function ar(){we(rr)}(),u.onRuntimeInitialized&&u.onRuntimeInitialized(),Lt&&function Ts(t=[]){var e=St;t.unshift(ce);var r=t.length,s=Xe(4*(r+1)),i=s;t.forEach(o=>{S[i>>2]=(t=>{var e=be(t)+1,r=Xe(e);return je(t,r,e),r})(o),i+=4}),S[i>>2]=0;try{var a=e(r,s);return bt(a),a}catch(o){return(t=>{if(t instanceof ye||"unwind"==t)return me;he(1,t)})(o)}}(t),function or(){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;)t=u.postRun.shift(),ht.unshift(t);var t;we(ht)}()))}G>0||(function nr(){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)t=u.preRun.shift(),ut.unshift(t);var t;we(ut)}(),G>0)||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),e()},1)):e())}if(u.___start_em_js=264140,u.___stop_em_js=264275,ie=function t(){Te||Pt(),Te||(ie=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();var Lt=!0;u.noInitialRun&&(Lt=!1),Pt()},231:()=>{},1653:()=>{},1633:()=>{}},$e={};function Ae(I){var Re=$e[I];if(void 0!==Re)return Re.exports;var U=$e[I]={id:I,loaded:!1,exports:{}};return Mt[I](U,U.exports,Ae),U.loaded=!0,U.exports}Ae.hmd=I=>((I=Object.create(I)).children||(I.children=[]),Object.defineProperty(I,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+I.id)}}),I),Ae(3909)})();